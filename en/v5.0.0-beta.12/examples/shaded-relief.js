webpackJsonp([54],{558:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2),e=c(1),f=c(6),g=c(16);const h=new g.o({url:"https://{a-d}.tiles.mapbox.com/v3/aj.sf-dem/{z}/{x}/{y}.png",crossOrigin:"anonymous",transition:0}),i=new g.g({sources:[h],operationType:"image",operation:function(a,b){var c=Math.sin,d=Math.cos,e=Math.PI;const f=a[0],g=f.width,h=f.height,i=f.data,j=new Uint8ClampedArray(i.length),k=2*b.resolution,l=g-1,m=h-1,n=[0,0,0,0],o=e/2,p=e*b.sunEl/180,q=e*b.sunAz/180,r=d(p),s=c(p);let t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;for(u=0;u<=m;++u)for(x=0===u?0:u-1,y=u===m?m:u+1,t=0;t<=l;++t)v=0===t?0:t-1,w=t===l?l:t+1,z=4*(u*g+v),n[0]=i[z],n[1]=i[z+1],n[2]=i[z+2],n[3]=i[z+3],A=b.vert*(n[0]+2*n[1]+3*n[2]),z=4*(u*g+w),n[0]=i[z],n[1]=i[z+1],n[2]=i[z+2],n[3]=i[z+3],B=b.vert*(n[0]+2*n[1]+3*n[2]),C=(B-A)/k,z=4*(x*g+t),n[0]=i[z],n[1]=i[z+1],n[2]=i[z+2],n[3]=i[z+3],A=b.vert*(n[0]+2*n[1]+3*n[2]),z=4*(y*g+t),n[0]=i[z],n[1]=i[z+1],n[2]=i[z+2],n[3]=i[z+3],B=b.vert*(n[0]+2*n[1]+3*n[2]),D=(B-A)/k,E=Math.atan(Math.sqrt(C*C+D*D)),F=Math.atan2(D,-C),F=0>F?o-F:F>o?2*e-F+o:o-F,G=s*d(E)+r*c(E)*d(q-F),z=4*(u*g+t),H=255*G,j[z]=H,j[z+1]=H,j[z+2]=H,j[z+3]=i[z+3];return{data:j,width:g,height:h}}}),j=new d.a({target:"map",layers:[new f.d({source:new g.f}),new f.c({opacity:.3,source:i})],view:new e.a({extent:[-13675026,4439648,-13580856,4580292],center:[-13615645,4497969],minZoom:10,maxZoom:16,zoom:13})}),k={};["vert","sunEl","sunAz"].forEach(function(a){const b=document.getElementById(a),c=document.getElementById(a+"Out");b.addEventListener("input",function(){c.innerText=b.value,i.changed()}),c.innerText=b.value,k[a]=b}),i.on("beforeoperations",function(a){const b=a.data;for(const c in b.resolution=a.resolution,k)b[c]=+k[c].value})}},[558]);