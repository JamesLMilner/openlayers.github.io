"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6423],{19191:function(e,t,r){var n=r(41376),o=r(21510),c=r(6566),s=r(8768),a=r(46583),i=r(14197),u=r(28083),l=r(7834);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w="https://api.mapbox.com";function k(e){var t="mapbox://";return 0!==e.indexOf(t)?"":e.slice(t.length)}function g(e,t,r){var n=k(e);if(!n){if(!t)return e;var o=new URL(e,location.href);return o.searchParams.set(r,t),decodeURI(o.href)}return"https://{a-d}.tiles.mapbox.com/v4/".concat(n,"/{z}/{x}/{y}.vector.pbf?access_token=").concat(t)}var x=function(e){y(r,e);var t=v(r);function r(e){var n;return p(this,r),(n=t.call(this,c.Z.ERROR)).error=e,n}return r}(o.ZP),O="vector",E=function(e){y(c,e);var t,r,n,o=v(c);function c(e){var t;p(this,c);var r=!("declutter"in e)||e.declutter,n=new u.Z({state:a.Z.LOADING,format:new s.Z});((t=o.call(this,{source:n,declutter:r,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties})).sourceId=e.source,t.layers=e.layers,e.accessToken)?t.accessToken=e.accessToken:new URL(e.styleUrl,location.href).searchParams.forEach((function(e,r){t.accessToken=e,t.accessTokenParam_=r}));return t.fetchStyle(e.styleUrl),t}return t=c,(r=[{key:"fetchStyle",value:function(e){var t=this,r=function(e,t){var r=k(e);if(!r)return e;var n="styles/";if(0!==r.indexOf(n))throw new Error("unexpected style url: ".concat(e));var o=r.slice(n.length);return"".concat(w,"/styles/v1/").concat(o,"?&access_token=").concat(t)}(e,this.accessToken);fetch(r).then((function(e){if(!e.ok)throw new Error("unexpected response when fetching style: ".concat(e.status));return e.json()})).then((function(e){t.onStyleLoad(e)})).catch((function(e){t.handleError(e)}))}},{key:"onStyleLoad",value:function(e){var t,r,n=this;if(this.layers){for(var o,c={},s=0;s<e.layers.length;++s){var i=e.layers[s];i.source&&(c[i.id]=i.source)}for(var u=0;u<this.layers.length;++u){var f=c[this.layers[u]];if(!f)return void this.handleError(new Error("could not find source for ".concat(this.layers[u])));if(o){if(o!==f)return void this.handleError(new Error("layers can only use a single source, found ".concat(o," and ").concat(f)))}else o=f}t=o,r=this.layers}else t=this.sourceId,r=t;r||(t=Object.keys(e.sources)[0],r=t),e.sprite&&(e.sprite=function(e,t){var r=k(e);if(!r)return e;var n="sprites/";if(0!==r.indexOf(n))throw new Error("unexpected sprites url: ".concat(e));var o=r.slice(n.length);return"".concat(w,"/styles/v1/").concat(o,"/sprite?access_token=").concat(t)}(e.sprite,this.accessToken)),e.glyphs&&(e.glyphs=function(e,t){var r=k(e);if(!r)return e;var n="fonts/";if(0!==r.indexOf(n))throw new Error("unexpected fonts url: ".concat(e));var o=r.slice(n.length);return"".concat(w,"/fonts/v1/").concat(o,"/0-255.pbf?access_token=").concat(t)}(e.glyphs,this.accessToken));var h=e.sources[t];if(h.type===O){var p=this.getSource();0===h.url.indexOf("mapbox://")||-1!==h.url.indexOf("{z}")?(p.setUrl(g(h.url,this.accessToken,this.accessTokenParam_)),(0,l.bg)(this,e,r).then((function(){p.setState(a.Z.READY)})).catch((function(e){n.handleError(e)}))):(h.tiles&&(h.tiles=h.tiles.map((function(e){return g(e,n.accessToken,n.accessTokenParam_)}))),(0,l.KO)(h,g(h.url,this.accessToken,this.accessTokenParam_)).then((function(t){(0,l.bg)(n,e,r).then((function(){n.setSource(t)})).catch((function(e){n.setSource(t),n.handleError(e)}))})))}else this.handleError(new Error("only works for vector sources, found ".concat(h.type)))}},{key:"handleError",value:function(e){this.dispatchEvent(new x(e)),this.getSource().setState(a.Z.ERROR)}}])&&h(t.prototype,r),n&&h(t,n),c}(i.Z),T=r(54354);new n.Z({target:"map",layers:[new E({styleUrl:"mapbox://styles/mapbox/bright-v9",accessToken:"pk.eyJ1IjoiYWhvY2V2YXIiLCJhIjoiY2t0cGdwMHVnMGdlbzMxbDhwazBic2xrNSJ9.WbcTL9uj8JPAsnT9mgb7oQ"})],view:new T.ZP({center:[0,0],zoom:2})})}},function(e){var t=function(t){return e(e.s=t)};t(9877),t(19191)}]);
//# sourceMappingURL=mapbox-vector-layer.js.map