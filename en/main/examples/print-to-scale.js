(self.webpackChunk=self.webpackChunk||[]).push([[5440],{3273:function(t,e,n){"use strict";var a=n(1625),r=n(7842),o=n(640),i=n(8717),c=n(5220),s=n(5752),l=n(5982),u=n(8875),p=n(4589),d=n(7377);s.Z.defs("EPSG:27700","+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs"),(0,d.z)(s.Z);var m=(0,p.U2)("EPSG:27700");m.setExtent([0,0,7e5,13e5]);var f=new r.Z;fetch("https://tiles.arcgis.com/tiles/qHLhLQrcvEnxjtPr/arcgis/rest/services/OS_Open_Raster/MapServer/WMTS").then((function(t){return t.text()})).then((function(t){var e=(new c.Z).read(t),n=(0,i.B)(e,{layer:"OS_Open_Raster"});n.attributions="Contains OS data Â© Crown Copyright and database right "+(new Date).getFullYear(),n.crossOrigin="",n.projection=m,n.wrapX=!1,f.setSource(new i.Z(n))}));var v=new a.Z({layers:[f],controls:(0,l.ce)({attributionOptions:{collapsible:!1}}),target:"map",view:new o.ZP({center:[373500,436500],projection:m,zoom:7})}),w=new u.Z({bar:!0,text:!0,minWidth:125});v.addControl(w);var _={a0:[1189,841],a1:[841,594],a2:[594,420],a3:[420,297],a4:[297,210],a5:[210,148]},g={filter:function(t){var e=t.className||"";return-1===e.indexOf("ol-control")||e.indexOf("ol-scale")>-1||e.indexOf("ol-attribution")>-1&&e.indexOf("ol-uncollapsible")}},h=document.getElementById("export-pdf");h.addEventListener("click",(function(){h.disabled=!0,document.body.style.cursor="progress";var t=document.getElementById("format").value,e=document.getElementById("resolution").value,n=document.getElementById("scale").value,a=_[t],r=Math.round(a[0]*e/25.4),o=Math.round(a[1]*e/25.4),i=v.getView().getResolution(),c=n/(0,p._Q)(v.getView().getProjection(),e/25.4,v.getView().getCenter());v.once("rendercomplete",(function(){g.width=r,g.height=o,domtoimage.toJpeg(v.getViewport(),g).then((function(e){var n=new jsPDF("landscape",void 0,t);n.addImage(e,"JPEG",0,0,a[0],a[1]),n.save("map.pdf"),w.setDpi(),v.getTargetElement().style.width="",v.getTargetElement().style.height="",v.updateSize(),v.getView().setResolution(i),h.disabled=!1,document.body.style.cursor="auto"}))})),w.setDpi(e),v.getTargetElement().style.width=r+"px",v.getTargetElement().style.height=o+"px",v.updateSize(),v.getView().setResolution(c)}),!1)}},function(t){"use strict";var e;e=3273,t(t.s=e)}]);
//# sourceMappingURL=print-to-scale.js.map