(self.webpackChunk=self.webpackChunk||[]).push([[3465],{3818:function(r,t,n){"use strict";var e=n(5277),o=n(1625),i=n(1622),a=n(8557),u=n(4104),c=n(2294),f=n(4158);function s(r,t,n,e,o,i){var a,u;void 0!==o?(a=o,u=void 0!==i?i:0):(a=[],u=0);for(var c=t;c<n;){var f=r[c++];a[u++]=r[c++],a[u++]=f;for(var s=2;s<e;++s)a[u++]=r[c++]}return a.length=u,a}var w=n(4589),v=n(7889),p=n(9445),h=n(3345);function m(r){for(var t,n="";r>=32;)t=63+(32|31&r),n+=String.fromCharCode(t),r>>=5;return t=r+63,n+=String.fromCharCode(t)}var l=function(r){function t(t){r.call(this);var n=t||{};this.dataProjection=(0,w.U2)("EPSG:4326"),this.t=n.factor?n.factor:1e5,this.o=n.geometryLayout?n.geometryLayout:a.Z.XY}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.readFeatureFromText=function(r,t){var n=this.readGeometryFromText(r,t);return new e.Z(n)},t.prototype.readFeaturesFromText=function(r,t){return[this.readFeatureFromText(r,t)]},t.prototype.readGeometryFromText=function(r,t){var n=(0,v.tP)(this.o),e=function(r,t,n){var e,o=n||1e5,i=new Array(t);for(e=0;e<t;++e)i[e]=0;for(var a=function(r,t){for(var n=t||1e5,e=function(r){for(var t=function(r){for(var t=[],n=0,e=0,o=0,i=r.length;o<i;++o){var a=r.charCodeAt(o)-63;n|=(31&a)<<e,a<32?(t.push(n),n=0,e=0):e+=5}return t}(r),n=0,e=t.length;n<e;++n){var o=t[n];t[n]=1&o?~(o>>1):o>>1}return t}(r),o=0,i=e.length;o<i;++o)e[o]/=n;return e}(r,o),u=0,c=a.length;u<c;)for(e=0;e<t;++e,++u)i[e]+=a[u],a[u]=i[e];return a}(r,n,this.t);s(e,0,e.length,n,e);var o=(0,p.Ml)(e,0,e.length,n),i=new u.Z(o,this.o);return(0,h.fI)(i,!1,this.adaptOptions(t))},t.prototype.writeFeatureText=function(r,t){var n=r.getGeometry();return n?this.writeGeometryText(n,t):((0,f.h)(!1,40),"")},t.prototype.writeFeaturesText=function(r,t){return this.writeFeatureText(r[0],t)},t.prototype.writeGeometryText=function(r,t){var n=(r=(0,h.fI)(r,!0,this.adaptOptions(t))).getFlatCoordinates(),e=r.getStride();return s(n,0,n.length,e,n),function(r,t,n){var e,o=n||1e5,i=new Array(t);for(e=0;e<t;++e)i[e]=0;for(var a=0,u=r.length;a<u;)for(e=0;e<t;++e,++a){var c=r[a],f=c-i[e];i[e]=c,r[a]=f}return function(r,t){for(var n=t||1e5,e=0,o=r.length;e<o;++e)r[e]=Math.round(r[e]*n);return function(r){for(var t=0,n=r.length;t<n;++t){var e=r[t];r[t]=e<0?~(e<<1):e<<1}return function(r){for(var t="",n=0,e=r.length;n<e;++n)t+=m(r[n]);return t}(r)}(r)}(r,o)}(n,e,this.t)},t}(c.Z),y=n(1940),g=n(640),d=n(6343),k=n(6363),S=n(5367),b=n(5225),M=n(7389),j=n(5659),z=n(7842),A=n(710),P=n(9923),_=[-5639523.95,-3501274.52],G=new o.Z({target:document.getElementById("map"),view:new g.ZP({center:_,zoom:10,minZoom:2,maxZoom:19}),layers:[new z.Z({source:new d.Z({attributions:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=get_your_own_D6rA4zTHduk6KOKTXzGB",tileSize:512})})]});fetch("data/polyline/route.json").then((function(r){r.json().then((function(r){var t,n,o=r.routes[0].geometry,a=new l({factor:1e6}).readGeometry(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),u=new e.Z({type:"route",geometry:a}),c=new e.Z({type:"geoMarker",geometry:new i.Z(a.getCoordinateAt(0))}),f=new e.Z({type:"icon",geometry:new i.Z(a.getCoordinateAt(0))}),s=new e.Z({type:"icon",geometry:new i.Z(a.getCoordinateAt(1))}),w={route:new k.ZP({stroke:new S.Z({width:6,color:[237,212,0,.8]})}),icon:new k.ZP({image:new b.Z({anchor:[.5,1],src:"data/icon.png"})}),geoMarker:new k.ZP({image:new M.Z({radius:7,fill:new j.Z({color:"black"}),stroke:new S.Z({color:"white",width:2})})})},v=!1,p=new A.Z({source:new y.Z({features:[u,c,f,s]}),style:function(r){return v&&"geoMarker"===r.get("type")?null:w[r.get("type")]}});G.addLayer(p);var h=document.getElementById("speed"),m=document.getElementById("start-animation");function g(r){var o=(0,P.u3)(r),u=r.frameState;if(v){var c=u.time-n,f=t*c/1e6;if(f>=1)return void d(!0);var s=new i.Z(a.getCoordinateAt(f)),p=new e.Z(s);o.drawFeature(p,w.geoMarker)}G.render()}function d(r){v=!1,m.textContent="Start Animation";var t=a.getCoordinateAt(r?1:0);c.getGeometry().setCoordinates(t),p.un("postrender",g)}m.addEventListener("click",(function(){v?d(!1):(v=!0,n=(new Date).getTime(),t=h.value,m.textContent="Cancel Animation",c.changed(),G.getView().setCenter(_),p.on("postrender",g),G.render())}),!1)}))}))}},function(r){"use strict";var t;t=3818,r(r.s=t)}]);
//# sourceMappingURL=feature-move-animation.js.map