"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3465],{3053:function(t,e,r){var o=r(2739),n=r(1376),a=r(5469),i=r(5265),c=r(9193),s=r(776);function u(t,e,r,o,n,a){let i,c;void 0!==n?(i=n,c=void 0!==a?a:0):(i=[],c=0);let s=e;for(;s<r;){const e=t[s++];i[c++]=t[s++],i[c++]=e;for(let e=2;e<o;++e)i[c++]=t[s++]}return i.length=c,i}var l=r(2810),m=r(6877),f=r(5721),g=r(2025);class h extends c.Z{constructor(t){super();const e=t||{};this.dataProjection=(0,l.U2)("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(t,e){const r=this.readGeometryFromText(t,e);return new o.Z(r)}readFeaturesFromText(t,e){return[this.readFeatureFromText(t,e)]}readGeometryFromText(t,e){const r=(0,m.tP)(this.geometryLayout_),o=function(t,e,r){const o=r||1e5;let n;const a=new Array(e);for(n=0;n<e;++n)a[n]=0;const i=function(t,e){const r=e||1e5,o=function(t){const e=function(t){const e=[];let r=0,o=0;for(let n=0,a=t.length;n<a;++n){const a=t.charCodeAt(n)-63;r|=(31&a)<<o,a<32?(e.push(r),r=0,o=0):o+=5}return e}(t);for(let t=0,r=e.length;t<r;++t){const r=e[t];e[t]=1&r?~(r>>1):r>>1}return e}(t);for(let t=0,e=o.length;t<e;++t)o[t]/=r;return o}(t,o);for(let t=0,r=i.length;t<r;)for(n=0;n<e;++n,++t)a[n]+=i[t],i[t]=a[n];return i}(t,r,this.factor_);u(o,0,o.length,r,o);const n=(0,f.Ml)(o,0,o.length,r),a=new i.Z(n,this.geometryLayout_);return(0,g.fI)(a,!1,this.adaptOptions(e))}writeFeatureText(t,e){const r=t.getGeometry();return r?this.writeGeometryText(r,e):((0,s.h)(!1,40),"")}writeFeaturesText(t,e){return this.writeFeatureText(t[0],e)}writeGeometryText(t,e){const r=(t=(0,g.fI)(t,!0,this.adaptOptions(e))).getFlatCoordinates(),o=t.getStride();return u(r,0,r.length,o,r),function(t,e,r){const o=r||1e5;let n;const a=new Array(e);for(n=0;n<e;++n)a[n]=0;for(let r=0,o=t.length;r<o;)for(n=0;n<e;++n,++r){const e=t[r],o=e-a[n];a[n]=e,t[r]=o}return function(t,e){const r=e||1e5;for(let e=0,o=t.length;e<o;++e)t[e]=Math.round(t[e]*r);return function(t){for(let e=0,r=t.length;e<r;++e){const r=t[e];t[e]=r<0?~(r<<1):r<<1}return function(t){let e="";for(let r=0,o=t.length;r<o;++r)e+=y(t[r]);return e}(t)}(t)}(t,o)}(r,o,this.factor_)}}function y(t){let e,r="";for(;t>=32;)e=63+(32|31&t),r+=String.fromCharCode(e),t>>=5;return e=t+63,r+=String.fromCharCode(e),r}var d=h,w=r(5783),p=r(4354),Z=r(1998),k=r(9039),x=r(720),C=r(4598),G=r(7138),F=r(7975),T=r(2010),S=r(1372),P=r(8164);const _=new n.Z({target:document.getElementById("map"),view:new p.ZP({center:[-5639523.95,-3501274.52],zoom:10,minZoom:2,maxZoom:19}),layers:[new T.Z({source:new Z.Z({attributions:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=get_your_own_D6rA4zTHduk6KOKTXzGB",tileSize:512})})]});fetch("data/polyline/route.json").then((function(t){t.json().then((function(t){const e=t.routes[0].geometry,r=new d({factor:1e6}).readGeometry(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),n=new o.Z({type:"route",geometry:r}),i=new o.Z({type:"icon",geometry:new a.Z(r.getFirstCoordinate())}),c=new o.Z({type:"icon",geometry:new a.Z(r.getLastCoordinate())}),s=i.getGeometry().clone(),u=new o.Z({type:"geoMarker",geometry:s}),l={route:new k.ZP({stroke:new x.Z({width:6,color:[237,212,0,.8]})}),icon:new k.ZP({image:new C.Z({anchor:[.5,1],src:"data/icon.png"})}),geoMarker:new k.ZP({image:new G.Z({radius:7,fill:new F.Z({color:"black"}),stroke:new x.Z({color:"white",width:2})})})},m=new S.Z({source:new w.Z({features:[n,u,i,c]}),style:function(t){return l[t.get("type")]}});_.addLayer(m);const f=document.getElementById("speed"),g=document.getElementById("start-animation");let h,y=!1,p=0;function Z(t){const e=Number(f.value),o=t.frameState.time;p=(p+e*(o-h)/1e6)%2,h=o;const n=r.getCoordinateAt(p>1?2-p:p);s.setCoordinates(n);const a=(0,P.u3)(t);a.setStyle(l.geoMarker),a.drawGeometry(s),_.render()}g.addEventListener("click",(function(){y?(y=!1,g.textContent="Start Animation",u.setGeometry(s),m.un("postrender",Z)):(y=!0,h=Date.now(),g.textContent="Stop Animation",m.on("postrender",Z),u.setGeometry(null))}))}))}))}},function(t){var e=function(e){return t(t.s=e)};e(9877),e(3053)}]);
//# sourceMappingURL=feature-move-animation.js.map