/*! For license information please see ol.js.LICENSE.txt */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ol=n():t.ol=n()}(self,(function(){return function(){var t,n={226:function(t,n){n.read=function(t,n,i,r,e){var o,u,s=8*e-r-1,a=(1<<s)-1,f=a>>1,h=-7,c=i?e-1:0,l=i?-1:1,v=t[n+c];for(c+=l,o=v&(1<<-h)-1,v>>=-h,h+=s;h>0;o=256*o+t[n+c],c+=l,h-=8);for(u=o&(1<<-h)-1,o>>=-h,h+=r;h>0;u=256*u+t[n+c],c+=l,h-=8);if(0===o)o=1-f;else{if(o===a)return u?NaN:1/0*(v?-1:1);u+=Math.pow(2,r),o-=f}return(v?-1:1)*u*Math.pow(2,o-r)},n.write=function(t,n,i,r,e,o){var u,s,a,f=8*o-e-1,h=(1<<f)-1,c=h>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:o-1,d=r?1:-1,p=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(s=isNaN(n)?1:0,u=h):(u=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-u))<1&&(u--,a*=2),(n+=u+c>=1?l/a:l*Math.pow(2,1-c))*a>=2&&(u++,a/=2),u+c>=h?(s=0,u=h):u+c>=1?(s=(n*a-1)*Math.pow(2,e),u+=c):(s=n*Math.pow(2,c-1)*Math.pow(2,e),u=0));e>=8;t[i+v]=255&s,v+=d,s/=256,e-=8);for(u=u<<e|s,f+=e;f>0;t[i+v]=255&u,v+=d,u/=256,f-=8);t[i+v-d]|=128*p}},98:function(t,n,i){"use strict";t.exports=e;var r=i(226);function e(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var o=4294967296,u=1/o,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===e.Bytes?t.readVarint()+t.pos:t.pos+1}function f(t,n,i){return i?4294967296*n+(t>>>0):4294967296*(n>>>0)+(t>>>0)}function h(t,n,i){var r=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(r);for(var e=i.pos-1;e>=t;e--)i.buf[e+r]=i.buf[e]}function c(t,n){for(var i=0;i<t.length;i++)n.writeVarint(t[i])}function l(t,n){for(var i=0;i<t.length;i++)n.writeSVarint(t[i])}function v(t,n){for(var i=0;i<t.length;i++)n.writeFloat(t[i])}function d(t,n){for(var i=0;i<t.length;i++)n.writeDouble(t[i])}function p(t,n){for(var i=0;i<t.length;i++)n.writeBoolean(t[i])}function y(t,n){for(var i=0;i<t.length;i++)n.writeFixed32(t[i])}function m(t,n){for(var i=0;i<t.length;i++)n.writeSFixed32(t[i])}function w(t,n){for(var i=0;i<t.length;i++)n.writeFixed64(t[i])}function b(t,n){for(var i=0;i<t.length;i++)n.writeSFixed64(t[i])}function g(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+16777216*t[n+3]}function x(t,n,i){t[i]=n,t[i+1]=n>>>8,t[i+2]=n>>>16,t[i+3]=n>>>24}function M(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+(t[n+3]<<24)}e.prototype={destroy:function(){this.buf=null},readFields:function(t,n,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),e=r>>3,o=this.pos;this.type=7&r,t(e,n,this),this.pos===o&&this.skip(r)}return n},readMessage:function(t,n){return this.readFields(t,n,this.readVarint()+this.pos)},readFixed32:function(){var t=g(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=M(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=g(this.buf,this.pos)+g(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=g(this.buf,this.pos)+M(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var n,i,r=this.buf;return n=127&(i=r[this.pos++]),i<128?n:(n|=(127&(i=r[this.pos++]))<<7,i<128?n:(n|=(127&(i=r[this.pos++]))<<14,i<128?n:(n|=(127&(i=r[this.pos++]))<<21,i<128?n:function(t,n,i){var r,e,o=i.buf;if(e=o[i.pos++],r=(112&e)>>4,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<3,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<10,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<17,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(127&e)<<24,e<128)return f(t,r,n);if(e=o[i.pos++],r|=(1&e)<<31,e<128)return f(t,r,n);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,n=this.pos;return this.pos=t,t-n>=12&&s?function(t,n,i){return s.decode(t.subarray(n,i))}(this.buf,n,t):function(t,n,i){var r="",e=n;for(;e<i;){var o,u,s,a=t[e],f=null,h=a>239?4:a>223?3:a>191?2:1;if(e+h>i)break;1===h?a<128&&(f=a):2===h?128==(192&(o=t[e+1]))&&(f=(31&a)<<6|63&o)<=127&&(f=null):3===h?(o=t[e+1],u=t[e+2],128==(192&o)&&128==(192&u)&&((f=(15&a)<<12|(63&o)<<6|63&u)<=2047||f>=55296&&f<=57343)&&(f=null)):4===h&&(o=t[e+1],u=t[e+2],s=t[e+3],128==(192&o)&&128==(192&u)&&128==(192&s)&&((f=(15&a)<<18|(63&o)<<12|(63&u)<<6|63&s)<=65535||f>=1114112)&&(f=null)),null===f?(f=65533,h=1):f>65535&&(f-=65536,r+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),r+=String.fromCharCode(f),e+=h}return r}(this.buf,n,t)},readBytes:function(){var t=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,t);return this.pos=t,n},readPackedVarint:function(t,n){if(this.type!==e.Bytes)return t.push(this.readVarint(n));var i=a(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(n));return t},readPackedSVarint:function(t){if(this.type!==e.Bytes)return t.push(this.readSVarint());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==e.Bytes)return t.push(this.readBoolean());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==e.Bytes)return t.push(this.readFloat());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==e.Bytes)return t.push(this.readDouble());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed32());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed32());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed64());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed64());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed64());return t},skip:function(t){var n=7&t;if(n===e.Varint)for(;this.buf[this.pos++]>127;);else if(n===e.Bytes)this.pos=this.readVarint()+this.pos;else if(n===e.Fixed32)this.pos+=4;else{if(n!==e.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(t,n){this.writeVarint(t<<3|n)},realloc:function(t){for(var n=this.length||16;n<this.pos+t;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*u),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*u),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,n){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(t,n,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,n),function(t,n){var i=(7&t)<<4;if(n.buf[n.pos++]|=i|((t>>>=3)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;n.buf[n.pos++]=127&t}(r,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var n=this.pos;this.pos=function(t,n,i){for(var r,e,o=0;o<n.length;o++){if((r=n.charCodeAt(o))>55295&&r<57344){if(!e){r>56319||o+1===n.length?(t[i++]=239,t[i++]=191,t[i++]=189):e=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,e=r;continue}r=e-55296<<10|r-56320|65536,e=null}else e&&(t[i++]=239,t[i++]=191,t[i++]=189,e=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-n;i>=128&&h(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var n=t.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,n){this.pos++;var i=this.pos;t(n,this);var r=this.pos-i;r>=128&&h(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,n,i){this.writeTag(t,e.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(t,n){n.length&&this.writeMessage(t,c,n)},writePackedSVarint:function(t,n){n.length&&this.writeMessage(t,l,n)},writePackedBoolean:function(t,n){n.length&&this.writeMessage(t,p,n)},writePackedFloat:function(t,n){n.length&&this.writeMessage(t,v,n)},writePackedDouble:function(t,n){n.length&&this.writeMessage(t,d,n)},writePackedFixed32:function(t,n){n.length&&this.writeMessage(t,y,n)},writePackedSFixed32:function(t,n){n.length&&this.writeMessage(t,m,n)},writePackedFixed64:function(t,n){n.length&&this.writeMessage(t,w,n)},writePackedSFixed64:function(t,n){n.length&&this.writeMessage(t,b,n)},writeBytesField:function(t,n){this.writeTag(t,e.Bytes),this.writeBytes(n)},writeFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeSFixed64(n)},writeVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeVarint(n)},writeSVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeSVarint(n)},writeStringField:function(t,n){this.writeTag(t,e.Bytes),this.writeString(n)},writeFloatField:function(t,n){this.writeTag(t,e.Fixed32),this.writeFloat(n)},writeDoubleField:function(t,n){this.writeTag(t,e.Fixed64),this.writeDouble(n)},writeBooleanField:function(t,n){this.writeVarintField(t,Boolean(n))}}},72:function(t,n,i){var r,e,o;function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,r,e,o,u){!function t(i,r,e,o,u){for(;o>e;){if(o-e>600){var s=o-e+1,a=r-e+1,f=Math.log(s),h=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*h*(s-h)/s)*(a-s/2<0?-1:1);t(i,r,Math.max(e,Math.floor(r-a*h/s+c)),Math.min(o,Math.floor(r+(s-a)*h/s+c)),u)}var l=i[r],v=e,d=o;for(n(i,e,r),u(i[o],l)>0&&n(i,e,o);v<d;){for(n(i,v,d),v++,d--;u(i[v],l)<0;)v++;for(;u(i[d],l)>0;)d--}0===u(i[e],l)?n(i,e,d):n(i,++d,o),d<=r&&(e=d+1),r<=d&&(o=d-1)}}(t,r,e||0,o||t.length-1,u||i)}function n(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function i(t,n){return t<n?-1:t>n?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,n,i){if(!i)return n.indexOf(t);for(var r=0;r<n.length;r++)if(i(t,n[r]))return r;return-1}function o(t,n){u(t,0,t.children.length,n,t)}function u(t,n,i,r,e){e||(e=d(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o=n;o<i;o++){var u=t.children[o];s(e,t.leaf?r(u):u)}return e}function s(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function a(t,n){return t.minX-n.minX}function f(t,n){return t.minY-n.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function l(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function v(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(n,i,r,e,o){for(var u=[i,r];u.length;)if(!((r=u.pop())-(i=u.pop())<=e)){var s=i+Math.ceil((r-i)/e/2)*e;t(n,s,i,r,o),u.push(i,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var n=this.data,i=[];if(!v(t,n))return i;for(var r=this.toBBox,e=[];n;){for(var o=0;o<n.children.length;o++){var u=n.children[o],s=n.leaf?r(u):u;v(t,s)&&(n.leaf?i.push(u):l(t,s)?this._all(u,i):e.push(u))}n=e.pop()}return i},r.prototype.collides=function(t){var n=this.data;if(!v(t,n))return!1;for(var i=[];n;){for(var r=0;r<n.children.length;r++){var e=n.children[r],o=n.leaf?this.toBBox(e):e;if(v(t,o)){if(n.leaf||l(t,o))return!0;i.push(e)}}n=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,n){if(!t)return this;for(var i,r,o,u=this.data,s=this.toBBox(t),a=[],f=[];u||a.length;){if(u||(u=a.pop(),r=a[a.length-1],i=f.pop(),o=!0),u.leaf){var h=e(t,u.children,n);if(-1!==h)return u.children.splice(h,1),a.push(u),this._condense(a),this}o||u.leaf||!l(u,s)?r?(i++,u=r.children[i],o=!1):u=null:(a.push(u),f.push(i),i=0,r=u,u=u.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,n){return t.minX-n.minX},r.prototype.compareMinY=function(t,n){return t.minY-n.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},r.prototype._build=function(t,n,i,r){var e,u=i-n+1,s=this._maxEntries;if(u<=s)return o(e=d(t.slice(n,i+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(u)/Math.log(s)),s=Math.ceil(u/Math.pow(s,r-1))),(e=d([])).leaf=!1,e.height=r;var a=Math.ceil(u/s),f=a*Math.ceil(Math.sqrt(s));p(t,n,i,f,this.compareMinX);for(var h=n;h<=i;h+=f){var c=Math.min(h+f-1,i);p(t,h,c,a,this.compareMinY);for(var l=h;l<=c;l+=a){var v=Math.min(l+a-1,c);e.children.push(this._build(t,l,v,r-1))}}return o(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,n,i,r){for(;r.push(n),!n.leaf&&r.length-1!==i;){for(var e=1/0,o=1/0,u=void 0,s=0;s<n.children.length;s++){var a=n.children[s],f=h(a),c=(l=t,v=a,(Math.max(v.maxX,l.maxX)-Math.min(v.minX,l.minX))*(Math.max(v.maxY,l.maxY)-Math.min(v.minY,l.minY))-f);c<o?(o=c,e=f<e?f:e,u=a):c===o&&f<e&&(e=f,u=a)}n=u||n.children[0]}var l,v;return n},r.prototype._insert=function(t,n,i){var r=i?t:this.toBBox(t),e=[],o=this._chooseSubtree(r,this.data,n,e);for(o.children.push(t),s(o,r);n>=0&&e[n].children.length>this._maxEntries;)this._split(e,n),n--;this._adjustParentBBoxes(r,e,n)},r.prototype._split=function(t,n){var i=t[n],r=i.children.length,e=this._minEntries;this._chooseSplitAxis(i,e,r);var u=this._chooseSplitIndex(i,e,r),s=d(i.children.splice(u,i.children.length-u));s.height=i.height,s.leaf=i.leaf,o(i,this.toBBox),o(s,this.toBBox),n?t[n-1].children.push(s):this._splitRoot(i,s)},r.prototype._splitRoot=function(t,n){this.data=d([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,n,i){for(var r,e,o,s,a,f,c,l=1/0,v=1/0,d=n;d<=i-n;d++){var p=u(t,0,d,this.toBBox),y=u(t,d,i,this.toBBox),m=(e=p,o=y,s=Math.max(e.minX,o.minX),a=Math.max(e.minY,o.minY),f=Math.min(e.maxX,o.maxX),c=Math.min(e.maxY,o.maxY),Math.max(0,f-s)*Math.max(0,c-a)),w=h(p)+h(y);m<l?(l=m,r=d,v=w<v?w:v):m===l&&w<v&&(v=w,r=d)}return r||i-n},r.prototype._chooseSplitAxis=function(t,n,i){var r=t.leaf?this.compareMinX:a,e=t.leaf?this.compareMinY:f;this._allDistMargin(t,n,i,r)<this._allDistMargin(t,n,i,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,n,i,r){t.children.sort(r);for(var e=this.toBBox,o=u(t,0,n,e),a=u(t,i-n,i,e),f=c(o)+c(a),h=n;h<i-n;h++){var l=t.children[h];s(o,t.leaf?e(l):l),f+=c(o)}for(var v=i-n-1;v>=n;v--){var d=t.children[v];s(a,t.leaf?e(d):d),f+=c(a)}return f},r.prototype._adjustParentBBoxes=function(t,n,i){for(var r=i;r>=0;r--)s(n[r],t)},r.prototype._condense=function(t){for(var n=t.length-1,i=void 0;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},r},"object"==u(n)?t.exports=o():void 0===(e="function"==typeof(r=o)?r.call(n,i,n,t):r)||(t.exports=e)},760:function(t,n,i){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e=function(t){"use strict";var n,i=Object.prototype,e=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function f(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{f({},"")}catch(t){f=function(t,n,i){return t[n]=i}}function h(t,n,i,r){var e=n&&n.prototype instanceof m?n:m,o=Object.create(e.prototype),u=new A(r||[]);return o._invoke=function(t,n,i){var r=l;return function(e,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===e)throw o;return C()}for(i.method=e,i.arg=o;;){var u=i.delegate;if(u){var s=j(u,i);if(s){if(s===y)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===l)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=d;var a=c(t,n,i);if("normal"===a.type){if(r=i.done?p:v,a.arg===y)continue;return{value:a.arg,done:i.done}}"throw"===a.type&&(r=p,i.method="throw",i.arg=a.arg)}}}(t,i,u),o}function c(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var l="suspendedStart",v="suspendedYield",d="executing",p="completed",y={};function m(){}function w(){}function b(){}var g={};f(g,u,(function(){return this}));var x=Object.getPrototypeOf,M=x&&x(x(T([])));M&&M!==i&&e.call(M,u)&&(g=M);var _=b.prototype=m.prototype=Object.create(g);function S(t){["next","throw","return"].forEach((function(n){f(t,n,(function(t){return this._invoke(n,t)}))}))}function O(t,n){function i(o,u,s,a){var f=c(t[o],t,u);if("throw"!==f.type){var h=f.arg,l=h.value;return l&&"object"===r(l)&&e.call(l,"__await")?n.resolve(l.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):n.resolve(l).then((function(t){h.value=t,s(h)}),(function(t){return i("throw",t,s,a)}))}a(f.arg)}var o;this._invoke=function(t,r){function e(){return new n((function(n,e){i(t,r,n,e)}))}return o=o?o.then(e,e):e()}}function j(t,i){var r=t.iterator[i.method];if(r===n){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=n,j(t,i),"throw"===i.method))return y;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var e=c(r,t.iterator,i.arg);if("throw"===e.type)return i.method="throw",i.arg=e.arg,i.delegate=null,y;var o=e.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,y):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}function E(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function k(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function T(t){if(t){var i=t[u];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(e.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=n,i.done=!0,i};return o.next=o}}return{next:C}}function C(){return{value:n,done:!0}}return w.prototype=b,f(_,"constructor",b),f(b,"constructor",w),w.displayName=f(b,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===w||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},S(O.prototype),f(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(n,i,r,e,o){void 0===o&&(o=Promise);var u=new O(h(n,i,r,e),o);return t.isGeneratorFunction(i)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},S(_),f(_,a,"Generator"),f(_,u,(function(){return this})),f(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var i in t)n.push(i);return n.reverse(),function i(){for(;n.length;){var r=n.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!t)for(var i in this)"t"===i.charAt(0)&&e.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(r,e){return s.type="throw",s.arg=t,i.next=r,e&&(i.method="next",i.arg=n),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],s=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var a=e.call(u,"catchLoc"),f=e.call(u,"finallyLoc");if(a&&f){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(a){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&e.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),y},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),k(i),y}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var e=r.arg;k(i)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:T(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=n),y}},t}("object"===r(t=i.nmd(t))?t.exports:{});try{regeneratorRuntime=e}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},617:function(t,n,i){var r=i(279);t.exports=function(t,n,i){var e=i&&i.debug||!1,o=i&&i.startIndex||0;e&&console.log("starting findTagByName with",n," and ",i);var u=r(t,"<".concat(n,"[ >]"),o);if(e&&console.log("start:",u),-1!==u){var s=t.slice(u+n.length),a=r(s,"[ /]"+n+">",0),f=-1===a;f&&(a=r(s,"[ /]>",0));var h=u+n.length+a+1+(f?0:n.length)+1;if(e&&console.log("end:",h),-1!==h){var c=t.slice(u,h);return{inner:f?null:c.slice(c.indexOf(">")+1,c.lastIndexOf("<")),outer:c,start:u,end:h}}}}},51:function(t,n,i){var r=i(617);t.exports=function(t,n,i){for(var e,o=[],u=i&&i.debug||!1,s=i&&i.startIndex||0;e=r(t,n,{debug:u,startIndex:s});)s=e.end,o.push(e);return u&&console.log("findTagsByName found",o.length,"tags"),o}},802:function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t,i,r){var e=r&&r.debug||!1;e&&console.log("getting "+i+" in "+t);var o="object"===n(t)?t.outer:t,u="".concat(i,'\\="([^"]*)"');e&&console.log("pattern:",u);var s=new RegExp(u).exec(o);if(e&&console.log("match:",s),s)return s[1]}},279:function(t){t.exports=function(t,n,i){var r=new RegExp(n).exec(t.slice(i));return r?i+r.index:-1}},752:function(){},640:function(){},630:function(){},854:function(t,n,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(n,{default:function(){return xR}});var e=0;function o(t){return t.ol_uid||(t.ol_uid=String(++e))}var u,s="6.14.2-dev",a=(u=function(t,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),f=function(t){function n(n){var i=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+s.split("-")[0])+"/doc/errors/#"+n+" for details.";return(i=t.call(this,r)||this).code=n,i.name="AssertionError",i.message=r,i}return a(n,t),n}(Error);function h(t){t.stopPropagation()}var c=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),l="propertychange",v=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function d(t,n,i){for(var r,e,o=i||p,u=0,s=t.length,a=!1;u<s;)(e=+o(t[r=u+(s-u>>1)],n))<0?u=r+1:(s=r,a=!e);return a?u:~u}function p(t,n){return t>n?1:t<n?-1:0}function y(t,n){return t.indexOf(n)>=0}function m(t,n,i){var r=t.length;if(t[0]<=n)return 0;if(n<=t[r-1])return r-1;var e=void 0;if(i>0){for(e=1;e<r;++e)if(t[e]<n)return e-1}else if(i<0){for(e=1;e<r;++e)if(t[e]<=n)return e}else for(e=1;e<r;++e){if(t[e]==n)return e;if(t[e]<n)return"function"==typeof i?i(n,t[e-1],t[e])>0?e-1:e:t[e-1]-n<n-t[e]?e-1:e}return r-1}function w(t,n,i){for(;n<i;){var r=t[n];t[n]=t[i],t[i]=r,++n,--i}}function b(t,n){for(var i=Array.isArray(n)?n:[n],r=i.length,e=0;e<r;e++)t[t.length]=i[e]}function g(t,n){for(var i,r=t.length>>>0,e=0;e<r;e++)if(n(i=t[e],e,t))return i;return null}function x(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(t[r]!==n[r])return!1;return!0}function M(t,n){var i;return!t.every((function(r,e){return i=e,!n(r,e,t)}))?i:-1}function _(t,n,i){var r=n||p;return t.every((function(n,e){if(0===e)return!0;var o=r(t[e-1],n);return!(o>0||i&&0===o)}))}function S(){return!0}function O(){return!1}function j(){}function E(t){var n,i,r,e=!1;return function(){var o=Array.prototype.slice.call(arguments);return e&&this===r&&x(o,i)||(e=!0,r=this,i=o,n=t.apply(this,arguments)),n}}function k(t){return function(){var n;try{n=t()}catch(t){return Promise.reject(t)}return n instanceof Promise?n:Promise.resolve(n)}()}var A="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,e=arguments.length;r<e;++r){var o=arguments[r];if(null!=o)for(var u in o)o.hasOwnProperty(u)&&(i[u]=o[u])}return i};function T(t){for(var n in t)delete t[n]}var C="function"==typeof Object.values?Object.values:function(t){var n=[];for(var i in t)n.push(t[i]);return n};function P(t){var n;for(n in t)return!1;return!n}var R=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),I=function(t){function n(n){var i=t.call(this)||this;return i.t=n,i.v=null,i._=null,i.S=null,i}return R(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var i=this.S||(this.S={}),r=i[t]||(i[t]=[]);-1===r.indexOf(n)&&r.push(n)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t,i=n?t:t.type,r=this.S&&this.S[i];if(r){var e=n?new c(t):t;e.target||(e.target=this.t||this);var o,u=this._||(this._={}),s=this.v||(this.v={});i in u||(u[i]=0,s[i]=0),++u[i];for(var a=0,f=r.length;a<f;++a)if(!1===(o="handleEvent"in r[a]?r[a].handleEvent(e):r[a].call(this,e))||e.propagationStopped){o=!1;break}if(0==--u[i]){var h=s[i];for(delete s[i];h--;)this.removeEventListener(i,j);delete u[i]}return o}},n.prototype.disposeInternal=function(){this.S&&T(this.S)},n.prototype.getListeners=function(t){return this.S&&this.S[t]||void 0},n.prototype.hasListener=function(t){return!!this.S&&(t?t in this.S:Object.keys(this.S).length>0)},n.prototype.removeEventListener=function(t,n){var i=this.S&&this.S[t];if(i){var r=i.indexOf(n);-1!==r&&(this.v&&t in this.v?(i[r]=j,++this.v[t]):(i.splice(r,1),0===i.length&&delete this.S[t]))}},n}(v),N="change",z="error",F="contextmenu",L="click",G="dblclick",D="dragenter",B="dragover",U="drop",q="keydown",V="keypress",W="load",X="resize",H="touchmove",K="wheel";function Y(t,n,i,r,e){if(r&&r!==t&&(i=i.bind(r)),e){var o=i;i=function(){t.removeEventListener(n,i),o.apply(this,arguments)}}var u={target:t,type:n,listener:i};return t.addEventListener(n,i),u}function Z(t,n,i,r){return Y(t,n,i,r,!0)}function J(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),T(t))}var $=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Q=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.O=0,n}return $(n,t),n.prototype.changed=function(){++this.O,this.dispatchEvent(N)},n.prototype.getRevision=function(){return this.O},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),e=0;e<i;++e)r[e]=Y(this,t[e],n);return r}return Y(this,t,n)},n.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var r=t.length;i=new Array(r);for(var e=0;e<r;++e)i[e]=Z(this,t[e],n)}else i=Z(this,t,n);return n.ol_key=i,i},n.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)tt(i);else if(Array.isArray(t))for(var r=0,e=t.length;r<e;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)},n}(I);function tt(t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)J(t[n]);else J(t)}Q.prototype.on,Q.prototype.once,Q.prototype.un;var nt=Q,it=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rt=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.key=i,e.oldValue=r,e}return it(n,t),n}(c),et=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,o(i),i.A=null,void 0!==n&&i.setProperties(n),i}return it(n,t),n.prototype.get=function(t){var n;return this.A&&this.A.hasOwnProperty(t)&&(n=this.A[t]),n},n.prototype.getKeys=function(){return this.A&&Object.keys(this.A)||[]},n.prototype.getProperties=function(){return this.A&&A({},this.A)||{}},n.prototype.hasProperties=function(){return!!this.A},n.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n)),i=l,this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n))},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},n.prototype.set=function(t,n,i){var r=this.A||(this.A={});if(i)r[t]=n;else{var e=r[t];r[t]=n,e!==n&&this.notify(t,e)}},n.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},n.prototype.applyProperties=function(t){t.A&&A(this.A||(this.A={}),t.A)},n.prototype.unset=function(t,n){if(this.A&&t in this.A){var i=this.A[t];delete this.A[t],P(this.A)&&(this.A=null),n||this.notify(t,i)}},n}(nt),ot="add",ut="remove",st=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),at="length",ft=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.element=i,e.index=r,e}return st(n,t),n}(c),ht=function(t){function n(n,i){var r=t.call(this)||this;r.on,r.once,r.un;var e=i||{};if(r.T=!!e.unique,r.C=n||[],r.T)for(var o=0,u=r.C.length;o<u;++o)r.P(r.C[o],o);return r.R(),r}return st(n,t),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},n.prototype.forEach=function(t){for(var n=this.C,i=0,r=n.length;i<r;++i)t(n[i],i,n)},n.prototype.getArray=function(){return this.C},n.prototype.item=function(t){return this.C[t]},n.prototype.getLength=function(){return this.get(at)},n.prototype.insertAt=function(t,n){this.T&&this.P(n),this.C.splice(t,0,n),this.R(),this.dispatchEvent(new ft(ot,n,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.T&&this.P(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},n.prototype.remove=function(t){for(var n=this.C,i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)},n.prototype.removeAt=function(t){var n=this.C[t];return this.C.splice(t,1),this.R(),this.dispatchEvent(new ft(ut,n,t)),n},n.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.T&&this.P(n,t);var r=this.C[t];this.C[t]=n,this.dispatchEvent(new ft(ut,r,t)),this.dispatchEvent(new ft(ot,n,t))}else{for(var e=i;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,n)}},n.prototype.R=function(){this.set(at,this.C.length)},n.prototype.P=function(t,n){for(var i=0,r=this.C.length;i<r;++i)if(this.C[i]===t&&i!==n)throw new f(58)},n}(et),ct=0,lt=1,vt=2,dt=3,pt=4;function yt(t){return Math.pow(t,3)}function mt(t){return 1-yt(1-t)}function wt(t){return 3*t*t-2*t*t*t}function bt(t){return t}var gt=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xt=function(t){function n(n,i,r){var e=t.call(this)||this,o=r||{};return e.tileCoord=n,e.state=i,e.interimTile=null,e.key="",e.D=void 0===o.transition?250:o.transition,e.B={},e.interpolate=!!o.interpolate,e}return gt(n,t),n.prototype.changed=function(){this.dispatchEvent(N)},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==vt)return this.D=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==vt){t.interimTile=null;break}t.getState()==lt?n=t:t.getState()==ct?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(this.state!==dt&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){r()},n.prototype.getAlpha=function(t,n){if(!this.D)return 1;var i=this.B[t];if(i){if(-1===i)return 1}else i=n,this.B[t]=i;var r=n-i+1e3/60;return r>=this.D?1:yt(r/this.D)},n.prototype.inTransition=function(t){return!!this.D&&-1!==this.B[t]},n.prototype.endTransition=function(t){this.D&&(this.B[t]=-1)},n}(I),Mt=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_t=function(t){function n(n){var i=this,r=ct;return(i=t.call(this,n.tileCoord,r,{transition:n.transition,interpolate:n.interpolate})||this).U=n.loader,i.q=null,i.V=null,i}return Mt(n,t),n.prototype.getData=function(){return this.q},n.prototype.getError=function(){return this.V},n.prototype.load=function(){this.state=lt,this.changed();var t=this;this.U().then((function(n){t.q=n,t.state=vt,t.changed()})).catch((function(n){t.V=n,t.state=dt,t.changed()}))},n}(xt);function St(t,n){if(!t)throw new f(n)}var Ot=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function jt(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(St("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var Et=function(t){function n(n){var i=t.call(this)||this;if(i.on,i.once,i.un,i.W=void 0,i.H="geometry",i.K=null,i.$=void 0,i.tt=null,i.addChangeListener(i.H,i.nt),n)if("function"==typeof n.getSimplifiedGeometry){var r=n;i.setGeometry(r)}else{var e=n;i.setProperties(e)}return i}return Ot(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},n.prototype.getGeometry=function(){return this.get(this.H)},n.prototype.getId=function(){return this.W},n.prototype.getGeometryName=function(){return this.H},n.prototype.getStyle=function(){return this.K},n.prototype.getStyleFunction=function(){return this.$},n.prototype.it=function(){this.changed()},n.prototype.nt=function(){this.tt&&(J(this.tt),this.tt=null);var t=this.getGeometry();t&&(this.tt=Y(t,N,this.it,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.H,t)},n.prototype.setStyle=function(t){this.K=t,this.$=t?jt(t):void 0,this.changed()},n.prototype.setId=function(t){this.W=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.H,this.nt),this.H=t,this.addChangeListener(this.H,this.nt),this.nt()},n}(et),kt="XY",At="XYZ",Tt="XYM",Ct="XYZM",Pt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Rt={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},It={9001:Rt.METERS,9002:Rt.FEET,9003:Rt.USFEET,9101:Rt.RADIANS,9102:Rt.DEGREES};function Nt(t){return It[t]}var zt={};zt[Rt.RADIANS]=6370997/(2*Math.PI),zt[Rt.DEGREES]=2*Math.PI*6370997/360,zt[Rt.FEET]=.3048,zt[Rt.METERS]=1,zt[Rt.USFEET]=1200/3937;var Ft,Lt=Rt,Gt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Dt=-1!==Gt.indexOf("firefox"),Bt=-1!==Gt.indexOf("safari")&&-1==Gt.indexOf("chrom"),Ut=Bt&&!!(Gt.indexOf("version/15.4")>=0||Gt.match(/cpu (os|iphone os) 15_4 like mac os x/)),qt=-1!==Gt.indexOf("webkit")&&-1==Gt.indexOf("edge"),Vt=-1!==Gt.indexOf("macintosh"),Wt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Xt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Ht="undefined"!=typeof Image&&Image.prototype.decode,Kt=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return t}(),Yt=new Array(6);function Zt(){return[1,0,0,1,0,0]}function Jt(t){return Qt(t,1,0,0,1,0,0)}function $t(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],u=t[4],s=t[5],a=n[0],f=n[1],h=n[2],c=n[3],l=n[4],v=n[5];return t[0]=i*a+e*f,t[1]=r*a+o*f,t[2]=i*h+e*c,t[3]=r*h+o*c,t[4]=i*l+e*v+u,t[5]=r*l+o*v+s,t}function Qt(t,n,i,r,e,o,u){return t[0]=n,t[1]=i,t[2]=r,t[3]=e,t[4]=o,t[5]=u,t}function tn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function nn(t,n){var i=n[0],r=n[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function rn(t,n){var i=Math.cos(n),r=Math.sin(n);return $t(t,Qt(Yt,i,r,-r,i,0,0))}function en(t,n,i){return $t(t,Qt(Yt,n,0,0,i,0,0))}function on(t,n,i){return Qt(t,n,0,0,i,0,0)}function un(t,n,i){return $t(t,Qt(Yt,1,0,0,1,n,i))}function sn(t,n,i,r,e,o,u,s){var a=Math.sin(o),f=Math.cos(o);return t[0]=r*f,t[1]=e*a,t[2]=-r*a,t[3]=e*f,t[4]=u*r*f-s*r*a+n,t[5]=u*e*a+s*e*f+i,t}function an(t,n){var i=fn(n);St(0!==i,32);var r=n[0],e=n[1],o=n[2],u=n[3],s=n[4],a=n[5];return t[0]=u/i,t[1]=-e/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*a-u*s)/i,t[5]=-(r*a-e*s)/i,t}function fn(t){return t[0]*t[3]-t[1]*t[2]}function hn(t){var n="matrix("+t.join(", ")+")";if(Xt)return n;var i=Ft||(Ft=document.createElement("div"));return i.style.transform=n,i.style.transform}var cn="bottom-left",ln="bottom-right",vn="top-left",dn="top-right",pn=0,yn=1,mn=2,wn=4,bn=8,gn=16;function xn(t){for(var n=An(),i=0,r=t.length;i<r;++i)Fn(n,t[i]);return n}function Mn(t,n,i){return i?(i[0]=t[0]-n,i[1]=t[1]-n,i[2]=t[2]+n,i[3]=t[3]+n,i):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function _n(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function Sn(t,n,i){var r,e;return(r=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*r+(e=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*e}function On(t,n){return En(t,n[0],n[1])}function jn(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function En(t,n,i){return t[0]<=n&&n<=t[2]&&t[1]<=i&&i<=t[3]}function kn(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],u=n[0],s=n[1],a=pn;return u<i?a|=gn:u>e&&(a|=wn),s<r?a|=bn:s>o&&(a|=mn),a===pn&&(a=yn),a}function An(){return[1/0,1/0,-1/0,-1/0]}function Tn(t,n,i,r,e){return e?(e[0]=t,e[1]=n,e[2]=i,e[3]=r,e):[t,n,i,r]}function Cn(t){return Tn(1/0,1/0,-1/0,-1/0,t)}function Pn(t,n){var i=t[0],r=t[1];return Tn(i,r,i,r,n)}function Rn(t,n,i,r,e){return Gn(Cn(e),t,n,i,r)}function In(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function Nn(t,n,i){return Math.abs(t[0]-n[0])<i&&Math.abs(t[2]-n[2])<i&&Math.abs(t[1]-n[1])<i&&Math.abs(t[3]-n[3])<i}function zn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function Fn(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function Ln(t,n){for(var i=0,r=n.length;i<r;++i)Fn(t,n[i]);return t}function Gn(t,n,i,r,e){for(;i<r;i+=e)Bn(t,n[i],n[i+1]);return t}function Dn(t,n){for(var i=0,r=n.length;i<r;++i)Ln(t,n[i]);return t}function Bn(t,n,i){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],i)}function Un(t,n){var i;return(i=n(Vn(t)))||(i=n(Wn(t)))||(i=n($n(t)))?i:(i=n(Jn(t)))||!1}function qn(t){var n=0;return ni(t)||(n=Qn(t)*Yn(t)),n}function Vn(t){return[t[0],t[1]]}function Wn(t){return[t[2],t[1]]}function Xn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Hn(t,n){var i;return n===cn?i=Vn(t):n===ln?i=Wn(t):n===vn?i=Jn(t):n===dn?i=$n(t):St(!1,13),i}function Kn(t,n,i,r,e){var o=n*r[0]/2,u=n*r[1]/2,s=Math.cos(i),a=Math.sin(i),f=o*s,h=o*a,c=u*s,l=u*a,v=t[0],d=t[1],p=v-f+l,y=v-f-l,m=v+f-l,w=v+f+l,b=d-h-c,g=d-h+c,x=d+h+c,M=d+h-c;return Tn(Math.min(p,y,m,w),Math.min(b,g,x,M),Math.max(p,y,m,w),Math.max(b,g,x,M),e)}function Yn(t){return t[3]-t[1]}function Zn(t,n,i){var r=i||[1/0,1/0,-1/0,-1/0];return ti(t,n)?(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]):Cn(r),r}function Jn(t){return[t[0],t[3]]}function $n(t){return[t[2],t[3]]}function Qn(t){return t[2]-t[0]}function ti(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function ni(t){return t[2]<t[0]||t[3]<t[1]}function ii(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function ri(t,n){var i=(t[2]-t[0])/2*(n-1),r=(t[3]-t[1])/2*(n-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function ei(t,n,i){var r=!1,e=kn(t,n),o=kn(t,i);if(e===yn||o===yn)r=!0;else{var u=t[0],s=t[1],a=t[2],f=t[3],h=n[0],c=n[1],l=i[0],v=i[1],d=(v-c)/(l-h),p=void 0,y=void 0;o&mn&&!(e&mn)&&(r=(p=l-(v-f)/d)>=u&&p<=a),r||!(o&wn)||e&wn||(r=(y=v-(l-a)*d)>=s&&y<=f),r||!(o&bn)||e&bn||(r=(p=l-(v-s)/d)>=u&&p<=a),r||!(o&gn)||e&gn||(r=(y=v-(l-u)*d)>=s&&y<=f)}return r}function oi(t,n,i,r){var e=[];if(r>1)for(var o=t[2]-t[0],u=t[3]-t[1],s=0;s<r;++s)e.push(t[0]+o*s/r,t[1],t[2],t[1]+u*s/r,t[2]-o*s/r,t[3],t[0],t[3]-u*s/r);else e=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(e,e,2);for(var a=[],f=[],h=(s=0,e.length);s<h;s+=2)a.push(e[s]),f.push(e[s+1]);return function(t,n,i){return Tn(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),i)}(a,f,i)}function ui(t,n){var i=n.getExtent(),r=Xn(t);if(n.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){var e=Qn(i),o=Math.floor((r[0]-i[0])/e)*e;t[0]-=o,t[2]-=o}return t}var si=function(){function t(t){this.rt=t.code,this.et=t.units,this.ot=void 0!==t.extent?t.extent:null,this.ut=void 0!==t.worldExtent?t.worldExtent:null,this.st=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.ft=void 0!==t.global&&t.global,this.ht=!(!this.ft||!this.ot),this.ct=t.getPointResolution,this.lt=null,this.vt=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.ht},t.prototype.getCode=function(){return this.rt},t.prototype.getExtent=function(){return this.ot},t.prototype.getUnits=function(){return this.et},t.prototype.getMetersPerUnit=function(){return this.vt||zt[this.et]},t.prototype.getWorldExtent=function(){return this.ut},t.prototype.getAxisOrientation=function(){return this.st},t.prototype.isGlobal=function(){return this.ft},t.prototype.setGlobal=function(t){this.ft=t,this.ht=!(!t||!this.ot)},t.prototype.getDefaultTileGrid=function(){return this.lt},t.prototype.setDefaultTileGrid=function(t){this.lt=t},t.prototype.setExtent=function(t){this.ot=t,this.ht=!(!this.ft||!t)},t.prototype.setWorldExtent=function(t){this.ut=t},t.prototype.setGetPointResolution=function(t){this.ct=t},t.prototype.getPointResolutionFunc=function(){return this.ct},t}();function ai(t,n,i){return Math.min(Math.max(t,n),i)}var fi="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2},hi="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function ci(t,n,i,r,e,o){var u=e-i,s=o-r;if(0!==u||0!==s){var a=((t-i)*u+(n-r)*s)/(u*u+s*s);a>1?(i=e,r=o):a>0&&(i+=u*a,r+=s*a)}return li(t,n,i,r)}function li(t,n,i,r){var e=i-t,o=r-n;return e*e+o*o}function vi(t){for(var n=t.length,i=0;i<n;i++){for(var r=i,e=Math.abs(t[i][i]),o=i+1;o<n;o++){var u=Math.abs(t[o][i]);u>e&&(e=u,r=o)}if(0===e)return null;var s=t[r];t[r]=t[i],t[i]=s;for(var a=i+1;a<n;a++)for(var f=-t[a][i]/t[i][i],h=i;h<n+1;h++)i==h?t[a][h]=0:t[a][h]+=f*t[i][h]}for(var c=new Array(n),l=n-1;l>=0;l--){c[l]=t[l][n]/t[l][l];for(var v=l-1;v>=0;v--)t[v][n]-=t[v][l]*c[l]}return c}function di(t){return 180*t/Math.PI}function pi(t){return t*Math.PI/180}function yi(t,n){var i=t%n;return i*n<0?i+n:i}function mi(t,n,i){return t+i*(n-t)}function wi(t,n){var i=Math.pow(10,n);return Math.round(t*i)/i}function bi(t,n){return Math.round(wi(t,n))}function gi(t,n){return Math.floor(wi(t,n))}function xi(t,n){return Math.ceil(wi(t,n))}var Mi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_i=6378137,Si=Math.PI*_i,Oi=[-Si,-Si,Si,Si],ji=[-180,-85,180,85],Ei=_i*Math.log(Math.tan(Math.PI/2)),ki=function(t){function n(n){return t.call(this,{code:n,units:Lt.METERS,extent:Oi,global:!0,worldExtent:ji,getPointResolution:function(t,n){return t/fi(n[1]/_i)}})||this}return Mi(n,t),n}(si),Ai=[new ki("EPSG:3857"),new ki("EPSG:102100"),new ki("EPSG:102113"),new ki("EPSG:900913"),new ki("http://www.opengis.net/def/crs/EPSG/0/3857"),new ki("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ti(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var u=0;u<r;u+=e){o[u]=Si*t[u]/180;var s=_i*Math.log(Math.tan(Math.PI*(+t[u+1]+90)/360));s>Ei?s=Ei:s<-Ei&&(s=-Ei),o[u+1]=s}return o}function Ci(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var u=0;u<r;u+=e)o[u]=180*t[u]/Si,o[u+1]=360*Math.atan(Math.exp(t[u+1]/_i))/Math.PI-90;return o}var Pi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ri=6378137,Ii=[-180,-90,180,90],Ni=Math.PI*Ri/180,zi=function(t){function n(n,i){return t.call(this,{code:n,units:Lt.DEGREES,extent:Ii,axisOrientation:i,global:!0,metersPerUnit:Ni,worldExtent:Ii})||this}return Pi(n,t),n}(si),Fi=[new zi("CRS:84"),new zi("EPSG:4326","neu"),new zi("urn:ogc:def:crs:OGC:1.3:CRS84"),new zi("urn:ogc:def:crs:OGC:2:84"),new zi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new zi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new zi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Li={};function Gi(){Li={}}function Di(t){return Li[t]||Li[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Bi(t,n){Li[t]=n}var Ui={};function qi(){Ui={}}function Vi(t,n,i){var r=t.getCode(),e=n.getCode();r in Ui||(Ui[r]={}),Ui[r][e]=i}function Wi(t,n){var i;return t in Ui&&n in Ui[t]&&(i=Ui[t][n]),i}function Xi(t,n,i){var r=void 0!==i?t.toFixed(i):""+t,e=r.indexOf(".");return(e=-1===e?r.length:e)>n?r:new Array(1+n-e).join("0")+r}function Hi(t,n){for(var i=(""+t).split("."),r=(""+n).split("."),e=0;e<Math.max(i.length,r.length);e++){var o=parseInt(i[e]||"0",10),u=parseInt(r[e]||"0",10);if(o>u)return 1;if(u>o)return-1}return 0}function Ki(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function Yi(t,n){var i=n.getRadius(),r=n.getCenter(),e=r[0],o=r[1],u=t[0]-e,s=t[1]-o;0===u&&0===s&&(u=1);var a=Math.sqrt(u*u+s*s);return[e+i*u/a,o+i*s/a]}function Zi(t,n){var i,r,e=t[0],o=t[1],u=n[0],s=n[1],a=u[0],f=u[1],h=s[0],c=s[1],l=h-a,v=c-f,d=0===l&&0===v?0:(l*(e-a)+v*(o-f))/(l*l+v*v||0);return d<=0?(i=a,r=f):d>=1?(i=h,r=c):(i=a+d*l,r=f+d*v),[i,r]}function Ji(t,n,i){var r=yi(n+180,360)-180,e=Math.abs(3600*r),o=i||0,u=Math.pow(10,o),s=Math.floor(e/3600),a=Math.floor((e-3600*s)/60),f=e-3600*s-60*a;return(f=Math.ceil(f*u)/u)>=60&&(f=0,a+=1),a>=60&&(a=0,s+=1),s+"° "+Xi(a,2)+"′ "+Xi(f,2,o)+"″"+(0==r?"":" "+t.charAt(r<0?1:0))}function $i(t,n,i){return t?n.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Qi(t,n){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=n[r]){i=!1;break}return i}function tr(t,n){var i=Math.cos(n),r=Math.sin(n),e=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=e,t[1]=o,t}function nr(t,n){return t[0]*=n,t[1]*=n,t}function ir(t,n){var i=t[0]-n[0],r=t[1]-n[1];return i*i+r*r}function rr(t,n){return Math.sqrt(ir(t,n))}function er(t,n){return ir(t,Zi(t,n))}function or(t,n){return $i(t,"{x}, {y}",n)}function ur(t,n){if(n.canWrapX()){var i=Qn(n.getExtent()),r=sr(t,n,i);r&&(t[0]-=r*i)}return t}function sr(t,n,i){var r=n.getExtent(),e=0;if(n.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=i||Qn(r);e=Math.floor((t[0]-r[0])/o)}return e}var ar=6371008.8;function fr(t,n,i){var r=i||ar,e=pi(t[1]),o=pi(n[1]),u=(o-e)/2,s=pi(n[0]-t[0])/2,a=Math.sin(u)*Math.sin(u)+Math.sin(s)*Math.sin(s)*Math.cos(e)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function hr(t,n){for(var i=0,r=0,e=t.length;r<e-1;++r)i+=fr(t[r],t[r+1],n);return i}function cr(t,n){for(var i=0,r=t.length,e=t[r-1][0],o=t[r-1][1],u=0;u<r;u++){var s=t[u][0],a=t[u][1];i+=pi(s-e)*(2+Math.sin(pi(o))+Math.sin(pi(a))),e=s,o=a}return i*n*n/2}function lr(t,n,i,r){var e=r||ar,o=pi(t[1]),u=pi(t[0]),s=n/e,a=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(i));return[di(u+Math.atan2(Math.sin(i)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(a))),di(a)]}var vr=!0;function dr(t){vr=!(void 0===t||t)}function pr(t,n,i){var r;if(void 0!==n){for(var e=0,o=t.length;e<o;++e)n[e]=t[e];r=n}else r=t.slice();return r}function yr(t,n,i){if(void 0!==n&&t!==n){for(var r=0,e=t.length;r<e;++r)n[r]=t[r];t=n}return t}function mr(t){Bi(t.getCode(),t),Vi(t,t,pr)}function wr(t){t.forEach(mr)}function br(t){return"string"==typeof t?Di(t):t||null}function gr(t,n,i,r){var e,o=(t=br(t)).getPointResolutionFunc();if(o){if(e=o(n,i),r&&r!==t.getUnits())(s=t.getMetersPerUnit())&&(e=e*s/zt[r])}else{var u=t.getUnits();if(u==Lt.DEGREES&&!r||r==Lt.DEGREES)e=n;else{var s,a=kr(t,br("EPSG:4326"));if(a===yr&&u!==Lt.DEGREES)e=n*t.getMetersPerUnit();else{var f=[i[0]-n/2,i[1],i[0]+n/2,i[1],i[0],i[1]-n/2,i[0],i[1]+n/2];e=(fr((f=a(f,f,2)).slice(0,2),f.slice(2,4))+fr(f.slice(4,6),f.slice(6,8)))/2}void 0!==(s=r?zt[r]:t.getMetersPerUnit())&&(e/=s)}}return e}function xr(t){wr(t),t.forEach((function(n){t.forEach((function(t){n!==t&&Vi(n,t,pr)}))}))}function Mr(t,n,i,r){t.forEach((function(t){n.forEach((function(n){Vi(t,n,i),Vi(n,t,r)}))}))}function _r(t,n){return t?"string"==typeof t?br(t):t:br(n)}function Sr(t){return function(n,i,r){for(var e=n.length,o=void 0!==r?r:2,u=void 0!==i?i:new Array(e),s=0;s<e;s+=o){var a=t([n[s],n[s+1]]);u[s]=a[0],u[s+1]=a[1];for(var f=o-1;f>=2;--f)u[s+f]=n[s+f]}return u}}function Or(t,n,i,r){var e=br(t),o=br(n);Vi(e,o,Sr(i)),Vi(o,e,Sr(r))}function jr(t,n){return dr(),Tr(t,"EPSG:4326",void 0!==n?n:"EPSG:3857")}function Er(t,n){if(t===n)return!0;var i=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||kr(t,n)===pr)&&i}function kr(t,n){var i=Wi(t.getCode(),n.getCode());return i||(i=yr),i}function Ar(t,n){return kr(br(t),br(n))}function Tr(t,n,i){return Ar(n,i)(t,void 0,t.length)}function Cr(t,n,i,r){return oi(t,Ar(n,i),void 0,r)}var Pr=null;function Rr(t){Pr=br(t)}function Ir(){return Pr}function Nr(t,n){return Pr?Tr(t,n,Pr):t}function zr(t,n){return Pr?Tr(t,Pr,n):(vr&&!Qi(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(vr=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Fr(t,n){return Pr?Cr(t,n,Pr):t}function Lr(t,n){return Pr?Cr(t,Pr,n):t}function Gr(t,n){if(!Pr)return t;var i=br(n).getUnits(),r=Pr.getUnits();return i&&r?t*zt[i]/zt[r]:t}function Dr(t,n){if(!Pr)return t;var i=br(n).getUnits(),r=Pr.getUnits();return i&&r?t*zt[r]/zt[i]:t}function Br(t,n,i){return function(r){var e,o,u=r[0],s=r[1];if(t.canWrapX()){var a=t.getExtent(),f=Qn(a);(o=sr(r,t,f))&&(u-=o*f),u=ai(u,a[0],a[2]),s=ai(s,a[1],a[3]),e=i([u,s])}else e=i(r);return o&&n.canWrapX()&&(e[0]+=o*Qn(n.getExtent())),e}}function Ur(){xr(Ai),xr(Fi),Mr(Fi,Ai,Ti,Ci)}function qr(t,n,i,r,e,o){for(var u=o||[],s=0,a=n;a<i;a+=r){var f=t[a],h=t[a+1];u[s++]=e[0]*f+e[2]*h+e[4],u[s++]=e[1]*f+e[3]*h+e[5]}return o&&u.length!=s&&(u.length=s),u}function Vr(t,n,i,r,e,o,u){for(var s=u||[],a=Math.cos(e),f=Math.sin(e),h=o[0],c=o[1],l=0,v=n;v<i;v+=r){var d=t[v]-h,p=t[v+1]-c;s[l++]=h+d*a-p*f,s[l++]=c+d*f+p*a;for(var y=v+2;y<v+r;++y)s[l++]=t[y]}return u&&s.length!=l&&(s.length=l),s}function Wr(t,n,i,r,e,o,u,s){for(var a=s||[],f=u[0],h=u[1],c=0,l=n;l<i;l+=r){var v=t[l]-f,d=t[l+1]-h;a[c++]=f+e*v,a[c++]=h+o*d;for(var p=l+2;p<l+r;++p)a[c++]=t[p]}return s&&a.length!=c&&(a.length=c),a}function Xr(t,n,i,r,e,o,u){for(var s=u||[],a=0,f=n;f<i;f+=r){s[a++]=t[f]+e,s[a++]=t[f+1]+o;for(var h=f+2;h<f+r;++h)s[a++]=t[h]}return u&&s.length!=a&&(s.length=a),s}Ur();var Hr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Kr=[1,0,0,1,0,0],Yr=function(t){function n(){var n=t.call(this)||this;return n.ot=[1/0,1/0,-1/0,-1/0],n.dt=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=E((function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);var r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})),n}return Hr(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},n.prototype.clone=function(){return r()},n.prototype.closestPointXY=function(t,n,i,e){return r()},n.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},n.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return r()},n.prototype.getExtent=function(t){if(this.dt!=this.getRevision()){var n=this.computeExtent(this.ot);(isNaN(n[0])||isNaN(n[1]))&&Cn(n),this.dt=this.getRevision()}return ii(this.ot,t)},n.prototype.rotate=function(t,n){r()},n.prototype.scale=function(t,n,i){r()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return r()},n.prototype.getType=function(){return r()},n.prototype.applyTransform=function(t){r()},n.prototype.intersectsExtent=function(t){return r()},n.prototype.translate=function(t,n){r()},n.prototype.transform=function(t,n){var i=br(t),r=i.getUnits()==Lt.TILE_PIXELS?function(t,r,e){var o=i.getExtent(),u=i.getWorldExtent(),s=Yn(u)/Yn(o);return sn(Kr,u[0],u[3],s,-s,0,0,0),qr(t,0,t.length,e,Kr,r),Ar(i,n)(t,r,e)}:Ar(i,n);return this.applyTransform(r),this},n}(et),Zr=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Jr(t){var n;return t==kt?n=2:t==At||t==Tt?n=3:t==Ct&&(n=4),n}function $r(t,n,i){var r=t.getFlatCoordinates();if(r){var e=t.getStride();return qr(r,0,r.length,e,n,i)}return null}var Qr=function(t){function n(){var n=t.call(this)||this;return n.layout=kt,n.stride=2,n.flatCoordinates=null,n}return Zr(n,t),n.prototype.computeExtent=function(t){return Rn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return r()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,n){this.stride=Jr(t),this.layout=t,this.flatCoordinates=n},n.prototype.setCoordinates=function(t,n){r()},n.prototype.setLayout=function(t,n,i){var r;if(t)r=Jr(t);else{for(var e=0;e<i;++e){if(0===n.length)return this.layout=kt,void(this.stride=2);n=n[0]}t=function(t){var n;2==t?n=kt:3==t?n=At:4==t&&(n=Ct);return n}(r=n.length)}this.layout=t,this.stride=r},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Vr(i,0,i.length,r,t,n,i),this.changed()}},n.prototype.scale=function(t,n,i){var r=n;void 0===r&&(r=t);var e=i;e||(e=Xn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var u=this.getStride();Wr(o,0,o.length,u,t,r,e,o),this.changed()}},n.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Xr(i,0,i.length,r,t,n,i),this.changed()}},n}(Yr);function te(t,n,i,r,e,o,u){var s,a=t[n],f=t[n+1],h=t[i]-a,c=t[i+1]-f;if(0===h&&0===c)s=n;else{var l=((e-a)*h+(o-f)*c)/(h*h+c*c);if(l>1)s=i;else{if(l>0){for(var v=0;v<r;++v)u[v]=mi(t[n+v],t[i+v],l);return void(u.length=r)}s=n}}for(v=0;v<r;++v)u[v]=t[s+v];u.length=r}function ne(t,n,i,r,e){var o=t[n],u=t[n+1];for(n+=r;n<i;n+=r){var s=t[n],a=t[n+1],f=li(o,u,s,a);f>e&&(e=f),o=s,u=a}return e}function ie(t,n,i,r,e){for(var o=0,u=i.length;o<u;++o){var s=i[o];e=ne(t,n,s,r,e),n=s}return e}function re(t,n,i,r,e){for(var o=0,u=i.length;o<u;++o){var s=i[o];e=ie(t,n,s,r,e),n=s[s.length-1]}return e}function ee(t,n,i,r,e,o,u,s,a,f,h){if(n==i)return f;var c,l;if(0===e){if((l=li(u,s,t[n],t[n+1]))<f){for(c=0;c<r;++c)a[c]=t[n+c];return a.length=r,l}return f}for(var v=h||[NaN,NaN],d=n+r;d<i;)if(te(t,d-r,d,r,u,s,v),(l=li(u,s,v[0],v[1]))<f){for(f=l,c=0;c<r;++c)a[c]=v[c];a.length=r,d+=r}else d+=r*Math.max((Math.sqrt(l)-Math.sqrt(f))/e|0,1);if(o&&(te(t,i-r,n,r,u,s,v),(l=li(u,s,v[0],v[1]))<f)){for(f=l,c=0;c<r;++c)a[c]=v[c];a.length=r}return f}function oe(t,n,i,r,e,o,u,s,a,f,h){for(var c=h||[NaN,NaN],l=0,v=i.length;l<v;++l){var d=i[l];f=ee(t,n,d,r,e,o,u,s,a,f,c),n=d}return f}function ue(t,n,i,r,e,o,u,s,a,f,h){for(var c=h||[NaN,NaN],l=0,v=i.length;l<v;++l){var d=i[l];f=oe(t,n,d,r,e,o,u,s,a,f,c),n=d[d.length-1]}return f}function se(t,n,i,r){for(var e=0,o=i.length;e<o;++e)t[n++]=i[e];return n}function ae(t,n,i,r){for(var e=0,o=i.length;e<o;++e)for(var u=i[e],s=0;s<r;++s)t[n++]=u[s];return n}function fe(t,n,i,r,e){for(var o=e||[],u=0,s=0,a=i.length;s<a;++s){var f=ae(t,n,i[s],r);o[u++]=f,n=f}return o.length=u,o}function he(t,n,i,r,e){for(var o=e||[],u=0,s=0,a=i.length;s<a;++s){var f=fe(t,n,i[s],r,o[u]);o[u++]=f,n=f[f.length-1]}return o.length=u,o}function ce(t,n,i,r,e,o,u){var s=(i-n)/r;if(s<3){for(;n<i;n+=r)o[u++]=t[n],o[u++]=t[n+1];return u}var a=new Array(s);a[0]=1,a[s-1]=1;for(var f=[n,i-r],h=0;f.length>0;){for(var c=f.pop(),l=f.pop(),v=0,d=t[l],p=t[l+1],y=t[c],m=t[c+1],w=l+r;w<c;w+=r){var b=ci(t[w],t[w+1],d,p,y,m);b>v&&(h=w,v=b)}v>e&&(a[(h-n)/r]=1,l+r<h&&f.push(l,h),h+r<c&&f.push(h,c))}for(w=0;w<s;++w)a[w]&&(o[u++]=t[n+w*r],o[u++]=t[n+w*r+1]);return u}function le(t,n,i,r,e,o,u,s){for(var a=0,f=i.length;a<f;++a){var h=i[a];u=ce(t,n,h,r,e,o,u),s.push(u),n=h}return u}function ve(t,n,i,r,e,o,u){if(i<=n+r){for(;n<i;n+=r)o[u++]=t[n],o[u++]=t[n+1];return u}var s=t[n],a=t[n+1];o[u++]=s,o[u++]=a;var f=s,h=a;for(n+=r;n<i;n+=r)li(s,a,f=t[n],h=t[n+1])>e&&(o[u++]=f,o[u++]=h,s=f,a=h);return f==s&&h==a||(o[u++]=f,o[u++]=h),u}function de(t,n){return n*Math.round(t/n)}function pe(t,n,i,r,e,o,u){if(n==i)return u;var s,a,f=de(t[n],e),h=de(t[n+1],e);n+=r,o[u++]=f,o[u++]=h;do{if(s=de(t[n],e),a=de(t[n+1],e),(n+=r)==i)return o[u++]=s,o[u++]=a,u}while(s==f&&a==h);for(;n<i;){var c=de(t[n],e),l=de(t[n+1],e);if(n+=r,c!=s||l!=a){var v=s-f,d=a-h,p=c-f,y=l-h;v*y==d*p&&(v<0&&p<v||v==p||v>0&&p>v)&&(d<0&&y<d||d==y||d>0&&y>d)?(s=c,a=l):(o[u++]=s,o[u++]=a,f=s,h=a,s=c,a=l)}}return o[u++]=s,o[u++]=a,u}function ye(t,n,i,r,e,o,u,s){for(var a=0,f=i.length;a<f;++a){var h=i[a];u=pe(t,n,h,r,e,o,u),s.push(u),n=h}return u}function me(t,n,i,r,e,o,u,s){for(var a=0,f=i.length;a<f;++a){var h=i[a],c=[];u=ye(t,n,h,r,e,o,u,c),s.push(c),n=h[h.length-1]}return u}function we(t,n,i,r,e){for(var o=void 0!==e?e:[],u=0,s=n;s<i;s+=r)o[u++]=t.slice(s,s+r);return o.length=u,o}function be(t,n,i,r,e){for(var o=void 0!==e?e:[],u=0,s=0,a=i.length;s<a;++s){var f=i[s];o[u++]=we(t,n,f,r,o[u]),n=f}return o.length=u,o}function ge(t,n,i,r,e){for(var o=void 0!==e?e:[],u=0,s=0,a=i.length;s<a;++s){var f=i[s];o[u++]=be(t,n,f,r,o[u]),n=f[f.length-1]}return o.length=u,o}function xe(t,n,i,r){for(var e=0,o=t[i-r],u=t[i-r+1];n<i;n+=r){var s=t[n],a=t[n+1];e+=u*s-o*a,o=s,u=a}return e/2}function Me(t,n,i,r){for(var e=0,o=0,u=i.length;o<u;++o){var s=i[o];e+=xe(t,n,s,r),n=s}return e}function _e(t,n,i,r){for(var e=0,o=0,u=i.length;o<u;++o){var s=i[o];e+=Me(t,n,s,r),n=s[s.length-1]}return e}var Se=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Oe=function(t){function n(n,i){var r=t.call(this)||this;return r.yt=-1,r.wt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return Se(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,n,i,r){return r<Sn(this.getExtent(),t,n)?r:(this.wt!=this.getRevision()&&(this.yt=Math.sqrt(ne(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.wt=this.getRevision()),ee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.yt,!0,t,n,i,r))},n.prototype.getArea=function(){return xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return we(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=ce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,kt)},n.prototype.getType=function(){return Pt.LINEAR_RING},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ae(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Qr),je=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ee=function(t){function n(n,i){var r=t.call(this)||this;return r.setCoordinates(n,i),r}return je(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=li(t,n,e[0],e[1]);if(o<r){for(var u=this.stride,s=0;s<u;++s)i[s]=e[s];return i.length=u,o}return r},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return Pn(this.flatCoordinates,t)},n.prototype.getType=function(){return Pt.POINT},n.prototype.intersectsExtent=function(t){return En(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=se(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Qr);function ke(t,n,i,r,e){return!Un(e,(function(e){return!Ae(t,n,i,r,e[0],e[1])}))}function Ae(t,n,i,r,e,o){for(var u=0,s=t[i-r],a=t[i-r+1];n<i;n+=r){var f=t[n],h=t[n+1];a<=o?h>o&&(f-s)*(o-a)-(e-s)*(h-a)>0&&u++:h<=o&&(f-s)*(o-a)-(e-s)*(h-a)<0&&u--,s=f,a=h}return 0!==u}function Te(t,n,i,r,e,o){if(0===i.length)return!1;if(!Ae(t,n,i[0],r,e,o))return!1;for(var u=1,s=i.length;u<s;++u)if(Ae(t,i[u-1],i[u],r,e,o))return!1;return!0}function Ce(t,n,i,r,e,o){if(0===i.length)return!1;for(var u=0,s=i.length;u<s;++u){var a=i[u];if(Te(t,n,a,r,e,o))return!0;n=a[a.length-1]}return!1}function Pe(t,n,i,r,e,o,u){for(var s,a,f,h,c,l,v,d=e[o+1],y=[],m=0,w=i.length;m<w;++m){var b=i[m];for(h=t[b-r],l=t[b-r+1],s=n;s<b;s+=r)c=t[s],v=t[s+1],(d<=l&&v<=d||l<=d&&d<=v)&&(f=(d-l)/(v-l)*(c-h)+h,y.push(f)),h=c,l=v}var g=NaN,x=-1/0;for(y.sort(p),h=y[0],s=1,a=y.length;s<a;++s){c=y[s];var M=Math.abs(c-h);M>x&&Te(t,n,i,r,f=(h+c)/2,d)&&(g=f,x=M),h=c}return isNaN(g)&&(g=e[o]),u?(u.push(g,d,x),u):[g,d,x]}function Re(t,n,i,r,e){for(var o=[],u=0,s=i.length;u<s;++u){var a=i[u];o=Pe(t,n,a,r,e,2*u,o),n=a[a.length-1]}return o}function Ie(t,n,i,r,e){var o;for(n+=r;n<i;n+=r)if(o=e(t.slice(n-r,n),t.slice(n,n+r)))return o;return!1}function Ne(t,n,i,r,e){var o=Gn([1/0,1/0,-1/0,-1/0],t,n,i,r);return!!ti(e,o)&&(!!jn(e,o)||(o[0]>=e[0]&&o[2]<=e[2]||(o[1]>=e[1]&&o[3]<=e[3]||Ie(t,n,i,r,(function(t,n){return ei(e,t,n)})))))}function ze(t,n,i,r,e){for(var o=0,u=i.length;o<u;++o){if(Ne(t,n,i[o],r,e))return!0;n=i[o]}return!1}function Fe(t,n,i,r,e){return!!Ne(t,n,i,r,e)||(!!Ae(t,n,i,r,e[0],e[1])||(!!Ae(t,n,i,r,e[0],e[3])||(!!Ae(t,n,i,r,e[2],e[1])||!!Ae(t,n,i,r,e[2],e[3]))))}function Le(t,n,i,r,e){if(!Fe(t,n,i[0],r,e))return!1;if(1===i.length)return!0;for(var o=1,u=i.length;o<u;++o)if(ke(t,i[o-1],i[o],r,e)&&!Ne(t,i[o-1],i[o],r,e))return!1;return!0}function Ge(t,n,i,r,e){for(var o=0,u=i.length;o<u;++o){var s=i[o];if(Le(t,n,s,r,e))return!0;n=s[s.length-1]}return!1}function De(t,n,i,r){for(;n<i-r;){for(var e=0;e<r;++e){var o=t[n+e];t[n+e]=t[i-r+e],t[i-r+e]=o}n+=r,i-=r}}function Be(t,n,i,r){for(var e=0,o=t[i-r],u=t[i-r+1];n<i;n+=r){var s=t[n],a=t[n+1];e+=(s-o)*(a+u),o=s,u=a}return 0===e?void 0:e>0}function Ue(t,n,i,r,e){for(var o=void 0!==e&&e,u=0,s=i.length;u<s;++u){var a=i[u],f=Be(t,n,a,r);if(0===u){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=a}return!0}function qe(t,n,i,r,e){for(var o=0,u=i.length;o<u;++o){var s=i[o];if(!Ue(t,n,s,r,e))return!1;s.length&&(n=s[s.length-1])}return!0}function Ve(t,n,i,r,e){for(var o=void 0!==e&&e,u=0,s=i.length;u<s;++u){var a=i[u],f=Be(t,n,a,r);(0===u?o&&f||!o&&!f:o&&!f||!o&&f)&&De(t,n,a,r),n=a}return n}function We(t,n,i,r,e){for(var o=0,u=i.length;o<u;++o)n=Ve(t,n,i[o],r,e);return n}function Xe(t,n){for(var i=[],r=0,e=0,o=0,u=n.length;o<u;++o){var s=n[o];if(Be(t,r,s,2)){if(0===i.length)continue;i[i.length-1].push(n[e])}else i.push(n.slice(e,o+1));e=o+1,r=s}return i}var He=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ke=function(t){function n(n,i,r){var e=t.call(this)||this;return e.bt=[],e.gt=-1,e.xt=null,e.yt=-1,e.wt=-1,e.Mt=-1,e._t=null,void 0!==i&&r?(e.setFlatCoordinates(i,n),e.bt=r):e.setCoordinates(n,i),e}return He(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.bt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.bt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<Sn(this.getExtent(),t,n)?r:(this.wt!=this.getRevision()&&(this.yt=Math.sqrt(ie(this.flatCoordinates,0,this.bt,this.stride,0)),this.wt=this.getRevision()),oe(this.flatCoordinates,0,this.bt,this.stride,this.yt,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return Te(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t,n)},n.prototype.getArea=function(){return Me(this.getOrientedFlatCoordinates(),0,this.bt,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ve(n=this.getOrientedFlatCoordinates().slice(),0,this.bt,this.stride,t):n=this.flatCoordinates,be(n,0,this.bt,this.stride)},n.prototype.getEnds=function(){return this.bt},n.prototype.getFlatInteriorPoint=function(){if(this.gt!=this.getRevision()){var t=Xn(this.getExtent());this.xt=Pe(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t,0),this.gt=this.getRevision()}return this.xt},n.prototype.getInteriorPoint=function(){return new Ee(this.getFlatInteriorPoint(),Tt)},n.prototype.getLinearRingCount=function(){return this.bt.length},n.prototype.getLinearRing=function(t){return t<0||this.bt.length<=t?null:new Oe(this.flatCoordinates.slice(0===t?0:this.bt[t-1],this.bt[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.bt,r=[],e=0,o=0,u=i.length;o<u;++o){var s=i[o],a=new Oe(n.slice(e,s),t);r.push(a),e=s}return r},n.prototype.getOrientedFlatCoordinates=function(){if(this.Mt!=this.getRevision()){var t=this.flatCoordinates;Ue(t,0,this.bt,this.stride)?this._t=t:(this._t=t.slice(),this._t.length=Ve(this._t,0,this.bt,this.stride)),this.Mt=this.getRevision()}return this._t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ye(this.flatCoordinates,0,this.bt,this.stride,Math.sqrt(t),i,0,r),new n(i,kt,r)},n.prototype.getType=function(){return Pt.POLYGON},n.prototype.intersectsExtent=function(t){return Le(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=fe(this.flatCoordinates,0,t,this.stride,this.bt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Qr),Ye=Ke;function Ze(t,n,i,r){for(var e=i||32,o=[],u=0;u<e;++u)b(o,lr(t,n,2*Math.PI*u/e,r));return o.push(o[0],o[1]),new Ke(o,kt,[o.length])}function Je(t){var n=t[0],i=t[1],r=t[2],e=t[3],o=[n,i,n,e,r,e,r,i,n,i];return new Ke(o,kt,[o.length])}function $e(t,n,i){for(var r=n||32,e=t.getStride(),o=t.getLayout(),u=t.getCenter(),s=e*(r+1),a=new Array(s),f=0;f<s;f+=e){a[f]=0,a[f+1]=0;for(var h=2;h<e;h++)a[f+h]=u[h]}var c=[a.length],l=new Ke(a,o,c);return Qe(l,u,t.getRadius(),i),l}function Qe(t,n,i,r){for(var e=t.getFlatCoordinates(),o=t.getStride(),u=e.length/o-1,s=r||0,a=0;a<=u;++a){var f=a*o,h=s+2*yi(a,u)*Math.PI/u;e[f]=n[0]+i*Math.cos(h),e[f+1]=n[1]+i*Math.sin(h)}t.changed()}var to=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),no="accuracy",io="accuracyGeometry",ro="altitude",eo="altitudeAccuracy",oo="heading",uo="position",so="projection",ao="speed",fo="tracking",ho="trackingOptions",co=function(t){function n(n){var i=t.call(this,z)||this;return i.code=n.code,i.message=n.message,i}return to(n,t),n}(c),lo=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.St=null,i.Ot=yr,i.jt=void 0,i.addChangeListener(so,i.Et),i.addChangeListener(fo,i.kt),void 0!==r.projection&&i.setProjection(r.projection),void 0!==r.trackingOptions&&i.setTrackingOptions(r.trackingOptions),i.setTracking(void 0!==r.tracking&&r.tracking),i}return to(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},n.prototype.Et=function(){var t=this.getProjection();t&&(this.Ot=kr(br("EPSG:4326"),t),this.St&&this.set(uo,this.Ot(this.St)))},n.prototype.kt=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.jt?this.jt=navigator.geolocation.watchPosition(this.At.bind(this),this.Tt.bind(this),this.getTrackingOptions()):t||void 0===this.jt||(navigator.geolocation.clearWatch(this.jt),this.jt=void 0)}},n.prototype.At=function(t){var n=t.coords;this.set(no,n.accuracy),this.set(ro,null===n.altitude?void 0:n.altitude),this.set(eo,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(oo,null===n.heading?void 0:pi(n.heading)),this.St?(this.St[0]=n.longitude,this.St[1]=n.latitude):this.St=[n.longitude,n.latitude];var i=this.Ot(this.St);this.set(uo,i),this.set(ao,null===n.speed?void 0:n.speed);var r=Ze(this.St,n.accuracy);r.applyTransform(this.Ot),this.set(io,r),this.changed()},n.prototype.Tt=function(t){this.dispatchEvent(new co(t))},n.prototype.getAccuracy=function(){return this.get(no)},n.prototype.getAccuracyGeometry=function(){return this.get(io)||null},n.prototype.getAltitude=function(){return this.get(ro)},n.prototype.getAltitudeAccuracy=function(){return this.get(eo)},n.prototype.getHeading=function(){return this.get(oo)},n.prototype.getPosition=function(){return this.get(uo)},n.prototype.getProjection=function(){return this.get(so)},n.prototype.getSpeed=function(){return this.get(ao)},n.prototype.getTracking=function(){return this.get(fo)},n.prototype.getTrackingOptions=function(){return this.get(ho)},n.prototype.setProjection=function(t){this.set(so,br(t))},n.prototype.setTracking=function(t){this.set(fo,t)},n.prototype.setTrackingOptions=function(t){this.set(ho,t)},n}(et),vo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),po=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.extent=n,o.Ct=r,o.resolution=i,o.state=e,o}return vo(n,t),n.prototype.changed=function(){this.dispatchEvent(N)},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return r()},n.prototype.getPixelRatio=function(){return this.Ct},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){r()},n}(I),yo=0,mo=1,wo=2,bo=3,go=4,xo=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Mo(t,n,i){var r=t,e=!0,o=!1,u=!1,s=[Z(r,W,(function(){u=!0,o||n()}))];return r.src&&Ht?(o=!0,r.decode().then((function(){e&&n()})).catch((function(t){e&&(u?n():i())}))):s.push(Z(r,z,i)),function(){e=!1,s.forEach(J)}}var _o=function(t){function n(n,i,r,e,o,u){var s=t.call(this,n,i,r,yo)||this;return s.Pt=e,s.Rt=new Image,null!==o&&(s.Rt.crossOrigin=o),s.Nt=null,s.state=yo,s.zt=u,s}return xo(n,t),n.prototype.getImage=function(){return this.Rt},n.prototype.Ft=function(){this.state=bo,this.Lt(),this.changed()},n.prototype.Gt=function(){void 0===this.resolution&&(this.resolution=Yn(this.extent)/this.Rt.height),this.state=wo,this.Lt(),this.changed()},n.prototype.load=function(){this.state!=yo&&this.state!=bo||(this.state=mo,this.changed(),this.zt(this,this.Pt),this.Nt=Mo(this.Rt,this.Gt.bind(this),this.Ft.bind(this)))},n.prototype.setImage=function(t){this.Rt=t,this.resolution=Yn(this.extent)/this.Rt.height},n.prototype.Lt=function(){this.Nt&&(this.Nt(),this.Nt=null)},n}(po),So=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Oo=function(t){function n(n,i,r,e,o){var u=this,s=void 0!==o?yo:wo;return(u=t.call(this,n,i,r,s)||this).U=void 0!==o?o:null,u.Dt=e,u.V=null,u}return So(n,t),n.prototype.getError=function(){return this.V},n.prototype.Bt=function(t){t?(this.V=t,this.state=bo):this.state=wo,this.changed()},n.prototype.load=function(){this.state==yo&&(this.state=mo,this.changed(),this.U(this.Bt.bind(this)))},n.prototype.getImage=function(){return this.Dt},n}(po);function jo(t,n,i,r){var e;return e=i&&i.length?i.shift():Xt?new OffscreenCanvas(t||300,n||300):document.createElement("canvas"),t&&(e.width=t),n&&(e.height=n),e.getContext("2d",r)}function Eo(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function ko(t){var n=t.offsetHeight,i=getComputedStyle(t);return n+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function Ao(t,n){var i=n.parentNode;i&&i.replaceChild(t,n)}function To(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Co(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function Po(t,n){for(var i=t.childNodes,r=0;;++r){var e=i[r],o=n[r];if(!e&&!o)break;e!==o&&(e?o?t.insertBefore(o,e):(t.removeChild(e),--r):t.appendChild(o))}}var Ro=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Io=function(t){function n(n,i,r,e,o,u){var s=t.call(this,n,i,u)||this;return s.Ut=e,s.Pt=r,s.key=r,s.Rt=new Image,null!==e&&(s.Rt.crossOrigin=e),s.Nt=null,s.qt=o,s}return Ro(n,t),n.prototype.getImage=function(){return this.Rt},n.prototype.setImage=function(t){this.Rt=t,this.state=vt,this.Lt(),this.changed()},n.prototype.Ft=function(){var t;this.state=dt,this.Lt(),this.Rt=((t=jo(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},n.prototype.Gt=function(){var t=this.Rt;t.naturalWidth&&t.naturalHeight?this.state=vt:this.state=pt,this.Lt(),this.changed()},n.prototype.load=function(){this.state==dt&&(this.state=ct,this.Rt=new Image,null!==this.Ut&&(this.Rt.crossOrigin=this.Ut)),this.state==ct&&(this.state=lt,this.changed(),this.qt(this,this.Pt),this.Nt=Mo(this.Rt,this.Gt.bind(this),this.Ft.bind(this)))},n.prototype.Lt=function(){this.Nt&&(this.Nt(),this.Nt=null)},n}(xt),No=function(){function t(t,n,i){this.Vt=t,this.Wt=n,this.Xt=i,this.Ht=[],this.Kt=0,this.Yt=0}return t.prototype.begin=function(){this.Ht.length=0,this.Kt=0,this.Yt=0},t.prototype.update=function(t,n){this.Ht.push(t,n,Date.now())},t.prototype.end=function(){if(this.Ht.length<6)return!1;var t=Date.now()-this.Xt,n=this.Ht.length-3;if(this.Ht[n+2]<t)return!1;for(var i=n-3;i>0&&this.Ht[i+2]>t;)i-=3;var r=this.Ht[n+2]-this.Ht[i+2];if(r<1e3/60)return!1;var e=this.Ht[n]-this.Ht[i],o=this.Ht[n+1]-this.Ht[i+1];return this.Kt=Math.atan2(o,e),this.Yt=Math.sqrt(e*e+o*o)/r,this.Yt>this.Wt},t.prototype.getDistance=function(){return(this.Wt-this.Yt)/this.Vt},t.prototype.getAngle=function(){return this.Kt},t}(),zo=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Fo=/^([a-z]*)$|^hsla?\(.*\)$/i;function Lo(t){return"string"==typeof t?t:qo(t)}function Go(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var i=getComputedStyle(n).color;return document.body.removeChild(n),i}return""}var Do=function(){var t={},n=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){var e=0;for(var o in t)0==(3&e++)&&(delete t[o],--n)}r=function(t){var n,i,r,e,o;Fo.exec(t)&&(t=Go(t));if(zo.exec(t)){var u=t.length-1,s=void 0;s=u<=4?1:2;var a=4===u||8===u;n=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),e=a?parseInt(t.substr(1+3*s,s),16):255,1==s&&(n=(n<<4)+n,i=(i<<4)+i,r=(r<<4)+r,a&&(e=(e<<4)+e)),o=[n,i,r,e/255]}else 0==t.indexOf("rgba(")?Uo(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Uo(o)):St(!1,14);return o}(i),t[i]=r,++n}return r}}();function Bo(t){return Array.isArray(t)?t:Do(t)}function Uo(t){return t[0]=ai(t[0]+.5|0,0,255),t[1]=ai(t[1]+.5|0,0,255),t[2]=ai(t[2]+.5|0,0,255),t[3]=ai(t[3],0,1),t}function qo(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+n+","+i+","+r+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function Vo(t){return Fo.test(t)&&(t=Go(t)),zo.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var Wo=function(){function t(){this.Zt={},this.Jt=0,this.$t=32}return t.prototype.clear=function(){this.Zt={},this.Jt=0},t.prototype.canExpireCache=function(){return this.Jt>this.$t},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.Zt){var i=this.Zt[n];0!=(3&t++)||i.hasListener()||(delete this.Zt[n],--this.Jt)}}},t.prototype.get=function(t,n,i){var r=Xo(t,n,i);return r in this.Zt?this.Zt[r]:null},t.prototype.set=function(t,n,i,r){var e=Xo(t,n,i);this.Zt[e]=r,++this.Jt},t.prototype.setSize=function(t){this.$t=t,this.expire()},t}();function Xo(t,n,i){return n+":"+t+":"+(i?Lo(i):"null")}var Ho=Wo,Ko=new Wo,Yo="opacity",Zo="visible",Jo="extent",$o="zIndex",Qo="maxResolution",tu="minResolution",nu="maxZoom",iu="minZoom",ru="source",eu="map";function ou(t){return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var uu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),su=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.Qt=n.background;var r=A({},n);return"object"===ou(n.properties)&&(delete r.properties,A(r,n.properties)),r[Yo]=void 0!==n.opacity?n.opacity:1,St("number"==typeof r[Yo],64),r[Zo]=void 0===n.visible||n.visible,r[$o]=n.zIndex,r[Qo]=void 0!==n.maxResolution?n.maxResolution:1/0,r[tu]=void 0!==n.minResolution?n.minResolution:0,r[iu]=void 0!==n.minZoom?n.minZoom:-1/0,r[nu]=void 0!==n.maxZoom?n.maxZoom:1/0,i.tn=void 0!==r.className?r.className:"ol-layer",delete r.className,i.setProperties(r),i.rn=null,i}return uu(n,t),n.prototype.getBackground=function(){return this.Qt},n.prototype.getClassName=function(){return this.tn},n.prototype.getLayerState=function(t){var n=this.rn||{layer:this,managed:void 0===t||t},i=this.getZIndex();return n.opacity=ai(Math.round(100*this.getOpacity())/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==i||n.managed?i:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.rn=n,n},n.prototype.getLayersArray=function(t){return r()},n.prototype.getLayerStatesArray=function(t){return r()},n.prototype.getExtent=function(){return this.get(Jo)},n.prototype.getMaxResolution=function(){return this.get(Qo)},n.prototype.getMinResolution=function(){return this.get(tu)},n.prototype.getMinZoom=function(){return this.get(iu)},n.prototype.getMaxZoom=function(){return this.get(nu)},n.prototype.getOpacity=function(){return this.get(Yo)},n.prototype.getSourceState=function(){return r()},n.prototype.getVisible=function(){return this.get(Zo)},n.prototype.getZIndex=function(){return this.get($o)},n.prototype.setBackground=function(t){this.Qt=t,this.changed()},n.prototype.setExtent=function(t){this.set(Jo,t)},n.prototype.setMaxResolution=function(t){this.set(Qo,t)},n.prototype.setMinResolution=function(t){this.set(tu,t)},n.prototype.setMaxZoom=function(t){this.set(nu,t)},n.prototype.setMinZoom=function(t){this.set(iu,t)},n.prototype.setOpacity=function(t){St("number"==typeof t,64),this.set(Yo,t)},n.prototype.setVisible=function(t){this.set(Zo,t)},n.prototype.setZIndex=function(t){this.set($o,t)},n.prototype.disposeInternal=function(){this.rn&&(this.rn.layer=null,this.rn=null),t.prototype.disposeInternal.call(this)},n}(et),au="prerender",fu="postrender",hu="precompose",cu="postcompose",lu="rendercomplete",vu="undefined",du="loading",pu="ready",yu="error",mu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function wu(t,n){if(!t.visible)return!1;var i=n.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var r=n.zoom;return r>t.minZoom&&r<=t.maxZoom}var bu=function(t){function n(n){var i=this,r=A({},n);delete r.source,(i=t.call(this,r)||this).on,i.once,i.un,i.en=null,i.sn=null,i.an=null,i.fn=null,i.rendered=!1,n.render&&(i.render=n.render),n.map&&i.setMap(n.map),i.addChangeListener(ru,i.hn);var e=n.source?n.source:null;return i.setSource(e),i}return mu(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},n.prototype.getSource=function(){return this.get(ru)||null},n.prototype.getRenderSource=function(){return this.getSource()},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():vu},n.prototype.cn=function(){this.changed()},n.prototype.hn=function(){this.an&&(J(this.an),this.an=null);var t=this.getSource();t&&(this.an=Y(t,N,this.cn,this)),this.changed()},n.prototype.getFeatures=function(t){return this.fn?this.fn.getFeatures(t):new Promise((function(t){return t([])}))},n.prototype.getData=function(t){return this.fn&&this.rendered?this.fn.getData(t):null},n.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n)},n.prototype.unrender=function(){this.rendered=!1},n.prototype.setMapInternal=function(t){t||this.unrender(),this.set(eu,t)},n.prototype.getMapInternal=function(){return this.get(eu)},n.prototype.setMap=function(t){this.en&&(J(this.en),this.en=null),t||this.changed(),this.sn&&(J(this.sn),this.sn=null),t&&(this.en=Y(t,hu,(function(t){var n=t.frameState.layerStatesArray,i=this.getLayerState(!1);St(!n.some((function(t){return t.layer===i.layer})),67),n.push(i)}),this),this.sn=Y(this,N,t.render,t),this.changed())},n.prototype.setSource=function(t){this.set(ru,t)},n.prototype.getRenderer=function(){return this.fn||(this.fn=this.createRenderer()),this.fn},n.prototype.hasRenderer=function(){return!!this.fn},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.fn&&(this.fn.dispose(),delete this.fn),this.setSource(null),t.prototype.disposeInternal.call(this)},n}(su),gu=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function xu(t,n){Ko.expire()}var Mu=function(t){function n(n){var i=t.call(this)||this;return i.vn=n,i}return gu(n,t),n.prototype.dispatchRenderEvent=function(t,n){r()},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;sn(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),an(r,i)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o,u,s){var a,f=n.viewState;function h(t,n,i,r){return e.call(o,n,t?i:null,r)}var c=f.projection,l=ur(t.slice(),c),v=[[0,0]];if(c.canWrapX()&&r){var d=Qn(c.getExtent());v.push([-d,0],[d,0])}for(var p=n.layerStatesArray,y=p.length,m=[],w=[],b=0;b<v.length;b++)for(var g=y-1;g>=0;--g){var x=p[g],M=x.layer;if(M.hasRenderer()&&wu(x,f)&&u.call(s,M)){var _=M.getRenderer(),S=M.getSource();if(_&&S){var O=S.getWrapX()?l:t,j=h.bind(null,x.managed);w[0]=O[0]+v[b][0],w[1]=O[1]+v[b][1],a=_.forEachFeatureAtCoordinate(w,n,i,j,m)}if(a)return a}}if(0!==m.length){var E=1/m.length;return m.forEach((function(t,n){return t.distanceSq+=n*E})),m.sort((function(t,n){return t.distanceSq-n.distanceSq})),m.some((function(t){return a=t.callback(t.feature,t.layer,t.geometry)})),a}},n.prototype.forEachLayerAtPixel=function(t,n,i,e,o){return r()},n.prototype.hasFeatureAtCoordinate=function(t,n,i,r,e,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,i,r,S,this,e,o)},n.prototype.getMap=function(){return this.vn},n.prototype.renderFrame=function(t){r()},n.prototype.scheduleExpireIconCache=function(t){Ko.canExpireCache()&&t.postRenderFunctions.push(xu)},n}(v),_u=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Su=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=e,o}return _u(n,t),n}(c),Ou="ol-hidden",ju="ol-selectable",Eu="ol-unselectable",ku="ol-unsupported",Au="ol-control",Tu="ol-collapsed",Cu=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Pu=["style","variant","weight","size","lineHeight","family"],Ru=function(t){var n=t.match(Cu);if(!n)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,e=Pu.length;r<e;++r){var o=n[r+1];void 0!==o&&(i[Pu[r]]=o)}return i.families=i.family.split(/,\s?/),i};function Iu(t){return 1===t?"":String(Math.round(100*t)/100)}var Nu="10px sans-serif",zu="#000",Fu="round",Lu=[],Gu="round",Du=10,Bu="#000",Uu="center",qu="middle",Vu=[0,0,0,0],Wu=new et,Xu=new I;Xu.setSize=function(){console.warn("labelCache is deprecated.")};var Hu,Ku,Yu=null,Zu={},Ju=function(){var t,n,i="32px ",r=["monospace","serif"],e=r.length,o="wmytzilWMYTZIL@#/&?$%10";function u(t,u,s){for(var a=!0,f=0;f<e;++f){var h=r[f];if(n=ts(t+" "+u+" "+i+h,o),s!=h){var c=ts(t+" "+u+" "+i+s+","+h,o);a=a&&c!=n}}return!!a}function s(){for(var n=!0,i=Wu.getKeys(),r=0,e=i.length;r<e;++r){var o=i[r];Wu.get(o)<100&&(u.apply(this,o.split("\n"))?(T(Zu),Yu=null,Hu=void 0,Wu.set(o,100)):(Wu.set(o,Wu.get(o)+1,!0),n=!1))}n&&(clearInterval(t),t=void 0)}return function(n){var i=Ru(n);if(i)for(var r=i.families,e=0,o=r.length;e<o;++e){var a=r[e],f=i.style+"\n"+i.weight+"\n"+a;void 0===Wu.get(f)&&(Wu.set(f,100,!0),u(i.style,i.weight,a)||(Wu.set(f,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),$u=function(t){var n=Zu[t];if(null==n){if(Xt){var i=Ru(t),r=Qu(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Ku||((Ku=document.createElement("div")).innerHTML="M",Ku.style.minHeight="0",Ku.style.maxHeight="none",Ku.style.height="auto",Ku.style.padding="0",Ku.style.border="none",Ku.style.position="absolute",Ku.style.display="block",Ku.style.left="-99999px"),Ku.style.font=t,document.body.appendChild(Ku),n=Ku.offsetHeight,document.body.removeChild(Ku);Zu[t]=n}return n};function Qu(t,n){return Yu||(Yu=jo(1,1)),t!=Hu&&(Yu.font=t,Hu=Yu.font),Yu.measureText(n)}function ts(t,n){return Qu(t,n).width}function ns(t,n,i){if(n in i)return i[n];var r=ts(t,n);return i[n]=r,r}function is(t,n){for(var i=[],r=[],e=[],o=0,u=0,s=0,a=0,f=0,h=n.length;f<=h;f+=2){var c=n[f];if("\n"!==c&&f!==h){var l=n[f+1]||t.font,v=ts(l,c);i.push(v),u+=v;var d=$u(l);r.push(d),a=Math.max(a,d)}else o=Math.max(o,u),e.push(u),u=0,s+=a}return{width:o,height:s,widths:i,heights:r,lineWidths:e}}function rs(t,n,i,r,e,o,u,s,a,f,h){t.save(),1!==i&&(t.globalAlpha*=i),n&&t.setTransform.apply(t,n),r.contextInstructions?(t.translate(a,f),t.scale(h[0],h[1]),function(t,n){for(var i=t.contextInstructions,r=0,e=i.length;r<e;r+=2)Array.isArray(i[r+1])?n[i[r]].apply(n,i[r+1]):n[i[r]]=i[r+1]}(r,t)):h[0]<0||h[1]<0?(t.translate(a,f),t.scale(h[0],h[1]),t.drawImage(r,e,o,u,s,0,0,u,s)):t.drawImage(r,e,o,u,s,a,f,u*h[0],s*h[1]),t.restore()}var es=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),os=function(t){function n(n){var i=t.call(this,n)||this;i.dn=Y(Wu,l,n.redrawText.bind(n)),i.pn=document.createElement("div");var r=i.pn.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.pn.className="ol-unselectable ol-layers";var e=n.getViewport();return e.insertBefore(i.pn,e.firstChild||null),i.yn=[],i.mn=!0,i}return es(n,t),n.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var r=new Su(t,void 0,n);i.dispatchEvent(r)}},n.prototype.disposeInternal=function(){J(this.dn),this.pn.parentNode.removeChild(this.pn),t.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(hu,t);var n=t.layerStatesArray.sort((function(t,n){return t.zIndex-n.zIndex})),i=t.viewState;this.yn.length=0;for(var r=[],e=null,o=0,u=n.length;o<u;++o){var s=n[o];t.layerIndex=o;var a=s.layer,f=a.getSourceState();if(!wu(s,i)||f!=pu&&f!=vu)a.unrender();else{var h=a.render(t,e);h&&(h!==e&&(this.yn.push(h),e=h),"getDeclutter"in a&&r.push(a))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);Po(this.pn,this.yn),this.dispatchRenderEvent(cu,t),this.mn||(this.pn.style.display="",this.mn=!0),this.scheduleExpireIconCache(t)}else this.mn&&(this.pn.style.display="none",this.mn=!1)},n.prototype.forEachLayerAtPixel=function(t,n,i,r,e){for(var o=n.viewState,u=n.layerStatesArray,s=u.length-1;s>=0;--s){var a=u[s],f=a.layer;if(f.hasRenderer()&&wu(a,o)&&e(f)){var h=f.getRenderer().getDataAtPixel(t,n,i);if(h){var c=r(f,h);if(c)return c}}}},n}(Mu),us=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ss=function(t){function n(n,i){var r=t.call(this,n)||this;return r.layer=i,r}return us(n,t),n}(c),as="layers",fs=function(t){function n(n){var i=this,r=n||{},e=A({},r);delete e.layers;var o=r.layers;return(i=t.call(this,e)||this).on,i.once,i.un,i.wn=[],i.bn={},i.addChangeListener(as,i.gn),o?Array.isArray(o)?o=new ht(o.slice(),{unique:!0}):St("function"==typeof o.getArray,43):o=new ht(void 0,{unique:!0}),i.setLayers(o),i}return us(n,t),n.prototype.xn=function(){this.changed()},n.prototype.gn=function(){this.wn.forEach(J),this.wn.length=0;var t=this.getLayers();for(var n in this.wn.push(Y(t,ot,this.Mn,this),Y(t,ut,this._n,this)),this.bn)this.bn[n].forEach(J);T(this.bn);for(var i=t.getArray(),r=0,e=i.length;r<e;r++){var o=i[r];this.Sn(o),this.dispatchEvent(new ss("addlayer",o))}this.changed()},n.prototype.Sn=function(t){var i=[Y(t,l,this.xn,this),Y(t,N,this.xn,this)];t instanceof n&&i.push(Y(t,"addlayer",this.On,this),Y(t,"removelayer",this.jn,this)),this.bn[o(t)]=i},n.prototype.On=function(t){this.dispatchEvent(new ss("addlayer",t.layer))},n.prototype.jn=function(t){this.dispatchEvent(new ss("removelayer",t.layer))},n.prototype.Mn=function(t){var n=t.element;this.Sn(n),this.dispatchEvent(new ss("addlayer",n)),this.changed()},n.prototype._n=function(t){var n=t.element,i=o(n);this.bn[i].forEach(J),delete this.bn[i],this.dispatchEvent(new ss("removelayer",n)),this.changed()},n.prototype.getLayers=function(){return this.get(as)},n.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),r=0,e=i.length;r<e;++r)this.dispatchEvent(new ss("removelayer",i[r]));this.set(as,t)},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(n)})),n},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],i=n.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(n)}));var r=this.getLayerState(),e=r.zIndex;t||void 0!==r.zIndex||(e=0);for(var o=i,u=n.length;o<u;o++){var s=n[o];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),s.minZoom=Math.max(s.minZoom,r.minZoom),s.maxZoom=Math.min(s.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==s.extent?s.extent=Zn(s.extent,r.extent):s.extent=r.extent),void 0===s.zIndex&&(s.zIndex=e)}return n},n.prototype.getSourceState=function(){return pu},n}(su),hs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cs=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.map=i,e.frameState=void 0!==r?r:null,e}return hs(n,t),n}(c),ls=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vs=function(t){function n(n,i,r,e,o){var u=t.call(this,n,i,o)||this;return u.originalEvent=r,u.En=null,u.kn=null,u.dragging=void 0!==e&&e,u}return ls(n,t),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.En||(this.En=this.map.getEventPixel(this.originalEvent)),this.En},set:function(t){this.En=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.kn||(this.kn=this.map.getCoordinateFromPixel(this.pixel)),this.kn},set:function(t){this.kn=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(cs),ds={SINGLECLICK:"singleclick",CLICK:L,DBLCLICK:G,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ps="pointermove",ys="pointerdown",ms="pointerup",ws="pointerout",bs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gs=function(t){function n(n,i){var r=t.call(this,n)||this;r.vn=n,r.An,r.Tn=!1,r.Cn=!1,r.Pn=[],r.Rn=void 0===i?1:i,r.In=null;var e=r.vn.getViewport();return r.Nn=0,r.zn={},r.pn=e,r.Fn=Y(e,ys,r.Ln,r),r.Gn,r.Dn=Y(e,ps,r.Bn,r),r.Un=r.qn.bind(r),r.pn.addEventListener(H,r.Un,!!Kt&&{passive:!1}),r}return bs(n,t),n.prototype.Vn=function(t){var n=new vs(ds.CLICK,this.vn,t);this.dispatchEvent(n),void 0!==this.An?(clearTimeout(this.An),this.An=void 0,n=new vs(ds.DBLCLICK,this.vn,t),this.dispatchEvent(n)):this.An=setTimeout(function(){this.An=void 0;var n=new vs(ds.SINGLECLICK,this.vn,t);this.dispatchEvent(n)}.bind(this),250)},n.prototype.Wn=function(t){var n=t;n.type==ds.POINTERUP||n.type==ds.POINTERCANCEL?delete this.zn[n.pointerId]:n.type==ds.POINTERDOWN&&(this.zn[n.pointerId]=!0),this.Nn=Object.keys(this.zn).length},n.prototype.Xn=function(t){this.Wn(t);var n=new vs(ds.POINTERUP,this.vn,t);this.dispatchEvent(n),this.Tn&&!n.defaultPrevented&&!this.Cn&&this.Hn(t)&&this.Vn(this.In),0===this.Nn&&(this.Pn.forEach(J),this.Pn.length=0,this.Cn=!1,this.In=null)},n.prototype.Hn=function(t){return 0===t.button},n.prototype.Ln=function(t){this.Tn=0===this.Nn,this.Wn(t);var n=new vs(ds.POINTERDOWN,this.vn,t);for(var i in this.dispatchEvent(n),this.In={},t){var r=t[i];this.In[i]="function"==typeof r?j:r}if(0===this.Pn.length){var e=this.vn.getOwnerDocument();this.Pn.push(Y(e,ds.POINTERMOVE,this.Kn,this),Y(e,ds.POINTERUP,this.Xn,this),Y(this.pn,ds.POINTERCANCEL,this.Xn,this)),this.pn.getRootNode&&this.pn.getRootNode()!==e&&this.Pn.push(Y(this.pn.getRootNode(),ds.POINTERUP,this.Xn,this))}},n.prototype.Kn=function(t){if(this.Yn(t)){this.Cn=!0;var n=new vs(ds.POINTERDRAG,this.vn,t,this.Cn);this.dispatchEvent(n)}},n.prototype.Bn=function(t){this.Gn=t;var n=!(!this.In||!this.Yn(t));this.dispatchEvent(new vs(t.type,this.vn,t,n))},n.prototype.qn=function(t){var n=this.Gn;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},n.prototype.Yn=function(t){return this.Cn||Math.abs(t.clientX-this.In.clientX)>this.Rn||Math.abs(t.clientY-this.In.clientY)>this.Rn},n.prototype.disposeInternal=function(){this.Dn&&(J(this.Dn),this.Dn=null),this.pn.removeEventListener(H,this.Un),this.Fn&&(J(this.Fn),this.Fn=null),this.Pn.forEach(J),this.Pn.length=0,this.pn=null,t.prototype.disposeInternal.call(this)},n}(I),xs="postrender",Ms="movestart",_s="moveend",Ss="loadstart",Os="loadend",js="layergroup",Es="size",ks="target",As="view",Ts=1/0,Cs=function(){function t(t,n){this.Zn=t,this.Jn=n,this.$n=[],this.Qn=[],this.ti={}}return t.prototype.clear=function(){this.$n.length=0,this.Qn.length=0,T(this.ti)},t.prototype.dequeue=function(){var t=this.$n,n=this.Qn,i=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.ni(0));var r=this.Jn(i);return delete this.ti[r],i},t.prototype.enqueue=function(t){St(!(this.Jn(t)in this.ti),31);var n=this.Zn(t);return n!=Ts&&(this.$n.push(t),this.Qn.push(n),this.ti[this.Jn(t)]=!0,this.ii(0,this.$n.length-1),!0)},t.prototype.getCount=function(){return this.$n.length},t.prototype.ri=function(t){return 2*t+1},t.prototype.ei=function(t){return 2*t+2},t.prototype.oi=function(t){return t-1>>1},t.prototype.ui=function(){var t;for(t=(this.$n.length>>1)-1;t>=0;t--)this.ni(t)},t.prototype.isEmpty=function(){return 0===this.$n.length},t.prototype.isKeyQueued=function(t){return t in this.ti},t.prototype.isQueued=function(t){return this.isKeyQueued(this.Jn(t))},t.prototype.ni=function(t){for(var n=this.$n,i=this.Qn,r=n.length,e=n[t],o=i[t],u=t;t<r>>1;){var s=this.ri(t),a=this.ei(t),f=a<r&&i[a]<i[s]?a:s;n[t]=n[f],i[t]=i[f],t=f}n[t]=e,i[t]=o,this.ii(u,t)},t.prototype.ii=function(t,n){for(var i=this.$n,r=this.Qn,e=i[n],o=r[n];n>t;){var u=this.oi(n);if(!(r[u]>o))break;i[n]=i[u],r[n]=r[u],n=u}i[n]=e,r[n]=o},t.prototype.reprioritize=function(){var t,n,i,r=this.Zn,e=this.$n,o=this.Qn,u=0,s=e.length;for(n=0;n<s;++n)(i=r(t=e[n]))==Ts?delete this.ti[this.Jn(t)]:(o[u]=i,e[u++]=t);e.length=u,o.length=u,this.ui()},t}(),Ps=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rs=function(t){function n(n,i){var r=t.call(this,(function(t){return n.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.si=r.handleTileChange.bind(r),r.ai=i,r.fi=0,r.hi={},r}return Ps(n,t),n.prototype.enqueue=function(n){var i=t.prototype.enqueue.call(this,n);i&&n[0].addEventListener(N,this.si);return i},n.prototype.getTilesLoading=function(){return this.fi},n.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===vt||i===dt||i===pt){n.removeEventListener(N,this.si);var r=n.getKey();r in this.hi&&(delete this.hi[r],--this.fi),this.ai()}},n.prototype.loadMoreTiles=function(t,n){for(var i,r,e=0;this.fi<t&&e<n&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==ct||r in this.hi||(this.hi[r]=!0,++this.fi,++e,i.load())},n}(Cs);function Is(t,n,i,r,e){if(!t||!(i in t.wantedTiles))return Ts;if(!t.wantedTiles[i][n.getKey()])return Ts;var o=t.viewState.center,u=r[0]-o[0],s=r[1]-o[1];return 65536*Math.log(e)+Math.sqrt(u*u+s*s)/e}var Ns=0,zs=1,Fs={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Ls=256;function Gs(t,n,i){return function(r,e,o,u,s){if(r){if(!e&&!n)return r;var a=n?0:o[0]*e,f=n?0:o[1]*e,h=s?s[0]:0,c=s?s[1]:0,l=t[0]+a/2+h,v=t[2]-a/2+h,d=t[1]+f/2+c,p=t[3]-f/2+c;l>v&&(v=l=(v+l)/2),d>p&&(p=d=(p+d)/2);var y=ai(r[0],l,v),m=ai(r[1],d,p);if(u&&i&&e){var w=30*e;y+=-w*Math.log(1+Math.max(0,l-r[0])/w)+w*Math.log(1+Math.max(0,r[0]-v)/w),m+=-w*Math.log(1+Math.max(0,d-r[1])/w)+w*Math.log(1+Math.max(0,r[1]-p)/w)}return[y,m]}}}function Ds(t){return t}function Bs(t,n,i,r){var e=Qn(n)/i[0],o=Yn(n)/i[1];return r?Math.min(t,Math.max(e,o)):Math.min(t,Math.min(e,o))}function Us(t,n,i){var r=Math.min(t,n);return r*=Math.log(1+50*Math.max(0,t/n-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),ai(r,i/2,2*n)}function qs(t,n,i,r){return function(e,o,u,s){if(void 0!==e){var a=t[0],f=t[t.length-1],h=i?Bs(a,i,u,r):a;if(s)return void 0===n||n?Us(e,h,f):ai(e,f,h);var c=Math.min(h,e),l=Math.floor(m(t,c,o));return t[l]>h&&l<t.length-1?t[l+1]:t[l]}}}function Vs(t,n,i,r,e,o){return function(u,s,a,f){if(void 0!==u){var h=e?Bs(n,e,a,o):n,c=void 0!==i?i:0;if(f)return void 0===r||r?Us(u,h,c):ai(u,c,h);var l=Math.ceil(Math.log(n/h)/Math.log(t)-1e-9),v=-s*(.5-1e-9)+.5,d=Math.min(h,u),p=Math.floor(Math.log(n/d)/Math.log(t)+v),y=Math.max(l,p);return ai(n/Math.pow(t,y),c,h)}}}function Ws(t,n,i,r,e){return function(o,u,s,a){if(void 0!==o){var f=r?Bs(t,r,s,e):t;return(void 0===i||i)&&a?Us(o,f,n):ai(o,n,f)}}}function Xs(t){return void 0!==t?0:void 0}function Hs(t){return void 0!==t?t:void 0}function Ks(t){var n=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function Ys(t){var n=t||pi(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}var Zs=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Js(t,n){setTimeout((function(){t(n)}),0)}function $s(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Gs(t.extent,t.constrainOnlyCenter,n)}var i=_r(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var r=i.getExtent().slice();return r[0]=-1/0,r[2]=1/0,Gs(r,!1,!1)}return Ds}function Qs(t){var n,i,r,e=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,a=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,h=_r(t.projection,"EPSG:3857"),c=h.getExtent(),l=t.constrainOnlyCenter,v=t.extent;if(s||v||!h.isGlobal()||(l=!1,v=c),void 0!==t.resolutions){var d=t.resolutions;i=d[e],r=void 0!==d[o]?d[o]:d[d.length-1],n=t.constrainResolution?qs(d,a,!l&&v,f):Ws(i,r,a,!l&&v,f)}else{var p=(c?Math.max(Qn(c),Yn(c)):360*zt[Lt.DEGREES]/h.getMetersPerUnit())/Ls/Math.pow(2,0),y=p/Math.pow(2,28);void 0!==(i=t.maxResolution)?e=0:i=p/Math.pow(u,e),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(u,o):p/Math.pow(u,o):y),o=e+Math.floor(Math.log(i/r)/Math.log(u)),r=i/Math.pow(u,o-e),n=t.constrainResolution?Vs(u,i,r,a,!l&&v,f):Ws(i,r,a,!l&&v,f)}return{constraint:n,maxResolution:i,minResolution:r,minZoom:e,zoomFactor:u}}function ta(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?Ys():!1===n?Hs:"number"==typeof n?Ks(n):Hs}return Xs}function na(t){return!(t.sourceCenter&&t.targetCenter&&!Qi(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function ia(t,n,i,r,e){var o=Math.cos(-e),u=Math.sin(-e),s=t[0]*o-t[1]*u,a=t[1]*o+t[0]*u;return[(s+=(n[0]/2-i[0])*r)*o-(a+=(i[1]-n[1]/2)*r)*(u=-u),a*o+s*u]}var ra=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=A({},n);return i.ci=[0,0],i.li=[],i.vi,i.di=_r(r.projection,"EPSG:3857"),i.yi=[100,100],i.mi=null,i.wi,i.bi,i.gi=null,i.xi,i.Mi,i._i=void 0,r.projection&&dr(),r.center&&(r.center=zr(r.center,i.di)),r.extent&&(r.extent=Lr(r.extent,i.di)),i.Si(r),i}return Zs(n,t),n.prototype.Si=function(t){var n=A({},t);for(var i in Fs)delete n[i];this.setProperties(n,!0);var r=Qs(t);this.Oi=r.maxResolution,this.ji=r.minResolution,this.Ei=r.zoomFactor,this.ki=t.resolutions,this.Ai=t.padding,this.Ti=r.minZoom;var e=$s(t),o=r.constraint,u=ta(t);this.Ci={center:e,resolution:o,rotation:u},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(n.prototype,"padding",{get:function(){return this.Ai},set:function(t){var n=this.Ai;this.Ai=t;var i=this.getCenter();if(i){var r=t||[0,0,0,0];n=n||[0,0,0,0];var e=this.getResolution(),o=e/2*(r[3]-n[3]+n[1]-r[1]),u=e/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-u])}},enumerable:!1,configurable:!0}),n.prototype.Pi=function(t){var n=this.getProperties();return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),A({},n,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var r=arguments[i];r.center&&((r=A({},r)).center=zr(r.center,this.getProjection())),r.anchor&&((r=A({},r)).anchor=zr(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)},n.prototype.animateInternal=function(t){var n,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(n=arguments[i-1],--i);for(var r=0;r<i&&!this.isDef();++r){var e=arguments[r];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation)}if(r!==i){for(var o=Date.now(),u=this.mi.slice(),s=this.wi,a=this.bi,f=[];r<i;++r){var h=arguments[r],c={start:o,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||wt,callback:n};if(h.center&&(c.sourceCenter=u,c.targetCenter=h.center.slice(),u=c.targetCenter),void 0!==h.zoom?(c.sourceResolution=s,c.targetResolution=this.getResolutionForZoom(h.zoom),s=c.targetResolution):h.resolution&&(c.sourceResolution=s,c.targetResolution=h.resolution,s=c.targetResolution),void 0!==h.rotation){c.sourceRotation=a;var l=yi(h.rotation-a+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=a+l,a=c.targetRotation}na(c)?c.complete=!0:o+=c.duration,f.push(c)}this.li.push(f),this.setHint(Ns,1),this.Ri()}else n&&Js(n,!0)},n.prototype.getAnimating=function(){return this.ci[Ns]>0},n.prototype.getInteracting=function(){return this.ci[zs]>0},n.prototype.cancelAnimations=function(){var t;this.setHint(Ns,-this.ci[Ns]);for(var n=0,i=this.li.length;n<i;++n){var r=this.li[n];if(r[0].callback&&Js(r[0].callback,!1),!t)for(var e=0,o=r.length;e<o;++e){var u=r[e];if(!u.complete){t=u.anchor;break}}}this.li.length=0,this._i=t,this.gi=null,this.xi=NaN,this.Mi=NaN},n.prototype.Ri=function(){if(void 0!==this.vi&&(cancelAnimationFrame(this.vi),this.vi=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,i=this.li.length-1;i>=0;--i){for(var r=this.li[i],e=!0,o=0,u=r.length;o<u;++o){var s=r[o];if(!s.complete){var a=t-s.start,f=s.duration>0?a/s.duration:1;f>=1?(s.complete=!0,f=1):e=!1;var h=s.easing(f);if(s.sourceCenter){var c=s.sourceCenter[0],l=s.sourceCenter[1],v=s.targetCenter[0],d=s.targetCenter[1];this.gi=s.targetCenter;var p=c+h*(v-c),y=l+h*(d-l);this.mi=[p,y]}if(s.sourceResolution&&s.targetResolution){var m=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){var w=this.Ii(this.getRotation()),b=this.Ci.resolution(m,0,w,!0);this.mi=this.calculateCenterZoom(b,s.anchor)}this.xi=s.targetResolution,this.wi=m,this.Ni(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var g=1===h?yi(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){var x=this.Ci.rotation(g,!0);this.mi=this.calculateCenterRotate(x,s.anchor)}this.Mi=s.targetRotation,this.bi=g}if(this.Ni(!0),n=!0,!s.complete)break}}if(e){this.li[i]=null,this.setHint(Ns,-1),this.gi=null,this.xi=NaN,this.Mi=NaN;var M=r[0].callback;M&&Js(M,!0)}}this.li=this.li.filter(Boolean),n&&void 0===this.vi&&(this.vi=requestAnimationFrame(this.Ri.bind(this)))}},n.prototype.calculateCenterRotate=function(t,n){var i,r=this.getCenterInternal();return void 0!==r&&(tr(i=[r[0]-n[0],r[1]-n[1]],t-this.getRotation()),Ki(i,n)),i},n.prototype.calculateCenterZoom=function(t,n){var i,r=this.getCenterInternal(),e=this.getResolution();void 0!==r&&void 0!==e&&(i=[n[0]-t*(n[0]-r[0])/e,n[1]-t*(n[1]-r[1])/e]);return i},n.prototype.Ii=function(t){var n=this.yi;if(t){var i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n},n.prototype.setViewportSize=function(t){this.yi=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Nr(t,this.getProjection()):t},n.prototype.getCenterInternal=function(){return this.get(Fs.CENTER)},n.prototype.getConstraints=function(){return this.Ci},n.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.ci[0],t[1]=this.ci[1],t):this.ci.slice()},n.prototype.calculateExtent=function(t){return Fr(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var n=t||this.zi(),i=this.getCenterInternal();St(i,1);var r=this.getResolution();St(void 0!==r,2);var e=this.getRotation();return St(void 0!==e,3),Kn(i,r,e,n)},n.prototype.getMaxResolution=function(){return this.Oi},n.prototype.getMinResolution=function(){return this.ji},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.ji)},n.prototype.setMaxZoom=function(t){this.Si(this.Pi({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.Oi)},n.prototype.setMinZoom=function(t){this.Si(this.Pi({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.Si(this.Pi({constrainResolution:t}))},n.prototype.getProjection=function(){return this.di},n.prototype.getResolution=function(){return this.get(Fs.RESOLUTION)},n.prototype.getResolutions=function(){return this.ki},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Lr(t,this.getProjection()),n)},n.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.zi(),r=Qn(t)/i[0],e=Yn(t)/i[1];return Math.max(r,e)},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.Oi),r=this.ji,e=Math.log(i/r)/Math.log(n);return function(t){return i/Math.pow(n,t*e)}},n.prototype.getRotation=function(){return this.get(Fs.ROTATION)},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.Oi),r=this.ji,e=Math.log(i/r)/n;return function(t){return Math.log(i/t)/n/e}},n.prototype.zi=function(t){var n=this.Ii(t),i=this.Ai;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),e=this.Ai;if(e){var o=this.zi();r=ia(r,this.Ii(),[o[0]/2+e[3],o[1]/2+e[0]],n,i)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.gi,nextResolution:this.xi,nextRotation:this.Mi,rotation:i,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},n.prototype.getZoomForResolution=function(t){var n,i,r=this.Ti||0;if(this.ki){var e=m(this.ki,t,1);r=e,n=this.ki[e],i=e==this.ki.length-1?2:n/this.ki[e+1]}else n=this.Oi,i=this.Ei;return r+Math.log(n/t)/Math.log(i)},n.prototype.getResolutionForZoom=function(t){if(this.ki){if(this.ki.length<=1)return 0;var n=ai(Math.floor(t),0,this.ki.length-2),i=this.ki[n]/this.ki[n+1];return this.ki[n]/Math.pow(i,ai(t-n,0,1))}return this.Oi/Math.pow(this.Ei,t-this.Ti)},n.prototype.fit=function(t,n){var i;if(St(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))St(!ni(t),25),i=Je(r=Lr(t,this.getProjection()));else if(t.getType()===Pt.CIRCLE){var r;(i=Je(r=Lr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Xn(r))}else{var e=Ir();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,n)},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),e=t.getFlatCoordinates(),o=t.getStride(),u=1/0,s=1/0,a=-1/0,f=-1/0,h=0,c=e.length;h<c;h+=o){var l=e[h]*i-e[h+1]*r,v=e[h]*r+e[h+1]*i;u=Math.min(u,l),s=Math.min(s,v),a=Math.max(a,l),f=Math.max(f,v)}return[u,s,a,f]},n.prototype.fitInternal=function(t,n){var i=n||{},r=i.size;r||(r=this.zi());var e,o=void 0!==i.padding?i.padding:[0,0,0,0],u=void 0!==i.nearest&&i.nearest;e=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var s=this.rotatedExtentForGeometry(t),a=this.getResolutionForExtentInternal(s,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);a=isNaN(a)?e:Math.max(a,e),a=this.getConstrainedResolution(a,u?0:1);var f=this.getRotation(),h=Math.sin(f),c=Math.cos(f),l=Xn(s);l[0]+=(o[1]-o[3])/2*a,l[1]+=(o[0]-o[2])/2*a;var v=l[0]*c-l[1]*h,d=l[1]*c+l[0]*h,p=this.getConstrainedCenter([v,d],a),y=i.callback?i.callback:j;void 0!==i.duration?this.animateInternal({resolution:a,center:p,duration:i.duration,easing:i.easing},y):(this.wi=a,this.mi=p,this.Ni(!1,!0),Js(y,!0))},n.prototype.centerOn=function(t,n,i){this.centerOnInternal(zr(t,this.getProjection()),n,i)},n.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(ia(t,n,i,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,n,i,r){var e,o=this.Ai;if(o&&t){var u=this.zi(-i),s=ia(t,r,[u[0]/2+o[3],u[1]/2+o[0]],n,i);e=[t[0]-s[0],t[1]-s[1]]}return e},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var n=Nr(this.mi,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var n=this.mi;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustResolution=function(t,n){var i=n&&zr(n,this.getProjection());this.adjustResolutionInternal(t,i)},n.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.Ii(this.getRotation()),e=this.Ci.resolution(this.wi*t,0,r,i);n&&(this.mi=this.calculateCenterZoom(e,n)),this.wi*=t,this.Ni()},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.Ei,-t),n)},n.prototype.adjustRotation=function(t,n){n&&(n=zr(n,this.getProjection())),this.adjustRotationInternal(t,n)},n.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.Ci.rotation(this.bi+t,i);n&&(this.mi=this.calculateCenterRotate(r,n)),this.bi+=t,this.Ni()},n.prototype.setCenter=function(t){this.setCenterInternal(t?zr(t,this.getProjection()):t)},n.prototype.setCenterInternal=function(t){this.mi=t,this.Ni()},n.prototype.setHint=function(t,n){return this.ci[t]+=n,this.changed(),this.ci[t]},n.prototype.setResolution=function(t){this.wi=t,this.Ni()},n.prototype.setRotation=function(t){this.bi=t,this.Ni()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.Ni=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,r=this.Ci.rotation(this.bi,i),e=this.Ii(r),o=this.Ci.resolution(this.wi,0,e,i),u=this.Ci.center(this.mi,o,e,i,this.calculateCenterShift(this.mi,o,r,e));this.get(Fs.ROTATION)!==r&&this.set(Fs.ROTATION,r),this.get(Fs.RESOLUTION)!==o&&(this.set(Fs.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),u&&this.get(Fs.CENTER)&&Qi(this.get(Fs.CENTER),u)||this.set(Fs.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this._i=void 0},n.prototype.resolveConstraints=function(t,n,i){var r=void 0!==t?t:200,e=n||0,o=this.Ci.rotation(this.bi),u=this.Ii(o),s=this.Ci.resolution(this.wi,e,u),a=this.Ci.center(this.mi,s,u,!1,this.calculateCenterShift(this.mi,s,o,u));if(0===r&&!this._i)return this.wi=s,this.bi=o,this.mi=a,void this.Ni();var f=i||(0===r?this._i:void 0);this._i=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Qi(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:a,resolution:s,duration:r,easing:mt,anchor:f}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(zs,1)},n.prototype.endInteraction=function(t,n,i){var r=i&&zr(i,this.getProjection());this.endInteractionInternal(t,n,r)},n.prototype.endInteractionInternal=function(t,n,i){this.setHint(zs,-1),this.resolveConstraints(t,n,i)},n.prototype.getConstrainedCenter=function(t,n){var i=this.Ii(this.getRotation());return this.Ci.center(t,n||this.getResolution(),i)},n.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},n.prototype.getConstrainedResolution=function(t,n){var i=n||0,r=this.Ii(this.getRotation());return this.Ci.resolution(t,i,r)},n}(et);function ea(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*n,i[1]=t[1]+2*n,i}function oa(t){return t[0]>0&&t[1]>0}function ua(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*n+.5|0,i[1]=t[1]*n+.5|0,i}function sa(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n)}var aa=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function fa(t){t instanceof bu?t.setMapInternal(null):t instanceof fs&&t.getLayers().forEach(fa)}function ha(t,n){if(t instanceof bu)t.setMapInternal(n);else if(t instanceof fs)for(var i=t.getLayers().getArray(),r=0,e=i.length;r<e;++r)ha(i[r],n)}var ca=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,e,o={},u=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new fs({layers:t.layers});o[js]=u,o[ks]=t.target,o[As]=t.view instanceof ra?t.view:new ra,void 0!==t.controls&&(Array.isArray(t.controls)?i=new ht(t.controls.slice()):(St("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new ht(t.interactions.slice()):(St("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?e=new ht(t.overlays.slice()):(St("function"==typeof t.overlays.getArray,49),e=t.overlays):e=new ht;return{controls:i,interactions:r,keyboardEventTarget:n,overlays:e,values:o}}(n);i.Fi,i.Li=!0,i.Gi=i.handleBrowserEvent.bind(i),i.Di=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,i.Ct=void 0!==n.pixelRatio?n.pixelRatio:Wt,i.Bi,i.Ui,i.qi=function(){this.Ui=void 0,this.Vi(Date.now())}.bind(i),i.Wi=[1,0,0,1,0,0],i.Xi=[1,0,0,1,0,0],i.Hi=0,i.Ki=null,i.Yi=null,i.Zi=null,i.Ji=null,i.$i=null,i.Qi=document.createElement("div"),i.Qi.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.Qi.style.position="relative",i.Qi.style.overflow="hidden",i.Qi.style.width="100%",i.Qi.style.height="100%",i.tr=document.createElement("div"),i.tr.style.position="absolute",i.tr.style.zIndex="0",i.tr.style.width="100%",i.tr.style.height="100%",i.tr.style.pointerEvents="none",i.tr.className="ol-overlaycontainer",i.Qi.appendChild(i.tr),i.nr=document.createElement("div"),i.nr.style.position="absolute",i.nr.style.zIndex="0",i.nr.style.width="100%",i.nr.style.height="100%",i.nr.style.pointerEvents="none",i.nr.className="ol-overlaycontainer-stopevent",i.Qi.appendChild(i.nr),i.ir=null,i.Rn=n.moveTolerance,i.rr=r.keyboardEventTarget,i.er=null,i.controls=r.controls||new ht,i.interactions=r.interactions||new ht,i.ur=r.overlays,i.sr={},i.fn=null,i.ar=[],i.hr=new Rs(i.getTilePriority.bind(i),i.cr.bind(i)),i.addChangeListener(js,i.lr),i.addChangeListener(As,i.vr),i.addChangeListener(Es,i.dr),i.addChangeListener(ks,i.pr),i.setProperties(r.values);var e=i;return!n.view||n.view instanceof ra||n.view.then((function(t){e.setView(new ra(t))})),i.controls.addEventListener(ot,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(ut,function(t){t.element.setMap(null)}.bind(i)),i.interactions.addEventListener(ot,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(ut,function(t){t.element.setMap(null)}.bind(i)),i.ur.addEventListener(ot,function(t){this.yr(t.element)}.bind(i)),i.ur.addEventListener(ut,function(t){var n=t.element.getId();void 0!==n&&delete this.sr[n.toString()],t.element.setMap(null)}.bind(i)),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.ur.forEach(i.yr.bind(i)),i}return aa(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.mr=function(t){ha(t.layer,this)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.yr=function(t){var n=t.getId();void 0!==n&&(this.sr[n.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,n,i){if(this.Ki&&this.fn){var r=this.getCoordinateFromPixelInternal(t),e=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:S,u=!1!==i.checkWrapped;return this.fn.forEachFeatureAtCoordinate(r,this.Ki,e,u,n,null,o,null)}},n.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),n),i},n.prototype.getAllLayers=function(){var t=[];return function n(i){i.forEach((function(i){i instanceof fs?n(i.getLayers()):t.push(i)}))}(this.getLayers()),t},n.prototype.forEachLayerAtPixel=function(t,n,i){if(this.Ki&&this.fn){var r=i||{},e=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||S;return this.fn.forEachLayerAtPixel(t,this.Ki,e,n,o)}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.Ki||!this.fn)return!1;var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:S,e=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.fn.hasFeatureAtCoordinate(i,this.Ki,e,o,r,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var n=this.Qi.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},n.prototype.getTarget=function(){return this.get(ks)},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return Nr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.Ki;return n?nn(n.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.ur},n.prototype.getOverlayById=function(t){var n=this.sr[t.toString()];return void 0!==n?n:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get(js)},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof ht)n.setLayers(t);else{var i=n.getLayers();i.clear(),i.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n];if(r.visible){var e=r.layer.getRenderer();if(e&&!e.ready)return!0;var o=r.layer.getSource();if(o&&o.loading)return!0}}return!1},n.prototype.getPixelFromCoordinate=function(t){var n=zr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.Ki;return n?nn(n.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.fn},n.prototype.getSize=function(){return this.get(Es)},n.prototype.getView=function(){return this.get(As)},n.prototype.getViewport=function(){return this.Qi},n.prototype.getOverlayContainer=function(){return this.tr},n.prototype.getOverlayContainerStopEvent=function(){return this.nr},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,n,i,r){return Is(this.Ki,t,n,i,r)},n.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,r=new vs(i,this,t);this.handleMapBrowserEvent(r)},n.prototype.handleMapBrowserEvent=function(t){if(this.Ki){var n=t.originalEvent,i=n.type;if(i===ys||i===K||i===q){var r=this.getOwnerDocument(),e=this.Qi.getRootNode?this.Qi.getRootNode():r,o=n.target;if(this.nr.contains(o)||!(e===r?r.documentElement:e).contains(o))return}if(t.frameState=this.Ki,!1!==this.dispatchEvent(t))for(var u=this.getInteractions().getArray().slice(),s=u.length-1;s>=0;s--){var a=u[s];if(a.getMap()===this&&a.getActive()&&this.getTargetElement())if(!a.handleEvent(t)||t.propagationStopped)break}}},n.prototype.handlePostRender=function(){var t=this.Ki,n=this.hr;if(!n.isEmpty()){var i=this.Di,r=i;if(t){var e=t.viewHints;if(e[Ns]||e[zs]){var o=Date.now()-t.time>8;i=o?0:8,r=o?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,r))}t&&this.fn&&!t.animate&&(!0===this.Fi?(this.hasListener(lu)&&this.fn.dispatchRenderEvent(lu,t),!1===this.Li&&(this.Li=!0,this.dispatchEvent(new cs(Os,this,t)))):!0===this.Li&&(this.Li=!1,this.dispatchEvent(new cs(Ss,this,t))));for(var u=this.ar,s=0,a=u.length;s<a;++s)u[s](this,t);u.length=0},n.prototype.dr=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.pr=function(){if(this.ir){for(var t=0,n=this.er.length;t<n;++t)J(this.er[t]);this.er=null,this.Qi.removeEventListener(F,this.Gi),this.Qi.removeEventListener(K,this.Gi),this.ir.dispose(),this.ir=null,To(this.Qi)}var i=this.getTargetElement();if(i){for(var r in i.appendChild(this.Qi),this.fn||(this.fn=this.createRenderer()),this.ir=new gs(this,this.Rn),ds)this.ir.addEventListener(ds[r],this.handleMapBrowserEvent.bind(this));this.Qi.addEventListener(F,this.Gi,!1),this.Qi.addEventListener(K,this.Gi,!!Kt&&{passive:!1});var e=this.getOwnerDocument().defaultView,o=this.rr?this.rr:i;this.er=[Y(o,q,this.handleBrowserEvent,this),Y(o,V,this.handleBrowserEvent,this),Y(e,X,this.updateSize,this)]}else this.fn&&(clearTimeout(this.Bi),this.Bi=void 0,this.ar.length=0,this.fn.dispose(),this.fn=null),this.Ui&&(cancelAnimationFrame(this.Ui),this.Ui=void 0);this.updateSize()},n.prototype.cr=function(){this.render()},n.prototype.wr=function(){this.render()},n.prototype.vr=function(){this.Zi&&(J(this.Zi),this.Zi=null),this.Ji&&(J(this.Ji),this.Ji=null);var t=this.getView();t&&(this.br(),this.Zi=Y(t,l,this.wr,this),this.Ji=Y(t,N,this.wr,this),t.resolveConstraints(0)),this.render()},n.prototype.lr=function(){this.$i&&(this.$i.forEach(J),this.$i=null);var t=this.getLayerGroup();t&&(this.mr(new ss("addlayer",t)),this.$i=[Y(t,l,this.render,this),Y(t,N,this.render,this),Y(t,"addlayer",this.mr,this),Y(t,"removelayer",this.gr,this)]),this.render()},n.prototype.isRendered=function(){return!!this.Ki},n.prototype.renderSync=function(){this.Ui&&cancelAnimationFrame(this.Ui),this.qi()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.fn&&void 0===this.Ui&&(this.Ui=requestAnimationFrame(this.qi))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.gr=function(t){fa(t.layer)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.Vi=function(t){var n=this,i=this.getSize(),r=this.getView(),e=this.Ki,u=null;if(void 0!==i&&oa(i)&&r&&r.isDef()){var s=r.getHints(this.Ki?this.Ki.viewHints:void 0),a=r.getState();if(u={animate:!1,coordinateToPixelTransform:this.Wi,declutterTree:null,extent:Kn(a.center,a.resolution,a.rotation,i),index:this.Hi++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.Ct,pixelToCoordinateTransform:this.Xi,postRenderFunctions:[],size:i,tileQueue:this.hr,time:t,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:o(this),renderTargets:{}},a.nextCenter&&a.nextResolution){var f=isNaN(a.nextRotation)?a.rotation:a.nextRotation;u.nextExtent=Kn(a.nextCenter,a.nextResolution,f,i)}}if(this.Ki=u,this.fn.renderFrame(u),u){if(u.animate&&this.render(),Array.prototype.push.apply(this.ar,u.postRenderFunctions),e)(!this.Yi||!ni(this.Yi)&&!In(u.extent,this.Yi))&&(this.dispatchEvent(new cs(Ms,this,e)),this.Yi=Cn(this.Yi));this.Yi&&!u.viewHints[Ns]&&!u.viewHints[zs]&&!In(u.extent,this.Yi)&&(this.dispatchEvent(new cs(_s,this,u)),_n(u.extent,this.Yi))}this.dispatchEvent(new cs(xs,this,u)),this.Fi=this.hasListener(Ss)||this.hasListener(Os)||this.hasListener(lu)?!this.hr.getTilesLoading()&&!this.hr.getCount()&&!this.getLoadingOrNotReady():void 0,this.Bi||(this.Bi=setTimeout((function(){n.Bi=void 0,n.handlePostRender()}),0))},n.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.gr(new ss("removelayer",n)),this.set(js,t)},n.prototype.setSize=function(t){this.set(Es,t)},n.prototype.setTarget=function(t){this.set(ks,t)},n.prototype.setView=function(t){if(!t||t instanceof ra)this.set(As,t);else{this.set(As,new ra);var n=this;t.then((function(t){n.setView(new ra(t))}))}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),e=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(r)||isNaN(e)||!oa(n=[r,e])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.br()},n.prototype.br=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.Qi);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},n}(et),la=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),va=function(t){function n(n){var i=t.call(this)||this,r=n.element;return!r||n.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),i.element=r||null,i.Mr=null,i.vn=null,i.listenerKeys=[],n.render&&(i.render=n.render),n.target&&i.setTarget(n.target),i}return la(n,t),n.prototype.disposeInternal=function(){To(this.element),t.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.vn},n.prototype.setMap=function(t){this.vn&&To(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)J(this.listenerKeys[n]);(this.listenerKeys.length=0,this.vn=t,t)&&((this.Mr?this.Mr:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push(Y(t,xs,this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.Mr="string"==typeof t?document.getElementById(t):t},n}(et),da=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pa=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this)._r=document.createElement("ul"),i.Sr=void 0===r.collapsed||r.collapsed,i.jr=i.Sr,i.Er=void 0!==r.collapsible,i.kr=void 0===r.collapsible||r.collapsible,i.kr||(i.Sr=!1);var e=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",u=void 0!==r.expandClassName?r.expandClassName:e+"-expand",s=void 0!==r.collapseLabel?r.collapseLabel:"›",a=void 0!==r.collapseClassName?r.collapseClassName:e+"-collapse";"string"==typeof s?(i.Ar=document.createElement("span"),i.Ar.textContent=s,i.Ar.className=a):i.Ar=s;var f=void 0!==r.label?r.label:"i";"string"==typeof f?(i.Tr=document.createElement("span"),i.Tr.textContent=f,i.Tr.className=u):i.Tr=f;var h=i.kr&&!i.Sr?i.Ar:i.Tr;i.Cr=document.createElement("button"),i.Cr.setAttribute("type","button"),i.Cr.setAttribute("aria-expanded",String(!i.Sr)),i.Cr.title=o,i.Cr.appendChild(h),i.Cr.addEventListener(L,i.Pr.bind(i),!1);var c=e+" "+"ol-unselectable "+Au+(i.Sr&&i.kr?" ol-collapsed":"")+(i.kr?"":" ol-uncollapsible"),l=i.element;return l.className=c,l.appendChild(i.Cr),l.appendChild(i._r),i.Rr=[],i.mn=!0,i}return da(n,t),n.prototype.Ir=function(t){for(var n={},i=[],r=!0,e=t.layerStatesArray,o=0,u=e.length;o<u;++o){var s=e[o];if(wu(s,t.viewState)){var a=s.layer.getSource();if(a){var f=a.getAttributions();if(f){var h=f(t);if(h)if(r=r&&!1!==a.getAttributionsCollapsible(),Array.isArray(h))for(var c=0,l=h.length;c<l;++c)h[c]in n||(i.push(h[c]),n[h[c]]=!0);else h in n||(i.push(h),n[h]=!0)}}}}return this.Er||this.setCollapsible(r),i},n.prototype.Nr=function(t){if(t){var n=this.Ir(t),i=n.length>0;if(this.mn!=i&&(this.element.style.display=i?"":"none",this.mn=i),!x(n,this.Rr)){Co(this._r);for(var r=0,e=n.length;r<e;++r){var o=document.createElement("li");o.innerHTML=n[r],this._r.appendChild(o)}this.Rr=n}}else this.mn&&(this.element.style.display="none",this.mn=!1)},n.prototype.Pr=function(t){t.preventDefault(),this.zr(),this.jr=this.Sr},n.prototype.zr=function(){this.element.classList.toggle(Tu),this.Sr?Ao(this.Ar,this.Tr):Ao(this.Tr,this.Ar),this.Sr=!this.Sr,this.Cr.setAttribute("aria-expanded",String(!this.Sr))},n.prototype.getCollapsible=function(){return this.kr},n.prototype.setCollapsible=function(t){this.kr!==t&&(this.kr=t,this.element.classList.toggle("ol-uncollapsible"),this.jr&&this.zr())},n.prototype.setCollapsed=function(t){this.jr=t,this.kr&&this.Sr!==t&&this.zr()},n.prototype.getCollapsed=function(){return this.Sr},n.prototype.render=function(t){this.Nr(t.frameState)},n}(va),ya=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ma=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var e=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",u=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.Tr=null,"string"==typeof o?(i.Tr=document.createElement("span"),i.Tr.className=u,i.Tr.textContent=o):(i.Tr=o,i.Tr.classList.add(u));var s=r.tipLabel?r.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(i.Tr),a.addEventListener(L,i.Pr.bind(i),!1);var f=e+" "+"ol-unselectable "+Au,h=i.element;return h.className=f,h.appendChild(a),i.Fr=r.resetNorth?r.resetNorth:void 0,i.Lr=void 0!==r.duration?r.duration:250,i.Gr=void 0===r.autoHide||r.autoHide,i.Dr=void 0,i.Gr&&i.element.classList.add(Ou),i}return ya(n,t),n.prototype.Pr=function(t){t.preventDefault(),void 0!==this.Fr?this.Fr():this.Br()},n.prototype.Br=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.Lr>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.Lr,easing:mt}):t.setRotation(0))}},n.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.Dr){var r="rotate("+i+"rad)";if(this.Gr){var e=this.element.classList.contains(Ou);e||0!==i?e&&0!==i&&this.element.classList.remove(Ou):this.element.classList.add(Ou)}this.Tr.style.transform=r}this.Dr=i}},n}(va),wa=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ba=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),target:r.target})||this;var e=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,u=void 0!==r.zoomInClassName?r.zoomInClassName:e+"-in",s=void 0!==r.zoomOutClassName?r.zoomOutClassName:e+"-out",a=void 0!==r.zoomInLabel?r.zoomInLabel:"+",f=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",h=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",c=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=u,l.setAttribute("type","button"),l.title=h,l.appendChild("string"==typeof a?document.createTextNode(a):a),l.addEventListener(L,i.Pr.bind(i,o),!1);var v=document.createElement("button");v.className=s,v.setAttribute("type","button"),v.title=c,v.appendChild("string"==typeof f?document.createTextNode(f):f),v.addEventListener(L,i.Pr.bind(i,-o),!1);var d=e+" "+"ol-unselectable "+Au,p=i.element;return p.className=d,p.appendChild(l),p.appendChild(v),i.Lr=void 0!==r.duration?r.duration:250,i}return wa(n,t),n.prototype.Pr=function(t,n){n.preventDefault(),this.Ur(t)},n.prototype.Ur=function(t){var n=this.getMap().getView();if(n){var i=n.getZoom();if(void 0!==i){var r=n.getConstrainedZoom(i+t);this.Lr>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.Lr,easing:mt})):n.setZoom(r)}}},n}(va);function ga(t){var n=t||{},i=new ht;return(void 0===n.zoom||n.zoom)&&i.push(new ba(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&i.push(new ma(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&i.push(new pa(n.attributionOptions)),i}var xa="active",Ma=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function _a(t,n,i){var r=t.getCenterInternal();if(r){var e=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==i?i:250,easing:bt,center:t.getConstrainedCenter(e)})}}function Sa(t,n,i,r){var e=t.getZoom();if(void 0!==e){var o=t.getConstrainedZoom(e+n),u=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:u,anchor:i,duration:void 0!==r?r:250,easing:mt})}}var Oa=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,n&&n.handleEvent&&(i.handleEvent=n.handleEvent),i.vn=null,i.setActive(!0),i}return Ma(n,t),n.prototype.getActive=function(){return this.get(xa)},n.prototype.getMap=function(){return this.vn},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(xa,t)},n.prototype.setMap=function(t){this.vn=t},n}(et),ja=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ea=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.qr=r.delta?r.delta:1,i.Lr=void 0!==r.duration?r.duration:250,i}return ja(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==ds.DBLCLICK){var i=t.originalEvent,r=t.map,e=t.coordinate,o=i.shiftKey?-this.qr:this.qr;Sa(r.getView(),o,e,this.Lr),i.preventDefault(),n=!0}return!n},n}(Oa),ka=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Aa(t){for(var n=t.length,i=0,r=0,e=0;e<n;e++)i+=t[e].clientX,r+=t[e].clientY;return[i/n,r/n]}var Ta=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.Vr={},i.targetPointers=[],i}return ka(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.Wr(t),this.handlingDownUpSequence){if(t.type==ds.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ds.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==ds.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r)}else t.type==ds.POINTERMOVE&&this.handleMoveEvent(t);return!n},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.Wr=function(t){if(function(t){var n=t.type;return n===ds.POINTERDOWN||n===ds.POINTERDRAG||n===ds.POINTERUP}(t)){var n=t.originalEvent,i=n.pointerId.toString();t.type==ds.POINTERUP?delete this.Vr[i]:(t.type==ds.POINTERDOWN||i in this.Vr)&&(this.Vr[i]=n),this.targetPointers=C(this.Vr)}},n}(Oa);function Ca(t){var n=arguments;return function(t){for(var i=!0,r=0,e=n.length;r<e&&(i=i&&n[r](t));++r);return i}}var Pa=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},Ra=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Ia=function(t){var n=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return n.contains(i)},Na=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||Ia(t)},za=S,Fa=function(t){var n=t.originalEvent;return 0==n.button&&!(qt&&Vt&&n.ctrlKey)},La=O,Ga=function(t){return t.type==ds.SINGLECLICK},Da=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},Ba=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Ua=function(t){var n=t.originalEvent.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n},qa=function(t){var n=t.originalEvent;return St(void 0!==n,56),"mouse"==n.pointerType},Va=function(t){var n=t.originalEvent;return St(void 0!==n,56),n.isPrimary&&0===n.button},Wa=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xa=function(t){function n(n){var i=t.call(this,{stopDown:O})||this,r=n||{};i.Xr=r.kinetic,i.lastCentroid=null,i.Hr,i.Kr=!1;var e=r.condition?r.condition:Ca(Da,Va);return i.Yr=r.onFocusOnly?Ca(Na,e):e,i.Zr=!1,i}return Wa(n,t),n.prototype.handleDragEvent=function(t){this.Kr||(this.Kr=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=Aa(n);if(n.length==this.Hr){if(this.Xr&&this.Xr.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],e=t.map.getView();nr(r,e.getResolution()),tr(r,e.getRotation()),e.adjustCenterInternal(r)}}else this.Xr&&this.Xr.begin();this.lastCentroid=i,this.Hr=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.Zr&&this.Xr&&this.Xr.end()){var r=this.Xr.getDistance(),e=this.Xr.getAngle(),o=i.getCenterInternal(),u=n.getPixelFromCoordinateInternal(o),s=n.getCoordinateFromPixelInternal([u[0]-r*Math.cos(e),u[1]-r*Math.sin(e)]);i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:mt})}return this.Kr&&(this.Kr=!1,i.endInteraction()),!1}return this.Xr&&this.Xr.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.Yr(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.Xr&&this.Xr.begin(),this.Zr=this.targetPointers.length>1,!0}return!1},n}(Ta),Ha=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ka=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{stopDown:O})||this).Yr=r.condition?r.condition:Ra,i.Jr=void 0,i.Lr=void 0!==r.duration?r.duration:250,i}return Ha(n,t),n.prototype.handleDragEvent=function(t){if(qa(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==Xs){var r=n.getSize(),e=t.pixel,o=Math.atan2(r[1]/2-e[1],e[0]-r[0]/2);if(void 0!==this.Jr){var u=o-this.Jr;i.adjustRotationInternal(-u)}this.Jr=o}}},n.prototype.handleUpEvent=function(t){return!qa(t)||(t.map.getView().endInteraction(this.Lr),!1)},n.prototype.handleDownEvent=function(t){return!!qa(t)&&(!(!Fa(t)||!this.Yr(t))&&(t.map.getView().beginInteraction(),this.Jr=void 0,!0))},n}(Ta),Ya=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Za=function(t){function n(n){var i=t.call(this)||this;return i.$r=null,i.pn=document.createElement("div"),i.pn.style.position="absolute",i.pn.style.pointerEvents="auto",i.pn.className="ol-box "+n,i.vn=null,i.Qr=null,i.te=null,i}return Ya(n,t),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.ne=function(){var t=this.Qr,n=this.te,i="px",r=this.pn.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i},n.prototype.setMap=function(t){if(this.vn){this.vn.getOverlayContainer().removeChild(this.pn);var n=this.pn.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.vn=t,this.vn&&this.vn.getOverlayContainer().appendChild(this.pn)},n.prototype.setPixels=function(t,n){this.Qr=t,this.te=n,this.createOrUpdateGeometry(),this.ne()},n.prototype.createOrUpdateGeometry=function(){var t=this.Qr,n=this.te,i=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.vn.getCoordinateFromPixelInternal,this.vn);i[4]=i[0].slice(),this.$r?this.$r.setCoordinates([i]):this.$r=new Ye([i])},n.prototype.getGeometry=function(){return this.$r},n}(v),Ja=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$a="boxstart",Qa="boxdrag",tf="boxend",nf="boxcancel",rf=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.coordinate=i,e.mapBrowserEvent=r,e}return Ja(n,t),n}(c),ef=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.ie=new Za(r.className||"ol-dragbox"),i.re=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.Qr=null,i.Yr=r.condition?r.condition:Fa,i.ee=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return Ja(n,t),n.prototype.defaultBoxEndCondition=function(t,n,i){var r=i[0]-n[0],e=i[1]-n[1];return r*r+e*e>=this.re},n.prototype.getGeometry=function(){return this.ie.getGeometry()},n.prototype.handleDragEvent=function(t){this.ie.setPixels(this.Qr,t.pixel),this.dispatchEvent(new rf(Qa,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.ie.setMap(null);var n=this.ee(t,this.Qr,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new rf(n?tf:nf,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.Yr(t)&&(this.Qr=t.pixel,this.ie.setMap(t.map),this.ie.setPixels(this.Qr,this.Qr),this.dispatchEvent(new rf($a,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(Ta),of=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uf=function(t){function n(n){var i=this,r=n||{},e=r.condition?r.condition:Ba;return(i=t.call(this,{condition:e,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).Lr=void 0!==r.duration?r.duration:200,i.oe=void 0!==r.out&&r.out,i}return of(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),i=this.getGeometry();if(this.oe){var r=n.rotatedExtentForGeometry(i),e=n.getResolutionForExtentInternal(r),o=n.getResolution()/e;(i=i.clone()).scale(o*o)}n.fitInternal(i,{duration:this.Lr,easing:mt})},n}(ef),sf=37,af=38,ff=39,hf=40,cf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lf=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.ue=function(t){return Da(t)&&Ua(t)},i.Yr=void 0!==r.condition?r.condition:i.ue,i.Lr=void 0!==r.duration?r.duration:100,i.se=void 0!==r.pixelDelta?r.pixelDelta:128,i}return cf(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==q){var i=t.originalEvent,r=i.keyCode;if(this.Yr(t)&&(r==hf||r==sf||r==ff||r==af)){var e=t.map.getView(),o=e.getResolution()*this.se,u=0,s=0;r==hf?s=-o:r==sf?u=-o:r==ff?u=o:s=o;var a=[u,s];tr(a,e.getRotation()),_a(e,a,this.Lr),i.preventDefault(),n=!0}}return!n},n}(Oa),vf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),df=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Yr=r.condition?r.condition:Ua,i.qr=r.delta?r.delta:1,i.Lr=void 0!==r.duration?r.duration:100,i}return vf(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==q||t.type==V){var i=t.originalEvent,r=i.charCode;if(this.Yr(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var e=t.map,o=r=="+".charCodeAt(0)?this.qr:-this.qr;Sa(e.getView(),o,void 0,this.Lr),i.preventDefault(),n=!0}}return!n},n}(Oa),pf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yf="trackpad",mf="wheel",wf=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,r)||this).ae=0,i.fe=0,i.yt=void 0!==r.maxDelta?r.maxDelta:1,i.Lr=void 0!==r.duration?r.duration:250,i.he=void 0!==r.timeout?r.timeout:80,i.ce=void 0===r.useAnchor||r.useAnchor,i.le=void 0!==r.constrainResolution&&r.constrainResolution;var e=r.condition?r.condition:za;return i.Yr=r.onFocusOnly?Ca(Na,e):e,i.ve=null,i.de=void 0,i.pe,i.ye=void 0,i.me=400,i.we,i.be=300,i}return pf(n,t),n.prototype.ge=function(){this.we=void 0,this.getMap().getView().endInteraction(void 0,this.fe?this.fe>0?1:-1:0,this.ve)},n.prototype.handleEvent=function(t){if(!this.Yr(t))return!0;if(t.type!==K)return!0;var n,i=t.map,r=t.originalEvent;if(r.preventDefault(),this.ce&&(this.ve=t.coordinate),t.type==K&&(n=r.deltaY,Dt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Wt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.fe=n;var e=Date.now();void 0===this.de&&(this.de=e),(!this.ye||e-this.de>this.me)&&(this.ye=Math.abs(n)<4?yf:mf);var o=i.getView();if(this.ye===yf&&!o.getConstrainResolution()&&!this.le)return this.we?clearTimeout(this.we):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.we=setTimeout(this.ge.bind(this),this.he),o.adjustZoom(-n/this.be,this.ve),this.de=e,!1;this.ae+=n;var u=Math.max(this.he-(e-this.de),0);return clearTimeout(this.pe),this.pe=setTimeout(this.xe.bind(this,i),u),!1},n.prototype.xe=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-ai(this.ae,-this.yt*this.be,this.yt*this.be)/this.be;(n.getConstrainResolution()||this.le)&&(i=i?i>0?1:-1:0),Sa(n,i,this.ve,this.Lr),this.ye=void 0,this.ae=0,this.ve=null,this.de=void 0,this.pe=void 0},n.prototype.setMouseAnchor=function(t){this.ce=t,t||(this.ve=null)},n}(Oa),bf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gf=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this).Me=null,i.Jr=void 0,i._e=!1,i.Se=0,i.Oe=void 0!==r.threshold?r.threshold:.3,i.Lr=void 0!==r.duration?r.duration:250,i}return bf(n,t),n.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],r=this.targetPointers[1],e=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.Jr){var o=e-this.Jr;this.Se+=o,!this._e&&Math.abs(this.Se)>this.Oe&&(this._e=!0),n=o}this.Jr=e;var u=t.map,s=u.getView();if(s.getConstraints().rotation!==Xs){var a=u.getViewport().getBoundingClientRect(),f=Aa(this.targetPointers);f[0]-=a.left,f[1]-=a.top,this.Me=u.getCoordinateFromPixelInternal(f),this._e&&(u.render(),s.adjustRotationInternal(n,this.Me))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.Lr),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.Me=null,this.Jr=void 0,this._e=!1,this.Se=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Ta),xf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mf=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this).Me=null,i.Lr=void 0!==r.duration?r.duration:400,i.je=void 0,i.Ee=1,i}return xf(n,t),n.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],r=this.targetPointers[1],e=i.clientX-r.clientX,o=i.clientY-r.clientY,u=Math.sqrt(e*e+o*o);void 0!==this.je&&(n=this.je/u),this.je=u;var s=t.map,a=s.getView();1!=n&&(this.Ee=n);var f=s.getViewport().getBoundingClientRect(),h=Aa(this.targetPointers);h[0]-=f.left,h[1]-=f.top,this.Me=s.getCoordinateFromPixelInternal(h),s.render(),a.adjustResolutionInternal(n,this.Me)},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),i=this.Ee>1?1:-1;return n.endInteraction(this.Lr,i),!1}return!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.Me=null,this.je=void 0,this.Ee=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Ta);function _f(t){var n=t||{},i=new ht,r=new No(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&i.push(new Ka),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&i.push(new Ea({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&i.push(new Xa({onFocusOnly:n.onFocusOnly,kinetic:r})),(void 0===n.pinchRotate||n.pinchRotate)&&i.push(new gf),(void 0===n.pinchZoom||n.pinchZoom)&&i.push(new Mf({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(i.push(new lf),i.push(new df({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&i.push(new wf({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&i.push(new uf({duration:n.zoomDuration})),i}var Sf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Of=function(t){function n(n){return(n=A({},n)).controls||(n.controls=ga()),n.interactions||(n.interactions=_f({onFocusOnly:!0})),t.call(this,n)||this}return Sf(n,t),n.prototype.createRenderer=function(){return new os(this)},n}(ca),jf="bottom-left",Ef="bottom-center",kf="bottom-right",Af="center-left",Tf="center-center",Cf="center-right",Pf="top-left",Rf="top-center",If="top-right";function Nf(t){return(Nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ff="element",Lf="map",Gf="offset",Df="position",Bf="positioning",Uf=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.options=n,i.id=n.id,i.insertFirst=void 0===n.insertFirst||n.insertFirst,i.stopEvent=void 0===n.stopEvent||n.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=n.autoPan;return r&&"object"!==Nf(r)&&(r={animation:n.autoPanAnimation,margin:n.autoPanMargin}),i.autoPan=r||!1,i.rendered={Ot:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(Ff,i.handleElementChanged),i.addChangeListener(Lf,i.handleMapChanged),i.addChangeListener(Gf,i.handleOffsetChanged),i.addChangeListener(Df,i.handlePositionChanged),i.addChangeListener(Bf,i.handlePositioningChanged),void 0!==n.element&&i.setElement(n.element),i.setOffset(void 0!==n.offset?n.offset:[0,0]),i.setPositioning(void 0!==n.positioning?n.positioning:Pf),void 0!==n.position&&i.setPosition(n.position),i}return zf(n,t),n.prototype.getElement=function(){return this.get(Ff)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(Lf)||null},n.prototype.getOffset=function(){return this.get(Gf)},n.prototype.getPosition=function(){return this.get(Df)},n.prototype.getPositioning=function(){return this.get(Bf)},n.prototype.handleElementChanged=function(){Co(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(To(this.element),J(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Y(t,xs,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(Ff,t)},n.prototype.setMap=function(t){this.set(Lf,t)},n.prototype.setOffset=function(t){this.set(Gf,t)},n.prototype.setPosition=function(t){this.set(Df,t)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(Df)){var i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),e=this.getRect(r,[Eo(r),ko(r)]),o=t||{},u=void 0===o.margin?20:o.margin;if(!jn(i,e)){var s=e[0]-i[0],a=i[2]-e[2],f=e[1]-i[1],h=i[3]-e[3],c=[0,0];if(s<0?c[0]=s-u:a<0&&(c[0]=Math.abs(a)+u),f<0?c[1]=f-u:h<0&&(c[1]=Math.abs(h)+u),0!==c[0]||0!==c[1]){var l=n.getView().getCenterInternal(),v=n.getPixelFromCoordinateInternal(l);if(!v)return;var d=[v[0]+c[0],v[1]+c[1]],p=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(d),duration:p.duration,easing:p.easing})}}}},n.prototype.getRect=function(t,n){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,e=i.top+window.pageYOffset;return[r,e,r+n[0],e+n[1]]},n.prototype.setPositioning=function(t){this.set(Bf,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,n){var i=this.element.style,r=this.getOffset(),e=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",u=Math.round(t[1]+r[1])+"px",s="0%",a="0%";e==kf||e==Cf||e==If?s="-100%":e!=Ef&&e!=Tf&&e!=Rf||(s="-50%"),e==jf||e==Ef||e==kf?a="-100%":e!=Af&&e!=Tf&&e!=Cf||(a="-50%");var f="translate(".concat(s,", ").concat(a,") translate(").concat(o,", ").concat(u,")");this.rendered.Ot!=f&&(this.rendered.Ot=f,i.transform=f,i.msTransform=f)},n.prototype.getOptions=function(){return this.options},n}(et),qf=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.ke=0,this.Ae={},this.Te=null,this.Ce=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.ke=0,this.Ae={},this.Te=null,this.Ce=null},t.prototype.containsKey=function(t){return this.Ae.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var n=this.Te;n;)t(n.Pe,n.Re,this),n=n.newer},t.prototype.get=function(t,n){var i=this.Ae[t];return St(void 0!==i,15),i===this.Ce||(i===this.Te?(this.Te=this.Te.newer,this.Te.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.Ce,this.Ce.newer=i,this.Ce=i),i.Pe},t.prototype.remove=function(t){var n=this.Ae[t];return St(void 0!==n,15),n===this.Ce?(this.Ce=n.older,this.Ce&&(this.Ce.newer=null)):n===this.Te?(this.Te=n.newer,this.Te&&(this.Te.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.Ae[t],--this.ke,n.Pe},t.prototype.getCount=function(){return this.ke},t.prototype.getKeys=function(){var t,n=new Array(this.ke),i=0;for(t=this.Ce;t;t=t.older)n[i++]=t.Re;return n},t.prototype.getValues=function(){var t,n=new Array(this.ke),i=0;for(t=this.Ce;t;t=t.older)n[i++]=t.Pe;return n},t.prototype.peekLast=function(){return this.Te.Pe},t.prototype.peekLastKey=function(){return this.Te.Re},t.prototype.peekFirstKey=function(){return this.Ce.Re},t.prototype.pop=function(){var t=this.Te;return delete this.Ae[t.Re],t.newer&&(t.newer.older=null),this.Te=t.newer,this.Te||(this.Ce=null),--this.ke,t.Pe},t.prototype.replace=function(t,n){this.get(t),this.Ae[t].Pe=n},t.prototype.set=function(t,n){St(!(t in this.Ae),16);var i={Re:t,newer:null,older:this.Ce,Pe:n};this.Ce?this.Ce.newer=i:this.Te=i,this.Ce=i,this.Ae[t]=i,++this.ke},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Vf(t,n,i,r){return void 0!==r?(r[0]=t,r[1]=n,r[2]=i,r):[t,n,i]}function Wf(t,n,i){return t+"/"+n+"/"+i}function Xf(t){return Wf(t[0],t[1],t[2])}function Hf(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return Wf(n[0],n[1],n[2])}function Kf(t){return t.split("/").map(Number)}function Yf(t){return(t[1]<<t[0])+t[2]}function Zf(t,n){var i=t[0],r=t[1],e=t[2];if(n.getMinZoom()>i||i>n.getMaxZoom())return!1;var o=n.getFullTileRange(i);return!o||o.containsXY(r,e)}var Jf=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$f=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Jf(n,t),n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Kf(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove(Xf(n.tileCoord)),n.release())}.bind(this))}},n}(qf),Qf=function(){function t(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function th(t,n,i,r,e){return void 0!==e?(e.minX=t,e.maxX=n,e.minY=i,e.maxY=r,e):new Qf(t,n,i,r)}var nh=Qf,ih=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rh=[],eh=function(t){function n(n,i,r,e){var o=t.call(this,n,i,{transition:0})||this;return o.Ne={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.ze={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=e.bind(void 0,o),o.wrappedTileCoord=r,o}return ih(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.Ne||(this.Ne[n]=jo(1,1,rh)),this.Ne[n]},n.prototype.hasContext=function(t){return o(t)in this.Ne},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},n.prototype.getReplayState=function(t){var n=o(t);return n in this.ze||(this.ze[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.ze[n]},n.prototype.load=function(){this.getSourceTiles()},n.prototype.release=function(){for(var n in this.Ne)rh.push(this.Ne[n].canvas),delete this.Ne[n];t.prototype.release.call(this)},n}(xt),oh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uh=function(t){function n(n,i,r,e,o,u){var s=t.call(this,n,i,u)||this;return s.extent=null,s.Fe=e,s.Le=null,s.U,s.projection=null,s.resolution,s.qt=o,s.Ge=r,s.key=r,s}return oh(n,t),n.prototype.getFormat=function(){return this.Fe},n.prototype.getFeatures=function(){return this.Le},n.prototype.load=function(){this.state==ct&&(this.setState(lt),this.qt(this,this.Ge),this.U&&this.U(this.extent,this.resolution,this.projection))},n.prototype.onLoad=function(t,n){this.setFeatures(t)},n.prototype.onError=function(){this.setState(dt)},n.prototype.setFeatures=function(t){this.Le=t,this.setState(vt)},n.prototype.setLoader=function(t){this.U=t},n}(xt);function sh(t){return Array.isArray(t)?qo(t):t}var ah="arraybuffer",fh="json",hh="text",ch="xml",lh=!1;function vh(t,n,i,r,e,o,u){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(i,r,e):t,!0),n.getType()==ah&&(s.responseType="arraybuffer"),s.withCredentials=lh,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var r=n.getType(),a=void 0;r==fh||r==hh?a=s.responseText:r==ch?(a=s.responseXML)||(a=(new DOMParser).parseFromString(s.responseText,"application/xml")):r==ah&&(a=s.response),a?o(n.readFeatures(a,{extent:i,featureProjection:e}),n.readProjection(a)):u()}else u()},s.onerror=u,s.send()}function dh(t,n){return function(i,r,e,o,u){var s=this;vh(t,n,i,r,e,(function(t,n){s.addFeatures(t),void 0!==o&&o(t)}),u||j)}}function ph(t,n){return[[-1/0,-1/0,1/0,1/0]]}var yh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function mh(t,n,i,r){var e=document.createElement("script"),u="olc_"+o(n);function s(){delete window[u],e.parentNode.removeChild(e)}e.async=!0,e.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+u;var a=setTimeout((function(){s(),i&&i()}),1e4);window[u]=function(t){clearTimeout(a),s(),n(t)},document.getElementsByTagName("head")[0].appendChild(e)}var wh,bh=function(t){function n(n){var i=this,r="Unexpected response status: "+n.status;return(i=t.call(this,r)||this).name="ResponseError",i.response=n,i}return yh(n,t),n}(Error),gh=function(t){function n(n){var i=t.call(this,"Failed to issue request")||this;return i.name="ClientError",i.client=n,i}return yh(n,t),n}(Error);function xh(t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var e=void 0;try{e=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void i(new Error(o))}n(e)}else i(new bh(r))})),r.addEventListener("error",(function(t){i(new gh(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))}function Mh(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href}var _h=function(){function t(){}return t.prototype.drawCustom=function(t,n,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t}(),Sh=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Oh=function(t){function n(n,i,r,e,o,u,s){var a=t.call(this)||this;return a.Ne=n,a.Ct=i,a.ot=r,a.Ot=e,a.De=o,a.Be=u,a.Ue=s,a.qe=null,a.Ve=null,a.We=null,a.Xe=null,a.He=null,a.Rt=null,a.Ke=0,a.Ye=0,a.Ze=0,a.Je=0,a.$e=0,a.Qe=0,a.no=!1,a.io=0,a.ro=[0,0],a.eo=0,a.oo="",a.uo=0,a.so=0,a.ao=!1,a.fo=0,a.ho=[0,0],a.co=null,a.lo=null,a.vo=null,a.do=[],a.po=[1,0,0,1,0,0],a}return Sh(n,t),n.prototype.yo=function(t,n,i,r){if(this.Rt){var e=qr(t,n,i,r,this.Ot,this.do),o=this.Ne,u=this.po,s=o.globalAlpha;1!=this.Je&&(o.globalAlpha=s*this.Je);var a=this.io;this.no&&(a+=this.De);for(var f=0,h=e.length;f<h;f+=2){var c=e[f]-this.Ke,l=e[f+1]-this.Ye;if(0!==a||1!=this.ro[0]||1!=this.ro[1]){var v=c+this.Ke,d=l+this.Ye;sn(u,v,d,1,1,a,-v,-d),o.setTransform.apply(o,u),o.translate(v,d),o.scale(this.ro[0],this.ro[1]),o.drawImage(this.Rt,this.$e,this.Qe,this.eo,this.Ze,-this.Ke,-this.Ye,this.eo,this.Ze),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.Rt,this.$e,this.Qe,this.eo,this.Ze,c,l,this.eo,this.Ze)}1!=this.Je&&(o.globalAlpha=s)}},n.prototype.mo=function(t,n,i,r){if(this.vo&&""!==this.oo){this.co&&this.wo(this.co),this.lo&&this.bo(this.lo),this.xo(this.vo);var e=qr(t,n,i,r,this.Ot,this.do),o=this.Ne,u=this.fo;for(this.ao&&(u+=this.De);n<i;n+=r){var s=e[n]+this.uo,a=e[n+1]+this.so;if(0!==u||1!=this.ho[0]||1!=this.ho[1]){var f=sn(this.po,s,a,1,1,u,-s,-a);o.setTransform.apply(o,f),o.translate(s,a),o.scale(this.ho[0],this.ho[1]),this.lo&&o.strokeText(this.oo,0,0),this.co&&o.fillText(this.oo,0,0),o.setTransform(1,0,0,1,0,0)}else this.lo&&o.strokeText(this.oo,s,a),this.co&&o.fillText(this.oo,s,a)}}},n.prototype.Mo=function(t,n,i,r,e){var o=this.Ne,u=qr(t,n,i,r,this.Ot,this.do);o.moveTo(u[0],u[1]);var s=u.length;e&&(s-=2);for(var a=2;a<s;a+=2)o.lineTo(u[a],u[a+1]);return e&&o.closePath(),i},n.prototype._o=function(t,n,i,r){for(var e=0,o=i.length;e<o;++e)n=this.Mo(t,n,i[e],r,!0);return n},n.prototype.drawCircle=function(t){if(ti(this.ot,t.getExtent())){if(this.Xe||this.He){this.Xe&&this.wo(this.Xe),this.He&&this.bo(this.He);var n=$r(t,this.Ot,this.do),i=n[2]-n[0],r=n[3]-n[1],e=Math.sqrt(i*i+r*r),o=this.Ne;o.beginPath(),o.arc(n[0],n[1],e,0,2*Math.PI),this.Xe&&o.fill(),this.He&&o.stroke()}""!==this.oo&&this.mo(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.Ot=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case Pt.POINT:this.drawPoint(t);break;case Pt.LINE_STRING:this.drawLineString(t);break;case Pt.POLYGON:this.drawPolygon(t);break;case Pt.MULTI_POINT:this.drawMultiPoint(t);break;case Pt.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Pt.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Pt.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Pt.CIRCLE:this.drawCircle(t)}},n.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);i&&ti(this.ot,i.getExtent())&&(this.setStyle(n),this.drawGeometry(i))},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},n.prototype.drawPoint=function(t){this.Be&&(t=t.simplifyTransformed(this.Be,this.Ue));var n=t.getFlatCoordinates(),i=t.getStride();this.Rt&&this.yo(n,0,n.length,i),""!==this.oo&&this.mo(n,0,n.length,i)},n.prototype.drawMultiPoint=function(t){this.Be&&(t=t.simplifyTransformed(this.Be,this.Ue));var n=t.getFlatCoordinates(),i=t.getStride();this.Rt&&this.yo(n,0,n.length,i),""!==this.oo&&this.mo(n,0,n.length,i)},n.prototype.drawLineString=function(t){if(this.Be&&(t=t.simplifyTransformed(this.Be,this.Ue)),ti(this.ot,t.getExtent())){if(this.He){this.bo(this.He);var n=this.Ne,i=t.getFlatCoordinates();n.beginPath(),this.Mo(i,0,i.length,t.getStride(),!1),n.stroke()}if(""!==this.oo){var r=t.getFlatMidpoint();this.mo(r,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.Be&&(t=t.simplifyTransformed(this.Be,this.Ue));var n=t.getExtent();if(ti(this.ot,n)){if(this.He){this.bo(this.He);var i=this.Ne,r=t.getFlatCoordinates(),e=0,o=t.getEnds(),u=t.getStride();i.beginPath();for(var s=0,a=o.length;s<a;++s)e=this.Mo(r,e,o[s],u,!1);i.stroke()}if(""!==this.oo){var f=t.getFlatMidpoints();this.mo(f,0,f.length,2)}}},n.prototype.drawPolygon=function(t){if(this.Be&&(t=t.simplifyTransformed(this.Be,this.Ue)),ti(this.ot,t.getExtent())){if(this.He||this.Xe){this.Xe&&this.wo(this.Xe),this.He&&this.bo(this.He);var n=this.Ne;n.beginPath(),this._o(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.Xe&&n.fill(),this.He&&n.stroke()}if(""!==this.oo){var i=t.getFlatInteriorPoint();this.mo(i,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.Be&&(t=t.simplifyTransformed(this.Be,this.Ue)),ti(this.ot,t.getExtent())){if(this.He||this.Xe){this.Xe&&this.wo(this.Xe),this.He&&this.bo(this.He);var n=this.Ne,i=t.getOrientedFlatCoordinates(),r=0,e=t.getEndss(),o=t.getStride();n.beginPath();for(var u=0,s=e.length;u<s;++u){var a=e[u];r=this._o(i,r,a,o)}this.Xe&&n.fill(),this.He&&n.stroke()}if(""!==this.oo){var f=t.getFlatInteriorPoints();this.mo(f,0,f.length,2)}}},n.prototype.wo=function(t){var n=this.Ne,i=this.qe;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.qe={fillStyle:t.fillStyle})},n.prototype.bo=function(t){var n=this.Ne,i=this.Ve;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(x(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.Ve={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.xo=function(t){var n=this.Ne,i=this.We,r=t.textAlign?t.textAlign:Uu;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.We={font:t.font,textAlign:r,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,n){var i=this;if(t){var r=t.getColor();this.Xe={fillStyle:sh(r||zu)}}else this.Xe=null;if(n){var e=n.getColor(),o=n.getLineCap(),u=n.getLineDash(),s=n.getLineDashOffset(),a=n.getLineJoin(),f=n.getWidth(),h=n.getMiterLimit(),c=u||Lu;this.He={lineCap:void 0!==o?o:Fu,lineDash:1===this.Ct?c:c.map((function(t){return t*i.Ct})),lineDashOffset:(s||0)*this.Ct,lineJoin:void 0!==a?a:Gu,lineWidth:(void 0!==f?f:1)*this.Ct,miterLimit:void 0!==h?h:Du,strokeStyle:sh(e||Bu)}}else this.He=null},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this.Rt=t.getImage(this.Ct),this.Ke=i[0]*this.Ct,this.Ye=i[1]*this.Ct,this.Ze=n[1]*this.Ct,this.Je=t.getOpacity(),this.$e=r[0],this.Qe=r[1],this.no=t.getRotateWithView(),this.io=t.getRotation(),this.ro=t.getScaleArray(),this.eo=n[0]*this.Ct}else this.Rt=null},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var i=n.getColor();this.co={fillStyle:sh(i||zu)}}else this.co=null;var r=t.getStroke();if(r){var e=r.getColor(),o=r.getLineCap(),u=r.getLineDash(),s=r.getLineDashOffset(),a=r.getLineJoin(),f=r.getWidth(),h=r.getMiterLimit();this.lo={lineCap:void 0!==o?o:Fu,lineDash:u||Lu,lineDashOffset:s||0,lineJoin:void 0!==a?a:Gu,lineWidth:void 0!==f?f:1,miterLimit:void 0!==h?h:Du,strokeStyle:sh(e||Bu)}}else this.lo=null;var c=t.getFont(),l=t.getOffsetX(),v=t.getOffsetY(),d=t.getRotateWithView(),p=t.getRotation(),y=t.getScaleArray(),m=t.getText(),w=t.getTextAlign(),b=t.getTextBaseline();this.vo={font:void 0!==c?c:Nu,textAlign:void 0!==w?w:Uu,textBaseline:void 0!==b?b:qu},this.oo=void 0!==m?Array.isArray(m)?m.reduce((function(t,n,i){return t+(i%2?" ":n)}),""):m:"",this.uo=void 0!==l?this.Ct*l:0,this.so=void 0!==v?this.Ct*v:0,this.ao=void 0!==d&&d,this.fo=void 0!==p?p:0,this.ho=[this.Ct*y[0],this.Ct*y[1]]}else this.oo=""},n}(_h),jh="Circle",Eh="Default",kh="Image",Ah="LineString",Th="Polygon",Ch="Text",Ph={Point:function(t,n,i,r,e){var o,u=i.getImage(),s=i.getText();e&&(t=e,o=u&&s&&s.getText()?{}:void 0);if(u){if(u.getImageState()!=wo)return;var a=t.getBuilder(i.getZIndex(),kh);a.setImageStyle(u,o),a.drawPoint(n,r)}if(s&&s.getText()){var f=t.getBuilder(i.getZIndex(),Ch);f.setTextStyle(s,o),f.drawText(n,r)}},LineString:function(t,n,i,r,e){var o=i.getStroke();if(o){var u=t.getBuilder(i.getZIndex(),Ah);u.setFillStrokeStyle(null,o),u.drawLineString(n,r)}var s=i.getText();if(s&&s.getText()){var a=(e||t).getBuilder(i.getZIndex(),Ch);a.setTextStyle(s),a.drawText(n,r)}},Polygon:function(t,n,i,r,e){var o=i.getFill(),u=i.getStroke();if(o||u){var s=t.getBuilder(i.getZIndex(),Th);s.setFillStrokeStyle(o,u),s.drawPolygon(n,r)}var a=i.getText();if(a&&a.getText()){var f=(e||t).getBuilder(i.getZIndex(),Ch);f.setTextStyle(a),f.drawText(n,r)}},MultiPoint:function(t,n,i,r,e){var o,u=i.getImage(),s=i.getText();e&&(t=e,o=u&&s&&s.getText()?{}:void 0);if(u){if(u.getImageState()!=wo)return;var a=t.getBuilder(i.getZIndex(),kh);a.setImageStyle(u,o),a.drawMultiPoint(n,r)}if(s&&s.getText()){var f=(e||t).getBuilder(i.getZIndex(),Ch);f.setTextStyle(s,o),f.drawText(n,r)}},MultiLineString:function(t,n,i,r,e){var o=i.getStroke();if(o){var u=t.getBuilder(i.getZIndex(),Ah);u.setFillStrokeStyle(null,o),u.drawMultiLineString(n,r)}var s=i.getText();if(s&&s.getText()){var a=(e||t).getBuilder(i.getZIndex(),Ch);a.setTextStyle(s),a.drawText(n,r)}},MultiPolygon:function(t,n,i,r,e){var o=i.getFill(),u=i.getStroke();if(u||o){var s=t.getBuilder(i.getZIndex(),Th);s.setFillStrokeStyle(o,u),s.drawMultiPolygon(n,r)}var a=i.getText();if(a&&a.getText()){var f=(e||t).getBuilder(i.getZIndex(),Ch);f.setTextStyle(a),f.drawText(n,r)}},GeometryCollection:function(t,n,i,r,e){var o,u,s=n.getGeometriesArray();for(o=0,u=s.length;o<u;++o){(0,Ph[s[o].getType()])(t,s[o],i,r,e)}},Circle:function(t,n,i,r,e){var o=i.getFill(),u=i.getStroke();if(o||u){var s=t.getBuilder(i.getZIndex(),jh);s.setFillStrokeStyle(o,u),s.drawCircle(n,r)}var a=i.getText();if(a&&a.getText()){var f=(e||t).getBuilder(i.getZIndex(),Ch);f.setTextStyle(a),f.drawText(n,r)}}};function Rh(t,n){return parseInt(o(t),10)-parseInt(o(n),10)}function Ih(t,n){var i=Nh(t,n);return i*i}function Nh(t,n){return.5*t/n}function zh(t,n,i,r,e,o,u){var s=!1,a=i.getImage();if(a){var f=a.getImageState();f==wo||f==bo?a.unlistenImageChange(e):(f==yo&&a.load(),f=a.getImageState(),a.listenImageChange(e),s=!0)}return function(t,n,i,r,e,o){var u=i.getGeometryFunction()(n);if(!u)return;var s=u.simplifyTransformed(r,e);if(i.getRenderer())Fh(t,s,i,n);else{(0,Ph[s.getType()])(t,s,i,n,o)}}(t,n,i,r,o,u),s}function Fh(t,n,i,r){if(n.getType()!=Pt.GEOMETRY_COLLECTION)t.getBuilder(i.getZIndex(),Eh).drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer());else for(var e=n.getGeometries(),o=0,u=e.length;o<u;++o)Fh(t,e[o],i,r)}function Lh(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var n,i=t.inversePixelTransform[0],r=t.frameState,e=$t(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=Ih(r.viewState.resolution,i),u=Ir();return u&&(n=kr(u,r.viewState.projection)),new Oh(t.context,i,r.extent,e,r.viewState.rotation,o,n)}var Gh,Dh={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Bh={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};function Uh(t,n,i,r,e){t.beginPath(),t.moveTo(0,0),t.lineTo(n,i),t.lineTo(r,e),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,r)+1,Math.max(i,e)),t.restore()}function qh(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2}function Vh(t,n,i,r){var e=Tr(i,n,t),o=gr(n,r,i),u=n.getMetersPerUnit();void 0!==u&&(o*=u);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var a=t.getExtent();if(!a||On(a,e)){var f=gr(t,o,e)/o;isFinite(f)&&f>0&&(o/=f)}return o}function Wh(t,n,i,r){var e=Xn(i),o=Vh(t,n,e,r);return(!isFinite(o)||o<=0)&&Un(i,(function(i){return o=Vh(t,n,i,r),isFinite(o)&&o>0})),o}function Xh(t,n,i,r,e,o,u,s,a,f,h,c){var l=jo(Math.round(i*t),Math.round(i*n));if(c||A(l,Dh),0===a.length)return l.canvas;function v(t){return Math.round(t*i)/i}l.scale(i,i),l.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];a.forEach((function(t,n,i){zn(d,t.extent)}));var p=Qn(d),y=Yn(d),m=jo(Math.round(i*p/r),Math.round(i*y/r));c||A(m,Dh);var w=i/r;a.forEach((function(t,n,i){var r=t.extent[0]-d[0],e=-(t.extent[3]-d[3]),o=Qn(t.extent),u=Yn(t.extent);t.image.width>0&&t.image.height>0&&m.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,r*w,e*w,o*w,u*w)}));var b=Jn(u);return s.getTriangles().forEach((function(t,n,e){var u=t.source,s=t.target,a=u[0][0],f=u[0][1],h=u[1][0],p=u[1][1],y=u[2][0],w=u[2][1],g=v((s[0][0]-b[0])/o),x=v(-(s[0][1]-b[1])/o),M=v((s[1][0]-b[0])/o),_=v(-(s[1][1]-b[1])/o),S=v((s[2][0]-b[0])/o),O=v(-(s[2][1]-b[1])/o),j=a,E=f;a=0,f=0;var k=vi([[h-=j,p-=E,0,0,M-g],[y-=j,w-=E,0,0,S-g],[0,0,h,p,_-x],[0,0,y,w,O-x]]);if(k){if(l.save(),l.beginPath(),function(){if(void 0===Gh){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Uh(t,4,5,4,0),Uh(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;Gh=qh(n,0)||qh(n,4)||qh(n,8)}return Gh}()||!c){l.moveTo(M,_);for(var A=g-M,T=x-_,C=0;C<4;C++)l.lineTo(M+v((C+1)*A/4),_+v(C*T/3)),3!=C&&l.lineTo(M+v((C+1)*A/4),_+v((C+1)*T/3));l.lineTo(S,O)}else l.moveTo(M,_),l.lineTo(g,x),l.lineTo(S,O);l.clip(),l.transform(k[0],k[2],k[1],k[3],g,x),l.translate(d[0]-j,d[3]-E),l.scale(r/i,-r/i),l.drawImage(m.canvas,0,0),l.restore()}})),h&&(l.save(),l.globalCompositeOperation="source-over",l.strokeStyle="black",l.lineWidth=1,s.getTriangles().forEach((function(t,n,i){var r=t.target,e=(r[0][0]-b[0])/o,u=-(r[0][1]-b[1])/o,s=(r[1][0]-b[0])/o,a=-(r[1][1]-b[1])/o,f=(r[2][0]-b[0])/o,h=-(r[2][1]-b[1])/o;l.beginPath(),l.moveTo(s,a),l.lineTo(e,u),l.lineTo(f,h),l.closePath(),l.stroke()})),l.restore()),l.canvas}var Hh=[0,0,0],Kh=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.ki=t.resolutions,St(_(this.ki,(function(t,n){return n-t}),!0),17),!t.origins)for(var i=0,r=this.ki.length-1;i<r;++i)if(n){if(this.ki[i]/this.ki[i+1]!==n){n=void 0;break}}else n=this.ki[i]/this.ki[i+1];this.Ei=n,this.maxZoom=this.ki.length-1,this.So=void 0!==t.origin?t.origin:null,this.Oo=null,void 0!==t.origins&&(this.Oo=t.origins,St(this.Oo.length==this.ki.length,20));var e=t.extent;void 0===e||this.So||this.Oo||(this.So=Jn(e)),St(!this.So&&this.Oo||this.So&&!this.Oo,18),this.jo=null,void 0!==t.tileSizes&&(this.jo=t.tileSizes,St(this.jo.length==this.ki.length,19)),this.Eo=void 0!==t.tileSize?t.tileSize:this.jo?null:Ls,St(!this.Eo&&this.jo||this.Eo&&!this.jo,22),this.ot=void 0!==e?e:null,this.ko=null,this.Ao=[0,0],this.To=[0,0,0,0],void 0!==t.sizes?this.ko=t.sizes.map((function(t,n){var i=new nh(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(e){var r=this.getTileRangeForExtentAndZ(e,n);i.minX=Math.max(r.minX,i.minX),i.maxX=Math.min(r.maxX,i.maxX),i.minY=Math.max(r.minY,i.minY),i.maxY=Math.min(r.maxY,i.maxY)}return i}),this):e&&this.Co(e)}return t.prototype.forEachTileCoord=function(t,n,i){for(var r=this.getTileRangeForExtentAndZ(t,n),e=r.minX,o=r.maxX;e<=o;++e)for(var u=r.minY,s=r.maxY;u<=s;++u)i([n,e,u])},t.prototype.forEachTileCoordParentTileRange=function(t,n,i,r){var e,o,u=null,s=t[0]-1;for(2===this.Ei?(e=t[1],o=t[2]):u=this.getTileCoordExtent(t,r);s>=this.minZoom;){if(n(s,2===this.Ei?th(e=Math.floor(e/2),e,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(u,s,i)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.ot},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.So?this.So:this.Oo[t]},t.prototype.getResolution=function(t){return this.ki[t]},t.prototype.getResolutions=function(){return this.ki},t.prototype.getTileCoordChildTileRange=function(t,n,i){if(t[0]<this.maxZoom){if(2===this.Ei){var r=2*t[1],e=2*t[2];return th(r,r+1,e,e+1,n)}var o=this.getTileCoordExtent(t,i||this.To);return this.getTileRangeForExtentAndZ(o,t[0]+1,n)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;var r=t[0],e=t[1],o=t[2];if(n===r)return th(e,o,e,o,i);if(this.Ei){var u=Math.pow(this.Ei,n-r),s=Math.floor(e*u),a=Math.floor(o*u);return n<r?th(s,s,a,a,i):th(s,Math.floor(u*(e+1))-1,a,Math.floor(u*(o+1))-1,i)}var f=this.getTileCoordExtent(t,this.To);return this.getTileRangeForExtentAndZ(f,n,i)},t.prototype.getTileRangeExtent=function(t,n,i){var r=this.getOrigin(t),e=this.getResolution(t),o=sa(this.getTileSize(t),this.Ao),u=r[0]+n.minX*o[0]*e,s=r[0]+(n.maxX+1)*o[0]*e;return Tn(u,r[1]+n.minY*o[1]*e,s,r[1]+(n.maxY+1)*o[1]*e,i)},t.prototype.getTileRangeForExtentAndZ=function(t,n,i){var r=Hh;this.Po(t[0],t[3],n,!1,r);var e=r[1],o=r[2];return this.Po(t[2],t[1],n,!0,r),th(e,r[1],o,r[2],i)},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=sa(this.getTileSize(t[0]),this.Ao);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]},t.prototype.getTileCoordExtent=function(t,n){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),e=sa(this.getTileSize(t[0]),this.Ao),o=i[0]+t[1]*e[0]*r,u=i[1]-(t[2]+1)*e[1]*r;return Tn(o,u,o+e[0]*r,u+e[1]*r,n)},t.prototype.getTileCoordForCoordAndResolution=function(t,n,i){return this.Ro(t[0],t[1],n,!1,i)},t.prototype.Ro=function(t,n,i,r,e){var o=this.getZForResolution(i),u=i/this.getResolution(o),s=this.getOrigin(o),a=sa(this.getTileSize(o),this.Ao),f=u*(t-s[0])/i/a[0],h=u*(s[1]-n)/i/a[1];return r?(f=xi(f,5)-1,h=xi(h,5)-1):(f=gi(f,5),h=gi(h,5)),Vf(o,f,h,e)},t.prototype.Po=function(t,n,i,r,e){var o=this.getOrigin(i),u=this.getResolution(i),s=sa(this.getTileSize(i),this.Ao),a=(t-o[0])/u/s[0],f=(o[1]-n)/u/s[1];return r?(a=xi(a,5)-1,f=xi(f,5)-1):(a=gi(a,5),f=gi(f,5)),Vf(i,a,f,e)},t.prototype.getTileCoordForCoordAndZ=function(t,n,i){return this.Po(t[0],t[1],n,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.ki[t[0]]},t.prototype.getTileSize=function(t){return this.Eo?this.Eo:this.jo[t]},t.prototype.getFullTileRange=function(t){return this.ko?this.ko[t]:this.ot?this.getTileRangeForExtentAndZ(this.ot,t):null},t.prototype.getZForResolution=function(t,n){return ai(m(this.ki,t,n||0),this.minZoom,this.maxZoom)},t.prototype.Co=function(t){for(var n=this.ki.length,i=new Array(n),r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.ko=i},t}();function Yh(t){var n=t.getDefaultTileGrid();return n||(n=tc(t),t.setDefaultTileGrid(n)),n}function Zh(t,n,i){var r=n[0],e=t.getTileCoordCenter(n),o=nc(i);if(On(o,e))return n;var u=Qn(o),s=Math.ceil((o[0]-e[0])/u);return e[0]+=u*s,t.getTileCoordForCoordAndZ(e,r)}function Jh(t,n,i,r){var e=void 0!==r?r:vn,o=Qh(t,n,i);return new Kh({extent:t,origin:Hn(t,e),resolutions:o,tileSize:i})}function $h(t){var n=t||{},i=n.extent||br("EPSG:3857").getExtent(),r={extent:i,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:Qh(i,n.maxZoom,n.tileSize,n.maxResolution)};return new Kh(r)}function Qh(t,n,i,r){for(var e=void 0!==n?n:42,o=Yn(t),u=Qn(t),s=sa(void 0!==i?i:Ls),a=r>0?r:Math.max(u/s[0],o/s[1]),f=e+1,h=new Array(f),c=0;c<f;++c)h[c]=a/Math.pow(2,c);return h}function tc(t,n,i,r){return Jh(nc(t),n,i,r)}function nc(t){var n=(t=br(t)).getExtent();if(!n){var i=180*zt[Lt.DEGREES]/t.getMetersPerUnit();n=Tn(-i,-i,i,i)}return n}function ic(t,n){var i=/\{z\}/g,r=/\{x\}/g,e=/\{y\}/g,o=/\{-y\}/g;return function(u,s,a){return u?t.replace(i,u[0].toString()).replace(r,u[1].toString()).replace(e,u[2].toString()).replace(o,(function(){var t=u[0],i=n.getFullTileRange(t);return St(i,55),(i.getHeight()-u[2]-1).toString()})):void 0}}function rc(t,n){for(var i=t.length,r=new Array(i),e=0;e<i;++e)r[e]=ic(t[e],n);return ec(r)}function ec(t){return 1===t.length?t[0]:function(n,i,r){if(n){var e=yi(Yf(n),t.length);return t[e](n,i,r)}}}function oc(t,n,i){}function uc(t){var n=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r=i[1].charCodeAt(0),e=i[2].charCodeAt(0),o=void 0;for(o=r;o<=e;++o)n.push(t.replace(i[0],String.fromCharCode(o)));return n}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var u=parseInt(i[2],10),s=parseInt(i[1],10);s<=u;s++)n.push(t.replace(i[0],s.toString()));return n}return n.push(t),n}function sc(t,n){var i=[];Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&i.push(t+"="+encodeURIComponent(n[t]))}));var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var ac,fc=34962,hc=34963,cc=35044,lc=35048,vc=5126,dc=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function pc(t,n){for(var i=A({preserveDrawingBuffer:!0,antialias:!Ut},n),r=dc.length,e=0;e<r;++e)try{var o=t.getContext(dc[e],i);if(o)return o}catch(t){}return null}var yc="http://www.w3.org/2001/XMLSchema-instance";function mc(t,n){return Bc().createElementNS(t,n)}function wc(t,n){return bc(t,n,[]).join("")}function bc(t,n,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)bc(r,n,i)}return i}function gc(t){return"documentElement"in t}function xc(t,n,i){return t.getAttributeNS(n,i)||""}function Mc(t){return(new DOMParser).parseFromString(t,"application/xml")}function _c(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&b(r[r.length-1],e)}}function Sc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&r[r.length-1].push(e)}}function Oc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&(r[r.length-1]=e)}}function jc(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);if(void 0!==o){var u=e[e.length-1],s=void 0!==n?n:r.localName,a=void 0;s in u?a=u[s]:(a=[],u[s]=a),a.push(o)}}}function Ec(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);void 0!==o&&(e[e.length-1][void 0!==n?n:r.localName]=o)}}function kc(t,n){return function(i,r,e){t.call(void 0!==n?n:this,i,r,e),e[e.length-1].node.appendChild(i)}}function Ac(t,n){var i,r;return function(n,e,o){if(void 0===i){i={};var u={};u[n.localName]=t,i[n.namespaceURI]=u,r=Tc(n.localName)}zc(i,r,e,o)}}function Tc(t,n){var i=t;return function(t,r,e){var o=r[r.length-1].node,u=i;return void 0===u&&(u=e),mc(void 0!==n?n:o.namespaceURI,u)}}var Cc=Tc();function Pc(t,n){for(var i=n.length,r=new Array(i),e=0;e<i;++e)r[e]=t[n[e]];return r}function Rc(t,n,i){var r,e,o=void 0!==i?i:{};for(r=0,e=t.length;r<e;++r)o[t[r]]=n;return o}function Ic(t,n,i,r){var e;for(e=n.firstElementChild;e;e=e.nextElementSibling){var o=t[e.namespaceURI];if(void 0!==o){var u=o[e.localName];void 0!==u&&u.call(r,e,i)}}}function Nc(t,n,i,r,e){return r.push(t),Ic(n,i,r,e),r.pop()}function zc(t,n,i,r,e,o){for(var u,s,a=(void 0!==e?e:i).length,f=0;f<a;++f)void 0!==(u=i[f])&&void 0!==(s=n.call(void 0!==o?o:this,u,r,void 0!==e?e[f]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,u,r)}function Fc(t,n,i,r,e,o,u){return e.push(t),zc(n,i,r,e,o,u),e.pop()}var Lc=void 0;function Gc(){return void 0===Lc&&"undefined"!=typeof XMLSerializer&&(Lc=new XMLSerializer),Lc}var Dc=void 0;function Bc(){return void 0===Dc&&"undefined"!=typeof document&&(Dc=document.implementation.createDocument("","",null)),Dc}var Uc=cc;function qc(t){switch(t){case fc:return Float32Array;case hc:return Uint32Array;default:return Float32Array}}var Vc=function(){function t(t,n){this.array=null,this.type=t,St(t===fc||t===hc,62),this.usage=void 0!==n?n:Uc}return t.prototype.ofSize=function(t){this.array=new(qc(this.type))(t)},t.prototype.fromArray=function(t){var n=qc(this.type);this.array=n.from?n.from(t):new n(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(qc(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),Wc="webglcontextlost",Xc="webglcontextrestored",Hc=function(){function t(t){this.Io=t.webGlContext;var n=this.Io;this.No=t.scaleRatio||1,this.zo=n.createTexture(),this.Fo=null,this.Lo=n.createFramebuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),n.compileShader(r),this.Go=n.createProgram(),n.attachShader(this.Go,i),n.attachShader(this.Go,r),n.linkProgram(this.Go),this.Do=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.Do),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.Bo=n.getAttribLocation(this.Go,"a_position"),this.Uo=n.getUniformLocation(this.Go,"u_screenSize"),this.qo=n.getUniformLocation(this.Go,"u_opacity"),this.Vo=n.getUniformLocation(this.Go,"u_image"),this.Wo=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(i){this.Wo.push({value:t.uniforms[i],location:n.getUniformLocation(this.Go,i)})}.bind(this))}return t.prototype.getGL=function(){return this.Io},t.prototype.init=function(t){var n=this.getGL(),i=[n.drawingBufferWidth*this.No,n.drawingBufferHeight*this.No];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,i[0],i[1]),!this.Fo||this.Fo[0]!==i[0]||this.Fo[1]!==i[1]){this.Fo=i;var r=n.RGBA,e=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.zo),n.texImage2D(n.TEXTURE_2D,0,r,i[0],i[1],0,e,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.zo,0)}},t.prototype.apply=function(t,n,i,r){var e=this.getGL(),u=t.size;if(e.bindFramebuffer(e.FRAMEBUFFER,n?n.getFrameBuffer():null),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.zo),!n){var s=o(e.canvas);if(!t.renderTargets[s]){var a=e.getContextAttributes();a&&a.preserveDrawingBuffer&&(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.renderTargets[s]=!0}}e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.bindBuffer(e.ARRAY_BUFFER,this.Do),e.useProgram(this.Go),e.enableVertexAttribArray(this.Bo),e.vertexAttribPointer(this.Bo,2,e.FLOAT,!1,0,0),e.uniform2f(this.Uo,u[0],u[1]),e.uniform1i(this.Vo,0);var f=t.layerStatesArray[t.layerIndex].opacity;e.uniform1f(this.qo,f),this.applyUniforms(t),i&&i(e,t),e.drawArrays(e.TRIANGLES,0,6),r&&r(e,t)},t.prototype.getFrameBuffer=function(){return this.Lo},t.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=1;this.Wo.forEach((function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof ImageData)e.texture||(e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,n.width,n.height,0,i.UNSIGNED_BYTE,new Uint8Array(n.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.uniform1i(e.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void i.uniform2f(e.location,n[0],n[1]);case 3:return void i.uniform3f(e.location,n[0],n[1],n[2]);case 4:return void i.uniform4f(e.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(e.location,n)}))},t}();function Kc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Yc(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t}var Zc=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jc="u_projectionMatrix",$c="u_offsetScaleMatrix",Qc="u_offsetRotateMatrix",tl="u_time",nl="u_zoom",il="u_resolution",rl={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:vc},el={};function ol(t){return"shared/"+t}var ul=0;function sl(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];n+=r.size*al(r.type)}return n}function al(t){switch(t){case rl.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case rl.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case rl.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case rl.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var fl=function(t){function n(n){var i,r=t.call(this)||this,e=n||{};r.Xo=r.handleWebGLContextLost.bind(r),r.Ho=r.handleWebGLContextRestored.bind(r),r.Ko=e.canvasCacheKey?ol(e.canvasCacheKey):(i="unique/"+ul,ul+=1,i),r.Dt=function(t){var n=el[t];if(!n){var i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",n={users:0,canvas:i},el[t]=n}return n.users+=1,n.canvas}(r.Ko),r.Io=pc(r.Dt),r.Yo={},r.Zo={},r.Jo=null,r.Dt.addEventListener(Wc,r.Xo),r.Dt.addEventListener(Xc,r.Ho),r.$o=[1,0,0,1,0,0],r.Qo=[1,0,0,1,0,0],r.tu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.nu={},r.iu={},r.Wo=[],e.uniforms&&r.setUniforms(e.uniforms);var o=r.getGL();return r.ru=e.postProcesses?e.postProcesses.map((function(t){return new Hc({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new Hc({webGlContext:o})],r.eu=null,r.de=Date.now(),r}return Zc(n,t),n.prototype.setUniforms=function(t){for(var n in this.Wo=[],t)this.Wo.push({name:n,value:t[n]});this.nu={}},n.prototype.canvasCacheKeyMatches=function(t){return this.Ko===ol(t)},n.prototype.getExtension=function(t){if(t in this.Zo)return this.Zo[t];var n=this.Io.getExtension(t);return this.Zo[t]=n,n},n.prototype.bindBuffer=function(t){var n=this.getGL(),i=o(t),r=this.Yo[i];r||(r={buffer:t,webGlBuffer:n.createBuffer()},this.Yo[i]=r);n.bindBuffer(t.getType(),r.webGlBuffer)},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},n.prototype.deleteBuffer=function(t){var n=this.getGL(),i=o(t),r=this.Yo[i];r&&!n.isContextLost()&&n.deleteBuffer(r.webGlBuffer),delete this.Yo[i]},n.prototype.disposeInternal=function(){this.Dt.removeEventListener(Wc,this.Xo),this.Dt.removeEventListener(Xc,this.Ho),function(t){var n=el[t];if(n&&(n.users-=1,!(n.users>0))){var i=pc(n.canvas).getExtension("WEBGL_lose_context");i&&i.loseContext(),delete el[t]}}(this.Ko),delete this.Io,delete this.Dt},n.prototype.prepareDraw=function(t,n){var i=this.getGL(),r=this.getCanvas(),e=t.size,o=t.pixelRatio;r.width=e[0]*o,r.height=e[1]*o,r.style.width=e[0]+"px",r.style.height=e[1]+"px",i.useProgram(this.Jo);for(var u=this.ru.length-1;u>=0;u--)this.ru[u].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.Jo),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.prepareDrawToRenderTarget=function(t,n,i){var r=this.getGL(),e=n.getSize();r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.viewport(0,0,e[0],e[1]),r.bindTexture(r.TEXTURE_2D,n.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.Jo),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var r=i.UNSIGNED_INT,e=n-t,o=4*t;i.drawElements(i.TRIANGLES,e,r,o)},n.prototype.finalizeDraw=function(t,n,i){for(var r=0,e=this.ru.length;r<e;r++)r===e-1?this.ru[r].apply(t,null,n,i):this.ru[r].apply(t,this.ru[r+1])},n.prototype.getCanvas=function(){return this.Dt},n.prototype.getGL=function(){return this.Io},n.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,r=Jt(this.Qo);en(r,2/n[0],2/n[1]);var e=Jt(this.$o);0!==i&&rn(e,-i),this.setUniformMatrixValue($c,Yc(this.tu,r)),this.setUniformMatrixValue(Qc,Yc(this.tu,e)),this.setUniformFloatValue(tl,.001*(Date.now()-this.de)),this.setUniformFloatValue(nl,t.viewState.zoom),this.setUniformFloatValue(il,t.viewState.resolution)},n.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=0;this.Wo.forEach(function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)e.texture||(e.prevValue=void 0,e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&e.prevValue!==n&&(e.prevValue=n,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),i.uniform1i(this.getUniformLocation(e.name),r++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(e.name,Yc(this.tu,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void i.uniform2f(this.getUniformLocation(e.name),n[0],n[1]);case 3:return void i.uniform3f(this.getUniformLocation(e.name),n[0],n[1],n[2]);case 4:return void i.uniform4f(this.getUniformLocation(e.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(this.getUniformLocation(e.name),n)}.bind(this))},n.prototype.useProgram=function(t){return t!=this.Jo&&(this.getGL().useProgram(t),this.Jo=t,this.nu={},this.iu={},!0)},n.prototype.compileShader=function(t,n){var i=this.getGL(),r=i.createShader(n);return i.shaderSource(r,t),i.compileShader(r),r},n.prototype.getProgram=function(t,n){var i=this.getGL(),r=this.compileShader(t,i.FRAGMENT_SHADER),e=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,e),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){var u="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(r));throw new Error(u)}if(i.deleteShader(r),!i.getShaderParameter(e,i.COMPILE_STATUS)){u="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(e));throw new Error(u)}if(i.deleteShader(e),!i.getProgramParameter(o,i.LINK_STATUS)){u="GL program linking failed: ".concat(i.getShaderInfoLog(e));throw new Error(u)}return o},n.prototype.getUniformLocation=function(t){return void 0===this.nu[t]&&(this.nu[t]=this.getGL().getUniformLocation(this.Jo,t)),this.nu[t]},n.prototype.getAttributeLocation=function(t){return void 0===this.iu[t]&&(this.iu[t]=this.getGL().getAttribLocation(this.Jo,t)),this.iu[t]},n.prototype.makeProjectionTransform=function(t,n){var i=t.size,r=t.viewState.rotation,e=t.viewState.resolution,o=t.viewState.center;return Jt(n),sn(n,0,0,2/(e*i[0]),2/(e*i[1]),-r,-o[0],-o[1]),n},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},n.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n)},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},n.prototype.ou=function(t,n,i,r,e){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,i,!1,r,e))},n.prototype.enableAttributes=function(t){for(var n=sl(t),i=0,r=0;r<t.length;r++){var e=t[r];this.ou(e.name,e.size,e.type||vc,n,i),i+=e.size*al(e.type)}},n.prototype.handleWebGLContextLost=function(){T(this.Yo),this.Jo=null},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,i){var r=this.getGL(),e=i||r.createTexture(),o=r.RGBA,u=r.RGBA,s=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,e),n?r.texImage2D(r.TEXTURE_2D,0,o,u,s,n):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,u,s,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e},n}(v),hl=function(){function t(t,n){this.name=t,this.data=n,this.uu=null}return t.prototype.getTexture=function(t){if(!this.uu){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.uu=n}return this.uu},t}(),cl=new Uint8Array(4),ll=function(){function t(t,n){this.su=t;var i=t.getGL();this.uu=i.createTexture(),this.au=i.createFramebuffer(),this.fu=n||[1,1],this.q=new Uint8Array(0),this.hu=!0,this.cu()}return t.prototype.setSize=function(t){x(t,this.fu)||(this.fu[0]=t[0],this.fu[1]=t[1],this.cu())},t.prototype.getSize=function(){return this.fu},t.prototype.clearCachedData=function(){this.hu=!0},t.prototype.readAll=function(){if(this.hu){var t=this.fu,n=this.su.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.au),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.q),this.hu=!1}return this.q},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this.fu[0]||n>=this.fu[1])return cl[0]=0,cl[1]=0,cl[2]=0,cl[3]=0,cl;this.readAll();var i=Math.floor(t)+(this.fu[1]-Math.floor(n)-1)*this.fu[0];return cl[0]=this.q[4*i],cl[1]=this.q[4*i+1],cl[2]=this.q[4*i+2],cl[3]=this.q[4*i+3],cl},t.prototype.getTexture=function(){return this.uu},t.prototype.getFramebuffer=function(){return this.au},t.prototype.cu=function(){var t=this.fu,n=this.su.getGL();this.uu=this.su.createTexture(t,null,this.uu),n.bindFramebuffer(n.FRAMEBUFFER,this.au),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.uu,0),this.q=new Uint8Array(t[0]*t[1]*4)},t}(),vl=!0,dl=function(){function t(t,n,i,r,e,o){this.lu=t,this.vu=n;var u={},s=Ar(this.vu,this.lu);this.du=function(t){var n=t[0]+"/"+t[1];return u[n]||(u[n]=s(t)),u[n]},this.pu=r,this.yu=e*e,this.mu=[],this.wu=!1,this.bu=this.lu.canWrapX()&&!!r&&!!this.lu.getExtent()&&Qn(r)==Qn(this.lu.getExtent()),this.gu=this.lu.getExtent()?Qn(this.lu.getExtent()):null,this.xu=this.vu.getExtent()?Qn(this.vu.getExtent()):null;var a=Jn(i),f=$n(i),h=Wn(i),c=Vn(i),l=this.du(a),v=this.du(f),d=this.du(h),p=this.du(c),y=10+(o?Math.max(0,Math.ceil(hi(qn(i)/(o*o*256*256)))):0);if(this.Mu(a,f,h,c,l,v,d,p,y),this.wu){var m=1/0;this.mu.forEach((function(t,n,i){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])})),this.mu.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.gu/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-m>this.gu/2&&(n[0][0]-=this.gu),n[1][0]-m>this.gu/2&&(n[1][0]-=this.gu),n[2][0]-m>this.gu/2&&(n[2][0]-=this.gu);var i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.gu/2&&(t.source=n)}}.bind(this))}u={}}return t.prototype._u=function(t,n,i,r,e,o){this.mu.push({source:[r,e,o],target:[t,n,i]})},t.prototype.Mu=function(t,n,i,r,e,o,u,s,a){var f=xn([e,o,u,s]),h=this.gu?Qn(f)/this.gu:null,c=this.gu,l=this.lu.canWrapX()&&h>.5&&h<1,v=!1;if(a>0){if(this.vu.isGlobal()&&this.xu)v=Qn(xn([t,n,i,r]))/this.xu>.25||v;!l&&this.lu.isGlobal()&&h&&(v=h>.25||v)}if(!(!v&&this.pu&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3]))||ti(f,this.pu)){var d=0;if(!(v||isFinite(e[0])&&isFinite(e[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(s[0])&&isFinite(s[1])))if(a>0)v=!0;else if(1!=(d=(isFinite(e[0])&&isFinite(e[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(a>0){if(!v){var p=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.du(p),m=void 0;if(l)m=(yi(e[0],c)+yi(u[0],c))/2-yi(y[0],c);else m=(e[0]+u[0])/2-y[0];var w=(e[1]+u[1])/2-y[1];v=m*m+w*w>this.yu}if(v){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var b=[(n[0]+i[0])/2,(n[1]+i[1])/2],g=this.du(b),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],M=this.du(x);this.Mu(t,n,b,x,e,o,g,M,a-1),this.Mu(x,b,i,r,M,g,u,s,a-1)}else{var _=[(t[0]+n[0])/2,(t[1]+n[1])/2],S=this.du(_),O=[(i[0]+r[0])/2,(i[1]+r[1])/2],j=this.du(O);this.Mu(t,_,O,r,e,S,j,s,a-1),this.Mu(_,n,i,O,S,o,u,j,a-1)}return}}if(l){if(!this.bu)return;this.wu=!0}0==(11&d)&&this._u(t,i,r,e,u,s),0==(14&d)&&this._u(t,i,n,e,u,o),d&&(0==(13&d)&&this._u(n,r,t,o,s,e),0==(7&d)&&this._u(n,r,i,o,s,u))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.mu.forEach((function(n,i,r){var e=n.source;Fn(t,e[0]),Fn(t,e[1]),Fn(t,e[2])})),t},t.prototype.getTriangles=function(){return this.mu},t}(),pl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yl=function(t){function n(n,i,r,e,o,u,s,a,f,h,c,l){var v=t.call(this,o,ct,{interpolate:!!l})||this;v.Su=void 0!==c&&c,v.Ct=s,v.Ou=a,v.Dt=null,v.ju=i,v.Eu=e,v.ku=u||o,v.Au=[],v.Tu=null,v.Cu=0;var d=e.getTileCoordExtent(v.ku),p=v.Eu.getExtent(),y=v.ju.getExtent(),m=p?Zn(d,p):d;if(0===qn(m))return v.state=pt,v;var w=n.getExtent();w&&(y=y?Zn(y,w):w);var b=e.getResolution(v.ku[0]),g=Wh(n,r,m,b);if(!isFinite(g)||g<=0)return v.state=pt,v;var x=void 0!==h?h:.5;if(v.Pu=new dl(n,r,m,y,g*x,b),0===v.Pu.getTriangles().length)return v.state=pt,v;v.Cu=i.getZForResolution(g);var M=v.Pu.calculateSourceExtent();if(y&&(n.canWrapX()?(M[1]=ai(M[1],y[1],y[3]),M[3]=ai(M[3],y[1],y[3])):M=Zn(M,y)),qn(M)){for(var _=i.getTileRangeForExtentAndZ(M,v.Cu),S=_.minX;S<=_.maxX;S++)for(var O=_.minY;O<=_.maxY;O++){var j=f(v.Cu,S,O,s);j&&v.Au.push(j)}0===v.Au.length&&(v.state=pt)}else v.state=pt;return v}return pl(n,t),n.prototype.getImage=function(){return this.Dt},n.prototype.Ru=function(){var t=[];if(this.Au.forEach(function(n,i,r){n&&n.getState()==vt&&t.push({extent:this.ju.getTileCoordExtent(n.tileCoord),image:n.getImage()})}.bind(this)),this.Au.length=0,0===t.length)this.state=dt;else{var n=this.ku[0],i=this.Eu.getTileSize(n),r="number"==typeof i?i:i[0],e="number"==typeof i?i:i[1],o=this.Eu.getResolution(n),u=this.ju.getResolution(this.Cu),s=this.Eu.getTileCoordExtent(this.ku);this.Dt=Xh(r,e,this.Ct,u,this.ju.getExtent(),o,s,this.Pu,t,this.Ou,this.Su,this.interpolate),this.state=vt}this.changed()},n.prototype.load=function(){if(this.state==ct){this.state=lt,this.changed();var t=0;this.Tu=[],this.Au.forEach(function(n,i,r){var e=n.getState();if(e==ct||e==lt){t++;var o=Y(n,N,(function(i){var r=n.getState();r!=vt&&r!=dt&&r!=pt||(J(o),0===--t&&(this.Iu(),this.Ru()))}),this);this.Tu.push(o)}}.bind(this)),0===t?setTimeout(this.Ru.bind(this),0):this.Au.forEach((function(t,n,i){t.getState()==ct&&t.load()}))}},n.prototype.Iu=function(){this.Tu.forEach(J),this.Tu=null},n}(xt),ml=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function wl(t,n,i){var r=i?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function bl(t,n,i,r,e,o){var u,s,a=t.getGL();i instanceof Float32Array?(u=a.FLOAT,t.getExtension("OES_texture_float"),s=null!==t.getExtension("OES_texture_float_linear")):(u=a.UNSIGNED_BYTE,s=!0);wl(a,n,o&&s);var f,h=i.byteLength/r[1],c=1;switch(h%8==0?c=8:h%4==0?c=4:h%2==0&&(c=2),e){case 1:f=a.LUMINANCE;break;case 2:f=a.LUMINANCE_ALPHA;break;case 3:f=a.RGB;break;case 4:f=a.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(e))}var l=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,c),a.texImage2D(a.TEXTURE_2D,0,f,r[0],r[1],0,f,u,i),a.pixelStorei(a.UNPACK_ALIGNMENT,l)}var gl=null;var xl=function(t){function n(n){var i=t.call(this)||this;i.tile,i.textures=[],i.cr=i.cr.bind(i),i.size=sa(n.grid.getTileSize(n.tile.tileCoord[0])),i.Nu=n.tilePixelRatio||1,i.Ou=n.gutter||0,i.bandCount=NaN,i.su=n.helper;var r=new Vc(fc,cc);return r.fromArray([0,1,1,1,1,0,0,0]),i.su.flushBufferData(r),i.coords=r,i.setTile(n.tile),i}return ml(n,t),n.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(N,this.cr),this.tile=t,this.textures.length=0,this.loaded=t.getState()===vt,this.loaded)this.zu();else{if(t instanceof Io){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(N,this.cr)}},n.prototype.zu=function(){var t=this.su,n=t.getGL(),i=this.tile;if(i instanceof Io||i instanceof yl){var r=n.createTexture();return this.textures.push(r),this.bandCount=4,void function(t,n,i,r){wl(t,n,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(n,r,i.getImage(),i.interpolate)}var e=[(this.size[0]+2*this.Ou)*this.Nu,(this.size[1]+2*this.Ou)*this.Nu],o=i.getData(),u=o instanceof Float32Array,s=e[0]*e[1],a=u?Float32Array:Uint8Array,f=a.BYTES_PER_ELEMENT,h=o.byteLength/e[1];this.bandCount=Math.floor(h/f/e[0]);var c=Math.ceil(this.bandCount/4);if(1===c){r=n.createTexture();return this.textures.push(r),void bl(t,r,o,e,this.bandCount,i.interpolate)}for(var l=new Array(c),v=0;v<c;++v){r=n.createTexture();this.textures.push(r);var d=v<c-1?4:this.bandCount%4;l[v]=new a(s*d)}for(var p=0,y=0,m=e[0]*this.bandCount,w=0;w<e[1];++w){for(var b=0;b<m;++b){var g=o[y+b],x=Math.floor(p/this.bandCount),M=b%this.bandCount;(_=l[v=Math.floor(M/4)])[x*(d=_.length/s)+M%4]=g,++p}y+=h/f}for(v=0;v<c;++v){var _;bl(t,r=this.textures[v],_=l[v],e,d=_.length/s,i.interpolate)}},n.prototype.cr=function(){this.tile.getState()===vt&&(this.loaded=!0,this.zu(),this.dispatchEvent(N))},n.prototype.disposeInternal=function(){var t=this.su.getGL();this.su.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(N,this.cr)},n.prototype.getPixelData=function(t,n){if(!this.loaded)return null;var i,r,e=Math.round(this.Nu*this.Ou);if(t=Math.floor(this.Nu*t)+e,n=Math.floor(this.Nu*n)+e,this.tile instanceof _t){var o=this.tile.getData(),u=this.size;e>0&&(u=[u[0]+2*this.Ou,u[1]+2*this.Ou]);var s=Math.floor(this.Nu*u[0]);if(o instanceof DataView){var a=o.byteLength/(u[0]*u[1]),f=n*s*a+t*a,h=o.buffer.slice(f,f+a);return new DataView(h)}var c=n*s*this.bandCount+t*this.bandCount;return o.slice(c,c+this.bandCount)}gl||((i=document.createElement("canvas")).width=1,i.height=1,gl=i.getContext("2d")),gl.clearRect(0,0,1,1);var l=this.tile.getImage();try{gl.drawImage(l,t,n,1,1,0,0,1,1),r=gl.getImageData(0,0,1,1).data}catch(t){return gl=null,null}return r},n}(I),Ml=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_l=function(t){function n(n){var i=t.call(this)||this;return i.ready=!0,i.Fu=i.Lu.bind(i),i.Gu=n,i.declutterExecutorGroup=null,i}return Ml(n,t),n.prototype.getFeatures=function(t){return r()},n.prototype.getData=function(t){return null},n.prototype.prepareFrame=function(t){return r()},n.prototype.renderFrame=function(t,n){return r()},n.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},n.prototype.createLoadedTileFinder=function(t,n,i){return function(r,e){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,e,o)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){},n.prototype.getDataAtPixel=function(t,n,i){return null},n.prototype.getLayer=function(){return this.Gu},n.prototype.handleFontsChanged=function(){},n.prototype.Lu=function(t){t.target.getState()===wo&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var n=t.getState();return n!=wo&&n!=bo&&t.addEventListener(N,this.Fu),n==yo&&(t.load(),n=t.getState()),n==wo},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==pu&&t.changed()},n.prototype.disposeInternal=function(){delete this.Gu,t.prototype.disposeInternal.call(this)},n}(nt),Sl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ol="GENERATE_BUFFERS",jl=function(t){function n(n,i){var r=t.call(this,n)||this,e=i||{};return r.Du=[1,0,0,1,0,0],r.Bu=null,r.Uu=e.postProcesses,r.Wo=e.uniforms,r.helper,n.addChangeListener(eu,r.removeHelper.bind(r)),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(r),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(r),r}return Sl(n,t),n.prototype.dispatchPreComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(hu)){var r=new Su(hu,void 0,n,t);i.dispatchEvent(r)}},n.prototype.dispatchPostComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(cu)){var r=new Su(cu,void 0,n,t);i.dispatchEvent(r)}},n.prototype.reset=function(t){this.Wo=t.uniforms,this.helper&&this.helper.setUniforms(this.Wo)},n.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},n.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var i=!0,r=-1,e=void 0,o=0,u=t.layerStatesArray.length;o<u;o++){var s=t.layerStatesArray[o].layer,a=s.getRenderer();if(a instanceof n){var f=s.getClassName();if((i||f!==e)&&(r+=1,i=!1),e=f,a===this)break}else i=!0}var h="map/"+t.mapId+"/group/"+r;this.helper&&this.helper.canvasCacheKeyMatches(h)||(this.removeHelper(),this.helper=new fl({postProcesses:this.Uu,uniforms:this.Wo,canvasCacheKey:h}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)},n.prototype.afterHelperCreated=function(){},n.prototype.prepareFrameInternal=function(t){return!0},n.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},n.prototype.qu=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){sn(this.Du,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var e=new Su(t,this.Du,i,n);r.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.qu(au,t,n)},n.prototype.postRender=function(t,n){this.qu(fu,t,n)},n.prototype.getDataAtPixel=function(t,n,i){var r=nn([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),e=this.helper.getGL();if(!e)return null;var o=this.getLayer().getExtent();if(o&&!On(o,nn(n.pixelToCoordinateTransform,t.slice())))return null;var u=e.getContextAttributes();if(!u||!u.preserveDrawingBuffer)return new Uint8Array;var s,a=Math.round(r[0]),f=Math.round(r[1]),h=this.Bu;if(!h){var c=document.createElement("canvas");c.width=1,c.height=1,h=c.getContext("2d"),this.Bu=h}h.clearRect(0,0,1,1);try{h.drawImage(e.canvas,a,f,1,1,0,0,1,1),s=h.getImageData(0,0,1,1).data}catch(t){return s}return 0===s[3]?null:s},n}(_l),El=[],kl={vertexPosition:0,indexPosition:0};function Al(t,n,i,r,e){t[n+0]=i,t[n+1]=r,t[n+2]=e}function Tl(t,n){var i=n||[],r=256,e=255;return i[0]=Math.floor(t/r/r/r)/e,i[1]=Math.floor(t/r/r)%r/e,i[2]=Math.floor(t/r)%r/e,i[3]=t%r/e,i}function Cl(t){var n=0,i=256,r=255;return n+=Math.round(t[0]*i*i*i*r),n+=Math.round(t[1]*i*i*r),n+=Math.round(t[2]*i*r),n+=Math.round(t[3]*r)}var Pl=jl,Rl=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Il={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},Nl={TEXTURE_COORD:"a_textureCoord"},zl=[{name:Nl.TEXTURE_COORD,size:2,type:rl.FLOAT}],Fl={};function Ll(t){return 2*(1-1/(t+1))-1}function Gl(t,n,i){i in t||(t[i]=[]),t[i].push(n)}function Dl(t,n){var i=t.layerStatesArray[t.layerIndex];i.extent&&(n=Zn(n,Lr(i.extent,t.viewState.projection)));var r=i.layer.getRenderSource();if(!r.getWrapX()){var e=r.getTileGridForProjection(t.viewState.projection).getExtent();e&&(n=Zn(n,e))}return n}function Bl(t,n){return"".concat(t.getKey(),",").concat(Xf(n))}var Ul=function(t){function n(n,i){var r=t.call(this,n,{uniforms:i.uniforms})||this;r.renderComplete=!1,r.Vu=[1,0,0,1,0,0],r.Wu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Xu=new nh(0,0,0,0),r.Hu=Vf(0,0,0),r.Ku=[0,0],r.Yu,r.Zu=i.vertexShader,r.Ju=i.fragmentShader,r.$u=new Vc(hc,cc),r.$u.fromArray([0,1,3,1,2,3]);var e=void 0!==i.cacheSize?i.cacheSize:512;return r.Qu=new qf(e),r.ts=i.paletteTextures||[],r.Ki=null,r}return Rl(n,t),n.prototype.reset=function(n){t.prototype.reset.call(this,{uniforms:n.uniforms}),this.Zu=n.vertexShader,this.Ju=n.fragmentShader,this.ts=n.paletteTextures||[],this.helper&&(this.Yu=this.helper.getProgram(this.Ju,this.Zu))},n.prototype.afterHelperCreated=function(){this.Yu=this.helper.getProgram(this.Ju,this.Zu),this.helper.flushBufferData(this.$u)},n.prototype.ns=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==vt||i==pt||i==dt&&!r},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer().getRenderSource();return!!n&&(!ni(Dl(t,t.extent))&&n.getState()===pu)},n.prototype.enqueueTiles=function(t,n,i,r){var e=t.viewState,u=this.getLayer(),s=u.getRenderSource(),a=s.getTileGridForProjection(e.projection),f=s.getTilePixelRatio(t.pixelRatio),h=s.getGutterForProjection(e.projection),c=o(s);c in t.wantedTiles||(t.wantedTiles[c]={});for(var l=t.wantedTiles[c],v=this.Qu,d=Math.max(i-u.getPreload(),a.getMinZoom(),u.getMinZoom()),p=i;p>=d;--p)for(var y=a.getTileRangeForExtentAndZ(n,p,this.Xu),m=a.getResolution(p),w=y.minX;w<=y.maxX;++w)for(var b=y.minY;b<=y.maxY;++b){var g=Vf(p,w,b,this.Hu),x=Bl(s,g),M=void 0,_=void 0;if(v.containsKey(x)&&(_=(M=v.get(x)).tile),!M||M.tile.key!==s.getKey())if(_=s.getTile(p,w,b,t.pixelRatio,e.projection),M)if(this.ns(_))M.setTile(_);else{var S=_.getInterimTile();M.setTile(S)}else M=new xl({tile:_,grid:a,helper:this.helper,tilePixelRatio:f,gutter:h}),v.set(x,M);Gl(r,M,p);var O=_.getKey();l[O]=!0,_.getState()===ct&&(t.tileQueue.isKeyQueued(O)||t.tileQueue.enqueue([_,c,a.getTileCoordCenter(g),m]))}},n.prototype.renderFrame=function(t){this.Ki=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState,r=this.getLayer().getRenderSource(),e=r.getTileGridForProjection(i.projection),u=r.getGutterForProjection(i.projection),s=Dl(t,t.extent),a=e.getZForResolution(i.resolution,r.zDirection),f={};if(t.nextExtent){var h=e.getZForResolution(i.nextResolution,r.zDirection),c=Dl(t,t.nextExtent);this.enqueueTiles(t,c,h,f)}this.enqueueTiles(t,s,a,f);for(var l={},v=o(this),d=t.time,y=!1,m=f[a],w=0,b=m.length;w<b;++w){var g=(D=(tt=m[w]).tile).tileCoord;if(tt.loaded){if(1===(B=D.getAlpha(v,d))){D.endTransition(v);continue}y=!0,l[U=Xf(g)]=B}if(this.renderComplete=!1,!this.rs(e,g,a+1,f))for(var x=e.getMinZoom(),M=a-1;M>=x;--M){if(this.rs(e,g,M,f))break}}this.helper.useProgram(this.Yu),this.helper.prepareDraw(t,!y);for(var _=Object.keys(f).map(Number).sort(p),S=i.center[0],O=i.center[1],j=0,E=_.length;j<E;++j){var k=_[j],A=e.getResolution(k),T=sa(e.getTileSize(k),this.Ku),C=e.getOrigin(k),P=T[0]+2*u,R=T[1]+2*u,I=P/R,N=(S-C[0])/(T[0]*A),z=(C[1]-O)/(T[1]*A),F=i.resolution/A,L=Ll(k),G=f[k];for(w=0,b=G.length;w<b;++w){if((tt=G[w]).loaded){var D,B,U=Xf(g=(D=tt.tile).tileCoord),q=g[1],V=g[2];Jt(this.Vu),en(this.Vu,2/(t.size[0]*F/P),-2/(t.size[1]*F/P)),rn(this.Vu,i.rotation),en(this.Vu,1,1/I),un(this.Vu,(T[0]*(q-N)-u)/P,(T[1]*(V-z)-u)/R),this.helper.setUniformMatrixValue(Il.TILE_TRANSFORM,Yc(this.Wu,this.Vu)),this.helper.bindBuffer(tt.coords),this.helper.bindBuffer(this.$u),this.helper.enableAttributes(zl);for(var W=0;W<tt.textures.length;){var X="TEXTURE"+W,H="".concat(Il.TILE_TEXTURE_ARRAY,"[").concat(W,"]");n.activeTexture(n[X]),n.bindTexture(n.TEXTURE_2D,tt.textures[W]),n.uniform1i(this.helper.getUniformLocation(H),W),++W}for(var K=0;K<this.ts.length;++K){var Y=this.ts[K];n.activeTexture(n["TEXTURE"+W]);var Z=Y.getTexture(n);n.bindTexture(n.TEXTURE_2D,Z),n.uniform1i(this.helper.getUniformLocation(Y.name),W),++W}(B=U in l?l[U]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(Il.TRANSITION_ALPHA,B),this.helper.setUniformFloatValue(Il.DEPTH,L),this.helper.setUniformFloatValue(Il.TEXTURE_PIXEL_WIDTH,P),this.helper.setUniformFloatValue(Il.TEXTURE_PIXEL_HEIGHT,R),this.helper.setUniformFloatValue(Il.TEXTURE_RESOLUTION,A),this.helper.setUniformFloatValue(Il.TEXTURE_ORIGIN_X,C[0]+q*T[0]*A-u*A),this.helper.setUniformFloatValue(Il.TEXTURE_ORIGIN_Y,C[1]-V*T[1]*A+u*A);var J=s;u>0&&Zn(J=e.getTileCoordExtent(g),s,J),this.helper.setUniformFloatVec4(Il.RENDER_EXTENT,J),this.helper.setUniformFloatValue(Il.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Il.ZOOM,i.zoom),this.helper.drawElements(0,this.$u.getSize())}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var $=this.helper.getCanvas(),Q=this.Qu;Q.canExpireCache();){var tt;(tt=Q.pop()).dispose()}return t.postRenderFunctions.push((function(t,n){r.expireCache(n.viewState.projection,Fl)})),this.postRender(n,t),$},n.prototype.getData=function(t){if(!this.helper.getGL())return null;var n=this.Ki;if(!n)return null;var i=this.getLayer(),r=nn(n.pixelToCoordinateTransform,t.slice()),e=n.viewState,o=i.getExtent();if(o&&!On(Lr(o,e.projection),r))return null;var u=i.getRenderSource(),s=u.getTileGridForProjection(e.projection);if(!u.getWrapX()){var a=s.getExtent();if(a&&!On(a,r))return null}for(var f=this.Qu,h=s.getZForResolution(e.resolution);h>=s.getMinZoom();--h){var c=s.getTileCoordForCoordAndZ(r,h),l=Bl(u,c);if(f.containsKey(l)){var v=f.get(l);if(v.loaded){var d=s.getOrigin(h),p=sa(s.getTileSize(h)),y=s.getResolution(h),m=(r[0]-d[0])/y-c[1]*p[0],w=(d[1]-r[1])/y-c[2]*p[1];return v.getPixelData(m,w)}}}return null},n.prototype.rs=function(t,n,i,r){var e=t.getTileRangeForTileCoordAndZ(n,i,this.Xu);if(!e)return!1;for(var o=!0,u=this.Qu,s=this.getLayer().getRenderSource(),a=e.minX;a<=e.maxX;++a)for(var f=e.minY;f<=e.maxY;++f){var h=Bl(s,[i,a,f]),c=!1;if(u.containsKey(h)){var l=u.get(h);l.loaded&&(Gl(r,l,i),c=!0)}c||(o=!1)}return o},n.prototype.removeHelper=function(){if(this.helper){var n=this.Qu;n.forEach((function(t){return t.dispose()})),n.clear()}t.prototype.removeHelper.call(this)},n.prototype.disposeInternal=function(){var n=this.helper;n&&(n.getGL().deleteProgram(this.Yu),delete this.Yu,n.deleteBuffer(this.$u));t.prototype.disposeInternal.call(this),delete this.$u,delete this.Qu,delete this.Ki},n}(Pl),ql=1,Vl=2,Wl=4,Xl=8,Hl=16,Kl=31,Yl=0,Zl={};function Jl(t){if("number"==typeof t)return ql;if("boolean"==typeof t)return Xl;if("string"==typeof t)return Vo(t)?Wl|Vl:Vl;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var n=t;if(n.every((function(t){return"number"==typeof t})))return 3===n.length||4===n.length?Wl|Hl:Hl;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(n)));var i=Zl[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return i.getReturnType(n.slice(1))}function $l(t){return hi(t)%1==0}function Ql(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n}function tv(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(Ql).join(", "),")")}function nv(t){var n=Bo(t).slice();return n.length<4&&n.push(1),tv(n.map((function(t,n){return n<3?t/255:t})))}function iv(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function rv(t,n){return Ql(iv(t,n))}function ev(t,n,i){if(Array.isArray(n)&&"string"==typeof n[0]){var r=Zl[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return r.toGlsl(t,n.slice(1),i)}var e=Jl(n);if((e&ql)>0)return Ql(n);if((e&Xl)>0)return n.toString();if((e&Vl)>0&&(void 0===i||i==Vl))return rv(t,n.toString());if((e&Wl)>0&&(void 0===i||i==Wl))return nv(n);if((e&Hl)>0)return tv(n);throw new Error("Unexpected expression ".concat(n," (expected type ").concat(i,")"))}function ov(t){if(!(Jl(t)&ql))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function uv(t){for(var n=0;n<t.length;n++)ov(t[n])}function sv(t){if(!(Jl(t)&Vl))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function av(t){if(!(Jl(t)&Xl))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function fv(t,n){if(t.length!==n)throw new Error("Exactly ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function hv(t,n){if(t.length<n)throw new Error("At least ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function cv(t,n){if(t.length>n)throw new Error("At most ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function lv(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function vv(t,n){if(!$l(n))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}function dv(t){return"u_var_"+t}Zl.get={getReturnType:function(t){return Kl},toGlsl:function(t,n){fv(n,1),sv(n[0]);var i=n[0].toString();return-1===t.attributes.indexOf(i)&&t.attributes.push(i),(t.inFragmentShader?"v_":"a_")+i}},Zl.var={getReturnType:function(t){return Kl},toGlsl:function(t,n){fv(n,1),sv(n[0]);var i=n[0].toString();return-1===t.variables.indexOf(i)&&t.variables.push(i),dv(i)}};var pv="u_paletteTextures";Zl.palette={getReturnType:function(t){return Wl},toGlsl:function(t,n){fv(n,2),ov(n[0]);var i=ev(t,n[0]),r=n[1];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");for(var e=r.length,o=new Uint8Array(4*e),u=0;u<e;u++){var s=r[u],a=void 0;if("string"==typeof s)a=Do(s);else{if(!Array.isArray(s))throw new Error("The second argument of palette must be an array of strings or colors");var f=s.length;if(4===f)a=s;else{if(3!==f)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(f));a=[s[0],s[1],s[2],1]}}var h=4*u;o[h]=a[0],o[h+1]=a[1],o[h+2]=a[2],o[h+3]=255*a[3]}t.paletteTextures||(t.paletteTextures=[]);var c="".concat(pv,"[").concat(t.paletteTextures.length,"]"),l=new hl(c,o);return t.paletteTextures.push(l),"texture2D(".concat(c,", vec2((").concat(i," + 0.5) / ").concat(e,".0, 0.5))")}};var yv="getBandValue";function mv(t){return{getReturnType:function(t){return Xl},toGlsl:function(n,i){fv(i,2);for(var r=Kl,e=0;e<i.length;e++)r&=Jl(i[e]);if(r===Yl)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(i)," instead"));return r&=~Wl,"(".concat(ev(n,i[0],r)," ").concat(t," ").concat(ev(n,i[1],r),")")}}}function wv(t){return{getReturnType:function(t){return Xl},toGlsl:function(n,i){hv(i,2);for(var r=0;r<i.length;r++)av(i[r]);var e="";return e=i.map((function(t){return ev(n,t)})).join(" ".concat(t," ")),e="(".concat(e,")")}}}Zl.band={getReturnType:function(t){return ql},toGlsl:function(t,n){hv(n,1),cv(n,3);var i=n[0];if(!(yv in t.functions)){for(var r="",e=t.bandCount||1,o=0;o<e;o++){var u=Math.floor(o/4),s=o%4;s===e-1&&1===s&&(s=3);var a="".concat(Il.TILE_TEXTURE_ARRAY,"[").concat(u,"]");r+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(a,", v_textureCoord + vec2(dx, dy))[").concat(s,"];\n          }\n        ")}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(Il.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(Il.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(r,"\n        }\n      ")}var f=ev(t,i),h=ev(t,n[1]||0),c=ev(t,n[2]||0);return"".concat(yv,"(").concat(f,", ").concat(h,", ").concat(c,")")}},Zl.time={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,0),"u_time"}},Zl.zoom={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,0),"u_zoom"}},Zl.resolution={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,0),"u_resolution"}},Zl["*"]={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,2),uv(n),"(".concat(ev(t,n[0])," * ").concat(ev(t,n[1]),")")}},Zl["/"]={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,2),uv(n),"(".concat(ev(t,n[0])," / ").concat(ev(t,n[1]),")")}},Zl["+"]={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,2),uv(n),"(".concat(ev(t,n[0])," + ").concat(ev(t,n[1]),")")}},Zl["-"]={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,2),uv(n),"(".concat(ev(t,n[0])," - ").concat(ev(t,n[1]),")")}},Zl.clamp={getReturnType:function(t){return ql},toGlsl:function(t,n){fv(n,3),uv(n);var i=ev(t,n[1]),r=ev(t,n[2]);return"clamp(".concat(ev(t,n[0]),", ").concat(i,", ").concat(r,")")}},Zl["%"]={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,2),uv(n),"mod(".concat(ev(t,n[0]),", ").concat(ev(t,n[1]),")")}},Zl["^"]={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,2),uv(n),"pow(".concat(ev(t,n[0]),", ").concat(ev(t,n[1]),")")}},Zl.abs={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,1),uv(n),"abs(".concat(ev(t,n[0]),")")}},Zl.floor={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,1),uv(n),"floor(".concat(ev(t,n[0]),")")}},Zl.round={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,1),uv(n),"floor(".concat(ev(t,n[0])," + 0.5)")}},Zl.ceil={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,1),uv(n),"ceil(".concat(ev(t,n[0]),")")}},Zl.sin={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,1),uv(n),"sin(".concat(ev(t,n[0]),")")}},Zl.cos={getReturnType:function(t){return ql},toGlsl:function(t,n){return fv(n,1),uv(n),"cos(".concat(ev(t,n[0]),")")}},Zl.atan={getReturnType:function(t){return ql},toGlsl:function(t,n){return hv(n,1),cv(n,2),uv(n),2===n.length?"atan(".concat(ev(t,n[0]),", ").concat(ev(t,n[1]),")"):"atan(".concat(ev(t,n[0]),")")}},Zl[">"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return fv(n,2),uv(n),"(".concat(ev(t,n[0])," > ").concat(ev(t,n[1]),")")}},Zl[">="]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return fv(n,2),uv(n),"(".concat(ev(t,n[0])," >= ").concat(ev(t,n[1]),")")}},Zl["<"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return fv(n,2),uv(n),"(".concat(ev(t,n[0])," < ").concat(ev(t,n[1]),")")}},Zl["<="]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return fv(n,2),uv(n),"(".concat(ev(t,n[0])," <= ").concat(ev(t,n[1]),")")}},Zl["=="]=mv("=="),Zl["!="]=mv("!="),Zl["!"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return fv(n,1),av(n[0]),"(!".concat(ev(t,n[0]),")")}},Zl.all=wv("&&"),Zl.any=wv("||"),Zl.between={getReturnType:function(t){return Xl},toGlsl:function(t,n){fv(n,3),uv(n);var i=ev(t,n[1]),r=ev(t,n[2]),e=ev(t,n[0]);return"(".concat(e," >= ").concat(i," && ").concat(e," <= ").concat(r,")")}},Zl.array={getReturnType:function(t){return Hl},toGlsl:function(t,n){hv(n,2),cv(n,4),uv(n);var i=n.map((function(n){return ev(t,n,ql)}));return"vec".concat(n.length,"(").concat(i.join(", "),")")}},Zl.color={getReturnType:function(t){return Wl},toGlsl:function(t,n){hv(n,3),cv(n,4),uv(n);var i=n;3===n.length&&i.push(1);var r=n.map((function(n,i){return ev(t,n,ql)+(i<3?" / 255.0":"")}));return"vec".concat(n.length,"(").concat(r.join(", "),")")}},Zl.interpolate={getReturnType:function(t){for(var n=Wl|ql,i=3;i<t.length;i+=2)n&=Jl(t[i]);return n},toGlsl:function(t,n,i){lv(n),hv(n,6);var r,e=n[0];switch(e[0]){case"linear":r=1;break;case"exponential":r=e[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(e)));var o=void 0!==i?i:Kl,u=Zl.interpolate.getReturnType(n)&o;vv(n,u);for(var s=ev(t,n[1]),a=Ql(r),f="",h=2;h<n.length-2;h+=2){var c=ev(t,n[h]),l=f||ev(t,n[h+1],u),v=ev(t,n[h+2]),d=ev(t,n[h+3],u);f="mix(".concat(l,", ").concat(d,", pow(clamp((").concat(s," - ").concat(c,") / (").concat(v," - ").concat(c,"), 0.0, 1.0), ").concat(a,"))")}return f}},Zl.match={getReturnType:function(t){for(var n=Kl,i=2;i<t.length;i+=2)n&=Jl(t[i]);return n&=Jl(t[t.length-1])},toGlsl:function(t,n,i){lv(n),hv(n,4);var r=void 0!==i?i:Kl,e=Zl.match.getReturnType(n)&r;vv(n,e);for(var o=ev(t,n[0]),u=ev(t,n[n.length-1],e),s=null,a=n.length-3;a>=1;a-=2){var f=ev(t,n[a]),h=ev(t,n[a+1],e);s="(".concat(o," == ").concat(f," ? ").concat(h," : ").concat(s||u,")")}return s}},Zl.case={getReturnType:function(t){for(var n=Kl,i=1;i<t.length;i+=2)n&=Jl(t[i]);return n&=Jl(t[t.length-1])},toGlsl:function(t,n,i){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}(n),hv(n,3);var r=void 0!==i?i:Kl,e=Zl.case.getReturnType(n)&r;vv(n,e);for(var o=0;o<n.length-1;o+=2)av(n[o]);var u=ev(t,n[n.length-1],e),s=null;for(o=n.length-3;o>=0;o-=2){var a=ev(t,n[o]),f=ev(t,n[o+1],e);s="(".concat(a," ? ").concat(f," : ").concat(s||u,")")}return s}};var bv=function(){function t(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return t.prototype.addUniform=function(t){return this.uniforms.push(t),this},t.prototype.addAttribute=function(t){return this.attributes.push(t),this},t.prototype.addVarying=function(t,n,i){return this.varyings.push({name:t,type:n,expression:i}),this},t.prototype.setSizeExpression=function(t){return this.sizeExpression=t,this},t.prototype.setRotationExpression=function(t){return this.rotationExpression=t,this},t.prototype.setSymbolOffsetExpression=function(t){return this.offsetExpression=t,this},t.prototype.setColorExpression=function(t){return this.colorExpression=t,this},t.prototype.setTextureCoordinateExpression=function(t){return this.texCoordExpression=t,this},t.prototype.setFragmentDiscardExpression=function(t){return this.discardExpression=t,this},t.prototype.setSymbolRotateWithView=function(t){return this.rotateWithView=t,this},t.prototype.getSizeExpression=function(){return this.sizeExpression},t.prototype.getOffsetExpression=function(){return this.offsetExpression},t.prototype.getColorExpression=function(){return this.colorExpression},t.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},t.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},t.prototype.getSymbolVertexShader=function(t){var n=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",i=this.attributes,r=this.varyings;return t&&(i=i.concat("vec4 a_hitColor"),r=r.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\n").concat(i.map((function(t){return"attribute "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(r.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  mat4 offsetMatrix = ").concat(n,";\n  vec2 halfSize = ").concat(this.sizeExpression," * 0.5;\n  vec2 offset = ").concat(this.offsetExpression,";\n  float angle = ").concat(this.rotationExpression,";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ").concat(this.texCoordExpression,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n").concat(r.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n"),"\n}")},t.prototype.getSymbolFragmentShader=function(t){var n=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",i=this.varyings;return t&&(i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(i.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  if (").concat(this.discardExpression,") { discard; }\n  gl_FragColor = ").concat(this.colorExpression,";\n  gl_FragColor.rgb *= gl_FragColor.a;\n").concat(n,"\n}")},t}();function gv(t){var n=t.symbol,i=void 0!==n.size?n.size:1,r=n.color||"white",e=n.textureCoord||[0,0,1,1],o=n.offset||[0,0],u=void 0!==n.opacity?n.opacity:1,s=void 0!==n.rotation?n.rotation:0,a={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{}},f=ev(a,i,Hl|ql),h=ev(a,o,Hl),c=ev(a,e,Hl),l=ev(a,s,ql),v={inFragmentShader:!0,variables:a.variables,attributes:[],stringLiteralsMap:a.stringLiteralsMap,functions:{}},d=ev(v,r,Wl),p=ev(v,u,ql),y="1.0",m="vec2(".concat(ev(v,i,Hl|ql),").x");switch(n.symbolType){case"square":case"image":break;case"circle":y="(1.0-smoothstep(1.-4./".concat(m,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");break;case"triangle":var w="(v_quadCoord*2.-1.)",b="(atan(".concat(w,".x,").concat(w,".y))");y="(1.0-smoothstep(.5-3./".concat(m,",.5,cos(floor(.5+").concat(b,"/2.094395102)*2.094395102-").concat(b,")*length(").concat(w,")))");break;default:throw new Error("Unexpected symbol type: "+n.symbolType)}var g=(new bv).setSizeExpression("vec2(".concat(f,")")).setRotationExpression(l).setSymbolOffsetExpression(h).setTextureCoordinateExpression(c).setSymbolRotateWithView(!!n.rotateWithView).setColorExpression("vec4(".concat(d,".rgb, ").concat(d,".a * ").concat(p," * ").concat(y,")"));if(t.filter){var x=ev(v,t.filter,Xl);g.setFragmentDiscardExpression("!".concat(x))}var M={};if(v.variables.forEach((function(n){var i=dv(n);g.addUniform("float ".concat(i)),M[i]=function(){if(!t.variables||void 0===t.variables[n])throw new Error("The following variable is missing from the style: ".concat(n));var i=t.variables[n];return"string"==typeof i&&(i=iv(a,i)),void 0!==i?i:-9999999}})),"image"===n.symbolType&&n.src){var _=new Image;_.crossOrigin=void 0===n.crossOrigin?"anonymous":n.crossOrigin,_.src=n.src,g.addUniform("sampler2D u_texture").setColorExpression(g.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),M.u_texture=_}return v.attributes.forEach((function(t){-1===a.attributes.indexOf(t)&&a.attributes.push(t),g.addVarying("v_".concat(t),"float","a_".concat(t))})),a.attributes.forEach((function(t){g.addAttribute("float a_".concat(t))})),{builder:g,attributes:a.attributes.map((function(t){return{name:t,callback:function(n,i){var r=i[t];return"string"==typeof r&&(r=iv(a,r)),void 0!==r?r:-9999999}}})),uniforms:M}}var xv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mv=function(t){function n(n){var i=t.call(this,{extent:n.extent,origin:n.origin,origins:n.origins,resolutions:n.resolutions,tileSize:n.tileSize,tileSizes:n.tileSizes,sizes:n.sizes})||this;return i.es=n.matrixIds,i}return xv(n,t),n.prototype.getMatrixId=function(t){return this.es[t]},n.prototype.getMatrixIds=function(){return this.es},n}(Kh),_v=Mv;function Sv(t,n,i){var r=[],e=[],o=[],u=[],s=[],a=void 0!==i?i:[],f=br(t.SupportedCRS),h=f.getMetersPerUnit(),c="ne"==f.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,n){return n.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(n){if(!(a.length>0)||g(a,(function(i){return n.Identifier==i.TileMatrix||-1===n.Identifier.indexOf(":")&&t.Identifier+":"+n.Identifier===i.TileMatrix}))){e.push(n.Identifier);var i=28e-5*n.ScaleDenominator/h,f=n.TileWidth,l=n.TileHeight;c?o.push([n.TopLeftCorner[1],n.TopLeftCorner[0]]):o.push(n.TopLeftCorner),r.push(i),u.push(f==l?f:[f,l]),s.push([n.MatrixWidth,n.MatrixHeight])}})),new Mv({extent:n,origins:o,resolutions:r,matrixIds:e,tileSizes:u,sizes:s})}var Ov=function(){function t(t){this.os=t.opacity,this.us=t.rotateWithView,this.Dr=t.rotation,this.ss=t.scale,this.fs=sa(t.scale),this.hs=t.displacement}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.os},t.prototype.getRotateWithView=function(){return this.us},t.prototype.getRotation=function(){return this.Dr},t.prototype.getScale=function(){return this.ss},t.prototype.getScaleArray=function(){return this.fs},t.prototype.getDisplacement=function(){return this.hs},t.prototype.getAnchor=function(){return r()},t.prototype.getImage=function(t){return r()},t.prototype.getHitDetectionImage=function(){return r()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return r()},t.prototype.getImageSize=function(){return r()},t.prototype.getOrigin=function(){return r()},t.prototype.getSize=function(){return r()},t.prototype.setDisplacement=function(t){this.hs=t},t.prototype.setOpacity=function(t){this.os=t},t.prototype.setRotateWithView=function(t){this.us=t},t.prototype.setRotation=function(t){this.Dr=t},t.prototype.setScale=function(t){this.ss=t,this.fs=sa(t)},t.prototype.listenImageChange=function(t){r()},t.prototype.load=function(){r()},t.prototype.unlistenImageChange=function(t){r()},t}(),jv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ev=function(t){function n(n){var i=this,r=void 0!==n.rotateWithView&&n.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this).Dt=void 0,i.cs=null,i.ls=void 0!==n.fill?n.fill:null,i.So=[0,0],i.Ht=n.points,i.vs=void 0!==n.radius?n.radius:n.radius1,i.ds=n.radius2,i.Kt=void 0!==n.angle?n.angle:0,i.ps=void 0!==n.stroke?n.stroke:null,i.fu=null,i.ys=null,i.render(),i}return jv(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.getAnchor=function(){var t=this.fu;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},n.prototype.getAngle=function(){return this.Kt},n.prototype.getFill=function(){return this.ls},n.prototype.getHitDetectionImage=function(){return this.cs||this.ws(this.ys),this.cs},n.prototype.getImage=function(t){var n=this.Dt[t];if(!n){var i=this.ys,r=jo(i.size*t,i.size*t);this.bs(i,r,t),n=r.canvas,this.Dt[t]=n}return n},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.fu},n.prototype.getImageState=function(){return wo},n.prototype.getOrigin=function(){return this.So},n.prototype.getPoints=function(){return this.Ht},n.prototype.getRadius=function(){return this.vs},n.prototype.getRadius2=function(){return this.ds},n.prototype.getSize=function(){return this.fu},n.prototype.getStroke=function(){return this.ps},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.gs=function(t,n,i){if(0===n||this.Ht===1/0||"bevel"!==t&&"miter"!==t)return n;var r=this.vs,e=void 0===this.ds?r:this.ds;if(r<e){var o=r;r=e,e=o}var u=void 0===this.ds?this.Ht:2*this.Ht,s=2*Math.PI/u,a=e*Math.sin(s),f=r-Math.sqrt(e*e-a*a),h=Math.sqrt(a*a+f*f),c=h/a;if("miter"===t&&c<=i)return c*n;var l=n/2/c,v=n/2*(f/h),d=Math.sqrt((r+l)*(r+l)+v*v)-r;if(void 0===this.ds||"bevel"===t)return 2*d;var p=r*Math.sin(s),y=e-Math.sqrt(r*r-p*p),m=Math.sqrt(p*p+y*y)/p;if(m<=i){var w=m*n/2-e-r;return 2*Math.max(d,w)}return 2*d},n.prototype.createRenderOptions=function(){var t,n=Gu,i=0,r=null,e=0,o=0;this.ps&&(null===(t=this.ps.getColor())&&(t=Bu),t=sh(t),void 0===(o=this.ps.getWidth())&&(o=1),r=this.ps.getLineDash(),e=this.ps.getLineDashOffset(),void 0===(n=this.ps.getLineJoin())&&(n=Gu),void 0===(i=this.ps.getMiterLimit())&&(i=Du));var u=this.gs(n,o,i),s=Math.max(this.vs,this.ds||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*s+u),lineDash:r,lineDashOffset:e,lineJoin:n,miterLimit:i}},n.prototype.render=function(){this.ys=this.createRenderOptions();var t=this.ys.size;this.Dt={},this.fu=[t,t]},n.prototype.bs=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.xs(n),this.ls){var r=this.ls.getColor();null===r&&(r=zu),n.fillStyle=sh(r),n.fill()}this.ps&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n.prototype.ws=function(t){if(this.ls){var n=this.ls.getColor(),i=0;if("string"==typeof n&&(n=Bo(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i){var r=jo(t.size,t.size);this.cs=r.canvas,this.Ms(t,r)}}this.cs||(this.cs=this.getImage(1))},n.prototype.xs=function(t){var n=this.Ht,i=this.vs;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.ds?i:this.ds;void 0!==this.ds&&(n*=2);for(var e=this.Kt-Math.PI/2,o=2*Math.PI/n,u=0;u<n;u++){var s=e+u*o,a=u%2==0?i:r;t.lineTo(a*Math.cos(s),a*Math.sin(s))}t.closePath()}},n.prototype.Ms=function(t,n){n.translate(t.size/2,t.size/2),this.xs(n),n.fillStyle=zu,n.fill(),this.ps&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n}(Ov),kv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Av=function(t){function n(n){var i=n||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return kv(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},n.prototype.setRadius=function(t){this.vs=t,this.render()},n}(Ev),Tv=function(){function t(t){var n=t||{};this._s=void 0!==n.color?n.color:null}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0})},t.prototype.getColor=function(){return this._s},t.prototype.setColor=function(t){this._s=t},t}(),Cv="fraction",Pv="pixels",Rv="bottom-left",Iv="bottom-right",Nv="top-left",zv="top-right",Fv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Lv=null,Gv=function(t){function n(n,i,r,e,o,u){var s=t.call(this)||this;return s.Ss=null,s.Rt=n||new Image,null!==e&&(s.Rt.crossOrigin=e),s.Dt={},s._s=u,s.Nt=null,s.Os=o,s.fu=r,s.Pt=i,s.js,s}return Fv(n,t),n.prototype.Es=function(){if(void 0===this.js&&this.Os===wo){Lv||(Lv=jo(1,1)),Lv.drawImage(this.Rt,0,0);try{Lv.getImageData(0,0,1,1),this.js=!1}catch(t){Lv=null,this.js=!0}}return!0===this.js},n.prototype.ks=function(){this.dispatchEvent(N)},n.prototype.Ft=function(){this.Os=bo,this.Lt(),this.ks()},n.prototype.Gt=function(){this.Os=wo,this.fu?(this.Rt.width=this.fu[0],this.Rt.height=this.fu[1]):this.fu=[this.Rt.width,this.Rt.height],this.Lt(),this.ks()},n.prototype.getImage=function(t){return this.As(t),this.Dt[t]?this.Dt[t]:this.Rt},n.prototype.getPixelRatio=function(t){return this.As(t),this.Dt[t]?t:1},n.prototype.getImageState=function(){return this.Os},n.prototype.getHitDetectionImage=function(){if(!this.Ss)if(this.Es()){var t=this.fu[0],n=this.fu[1],i=jo(t,n);i.fillRect(0,0,t,n),this.Ss=i.canvas}else this.Ss=this.Rt;return this.Ss},n.prototype.getSize=function(){return this.fu},n.prototype.getSrc=function(){return this.Pt},n.prototype.load=function(){if(this.Os==yo){this.Os=mo;try{this.Rt.src=this.Pt}catch(t){this.Ft()}this.Nt=Mo(this.Rt,this.Gt.bind(this),this.Ft.bind(this))}},n.prototype.As=function(t){if(this._s&&!this.Dt[t]&&this.Os===wo){var n=document.createElement("canvas");this.Dt[t]=n,n.width=Math.ceil(this.Rt.width*t),n.height=Math.ceil(this.Rt.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.Rt,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.Es())i.fillStyle=Lo(this._s),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.Rt,0,0);else{for(var r=i.getImageData(0,0,n.width,n.height),e=r.data,o=this._s[0]/255,u=this._s[1]/255,s=this._s[2]/255,a=this._s[3],f=0,h=e.length;f<h;f+=4)e[f]*=o,e[f+1]*=u,e[f+2]*=s,e[f+3]*=a;i.putImageData(r,0,0)}}},n.prototype.Lt=function(){this.Nt&&(this.Nt(),this.Nt=null)},n}(I);function Dv(t,n,i,r,e,o){var u=Ko.get(n,r,o);return u||(u=new Gv(t,n,i,r,e,o),Ko.set(n,r,o,u)),u}var Bv=Gv,Uv=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qv=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.opacity?r.opacity:1,u=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,a=void 0!==r.rotateWithView&&r.rotateWithView;(i=t.call(this,{opacity:e,rotation:u,scale:s,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:a})||this).Me=void 0!==r.anchor?r.anchor:[.5,.5],i.Ts=null,i.Cs=void 0!==r.anchorOrigin?r.anchorOrigin:Nv,i.Ps=void 0!==r.anchorXUnits?r.anchorXUnits:Cv,i.Rs=void 0!==r.anchorYUnits?r.anchorYUnits:Cv,i.Ut=void 0!==r.crossOrigin?r.crossOrigin:null;var f=void 0!==r.img?r.img:null;i.Is=r.imgSize;var h=r.src;St(!(void 0!==h&&f),4),St(!f||f&&i.Is,5),void 0!==h&&0!==h.length||!f||(h=f.src||o(f)),St(void 0!==h&&h.length>0,6);var c=void 0!==r.src?yo:wo;return i._s=void 0!==r.color?Bo(r.color):null,i.Ns=Dv(f,h,void 0!==i.Is?i.Is:null,i.Ut,c,i._s),i.zs=void 0!==r.offset?r.offset:[0,0],i.Fs=void 0!==r.offsetOrigin?r.offsetOrigin:Nv,i.So=null,i.fu=void 0!==r.size?r.size:null,i}return Uv(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.Me.slice(),anchorOrigin:this.Cs,anchorXUnits:this.Ps,anchorYUnits:this.Rs,color:this._s&&this._s.slice?this._s.slice():this._s||void 0,crossOrigin:this.Ut,imgSize:this.Is,offset:this.zs.slice(),offsetOrigin:this.Fs,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.fu?this.fu.slice():void 0,src:this.getSrc()})},n.prototype.getAnchor=function(){var t=this.Ts;if(!t){t=this.Me;var n=this.getSize();if(this.Ps==Cv||this.Rs==Cv){if(!n)return null;t=this.Me.slice(),this.Ps==Cv&&(t[0]*=n[0]),this.Rs==Cv&&(t[1]*=n[1])}if(this.Cs!=Nv){if(!n)return null;t===this.Me&&(t=this.Me.slice()),this.Cs!=zv&&this.Cs!=Iv||(t[0]=-t[0]+n[0]),this.Cs!=Rv&&this.Cs!=Iv||(t[1]=-t[1]+n[1])}this.Ts=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},n.prototype.setAnchor=function(t){this.Me=t,this.Ts=null},n.prototype.getColor=function(){return this._s},n.prototype.getImage=function(t){return this.Ns.getImage(t)},n.prototype.getPixelRatio=function(t){return this.Ns.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.Ns.getSize()},n.prototype.getImageState=function(){return this.Ns.getImageState()},n.prototype.getHitDetectionImage=function(){return this.Ns.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.So)return this.So;var t=this.zs;if(this.Fs!=Nv){var n=this.getSize(),i=this.Ns.getSize();if(!n||!i)return null;t=t.slice(),this.Fs!=zv&&this.Fs!=Iv||(t[0]=i[0]-n[0]-t[0]),this.Fs!=Rv&&this.Fs!=Iv||(t[1]=i[1]-n[1]-t[1])}return this.So=t,this.So},n.prototype.getSrc=function(){return this.Ns.getSrc()},n.prototype.getSize=function(){return this.fu?this.fu:this.Ns.getSize()},n.prototype.listenImageChange=function(t){this.Ns.addEventListener(N,t)},n.prototype.load=function(){this.Ns.load()},n.prototype.unlistenImageChange=function(t){this.Ns.removeEventListener(N,t)},n}(Ov),Vv=function(){function t(t){var n=t||{};this._s=void 0!==n.color?n.color:null,this.Ls=n.lineCap,this.Gs=void 0!==n.lineDash?n.lineDash:null,this.Ds=n.lineDashOffset,this.Bs=n.lineJoin,this.Us=n.miterLimit,this.qs=n.width}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this._s},t.prototype.getLineCap=function(){return this.Ls},t.prototype.getLineDash=function(){return this.Gs},t.prototype.getLineDashOffset=function(){return this.Ds},t.prototype.getLineJoin=function(){return this.Bs},t.prototype.getMiterLimit=function(){return this.Us},t.prototype.getWidth=function(){return this.qs},t.prototype.setColor=function(t){this._s=t},t.prototype.setLineCap=function(t){this.Ls=t},t.prototype.setLineDash=function(t){this.Gs=t},t.prototype.setLineDashOffset=function(t){this.Ds=t},t.prototype.setLineJoin=function(t){this.Bs=t},t.prototype.setMiterLimit=function(t){this.Us=t},t.prototype.setWidth=function(t){this.qs=t},t}();function Wv(t){return(Wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Xv=function(){function t(t){var n=t||{};this.$r=null,this.Vs=Jv,void 0!==n.geometry&&this.setGeometry(n.geometry),this.ls=void 0!==n.fill?n.fill:null,this.Rt=void 0!==n.image?n.image:null,this.fn=void 0!==n.renderer?n.renderer:null,this.Ws=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.ps=void 0!==n.stroke?n.stroke:null,this.oo=void 0!==n.text?n.text:null,this.Xs=n.zIndex}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"===Wv(n)&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.fn},t.prototype.setRenderer=function(t){this.fn=t},t.prototype.setHitDetectionRenderer=function(t){this.Ws=t},t.prototype.getHitDetectionRenderer=function(){return this.Ws},t.prototype.getGeometry=function(){return this.$r},t.prototype.getGeometryFunction=function(){return this.Vs},t.prototype.getFill=function(){return this.ls},t.prototype.setFill=function(t){this.ls=t},t.prototype.getImage=function(){return this.Rt},t.prototype.setImage=function(t){this.Rt=t},t.prototype.getStroke=function(){return this.ps},t.prototype.setStroke=function(t){this.ps=t},t.prototype.getText=function(){return this.oo},t.prototype.setText=function(t){this.oo=t},t.prototype.getZIndex=function(){return this.Xs},t.prototype.setGeometry=function(t){"function"==typeof t?this.Vs=t:"string"==typeof t?this.Vs=function(n){return n.get(t)}:t?void 0!==t&&(this.Vs=function(){return t}):this.Vs=Jv,this.$r=t},t.prototype.setZIndex=function(t){this.Xs=t},t}();function Hv(t){var n;if("function"==typeof t)n=t;else{var i;if(Array.isArray(t))i=t;else St("function"==typeof t.getZIndex,41),i=[t];n=function(){return i}}return n}var Kv=null;function Yv(t,n){if(!Kv){var i=new Tv({color:"rgba(255,255,255,0.4)"}),r=new Vv({color:"#3399CC",width:1.25});Kv=[new Xv({image:new Av({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return Kv}function Zv(){var t={},n=[255,255,255,1],i=[0,153,255,1];return t[Pt.POLYGON]=[new Xv({fill:new Tv({color:[255,255,255,.5]})})],t[Pt.MULTI_POLYGON]=t[Pt.POLYGON],t[Pt.LINE_STRING]=[new Xv({stroke:new Vv({color:n,width:5})}),new Xv({stroke:new Vv({color:i,width:3})})],t[Pt.MULTI_LINE_STRING]=t[Pt.LINE_STRING],t[Pt.CIRCLE]=t[Pt.POLYGON].concat(t[Pt.LINE_STRING]),t[Pt.POINT]=[new Xv({image:new Av({radius:6,fill:new Tv({color:i}),stroke:new Vv({color:n,width:1.5})}),zIndex:1/0})],t[Pt.MULTI_POINT]=t[Pt.POINT],t[Pt.GEOMETRY_COLLECTION]=t[Pt.POLYGON].concat(t[Pt.LINE_STRING],t[Pt.POINT]),t}function Jv(t){return t.getGeometry()}var $v=Xv,Qv="point",td="line",nd=function(){function t(t){var n=t||{};this.Ks=n.font,this.Dr=n.rotation,this.us=n.rotateWithView,this.ss=n.scale,this.fs=sa(void 0!==n.scale?n.scale:1),this.oo=n.text,this.Ys=n.textAlign,this.Zs=n.justify,this.Js=n.textBaseline,this.ls=void 0!==n.fill?n.fill:new Tv({color:"#333"}),this.$s=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.Qs=void 0!==n.placement?n.placement:Qv,this.ta=!!n.overflow,this.ps=void 0!==n.stroke?n.stroke:null,this.na=void 0!==n.offsetX?n.offsetX:0,this.ia=void 0!==n.offsetY?n.offsetY:0,this.ra=n.backgroundFill?n.backgroundFill:null,this.ea=n.backgroundStroke?n.backgroundStroke:null,this.Ai=void 0===n.padding?null:n.padding}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.ta},t.prototype.getFont=function(){return this.Ks},t.prototype.getMaxAngle=function(){return this.$s},t.prototype.getPlacement=function(){return this.Qs},t.prototype.getOffsetX=function(){return this.na},t.prototype.getOffsetY=function(){return this.ia},t.prototype.getFill=function(){return this.ls},t.prototype.getRotateWithView=function(){return this.us},t.prototype.getRotation=function(){return this.Dr},t.prototype.getScale=function(){return this.ss},t.prototype.getScaleArray=function(){return this.fs},t.prototype.getStroke=function(){return this.ps},t.prototype.getText=function(){return this.oo},t.prototype.getTextAlign=function(){return this.Ys},t.prototype.getJustify=function(){return this.Zs},t.prototype.getTextBaseline=function(){return this.Js},t.prototype.getBackgroundFill=function(){return this.ra},t.prototype.getBackgroundStroke=function(){return this.ea},t.prototype.getPadding=function(){return this.Ai},t.prototype.setOverflow=function(t){this.ta=t},t.prototype.setFont=function(t){this.Ks=t},t.prototype.setMaxAngle=function(t){this.$s=t},t.prototype.setOffsetX=function(t){this.na=t},t.prototype.setOffsetY=function(t){this.ia=t},t.prototype.setPlacement=function(t){this.Qs=t},t.prototype.setRotateWithView=function(t){this.us=t},t.prototype.setFill=function(t){this.ls=t},t.prototype.setRotation=function(t){this.Dr=t},t.prototype.setScale=function(t){this.ss=t,this.fs=sa(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.ps=t},t.prototype.setText=function(t){this.oo=t},t.prototype.setTextAlign=function(t){this.Ys=t},t.prototype.setJustify=function(t){this.Zs=t},t.prototype.setTextBaseline=function(t){this.Js=t},t.prototype.setBackgroundFill=function(t){this.ra=t},t.prototype.setBackgroundStroke=function(t){this.ea=t},t.prototype.setPadding=function(t){this.Ai=t},t}(),id=function(){function t(t){this.oa,this.ua,this.sa,this.aa=void 0===t||t,this.fa=0}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},i=this.sa;if(i){var r=i.next;n.prev=i,n.next=r,i.next=n,r&&(r.prev=n),i===this.ua&&(this.ua=n)}else this.oa=n,this.ua=n,this.aa&&(n.next=n,n.prev=n);this.sa=n,this.fa++},t.prototype.removeItem=function(){var t=this.sa;if(t){var n=t.next,i=t.prev;n&&(n.prev=i),i&&(i.next=n),this.sa=n||i,this.oa===this.ua?(this.sa=void 0,this.oa=void 0,this.ua=void 0):this.oa===t?this.oa=this.sa:this.ua===t&&(this.ua=i?this.sa.prev:this.sa),this.fa--}},t.prototype.firstItem=function(){if(this.sa=this.oa,this.sa)return this.sa.data},t.prototype.lastItem=function(){if(this.sa=this.ua,this.sa)return this.sa.data},t.prototype.nextItem=function(){if(this.sa&&this.sa.next)return this.sa=this.sa.next,this.sa.data},t.prototype.getNextItem=function(){if(this.sa&&this.sa.next)return this.sa.next.data},t.prototype.prevItem=function(){if(this.sa&&this.sa.prev)return this.sa=this.sa.prev,this.sa.data},t.prototype.getPrevItem=function(){if(this.sa&&this.sa.prev)return this.sa.prev.data},t.prototype.getCurrItem=function(){if(this.sa)return this.sa.data},t.prototype.setFirstItem=function(){this.aa&&this.sa&&(this.oa=this.sa,this.ua=this.sa.prev)},t.prototype.concat=function(t){if(t.sa){if(this.sa){var n=this.sa.next;this.sa.next=t.oa,t.oa.prev=this.sa,n.prev=t.ua,t.ua.next=n,this.fa+=t.fa}else this.sa=t.sa,this.oa=t.oa,this.ua=t.ua,this.fa=t.fa;t.sa=void 0,t.oa=void 0,t.ua=void 0,t.fa=0}},t.prototype.getLength=function(){return this.fa},t}(),rd=i(72),ed=function(){function t(t){this.ha=new rd(t),this.ca={}}return t.prototype.insert=function(t,n){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.ha.insert(i),this.ca[o(n)]=i},t.prototype.load=function(t,n){for(var i=new Array(n.length),r=0,e=n.length;r<e;r++){var u=t[r],s=n[r],a={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:s};i[r]=a,this.ca[o(s)]=a}this.ha.load(i)},t.prototype.remove=function(t){var n=o(t),i=this.ca[n];return delete this.ca[n],null!==this.ha.remove(i)},t.prototype.update=function(t,n){var i=this.ca[o(n)];In([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(n),this.insert(t,n))},t.prototype.getAll=function(){return this.ha.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.ha.search(n).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.la(this.getAll(),t)},t.prototype.forEachInExtent=function(t,n){return this.la(this.getInExtent(t),n)},t.prototype.la=function(t,n){for(var i,r=0,e=t.length;r<e;r++)if(i=n(t[r]))return i;return i},t.prototype.isEmpty=function(){return P(this.ca)},t.prototype.clear=function(){this.ha.clear(),this.ca={}},t.prototype.getExtent=function(t){var n=this.ha.toJSON();return Tn(n.minX,n.minY,n.maxX,n.maxY,t)},t.prototype.concat=function(t){for(var n in this.ha.load(t.ha.all()),t.ca)this.ca[n]=t.ca[n]},t}(),od="tileloadstart",ud="tileloadend",sd="tileloaderror",ad=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function fd(t){return t?Array.isArray(t)?function(n){return t}:"function"==typeof t?t:function(n){return[t]}:null}var hd=function(t){function n(n){var i=t.call(this)||this;i.projection=br(n.projection),i.va=fd(n.attributions),i.da=void 0===n.attributionsCollapsible||n.attributionsCollapsible,i.loading=!1,i.rn=void 0!==n.state?n.state:pu,i.pa=void 0!==n.wrapX&&n.wrapX,i.ya=!!n.interpolate,i.viewResolver=null,i.viewRejector=null;var r=i;return i.ma=new Promise((function(t,n){r.viewResolver=t,r.viewRejector=n})),i}return ad(n,t),n.prototype.getAttributions=function(){return this.va},n.prototype.getAttributionsCollapsible=function(){return this.da},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return r()},n.prototype.getView=function(){return this.ma},n.prototype.getState=function(){return this.rn},n.prototype.getWrapX=function(){return this.pa},n.prototype.getInterpolate=function(){return this.ya},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.va=fd(t),this.changed()},n.prototype.setState=function(t){this.rn=t,this.changed()},n}(et),cd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ld=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate})||this;i.on,i.once,i.un,i.wa=void 0!==n.opaque&&n.opaque,i.Nu=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,i.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;return i.tileGrid&&sa(i.tileGrid.getTileSize(i.tileGrid.getMinZoom()),[256,256]),i.tileCache=new $f(n.cacheSize||0),i.tmpSize=[0,0],i.Re=n.key||"",i.tileOptions={transition:n.transition,interpolate:n.interpolate},i.zDirection=n.zDirection?n.zDirection:0,i}return cd(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},n.prototype.forEachLoadedTile=function(t,n,i,r){var e=this.getTileCacheForProjection(t);if(!e)return!1;for(var o,u,s,a=!0,f=i.minX;f<=i.maxX;++f)for(var h=i.minY;h<=i.maxY;++h)u=Wf(n,f,h),s=!1,e.containsKey(u)&&(s=(o=e.get(u)).getState()===vt)&&(s=!1!==r(o)),s||(a=!1);return a},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.Re},n.prototype.setKey=function(t){this.Re!==t&&(this.Re=t,this.changed())},n.prototype.getOpaque=function(t){return this.wa},n.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},n.prototype.getTile=function(t,n,i,e,o){return r()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Yh(t)},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();return St(null===n||Er(n,t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.Nu},n.prototype.getTilePixelSize=function(t,n,i){var r=this.getTileGridForProjection(i),e=this.getTilePixelRatio(n),o=sa(r.getTileSize(t),this.tmpSize);return 1==e?o:ua(o,e,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=void 0!==n?n:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Zh(r,t,i)),Zf(t,r)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},n.prototype.useTile=function(t,n,i,r){},n}(hd),vd=function(t){function n(n,i){var r=t.call(this,n)||this;return r.tile=i,r}return cd(n,t),n}(c),dd=ld,pd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yd=function(t){function n(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.ba=r.tileUrlFunction===n.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.ga={},r}return pd(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var n,i=t.target,r=o(i),e=i.getState();e==lt?(this.ga[r]=!0,n=od):r in this.ga&&(delete this.ga[r],n=e==dt?sd:e==vt?ud:void 0),null!=n&&this.dispatchEvent(new vd(n,i))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},n.prototype.setUrl=function(t){var n=uc(t);this.urls=n,this.setUrls(n)},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.ba?this.setTileUrlFunction(rc(t,this.tileGrid),n):this.setKey(n)},n.prototype.tileUrlFunction=function(t,n,i){},n.prototype.useTile=function(t,n,i){var r=Wf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(dd),md=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function wd(t,n){t.getImage().src=n}var bd=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:wd,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:r,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this).crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,i.tileClass=void 0!==n.tileClass?n.tileClass:Io,i.tileCacheForProjection={},i.tileGridForProjection={},i.xa=n.reprojectionErrorThreshold,i.Ma=!1,i}return md(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?n:{}),this.tileCacheForProjection){var e=this.tileCacheForProjection[r];e.expireCache(e==i?n:{})}},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Er(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){var n=t.prototype.getKey.call(this);return this.getInterpolate()||(n+=":disable-interpolation"),n},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!Er(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n)},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!Er(n,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Yh(t)),this.tileGridForProjection[i]}return this.tileGrid},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||Er(n,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new $f(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},n.prototype._a=function(t,n,i,r,e,o){var u=[t,n,i],s=this.getTileCoordForTileUrlFunction(u,e),a=s?this.tileUrlFunction(s,r,e):void 0,f=new this.tileClass(u,void 0!==a?ct:pt,void 0!==a?a:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(N,this.handleTileChange.bind(this)),f},n.prototype.getTile=function(t,n,i,r,e){var o=this.getProjection();if(o&&e&&!Er(o,e)){var u=this.getTileCacheForProjection(e),s=[t,n,i],a=void 0,f=Xf(s);u.containsKey(f)&&(a=u.get(f));var h=this.getKey();if(a&&a.key==h)return a;var c=this.getTileGridForProjection(o),l=this.getTileGridForProjection(e),v=this.getTileCoordForTileUrlFunction(s,e),d=new yl(o,c,e,l,s,v,this.getTilePixelRatio(r),this.getGutter(),function(t,n,i,r){return this.getTileInternal(t,n,i,r,o)}.bind(this),this.xa,this.Ma,this.getInterpolate());return d.key=h,a?(d.interimTile=a,d.refreshInterimChain(),u.replace(f,d)):u.set(f,d),d}return this.getTileInternal(t,n,i,r,o||e)},n.prototype.getTileInternal=function(t,n,i,r,e){var o=null,u=Wf(t,n,i),s=this.getKey();if(this.tileCache.containsKey(u)){if((o=this.tileCache.get(u)).key!=s){var a=o;o=this._a(t,n,i,r,e,s),a.getState()==ct?o.interimTile=a.interimTile:o.interimTile=a,o.refreshInterimChain(),this.tileCache.replace(u,o)}}else o=this._a(t,n,i,r,e,s),this.tileCache.set(u,o);return o},n.prototype.setRenderReprojectionEdges=function(t){if(this.Ma!=t){for(var n in this.Ma=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,n){var i=br(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}},n}(yd),gd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function xd(t){var n,i,r=t[0],e=new Array(r),o=1<<r-1;for(n=0;n<r;++n)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),e[n]=String.fromCharCode(i),o>>=1;return e.join("")}for(var Md=function(t){function n(n){var i=this,r=void 0!==n.hidpi&&n.hidpi,e=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(e=n.interpolate),(i=t.call(this,{cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:e,opaque:!0,projection:br("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:du,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).Sa=r,i.Oa=void 0!==n.culture?n.culture:"en-us",i.ja=void 0!==n.maxZoom?n.maxZoom:-1,i.Ea=n.key,i.ka=n.imagerySet,mh("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+i.ka+"?uriScheme=https&include=ImageryProviders&key="+i.Ea+"&c="+i.Oa,i.handleImageryMetadataResponse.bind(i),void 0,"jsonp"),i}return gd(n,t),n.prototype.getApiKey=function(){return this.Ea},n.prototype.getImagerySet=function(){return this.ka},n.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var n=t.resourceSets[0].resources[0],i=-1==this.ja?n.zoomMax:this.ja,r=nc(this.getProjection()),e=this.Sa?2:1,o=n.imageWidth==n.imageHeight?n.imageWidth/e:[n.imageWidth/e,n.imageHeight/e],u=$h({extent:r,minZoom:n.zoomMin,maxZoom:i,tileSize:o});this.tileGrid=u;var s=this.Oa,a=this.Sa;if(this.tileUrlFunction=ec(n.imageUrlSubdomains.map((function(t){var i=[0,0,0],r=n.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,n,e){if(t){Vf(t[0],t[1],t[2],i);var o=r;return a&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",xd(i))}}}))),n.imageryProviders){var f=kr(br("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState,e=this.getTileGrid(),o=e.getZForResolution(r.resolution,this.zDirection),u=e.getTileCoordForCoordAndZ(r.center,o)[0];return n.imageryProviders.map((function(n){for(var r=!1,e=n.coverageAreas,o=0,s=e.length;o<s;++o){var a=e[o];if(u>=a.zoomMin&&u<=a.zoomMax){var h=a.bbox;if(ti(oi([h[1],h[0],h[3],h[2]],f),t.extent)){r=!0;break}}}r&&i.push(n.attribution)})),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),i}.bind(this))}this.setState(pu)}else this.setState(yu)},n}(bd),_d=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sd=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=void 0!==r.projection?r.projection:"EPSG:3857",u=void 0!==r.tileGrid?r.tileGrid:$h({extent:nc(o),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:r.opaque,projection:o,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:u,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this).Ou=void 0!==r.gutter?r.gutter:0,i}return _d(n,t),n.prototype.getGutter=function(){return this.Ou},n}(bd),Od=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jd=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,maxZoom:void 0!==n.maxZoom?n.maxZoom:18,minZoom:n.minZoom,projection:n.projection,transition:n.transition,wrapX:n.wrapX,zDirection:n.zDirection})||this;return i.Aa=n.account,i.Ta=n.map||"",i.Ca=n.config||{},i.Pa={},i.Ra(),i}return Od(n,t),n.prototype.getConfig=function(){return this.Ca},n.prototype.updateConfig=function(t){A(this.Ca,t),this.Ra()},n.prototype.setConfig=function(t){this.Ca=t||{},this.Ra()},n.prototype.Ra=function(){var t=JSON.stringify(this.Ca);if(this.Pa[t])this.Ia(this.Pa[t]);else{var n="https://"+this.Aa+".carto.com/api/v1/map";this.Ta&&(n+="/named/"+this.Ta);var i=new XMLHttpRequest;i.addEventListener("load",this.Na.bind(this,t)),i.addEventListener("error",this.za.bind(this)),i.open("POST",n),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.Ca))}},n.prototype.Na=function(t,n){var i=n.target;if(!i.status||i.status>=200&&i.status<300){var r=void 0;try{r=JSON.parse(i.responseText)}catch(t){return void this.setState(yu)}this.Ia(r),this.Pa[t]=r,this.setState(pu)}else this.setState(yu)},n.prototype.za=function(t){this.setState(yu)},n.prototype.Ia=function(t){var n="https://"+t.cdn_url.https+"/"+this.Aa+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n)},n}(Sd),Ed="addfeature",kd="changefeature",Ad="clear",Td="removefeature",Cd="featuresloadstart",Pd="featuresloadend",Rd="featuresloaderror",Id=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nd=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.feature=i,e.features=r,e}return Id(n,t),n}(c),zd=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:pu,wrapX:void 0===r.wrapX||r.wrapX})||this).on,i.once,i.un,i.U=j,i.Fe=r.format,i.Fa=void 0===r.overlaps||r.overlaps,i.Ge=r.url,void 0!==r.loader?i.U=r.loader:void 0!==i.Ge&&(St(i.Fe,7),i.U=dh(i.Ge,i.Fe)),i.La=void 0!==r.strategy?r.strategy:ph;var e,o,u=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.Ga=u?new ed:null,i.Da=new ed,i.Ba=0,i.Ua={},i.qa={},i.Va={},i.Wa={},i.Xa=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(e=r.features).getArray()),u||void 0!==e||(e=new ht(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==e&&i.Ha(e),i}return Id(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.Ka(n,t)){this.Ya(n,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.Ga&&this.Ga.insert(r,t)}else this.Ua[n]=t;this.dispatchEvent(new Nd(Ed,t))}else this.Xa&&this.Xa.remove(t)},n.prototype.Ya=function(t,n){this.Wa[t]=[Y(n,N,this.Za,this),Y(n,l,this.Za,this)]},n.prototype.Ka=function(t,n){var i=!0,r=n.getId();return void 0!==r&&(r.toString()in this.qa?i=!1:this.qa[r.toString()]=n),i&&(St(!(t in this.Va),30),this.Va[t]=n),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],r=[],e=0,u=t.length;e<u;e++){var s=o(f=t[e]);this.Ka(s,f)&&i.push(f)}e=0;for(var a=i.length;e<a;e++){var f;s=o(f=i[e]);this.Ya(s,f);var h=f.getGeometry();if(h){var c=h.getExtent();n.push(c),r.push(f)}else this.Ua[s]=f}if(this.Ga&&this.Ga.load(n,r),this.hasListener(Ed)){e=0;for(var l=i.length;e<l;e++)this.dispatchEvent(new Nd(Ed,i[e]))}},n.prototype.Ha=function(t){var n=!1;this.addEventListener(Ed,(function(i){n||(n=!0,t.push(i.feature),n=!1)})),this.addEventListener(Td,(function(i){n||(n=!0,t.remove(i.feature),n=!1)})),t.addEventListener(ot,function(t){n||(n=!0,this.addFeature(t.element),n=!1)}.bind(this)),t.addEventListener(ut,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)}.bind(this)),this.Xa=t},n.prototype.clear=function(t){if(t){for(var n in this.Wa){this.Wa[n].forEach(J)}this.Xa||(this.Wa={},this.qa={},this.Va={})}else if(this.Ga){var i=function(t){this.removeFeatureInternal(t)}.bind(this);for(var r in this.Ga.forEach(i),this.Ua)this.removeFeatureInternal(this.Ua[r])}this.Xa&&this.Xa.clear(),this.Ga&&this.Ga.clear(),this.Ua={};var e=new Nd(Ad);this.dispatchEvent(e),this.changed()},n.prototype.forEachFeature=function(t){if(this.Ga)return this.Ga.forEach(t);this.Xa&&this.Xa.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?n(i):void 0}))},n.prototype.forEachFeatureInExtent=function(t,n){if(this.Ga)return this.Ga.forEachInExtent(t,n);this.Xa&&this.Xa.forEach(n)},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var r=n(i);if(r)return r}}))},n.prototype.getFeaturesCollection=function(){return this.Xa},n.prototype.getFeatures=function(){var t;return this.Xa?t=this.Xa.getArray().slice(0):this.Ga&&(t=this.Ga.getAll(),P(this.Ua)||b(t,C(this.Ua))),t},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){n.push(t)})),n},n.prototype.getFeaturesInExtent=function(t){return this.Ga?this.Ga.getInExtent(t):this.Xa?this.Xa.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],r=t[1],e=null,o=[NaN,NaN],u=1/0,s=[-1/0,-1/0,1/0,1/0],a=n||S;return this.Ga.forEachInExtent(s,(function(t){if(a(t)){var n=t.getGeometry(),f=u;if((u=n.closestPointXY(i,r,o,u))<f){e=t;var h=Math.sqrt(u);s[0]=i-h,s[1]=r-h,s[2]=i+h,s[3]=r+h}}})),e},n.prototype.getExtent=function(t){return this.Ga.getExtent(t)},n.prototype.getFeatureById=function(t){var n=this.qa[t.toString()];return void 0!==n?n:null},n.prototype.getFeatureByUid=function(t){var n=this.Va[t];return void 0!==n?n:null},n.prototype.getFormat=function(){return this.Fe},n.prototype.getOverlaps=function(){return this.Fa},n.prototype.getUrl=function(){return this.Ge},n.prototype.Za=function(t){var n=t.target,i=o(n),r=n.getGeometry();if(r){var e=r.getExtent();i in this.Ua?(delete this.Ua[i],this.Ga&&this.Ga.insert(e,n)):this.Ga&&this.Ga.update(e,n)}else i in this.Ua||(this.Ga&&this.Ga.remove(n),this.Ua[i]=n);var u=n.getId();if(void 0!==u){var s=u.toString();this.qa[s]!==n&&(this.Ja(n),this.qa[s]=n)}else this.Ja(n),this.Va[i]=n;this.changed(),this.dispatchEvent(new Nd(kd,n))},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.qa:o(t)in this.Va},n.prototype.isEmpty=function(){return this.Ga?this.Ga.isEmpty()&&P(this.Ua):!this.Xa||0===this.Xa.getLength()},n.prototype.loadFeatures=function(t,n,i){for(var r=this.Da,e=this.La(t,n,i),o=function(t,o){var s=e[t];r.forEachInExtent(s,(function(t){return jn(t.extent,s)}))||(++u.Ba,u.dispatchEvent(new Nd(Cd)),u.U.call(u,s,n,i,function(t){--this.Ba,this.dispatchEvent(new Nd(Pd,void 0,t))}.bind(u),function(){--this.Ba,this.dispatchEvent(new Nd(Rd))}.bind(u)),r.insert(s,{extent:s.slice()}))},u=this,s=0,a=e.length;s<a;++s)o(s);this.loading=!(this.U.length<4)&&this.Ba>0},n.prototype.refresh=function(){this.clear(!0),this.Da.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var n,i=this.Da;i.forEachInExtent(t,(function(i){if(In(i.extent,t))return n=i,!0})),n&&i.remove(n)},n.prototype.removeFeature=function(t){if(t){var n=o(t);n in this.Ua?delete this.Ua[n]:this.Ga&&this.Ga.remove(t),this.removeFeatureInternal(t)&&this.changed()}},n.prototype.removeFeatureInternal=function(t){var n=o(t),i=this.Wa[n];if(i){i.forEach(J),delete this.Wa[n];var r=t.getId();return void 0!==r&&delete this.qa[r.toString()],delete this.Va[n],this.dispatchEvent(new Nd(Td,t)),t}},n.prototype.Ja=function(t){var n=!1;for(var i in this.qa)if(this.qa[i]===t){delete this.qa[i],n=!0;break}return n},n.prototype.setLoader=function(t){this.U=t},n.prototype.setUrl=function(t){St(this.Fe,7),this.Ge=t,this.setLoader(dh(t,this.Fe))},n}(hd),Fd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ld=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==n.distance?n.distance:20,i.minDistance=n.minDistance||0,i.interpolationRatio=0,i.features=[],i.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return St(n.getType()==Pt.POINT,10),n},i.$a=n.createCluster,i.source=null,i.Qa=i.refresh.bind(i),i.updateDistance(i.distance,i.minDistance),i.setSource(n.source||null),i}return Fd(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n)},n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,n,i){this.source.loadFeatures(t,n,i),n!==this.resolution&&(this.resolution=n,this.refresh())},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},n.prototype.getMinDistance=function(){return this.minDistance},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(N,this.Qa),this.source=t,t&&t.addEventListener(N,this.Qa),this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},n.prototype.updateDistance=function(t,n){var i=0===t?0:Math.min(n,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=n,this.interpolationRatio=i,r&&this.refresh()},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,i=this.source.getFeatures(),r={},e=0,u=i.length;e<u;e++){var s=i[e];if(!(o(s)in r)){var a=this.geometryFunction(s);if(a){Pn(a.getCoordinates(),t),Mn(t,n,t);var f=this.source.getFeaturesInExtent(t).filter((function(t){var n=o(t);return!(n in r)&&(r[n]=!0,!0)}));this.features.push(this.createCluster(f,t))}}}},n.prototype.createCluster=function(t,n){for(var i=[0,0],r=t.length-1;r>=0;--r){var e=this.geometryFunction(t[r]);e?Ki(i,e.getCoordinates()):t.splice(r,1)}nr(i,1/t.length);var o=Xn(n),u=this.interpolationRatio,s=new Ee([i[0]*(1-u)+o[0]*u,i[1]*(1-u)+o[1]*u]);return this.$a?this.$a(s,t):new Et({geometry:s,features:t})},n}(zd),Gd=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dd=function(t){function n(n){var i=this,r=void 0===n.projection?"EPSG:3857":n.projection,e=n.tileGrid;return void 0===e&&r&&(e=$h({extent:nc(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(i=t.call(this,{cacheSize:.1,attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:r,tileGrid:e,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate})||this).Ou=void 0!==n.gutter?n.gutter:0,i.ga={},i.U=n.loader,i.cr=i.cr.bind(i),i.bandCount=void 0===n.bandCount?4:n.bandCount,i}return Gd(n,t),n.prototype.getGutterForProjection=function(t){return this.Ou},n.prototype.setLoader=function(t){this.U=t},n.prototype.getTile=function(t,n,i,r,e){var o=Wf(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var u=this.U;var s=new _t(A({tileCoord:[t,n,i],loader:function(){return k((function(){return u(t,n,i)}))}},this.tileOptions));return s.key=this.getKey(),s.addEventListener(N,this.cr),this.tileCache.set(o,s),s},n.prototype.cr=function(t){var n,i=t.target,r=o(i),e=i.getState();e==lt?(this.ga[r]=!0,n=od):r in this.ga&&(delete this.ga[r],n=e==dt?sd:e==vt?ud:void 0),n&&this.dispatchEvent(new vd(n,i))},n}(dd),Bd=new ArrayBuffer(4),Ud=new Float32Array(Bd),qd=new Uint32Array(Bd),Vd=new Uint32Array(512),Wd=new Uint32Array(512),Xd=0;Xd<256;++Xd){var Hd=Xd-127;Hd<-27?(Vd[Xd]=0,Vd[256|Xd]=32768,Wd[Xd]=24,Wd[256|Xd]=24):Hd<-14?(Vd[Xd]=1024>>-Hd-14,Vd[256|Xd]=1024>>-Hd-14|32768,Wd[Xd]=-Hd-1,Wd[256|Xd]=-Hd-1):Hd<=15?(Vd[Xd]=Hd+15<<10,Vd[256|Xd]=Hd+15<<10|32768,Wd[Xd]=13,Wd[256|Xd]=13):Hd<128?(Vd[Xd]=31744,Vd[256|Xd]=64512,Wd[Xd]=24,Wd[256|Xd]=24):(Vd[Xd]=31744,Vd[256|Xd]=64512,Wd[Xd]=13,Wd[256|Xd]=13)}var Kd=new Uint32Array(2048),Yd=new Uint32Array(64),Zd=new Uint32Array(64);Kd[0]=0;for(var Jd=1;Jd<1024;++Jd){for(var $d=Jd<<13,Qd=0;0==(8388608&$d);)Qd-=8388608,$d<<=1;$d&=-8388609,Qd+=947912704,Kd[Jd]=$d|Qd}for(var tp=1024;tp<2048;++tp)Kd[tp]=939524096+(tp-1024<<13);Yd[0]=0;for(var np=1;np<31;++np)Yd[np]=np<<23;Yd[31]=1199570944,Yd[32]=2147483648;for(var ip=33;ip<63;++ip)Yd[ip]=2147483648+(ip-32<<23);Yd[63]=3347054592,Zd[0]=0;for(var rp=1;rp<64;++rp)Zd[rp]=32===rp?0:1024;function ep(t){var n=t>>10;return qd[0]=Kd[Zd[n]+(1023&t)]+Yd[n],Ud[0]}var op=Reflect.getPrototypeOf(Uint8Array).prototype,up=Reflect.getOwnPropertyDescriptor(op,Symbol.toStringTag).get;function sp(t){return void 0!==up.call(t)}var ap=Object.prototype.toString;function fp(t){return!!ArrayBuffer.isView(t)&&(!sp(t)&&"[object DataView]"===ap.call(t))}function hp(t,n){if(!fp(t))throw new TypeError("First argument to getFloat16 function must be a DataView");for(var i=arguments.length,r=new Array(i>2?i-2:0),e=2;e<i;e++)r[e-2]=arguments[e];return ep(t.getUint16.apply(t,[n].concat(r)))}var cp=i(802),lp=i(51),vp=i(150);function dp(t,n){for(var i,r=t.width,e=t.height,o=new Uint8Array(r*e*3),u=0,s=0;u<t.length;++u,s+=3)i=256-t[u]/n*256,o[s]=i,o[s+1]=i,o[s+2]=i;return o}function pp(t,n){for(var i,r=t.width,e=t.height,o=new Uint8Array(r*e*3),u=0,s=0;u<t.length;++u,s+=3)i=t[u]/n*256,o[s]=i,o[s+1]=i,o[s+2]=i;return o}function yp(t,n){for(var i=t.width,r=t.height,e=new Uint8Array(i*r*3),o=n.length/3,u=n.length/3*2,s=0,a=0;s<t.length;++s,a+=3){var f=t[s];e[a]=n[f]/65536*256,e[a+1]=n[f+o]/65536*256,e[a+2]=n[f+u]/65536*256}return e}function mp(t){for(var n=t.width,i=t.height,r=new Uint8Array(n*i*3),e=0,o=0;e<t.length;e+=4,o+=3){var u=t[e],s=t[e+1],a=t[e+2],f=t[e+3];r[o]=(255-u)/256*255*((255-f)/256),r[o+1]=(255-s)/256*255*((255-f)/256),r[o+2]=(255-a)/256*255*((255-f)/256)}return r}function wp(t){for(var n=t.width,i=t.height,r=new Uint8ClampedArray(n*i*3),e=0,o=0;e<t.length;e+=3,o+=3){var u=t[e],s=t[e+1],a=t[e+2];r[o]=u+1.402*(a-128),r[o+1]=u-.34414*(s-128)-.71414*(a-128),r[o+2]=u+1.772*(s-128)}return r}function bp(t){for(var n=t.width,i=t.height,r=new Uint8Array(n*i*3),e=0,o=0;e<t.length;e+=3,o+=3){var u=(t[e+0]+16)/116,s=(t[e+1]<<24>>24)/500+u,a=u-(t[e+2]<<24>>24)/200,f=void 0,h=void 0,c=void 0;h=-.9689*(s=.95047*(s*s*s>.008856?s*s*s:(s-16/116)/7.787))+1.8758*(u=1*(u*u*u>.008856?u*u*u:(u-16/116)/7.787))+.0415*(a=1.08883*(a*a*a>.008856?a*a*a:(a-16/116)/7.787)),c=.0557*s+-.204*u+1.057*a,f=(f=3.2406*s+-1.5372*u+-.4986*a)>.0031308?1.055*Math.pow(f,1/2.4)-.055:12.92*f,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:12.92*c,r[o]=255*Math.max(0,Math.min(1,f)),r[o+1]=255*Math.max(0,Math.min(1,h)),r[o+2]=255*Math.max(0,Math.min(1,c))}return r}function gp(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function xp(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){gp(o,r,e,u,s,"next",t)}function s(t){gp(o,r,e,u,s,"throw",t)}u(void 0)}))}}var Mp=new Map;function _p(t,n){Array.isArray(t)||(t=[t]),t.forEach((function(t){return Mp.set(t,n)}))}function Sp(t){return Op.apply(this,arguments)}function Op(){return(Op=xp(regeneratorRuntime.mark((function t(n){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Mp.get(n.Compression)){t.next=3;break}throw new Error("Unknown compression method identifier: ".concat(n.Compression));case 3:return t.next=5,i();case 5:return r=t.sent,t.abrupt("return",new r(n));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jp(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(t).constructor)(n*i*r)}function Ep(t,n,i,r,e){var o=n/r,u=i/e;return t.map((function(t){for(var s=jp(t,r,e),a=0;a<e;++a)for(var f=Math.min(Math.round(u*a),i-1),h=0;h<r;++h){var c=Math.min(Math.round(o*h),n-1),l=t[f*n+c];s[a*r+h]=l}return s}))}function kp(t,n,i){return(1-i)*t+i*n}function Ap(t,n,i,r,e){var o=n/r,u=i/e;return t.map((function(t){for(var s=jp(t,r,e),a=0;a<e;++a)for(var f=u*a,h=Math.floor(f),c=Math.min(Math.ceil(f),i-1),l=0;l<r;++l){var v=o*l,d=v%1,p=Math.floor(v),y=Math.min(Math.ceil(v),n-1),m=t[h*n+p],w=t[h*n+y],b=t[c*n+p],g=t[c*n+y],x=kp(kp(m,w,d),kp(b,g,d),f%1);s[a*r+l]=x}return s}))}function Tp(t,n,i,r,e){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(o.toLowerCase()){case"nearest":return Ep(t,n,i,r,e);case"bilinear":case"linear":return Ap(t,n,i,r,e);default:throw new Error("Unsupported resampling method: '".concat(o,"'"))}}function Cp(t,n,i,r,e,o){for(var u=n/r,s=i/e,a=jp(t,r,e,o),f=0;f<e;++f)for(var h=Math.min(Math.round(s*f),i-1),c=0;c<r;++c)for(var l=Math.min(Math.round(u*c),n-1),v=0;v<o;++v){var d=t[h*n*o+l*o+v];a[f*r*o+c*o+v]=d}return a}function Pp(t,n,i,r,e,o){for(var u=n/r,s=i/e,a=jp(t,r,e,o),f=0;f<e;++f)for(var h=s*f,c=Math.floor(h),l=Math.min(Math.ceil(h),i-1),v=0;v<r;++v)for(var d=u*v,p=d%1,y=Math.floor(d),m=Math.min(Math.ceil(d),n-1),w=0;w<o;++w){var b=t[c*n*o+y*o+w],g=t[c*n*o+m*o+w],x=t[l*n*o+y*o+w],M=t[l*n*o+m*o+w],_=kp(kp(b,g,p),kp(x,M,p),h%1);a[f*r*o+v*o+w]=_}return a}function Rp(t,n,i,r,e,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(u.toLowerCase()){case"nearest":return Cp(t,n,i,r,e,o);case"bilinear":case"linear":return Pp(t,n,i,r,e,o);default:throw new Error("Unsupported resampling method: '".concat(u,"'"))}}function Ip(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,s=!1;try{for(i=i.call(t);!(u=(r=i.next()).done)&&(o.push(r.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==i.return||i.return()}finally{if(s)throw e}}return o}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return Np(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Np(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Np(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function zp(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function Fp(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){zp(o,r,e,u,s,"next",t)}function s(t){zp(o,r,e,u,s,"throw",t)}u(void 0)}))}}function Lp(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gp(t,n,i){for(var r=0,e=n;e<i;++e)r+=t[e];return r}function Dp(t,n,i){switch(t){case 1:if(n<=8)return new Uint8Array(i);if(n<=16)return new Uint16Array(i);if(n<=32)return new Uint32Array(i);break;case 2:if(8===n)return new Int8Array(i);if(16===n)return new Int16Array(i);if(32===n)return new Int32Array(i);break;case 3:switch(n){case 16:case 32:return new Float32Array(i);case 64:return new Float64Array(i)}}throw Error("Unsupported data format/bitsPerSample")}function Bp(t,n){return(1!==t&&2!==t||!(n<=32)||n%8!=0)&&(3!==t||16!==n&&32!==n&&64!==n)}function Up(t,n,i,r,e,o,u){var s=new DataView(t),a=2===i?1:r,f=Dp(n,e,2===i?u*o:u*o*r),h=parseInt("1".repeat(e),2);if(1===n){var c=o*(1===i?r*e:e);0!=(7&c)&&(c=c+7&-8);for(var l=0;l<u;++l)for(var v=l*c,d=0;d<o;++d)for(var p=v+d*a*e,y=0;y<a;++y){var m=p+y*e,w=(l*o+d)*a+y,b=Math.floor(m/8),g=m%8;if(g+e<=8)f[w]=s.getUint8(b)>>8-e-g&h;else if(g+e<=16)f[w]=s.getUint16(b)>>16-e-g&h;else if(g+e<=24){var x=s.getUint16(b)<<8|s.getUint8(b+2);f[w]=x>>24-e-g&h}else f[w]=s.getUint32(b)>>32-e-g&h}}return f.buffer}_p([void 0,1],(function(){return i.e(226).then(i.bind(i,966)).then((function(t){return t.default}))})),_p(5,(function(){return i.e(611).then(i.bind(i,611)).then((function(t){return t.default}))})),_p(6,(function(){throw new Error("old style JPEG compression is not supported.")})),_p(7,(function(){return i.e(382).then(i.bind(i,382)).then((function(t){return t.default}))})),_p([8,32946],(function(){return Promise.all([i.e(247),i.e(356)]).then(i.bind(i,356)).then((function(t){return t.default}))})),_p(32773,(function(){return i.e(395).then(i.bind(i,395)).then((function(t){return t.default}))})),_p(34887,(function(){return Promise.all([i.e(247),i.e(54)]).then(i.bind(i,54)).then((function(t){return t.default}))})),_p(50001,(function(){return i.e(629).then(i.bind(i,629)).then((function(t){return t.default}))}));var qp=function(){function t(n,i,r,e,o,u){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileDirectory=n,this.geoKeys=i,this.dataView=r,this.littleEndian=e,this.tiles=o?{}:null,this.isTiled=!n.StripOffsets;var s=n.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=u}var n,i,r,e,o,u,s;return n=t,(i=[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var t=0,n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}},{key:"getSampleByteSize",value:function(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(t," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}},{key:"getReaderForSample",value:function(t){var n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,i=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(t,n){return hp(this,t,n)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}},{key:"getBitsPerSample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[t]}},{key:"getArrayForSample",value:function(t,n){return Dp(this.getSampleFormat(t),this.getBitsPerSample(t),n)}},{key:"getTileOrStrip",value:(s=Fp(regeneratorRuntime.mark((function t(n,i,r,e,o){var u,s,a,f,h,c,l,v,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight()),f=this.tiles,1===this.planarConfiguration?a=i*u+n:2===this.planarConfiguration&&(a=r*u*s+i*u+n),this.isTiled?(h=this.fileDirectory.TileOffsets[a],c=this.fileDirectory.TileByteCounts[a]):(h=this.fileDirectory.StripOffsets[a],c=this.fileDirectory.StripByteCounts[a]),t.next=7,this.source.fetch([{offset:h,length:c}],o);case 7:return l=t.sent[0],null!==f&&f[a]?v=f[a]:(v=Fp(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.decode(d.fileDirectory,l);case 2:return n=t.sent,r=d.getSampleFormat(),o=d.getBitsPerSample(),Bp(r,o)&&(n=Up(n,r,d.planarConfiguration,d.getSamplesPerPixel(),o,d.getTileWidth(),d.getBlockHeight(i))),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))(),null!==f&&(f[a]=v)),t.t0=n,t.t1=i,t.t2=r,t.next=14,v;case 14:return t.t3=t.sent,t.abrupt("return",{x:t.t0,y:t.t1,sample:t.t2,data:t.t3});case 16:case"end":return t.stop()}}),t,this)}))),function(t,n,i,r,e){return s.apply(this,arguments)})},{key:"_readRaster",value:(u=Fp(regeneratorRuntime.mark((function t(n,i,r,e,o,u,s,a,f){var h,c,l,v,d,p,y,m,w,b,g,x,M,_,S,O,j,E,k,A,T=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(h=this.getTileWidth(),c=this.getTileHeight(),l=this.getWidth(),v=this.getHeight(),d=Math.max(Math.floor(n[0]/h),0),p=Math.min(Math.ceil(n[2]/h),Math.ceil(l/h)),y=Math.max(Math.floor(n[1]/c),0),m=Math.min(Math.ceil(n[3]/c),Math.ceil(v/c)),w=n[2]-n[0],b=this.getBytesPerPixel(),g=[],x=[],M=0;M<i.length;++M)1===this.planarConfiguration?g.push(Gp(this.fileDirectory.BitsPerSample,0,i[M])/8):g.push(0),x.push(this.getReaderForSample(i[M]));for(_=[],S=this.littleEndian,O=y;O<m;++O)for(j=d;j<p;++j)for(E=function(t){var u=t,s=i[t];2===T.planarConfiguration&&(b=T.getSampleByteSize(t));var a=T.getTileOrStrip(j,O,s,o,f).then((function(t){for(var o=t.data,s=new DataView(o),a=T.getBlockHeight(t.y),f=t.y*c,d=t.x*h,p=f+a,y=(t.x+1)*h,m=x[u],M=Math.min(a,a-(p-n[3]),v-f),_=Math.min(h,h-(y-n[2]),l-d),O=Math.max(0,n[1]-f);O<M;++O)for(var j=Math.max(0,n[0]-d);j<_;++j){var E=(O*h+j)*b,k=m.call(s,E+g[u],S),A=void 0;e?(A=(O+f-n[1])*w*i.length+(j+d-n[0])*i.length+u,r[A]=k):(A=(O+f-n[1])*w+j+d-n[0],r[u][A]=k)}}));_.push(a)},k=0;k<i.length;++k)E(k);return t.next=18,Promise.all(_);case 18:if(!(u&&n[2]-n[0]!==u||s&&n[3]-n[1]!==s)){t.next=23;break}return(A=e?Rp(r,n[2]-n[0],n[3]-n[1],u,s,i.length,a):Tp(r,n[2]-n[0],n[3]-n[1],u,s,a)).width=u,A.height=s,t.abrupt("return",A);case 23:return r.width=u||n[2]-n[0],r.height=s||n[3]-n[1],t.abrupt("return",r);case 26:case"end":return t.stop()}}),t,this)}))),function(t,n,i,r,e,o,s,a,f){return u.apply(this,arguments)})},{key:"readRasters",value:(o=Fp(regeneratorRuntime.mark((function t(){var n,i,r,e,o,u,s,a,f,h,c,l,v,d,p,y,m,w,b,g,x,M,_,S,O,j,E=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=E.length>0&&void 0!==E[0]?E[0]:{},i=n.window,r=n.samples,e=void 0===r?[]:r,o=n.interleave,u=n.pool,s=void 0===u?null:u,a=n.width,f=n.height,h=n.resampleMethod,c=n.fillValue,l=n.signal,!((v=i||[0,0,this.getWidth(),this.getHeight()])[0]>v[2]||v[1]>v[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if(d=v[2]-v[0],p=v[3]-v[1],y=d*p,m=this.getSamplesPerPixel(),e&&e.length){t.next=12;break}for(w=0;w<m;++w)e.push(w);t.next=19;break;case 12:b=0;case 13:if(!(b<e.length)){t.next=19;break}if(!(e[b]>=m)){t.next=16;break}return t.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(e[b],"'."))));case 16:++b,t.next=13;break;case 19:if(o)x=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,M=Math.max.apply(null,this.fileDirectory.BitsPerSample),g=Dp(x,M,y*e.length),c&&g.fill(c);else for(g=[],_=0;_<e.length;++_)S=this.getArrayForSample(e[_],y),Array.isArray(c)&&_<c.length?S.fill(c[_]):c&&!Array.isArray(c)&&S.fill(c),g.push(S);if(t.t0=s,t.t0){t.next=25;break}return t.next=24,Sp(this.fileDirectory);case 24:t.t0=t.sent;case 25:return O=t.t0,t.next=28,this._readRaster(v,e,g,o,O,a,f,h,l);case 28:return j=t.sent,t.abrupt("return",j);case 30:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"readRGB",value:(e=Fp(regeneratorRuntime.mark((function t(){var n,i,r,e,o,u,s,a,f,h,c,l,v,d,p,y,m,w,b,g,x,M,_,S,O,j,E,k=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=k.length>0&&void 0!==k[0]?k[0]:{},i=n.window,r=n.interleave,e=void 0===r||r,o=n.pool,u=void 0===o?null:o,s=n.width,a=n.height,f=n.resampleMethod,h=n.enableAlpha,c=void 0!==h&&h,l=n.signal,!((v=i||[0,0,this.getWidth(),this.getHeight()])[0]>v[2]||v[1]>v[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if((d=this.fileDirectory.PhotometricInterpretation)!==vp.Ie.RGB){t.next=9;break}if(p=[0,1,2],this.fileDirectory.ExtraSamples!==vp.pd.Unspecified&&c)for(p=[],y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)p.push(y);return t.abrupt("return",this.readRasters({window:i,interleave:e,samples:p,pool:u,width:s,height:a,resampleMethod:f,signal:l}));case 9:t.t0=d,t.next=t.t0===vp.Ie.WhiteIsZero||t.t0===vp.Ie.BlackIsZero||t.t0===vp.Ie.Palette?12:t.t0===vp.Ie.CMYK?14:t.t0===vp.Ie.YCbCr||t.t0===vp.Ie.CIELab?16:18;break;case 12:return m=[0],t.abrupt("break",19);case 14:return m=[0,1,2,3],t.abrupt("break",19);case 16:return m=[0,1,2],t.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return w={window:v,interleave:!0,samples:m,pool:u,width:s,height:a,resampleMethod:f,signal:l},b=this.fileDirectory,t.next=23,this.readRasters(w);case 23:g=t.sent,x=Math.pow(2,this.fileDirectory.BitsPerSample[0]),t.t1=d,t.next=t.t1===vp.Ie.WhiteIsZero?28:t.t1===vp.Ie.BlackIsZero?30:t.t1===vp.Ie.Palette?32:t.t1===vp.Ie.CMYK?34:t.t1===vp.Ie.YCbCr?36:t.t1===vp.Ie.CIELab?38:40;break;case 28:return M=dp(g,x),t.abrupt("break",41);case 30:return M=pp(g,x),t.abrupt("break",41);case 32:return M=yp(g,b.ColorMap),t.abrupt("break",41);case 34:return M=mp(g),t.abrupt("break",41);case 36:return M=wp(g),t.abrupt("break",41);case 38:return M=bp(g),t.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!e){for(_=new Uint8Array(M.length/3),S=new Uint8Array(M.length/3),O=new Uint8Array(M.length/3),j=0,E=0;j<M.length;j+=3,++E)_[E]=M[j],S[E]=M[j+1],O[E]=M[j+2];M=[_,S,O]}return M.width=g.width,M.height=g.height,t.abrupt("return",M);case 45:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var t=[],n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}},{key:"getGDALMetadata",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n={};if(!this.fileDirectory.GDAL_METADATA)return null;var i=this.fileDirectory.GDAL_METADATA,r=lp(i,"Item");r=null===t?r.filter((function(t){return void 0===cp(t,"sample")})):r.filter((function(n){return Number(cp(n,"sample"))===t}));for(var e=0;e<r.length;++e){var o=r[e];n[cp(o,"name")]=o.inner}return n}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}},{key:"getOrigin",value:function(){var t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(i)return[i[0],i[5],i[10]];if(t){var r=t.getResolution(),e=Ip(r,3),o=e[0],u=e[1],s=e[2];return[o*t.getWidth()/this.getWidth(),u*t.getHeight()/this.getHeight(),s*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var t=this.getOrigin(),n=this.getResolution(),i=t[0],r=t[1],e=i+n[0]*this.getWidth(),o=r+n[1]*this.getHeight();return[Math.min(i,e),Math.min(r,o),Math.max(i,e),Math.max(r,o)]}}])&&Lp(n.prototype,i),r&&Lp(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function Vp(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Wp=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataView=new DataView(n)}var n,i,r;return n=t,(i=[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(t,n){var i,r=this.getUint32(t,n),e=this.getUint32(t+4,n);if(n){if(i=r+Math.pow(2,32)*e,!Number.isSafeInteger(i))throw new Error("".concat(i," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return i}if(i=Math.pow(2,32)*r+e,!Number.isSafeInteger(i))throw new Error("".concat(i," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return i}},{key:"getInt64",value:function(t,n){for(var i=0,r=(128&this._dataView.getUint8(t+(n?7:0)))>0,e=!0,o=0;o<8;o++){var u=this._dataView.getUint8(t+(n?o:7-o));r&&(e?0!==u&&(u=255&~(u-1),e=!1):u=255&~u),i+=u*Math.pow(256,o)}return r&&(i=-i),i}},{key:"getUint8",value:function(t,n){return this._dataView.getUint8(t,n)}},{key:"getInt8",value:function(t,n){return this._dataView.getInt8(t,n)}},{key:"getUint16",value:function(t,n){return this._dataView.getUint16(t,n)}},{key:"getInt16",value:function(t,n){return this._dataView.getInt16(t,n)}},{key:"getUint32",value:function(t,n){return this._dataView.getUint32(t,n)}},{key:"getInt32",value:function(t,n){return this._dataView.getInt32(t,n)}},{key:"getFloat16",value:function(t,n){return hp(this._dataView,t,n)}},{key:"getFloat32",value:function(t,n){return this._dataView.getFloat32(t,n)}},{key:"getFloat64",value:function(t,n){return this._dataView.getFloat64(t,n)}}])&&Vp(n.prototype,i),r&&Vp(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function Xp(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Hp=function(){function t(n,i,r,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataView=new DataView(n),this._sliceOffset=i,this._littleEndian=r,this._bigTiff=e}var n,i,r;return n=t,(i=[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}},{key:"readUint8",value:function(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(t){var n,i=this.readUint32(t),r=this.readUint32(t+4);if(this._littleEndian){if(n=i+Math.pow(2,32)*r,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}if(n=Math.pow(2,32)*i+r,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}},{key:"readInt64",value:function(t){for(var n=0,i=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0,r=!0,e=0;e<8;e++){var o=this._dataView.getUint8(t+(this._littleEndian?e:7-e));i&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),n+=o*Math.pow(256,e)}return i&&(n=-n),n}},{key:"readOffset",value:function(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}])&&Xp(n.prototype,i),r&&Xp(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function Kp(t){return Jp(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||$p(t)||Zp()}function Yp(t,n){return Jp(t)||function(t,n){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,s=!1;try{for(i=i.call(t);!(u=(r=i.next()).done)&&(o.push(r.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==i.return||i.return()}finally{if(s)throw e}}return o}(t,n)||$p(t,n)||Zp()}function Zp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jp(t){if(Array.isArray(t))return t}function $p(t,n){if(t){if("string"==typeof t)return Qp(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qp(t,n):void 0}}function Qp(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}var ty="\r\n\r\n";function ny(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);var n,i={},r=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=$p(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==i.return||i.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var e=Yp(n.value,2),o=e[0],u=e[1];i[o.toLowerCase()]=u}}catch(t){r.e(t)}finally{r.f()}return i}function iy(t){return ny(t.split("\r\n").map((function(t){var n=t.split(":").map((function(t){return t.trim()}));return n[0]=n[0].toLowerCase(),n})))}function ry(t){var n,i,r;if(t){var e=Yp(t.match(/bytes (\d+)-(\d+)\/(\d+)/),4);n=e[1],i=e[2],r=e[3],n=parseInt(n,10),i=parseInt(i,10),r=parseInt(r,10)}return{start:n,end:i,total:r}}function ey(t,n){for(var i=null,r=new TextDecoder("ascii"),e=[],o="--".concat(n),u="".concat(o,"--"),s=0;s<10;++s){r.decode(new Uint8Array(t,s,o.length))===o&&(i=s)}if(null===i)throw new Error("Could not find initial boundary");for(;i<t.byteLength;){var a=r.decode(new Uint8Array(t,i,Math.min(o.length+1024,t.byteLength-i)));if(0===a.length||a.startsWith(u))break;if(!a.startsWith(o))throw new Error("Part does not start with boundary");var f=a.substr(o.length+2);if(0===f.length)break;var h=f.indexOf(ty),c=iy(f.substr(0,h)),l=ry(c["content-range"]),v=l.start,d=l.end,p=l.total,y=i+o.length+h+ty.length,m=parseInt(d,10)+1-parseInt(v,10);e.push({headers:c,data:t.slice(y,y+m),offset:v,length:m,fileSize:p}),i=y+m+4}return e}function oy(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function uy(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){oy(o,r,e,u,s,"next",t)}function s(t){oy(o,r,e,u,s,"throw",t)}u(void 0)}))}}function sy(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ay=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,r,e,o,u;return n=t,(i=[{key:"fetch",value:(u=uy(regeneratorRuntime.mark((function t(n){var i,r=this,e=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:void 0,t.abrupt("return",Promise.all(n.map((function(t){return r.fetchSlice(t,i)}))));case 2:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})},{key:"fetchSlice",value:(o=uy(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("fetching of slice ".concat(n," not possible, not implemented"));case 1:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"fileSize",get:function(){return null}},{key:"close",value:(e=uy(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}])&&sy(n.prototype,i),r&&sy(n,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function fy(t){return(fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hy(t){return function(t){if(Array.isArray(t))return dy(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||vy(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cy(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,s=!1;try{for(i=i.call(t);!(u=(r=i.next()).done)&&(o.push(r.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==i.return||i.return()}finally{if(s)throw e}}return o}(t,n)||vy(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ly(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=vy(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==i.return||i.return()}finally{if(s)throw o}}}}function vy(t,n){if(t){if("string"==typeof t)return dy(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?dy(t,n):void 0}}function dy(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function py(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function yy(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function my(t,n){if(n&&("object"===fy(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wy(t){var n="function"==typeof Map?new Map:void 0;return(wy=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return by(t,arguments,My(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),xy(r,t)})(t)}function by(t,n,i){return(by=gy()?Reflect.construct:function(t,n,i){var r=[null];r.push.apply(r,n);var e=new(Function.bind.apply(t,r));return i&&xy(e,i.prototype),e}).apply(null,arguments)}function gy(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function xy(t,n){return(xy=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function My(t){return(My=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _y=function(t,n,i){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&xy(t,n)}(f,t);var r,e,o,u,s,a=(r=f,e=gy(),function(){var t,n=My(r);if(e){var i=My(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return my(this,t)});function f(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(py(this,f),t=a.call(this),!(n.maxSize&&n.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof n.maxAge&&0===n.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");return t.maxSize=n.maxSize,t.maxAge=n.maxAge||Number.POSITIVE_INFINITY,t.onEviction=n.onEviction,t.cache=new Map,t.oldCache=new Map,t._size=0,t}return o=f,(u=[{key:"_emitEvictions",value:function(t){if("function"==typeof this.onEviction){var n,i=ly(t);try{for(i.s();!(n=i.n()).done;){var r=cy(n.value,2),e=r[0],o=r[1];this.onEviction(e,o.value)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"_deleteIfExpired",value:function(t,n){return"number"==typeof n.expiry&&n.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(t,n.value),this.delete(t))}},{key:"_getOrDeleteIfExpired",value:function(t,n){if(!1===this._deleteIfExpired(t,n))return n.value}},{key:"_getItemValue",value:function(t,n){return n.expiry?this._getOrDeleteIfExpired(t,n):n.value}},{key:"_peek",value:function(t,n){var i=n.get(t);return this._getItemValue(t,i)}},{key:"_set",value:function(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}},{key:"_moveToRecent",value:function(t,n){this.oldCache.delete(t),this._set(t,n)}},{key:"_entriesAscending",value:regeneratorRuntime.mark((function t(){var n,i,r,e,o,u,s,a,f,h,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ly(this.oldCache),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=13;break}if(r=i.value,e=cy(r,2),o=e[0],u=e[1],this.cache.has(o)){t.next=11;break}if(!1!==this._deleteIfExpired(o,u)){t.next=11;break}return t.next=11,r;case 11:t.next=3;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),n.e(t.t0);case 18:return t.prev=18,n.f(),t.finish(18);case 21:s=ly(this.cache),t.prev=22,s.s();case 24:if((a=s.n()).done){t.next=33;break}if(f=a.value,h=cy(f,2),c=h[0],l=h[1],!1!==this._deleteIfExpired(c,l)){t.next=31;break}return t.next=31,f;case 31:t.next=24;break;case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(22),s.e(t.t1);case 38:return t.prev=38,s.f(),t.finish(38);case 41:case"end":return t.stop()}}),t,this,[[1,15,18,21],[22,35,38,41]])}))},{key:"get",value:function(t){if(this.cache.has(t)){var n=this.cache.get(t);return this._getItemValue(t,n)}if(this.oldCache.has(t)){var i=this.oldCache.get(t);if(!1===this._deleteIfExpired(t,i))return this._moveToRecent(t,i),i.value}}},{key:"set",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.maxAge,e=void 0===r?this.maxAge:r,o="number"==typeof e&&e!==Number.POSITIVE_INFINITY?Date.now()+e:void 0;this.cache.has(t)?this.cache.set(t,{value:n,expiry:o}):this._set(t,{value:n,expiry:o})}},{key:"has",value:function(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):!!this.oldCache.has(t)&&!this._deleteIfExpired(t,this.oldCache.get(t))}},{key:"peek",value:function(t){return this.cache.has(t)?this._peek(t,this.cache):this.oldCache.has(t)?this._peek(t,this.oldCache):void 0}},{key:"delete",value:function(t){var n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"resize",value:function(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");var n=hy(this._entriesAscending()),i=n.length-t;i<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(i>0&&this._emitEvictions(n.slice(0,i)),this.oldCache=new Map(n.slice(i)),this.cache=new Map,this._size=0),this.maxSize=t}},{key:"keys",value:regeneratorRuntime.mark((function t(){var n,i,r,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ly(this),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=9;break}return r=cy(i.value,1),e=r[0],t.next=7,e;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"values",value:regeneratorRuntime.mark((function t(){var n,i,r,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ly(this),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=9;break}return r=cy(i.value,2),e=r[1],t.next=7,e;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:n,value:regeneratorRuntime.mark((function(){var t,n,i,r,e,o,u,s,a,f,h,c;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:t=ly(this.cache),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=12;break}if(i=n.value,r=cy(i,2),e=r[0],o=r[1],!1!==this._deleteIfExpired(e,o)){l.next=10;break}return l.next=10,[e,o.value];case 10:l.next=3;break;case 12:l.next=17;break;case 14:l.prev=14,l.t0=l.catch(1),t.e(l.t0);case 17:return l.prev=17,t.f(),l.finish(17);case 20:u=ly(this.oldCache),l.prev=21,u.s();case 23:if((s=u.n()).done){l.next=33;break}if(a=s.value,f=cy(a,2),h=f[0],c=f[1],this.cache.has(h)){l.next=31;break}if(!1!==this._deleteIfExpired(h,c)){l.next=31;break}return l.next=31,[h,c.value];case 31:l.next=23;break;case 33:l.next=38;break;case 35:l.prev=35,l.t1=l.catch(21),u.e(l.t1);case 38:return l.prev=38,u.f(),l.finish(38);case 41:case"end":return l.stop()}}),o,this,[[1,14,17,20],[21,35,38,41]])}))},{key:"entriesDescending",value:regeneratorRuntime.mark((function t(){var n,i,r,e,o,u,s,a,f,h,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=hy(this.cache),i=n.length-1;case 2:if(!(i>=0)){t.next=12;break}if(r=n[i],e=cy(r,2),o=e[0],u=e[1],!1!==this._deleteIfExpired(o,u)){t.next=9;break}return t.next=9,[o,u.value];case 9:--i,t.next=2;break;case 12:n=hy(this.oldCache),s=n.length-1;case 14:if(!(s>=0)){t.next=25;break}if(a=n[s],f=cy(a,2),h=f[0],c=f[1],this.cache.has(h)){t.next=22;break}if(!1!==this._deleteIfExpired(h,c)){t.next=22;break}return t.next=22,[h,c.value];case 22:--s,t.next=14;break;case 25:case"end":return t.stop()}}),t,this)}))},{key:"entriesAscending",value:regeneratorRuntime.mark((function t(){var n,i,r,e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ly(this._entriesAscending()),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=9;break}return r=cy(i.value,2),e=r[0],o=r[1],t.next=7,[e,o.value];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"size",get:function(){if(!this._size)return this.oldCache.size;var t,n=0,i=ly(this.oldCache.keys());try{for(i.s();!(t=i.n()).done;){var r=t.value;this.cache.has(r)||n++}}catch(t){i.e(t)}finally{i.f()}return Math.min(this._size+n,this.maxSize)}},{key:"entries",value:function(){return this.entriesAscending()}},{key:"forEach",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=ly(this.entriesAscending());try{for(r.s();!(n=r.n()).done;){var e=cy(n.value,2),o=e[0],u=e[1];t.call(i,u,o,this)}}catch(t){r.e(t)}finally{r.f()}}},{key:i,get:function(){return JSON.stringify(hy(this.entriesAscending()))}}])&&yy(o.prototype,u),s&&yy(o,s),Object.defineProperty(o,"prototype",{writable:!1}),f}(wy(Map),Symbol.iterator,Symbol.toStringTag);function Sy(t){return(Sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oy(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jy(t,n,i){return n&&Oy(t.prototype,n),i&&Oy(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ey(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function ky(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Ny(t,n)}function Ay(t){var n=Iy();return function(){var i,r=zy(t);if(n){var e=zy(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Ty(this,i)}}function Ty(t,n){if(n&&("object"===Sy(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Cy(t)}function Cy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Py(t){var n="function"==typeof Map?new Map:void 0;return(Py=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return Ry(t,arguments,zy(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ny(r,t)})(t)}function Ry(t,n,i){return(Ry=Iy()?Reflect.construct:function(t,n,i){var r=[null];r.push.apply(r,n);var e=new(Function.bind.apply(t,r));return i&&Ny(e,i.prototype),e}).apply(null,arguments)}function Iy(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Ny(t,n){return(Ny=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function zy(t){return(zy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fy(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function Ly(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){Fy(o,r,e,u,s,"next",t)}function s(t){Fy(o,r,e,u,s,"throw",t)}u(void 0)}))}}function Gy(t){return Dy.apply(this,arguments)}function Dy(){return(Dy=Ly(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,n)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function By(t,n){var i=Array.isArray(t)?t:Array.from(t),r=Array.isArray(n)?n:Array.from(n);return i.map((function(t,n){return[t,r[n]]}))}var Uy=function(t){ky(i,t);var n=Ay(i);function i(t){var r;return Ey(this,i),r=n.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(Cy(r),i),r.name="AbortError",r}return jy(i)}(Py(Error)),qy=function(t){ky(i,t);var n=Ay(i);function i(t,r){var e;return Ey(this,i),(e=n.call(this,r)).errors=t,e.message=r,e.name="AggregateError",e}return jy(i)}(Py(Error));function Vy(t){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wy(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(!t)return;if("string"==typeof t)return Xy(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xy(t,n)}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==i.return||i.return()}finally{if(s)throw o}}}}function Xy(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function Hy(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function Ky(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){Hy(o,r,e,u,s,"next",t)}function s(t){Hy(o,r,e,u,s,"throw",t)}u(void 0)}))}}function Yy(t,n){return(Yy=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Zy(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=$y(t);if(n){var e=$y(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Jy(this,i)}}function Jy(t,n){if(n&&("object"===Vy(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $y(t){return($y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qy(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function tm(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nm(t,n,i){return n&&tm(t.prototype,n),i&&tm(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var im=function(){function t(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Qy(this,t),this.offset=n,this.length=i,this.data=r}return nm(t,[{key:"top",get:function(){return this.offset+this.length}}]),t}(),rm=nm((function t(n,i,r){Qy(this,t),this.offset=n,this.length=i,this.blockIds=r})),em=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Yy(t,n)}(r,t);var n,i=Zy(r);function r(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.blockSize,u=void 0===o?65536:o,s=e.cacheSize,a=void 0===s?100:s;return Qy(this,r),(n=i.call(this)).source=t,n.blockSize=u,n.blockCache=new _y({maxSize:a}),n.blockRequests=new Map,n.blockIdsToFetch=new Set,n.abortedBlockIds=new Set,n}return nm(r,[{key:"fileSize",get:function(){return this.source.fileSize}},{key:"fetch",value:(n=Ky(regeneratorRuntime.mark((function t(n,i){var r,e,o,u,s,a,f,h,c,l,v,d,p,y,m,w,b,g,x,M,_,S,O,j,E,k,A=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],e=[],o=[],u=Wy(n);try{for(u.s();!(s=u.n()).done;)for(a=s.value,f=a.offset,h=a.length,c=f+h,null!==(l=this.fileSize)&&(c=Math.min(c,l)),v=Math.floor(f/this.blockSize)*this.blockSize,d=v;d<c;d+=this.blockSize)p=Math.floor(d/this.blockSize),this.blockCache.has(p)||this.blockRequests.has(p)||(this.blockIdsToFetch.add(p),e.push(p)),this.blockRequests.has(p)&&r.push(this.blockRequests.get(p)),o.push(p)}catch(t){u.e(t)}finally{u.f()}return t.next=7,Gy();case 7:for(this.fetchBlocks(i),y=[],m=0,w=e;m<w.length;m++)b=w[m],this.blockRequests.has(b)&&y.push(this.blockRequests.get(b));return t.next=12,Promise.allSettled(r);case 12:return t.next=14,Promise.allSettled(y);case 14:if(g=[],(x=o.filter((function(t){return A.abortedBlockIds.has(t)||!A.blockCache.has(t)}))).forEach((function(t){return A.blockIdsToFetch.add(t)})),!(x.length>0&&i)||i.aborted){t.next=40;break}this.fetchBlocks(null),M=Wy(x),t.prev=20,M.s();case 22:if((_=M.n()).done){t.next=30;break}if(S=_.value,O=this.blockRequests.get(S)){t.next=27;break}throw new Error("Block ".concat(S," is not in the block requests"));case 27:g.push(O);case 28:t.next=22;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(20),M.e(t.t0);case 35:return t.prev=35,M.f(),t.finish(35);case 38:return t.next=40,Promise.allSettled(g);case 40:if(!i||!i.aborted){t.next=42;break}throw new Uy("Request was aborted");case 42:if(j=o.map((function(t){return A.blockCache.get(t)})),!(E=j.filter((function(t){return!t}))).length){t.next=46;break}throw new qy(E,"Request failed");case 46:return k=new Map(By(o,j)),t.abrupt("return",this.readSliceData(n,k));case 48:case"end":return t.stop()}}),t,this,[[20,32,35,38]])}))),function(t,i){return n.apply(this,arguments)})},{key:"fetchBlocks",value:function(t){var n=this;this.blockIdsToFetch.size>0&&function(){for(var i=n.groupBlocks(n.blockIdsToFetch),r=n.source.fetch(i,t),e=function(e){var o,u=Wy(i[e].blockIds);try{var s=function(){var i=o.value;n.blockRequests.set(i,Ky(regeneratorRuntime.mark((function o(){var u,s,a,f,h,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r;case 3:o.t0=e,u=o.sent[o.t0],s=i*n.blockSize,a=s-u.offset,f=Math.min(a+n.blockSize,u.data.byteLength),h=u.data.slice(a,f),c=new im(s,h.byteLength,h,i),n.blockCache.set(i,c),n.abortedBlockIds.delete(i),o.next=23;break;case 14:if(o.prev=14,o.t1=o.catch(0),"AbortError"!==o.t1.name){o.next=22;break}o.t1.signal=t,n.blockCache.delete(i),n.abortedBlockIds.add(i),o.next=23;break;case 22:throw o.t1;case 23:return o.prev=23,n.blockRequests.delete(i),o.finish(23);case 26:case"end":return o.stop()}}),o,null,[[0,14,23,26]])})))())};for(u.s();!(o=u.n()).done;)s()}catch(t){u.e(t)}finally{u.f()}},o=0;o<i.length;++o)e(o);n.blockIdsToFetch.clear()}()}},{key:"groupBlocks",value:function(t){var n=Array.from(t).sort((function(t,n){return t-n}));if(0===n.length)return[];var i,r=[],e=null,o=[],u=Wy(n);try{for(u.s();!(i=u.n()).done;){var s=i.value;null===e||e+1===s?(r.push(s),e=s):(o.push(new rm(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],e=s)}}catch(t){u.e(t)}finally{u.f()}return o.push(new rm(r[0]*this.blockSize,r.length*this.blockSize,r)),o}},{key:"readSliceData",value:function(t,n){var i=this;return t.map((function(t){var r=t.offset+t.length;null!==i.fileSize&&(r=Math.min(i.fileSize,r));for(var e=Math.floor(t.offset/i.blockSize),o=Math.floor(r/i.blockSize),u=new ArrayBuffer(t.length),s=new Uint8Array(u),a=e;a<=o;++a){var f=n.get(a),h=f.offset-t.offset,c=0,l=0,v=void 0;h<0?c=-h:h>0&&(l=h),v=f.top-r<0?f.length-c:r-f.offset-c;var d=new Uint8Array(f.data,c,v);s.set(d,l)}return u}))}}]),r}(ay);function om(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function um(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){om(o,r,e,u,s,"next",t)}function s(t){om(o,r,e,u,s,"throw",t)}u(void 0)}))}}function sm(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function am(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fm(t,n,i){return n&&am(t.prototype,n),i&&am(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var hm=function(){function t(){sm(this,t)}var n;return fm(t,[{key:"ok",get:function(){return this.status>=200&&this.status<=299}},{key:"status",get:function(){throw new Error("not implemented")}},{key:"getHeader",value:function(t){throw new Error("not implemented")}},{key:"getData",value:(n=um(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("not implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}]),t}(),cm=function(){function t(n){sm(this,t),this.url=n}var n;return fm(t,[{key:"request",value:(n=um(regeneratorRuntime.mark((function t(){var n,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw(n=i.length>0&&void 0!==i[0]?i[0]:{}).headers,n.credentials,n.signal,new Error("request is not implemented");case 2:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}]),t}();function lm(t){return(lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vm(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function dm(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){vm(o,r,e,u,s,"next",t)}function s(t){vm(o,r,e,u,s,"throw",t)}u(void 0)}))}}function pm(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function ym(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mm(t,n,i){return n&&ym(t.prototype,n),i&&ym(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function wm(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&bm(t,n)}function bm(t,n){return(bm=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function gm(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=Mm(t);if(n){var e=Mm(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return xm(this,i)}}function xm(t,n){if(n&&("object"===lm(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mm(t){return(Mm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _m=function(t){wm(r,t);var n,i=gm(r);function r(t){var n;return pm(this,r),(n=i.call(this)).response=t,n}return mm(r,[{key:"status",get:function(){return this.response.status}},{key:"getHeader",value:function(t){return this.response.headers.get(t)}},{key:"getData",value:(n=dm(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.response.arrayBuffer){t.next=6;break}return t.next=3,this.response.arrayBuffer();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.response.buffer();case 8:t.t0=t.sent.buffer;case 9:return n=t.t0,t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),r}(hm),Sm=function(t){wm(r,t);var n,i=gm(r);function r(t,n){var e;return pm(this,r),(e=i.call(this,t)).credentials=n,e}return mm(r,[{key:"request",value:(n=dm(regeneratorRuntime.mark((function t(){var n,i,r,e,o,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:{},i=n.headers,r=n.credentials,e=n.signal,t.next=3,fetch(this.url,{headers:i,credentials:r,signal:e});case 3:return o=t.sent,t.abrupt("return",new _m(o));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),r}(cm);function Om(t){return(Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jm(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,s=!1;try{for(i=i.call(t);!(u=(r=i.next()).done)&&(o.push(r.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==i.return||i.return()}finally{if(s)throw e}}return o}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return Em(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Em(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Em(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function km(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function Am(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){km(o,r,e,u,s,"next",t)}function s(t){km(o,r,e,u,s,"throw",t)}u(void 0)}))}}function Tm(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Cm(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pm(t,n,i){return n&&Cm(t.prototype,n),i&&Cm(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rm(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Im(t,n)}function Im(t,n){return(Im=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Nm(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=Fm(t);if(n){var e=Fm(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return zm(this,i)}}function zm(t,n){if(n&&("object"===Om(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Fm(t){return(Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lm=function(t){Rm(r,t);var n,i=Nm(r);function r(t,n){var e;return Tm(this,r),(e=i.call(this)).xhr=t,e.data=n,e}return Pm(r,[{key:"status",get:function(){return this.xhr.status}},{key:"getHeader",value:function(t){return this.xhr.getResponseHeader(t)}},{key:"getData",value:(n=Am(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.data);case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),r}(hm),Gm=function(t){Rm(r,t);var n,i=Nm(r);function r(){return Tm(this,r),i.apply(this,arguments)}return Pm(r,[{key:"constructRequest",value:function(t,n){var i=this;return new Promise((function(r,e){var o=new XMLHttpRequest;o.open("GET",i.url),o.responseType="arraybuffer";for(var u=0,s=Object.entries(t);u<s.length;u++){var a=jm(s[u],2),f=a[0],h=a[1];o.setRequestHeader(f,h)}o.onload=function(){var t=o.response;r(new Lm(o,t))},o.onerror=e,o.onabort=function(){return e(new Uy("Request aborted"))},o.send(),n&&(n.aborted&&o.abort(),n.addEventListener("abort",(function(){return o.abort()})))}))}},{key:"request",value:(n=Am(regeneratorRuntime.mark((function t(){var n,i,r,e,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},i=n.headers,r=n.signal,t.next=3,this.constructRequest(i,r);case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),r}(cm),Dm=i(752),Bm=i(640),Um=i(630);function qm(t){return(qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vm(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,r)}return i}function Wm(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Vm(Object(i),!0).forEach((function(n){Xm(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Vm(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function Xm(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function Hm(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function Km(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){Hm(o,r,e,u,s,"next",t)}function s(t){Hm(o,r,e,u,s,"throw",t)}u(void 0)}))}}function Ym(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Zm(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jm(t,n,i){return n&&Zm(t.prototype,n),i&&Zm(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function $m(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Qm(t,n)}function Qm(t,n){return(Qm=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function tw(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=iw(t);if(n){var e=iw(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return nw(this,i)}}function nw(t,n){if(n&&("object"===qm(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function iw(t){return(iw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rw=function(t){$m(r,t);var n,i=tw(r);function r(t,n){var e;return Ym(this,r),(e=i.call(this)).response=t,e.dataPromise=n,e}return Jm(r,[{key:"status",get:function(){return this.response.statusCode}},{key:"getHeader",value:function(t){return this.response.headers[t]}},{key:"getData",value:(n=Km(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dataPromise;case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),r}(hm),ew=function(t){$m(r,t);var n,i=tw(r);function r(t){var n;return Ym(this,r),(n=i.call(this,t)).parsedUrl=Um.parse(n.url),n.httpApi="http:"===n.parsedUrl.protocol?Dm:Bm,n}return Jm(r,[{key:"constructRequest",value:function(t,n){var i=this;return new Promise((function(r,e){var o=i.httpApi.get(Wm(Wm({},i.parsedUrl),{},{headers:t}),(function(t){var n=new Promise((function(n){var i=[];t.on("data",(function(t){i.push(t)})),t.on("end",(function(){var t=Buffer.concat(i).buffer;n(t)})),t.on("error",e)}));r(new rw(t,n))}));o.on("error",e),n&&(n.aborted&&o.destroy(new Uy("Request aborted")),n.addEventListener("abort",(function(){return o.destroy(new Uy("Request aborted"))})))}))}},{key:"request",value:(n=Km(regeneratorRuntime.mark((function t(){var n,i,r,e,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},i=n.headers,r=n.signal,t.next=3,this.constructRequest(i,r);case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),r}(cm);function ow(t){return(ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var uw=["headers","credentials","maxRanges","allowFullFile"],sw=["headers","maxRanges","allowFullFile"],aw=["headers","maxRanges","allowFullFile"],fw=["forceXHR"];function hw(t,n){if(null==t)return{};var i,r,e=function(t,n){if(null==t)return{};var i,r,e={},o=Object.keys(t);for(r=0;r<o.length;r++)i=o[r],n.indexOf(i)>=0||(e[i]=t[i]);return e}(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(e[i]=t[i])}return e}function cw(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,r)}return i}function lw(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?cw(Object(i),!0).forEach((function(n){vw(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):cw(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function vw(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function dw(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function pw(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){dw(o,r,e,u,s,"next",t)}function s(t){dw(o,r,e,u,s,"throw",t)}u(void 0)}))}}function yw(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mw(t,n){return(mw=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function ww(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=gw(t);if(n){var e=gw(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return bw(this,i)}}function bw(t,n){if(n&&("object"===ow(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function gw(t){return(gw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xw=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&mw(t,n)}(a,t);var n,i,r,e,o,u,s=ww(a);function a(t,n,i,r){var e;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a),(e=s.call(this)).client=t,e.headers=n,e.maxRanges=i,e.allowFullFile=r,e._fileSize=null,e}return n=a,(i=[{key:"fetch",value:(u=pw(regeneratorRuntime.mark((function t(n,i){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.maxRanges>=n.length)){t.next=4;break}return t.abrupt("return",this.fetchSlices(n,i));case 4:this.maxRanges>0&&n.length;case 5:return t.abrupt("return",Promise.all(n.map((function(t){return r.fetchSlice(t,i)}))));case 6:case"end":return t.stop()}}),t,this)}))),function(t,n){return u.apply(this,arguments)})},{key:"fetchSlices",value:(o=pw(regeneratorRuntime.mark((function t(n,i){var r,e,o,u,s,a,f,h,c,l,v,d,p=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.request({headers:lw(lw({},this.headers),{},{Range:"bytes=".concat(n.map((function(t){var n=t.offset,i=t.length;return"".concat(n,"-").concat(n+i)})).join(","))}),signal:i});case 2:if((r=t.sent).ok){t.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==r.status){t.next=32;break}if(y=r.getHeader("content-type"),m=void 0,m=Kp(y.split(";").map((function(t){return t.trim()}))),e={type:m[0],params:ny(m.slice(1).map((function(t){return t.split("=")})))},o=e.params,"multipart/byteranges"!==e.type){t.next=18;break}return t.t0=ey,t.next=13,r.getData();case 13:return t.t1=t.sent,t.t2=o.boundary,u=(0,t.t0)(t.t1,t.t2),this._fileSize=u[0].fileSize||null,t.abrupt("return",u);case 18:return t.next=20,r.getData();case 20:if(s=t.sent,a=ry(r.getHeader("content-range")),f=a.start,h=a.end,c=a.total,this._fileSize=c||null,l=[{data:s,offset:f,length:h-f}],!(n.length>1)){t.next=29;break}return t.next=27,Promise.all(n.slice(1).map((function(t){return p.fetchSlice(t,i)})));case 27:return v=t.sent,t.abrupt("return",l.concat(v));case 29:return t.abrupt("return",l);case 32:if(this.allowFullFile){t.next=34;break}throw new Error("Server responded with full file");case 34:return t.next=36,r.getData();case 36:return d=t.sent,this._fileSize=d.byteLength,t.abrupt("return",[{data:d,offset:0,length:d.byteLength}]);case 39:case"end":return t.stop()}var y,m}),t,this)}))),function(t,n){return o.apply(this,arguments)})},{key:"fetchSlice",value:(e=pw(regeneratorRuntime.mark((function t(n,i){var r,e,o,u,s,a,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.offset,e=n.length,t.next=3,this.client.request({headers:lw(lw({},this.headers),{},{Range:"bytes=".concat(r,"-").concat(r+e)}),signal:i});case 3:if((o=t.sent).ok){t.next=8;break}throw new Error("Error fetching data.");case 8:if(206!==o.status){t.next=17;break}return t.next=11,o.getData();case 11:return u=t.sent,s=ry(o.getHeader("content-range")),a=s.total,this._fileSize=a||null,t.abrupt("return",{data:u,offset:r,length:e});case 17:if(this.allowFullFile){t.next=19;break}throw new Error("Server responded with full file");case 19:return t.next=21,o.getData();case 21:return f=t.sent,this._fileSize=f.byteLength,t.abrupt("return",{data:f,offset:0,length:f.byteLength});case 24:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"fileSize",get:function(){return this._fileSize}}])&&yw(n.prototype,i),r&&yw(n,r),Object.defineProperty(n,"prototype",{writable:!1}),a}(ay);function Mw(t,n){var i=n.blockSize,r=n.cacheSize;return null===i?t:new em(t,{blockSize:i,cacheSize:r})}function _w(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.headers,r=void 0===i?{}:i,e=n.credentials,o=n.maxRanges,u=void 0===o?0:o,s=n.allowFullFile,a=void 0!==s&&s,f=hw(n,uw),h=new Sm(t,e),c=new xw(h,r,u,a);return Mw(c,f)}function Sw(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.headers,r=void 0===i?{}:i,e=n.maxRanges,o=void 0===e?0:e,u=n.allowFullFile,s=void 0!==u&&u,a=hw(n,sw),f=new Gm(t),h=new xw(f,r,o,s);return Mw(h,a)}function Ow(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.headers,r=void 0===i?{}:i,e=n.maxRanges,o=void 0===e?0:e,u=n.allowFullFile,s=void 0!==u&&u,a=hw(n,aw),f=new ew(t),h=new xw(f,r,o,s);return Mw(h,a)}function jw(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.forceXHR,r=void 0!==i&&i,e=hw(n,fw);return"function"!=typeof fetch||r?"undefined"!=typeof XMLHttpRequest?Sw(t,e):Ow(t,e):_w(t,e)}function Ew(t){return(Ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kw(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,r)}return i}function Aw(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?kw(Object(i),!0).forEach((function(n){Tw(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):kw(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function Tw(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function Cw(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,s=!1;try{for(i=i.call(t);!(u=(r=i.next()).done)&&(o.push(r.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==i.return||i.return()}finally{if(s)throw e}}return o}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return Pw(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pw(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pw(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function Rw(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function Iw(t){return function(){var n=this,i=arguments;return new Promise((function(r,e){var o=t.apply(n,i);function u(t){Rw(o,r,e,u,s,"next",t)}function s(t){Rw(o,r,e,u,s,"throw",t)}u(void 0)}))}}function Nw(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Bw(t,n)}function zw(t){var n=Dw();return function(){var i,r=Uw(t);if(n){var e=Uw(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Fw(this,i)}}function Fw(t,n){if(n&&("object"===Ew(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Lw(t){var n="function"==typeof Map?new Map:void 0;return(Lw=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return Gw(t,arguments,Uw(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Bw(r,t)})(t)}function Gw(t,n,i){return(Gw=Dw()?Reflect.construct:function(t,n,i){var r=[null];r.push.apply(r,n);var e=new(Function.bind.apply(t,r));return i&&Bw(e,i.prototype),e}).apply(null,arguments)}function Dw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Bw(t,n){return(Bw=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Uw(t){return(Uw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qw(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vw(t,n,i){return n&&qw(t.prototype,n),i&&qw(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ww(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Xw(t){switch(t){case vp.sf.BYTE:case vp.sf.ASCII:case vp.sf.SBYTE:case vp.sf.UNDEFINED:return 1;case vp.sf.SHORT:case vp.sf.SSHORT:return 2;case vp.sf.LONG:case vp.sf.SLONG:case vp.sf.FLOAT:case vp.sf.IFD:return 4;case vp.sf.RATIONAL:case vp.sf.SRATIONAL:case vp.sf.DOUBLE:case vp.sf.LONG8:case vp.sf.SLONG8:case vp.sf.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(t))}}function Hw(t){var n=t.GeoKeyDirectory;if(!n)return null;for(var i={},r=4;r<=4*n[3];r+=4){var e=vp.P1[n[r]],o=n[r+1]?vp.L[n[r+1]]:null,u=n[r+2],s=n[r+3],a=null;if(o){if(null==(a=t[o]))throw new Error("Could not get value of geoKey '".concat(e,"'."));"string"==typeof a?a=a.substring(s,s+u-1):a.subarray&&(a=a.subarray(s,s+u),1===u&&(a=a[0]))}else a=s;i[e]=a}return i}function Kw(t,n,i,r){var e=null,o=null,u=Xw(n);switch(n){case vp.sf.BYTE:case vp.sf.ASCII:case vp.sf.UNDEFINED:e=new Uint8Array(i),o=t.readUint8;break;case vp.sf.SBYTE:e=new Int8Array(i),o=t.readInt8;break;case vp.sf.SHORT:e=new Uint16Array(i),o=t.readUint16;break;case vp.sf.SSHORT:e=new Int16Array(i),o=t.readInt16;break;case vp.sf.LONG:case vp.sf.IFD:e=new Uint32Array(i),o=t.readUint32;break;case vp.sf.SLONG:e=new Int32Array(i),o=t.readInt32;break;case vp.sf.LONG8:case vp.sf.IFD8:e=new Array(i),o=t.readUint64;break;case vp.sf.SLONG8:e=new Array(i),o=t.readInt64;break;case vp.sf.RATIONAL:e=new Uint32Array(2*i),o=t.readUint32;break;case vp.sf.SRATIONAL:e=new Int32Array(2*i),o=t.readInt32;break;case vp.sf.FLOAT:e=new Float32Array(i),o=t.readFloat32;break;case vp.sf.DOUBLE:e=new Float64Array(i),o=t.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(n))}if(n!==vp.sf.RATIONAL&&n!==vp.sf.SRATIONAL)for(var s=0;s<i;++s)e[s]=o.call(t,r+s*u);else for(var a=0;a<i;a+=2)e[a]=o.call(t,r+a*u),e[a+1]=o.call(t,r+(a*u+4));return n===vp.sf.ASCII?new TextDecoder("utf-8").decode(e):e}var Yw=Vw((function t(n,i,r){Ww(this,t),this.fileDirectory=n,this.geoKeyDirectory=i,this.nextIFDByteOffset=r})),Zw=function(t){Nw(i,t);var n=zw(i);function i(t){var r;return Ww(this,i),(r=n.call(this,"No image at index ".concat(t))).index=t,r}return Vw(i)}(Lw(Error)),Jw=function(){function t(){Ww(this,t)}var n;return Vw(t,[{key:"readRasters",value:(n=Iw(regeneratorRuntime.mark((function t(){var n,i,r,e,o,u,s,a,f,h,c,l,v,d,p,y,m,w,b,g,x,M,_,S,O,j,E,k,A,T,C,P,R,I,N,z,F,L,G,D=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=D.length>0&&void 0!==D[0]?D[0]:{},i=n.window,r=n.width,e=n.height,o=n.resX,u=n.resY,s=n.bbox,t.next=5,this.getImage();case 5:return a=t.sent,f=a,t.next=9,this.getImageCount();case 9:if(h=t.sent,c=a.getBoundingBox(),!i||!s){t.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!r&&!e){t.next=24;break}if(i&&(l=a.getOrigin(),v=Cw(l,2),d=v[0],p=v[1],y=a.getResolution(),m=Cw(y,2),w=m[0],b=m[1],s=[d+i[0]*w,p+i[1]*b,d+i[2]*w,p+i[3]*b]),g=s||c,!r){t.next=20;break}if(!o){t.next=19;break}throw new Error("Both width and resX passed");case 19:o=(g[2]-g[0])/r;case 20:if(!e){t.next=24;break}if(!u){t.next=23;break}throw new Error("Both width and resY passed");case 23:u=(g[3]-g[1])/e;case 24:if(!o&&!u){t.next=48;break}x=[],M=0;case 27:if(!(M<h)){t.next=36;break}return t.next=30,this.getImage(M);case 30:_=t.sent,S=_.fileDirectory,O=S.SubfileType,j=S.NewSubfileType,(0===M||2===O||1&j)&&x.push(_);case 33:++M,t.next=27;break;case 36:x.sort((function(t,n){return t.getWidth()-n.getWidth()})),E=0;case 38:if(!(E<x.length)){t.next=48;break}if(k=x[E],A=(c[2]-c[0])/k.getWidth(),T=(c[3]-c[1])/k.getHeight(),f=k,!(o&&o>A||u&&u>T)){t.next=45;break}return t.abrupt("break",48);case 45:++E,t.next=38;break;case 48:return C=i,s&&(P=a.getOrigin(),R=Cw(P,2),I=R[0],N=R[1],z=f.getResolution(a),F=Cw(z,2),L=F[0],G=F[1],C=[Math.round((s[0]-I)/L),Math.round((s[1]-N)/G),Math.round((s[2]-I)/L),Math.round((s[3]-N)/G)],C=[Math.min(C[0],C[2]),Math.min(C[1],C[3]),Math.max(C[0],C[2]),Math.max(C[1],C[3])]),t.abrupt("return",f.readRasters(Aw(Aw({},n),{},{window:C})));case 51:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),t}(),$w=function(t){Nw(f,t);var n,i,r,e,o,u,s,a=zw(f);function f(t,n,i,r){var e,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Ww(this,f),(e=a.call(this)).source=t,e.littleEndian=n,e.bigTiff=i,e.firstIFDOffset=r,e.cache=o.cache||!1,e.ifdRequests=[],e.ghostValues=null,e}return Vw(f,[{key:"getSlice",value:(s=Iw(regeneratorRuntime.mark((function t(n,i){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.bigTiff?4048:1024,t.t0=Hp,t.next=4,this.source.fetch([{offset:n,length:void 0!==i?i:r}]);case 4:return t.t1=t.sent[0],t.t2=n,t.t3=this.littleEndian,t.t4=this.bigTiff,t.abrupt("return",new t.t0(t.t1,t.t2,t.t3,t.t4));case 9:case"end":return t.stop()}}),t,this)}))),function(t,n){return s.apply(this,arguments)})},{key:"parseFileDirectoryAt",value:(u=Iw(regeneratorRuntime.mark((function t(n){var i,r,e,o,u,s,a,f,h,c,l,v,d,p,y,m,w,b,g,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.bigTiff?20:12,r=this.bigTiff?8:2,t.next=4,this.getSlice(n);case 4:if(e=t.sent,o=this.bigTiff?e.readUint64(n):e.readUint16(n),u=o*i+(this.bigTiff?16:6),e.covers(n,u)){t.next=11;break}return t.next=10,this.getSlice(n,u);case 10:e=t.sent;case 11:s={},a=n+(this.bigTiff?8:2),f=0;case 14:if(!(f<o)){t.next=41;break}if(h=e.readUint16(a),c=e.readUint16(a+2),l=this.bigTiff?e.readUint64(a+4):e.readUint32(a+4),v=void 0,d=void 0,p=Xw(c),y=a+(this.bigTiff?12:8),!(p*l<=(this.bigTiff?8:4))){t.next=26;break}v=Kw(e,c,l,y),t.next=36;break;case 26:if(m=e.readOffset(y),w=Xw(c)*l,!e.covers(m,w)){t.next=32;break}v=Kw(e,c,l,m),t.next=36;break;case 32:return t.next=34,this.getSlice(m,w);case 34:b=t.sent,v=Kw(b,c,l,m);case 36:d=1===l&&-1===vp.It.indexOf(h)&&c!==vp.sf.RATIONAL&&c!==vp.sf.SRATIONAL?v[0]:v,s[vp.L[h]]=d;case 38:a+=i,++f,t.next=14;break;case 41:return g=Hw(s),x=e.readOffset(n+r+i*o),t.abrupt("return",new Yw(s,g,x));case 44:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"requestIFD",value:(o=Iw(regeneratorRuntime.mark((function t(n){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.ifdRequests[n]){t.next=4;break}return t.abrupt("return",this.ifdRequests[n]);case 4:if(0!==n){t.next=9;break}return this.ifdRequests[n]=this.parseFileDirectoryAt(this.firstIFDOffset),t.abrupt("return",this.ifdRequests[n]);case 9:if(this.ifdRequests[n-1]){t.next=19;break}t.prev=10,this.ifdRequests[n-1]=this.requestIFD(n-1),t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(10),!(t.t0 instanceof Zw)){t.next=18;break}throw new Zw(n);case 18:throw t.t0;case 19:return this.ifdRequests[n]=Iw(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.ifdRequests[n-1];case 2:if(0!==(r=t.sent).nextIFDByteOffset){t.next=5;break}throw new Zw(n);case 5:return t.abrupt("return",i.parseFileDirectoryAt(r.nextIFDByteOffset));case 6:case"end":return t.stop()}}),t)})))(),t.abrupt("return",this.ifdRequests[n]);case 21:case"end":return t.stop()}}),t,this,[[10,14]])}))),function(t){return o.apply(this,arguments)})},{key:"getImage",value:(e=Iw(regeneratorRuntime.mark((function t(){var n,i,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:0,t.next=3,this.requestIFD(n);case 3:return i=t.sent,t.abrupt("return",new qp(i.fileDirectory,i.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getImageCount",value:(r=Iw(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,i=!0;case 2:if(!i){t.next=18;break}return t.prev=3,t.next=6,this.requestIFD(n);case 6:++n,t.next=16;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(t.t0 instanceof Zw)){t.next=15;break}i=!1,t.next=16;break;case 15:throw t.t0;case 16:t.next=2;break;case 18:return t.abrupt("return",n);case 19:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(){return r.apply(this,arguments)})},{key:"getGhostValues",value:(i=Iw(regeneratorRuntime.mark((function t(){var n,i,r,e,o,u,s,a,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.bigTiff?16:8,!this.ghostValues){t.next=3;break}return t.abrupt("return",this.ghostValues);case 3:return r=(i="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,t.next=7,this.getSlice(n,r);case 7:if(e=t.sent,i!==Kw(e,vp.sf.ASCII,i.length,n)){t.next=19;break}if(o=Kw(e,vp.sf.ASCII,r,n),u=o.split("\n")[0],!((s=Number(u.split("=")[1].split(" ")[0])+u.length)>r)){t.next=16;break}return t.next=15,this.getSlice(n,s);case 15:e=t.sent;case 16:a=Kw(e,vp.sf.ASCII,s,n),this.ghostValues={},a.split("\n").filter((function(t){return t.length>0})).map((function(t){return t.split("=")})).forEach((function(t){var n=Cw(t,2),i=n[0],r=n[1];f.ghostValues[i]=r}));case 19:return t.abrupt("return",this.ghostValues);case 20:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:(n=Iw(regeneratorRuntime.mark((function t(n,i,r){var e,o,u,s,a,h,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.fetch([{offset:0,length:1024}],r);case 2:if(e=t.sent[0],o=new Wp(e),18761!==(u=o.getUint16(0,0))){t.next=9;break}s=!0,t.next=14;break;case 9:if(19789!==u){t.next=13;break}s=!1,t.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(a=o.getUint16(2,s))){t.next=19;break}h=!1,t.next=27;break;case 19:if(43!==a){t.next=26;break}if(h=!0,8===o.getUint16(4,s)){t.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:t.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return c=h?o.getUint64(8,s):o.getUint32(4,s),t.abrupt("return",new f(n,s,h,c,i));case 29:case"end":return t.stop()}}),t)}))),function(t,i,r){return n.apply(this,arguments)})}]),f}(Jw),Qw=function(t){Nw(o,t);var n,i,r,e=zw(o);function o(t,n){var i;return Ww(this,o),(i=e.call(this)).mainFile=t,i.overviewFiles=n,i.imageFiles=[t].concat(n),i.fileDirectoriesPerFile=null,i.fileDirectoriesPerFileParsing=null,i.imageCount=null,i}return Vw(o,[{key:"parseFileDirectoriesPerFile",value:(r=Iw(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((function(t){return t.parseFileDirectoryAt(t.firstIFDOffset)}))),t.next=3,Promise.all(n);case 3:return this.fileDirectoriesPerFile=t.sent,t.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getImage",value:(i=Iw(regeneratorRuntime.mark((function t(){var n,i,r,e,o,u,s,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:0,t.next=3,this.getImageCount();case 3:return t.next=5,this.parseFileDirectoriesPerFile();case 5:i=0,r=0,e=0;case 8:if(!(e<this.imageFiles.length)){t.next=26;break}o=this.imageFiles[e],u=0;case 11:if(!(u<this.imageCounts[e])){t.next=22;break}if(n!==i){t.next=17;break}return t.next=15,o.requestIFD(r);case 15:return s=t.sent,t.abrupt("return",new qp(s.fileDirectory,s.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source));case 17:i++,r++;case 19:u++,t.next=11;break;case 22:r=0;case 23:e++,t.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getImageCount",value:(n=Iw(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this.imageCount){t.next=2;break}return t.abrupt("return",this.imageCount);case 2:return n=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((function(t){return t.getImageCount()}))),t.next=5,Promise.all(n);case 5:return this.imageCounts=t.sent,this.imageCount=this.imageCounts.reduce((function(t,n){return t+n}),0),t.abrupt("return",this.imageCount);case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),o}(Jw);function tb(){return(tb=Iw(regeneratorRuntime.mark((function t(n){var i,r,e=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{},r=e.length>2?e[2]:void 0,t.abrupt("return",$w.fromSource(jw(n,i),r));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nb(){return(nb=Iw(regeneratorRuntime.mark((function t(n){var i,r,e,o,u,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>1&&void 0!==s[1]?s[1]:[],r=s.length>2&&void 0!==s[2]?s[2]:{},e=s.length>3?s[3]:void 0,t.next=5,$w.fromSource(jw(n,r),e);case 5:return o=t.sent,t.next=8,Promise.all(i.map((function(t){return $w.fromSource(jw(t,r))})));case 8:return u=t.sent,t.abrupt("return",new Qw(o,u));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ib(t,n,i,r,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void i(t)}s.done?n(a):Promise.resolve(a).then(r,e)}function rb(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function eb(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ob,ub="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,sb=function(){function t(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ub,e=arguments.length>1?arguments[1]:void 0;rb(this,t),this.workers=null,this._awaitingDecoder=null,this.size=r,this.messageId=0,r&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise((function(t){i.e(231).then(i.bind(i,231)).then((function(n){t(n.create)}))})),this._awaitingDecoder.then((function(t){n._awaitingDecoder=null,n.workers=[];for(var i=0;i<r;i++)n.workers.push({worker:t(),idle:!0})})))}var n,r,e,o,u;return n=t,(r=[{key:"decode",value:(o=regeneratorRuntime.mark((function t(n,i){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._awaitingDecoder){t.next=3;break}return t.next=3,this._awaitingDecoder;case 3:return t.abrupt("return",0===this.size?Sp(n).then((function(t){return t.decode(n,i)})):new Promise((function(t){var e=r.workers.find((function(t){return t.idle}))||r.workers[Math.floor(Math.random()*r.size)];e.idle=!1;var o=r.messageId++;e.worker.addEventListener("message",(function n(i){i.data.id===o&&(e.idle=!0,t(i.data.decoded),e.worker.removeEventListener("message",n))})),e.worker.postMessage({fileDirectory:n,buffer:i,id:o},[i])})));case 4:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,n=arguments;return new Promise((function(i,r){var e=o.apply(t,n);function u(t){ib(e,i,r,u,s,"next",t)}function s(t){ib(e,i,r,u,s,"throw",t)}u(void 0)}))},function(t,n){return u.apply(this,arguments)})},{key:"destroy",value:function(){this.workers&&(this.workers.forEach((function(t){t.worker.terminate()})),this.workers=null)}}])&&eb(n.prototype,r),e&&eb(n,e),Object.defineProperty(n,"prototype",{writable:!1}),t}(),ab=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fb="STATISTICS_MAXIMUM",hb="STATISTICS_MINIMUM";function cb(t){try{return t.getBoundingBox()}catch(i){var n=t.fileDirectory;return[0,0,n.ImageWidth,n.ImageLength]}}function lb(t){try{return t.getOrigin().slice(0,2)}catch(n){return[0,t.fileDirectory.ImageLength]}}function vb(t,n){try{return t.getResolution(n)[0]}catch(i){return n.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth}}function db(t){var n=t.geoKeys;if(!n)return null;if(n.ProjectedCSTypeGeoKey){if(!(r=br(i="EPSG:"+n.ProjectedCSTypeGeoKey)))(e=Nt(n.ProjLinearUnitsGeoKey))&&(r=new si({code:i,units:e}));return r}if(n.GeographicTypeGeoKey){var i,r,e;if(!(r=br(i="EPSG:"+n.GeographicTypeGeoKey)))(e=Nt(n.GeogAngularUnitsGeoKey))&&(r=new si({code:i,units:e}));return r}return null}function pb(t){return t.getImageCount().then((function(n){for(var i=new Array(n),r=0;r<n;++r)i[r]=t.getImage(r);return Promise.all(i)}))}function yb(t,n){return(t.overviews?function(t){return nb.apply(this,arguments)}(t.url,t.overviews,n):function(t){return tb.apply(this,arguments)}(t.url,n)).then(pb)}function mb(t,n,i,r,e){if(Array.isArray(t)){var o=t.length;if(!Array.isArray(n)||o!=n.length){var u=new Error(r);throw e(u),u}for(var s=0;s<o;++s)mb(t[s],n[s],i,r,e)}else if(n=n,Math.abs(t-n)>i*t)throw new Error(r)}function wb(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}var bb=function(t){function n(n){var i=t.call(this,{state:du,tileGrid:null,projection:null,opaque:n.opaque,transition:n.transition,interpolate:!1!==n.interpolate,wrapX:n.wrapX})||this;i.tf=n.sources;var r=i.tf.length;i.nf=n.sourceOptions,i.if=new Array(r),i.rf=new Array(r),i.ef,i.uf,i.af,i.ff=!1!==n.normalize,i.hf=!1,i.V=null,i.cf=n.convertToRGB?"readRGB":"readRasters",i.setKey(i.tf.map((function(t){return t.url})).join(","));for(var e=i,o=new Array(r),u=0;u<r;++u)o[u]=yb(i.tf[u],i.nf);return Promise.all(o).then((function(t){e.lf(t)})).catch((function(t){console.error(t),e.V=t,e.setState(yu)})),i}return ab(n,t),n.prototype.getError=function(){return this.V},n.prototype.lf=function(t){for(var n,i,r,e,o=new Array(t.length),u=new Array(t.length),s=new Array(t.length),a=0,f=t.length,h=function(f){var h=t[f],l=h.length,v=void 0,d=void 0,p=new Array(l),y=new Array(l);u[f]=new Array(l),s[f]=new Array(l);for(var m=0;m<l;++m){var w=h[m],b=w.getGDALNoData();s[f][m]=w.getGDALMetadata(0),u[f][m]=null===b?NaN:b;var g=c.tf[f].bands;o[f]=g?g.length:w.getSamplesPerPixel();var x=l-(m+1);v||(v=cb(w)),d||(d=lb(w)),y[x]=vb(w,h[0]),p[x]=[w.getTileWidth(),w.getTileHeight()]}if(n?Zn(n,v,n):n=v,i){var M="Origin mismatch for source ".concat(f,", got [").concat(d,"] but expected [").concat(i,"]");mb(i,d,0,M,c.viewRejector)}else i=d;if(e){e.length-a>y.length&&(a=e.length-y.length);var _=e[e.length-1]/y[y.length-1];c.rf[f]=_;var S=y.map((function(t){return t*_}));M="Resolution mismatch for source ".concat(f,", got [").concat(S,"] but expected [").concat(e,"]");mb(e.slice(a,e.length),S,.02,M,c.viewRejector)}else e=y,c.rf[f]=1;r?mb(r.slice(a,r.length),p,0,"Tile size mismatch for source ".concat(f),c.viewRejector):r=p,c.if[f]=h.reverse()},c=this,l=0;l<f;++l)h(l);for(var v=0,d=this.if.length;v<d;++v)for(var p=this.if[v];p.length<e.length;)p.unshift(void 0);if(!this.getProjection()){var y=t[0];for(v=y.length-1;v>=0;--v){var m=db(y[v]);if(m){this.projection=m;break}}}this.ef=o,this.uf=u,this.af=s;t:for(l=0;l<f;++l){if(void 0!==this.tf[l].nodata){this.hf=!0;break}var w=u[l],b=this.tf[l].bands;if(b){for(v=0;v<b.length;++v)if(!isNaN(w[b[v]-1])){this.hf=!0;break t}}else for(var g=0;g<w.length;++g)if(!isNaN(w[g])){this.hf=!0;break t}}var x=this.hf?1:0;this.bandCount=o.reduce((function(t,n){return t+=n}),0)+x;var M=new Kh({extent:n,minZoom:a,origin:i,resolutions:e,tileSizes:r});this.tileGrid=M,this.setLoader(this.vf.bind(this)),this.setState(pu),this.viewResolver({projection:this.projection,resolutions:e,center:Nr(Xn(n),this.projection),extent:Fr(n,this.projection),zoom:0})},n.prototype.vf=function(t,n,i){for(var r=sa(this.tileGrid.getTileSize(t)),e=this.if.length,o=new Array(e),u=this.hf,s=this.bandCount,a=this.ef,f=this.uf,h=this.tf,c=function(e){var u=h[e],s=l.rf[e],a=[Math.round(n*(r[0]*s)),Math.round(i*(r[1]*s)),Math.round((n+1)*(r[0]*s)),Math.round((i+1)*(r[1]*s))],c=l.if[e][t],v=void 0;u.bands&&(v=u.bands.map((function(t){return t-1})));var d=void 0;d=isNaN(u.nodata)?v?v.map((function(t){return f[e][t]})):f[e]:u.nodata,o[e]=c[l.cf]({window:a,width:r[0],height:r[1],samples:v,fillValue:d,pool:(ob||(ob=new sb),ob),interleave:!1})},l=this,v=0;v<e;++v)c(v);var d=r[0]*r[1],p=d*s,y=this.ff,m=this.af;return Promise.all(o).then((function(t){var n;n=y?new Uint8Array(p):new Float32Array(p);for(var i,r=0,o=0;o<d;++o){for(var s=u,c=0;c<e;++c){var l=h[c],v=l.min,w=l.max,b=void 0,g=void 0;if(y){var x=m[c][0];void 0===v&&(v=x&&hb in x?parseFloat(x.STATISTICS_MINIMUM):(i=t[c][0])instanceof Int8Array?-128:i instanceof Int16Array?-32768:i instanceof Int32Array?-2147483648:i instanceof Float32Array?12e-39:0),void 0===w&&(w=x&&fb in x?parseFloat(x.STATISTICS_MAXIMUM):wb(t[c][0])),g=-v*(b=255/(w-v))}for(var M=0;M<a[c];++M){var _=t[c][M][o],S=void 0;if(S=y?ai(b*_+g,0,255):_,u){var O=l.nodata;if(void 0===O){var j=void 0;j=l.bands?l.bands[M]-1:M,O=f[c][j]}_!==O&&(s=!1,n[r]=S)}else n[r]=S;r++}}u&&(s||(n[r]=255),r++)}return n}))},n}(Dd);bb.prototype.getView;var gb=bb,xb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mb="default",_b="truncated",Sb=function(t){function n(n,i,r,e,o,u,s){var a=t.call(this,i,r,e,o,u,s)||this;return a.df=null,a.Eo=n,a}return xb(n,t),n.prototype.getImage=function(){if(this.df)return this.df;var n=t.prototype.getImage.call(this);if(this.state==vt){var i=this.Eo;if(n.width==i[0]&&n.height==i[1])return this.df=n,n;var r=jo(i[0],i[1]);return r.drawImage(n,0,0),this.df=r.canvas,r.canvas}return n},n}(Io),Ob=function(t){function n(n){var i=this,r=n,e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.size,u=void 0!==r.tierSizeCalculation?r.tierSizeCalculation:Mb,s=r.tilePixelRatio||1,a=o[0],f=o[1],h=[],c=r.tileSize||Ls,l=c*s;switch(u){case Mb:for(;a>l||f>l;)h.push([Math.ceil(a/l),Math.ceil(f/l)]),l+=l;break;case _b:for(var v=a,d=f;v>l||d>l;)h.push([Math.ceil(v/l),Math.ceil(d/l)]),v>>=1,d>>=1;break;default:St(!1,53)}h.push([1,1]),h.reverse();for(var p=[s],y=[0],m=1,w=h.length;m<w;m++)p.push(s<<m),y.push(h[m-1][0]*h[m-1][1]+y[m-1]);p.reverse();var b=new Kh({tileSize:c,extent:r.extent||[0,-f,a,0],resolutions:p}),g=r.url;g&&-1==g.indexOf("{TileGroup}")&&-1==g.indexOf("{tileIndex}")&&(g+="{TileGroup}/{z}-{x}-{y}.jpg");var x=uc(g),M=c*s;var _=ec(x.map((function(t){return function(n,i,r){if(n){var e=n[0],o=n[1],u=n[2],s=o+u*h[e][0],a={z:e,x:o,y:u,tileIndex:s,TileGroup:"TileGroup"+((s+y[e])/M|0)};return t.replace(/\{(\w+?)\}/g,(function(t,n){return a[n]}))}}}))),S=Sb.bind(null,sa(c*s));(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,tilePixelRatio:s,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:S,tileGrid:b,tileUrlFunction:_,transition:r.transition})||this).zDirection=r.zDirection;var O=_(b.getTileCoordForCoordAndResolution(Xn(b.getExtent()),p[p.length-1]),1,null),j=new Image;return j.addEventListener("error",function(){M=c,this.changed()}.bind(i)),j.src=O,i}return xb(n,t),n}(bd),jb=function(t,n,i){if(i||2===arguments.length)for(var r,e=0,o=n.length;e<o;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))},Eb="version1",kb="version2",Ab="version3",Tb={};Tb[Eb]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},Tb[kb]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},Tb[Ab]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},Tb.none={none:{supports:[],formats:[],qualities:[]}};var Cb=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Pb=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,Rb=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;var Ib={};Ib[Eb]=function(t){var n=t.getComplianceLevelSupportedFeatures();return void 0===n&&(n=Tb[Eb].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:n.supports,formats:jb(jb([],n.formats,!0),[void 0===t.imageInfo.formats?[]:t.imageInfo.formats],!1),qualities:jb(jb([],n.qualities,!0),[void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],!1),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},Ib[kb]=function(t){var n=t.getComplianceLevelSupportedFeatures(),i=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,r=i&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],e=i&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=i&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:jb(jb([],n.supports,!0),r,!0),formats:jb(jb([],n.formats,!0),e,!0),qualities:jb(jb([],n.qualities,!0),o,!0)}},Ib[Ab]=function(t){var n=t.getComplianceLevelSupportedFeatures(),i=void 0===t.imageInfo.extraFormats?n.formats:jb(jb([],n.formats,!0),t.imageInfo.extraFormats,!0),r=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return y(["jpg","png","gif"],t)})).reduce((function(t,n){return void 0===t&&y(i,n)?n:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?n.supports:jb(jb([],n.supports,!0),t.imageInfo.extraFeatures,!0),formats:i,qualities:void 0===t.imageInfo.extraQualities?n.qualities:jb(jb([],n.qualities,!0),t.imageInfo.extraQualities,!0),preferredFormat:r}};var Nb=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)switch(t[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Eb;case"http://iiif.io/api/image/2/context.json":return kb;case"http://iiif.io/api/image/3/context.json":return Ab;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Eb)&&this.imageInfo.identifier)return Eb}St(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case Eb:if(Cb.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Ab:if(Rb.test(this.imageInfo.profile))return this.imageInfo.profile;break;case kb:if("string"==typeof this.imageInfo.profile&&Pb.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&Pb.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var n=this.getComplianceLevelEntryFromProfile(t);if(void 0!==n){var i=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(i)?i[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(t);return void 0===n?Tb.none.none:Tb[t][n]}},t.prototype.getTileSourceOptions=function(t){var n=t||{},i=this.getImageApiVersion();if(void 0!==i){var r=void 0===i?void 0:Ib[i](this);if(void 0!==r)return{url:r.url,version:i,size:[this.imageInfo.width,this.imageInfo.height],sizes:r.sizes,format:void 0!==n.format&&y(r.formats,n.format)?n.format:void 0!==r.preferredFormat?r.preferredFormat:"jpg",supports:r.supports,quality:n.quality&&y(r.qualities,n.quality)?n.quality:y(r.qualities,"native")?"native":"default",resolutions:Array.isArray(r.resolutions)?r.resolutions.sort((function(t,n){return n-t})):void 0,tileSize:r.tileSize}}},t}(),zb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Fb(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var Lb=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.url||"";o+=o.lastIndexOf("/")===o.length-1||""===o?"":"/";var u=r.version||kb,s=r.sizes||[],a=r.size;St(null!=a&&Array.isArray(a)&&2==a.length&&!isNaN(a[0])&&a[0]>0&&!isNaN(a[1])&&a[1]>0,60);var f,h,c,l=a[0],v=a[1],d=r.tileSize,p=r.tilePixelRatio||1,m=r.format||"jpg",w=r.quality||(r.version==Eb?"native":"default"),b=r.resolutions||[],g=r.supports||[],x=r.extent||[0,-v,l,0],M=null!=s&&Array.isArray(s)&&s.length>0,_=void 0!==d&&("number"==typeof d&&Number.isInteger(d)&&d>0||Array.isArray(d)&&d.length>0),S=null!=g&&Array.isArray(g)&&(y(g,"regionByPx")||y(g,"regionByPct"))&&(y(g,"sizeByWh")||y(g,"sizeByH")||y(g,"sizeByW")||y(g,"sizeByPct"));if(b.sort((function(t,n){return n-t})),_||S)if(null!=d&&("number"==typeof d&&Number.isInteger(d)&&d>0?(f=d,h=d):Array.isArray(d)&&d.length>0&&((1==d.length||null==d[1]&&Number.isInteger(d[0]))&&(f=d[0],h=d[0]),2==d.length&&(Number.isInteger(d[0])&&Number.isInteger(d[1])?(f=d[0],h=d[1]):null==d[0]&&Number.isInteger(d[1])&&(f=d[1],h=d[1])))),void 0!==f&&void 0!==h||(f=Ls,h=Ls),0==b.length)for(var O=c=Math.max(Math.ceil(Math.log(l/f)/Math.LN2),Math.ceil(Math.log(v/h)/Math.LN2));O>=0;O--)b.push(Math.pow(2,O));else{var j=Math.max.apply(Math,b);c=Math.round(Math.log(j)/Math.LN2)}else if(f=l,h=v,b=[],M){s.sort((function(t,n){return t[0]-n[0]})),c=-1;var E=[];for(O=0;O<s.length;O++){var k=l/s[O][0];b.length>0&&b[b.length-1]==k?E.push(O):(b.push(k),c++)}if(E.length>0)for(O=0;O<E.length;O++)s.splice(E[O]-O,1)}else b.push(1),s.push([l,v]),c=0;var A=new Kh({tileSize:[f,h],extent:x,origin:Jn(x),resolutions:b}),T=Sb.bind(null,sa(d||256).map((function(t){return t*p})));return(i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:r.state,tileClass:T,tileGrid:A,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:function(t,n,i){var r,e,a=t[0];if(!(a>c)){var d=t[1],p=t[2],x=b[a];if(!(void 0===d||void 0===p||void 0===x||d<0||Math.ceil(l/x/f)<=d||p<0||Math.ceil(v/x/h)<=p)){if(S||_){var O=d*f*x,j=p*h*x,E=f*x,k=h*x,A=f,T=h;if(O+E>l&&(E=l-O),j+k>v&&(k=v-j),O+f*x>l&&(A=Math.floor((l-O+x-1)/x)),j+h*x>v&&(T=Math.floor((v-j+x-1)/x)),0==O&&E==l&&0==j&&k==v)r="full";else if(!S||y(g,"regionByPx"))r=O+","+j+","+E+","+k;else if(y(g,"regionByPct")){r="pct:"+Fb(O/l*100)+","+Fb(j/v*100)+","+Fb(E/l*100)+","+Fb(k/v*100)}u!=Ab||S&&!y(g,"sizeByWh")?!S||y(g,"sizeByW")?e=A+",":y(g,"sizeByH")?e=","+T:y(g,"sizeByWh")?e=A+","+T:y(g,"sizeByPct")&&(e="pct:"+Fb(100/x)):e=A+","+T}else if(r="full",M){var C=s[a][0],P=s[a][1];e=u==Ab?C==l&&P==v?"max":C+","+P:C==l?"full":C+","}else e=u==Ab?"max":"full";return o+r+"/"+e+"/0/"+w+"."+m}}},transition:r.transition})||this).zDirection=r.zDirection,i}return zb(n,t),n}(bd),Gb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Db=function(t){function n(n,i,r,e,o,u,s){var a=this,f=n.getExtent(),h=i.getExtent(),c=h?Zn(r,h):r,l=Vh(n,i,Xn(c),e),v=new dl(n,i,c,f,.5*l,e),d=u(v.calculateSourceExtent(),l,o),p=d?yo:go,y=d?d.getPixelRatio():1;return(a=t.call(this,r,e,y,p)||this).vu=i,a.pu=f,a.Pu=v,a.wi=e,a.pf=r,a.yf=d,a.mf=y,a.ya=s,a.Dt=null,a.wf=null,a}return Gb(n,t),n.prototype.disposeInternal=function(){this.state==mo&&this.bf(),t.prototype.disposeInternal.call(this)},n.prototype.getImage=function(){return this.Dt},n.prototype.getProjection=function(){return this.vu},n.prototype.Ru=function(){var t=this.yf.getState();if(t==wo){var n=Qn(this.pf)/this.wi,i=Yn(this.pf)/this.wi;this.Dt=Xh(n,i,this.mf,this.yf.getResolution(),this.pu,this.wi,this.pf,this.Pu,[{extent:this.yf.getExtent(),image:this.yf.getImage()}],0,void 0,this.ya)}this.state=t,this.changed()},n.prototype.load=function(){if(this.state==yo){this.state=mo,this.changed();var t=this.yf.getState();t==wo||t==bo?this.Ru():(this.wf=Y(this.yf,N,(function(t){var n=this.yf.getState();n!=wo&&n!=bo||(this.bf(),this.Ru())}),this),this.yf.load())}},n.prototype.bf=function(){J(this.wf),this.wf=null},n}(po),Bb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ub="imageloadstart",qb="imageloadend",Vb="imageloaderror",Wb=function(t){function n(n,i){var r=t.call(this,n)||this;return r.image=i,r}return Bb(n,t),n}(c);function Xb(t,n){t.getImage().src=n}var Hb=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state,interpolate:r})||this).on,i.once,i.un,i.ki=void 0!==n.resolutions?n.resolutions:null,i.gf=null,i.xf=0,i}return Bb(n,t),n.prototype.getResolutions=function(){return this.ki},n.prototype.findNearestResolution=function(t){if(this.ki){var n=m(this.ki,t,0);t=this.ki[n]}return t},n.prototype.getImage=function(t,n,i,r){var e=this.getProjection();if(e&&r&&!Er(e,r)){if(this.gf){if(this.xf==this.getRevision()&&Er(this.gf.getProjection(),r)&&this.gf.getResolution()==n&&In(this.gf.getExtent(),t))return this.gf;this.gf.dispose(),this.gf=null}return this.gf=new Db(e,r,t,n,i,function(t,n,i){return this.getImageInternal(t,n,i,e)}.bind(this),this.getInterpolate()),this.xf=this.getRevision(),this.gf}return e&&(r=e),this.getImageInternal(t,n,i,r)},n.prototype.getImageInternal=function(t,n,i,e){return r()},n.prototype.handleImageChange=function(t){var n,i=t.target;switch(i.getState()){case mo:this.loading=!0,n=Ub;break;case wo:this.loading=!1,n=qb;break;case bo:this.loading=!1,n=Vb;break;default:return}this.hasListener(n)&&this.dispatchEvent(new Wb(n,i))},n}(hd),Kb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yb=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).Ut=void 0!==r.crossOrigin?r.crossOrigin:null,i.Sa=void 0===r.hidpi||r.hidpi,i.Ge=r.url,i.zt=void 0!==r.imageLoadFunction?r.imageLoadFunction:Xb,i.Mf=r.params||{},i.Rt=null,i._f=[0,0],i.Sf=0,i.Of=void 0!==r.ratio?r.ratio:1.5,i}return Kb(n,t),n.prototype.getParams=function(){return this.Mf},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.Ge)return null;n=this.findNearestResolution(n),i=this.Sa?i:1;var e=this.Rt;if(e&&this.Sf==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&jn(e.getExtent(),t))return e;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};A(o,this.Mf);var u=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.Of){var a=this.Of*Qn(t)/2,f=this.Of*Yn(t)/2;t[0]=u-a,t[1]=s-f,t[2]=u+a,t[3]=s+f}var h=n/i,c=Math.ceil(Qn(t)/h),l=Math.ceil(Yn(t)/h);t[0]=u-h*c/2,t[2]=u+h*c/2,t[1]=s-h*l/2,t[3]=s+h*l/2,this._f[0]=c,this._f[1]=l;var v=this.jf(t,this._f,i,r,o);return this.Rt=new _o(t,n,i,v,this.Ut,this.zt),this.Sf=this.getRevision(),this.Rt.addEventListener(N,this.handleImageChange.bind(this)),this.Rt},n.prototype.getImageLoadFunction=function(){return this.zt},n.prototype.jf=function(t,n,i,r,e){var o=r.getCode().split(/:(?=\d+$)/).pop();e.SIZE=n[0]+","+n[1],e.BBOX=t.join(","),e.BBOXSR=o,e.IMAGESR=o,e.DPI=Math.round(90*i);var u=this.Ge,s=u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==u&&St(!1,50),sc(s,e)},n.prototype.getUrl=function(){return this.Ge},n.prototype.setImageLoadFunction=function(t){this.Rt=null,this.zt=t,this.changed()},n.prototype.setUrl=function(t){t!=this.Ge&&(this.Ge=t,this.Rt=null,this.changed())},n.prototype.updateParams=function(t){A(this.Mf,t),this.Rt=null,this.changed()},n}(Hb),Zb=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jb=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).Ef=r.canvasFunction,i.Dt=null,i.Sf=0,i.Of=void 0!==r.ratio?r.ratio:1.5,i}return Zb(n,t),n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n);var e=this.Dt;if(e&&this.Sf==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&jn(e.getExtent(),t))return e;ri(t=t.slice(),this.Of);var o=[Qn(t)/n*i,Yn(t)/n*i],u=this.Ef.call(this,t,n,i,o,r);return u&&(e=new Oo(t,n,i,u)),this.Dt=e,this.Sf=this.getRevision(),e},n}(Hb),$b=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Qb=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{interpolate:r,projection:n.projection,resolutions:n.resolutions})||this).Ut=void 0!==n.crossOrigin?n.crossOrigin:null,i.kf=void 0!==n.displayDpi?n.displayDpi:96,i.Mf=n.params||{},i.Ge=n.url,i.zt=void 0!==n.imageLoadFunction?n.imageLoadFunction:Xb,i.Sa=void 0===n.hidpi||n.hidpi,i.vt=void 0!==n.metersPerUnit?n.metersPerUnit:1,i.Of=void 0!==n.ratio?n.ratio:1,i.Af=void 0!==n.useOverlay&&n.useOverlay,i.Rt=null,i.Sf=0,i}return $b(n,t),n.prototype.getParams=function(){return this.Mf},n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n),i=this.Sa?i:1;var e=this.Rt;if(e&&this.Sf==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&jn(e.getExtent(),t))return e;1!=this.Of&&ri(t=t.slice(),this.Of);var o=[Qn(t)/n*i,Yn(t)/n*i];if(void 0!==this.Ge){var u=this.getUrl(this.Ge,this.Mf,t,o,r);(e=new _o(t,n,i,u,this.Ut,this.zt)).addEventListener(N,this.handleImageChange.bind(this))}else e=null;return this.Rt=e,this.Sf=this.getRevision(),e},n.prototype.getImageLoadFunction=function(){return this.zt},n.prototype.updateParams=function(t){A(this.Mf,t),this.changed()},n.prototype.getUrl=function(t,n,i,r,e){var o=function(t,n,i,r){var e=Qn(t),o=Yn(t),u=n[0],s=n[1],a=.0254/r;return s*e>u*o?e*i/(u*a):o*i/(s*a)}(i,r,this.vt,this.kf),u=Xn(i),s={OPERATION:this.Af?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.kf,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]};return A(s,n),sc(t,s)},n.prototype.setImageLoadFunction=function(t){this.Rt=null,this.zt=t,this.changed()},n}(Hb),tg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ng=function(t){function n(n){var i=this,r=void 0!==n.crossOrigin?n.crossOrigin:null,e=void 0!==n.imageLoadFunction?n.imageLoadFunction:Xb,o=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(o=n.interpolate),(i=t.call(this,{attributions:n.attributions,interpolate:o,projection:br(n.projection)})||this).Ge=n.url,i.Tf=n.imageExtent,i.Rt=new _o(i.Tf,void 0,1,i.Ge,r,e),i._f=n.imageSize?n.imageSize:null,i.Rt.addEventListener(N,i.handleImageChange.bind(i)),i}return tg(n,t),n.prototype.getImageExtent=function(){return this.Tf},n.prototype.getImageInternal=function(t,n,i,r){return ti(t,this.Rt.getExtent())?this.Rt:null},n.prototype.getUrl=function(){return this.Ge},n.prototype.handleImageChange=function(n){if(this.Rt.getState()==wo){var i=this.Rt.getExtent(),r=this.Rt.getImage(),e=void 0,o=void 0;this._f?(e=this._f[0],o=this._f[1]):(e=r.width,o=r.height);var u=Qn(i),s=Yn(i),a=u/e,f=s/o,h=e,c=o;if(a>f?h=Math.round(u/f):c=Math.round(s/a),h!==e||c!==o){var l=jo(h,c);this.getInterpolate()||A(l,Dh);var v=l.canvas;l.drawImage(r,0,0,e,o,0,0,v.width,v.height),this.Rt.setImage(v)}}t.prototype.handleImageChange.call(this,n)},n}(Hb),ig="1.3.0",rg="carmentaserver",eg="geoserver",og="mapserver",ug="qgis",sg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ag=[101,101],fg=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).Ut=void 0!==r.crossOrigin?r.crossOrigin:null,i.Ge=r.url,i.zt=void 0!==r.imageLoadFunction?r.imageLoadFunction:Xb,i.Mf=r.params||{},i.Cf=!0,i.Pf(),i.Rf=r.serverType,i.Sa=void 0===r.hidpi||r.hidpi,i.Rt=null,i._f=[0,0],i.Sf=0,i.Of=void 0!==r.ratio?r.ratio:1.5,i}return sg(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){if(void 0!==this.Ge){var e=br(i),o=this.getProjection();o&&o!==e&&(n=Vh(o,e,t,n),t=Tr(t,e,o));var u=Kn(t,n,0,ag),s={SERVICE:"WMS",VERSION:ig,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.Mf.LAYERS};A(s,this.Mf,r);var a=gi((t[0]-u[0])/n,4),f=gi((u[3]-t[1])/n,4);return s[this.Cf?"I":"X"]=a,s[this.Cf?"J":"Y"]=f,this.jf(u,ag,1,o||e,s)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.Ge){var i={SERVICE:"WMS",VERSION:ig,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.Mf.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return A(i,n),sc(this.Ge,i)}},n.prototype.getParams=function(){return this.Mf},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.Ge)return null;n=this.findNearestResolution(n),1==i||this.Sa&&void 0!==this.Rf||(i=1);var e=n/i,o=Xn(t),u=Kn(o,e,0,[xi(Qn(t)/e,4),xi(Yn(t)/e,4)]),s=Kn(o,e,0,[xi(this.Of*Qn(t)/e,4),xi(this.Of*Yn(t)/e,4)]),a=this.Rt;if(a&&this.Sf==this.getRevision()&&a.getResolution()==n&&a.getPixelRatio()==i&&jn(a.getExtent(),u))return a;var f={SERVICE:"WMS",VERSION:ig,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};A(f,this.Mf),this._f[0]=bi(Qn(s)/e,4),this._f[1]=bi(Yn(s)/e,4);var h=this.jf(s,this._f,i,r,f);return this.Rt=new _o(s,n,i,h,this.Ut,this.zt),this.Sf=this.getRevision(),this.Rt.addEventListener(N,this.handleImageChange.bind(this)),this.Rt},n.prototype.getImageLoadFunction=function(){return this.zt},n.prototype.jf=function(t,n,i,r,e){if(St(void 0!==this.Ge,9),e[this.Cf?"CRS":"SRS"]=r.getCode(),"STYLES"in this.Mf||(e.STYLES=""),1!=i)switch(this.Rf){case eg:var o=90*i+.5|0;"FORMAT_OPTIONS"in e?e.FORMAT_OPTIONS+=";dpi:"+o:e.FORMAT_OPTIONS="dpi:"+o;break;case og:e.MAP_RESOLUTION=90*i;break;case rg:case ug:e.DPI=90*i;break;default:St(!1,8)}e.WIDTH=n[0],e.HEIGHT=n[1];var u,s=r.getAxisOrientation();return u=this.Cf&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,e.BBOX=u.join(","),sc(this.Ge,e)},n.prototype.getUrl=function(){return this.Ge},n.prototype.setImageLoadFunction=function(t){this.Rt=null,this.zt=t,this.changed()},n.prototype.setUrl=function(t){t!=this.Ge&&(this.Ge=t,this.Rt=null,this.changed())},n.prototype.updateParams=function(t){A(this.Mf,t),this.Pf(),this.Rt=null,this.changed()},n.prototype.Pf=function(){var t=this.Mf.VERSION||ig;this.Cf=Hi(t,"1.3")>=0},n}(Hb),hg={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},cg={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function lg(t,n){for(var i,r,e=0;e<t.length;++e){var o=t[e];if("item"===o.rel){if(o.type===n){i=o.href;break}hg[o.type]?r=o.href:r||0!==o.type.indexOf("image/")||(r=o.href)}}if(!i){if(!r)throw new Error('Could not find "item" link');i=r}return i}function vg(t,n,i){for(var r,e,o={},u=0;u<t.length;++u){var s=t[u];if(o[s.type]=s.href,"item"===s.rel){if(s.type===n){r=s.href;break}cg[s.type]&&(e=s.href)}}if(!r&&i)for(u=0;u<i.length;++u){var a=i[u];if(o[a]){r=o[a];break}}if(!r){if(!e)throw new Error('Could not find "item" link');r=e}return r}function dg(t,n,i,r){var e=t.projection;if(!e&&!(e=br(n.crs)))throw new Error("Unsupported CRS: ".concat(n.crs));for(var o="en"!==e.getAxisOrientation().substr(0,2),u=n.tileMatrices,s={},a=0;a<u.length;++a){var f=u[a];s[f.id]=f}var h={},c=[];if(r)for(a=0;a<r.length;++a){var l=(b=r[a]).tileMatrix;c.push(l),h[l]=b}else for(a=0;a<u.length;++a){l=u[a].id;c.push(l)}var v=c.length,d=new Array(v),p=new Array(v),y=new Array(v),m=new Array(v),w=[-1/0,-1/0,1/0,1/0];for(a=0;a<v;++a){l=c[a];var b,g=(f=s[l]).pointOfOrigin;if(d[a]=o?[g[1],g[0]]:g,p[a]=f.cellSize,y[a]=[f.matrixWidth,f.matrixHeight],m[a]=[f.tileWidth,f.tileHeight],b=h[l]){var x=f.cellSize*f.tileWidth,M=d[a][0]+b.minTileCol*x,_=d[a][0]+(b.maxTileCol+1)*x,S=f.cellSize*f.tileHeight,O=void 0,j=void 0;"bottomLeft"===f.cornerOfOrigin?(O=d[a][1]+b.minTileRow*S,j=d[a][1]+(b.maxTileRow+1)*S):(O=d[a][1]-(b.maxTileRow+1)*S,j=d[a][1]-b.minTileRow*S),Zn(w,[M,O,_,j],w)}}var E=new Kh({origins:d,resolutions:p,sizes:y,tileSizes:m,extent:r?w:void 0}),k=t.context,T=t.url;return{grid:E,urlTemplate:i,urlFunction:function(t,n,e){if(t){var o=c[t[0]],u=s[o],a="bottomLeft"===u.cornerOfOrigin,f={tileMatrix:o,tileCol:t[1],tileRow:a?-t[2]-1:t[2]};if(r){var l=h[u.id];if(f.tileCol<l.minTileCol||f.tileCol>l.maxTileCol||f.tileRow<l.minTileRow||f.tileRow>l.maxTileRow)return}A(f,k);var v=i.replace(/\{(\w+?)\}/g,(function(t,n){return f[n]}));return Mh(T,v)}}}}function pg(t){return xh(t.url).then((function(n){return function(t,n){var i,r=n.tileMatrixSetLimits;if("map"===n.dataType)i=lg(n.links,t.mediaType);else{if("vector"!==n.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');i=vg(n.links,t.mediaType,t.supportedMediaTypes)}if(n.tileMatrixSet)return dg(t,n.tileMatrixSet,i,r);var e=n.links.find((function(t){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel}));if(!e)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");var o=e.href;return xh(Mh(t.url,o)).then((function(n){return dg(t,n,i,r)}))}(t,n)}))}var yg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mg=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:du,tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this,pg({url:n.url,projection:i.getProjection(),mediaType:n.mediaType,context:n.context||null}).then(i.If.bind(i)).catch(i.Nf.bind(i)),i}return yg(n,t),n.prototype.If=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(pu)},n.prototype.Nf=function(t){console.error(t),this.setState(yu)},n}(bd),wg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bg=function(t){function n(n){var i=this,r=n.projection||"EPSG:3857",e=n.extent||nc(r),o=n.tileGrid||$h({extent:e,maxResolution:n.maxResolution,maxZoom:void 0!==n.maxZoom?n.maxZoom:22,minZoom:n.minZoom,tileSize:n.tileSize||512});return(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,interpolate:!0,opaque:!1,projection:r,state:n.state,tileGrid:o,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:gg,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:void 0===n.zDirection?1:n.zDirection})||this).Fe=n.format?n.format:null,i.sourceTileCache=new $f(i.tileCache.highWaterMark),i.Fa=null==n.overlaps||n.overlaps,i.tileClass=n.tileClass?n.tileClass:uh,i.zf={},i}return wg(n,t),n.prototype.getFeaturesInExtent=function(t){var n=[],i=this.tileCache;if(0===i.getCount())return n;var r=Kf(i.peekFirstKey())[0],e=this.tileGrid;return i.forEach((function(i){if(i.tileCoord[0]===r&&i.getState()===vt)for(var o=i.getSourceTiles(),u=0,s=o.length;u<s;++u){var a=o[u],f=a.tileCoord;if(ti(t,e.getTileCoordExtent(f))){var h=a.getFeatures();if(h)for(var c=0,l=h.length;c<l;++c){var v=h[c],d=v.getGeometry();ti(t,d.getExtent())&&n.push(v)}}}})),n},n.prototype.getOverlaps=function(){return this.Fa},n.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},n.prototype.expireCache=function(n,i){var r=this.getTileCacheForProjection(n),e=Object.keys(i).reduce((function(t,n){var i=Hf(n);if(r.containsKey(i))for(var e=r.get(i).sourceTiles,o=0,u=e.length;o<u;++o)t[e[o].getKey()]=!0;return t}),{});t.prototype.expireCache.call(this,n,i),this.sourceTileCache.expireCache(e)},n.prototype.getSourceTiles=function(t,n,i){var r=this;if(i.getState()===ct){i.setState(lt);var e=i.wrappedTileCoord,o=this.getTileGridForProjection(n),u=o.getTileCoordExtent(e),s=e[0],a=o.getResolution(s);Mn(u,-a,u);var f=this.tileGrid,h=f.getExtent();h&&Zn(u,h,u);var c=f.getZForResolution(a,1);f.forEachTileCoord(u,c,(function(e){var o=r.tileUrlFunction(e,t,n),u=r.sourceTileCache.containsKey(o)?r.sourceTileCache.get(o):new r.tileClass(e,o?ct:pt,o,r.Fe,r.tileLoadFunction);i.sourceTiles.push(u);var s=u.getState();if(s<vt){u.addEventListener(N,(function t(n){r.handleTileChange(n);var e=u.getState();if(e===vt||e===dt){var o=u.getKey();o in i.errorTileKeys?u.getState()===vt&&delete i.errorTileKeys[o]:i.loadingSourceTiles--,e===dt?i.errorTileKeys[o]=!0:u.removeEventListener(N,t),0===i.loadingSourceTiles&&i.setState(P(i.errorTileKeys)?vt:dt)}})),i.loadingSourceTiles++}s===ct&&(u.extent=f.getTileCoordExtent(e),u.projection=n,u.resolution=f.getResolution(e[0]),r.sourceTileCache.set(o,u),u.load())})),i.loadingSourceTiles||i.setState(i.sourceTiles.some((function(t){return t.getState()===dt}))?dt:vt)}return i.sourceTiles},n.prototype.getTile=function(t,n,i,r,e){var o,u=Wf(t,n,i),s=this.getKey();if(this.tileCache.containsKey(u)&&(o=this.tileCache.get(u)).key===s)return o;var a=[t,n,i],f=this.getTileCoordForTileUrlFunction(a,e),h=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(e);if(f&&h){var l=c.getTileCoordExtent(f);Mn(l,-c.getResolution(t),l),ti(h,l)||(f=null)}var v=!0;if(null!==f){var d=this.tileGrid,p=c.getResolution(t),y=d.getZForResolution(p,1),m=c.getTileCoordExtent(f);Mn(m,-p,m),d.forEachTileCoord(m,y,function(t){v=v&&!this.tileUrlFunction(t,r,e)}.bind(this))}var w=new eh(a,v?pt:ct,f,this.getSourceTiles.bind(this,r,e));return w.key=s,o?(w.interimTile=o,w.refreshInterimChain(),this.tileCache.replace(u,w)):this.tileCache.set(u,w),w},n.prototype.getTileGridForProjection=function(t){var n=t.getCode(),i=this.zf[n];if(!i){var r=this.tileGrid;i=tc(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0),this.zf[n]=i}return i},n.prototype.getTilePixelRatio=function(t){return t},n.prototype.getTilePixelSize=function(t,n,i){var r=sa(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(r[0]*n),Math.round(r[1]*n)]},n.prototype.updateCacheSize=function(n,i){t.prototype.updateCacheSize.call(this,2*n,i),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(i).highWaterMark},n}(yd);function gg(t,n){t.setLoader((function(i,r,e){vh(n,t.getFormat(),i,r,e,t.onLoad.bind(t),t.onError.bind(t))}))}var xg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mg=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,format:n.format,overlaps:n.overlaps,projection:n.projection,tileClass:n.tileClass,transition:n.transition,wrapX:n.wrapX,zDirection:n.zDirection,state:du})||this;return pg({url:n.url,projection:i.getProjection(),mediaType:n.mediaType,supportedMediaTypes:n.format.supportedMediaTypes,context:n.context||null}).then(i.If.bind(i)).catch(i.Nf.bind(i)),i}return xg(n,t),n.prototype.If=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(pu)},n.prototype.Nf=function(t){console.error(t),this.setState(yu)},n}(bg),_g=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sg='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Og=function(t){function n(n){var i,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate),i=void 0!==r.attributions?r.attributions:[Sg];var o=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",u=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:o,interpolate:e,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:u,wrapX:r.wrapX,zDirection:r.zDirection})||this}return _g(n,t),n}(Sd),jg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Eg=function(t){function n(n){var i=n||{};return t.call(this,i)||this}return jg(n,t),n}(bu),kg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ag=null;var Tg,Cg=function(t){function n(n){var i=t.call(this,n)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i.Bu=null,i.frameState=null,i}return kg(n,t),n.prototype.getImageData=function(t,n,i){var r,e;Ag||((r=document.createElement("canvas")).width=1,r.height=1,Ag=r.getContext("2d")),Ag.clearRect(0,0,1,1);try{Ag.drawImage(t,n,i,1,1,0,0,1,1),e=Ag.getImageData(0,0,1,1).data}catch(t){return Ag=null,null}return e},n.prototype.getBackground=function(t){var n=this.getLayer().getBackground();return"function"==typeof n&&(n=n(t.viewState.resolution)),n||void 0},n.prototype.useContainer=function(t,n,i,r){var e,o,u=this.getLayer().getClassName();t&&t.className===u&&""===t.style.opacity&&1===i&&(!r||t&&t.style.backgroundColor&&x(Bo(t.style.backgroundColor),Bo(r)))&&((a=t.firstElementChild)instanceof HTMLCanvasElement&&(o=a.getContext("2d")));if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(e=document.createElement("div")).className=u;var s=e.style;s.position="absolute",s.width="100%",s.height="100%";var a=(o=jo()).canvas;e.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=e,this.context=o}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)},n.prototype.clipUnrotated=function(t,n,i){var r=Jn(i),e=$n(i),o=Wn(i),u=Vn(i);nn(n.coordinateToPixelTransform,r),nn(n.coordinateToPixelTransform,e),nn(n.coordinateToPixelTransform,o),nn(n.coordinateToPixelTransform,u);var s=this.inversePixelTransform;nn(s,r),nn(s,e),nn(s,o),nn(s,u),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(e[0]),Math.round(e[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()},n.prototype.qu=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){var e=new Su(t,this.inversePixelTransform,i,n);r.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.frameState=n,this.qu(au,t,n)},n.prototype.postRender=function(t,n){this.qu(fu,t,n)},n.prototype.getRenderTransform=function(t,n,i,r,e,o,u){var s=e/2,a=o/2,f=r/n,h=-f,c=-t[0]+u,l=-t[1];return sn(this.tempTransform,s,a,f,h,-i,c,l)},n.prototype.getDataAtPixel=function(t,n,i){var r=nn(this.inversePixelTransform,t.slice()),e=this.context,o=this.getLayer().getExtent();if(o&&!On(o,nn(n.pixelToCoordinateTransform,t.slice())))return null;var u,s=Math.round(r[0]),a=Math.round(r[1]),f=this.Bu;if(!f){var h=document.createElement("canvas");h.width=1,h.height=1,f=h.getContext("2d"),this.Bu=f}f.clearRect(0,0,1,1);try{f.drawImage(e.canvas,s,a,1,1,0,0,1,1),u=f.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.Bu=null,new Uint8Array):u}return 0===u[3]?null:u},n.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},n}(_l),Pg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rg=function(t){function n(n){var i=t.call(this,n)||this;return i.Rt=null,i}return Pg(n,t),n.prototype.getImage=function(){return this.Rt?this.Rt.getImage():null},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,e=r.resolution,o=this.getLayer().getSource(),u=t.viewHints,s=t.extent;if(void 0!==n.extent&&(s=Zn(s,Lr(n.extent,r.projection))),!u[Ns]&&!u[zs]&&!ni(s))if(o){var a=r.projection,f=o.getImage(s,e,i,a);f&&(this.loadImage(f)?this.Rt=f:f.getState()===go&&(this.Rt=null))}else this.Rt=null;return!!this.Rt},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=nn(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!On(e,r))return null;var o=this.Rt.getExtent(),u=this.Rt.getImage(),s=Qn(o),a=Math.floor(u.width*((r[0]-o[0])/s));if(a<0||a>=u.width)return null;var f=Yn(o),h=Math.floor(u.height*((o[3]-r[1])/f));return h<0||h>=u.height?null:this.getImageData(u,a,h)},n.prototype.renderFrame=function(t,n){var i=this.Rt,r=i.getExtent(),e=i.getResolution(),o=i.getPixelRatio(),u=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,a=t.viewState,f=a.center,h=a.resolution,c=t.size,l=s*e/(h*o),v=Math.round(c[0]*s),d=Math.round(c[1]*s),p=a.rotation;if(p){var y=Math.round(Math.sqrt(v*v+d*d));v=y,d=y}sn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,p,-v/2,-d/2),an(this.inversePixelTransform,this.pixelTransform);var m=hn(this.pixelTransform);this.useContainer(n,m,u.opacity,this.getBackground(t));var w=this.context,b=w.canvas;b.width!=v||b.height!=d?(b.width=v,b.height=d):this.containerReused||w.clearRect(0,0,v,d);var g=!1,x=!0;if(u.extent){var M=Lr(u.extent,a.projection);(g=(x=ti(M,t.extent))&&!jn(M,t.extent))&&this.clipUnrotated(w,t,M)}var _=i.getImage(),S=sn(this.tempTransform,v/2,d/2,l,l,0,o*(r[0]-f[0])/e,o*(f[1]-r[3])/e);this.renderedResolution=e*s/o;var O=_.width*S[0],j=_.height*S[3];if(this.getLayer().getSource().getInterpolate()||A(w,Dh),this.preRender(w,t),x&&O>=.5&&j>=.5){var E=S[4],k=S[5],T=u.opacity,C=void 0;1!==T&&(C=w.globalAlpha,w.globalAlpha=T),w.drawImage(_,0,0,+_.width,+_.height,Math.round(E),Math.round(k),Math.round(O),Math.round(j)),1!==T&&(w.globalAlpha=C)}return this.postRender(w,t),g&&w.restore(),A(w,Bh),m!==b.style.transform&&(b.style.transform=m),this.container},n}(Cg),Ig=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ng=function(t){function n(n){return t.call(this,n)||this}return Ig(n,t),n.prototype.createRenderer=function(){return new Rg(this)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(Eg),zg="preload",Fg="useInterimTilesOnError",Lg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gg=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.preload,delete e.useInterimTilesOnError,(i=t.call(this,e)||this).on,i.once,i.un,i.setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i}return Lg(n,t),n.prototype.getPreload=function(){return this.get(zg)},n.prototype.setPreload=function(t){this.set(zg,t)},n.prototype.getUseInterimTilesOnError=function(){return this.get(Fg)},n.prototype.setUseInterimTilesOnError=function(t){this.set(Fg,t)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(bu),Dg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bg=function(t){function n(n){var i=t.call(this,n)||this;return i.extentChanged=!0,i.Ff=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.Lf=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.Gf=new nh(0,0,0,0),i}return Dg(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==vt||i==pt||i==dt&&!r},n.prototype.getTile=function(t,n,i,r){var e=r.pixelRatio,o=r.viewState.projection,u=this.getLayer(),s=u.getSource().getTile(t,n,i,e,o);return s.getState()==dt&&(u.getUseInterimTilesOnError()?u.getPreload()>0&&(this.Lf=!0):s.setState(vt)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=nn(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!On(e,r))return null;for(var o=n.pixelRatio,u=n.viewState.projection,s=n.viewState,a=i.getRenderSource(),f=a.getTileGridForProjection(s.projection),h=a.getTilePixelRatio(n.pixelRatio),c=f.getZForResolution(s.resolution);c>=f.getMinZoom();--c){var l=f.getTileCoordForCoordAndZ(r,c),v=a.getTile(c,l[1],l[2],o,u);if(!(v instanceof Io||v instanceof yl))return null;if(v.getState()===vt){var d=f.getOrigin(c),p=sa(f.getTileSize(c)),y=f.getResolution(c),m=Math.floor(h*((r[0]-d[0])/y-l[1]*p[0])),w=Math.floor(h*((d[1]-r[1])/y-l[2]*p[1])),b=Math.round(h*a.getGutterForProjection(s.projection));return this.getImageData(v.getImage(),m+b,w+b)}}return null},n.prototype.loadedTileCallback=function(n,i,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,n,i,r)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],r=t.viewState,e=r.projection,u=r.resolution,s=r.center,a=r.rotation,f=t.pixelRatio,h=this.getLayer(),c=h.getSource(),l=c.getRevision(),v=c.getTileGridForProjection(e),d=v.getZForResolution(u,c.zDirection),y=v.getResolution(d),m=t.extent,w=i.extent&&Lr(i.extent,e);w&&(m=Zn(m,Lr(i.extent,e)));var b=c.getTilePixelRatio(f),g=Math.round(t.size[0]*b),x=Math.round(t.size[1]*b);if(a){var M=Math.round(Math.sqrt(g*g+x*x));g=M,x=M}var _=y*g/2/b,S=y*x/2/b,O=[s[0]-_,s[1]-S,s[0]+_,s[1]+S],j=v.getTileRangeForExtentAndZ(m,d),E={};E[d]={};var k=this.createLoadedTileFinder(c,e,E),T=this.tmpExtent,C=this.Gf;this.Lf=!1;for(var P=j.minX;P<=j.maxX;++P)for(var R=j.minY;R<=j.maxY;++R){var I=this.getTile(d,P,R,t);if(this.isDrawableTile(I)){var N=o(this);if(I.getState()==vt){E[d][I.tileCoord.toString()]=I;var z=I.inTransition(N);this.Lf||!z&&-1!==this.renderedTiles.indexOf(I)||(this.Lf=!0)}if(1===I.getAlpha(N,t.time))continue}var F=v.getTileCoordChildTileRange(I.tileCoord,C,T),L=!1;F&&(L=k(d+1,F)),L||v.forEachTileCoordParentTileRange(I.tileCoord,k,C,T)}var G=y/u;sn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/b,1/b,a,-g/2,-x/2);var D=hn(this.pixelTransform);this.useContainer(n,D,i.opacity,this.getBackground(t));var B=this.context,U=B.canvas;an(this.inversePixelTransform,this.pixelTransform),sn(this.tempTransform,g/2,x/2,G,G,0,-g/2,-x/2),U.width!=g||U.height!=x?(U.width=g,U.height=x):this.containerReused||B.clearRect(0,0,g,x),w&&this.clipUnrotated(B,t,w),c.getInterpolate()||A(B,Dh),this.preRender(B,t),this.renderedTiles.length=0;var q,V,W,X=Object.keys(E).map(Number);X.sort(p),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(q=[],V=[]):X=X.reverse();for(var H=X.length-1;H>=0;--H){var K=X[H],Y=c.getTilePixelSize(K,f,e),Z=v.getResolution(K)/y,J=Y[0]*Z*G,$=Y[1]*Z*G,Q=v.getTileCoordForCoordAndZ(Jn(O),K),tt=v.getTileCoordExtent(Q),nt=nn(this.tempTransform,[b*(tt[0]-O[0])/y,b*(O[3]-tt[3])/y]),it=b*c.getGutterForProjection(e),rt=E[K];for(var et in rt){var ot=(I=rt[et]).tileCoord,ut=Q[1]-ot[1],st=Math.round(nt[0]-(ut-1)*J),at=Q[2]-ot[2],ft=Math.round(nt[1]-(at-1)*$),ht=st-(P=Math.round(nt[0]-ut*J)),ct=ft-(R=Math.round(nt[1]-at*$)),lt=d===K,dt=!1;if(!(z=lt&&1!==I.getAlpha(o(this),t.time)))if(q){W=[P,R,P+ht,R,P+ht,R+ct,P,R+ct];for(var pt=0,yt=q.length;pt<yt;++pt)if(d!==K&&K<V[pt]){var mt=q[pt];ti([P,R,P+ht,R+ct],[mt[0],mt[3],mt[4],mt[7]])&&(dt||(B.save(),dt=!0),B.beginPath(),B.moveTo(W[0],W[1]),B.lineTo(W[2],W[3]),B.lineTo(W[4],W[5]),B.lineTo(W[6],W[7]),B.moveTo(mt[6],mt[7]),B.lineTo(mt[4],mt[5]),B.lineTo(mt[2],mt[3]),B.lineTo(mt[0],mt[1]),B.clip())}q.push(W),V.push(K)}else B.clearRect(P,R,ht,ct);this.drawTileImage(I,t,P,R,ht,ct,it,lt),q&&!z?(dt&&B.restore(),this.renderedTiles.unshift(I)):this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,c,I)}}this.renderedRevision=l,this.renderedResolution=y,this.extentChanged=!this.Ff||!In(this.Ff,O),this.Ff=O,this.renderedPixelRatio=f,this.renderedProjection=e,this.manageTilePyramid(t,c,v,f,e,m,d,h.getPreload()),this.scheduleExpireCache(t,c),this.postRender(B,t),i.extent&&B.restore(),A(B,Bh),D!==U.style.transform&&(U.style.transform=D);var wt=Iu(i.opacity),bt=this.container;return wt!==bt.style.opacity&&(bt.style.opacity=wt),this.container},n.prototype.drawTileImage=function(t,n,i,r,e,u,s,a){var f=this.getTileImage(t);if(f){var h=o(this),c=a?t.getAlpha(h,n.time):1,l=c!==this.context.globalAlpha;l&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(f,s,s,f.width-2*s,f.height-2*s,i,r,e,u),l&&this.context.restore(),1!==c?n.animate=!0:a&&t.endTransition(h)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(t,n,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,n);t.postRenderFunctions.push(i)}},n.prototype.updateUsedTiles=function(t,n,i){var r=o(n);r in t||(t[r]={}),t[r][i.getKey()]=!0},n.prototype.manageTilePyramid=function(t,n,i,r,e,u,s,a,f){var h=o(n);h in t.wantedTiles||(t.wantedTiles[h]={});var c,l,v,d,p,y,m=t.wantedTiles[h],w=t.tileQueue,b=0;for(y=i.getMinZoom();y<=s;++y)for(l=i.getTileRangeForExtentAndZ(u,y,l),v=i.getResolution(y),d=l.minX;d<=l.maxX;++d)for(p=l.minY;p<=l.maxY;++p)s-y<=a?(++b,(c=n.getTile(y,d,p,r,e)).getState()==ct&&(m[c.getKey()]=!0,w.isKeyQueued(c.getKey())||w.enqueue([c,h,i.getTileCoordCenter(c.tileCoord),v])),void 0!==f&&f(c)):n.useTile(y,d,p,e);n.updateCacheSize(b,e)},n}(Cg),Ug=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qg=function(t){function n(n){return t.call(this,n)||this}return Ug(n,t),n.prototype.createRenderer=function(){return new Bg(this)},n}(Gg),Vg=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wg=!0;try{new ImageData(10,10)}catch(t){Wg=!1}function Xg(t,n,i){if(Wg)return new ImageData(t,n,i);Tg||(Tg=document.createElement("canvas").getContext("2d"));var r=Tg.createImageData(n,i);return r.data.set(t),r}function Hg(t){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}function i(t,i,r){return n?new ImageData(t,i,r):{data:t,width:i,height:r}}return function(n){var r=n.buffers,e=n.meta,o=n.imageOps,u=n.width,s=n.height,a=r.length,f=r[0].byteLength;if(o){for(var h=new Array(a),c=0;c<a;++c)h[c]=i(new Uint8ClampedArray(r[c]),u,s);return t(h,e).data.buffer}var l=new Uint8ClampedArray(f),v=new Array(a),d=new Array(a);for(c=0;c<a;++c)v[c]=new Uint8ClampedArray(r[c]),d[c]=[0,0,0,0];for(var p=0;p<f;p+=4){for(var y=0;y<a;++y){var m=v[y];d[y][0]=m[p],d[y][1]=m[p+1],d[y][2]=m[p+2],d[y][3]=m[p+3]}var w=t(d,e);l[p]=w[0],l[p+1]=w[1],l[p+2]=w[2],l[p+3]=w[3]}return l.buffer}}function Kg(t,n){var i=Object.keys(t.lib||{}).map((function(n){return"var "+n+" = "+t.lib[n].toString()+";"})).concat(["var __minion__ = ("+Hg.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",n),r}var Yg=function(t){function n(n){var i,r=t.call(this)||this;r._imageOps=!!n.imageOps,i=0===n.threads?0:r._imageOps?1:n.threads||1;var e=new Array(i);if(i)for(var o=0;o<i;++o)e[o]=Kg(n,r._onWorkerMessage.bind(r,o));else e[0]=function(t,n){var i=Hg(t.operation),r=!1;return{postMessage:function(t){setTimeout((function(){r||n({data:{buffer:i(t),meta:t.meta}})}),0)},terminate:function(){r=!0}}}(n,r._onWorkerMessage.bind(r,0));return r._workers=e,r._queue=[],r._maxQueueLength=n.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return Vg(n,t),n.prototype.process=function(t,n,i){this._enqueue({inputs:t,meta:n,callback:i}),this._dispatch()},n.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},n.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var n=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map((function(t){return t.data.buffer})),e=this._workers.length;if(this._running=e,1!==e)for(var o=t.inputs[0].data.length,u=4*Math.ceil(o/4/e),s=0;s<e;++s){for(var a=s*u,f=[],h=0,c=r.length;h<c;++h)f.push(r[h].slice(a,a+u));this._workers[s].postMessage({buffers:f,meta:t.meta,imageOps:this._imageOps,width:n,height:i},f)}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:n,height:i},r)}},n.prototype._onWorkerMessage=function(t,n){this.disposed||(this._dataLookup[t]=n.data,--this._running,0===this._running&&this._resolveJob())},n.prototype._resolveJob=function(){var t,n,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{var e=i.inputs[0].data.length;t=new Uint8ClampedArray(e),n=new Array(r);for(var o=4*Math.ceil(e/4/r),u=0;u<r;++u){var s=this._dataLookup[u].buffer,a=u*o;t.set(new Uint8ClampedArray(s),a),n[u]=this._dataLookup[u].meta}}this._job=null,this._dataLookup={},i.callback(null,Xg(t,i.inputs[0].width,i.inputs[0].height),n),this._dispatch()},n.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},n}(v),Zg="beforeoperations",Jg="afteroperations",$g="pixel",Qg="image",tx=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.extent=i.extent,e.resolution=i.viewState.resolution/i.pixelRatio,e.data=r,e}return Vg(n,t),n}(c),nx=function(t){function n(n){var i=t.call(this,{projection:null})||this;i.on,i.once,i.un,i.Df=null,i.Bf=void 0!==n.operationType?n.operationType:$g,i.Uf=void 0!==n.threads?n.threads:1,i.qf=function(t){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=ex(t[r]);return i}(n.sources);for(var r,e=i.changed.bind(i),u=0,s=i.qf.length;u<s;++u)i.qf[u].addEventListener(N,e);return i.hr=new Rs((function(){return 1}),i.changed.bind(i)),i.Vf,i.Wf=null,i.Sf,i.Ki={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=i.qf,r.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.hr,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:o(i),renderTargets:{}},i.setAttributions((function(t){for(var i=[],r=0,e=n.sources.length;r<e;++r){var o=n.sources[r],u=(o instanceof hd?o:o.getSource()).getAttributions();if("function"==typeof u){var s=u(t);i.push.apply(i,s)}}return 0!==i.length?i:null})),void 0!==n.operation&&i.setOperation(n.operation,n.lib),i}return Vg(n,t),n.prototype.setOperation=function(t,n){this.Df&&this.Df.dispose(),this.Df=new Yg({operation:t,imageOps:this.Bf===Qg,queue:1,lib:n,threads:this.Uf}),this.changed()},n.prototype.Xf=function(t,n,i){var r=A({},this.Ki);r.viewState=A({},r.viewState);var e=Xn(t);r.extent=t.slice(),r.size[0]=Math.round(Qn(t)/n),r.size[1]=Math.round(Yn(t)/n),r.time=Date.now();var o=r.viewState;return o.center=e,o.projection=i,o.resolution=n,r},n.prototype.Hf=function(){for(var t=!0,n=0,i=this.qf.length;n<i;++n)if(this.qf[n].getSource().getState()!==pu){t=!1;break}return t},n.prototype.getImage=function(t,n,i,r){if(!this.Hf())return null;var e=this.Xf(t,n,r);if(this.Vf=e,this.Wf){var o=this.Wf.getResolution(),u=this.Wf.getExtent();n===o&&In(t,u)||(this.Wf=null)}return this.Wf&&this.getRevision()===this.Sf||this.Kf(),e.tileQueue.loadMoreTiles(16,16),e.animate&&requestAnimationFrame(this.changed.bind(this)),this.Wf},n.prototype.Kf=function(){for(var t=this.Vf,n=this.qf.length,i=new Array(n),r=0;r<n;++r){t.layerIndex=r;var e=rx(this.qf[r],t);if(!e)return;i[r]=e}var o={};this.dispatchEvent(new tx(Zg,t,o)),this.Df.process(i,o,this.Yf.bind(this,t))},n.prototype.Yf=function(t,n,i,r){if(!n&&i){var e=t.extent,o=t.viewState.resolution;if(o===this.Vf.viewState.resolution&&In(e,this.Vf.extent)){var u;if(this.Wf)u=this.Wf.getImage().getContext("2d");else u=jo(Math.round(Qn(e)/o),Math.round(Yn(e)/o)),this.Wf=new Oo(e,o,1,u.canvas);u.putImageData(i,0,0),this.changed(),this.Sf=this.getRevision(),this.dispatchEvent(new tx(Jg,t,r)),t.animate&&requestAnimationFrame(this.changed.bind(this))}}},n.prototype.disposeInternal=function(){this.Df&&this.Df.dispose(),t.prototype.disposeInternal.call(this)},n}(Hb);nx.prototype.dispose;var ix=null;function rx(t,n){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(n))return null;var r=n.size[0],e=n.size[1];if(0===r||0===e)return null;var o,u=i.renderFrame(n,null);if(u instanceof HTMLCanvasElement)o=u;else{if(u&&(o=u.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===e)return o.getContext("2d").getImageData(0,0,r,e)}if(ix){var s=ix.canvas;s.width!==r||s.height!==e?ix=jo(r,e):ix.clearRect(0,0,r,e)}else ix=jo(r,e);return ix.drawImage(o,0,0,r,e),ix.getImageData(0,0,r,e)}function ex(t){var n;return t instanceof hd?t instanceof dd?n=new qg({source:t}):t instanceof Hb&&(n=new Ng({source:t})):n=t,n}var ox=nx,ux=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sx=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Sg],ax={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},fx={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},hx=function(t){function n(n){var i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var r=n.layer.indexOf("-"),e=-1==r?n.layer:n.layer.slice(0,r),o=fx[e],u=ax[n.layer],s=void 0!==n.url?n.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+n.layer+"/{z}/{x}/{y}."+u.extension;return t.call(this,{attributions:sx,cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:i,maxZoom:null!=n.maxZoom?n.maxZoom:o.maxZoom,minZoom:null!=n.minZoom?n.minZoom:o.minZoom,opaque:u.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:s,wrapX:n.wrapX,zDirection:n.zDirection})||this}return ux(n,t),n}(Sd),cx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lx=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).Mf=r.params||{},i.Sa=void 0===r.hidpi||r.hidpi,i.To=[1/0,1/0,-1/0,-1/0],i.setKey(i.Zf()),i}return cx(n,t),n.prototype.Zf=function(){var t=0,n=[];for(var i in this.Mf)n[t++]=i+"-"+this.Mf[i];return n.join("/")},n.prototype.getParams=function(){return this.Mf},n.prototype.jf=function(t,n,i,r,e,o){var u=this.urls;if(u){var s,a=e.getCode().split(/:(?=\d+$)/).pop();if(o.SIZE=n[0]+","+n[1],o.BBOX=i.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),1==u.length)s=u[0];else s=u[yi(Yf(t),u.length)];return sc(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},n.prototype.getTilePixelRatio=function(t){return this.Sa?t:1},n.prototype.updateParams=function(t){A(this.Mf,t),this.setKey(this.Zf())},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.Sa||(n=1);var e=r.getTileCoordExtent(t,this.To),o=sa(r.getTileSize(t[0]),this.tmpSize);1!=n&&(o=ua(o,n,this.tmpSize));var u={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return A(u,this.Mf),this.jf(t,o,e,n,i,u)}},n}(bd),vx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dx=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,n){var r=t.getTileCoord()[0],e=sa(i.tileGrid.getTileSize(r)),o=jo(e[0],e[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,e[0]+.5,e[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,e[0]/2,e[1]/2,e[0]),o.fillText(n,e[0]/2,e[1]/2,e[0]),t.setImage(o.canvas)}})||this}return vx(n,t),n}(Sd),px=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yx=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;if(void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:br("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:du,tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).Jf=null,i.Eo=n.tileSize,n.url)if(n.jsonp)mh(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var e=new XMLHttpRequest;e.addEventListener("load",i.$f.bind(i)),e.addEventListener("error",i.Qf.bind(i)),e.open("GET",n.url),e.send()}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):St(!1,51);return i}return px(n,t),n.prototype.$f=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},n.prototype.Qf=function(t){this.handleTileJSONError()},n.prototype.getTileJSON=function(){return this.Jf},n.prototype.handleTileJSONResponse=function(t){var n,i=br("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=kr(i,r);n=oi(t.bounds,e)}var o=nc(r),u=t.minzoom||0,s=$h({extent:o,maxZoom:t.maxzoom||22,minZoom:u,tileSize:this.Eo});if(this.tileGrid=s,this.tileUrlFunction=rc(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var a=void 0!==n?n:o;this.setAttributions((function(n){return ti(a,n.extent)?[t.attribution]:null}))}this.Jf=t,this.setState(pu)},n.prototype.handleTileJSONError=function(){this.setState(yu)},n}(bd),mx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wx=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.params||{},u=!("TRANSPARENT"in o)||o.TRANSPARENT;return(i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:!u,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).Ou=void 0!==r.gutter?r.gutter:0,i.Mf=o,i.Cf=!0,i.Rf=r.serverType,i.Sa=void 0===r.hidpi||r.hidpi,i.To=[1/0,1/0,-1/0,-1/0],i.Pf(),i.setKey(i.Zf()),i}return mx(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){var e=br(i),o=this.getProjection(),u=this.getTileGrid();u||(u=this.getTileGridForProjection(e));var s=u.getZForResolution(n,this.zDirection),a=u.getTileCoordForCoordAndZ(t,s);if(!(u.getResolutions().length<=a[0])){var f=u.getResolution(a[0]),h=u.getTileCoordExtent(a,this.To),c=sa(u.getTileSize(a[0]),this.tmpSize),l=this.Ou;0!==l&&(c=ea(c,l,this.tmpSize),h=Mn(h,f*l,h)),o&&o!==e&&(f=Vh(o,e,t,f),h=Cr(h,e,o),t=Tr(t,e,o));var v={SERVICE:"WMS",VERSION:ig,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.Mf.LAYERS};A(v,this.Mf,r);var d=Math.floor((t[0]-h[0])/f),p=Math.floor((h[3]-t[1])/f);return v[this.Cf?"I":"X"]=d,v[this.Cf?"J":"Y"]=p,this.jf(a,c,h,1,o||e,v)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:ig,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.Mf.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return A(i,n),sc(this.urls[0],i)}},n.prototype.getGutter=function(){return this.Ou},n.prototype.getParams=function(){return this.Mf},n.prototype.jf=function(t,n,i,r,e,o){var u=this.urls;if(u){if(o.WIDTH=n[0],o.HEIGHT=n[1],o[this.Cf?"CRS":"SRS"]=e.getCode(),"STYLES"in this.Mf||(o.STYLES=""),1!=r)switch(this.Rf){case eg:var s=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case og:o.MAP_RESOLUTION=90*r;break;case rg:case ug:o.DPI=90*r;break;default:St(!1,52)}var a,f=e.getAxisOrientation(),h=i;if(this.Cf&&"ne"==f.substr(0,2)){var c=void 0;c=i[0],h[0]=i[1],h[1]=c,c=i[2],h[2]=i[3],h[3]=c}if(o.BBOX=h.join(","),1==u.length)a=u[0];else a=u[yi(Yf(t),u.length)];return sc(a,o)}},n.prototype.getTilePixelRatio=function(t){return this.Sa&&void 0!==this.Rf?t:1},n.prototype.Zf=function(){var t=0,n=[];for(var i in this.Mf)n[t++]=i+"-"+this.Mf[i];return n.join("/")},n.prototype.updateParams=function(t){A(this.Mf,t),this.Pf(),this.setKey(this.Zf())},n.prototype.Pf=function(){var t=this.Mf.VERSION||ig;this.Cf=Hi(t,"1.3")>=0},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.Sa&&void 0!==this.Rf||(n=1);var e=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.To),u=sa(r.getTileSize(t[0]),this.tmpSize),s=this.Ou;0!==s&&(u=ea(u,s,this.tmpSize),o=Mn(o,e*s,o)),1!=n&&(u=ua(u,n,this.tmpSize));var a={SERVICE:"WMS",VERSION:ig,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return A(a,this.Mf),this.jf(t,u,o,n,i,a)}},n}(bd),bx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gx=function(t){function n(n,i,r,e,o,u){var s=t.call(this,n,i)||this;return s.Pt=r,s.ot=e,s.th=o,s.nh=null,s.ih=null,s.q=null,s.rh=u,s}return bx(n,t),n.prototype.getImage=function(){return null},n.prototype.getData=function(t){if(!this.nh||!this.ih)return null;var n=(t[0]-this.ot[0])/(this.ot[2]-this.ot[0]),i=(t[1]-this.ot[1])/(this.ot[3]-this.ot[1]),r=this.nh[Math.floor((1-i)*this.nh.length)];if("string"!=typeof r)return null;var e=r.charCodeAt(Math.floor(n*r.length));e>=93&&e--,e>=35&&e--;var o=null;if((e-=32)in this.ih){var u=this.ih[e];o=this.q&&u in this.q?this.q[u]:u}return o},n.prototype.forDataAtCoordinate=function(t,n,i){this.state==pt&&!0===i?(this.state=ct,Z(this,N,(function(i){n(this.getData(t))}),this),this.eh()):!0===i?setTimeout(function(){n(this.getData(t))}.bind(this),0):n(this.getData(t))},n.prototype.getKey=function(){return this.Pt},n.prototype.Nf=function(){this.state=dt,this.changed()},n.prototype.Bt=function(t){this.nh=t.grid,this.ih=t.keys,this.q=t.data,this.state=vt,this.changed()},n.prototype.eh=function(){if(this.state==ct)if(this.state=lt,this.rh)mh(this.Pt,this.Bt.bind(this),this.Nf.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.$f.bind(this)),t.addEventListener("error",this.Qf.bind(this)),t.open("GET",this.Pt),t.send()}},n.prototype.$f=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.Nf()}this.Bt(i)}else this.Nf()},n.prototype.Qf=function(t){this.Nf()},n.prototype.load=function(){this.th?this.eh():this.setState(pt)},n}(xt),xx=function(t){function n(n){var i=t.call(this,{projection:br("EPSG:3857"),state:du,zDirection:n.zDirection})||this;if(i.th=void 0===n.preemptive||n.preemptive,i.oh=oc,i.uh=void 0,i.rh=n.jsonp||!1,n.url)if(i.rh)mh(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var r=new XMLHttpRequest;r.addEventListener("load",i.$f.bind(i)),r.addEventListener("error",i.Qf.bind(i)),r.open("GET",n.url),r.send()}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):St(!1,51);return i}return bx(n,t),n.prototype.$f=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},n.prototype.Qf=function(t){this.handleTileJSONError()},n.prototype.getTemplate=function(){return this.uh},n.prototype.forDataAtCoordinateAndResolution=function(t,n,i,r){if(this.tileGrid){var e=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,r)}else!0===r?setTimeout((function(){i(null)}),0):i(null)},n.prototype.handleTileJSONError=function(){this.setState(yu)},n.prototype.handleTileJSONResponse=function(t){var n,i=br("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=kr(i,r);n=oi(t.bounds,e)}var o=nc(r),u=t.minzoom||0,s=$h({extent:o,maxZoom:t.maxzoom||22,minZoom:u});this.tileGrid=s,this.uh=t.template;var a=t.grids;if(a){if(this.oh=rc(a,s),void 0!==t.attribution){var f=void 0!==n?n:o;this.setAttributions((function(n){return ti(f,n.extent)?[t.attribution]:null}))}this.setState(pu)}else this.setState(yu)},n.prototype.getTile=function(t,n,i,r,e){var o=Wf(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var u=[t,n,i],s=this.getTileCoordForTileUrlFunction(u,e),a=this.oh(s,r,e),f=new gx(u,void 0!==a?ct:pt,void 0!==a?a:"",this.tileGrid.getTileCoordExtent(u),this.th,this.rh);return this.tileCache.set(o,f),f},n.prototype.useTile=function(t,n,i){var r=Wf(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(dd),Mx="KVP",_x="REST",Sx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ox=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(r=n.interpolate);var e=void 0!==n.requestEncoding?n.requestEncoding:Mx,o=n.tileGrid,u=n.urls;return void 0===u&&void 0!==n.url&&(u=uc(n.url)),(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,urls:u,wrapX:void 0!==n.wrapX&&n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).sh=void 0!==n.version?n.version:"1.0.0",i.Fe=void 0!==n.format?n.format:"image/jpeg",i.ah=void 0!==n.dimensions?n.dimensions:{},i.Gu=n.layer,i.fh=n.matrixSet,i.K=n.style,i.hh=e,i.setKey(i.lh()),u&&u.length>0&&(i.tileUrlFunction=ec(u.map(i.createFromWMTSTemplate.bind(i)))),i}return Sx(n,t),n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.setTileUrlFunction(ec(t.map(this.createFromWMTSTemplate.bind(this))),n)},n.prototype.getDimensions=function(){return this.ah},n.prototype.getFormat=function(){return this.Fe},n.prototype.getLayer=function(){return this.Gu},n.prototype.getMatrixSet=function(){return this.fh},n.prototype.getRequestEncoding=function(){return this.hh},n.prototype.getStyle=function(){return this.K},n.prototype.getVersion=function(){return this.sh},n.prototype.lh=function(){var t=0,n=[];for(var i in this.ah)n[t++]=i+"-"+this.ah[i];return n.join("/")},n.prototype.updateDimensions=function(t){A(this.ah,t),this.setKey(this.lh())},n.prototype.createFromWMTSTemplate=function(t){var n=this.hh,i={layer:this.Gu,style:this.K,tilematrixset:this.fh};n==Mx&&A(i,{Service:"WMTS",Request:"GetTile",Version:this.sh,Format:this.Fe}),t=n==Mx?sc(t,i):t.replace(/\{(\w+?)\}/g,(function(t,n){return n.toLowerCase()in i?i[n.toLowerCase()]:t}));var r=this.tileGrid,e=this.ah;return function(i,o,u){if(i){var s={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};A(s,e);var a=t;return a=n==Mx?sc(a,s):a.replace(/\{(\w+?)\}/g,(function(t,n){return s[n]}))}}},n}(bd);var jx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ex="renderOrder",kx=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,(i=t.call(this,e)||this).dh=void 0!==r.declutter&&r.declutter,i.ph=void 0!==r.renderBuffer?r.renderBuffer:100,i.K=null,i.$=void 0,i.setStyle(r.style),i.yh=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.mh=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return jx(n,t),n.prototype.getDeclutter=function(){return this.dh},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderBuffer=function(){return this.ph},n.prototype.getRenderOrder=function(){return this.get(Ex)},n.prototype.getStyle=function(){return this.K},n.prototype.getStyleFunction=function(){return this.$},n.prototype.getUpdateWhileAnimating=function(){return this.yh},n.prototype.getUpdateWhileInteracting=function(){return this.mh},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new rd(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(Ex,t)},n.prototype.setStyle=function(t){this.K=void 0!==t?t:Yv,this.$=null===t?void 0:Hv(this.K),this.changed()},n}(bu);var Ax=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tx=function(t){function n(n,i){var r=this,e=i.uniforms||{},u=[1,0,0,1,0,0];e[Jc]=u,(r=t.call(this,n,{uniforms:e,postProcesses:i.postProcesses})||this).ready=!1,r.wh=-1,r.bh=new Vc(fc,lc),r.gh=new Vc(fc,lc),r.xh=new Vc(hc,lc),r.Zu=i.vertexShader,r.Ju=i.fragmentShader,r.Yu,r.Mh=!(!i.hitFragmentShader||!i.hitVertexShader),r._h=i.hitVertexShader,r.Sh=i.hitFragmentShader,r.Oh;var s=i.attributes?i.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:rl.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:rl.FLOAT},{name:"a_index",size:1,type:rl.FLOAT}].concat(s),r.hitDetectionAttributes=[{name:"a_position",size:2,type:rl.FLOAT},{name:"a_index",size:1,type:rl.FLOAT},{name:"a_hitColor",size:4,type:rl.FLOAT},{name:"a_featureUid",size:1,type:rl.FLOAT}].concat(s),r.customAttributes=i.attributes?i.attributes:[],r.Yi=[1/0,1/0,-1/0,-1/0],r.jh=u,r.Eh=[1,0,0,1,0,0],r.kh=[1,0,0,1,0,0],r.Ah=new Float32Array(0),r.Th=new Float32Array(0),r.Ch,r.Ph=0,r.Rh=function(){var t='function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}(e)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var u="change",f=function(){function t(){e(this,t),this.disposed=!1}return n(t,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}]),t}(),l=function(){function t(n){e(this,t),this.propagationStopped,this.defaultPrevented,this.type=n,this.target=null}return n(t,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),t}();function c(){}var v="function"==typeof Object.assign?Object.assign:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}return n};function h(e){for(var t in e)delete e[t]}var p=function(t){r(o,f);var i=a(o);function o(t){var n;return e(this,o),(n=i.call(this)).eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return n(o,[{key:"addEventListener",value:function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);-1===r.indexOf(t)&&r.push(t)}}},{key:"dispatchEvent",value:function(e){var t="string"==typeof e,n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(r){var i=t?new l(e):e;i.target||(i.target=this.eventTarget_||this);var o,s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,a[n]=0),++s[n];for(var u=0,f=r.length;u<f;++u)if(!1===(o="handleEvent"in r[u]?r[u].handleEvent(i):r[u].call(this,i))||i.propagationStopped){o=!1;break}if(0==--s[n]){var v=a[n];for(delete a[n];v--;)this.removeEventListener(n,c);delete s[n]}return o}}},{key:"disposeInternal",value:function(){this.listeners_&&h(this.listeners_)}},{key:"getListeners",value:function(e){return this.listeners_&&this.listeners_[e]||void 0}},{key:"hasListener",value:function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(e,t){var n=this.listeners_&&this.listeners_[e];if(n){var r=n.indexOf(t);-1!==r&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=c,++this.pendingRemovals_[e]):(n.splice(r,1),0===n.length&&delete this.listeners_[e]))}}}]),o}();function d(e,t,n,r,i){if(r&&r!==e&&(n=n.bind(r)),i){var o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}var s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function y(e,t,n,r){return d(e,t,n,r,!0)}function g(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),h(e))}var _=function(t){r(o,p);var i=a(o);function o(){var t;return e(this,o),(t=i.call(this)).on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return n(o,[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(u)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(e,t){if(Array.isArray(e)){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=d(this,e[i],t);return r}return d(this,e,t)}},{key:"onceInternal",value:function(e,t){var n;if(Array.isArray(e)){var r=e.length;n=new Array(r);for(var i=0;i<r;++i)n[i]=y(this,e[i],t)}else n=y(this,e,t);return t.ol_key=n,n}},{key:"unInternal",value:function(e,t){var n=t.ol_key;if(n)!function(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)g(e[t]);else g(e)}(n);else if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}]),o}();_.prototype.on,_.prototype.once,_.prototype.un;var b="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";b.indexOf("firefox"),-1!==b.indexOf("safari")&&-1==b.indexOf("chrom")&&(b.indexOf("version/15.4")>=0||b.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==b.indexOf("webkit")&&b.indexOf("edge"),b.indexOf("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}}(),new Array(6);var O="GENERATE_BUFFERS",w=[],k={vertexPosition:0,indexPosition:0};function m(e,t,n,r,i){e[t+0]=n,e[t+1]=r,e[t+2]=i}function E(e,t,n,r,i,o){var s=3+i,a=e[t+0],u=e[t+1],f=w;f.length=i;for(var l=0;l<f.length;l++)f[l]=e[t+2+l];var c=o?o.vertexPosition:0,v=o?o.indexPosition:0,h=c/s;return m(n,c,a,u,0),f.length&&n.set(f,c+3),m(n,c+=s,a,u,1),f.length&&n.set(f,c+3),m(n,c+=s,a,u,2),f.length&&n.set(f,c+3),m(n,c+=s,a,u,3),f.length&&n.set(f,c+3),c+=s,r[v++]=h,r[v++]=h+1,r[v++]=h+3,r[v++]=h+1,r[v++]=h+2,r[v++]=h+3,k.vertexPosition=c,k.indexPosition=v,k}var x=self;x.onmessage=function(e){var t=e.data;if(t.type===O){for(var n,r=t.customAttributesCount,i=2+r,o=new Float32Array(t.renderInstructions),s=o.length/i,a=4*s*(r+3),u=new Uint32Array(6*s),f=new Float32Array(a),l=0;l<o.length;l+=i)n=E(o,l,f,u,r,n);var c=v({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:o.buffer},t);x.postMessage(c,[f.buffer,u.buffer,o.buffer])}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}(),r.Rh.addEventListener("message",function(t){var n=t.data;if(n.type===Ol){var i=n.projectionTransform;n.hitDetection?(this.gh.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.gh)):(this.bh.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.bh)),this.xh.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.xh),this.Eh=i,an(this.kh,this.Eh),n.hitDetection?this.Th=new Float32Array(t.data.renderInstructions):(this.Ah=new Float32Array(t.data.renderInstructions),n.generateBuffersRun===this.Ph&&(this.ready=!0)),this.getLayer().changed()}}.bind(r)),r.Ih={},r.Nh=0;var a=r.getLayer().getSource();return r.zh=[Y(a,Ed,r.Fh,r),Y(a,kd,r.Lh,r),Y(a,Td,r.Gh,r),Y(a,Ad,r.Dh,r)],a.forEachFeature(function(t){this.Ih[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.Nh++}.bind(r)),r}return Ax(n,t),n.prototype.afterHelperCreated=function(){this.Yu=this.helper.getProgram(this.Ju,this.Zu),this.Mh&&(this.Oh=this.helper.getProgram(this.Sh,this._h),this.Ch=new ll(this.helper))},n.prototype.Fh=function(t){var n=t.feature;this.Ih[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.Nh++},n.prototype.Lh=function(t){var n=t.feature;this.Ih[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}},n.prototype.Gh=function(t){var n=t.feature;delete this.Ih[o(n)],this.Nh--},n.prototype.Dh=function(){this.Ih={},this.Nh=0},n.prototype.renderFrame=function(t){var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState.projection,r=this.getLayer().getSource().getWrapX()&&i.canWrapX(),e=i.getExtent(),o=t.extent,u=r?Qn(e):null,s=r?Math.ceil((o[2]-e[2])/u)+1:1,a=r?Math.floor((o[0]-e[0])/u):0,f=a,h=this.xh.getSize();do{this.helper.makeProjectionTransform(t,this.jh),un(this.jh,f*u,0),$t(this.jh,this.kh),this.helper.applyUniforms(t),this.helper.drawElements(0,h)}while(++f<s);this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var c=this.helper.getCanvas();return this.Mh&&(this.renderHitDetection(t,a,s,u),this.Ch.clearCachedData()),this.postRender(n,t),c},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),i=n.getSource(),r=t.viewState,e=!t.viewHints[Ns]&&!t.viewHints[zs],o=!In(this.Yi,t.extent),u=this.wh<i.getRevision();if(u&&(this.wh=i.getRevision()),e&&(o||u)){var s=r.projection,a=r.resolution,f=n instanceof kx?n.getRenderBuffer():0,h=Mn(t.extent,f*a);i.loadFeatures(h,a,s),this.Bh(t),this.Yi=t.extent.slice()}return this.helper.useProgram(this.Yu),this.helper.prepareDraw(t),this.helper.bindBuffer(this.bh),this.helper.bindBuffer(this.xh),this.helper.enableAttributes(this.attributes),!0},n.prototype.Bh=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var i,r,e=(2+this.customAttributes.length)*this.Nh;if(this.Ah&&this.Ah.length===e||(this.Ah=new Float32Array(e)),this.Mh){var o=(7+this.customAttributes.length)*this.Nh;this.Th&&this.Th.length===o||(this.Th=new Float32Array(o))}var u,s=[],a=[],f=0,h=0;for(var c in this.Ih)if((r=(i=this.Ih[c]).geometry)&&r.getType()===Pt.POINT){s[0]=r.getFlatCoordinates()[0],s[1]=r.getFlatCoordinates()[1],nn(n,s),u=Tl(h+6,a),this.Ah[f++]=s[0],this.Ah[f++]=s[1],this.Mh&&(this.Th[h++]=s[0],this.Th[h++]=s[1],this.Th[h++]=u[0],this.Th[h++]=u[1],this.Th[h++]=u[2],this.Th[h++]=u[3],this.Th[h++]=Number(c));for(var l=void 0,v=0;v<this.customAttributes.length;v++)l=this.customAttributes[v].callback(i.feature,i.properties),this.Ah[f++]=l,this.Mh&&(this.Th[h++]=l)}var d={type:Ol,renderInstructions:this.Ah.buffer,customAttributesCount:this.customAttributes.length};if(d.projectionTransform=n,d.generateBuffersRun=++this.Ph,this.ready=!1,this.Rh.postMessage(d,[this.Ah.buffer]),this.Ah=null,this.Mh){var p={type:Ol,renderInstructions:this.Th.buffer,customAttributesCount:5+this.customAttributes.length};p.projectionTransform=n,p.hitDetection=!0,this.Rh.postMessage(p,[this.Th.buffer]),this.Th=null}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){if(St(this.Mh,66),this.Th){var o=nn(n.coordinateToPixelTransform,t.slice()),u=this.Ch.readPixel(o[0]/2,o[1]/2),s=Cl([u[0]/255,u[1]/255,u[2]/255,u[3]/255]),a=this.Th[s],f=Math.floor(a).toString(),h=this.getLayer().getSource().getFeatureByUid(f);return h?r(h,this.getLayer(),null):void 0}},n.prototype.renderHitDetection=function(t,n,i,r){if(this.gh.getSize()){var e=n;this.Ch.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Oh),this.helper.prepareDrawToRenderTarget(t,this.Ch,!0),this.helper.bindBuffer(this.gh),this.helper.bindBuffer(this.xh),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(t,this.jh),un(this.jh,e*r,0),$t(this.jh,this.kh),this.helper.applyUniforms(t);var o=this.xh.getSize();this.helper.drawElements(0,o)}while(++e<i)}},n.prototype.disposeInternal=function(){this.Rh.terminate(),this.Gu=null,this.zh.forEach((function(t){J(t)})),this.zh=null,t.prototype.disposeInternal.call(this)},n}(Pl),Cx={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Px=[Cx.FILL],Rx=[Cx.STROKE],Ix=[Cx.BEGIN_PATH],Nx=[Cx.CLOSE_PATH],zx=Cx,Fx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Lx=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=i,o.pixelRatio=e,o.maxLineWidth=0,o.resolution=r,o.Uh=null,o.qh=null,o.Vh=null,o.instructions=[],o.coordinates=[],o.Wh=[],o.hitDetectionInstructions=[],o.state={},o}return Fx(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map((function(t){return t*n}))},n.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),r=this.Wh,e=this.coordinates,o=e.length,u=0,s=t.length;u<s;u+=n)r[0]=t[u],r[1]=t[u+1],On(i,r)&&(e[o++]=r[0],e[o++]=r[1]);return o},n.prototype.appendFlatLineCoordinates=function(t,n,i,r,e,o){var u=this.coordinates,s=u.length,a=this.getBufferedMaxExtent();o&&(n+=r);var f,h,c,l=t[n],v=t[n+1],d=this.Wh,p=!0;for(f=n+r;f<i;f+=r)d[0]=t[f],d[1]=t[f+1],(c=kn(a,d))!==h?(p&&(u[s++]=l,u[s++]=v,p=!1),u[s++]=d[0],u[s++]=d[1]):c===yn?(u[s++]=d[0],u[s++]=d[1],p=!1):p=!0,l=d[0],v=d[1],h=c;return(e&&p||f===n+r)&&(u[s++]=l,u[s++]=v),s},n.prototype.Xh=function(t,n,i,r,e){for(var o=0,u=i.length;o<u;++o){var s=i[o],a=this.appendFlatLineCoordinates(t,n,s,r,!1,!1);e.push(a),n=s}return n},n.prototype.drawCustom=function(t,n,i,r){this.beginGeometry(t,n);var e,o,u,s,a,f=t.getType(),h=t.getStride(),c=this.coordinates.length;switch(f){case Pt.MULTI_POLYGON:e=t.getOrientedFlatCoordinates(),s=[];var l=t.getEndss();a=0;for(var v=0,d=l.length;v<d;++v){var p=[];a=this.Xh(e,a,l[v],h,p),s.push(p)}this.instructions.push([zx.CUSTOM,c,s,t,i,ge]),this.hitDetectionInstructions.push([zx.CUSTOM,c,s,t,r||i,ge]);break;case Pt.POLYGON:case Pt.MULTI_LINE_STRING:u=[],e=f==Pt.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.Xh(e,0,t.getEnds(),h,u),this.instructions.push([zx.CUSTOM,c,u,t,i,be]),this.hitDetectionInstructions.push([zx.CUSTOM,c,u,t,r||i,be]);break;case Pt.LINE_STRING:case Pt.CIRCLE:e=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(e,0,e.length,h,!1,!1),this.instructions.push([zx.CUSTOM,c,o,t,i,we]),this.hitDetectionInstructions.push([zx.CUSTOM,c,o,t,r||i,we]);break;case Pt.MULTI_POINT:e=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(e,h))>c&&(this.instructions.push([zx.CUSTOM,c,o,t,i,we]),this.hitDetectionInstructions.push([zx.CUSTOM,c,o,t,r||i,we]));break;case Pt.POINT:e=t.getFlatCoordinates(),this.coordinates.push(e[0],e[1]),o=this.coordinates.length,this.instructions.push([zx.CUSTOM,c,o,t,i]),this.hitDetectionInstructions.push([zx.CUSTOM,c,o,t,r||i])}this.endGeometry(n)},n.prototype.beginGeometry=function(t,n){this.Uh=[zx.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.Uh),this.qh=[zx.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.qh)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var i,r,e=n.length,o=-1;for(t=0;t<e;++t)(r=(i=n[t])[0])==zx.END_GEOMETRY?o=t:r==zx.BEGIN_GEOMETRY&&(i[2]=t,w(this.hitDetectionInstructions,o,t),o=-1)},n.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var r=t.getColor();i.fillStyle=sh(r||zu)}else i.fillStyle=void 0;if(n){var e=n.getColor();i.strokeStyle=sh(e||Bu);var o=n.getLineCap();i.lineCap=void 0!==o?o:Fu;var u=n.getLineDash();i.lineDash=u?u.slice():Lu;var s=n.getLineDashOffset();i.lineDashOffset=s||0;var a=n.getLineJoin();i.lineJoin=void 0!==a?a:Gu;var f=n.getWidth();i.lineWidth=void 0!==f?f:1;var h=n.getMiterLimit();i.miterLimit=void 0!==h?h:Du,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.Vh=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},n.prototype.createFill=function(t){var n=t.fillStyle,i=[zx.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[zx.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},n.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,r=t.lineCap,e=t.lineDash,o=t.lineDashOffset,u=t.lineJoin,s=t.lineWidth,a=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||e!=t.currentLineDash&&!x(t.currentLineDash,e)||t.currentLineDashOffset!=o||t.currentLineJoin!=u||t.currentLineWidth!=s||t.currentMiterLimit!=a)&&(void 0!==i&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=e,t.currentLineDashOffset=o,t.currentLineJoin=u,t.currentLineWidth=s,t.currentMiterLimit=a)},n.prototype.endGeometry=function(t){this.Uh[2]=this.instructions.length,this.Uh=null,this.qh[2]=this.hitDetectionInstructions.length,this.qh=null;var n=[zx.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},n.prototype.getBufferedMaxExtent=function(){if(!this.Vh&&(this.Vh=_n(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Mn(this.Vh,t,this.Vh)}return this.Vh},n}(_h),Gx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dx=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.Ss=null,o.Rt=null,o.Hh=void 0,o.Kh=void 0,o.Yh=void 0,o.Zh=void 0,o.os=void 0,o.Jh=void 0,o.$h=void 0,o.us=void 0,o.Dr=void 0,o.ss=void 0,o.qs=void 0,o.Qh=void 0,o}return Gx(n,t),n.prototype.drawPoint=function(t,n){if(this.Rt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([zx.DRAW_IMAGE,e,o,this.Rt,this.Kh*this.Hh,this.Yh*this.Hh,Math.ceil(this.Zh*this.Hh),this.os,this.Jh,this.$h,this.us,this.Dr,[this.ss[0]*this.pixelRatio/this.Hh,this.ss[1]*this.pixelRatio/this.Hh],Math.ceil(this.qs*this.Hh),this.Qh]),this.hitDetectionInstructions.push([zx.DRAW_IMAGE,e,o,this.Ss,this.Kh,this.Yh,this.Zh,this.os,this.Jh,this.$h,this.us,this.Dr,this.ss,this.qs,this.Qh]),this.endGeometry(n)}},n.prototype.drawMultiPoint=function(t,n){if(this.Rt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([zx.DRAW_IMAGE,e,o,this.Rt,this.Kh*this.Hh,this.Yh*this.Hh,Math.ceil(this.Zh*this.Hh),this.os,this.Jh,this.$h,this.us,this.Dr,[this.ss[0]*this.pixelRatio/this.Hh,this.ss[1]*this.pixelRatio/this.Hh],Math.ceil(this.qs*this.Hh),this.Qh]),this.hitDetectionInstructions.push([zx.DRAW_IMAGE,e,o,this.Ss,this.Kh,this.Yh,this.Zh,this.os,this.Jh,this.$h,this.us,this.Dr,this.ss,this.qs,this.Qh]),this.endGeometry(n)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.Kh=void 0,this.Yh=void 0,this.Ss=null,this.Rt=null,this.Hh=void 0,this.Zh=void 0,this.ss=void 0,this.os=void 0,this.Jh=void 0,this.$h=void 0,this.us=void 0,this.Dr=void 0,this.qs=void 0,t.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),r=t.getSize(),e=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),u=t.getOrigin();this.Hh=t.getPixelRatio(this.pixelRatio),this.Kh=i[0],this.Yh=i[1],this.Ss=e,this.Rt=o,this.Zh=r[1],this.os=t.getOpacity(),this.Jh=u[0]*this.Hh,this.$h=u[1]*this.Hh,this.us=t.getRotateWithView(),this.Dr=t.getRotation(),this.ss=t.getScaleArray(),this.qs=r[0],this.Qh=n},n}(Lx),Bx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ux=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this}return Bx(n,t),n.prototype.tc=function(t,n,i,r){var e=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),u=[zx.MOVE_TO_LINE_TO,e,o];return this.instructions.push(u),this.hitDetectionInstructions.push(u),i},n.prototype.drawLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([zx.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Lu,0],Ix);var o=t.getFlatCoordinates(),u=t.getStride();this.tc(o,0,o.length,u),this.hitDetectionInstructions.push(Rx),this.endGeometry(n)}},n.prototype.drawMultiLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([zx.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Ix);for(var o=t.getEnds(),u=t.getFlatCoordinates(),s=t.getStride(),a=0,f=0,h=o.length;f<h;++f)a=this.tc(u,a,o[f],s);this.hitDetectionInstructions.push(Rx),this.endGeometry(n)}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push(Rx),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push(Rx),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(Ix)},n}(Lx),qx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vx=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this}return qx(n,t),n.prototype.ic=function(t,n,i,r){var e=this.state,o=void 0!==e.fillStyle,u=void 0!==e.strokeStyle,s=i.length;this.instructions.push(Ix),this.hitDetectionInstructions.push(Ix);for(var a=0;a<s;++a){var f=i[a],h=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,f,r,!0,!u),l=[zx.MOVE_TO_LINE_TO,h,c];this.instructions.push(l),this.hitDetectionInstructions.push(l),u&&(this.instructions.push(Nx),this.hitDetectionInstructions.push(Nx)),n=f}return o&&(this.instructions.push(Px),this.hitDetectionInstructions.push(Px)),u&&(this.instructions.push(Rx),this.hitDetectionInstructions.push(Rx)),n},n.prototype.drawCircle=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.rc(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([zx.SET_FILL_STYLE,zu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([zx.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),u=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,u,!1,!1);var a=[zx.CIRCLE,s];this.instructions.push(Ix,a),this.hitDetectionInstructions.push(Ix,a),void 0!==i.fillStyle&&(this.instructions.push(Px),this.hitDetectionInstructions.push(Px)),void 0!==i.strokeStyle&&(this.instructions.push(Rx),this.hitDetectionInstructions.push(Rx)),this.endGeometry(n)}},n.prototype.drawPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.rc(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([zx.SET_FILL_STYLE,zu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([zx.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),u=t.getOrientedFlatCoordinates(),s=t.getStride();this.ic(u,0,o,s),this.endGeometry(n)}},n.prototype.drawMultiPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.rc(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([zx.SET_FILL_STYLE,zu]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([zx.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),u=t.getOrientedFlatCoordinates(),s=t.getStride(),a=0,f=0,h=o.length;f<h;++f)a=this.ic(u,a,o[f],s);this.endGeometry(n)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var i=this.coordinates,r=0,e=i.length;r<e;++r)i[r]=de(i[r],n);return t.prototype.finish.call(this)},n.prototype.rc=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(Lx);function Wx(t,n,i,r,e){var o,u,s,a,f,h,c,l,v,d=i,p=i,y=0,m=0,w=i;for(o=i;o<r;o+=e){var b=n[o],g=n[o+1];void 0!==a&&(l=b-a,v=g-f,s=Math.sqrt(l*l+v*v),void 0!==h&&(m+=u,Math.acos((h*l+c*v)/(u*s))>t&&(m>y&&(y=m,d=w,p=o),m=0,w=o-e)),u=s,h=l,c=v),a=b,f=g}return(m+=s)>y?[w,o]:[d,p]}var Xx=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hx={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Kx=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.ec=null,o.oo="",o.uo=0,o.so=0,o.ao=void 0,o.fo=0,o.co=null,o.fillStates={},o.lo=null,o.strokeStates={},o.vo={},o.textStates={},o.oc="",o.uc="",o.sc="",o.Qh=void 0,o}return Xx(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n},n.prototype.drawText=function(t,n){var i=this.co,r=this.lo,e=this.vo;if(""!==this.oo&&e&&(i||r)){var o=this.coordinates,u=o.length,s=t.getType(),a=null,f=t.getStride();if(e.placement!==td||s!=Pt.LINE_STRING&&s!=Pt.MULTI_LINE_STRING&&s!=Pt.POLYGON&&s!=Pt.MULTI_POLYGON){var h=e.overflow?null:[];switch(s){case Pt.POINT:case Pt.MULTI_POINT:a=t.getFlatCoordinates();break;case Pt.LINE_STRING:a=t.getFlatMidpoint();break;case Pt.CIRCLE:a=t.getCenter();break;case Pt.MULTI_LINE_STRING:a=t.getFlatMidpoints(),f=2;break;case Pt.POLYGON:a=t.getFlatInteriorPoint(),e.overflow||h.push(a[2]/this.resolution),f=3;break;case Pt.MULTI_POLYGON:var c=t.getFlatInteriorPoints();a=[];for(M=0,_=c.length;M<_;M+=3)e.overflow||h.push(c[M+2]/this.resolution),a.push(c[M],c[M+1]);if(0===a.length)return;f=2}if((T=this.appendFlatPointCoordinates(a,f))===u)return;if(h&&(T-u)/2!=a.length/f){var l=u/2;h=h.filter((function(t,n){var i=o[2*(l+n)]===a[n*f]&&o[2*(l+n)+1]===a[n*f+1];return i||--l,i}))}this.ac(),(e.backgroundFill||e.backgroundStroke)&&(this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke),e.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),e.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var v=e.padding;if(v!=Vu&&(e.scale[0]<0||e.scale[1]<0)){var d=e.padding[0],p=e.padding[1],y=e.padding[2],m=e.padding[3];e.scale[0]<0&&(p=-p,m=-m),e.scale[1]<0&&(d=-d,y=-y),v=[d,p,y,m]}var w=this.pixelRatio;this.instructions.push([zx.DRAW_IMAGE,u,T,null,NaN,NaN,NaN,1,0,0,this.ao,this.fo,[1,1],NaN,this.Qh,v==Vu?Vu:v.map((function(t){return t*w})),!!e.backgroundFill,!!e.backgroundStroke,this.oo,this.oc,this.sc,this.uc,this.uo,this.so,h]);var b=1/w;this.hitDetectionInstructions.push([zx.DRAW_IMAGE,u,T,null,NaN,NaN,NaN,1,0,0,this.ao,this.fo,[b,b],NaN,this.Qh,v,!!e.backgroundFill,!!e.backgroundStroke,this.oo,this.oc,this.sc,this.uc,this.uo,this.so,h]),this.endGeometry(n)}else{if(!ti(this.getBufferedMaxExtent(),t.getExtent()))return;var g=void 0;if(a=t.getFlatCoordinates(),s==Pt.LINE_STRING)g=[a.length];else if(s==Pt.MULTI_LINE_STRING)g=t.getEnds();else if(s==Pt.POLYGON)g=t.getEnds().slice(0,1);else if(s==Pt.MULTI_POLYGON){var x=t.getEndss();g=[];for(var M=0,_=x.length;M<_;++M)g.push(x[M][0])}this.beginGeometry(t,n);for(var S=e.textAlign,O=0,j=void 0,E=0,k=g.length;E<k;++E){if(null==S){var A=Wx(e.maxAngle,a,O,g[E],f);O=A[0],j=A[1]}else j=g[E];for(var M=O;M<j;M+=f)o.push(a[M],a[M+1]);var T=o.length;O=g[E],this.fc(u,T),u=T}this.endGeometry(n)}}},n.prototype.ac=function(){var t=this.lo,n=this.vo,i=this.co,r=this.sc;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var e=this.oc;e in this.textStates||(this.textStates[e]={font:n.font,textAlign:n.textAlign||Uu,justify:n.justify,textBaseline:n.textBaseline||qu,scale:n.scale});var o=this.uc;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},n.prototype.fc=function(t,n){var i=this.lo,r=this.vo,e=this.sc,o=this.oc,u=this.uc;this.ac();var s=this.pixelRatio,a=Hx[r.textBaseline],f=this.so*s,h=this.oo,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([zx.DRAW_CHARS,t,n,a,r.overflow,u,r.maxAngle,s,f,e,c*s,h,o,1]),this.hitDetectionInstructions.push([zx.DRAW_CHARS,t,n,a,r.overflow,u,r.maxAngle,1,f,e,c,h,o,1/s])},n.prototype.setTextStyle=function(t,n){var i,r,e;if(t){var u=t.getFill();u?((r=this.co)||(r={},this.co=r),r.fillStyle=sh(u.getColor()||zu)):(r=null,this.co=r);var s=t.getStroke();if(s){(e=this.lo)||(e={},this.lo=e);var a=s.getLineDash(),f=s.getLineDashOffset(),h=s.getWidth(),c=s.getMiterLimit();e.lineCap=s.getLineCap()||Fu,e.lineDash=a?a.slice():Lu,e.lineDashOffset=void 0===f?0:f,e.lineJoin=s.getLineJoin()||Gu,e.lineWidth=void 0===h?1:h,e.miterLimit=void 0===c?Du:c,e.strokeStyle=sh(s.getColor()||Bu)}else e=null,this.lo=e;i=this.vo;var l=t.getFont()||Nu;Ju(l);var v=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||qu,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Vu,i.scale=void 0===v?[1,1]:v;var d=t.getOffsetX(),p=t.getOffsetY(),y=t.getRotateWithView(),m=t.getRotation();this.oo=t.getText()||"",this.uo=void 0===d?0:d,this.so=void 0===p?0:p,this.ao=void 0!==y&&y,this.fo=void 0===m?0:m,this.sc=e?("string"==typeof e.strokeStyle?e.strokeStyle:o(e.strokeStyle))+e.lineCap+e.lineDashOffset+"|"+e.lineWidth+e.lineJoin+e.miterLimit+"["+e.lineDash.join()+"]":"",this.oc=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.uc=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.oo="";this.Qh=n},n}(Lx),Yx={Circle:Vx,Default:Lx,Image:Dx,LineString:Ux,Polygon:Vx,Text:Kx},Zx=function(){function t(t,n,i,r){this.hc=t,this.cc=n,this.Ct=r,this.lc=i,this.vc={}}return t.prototype.finish=function(){var t={};for(var n in this.vc){t[n]=t[n]||{};var i=this.vc[n];for(var r in i){var e=i[r].finish();t[n][r]=e}}return t},t.prototype.getBuilder=function(t,n){var i=void 0!==t?t.toString():"0",r=this.vc[i];void 0===r&&(r={},this.vc[i]=r);var e=r[n];void 0===e&&(e=new(0,Yx[n])(this.hc,this.cc,this.lc,this.Ct),r[n]=e);return e},t}();function Jx(t,n,i,r,e,o,u,s,a,f,h,c){var l=t[n],v=t[n+1],d=0,p=0,y=0,m=0;function w(){d=l,p=v,l=t[n+=r],v=t[n+1],m+=y,y=Math.sqrt((l-d)*(l-d)+(v-p)*(v-p))}do{w()}while(n<i-r&&m+y<o);for(var b=0===y?0:(o-m)/y,g=mi(d,l,b),x=mi(p,v,b),M=n-r,_=m,S=o+s*a(f,e,h);n<i-r&&m+y<S;)w();var O,j=mi(d,l,b=0===y?0:(S-m)/y),E=mi(p,v,b);if(c){var k=[g,x,j,E];Vr(k,0,4,2,c,k,k),O=k[0]>k[2]}else O=g>j;var A,T=Math.PI,C=[],P=M+r===n;if(y=0,m=_,l=t[n=M],v=t[n+1],P){w(),A=Math.atan2(v-p,l-d),O&&(A+=A>0?-T:T);var R=(j+g)/2,I=(E+x)/2;return C[0]=[R,I,(S-o)/2,A,e],C}for(var N=0,z=e.length;N<z;){w();var F=Math.atan2(v-p,l-d);if(O&&(F+=F>0?-T:T),void 0!==A){var L=F-A;if(L+=L>T?-2*T:L<-T?2*T:0,Math.abs(L)>u)return null}A=F;for(var G=N,D=0;N<z;++N){var B=s*a(f,e[O?z-N-1:N],h);if(n+r<i&&m+y<o+D+B/2)break;D+=B}if(N!==G){var U=O?e.substring(z-G,z-N):e.substring(G,N);R=mi(d,l,b=0===y?0:(o+D/2-m)/y),I=mi(p,v,b);C.push([R,I,D/2,F,U]),o+=D}}return C}function $x(t,n,i,r){for(var e=t[n],o=t[n+1],u=0,s=n+r;s<i;s+=r){var a=t[s],f=t[s+1];u+=Math.sqrt((a-e)*(a-e)+(f-o)*(f-o)),e=a,o=f}return u}var Qx=[1/0,1/0,-1/0,-1/0],tM=[],nM=[],iM=[],rM=[];function eM(t){return t[3].declutterBox}var oM=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function uM(t,n){return"start"!==n&&"end"!==n||oM.test(t)||(n="start"===n?"left":"right"),Hx[n]}function sM(t,n,i){return i>0&&t.push("\n",""),t.push(n,""),t}var aM=function(){function t(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.dc,this.instructions=r.instructions,this.coordinates=r.coordinates,this.yc={},this.mc=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.do=null,this.De=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.wc={},this.ec={}}return t.prototype.createLabel=function(t,n,i,r){var e=t+n+i+r;if(this.ec[e])return this.ec[e];var o=r?this.strokeStates[r]:null,u=i?this.fillStates[i]:null,s=this.textStates[n],a=this.pixelRatio,f=[s.scale[0]*a,s.scale[1]*a],h=Array.isArray(t),c=s.justify?Hx[s.justify]:uM(Array.isArray(t)?t[0]:t,s.textAlign||Uu),l=r&&o.lineWidth?o.lineWidth:0,v=h?t:t.split("\n").reduce(sM,[]),d=is(s,v),p=d.width,y=d.height,m=d.widths,w=d.heights,b=d.lineWidths,g=p+l,x=[],M=(g+2)*f[0],_=(y+l)*f[1],S={width:M<0?Math.floor(M):Math.ceil(M),height:_<0?Math.floor(_):Math.ceil(_),contextInstructions:x};(1==f[0]&&1==f[1]||x.push("scale",f),r)&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",l),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),(Xt?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)));i&&x.push("fillStyle",u.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");for(var O,j=.5-c,E=c*g+j*l,k=[],A=[],T=0,C=0,P=0,R=0,I=0,N=v.length;I<N;I+=2){var z=v[I];if("\n"!==z){var F=v[I+1]||s.font;F!==O&&(r&&k.push("font",F),i&&A.push("font",F),O=F),T=Math.max(T,w[P]);var L=[z,E+j*m[P]+c*(m[P]-b[R]),.5*(l+T)+C];E+=m[P],r&&k.push("strokeText",L),i&&A.push("fillText",L),++P}else C+=T,T=0,E=c*g+j*l,++R}return Array.prototype.push.apply(x,k),Array.prototype.push.apply(x,A),this.ec[e]=S,S},t.prototype.bc=function(t,n,i,r,e,o,u){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),t.lineTo.apply(t,n),o&&(this.dc=o[2],this.ls(t)),u&&(this.gc(t,u),t.stroke())},t.prototype.xc=function(t,n,i,r,e,o,u,s,a,f,h,c,l,v,d,p){var y,m=i-(u*=c[0]),w=r-(s*=c[1]),b=e+a>t?t-a:e,g=o+f>n?n-f:o,x=v[3]+b*c[0]+v[1],M=v[0]+g*c[1]+v[2],_=m-v[3],S=w-v[0];return(d||0!==h)&&(tM[0]=_,rM[0]=_,tM[1]=S,nM[1]=S,nM[0]=_+x,iM[0]=nM[0],iM[1]=S+M,rM[1]=iM[1]),0!==h?(nn(y=sn([1,0,0,1,0,0],i,r,1,1,h,-i,-r),tM),nn(y,nM),nn(y,iM),nn(y,rM),Tn(Math.min(tM[0],nM[0],iM[0],rM[0]),Math.min(tM[1],nM[1],iM[1],rM[1]),Math.max(tM[0],nM[0],iM[0],rM[0]),Math.max(tM[1],nM[1],iM[1],rM[1]),Qx)):Tn(Math.min(_,_+x),Math.min(S,S+M),Math.max(_,_+x),Math.max(S,S+M),Qx),l&&(m=Math.round(m),w=Math.round(w)),{drawImageX:m,drawImageY:w,drawImageW:b,drawImageH:g,originX:a,originY:f,declutterBox:{minX:Qx[0],minY:Qx[1],maxX:Qx[2],maxY:Qx[3],value:p},canvasTransform:y,scale:c}},t.prototype.Mc=function(t,n,i,r,e,o,u){var s=!(!o&&!u),a=r.declutterBox,f=t.canvas,h=u?u[2]*r.scale[0]/2:0;return a.minX-h<=f.width/n&&a.maxX+h>=0&&a.minY-h<=f.height/n&&a.maxY+h>=0&&(s&&this.bc(t,tM,nM,iM,rM,o,u),rs(t,r.canvasTransform,e,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.ls=function(t){if(this.dc){var n=nn(this.mc,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.De)}t.fill(),this.dc&&t.restore()},t.prototype.gc=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]))},t.prototype._c=function(t,n,i,r){var e=this.textStates[n],o=this.createLabel(t,n,r,i),u=this.strokeStates[i],s=this.pixelRatio,a=uM(Array.isArray(t)?t[0]:t,e.textAlign||Uu),f=Hx[e.textBaseline||qu],h=u&&u.lineWidth?u.lineWidth:0;return{label:o,anchorX:a*(o.width/s-2*e.scale[0])+2*(.5-a)*h,anchorY:f*o.height/s+2*(.5-f)*h}},t.prototype.Sc=function(t,n,i,r,e,o,u,s){var a;this.do&&x(i,this.mc)?a=this.do:(this.do||(this.do=[]),a=qr(this.coordinates,0,this.coordinates.length,2,i,this.do),tn(this.mc,i));for(var f,h,c,l,v,d,p,y,m,w,b,g,M,_,S,O,j=0,E=r.length,k=0,A=0,T=0,C=null,P=null,R=this.yc,I=this.De,N=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,z={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},F=this.instructions!=r||this.overlaps?0:200;j<E;){var L=r[j];switch(L[0]){case zx.BEGIN_GEOMETRY:M=L[1],O=L[3],M.getGeometry()?void 0===u||ti(u,O.getExtent())?++j:j=L[2]+1:j=L[2];break;case zx.BEGIN_PATH:A>F&&(this.ls(t),A=0),T>F&&(t.stroke(),T=0),A||T||(t.beginPath(),l=NaN,v=NaN),++j;break;case zx.CIRCLE:var G=a[k=L[1]],D=a[k+1],B=a[k+2]-G,U=a[k+3]-D,q=Math.sqrt(B*B+U*U);t.moveTo(G+q,D),t.arc(G,D,q,0,2*Math.PI,!0),++j;break;case zx.CLOSE_PATH:t.closePath(),++j;break;case zx.CUSTOM:k=L[1],f=L[2];var V=L[3],W=L[4],X=6==L.length?L[5]:void 0;z.geometry=V,z.feature=M,j in R||(R[j]=[]);var H=R[j];X?X(a,k,f,2,H):(H[0]=a[k],H[1]=a[k+1],H.length=2),W(H,z),++j;break;case zx.DRAW_IMAGE:k=L[1],f=L[2],y=L[3],h=L[4],c=L[5];var K=L[6],Y=L[7],Z=L[8],J=L[9],$=L[10],Q=L[11],tt=L[12],nt=L[13],it=L[14];if(!y&&L.length>=19){m=L[18],w=L[19],b=L[20],g=L[21];var rt=this._c(m,w,b,g);y=rt.label,L[3]=y;var et=L[22];h=(rt.anchorX-et)*this.pixelRatio,L[4]=h;var ot=L[23];c=(rt.anchorY-ot)*this.pixelRatio,L[5]=c,K=y.height,L[6]=K,nt=y.width,L[13]=nt}var ut=void 0;L.length>24&&(ut=L[24]);var st=void 0,at=void 0,ft=void 0;L.length>16?(st=L[15],at=L[16],ft=L[17]):(st=Vu,at=!1,ft=!1),$&&N?Q+=I:$||N||(Q-=I);for(var ht=0;k<f;k+=2)if(!(ut&&ut[ht++]<nt/this.pixelRatio)){var ct=[t,n,y,Lt=this.xc(y.width,y.height,a[k],a[k+1],nt,K,h,c,Z,J,Q,tt,e,st,at||ft,M),Y,at?C:null,ft?P:null],lt=void 0,vt=void 0;if(s&&it){var dt=f-k;if(!it[dt]){it[dt]=ct;continue}if(lt=it[dt],delete it[dt],vt=eM(lt),s.collides(vt))continue}s&&s.collides(Lt.declutterBox)||(lt&&(s&&s.insert(vt),this.Mc.apply(this,lt)),s&&s.insert(Lt.declutterBox),this.Mc.apply(this,ct))}++j;break;case zx.DRAW_CHARS:var pt=L[1],yt=L[2],mt=L[3],wt=L[4];g=L[5];var bt=L[6],gt=L[7],xt=L[8];b=L[9];var Mt=L[10];m=L[11],w=L[12];var _t=[L[13],L[13]],St=this.textStates[w],Ot=St.font,jt=[St.scale[0]*gt,St.scale[1]*gt],Et=void 0;Ot in this.wc?Et=this.wc[Ot]:(Et={},this.wc[Ot]=Et);var kt=$x(a,pt,yt,2),At=Math.abs(jt[0])*ns(Ot,m,Et);if(wt||At<=kt){var Tt=this.textStates[w].textAlign,Ct=Jx(a,pt,yt,2,m,(kt-At)*Hx[Tt],bt,Math.abs(jt[0]),ns,Ot,Et,N?0:this.De);t:if(Ct){var Pt=[],Rt=void 0,It=void 0,Nt=void 0,zt=void 0,Ft=void 0;if(b)for(Rt=0,It=Ct.length;Rt<It;++Rt){Nt=(Ft=Ct[Rt])[4],zt=this.createLabel(Nt,w,"",b),h=Ft[2]+(jt[0]<0?-Mt:Mt),c=mt*zt.height+2*(.5-mt)*Mt*jt[1]/jt[0]-xt;var Lt=this.xc(zt.width,zt.height,Ft[0],Ft[1],zt.width,zt.height,h,c,0,0,Ft[3],_t,!1,Vu,!1,M);if(s&&s.collides(Lt.declutterBox))break t;Pt.push([t,n,zt,Lt,1,null,null])}if(g)for(Rt=0,It=Ct.length;Rt<It;++Rt){Nt=(Ft=Ct[Rt])[4],zt=this.createLabel(Nt,w,g,""),h=Ft[2],c=mt*zt.height-xt;Lt=this.xc(zt.width,zt.height,Ft[0],Ft[1],zt.width,zt.height,h,c,0,0,Ft[3],_t,!1,Vu,!1,M);if(s&&s.collides(Lt.declutterBox))break t;Pt.push([t,n,zt,Lt,1,null,null])}s&&s.load(Pt.map(eM));for(var Gt=0,Dt=Pt.length;Gt<Dt;++Gt)this.Mc.apply(this,Pt[Gt])}}++j;break;case zx.END_GEOMETRY:if(void 0!==o){var Bt=o(M=L[1],O);if(Bt)return Bt}++j;break;case zx.FILL:F?A++:this.ls(t),++j;break;case zx.MOVE_TO_LINE_TO:for(k=L[1],f=L[2],_=a[k],p=(S=a[k+1])+.5|0,(d=_+.5|0)===l&&p===v||(t.moveTo(_,S),l=d,v=p),k+=2;k<f;k+=2)d=(_=a[k])+.5|0,p=(S=a[k+1])+.5|0,k!=f-2&&d===l&&p===v||(t.lineTo(_,S),l=d,v=p);++j;break;case zx.SET_FILL_STYLE:C=L,this.dc=L[2],A&&(this.ls(t),A=0,T&&(t.stroke(),T=0)),t.fillStyle=L[1],++j;break;case zx.SET_STROKE_STYLE:P=L,T&&(t.stroke(),T=0),this.gc(t,L),++j;break;case zx.STROKE:F?T++:t.stroke(),++j;break;default:++j}}A&&this.ls(t),T&&t.stroke()},t.prototype.execute=function(t,n,i,r,e,o){this.De=r,this.Sc(t,n,i,this.instructions,e,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,n,i,r,e){return this.De=i,this.Sc(t,1,n,this.hitDetectionInstructions,!0,r,e)},t}(),fM=[Th,jh,Ah,kh,Ch,Eh],hM=function(){function t(t,n,i,r,e,o){this.cc=t,this.Fa=r,this.Ct=i,this.lc=n,this.ph=o,this.Oc={},this.jc=null,this.Ec=[1,0,0,1,0,0],this.kc(e)}return t.prototype.clip=function(t,n){var i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.kc=function(t){for(var n in t){var i=this.Oc[n];void 0===i&&(i={},this.Oc[n]=i);var r=t[n];for(var e in r){var o=r[e];i[e]=new aM(this.lc,this.Ct,this.Fa,o)}}},t.prototype.hasExecutors=function(t){for(var n in this.Oc)for(var i=this.Oc[n],r=0,e=t.length;r<e;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o){var u=2*(r=Math.round(r))+1,s=sn(this.Ec,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),a=!this.jc;a&&(this.jc=jo(u,u));var f,h=this.jc;h.canvas.width!==u||h.canvas.height!==u?(h.canvas.width=u,h.canvas.height=u):a||h.clearRect(0,0,u,u),void 0!==this.ph&&(Fn(f=[1/0,1/0,-1/0,-1/0],t),Mn(f,n*(this.ph+r),f));var c,l=lM(r);function v(t,n){for(var i=h.getImageData(0,0,u,u).data,s=0,a=l.length;s<a;s++)if(i[l[s]]>0){if(!o||c!==kh&&c!==Ch||-1!==o.indexOf(t)){var f=(l[s]-3)/4,v=r-f%u,d=r-(f/u|0),p=e(t,n,v*v+d*d);if(p)return p}h.clearRect(0,0,u,u);break}}var d,y,m,w,b,g=Object.keys(this.Oc).map(Number);for(g.sort(p),d=g.length-1;d>=0;--d){var x=g[d].toString();for(m=this.Oc[x],y=fM.length-1;y>=0;--y)if(void 0!==(w=m[c=fM[y]])&&(b=w.executeHitDetection(h,s,i,v,f)))return b}},t.prototype.getClipCoords=function(t){var n=this.cc;if(!n)return null;var i=n[0],r=n[1],e=n[2],o=n[3],u=[i,r,i,o,e,o,e,r];return qr(u,0,8,2,t,u),u},t.prototype.isEmpty=function(){return P(this.Oc)},t.prototype.execute=function(t,n,i,r,e,o,u){var s=Object.keys(this.Oc).map(Number);s.sort(p),this.cc&&(t.save(),this.clip(t,i));var a,f,h,c,l,v,d=o||fM;for(u&&s.reverse(),a=0,f=s.length;a<f;++a){var y=s[a].toString();for(l=this.Oc[y],h=0,c=d.length;h<c;++h){void 0!==(v=l[d[h]])&&v.execute(t,n,i,r,e,u)}}this.cc&&t.restore()},t}(),cM={};function lM(t){if(void 0!==cM[t])return cM[t];for(var n=2*t+1,i=t*t,r=new Array(i+1),e=0;e<=t;++e)for(var o=0;o<=t;++o){var u=e*e+o*o;if(u>i)break;var s=r[u];s||(s=[],r[u]=s),s.push(4*((t+e)*n+(t+o))+3),e>0&&s.push(4*((t-e)*n+(t+o))+3),o>0&&(s.push(4*((t+e)*n+(t-o))+3),e>0&&s.push(4*((t-e)*n+(t-o))+3))}for(var a=[],f=(e=0,r.length);e<f;++e)r[e]&&a.push.apply(a,r[e]);return cM[t]=a,a}var vM=hM,dM=.5;function pM(t,n,i,r,e,o,u){var s=jo(t[0]*dM,t[1]*dM);s.imageSmoothingEnabled=!1;for(var a=s.canvas,f=new Oh(s,dM,e,null,u),h=i.length,c=Math.floor(16777215/h),l={},v=1;v<=h;++v){var d=i[v-1],y=d.getStyleFunction()||r;if(r){var m=y(d,o);if(m){Array.isArray(m)||(m=[m]);for(var w="#"+("000000"+(v*c).toString(16)).slice(-6),b=0,g=m.length;b<g;++b){var x=m[b],M=x.getGeometryFunction()(d);if(M&&ti(e,M.getExtent())){var _=x.clone(),S=_.getFill();S&&S.setColor(w);var O=_.getStroke();O&&(O.setColor(w),O.setLineDash(null)),_.setText(void 0);var j=x.getImage();if(j&&0!==j.getOpacity()){var E=j.getImageSize();if(!E)continue;var k=jo(E[0],E[1],void 0,{alpha:!1}),A=k.canvas;k.fillStyle=w,k.fillRect(0,0,A.width,A.height),_.setImage(new qv({img:A,imgSize:E,anchor:j.getAnchor(),anchorXUnits:Pv,anchorYUnits:Pv,offset:j.getOrigin(),opacity:1,size:j.getSize(),scale:j.getScale(),rotation:j.getRotation(),rotateWithView:j.getRotateWithView()}))}var T=_.getZIndex()||0;(R=l[T])||(R={},l[T]=R,R[Pt.POLYGON]=[],R[Pt.CIRCLE]=[],R[Pt.LINE_STRING]=[],R[Pt.POINT]=[]),R[M.getType().replace("Multi","")].push(M,_)}}}}}for(var C=Object.keys(l).map(Number).sort(p),P=(v=0,C.length);v<P;++v){var R=l[C[v]];for(var I in R){var N=R[I];for(b=0,g=N.length;b<g;b+=2){f.setStyle(N[b+1]);for(var z=0,F=n.length;z<F;++z)f.setTransform(n[z]),f.drawGeometry(N[b])}}}return s.getImageData(0,0,a.width,a.height)}function yM(t,n,i){var r=[];if(i){var e=Math.floor(Math.round(t[0])*dM),o=Math.floor(Math.round(t[1])*dM),u=4*(ai(e,0,i.width-1)+ai(o,0,i.height-1)*i.width),s=i.data[u],a=i.data[u+1],f=i.data[u+2]+256*(a+256*s),h=Math.floor(16777215/n.length);f&&f%h==0&&r.push(n[f/h-1])}return r}var mM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wM=function(t){function n(n){var i=t.call(this,n)||this;return i.Ac=i.Tc.bind(i),i.Cc,i.Pc=!1,i.Rc=null,i.Ic=null,i.Sf=-1,i.Nc=NaN,i.Ff=[1/0,1/0,-1/0,-1/0],i.zc=[1/0,1/0,-1/0,-1/0],i.Fc,i.Lc=null,i.Gc=null,i.Dc=null,i.Bc=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return mM(n,t),n.prototype.renderWorlds=function(t,n,i){var r=n.extent,e=n.viewState,o=e.center,u=e.resolution,s=e.projection,a=e.rotation,f=s.getExtent(),h=this.getLayer().getSource(),c=n.pixelRatio,l=n.viewHints,v=!(l[Ns]||l[zs]),d=this.context,p=Math.round(n.size[0]*c),y=Math.round(n.size[1]*c),m=h.getWrapX()&&s.canWrapX(),w=m?Qn(f):null,b=m?Math.ceil((r[2]-f[2])/w)+1:1,g=m?Math.floor((r[0]-f[0])/w):0;do{var x=this.getRenderTransform(o,u,a,c,p,y,g*w);t.execute(d,1,x,a,v,void 0,i)}while(++g<b)},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},n.prototype.renderFrame=function(t,n){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];on(this.pixelTransform,1/i,1/i),an(this.inversePixelTransform,this.pixelTransform);var e=hn(this.pixelTransform);this.useContainer(n,e,r.opacity,this.getBackground(t));var o=this.context,u=o.canvas,s=this.Bc,a=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!a||a.isEmpty()))return null;var f=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);u.width!=f||u.height!=h?(u.width=f,u.height=h,u.style.transform!==e&&(u.style.transform=e)):this.containerReused||o.clearRect(0,0,f,h),this.preRender(o,t);var c=t.viewState,l=c.projection,v=!1,d=!0;if(r.extent&&this.clipping){var p=Lr(r.extent,l);(v=(d=ti(p,t.extent))&&!jn(p,t.extent))&&this.clipUnrotated(o,t,p)}d&&this.renderWorlds(s,t),v&&o.restore(),this.postRender(o,t);var y=Iu(r.opacity),m=this.container;return y!==m.style.opacity&&(m.style.opacity=y),this.Fc!==c.rotation&&(this.Fc=c.rotation,this.Rc=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.Rc&&!this.Cc){var i=[this.context.canvas.width,this.context.canvas.height];nn(this.pixelTransform,i);var r=this.Lc,e=this.Nc,o=this.Fc,u=this.Gc,s=this.zc,a=this.getLayer(),f=[],h=i[0]*dM,c=i[1]*dM;f.push(this.getRenderTransform(r,e,o,dM,h,c,0).slice());var l=a.getSource(),v=u.getExtent();if(l.getWrapX()&&u.canWrapX()&&!jn(v,s)){for(var d=s[0],p=Qn(v),y=0,m=void 0;d<v[0];)m=p*--y,f.push(this.getRenderTransform(r,e,o,dM,h,c,m).slice()),d+=p;for(y=0,d=s[2];d>v[2];)m=p*++y,f.push(this.getRenderTransform(r,e,o,dM,h,c,m).slice()),d-=p}this.Rc=pM(i,f,this.Ic,a.getStyleFunction(),s,e,o)}n(yM(t,this.Ic,this.Rc))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){var u=this;if(this.Bc){var s,a=n.viewState.resolution,f=n.viewState.rotation,h=this.getLayer(),c={},l=function(t,n,i){var u=o(t),s=c[u];if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return c[u]=!0,e.splice(e.lastIndexOf(s),1),r(t,h,n);s.geometry=n,s.distanceSq=i}}else{if(0===i)return c[u]=!0,r(t,h,n);e.push(c[u]={feature:t,layer:h,geometry:n,distanceSq:i,callback:r})}},v=[this.Bc];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some((function(r){return s=r.forEachFeatureAtCoordinate(t,a,f,i,l,r===u.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map((function(t){return t.value})):null)})),s}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.Bc&&t.changed()},n.prototype.Tc=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var r=t.viewHints[Ns],e=t.viewHints[zs],o=n.getUpdateWhileAnimating(),u=n.getUpdateWhileInteracting();if(!this.Pc&&!o&&r||!u&&e)return this.Cc=!0,!0;this.Cc=!1;var s=t.extent,a=t.viewState,f=a.projection,h=a.resolution,c=t.pixelRatio,l=n.getRevision(),v=n.getRenderBuffer(),d=n.getRenderOrder();void 0===d&&(d=Rh);var p=a.center.slice(),y=Mn(s,v*h),m=y.slice(),w=[y.slice()],b=f.getExtent();if(i.getWrapX()&&f.canWrapX()&&!jn(b,t.extent)){var g=Qn(b),M=Math.max(Qn(y)/2,g);y[0]=b[0]-M,y[2]=b[2]+M,ur(p,f);var _=ui(w[0],f);_[0]<b[0]&&_[2]<b[2]?w.push([_[0]+g,_[1],_[2]+g,_[3]]):_[0]>b[0]&&_[2]>b[2]&&w.push([_[0]-g,_[1],_[2]-g,_[3]])}if(!this.Pc&&this.Nc==h&&this.Sf==l&&this.Dc==d&&jn(this.zc,y))return x(this.Ff,m)||(this.Rc=null,this.Ff=m),this.Lc=p,this.replayGroupChanged=!1,!0;this.Bc=null,this.Pc=!1;var S,O=new Zx(Nh(h,c),y,h,c);this.getLayer().getDeclutter()&&(S=new Zx(Nh(h,c),y,h,c));var j,E=Ir();if(E){for(var k=0,A=w.length;k<A;++k){var T=Fr(w[k],f);i.loadFeatures(T,Gr(h,f),E)}j=kr(E,f)}else for(k=0,A=w.length;k<A;++k)i.loadFeatures(w[k],h,f);var C=Ih(h,c),P=function(t){var i,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(i=r(t,h)),i){var e=this.renderFeature(t,C,i,O,j,S);this.Pc=this.Pc||e}}.bind(this),R=Fr(y,f),I=i.getFeaturesInExtent(R);d&&I.sort(d);for(k=0,A=I.length;k<A;++k)P(I[k]);this.Ic=I;var N=O.finish(),z=new vM(y,h,c,i.getOverlaps(),N,n.getRenderBuffer());return S&&(this.declutterExecutorGroup=new vM(y,h,c,i.getOverlaps(),S.finish(),n.getRenderBuffer())),this.Nc=h,this.Sf=l,this.Dc=d,this.Ff=m,this.zc=y,this.Lc=p,this.Gc=f,this.Bc=z,this.Rc=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,n,i,r,e,o){if(!i)return!1;var u=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)u=zh(r,t,i[s],n,this.Ac,e,o)||u;else u=zh(r,t,i,n,this.Ac,e,o);return u},n}(Cg),bM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gM=function(t){function n(n){var i=t.call(this,n)||this;return i.Uc=new wM(n),i.qc=n.getImageRatio(),i.Vc=[1,0,0,1,0,0],i.Wc=null,i}return bM(n,t),n.prototype.disposeInternal=function(){this.Uc.dispose(),t.prototype.disposeInternal.call(this)},n.prototype.getFeatures=function(t){if(!this.Uc)return new Promise((function(t){return t([])}));var n=nn(this.Vc,nn(this.Wc,t.slice()));return this.Uc.getFeatures(n)},n.prototype.handleFontsChanged=function(){this.Uc.handleFontsChanged()},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,i=t.viewState,r=i.resolution,e=t.viewHints,o=this.Uc,u=t.extent;1!==this.qc&&ri(u=u.slice(0),this.qc);var s=Qn(u)/r,a=Yn(u)/r;if(!e[Ns]&&!e[zs]&&!ni(u)){o.useContainer(null,null,1);var f=o.context,h=A({},t,{declutterTree:new rd(9),extent:u,size:[s,a],viewState:A({},t.viewState,{rotation:0})}),c=!0,l=new Oo(u,r,n,f.canvas,(function(t){o.prepareFrame(h)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(h,null)&&(o.renderDeclutter(h),c=!1),t())}));l.addEventListener(N,function(){if(l.getState()===wo){this.Rt=c?null:l;var t=l.getResolution(),r=l.getPixelRatio(),e=t*n/r;this.renderedResolution=e,this.Vc=sn(this.Vc,s/2,a/2,1/e,-1/e,0,-i.center[0],-i.center[1])}}.bind(this)),l.load()}return this.Rt&&(this.Wc=t.pixelToCoordinateTransform.slice()),!!this.Rt},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,i,r,e,o){return this.Uc?this.Uc.forEachFeatureAtCoordinate(n,i,r,e,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,i,r,e,o)},n}(Rg),xM="image",MM="hybrid",_M="vector",SM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),OM={image:[Th,jh,Ah,kh,Ch],hybrid:[Th,Ah],vector:[]},jM={hybrid:[kh,Ch,Eh],vector:[Th,jh,Ah,kh,Ch,Eh]},EM=function(t){function n(n){var i=t.call(this,n)||this;return i.Ac=i.Tc.bind(i),i.Pc=!1,i.Xc,i.Wc=null,i.Fc,i.Hc=[1,0,0,1,0,0],i}return SM(n,t),n.prototype.prepareTile=function(t,n,i){var r,e=t.getState();return e!==vt&&e!==dt||(this.Kc(t,n,i),this.Yc(t)&&(r=!0)),r},n.prototype.getTile=function(n,i,r,e){var o=e.pixelRatio,u=e.viewState,s=u.resolution,a=u.projection,f=this.getLayer(),h=f.getSource().getTile(n,i,r,o,a),c=e.viewHints,l=!(c[Ns]||c[zs]);return!l&&h.wantedResolution||(h.wantedResolution=s),this.prepareTile(h,o,a)&&(l||Date.now()-e.time<8)&&f.getRenderMode()!==_M&&this.Zc(h,e),t.prototype.getTile.call(this,n,i,r,e)},n.prototype.isDrawableTile=function(n){var i=this.getLayer();return t.prototype.isDrawableTile.call(this,n)&&(i.getRenderMode()===_M?o(i)in n.executorGroups:n.hasContext(i))},n.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},n.prototype.prepareFrame=function(n){var i=this.getLayer().getRevision();return this.Xc!=i&&(this.renderedTiles.length=0),this.Xc=i,t.prototype.prepareFrame.call(this,n)},n.prototype.Kc=function(t,n,i){var r=this.getLayer(),e=r.getRevision(),u=r.getRenderOrder()||null,s=t.wantedResolution,a=t.getReplayState(r);if(a.dirty||a.renderedResolution!==s||a.renderedRevision!=e||a.renderedRenderOrder!=u){var f=r.getSource(),h=r.getDeclutter(),c=f.getTileGrid(),l=f.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),v=f.getSourceTiles(n,i,t),d=o(r);delete t.hitDetectionImageData[d],t.executorGroups[d]=[],h&&(t.declutterExecutorGroups[d]=[]);for(var p=function(i,e){var o=v[i];if(o.getState()!=vt)return"continue";var p=o.tileCoord,m=c.getTileCoordExtent(p),w=Zn(l,m),b=Mn(w,r.getRenderBuffer()*s,y.tmpExtent),g=In(m,w)?null:b;a.dirty=!1;var x=new Zx(0,b,s,n),M=h?new Zx(0,w,s,n):void 0,_=Ih(s,n),S=function(t){var n,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(n=i(t,s)),n){var e=this.renderFeature(t,_,n,x,M);this.Pc=this.Pc||e,a.dirty=a.dirty||e}},O=o.getFeatures();u&&u!==a.renderedRenderOrder&&O.sort(u);for(var j=0,E=O.length;j<E;++j){var k=O[j];g&&!ti(g,k.getGeometry().getExtent())||S.call(y,k)}var A=x.finish(),T=r.getRenderMode()!==_M&&h&&1===v.length?null:w,C=new vM(T,s,n,f.getOverlaps(),A,r.getRenderBuffer());if(t.executorGroups[d].push(C),M){var P=new vM(null,s,n,f.getOverlaps(),M.finish(),r.getRenderBuffer());t.declutterExecutorGroups[d].push(P)}},y=this,m=0,w=v.length;m<w;++m)p(m);a.renderedRevision=e,a.renderedRenderOrder=u,a.renderedResolution=s}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){var u=n.viewState.resolution,s=n.viewState.rotation;i=null==i?0:i;var a=this.getLayer(),f=a.getSource().getTileGridForProjection(n.viewState.projection),h=xn([t]);Mn(h,u*i,h);for(var c,l={},v=function(t,n,i){var u=t.getId();void 0===u&&(u=o(t));var s=l[u];if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return l[u]=!0,e.splice(e.lastIndexOf(s),1),r(t,a,n);s.geometry=n,s.distanceSq=i}}else{if(0===i)return l[u]=!0,r(t,a,n);e.push(l[u]={feature:t,layer:a,geometry:n,distanceSq:i,callback:r})}},d=this.renderedTiles,p=function(r,e){var l=d[r];if(!ti(f.getTileCoordExtent(l.wrappedTileCoord),h))return"continue";var p=o(a),y=[l.executorGroups[p]],m=l.declutterExecutorGroups[p];m&&y.push(m),y.some((function(r){for(var e=r===m?n.declutterTree.all().map((function(t){return t.value})):null,o=0,a=r.length;o<a;++o){var f=r[o];if(c=f.forEachFeatureAtCoordinate(t,u,s,i,v,e))return!0}}))},y=0,m=d.length;!c&&y<m;++y)p(y);return c},n.prototype.getFeatures=function(t){return new Promise(function(n,i){for(var r,e=this.getLayer(),u=o(e),s=e.getSource(),a=this.renderedProjection,f=a.getExtent(),h=this.renderedResolution,c=s.getTileGridForProjection(a),l=nn(this.Wc,t.slice()),v=c.getTileCoordForCoordAndResolution(l,h),d=0,p=this.renderedTiles.length;d<p;++d)if(v.toString()===this.renderedTiles[d].tileCoord.toString()){if((r=this.renderedTiles[d]).getState()===vt){var y=c.getTileCoordExtent(r.tileCoord);s.getWrapX()&&a.canWrapX()&&!jn(f,y)&&ur(l,a);break}r=void 0}if(!r||r.loadingSourceTiles>0)n([]);else{var m=Jn(c.getTileCoordExtent(r.wrappedTileCoord)),w=[(l[0]-m[0])/h,(m[1]-l[1])/h],b=r.getSourceTiles().reduce((function(t,n){return t.concat(n.getFeatures())}),[]),g=r.hitDetectionImageData[u];if(!g&&!this.Cc){var x=sa(c.getTileSize(c.getZForResolution(h))),M=this.Fc;g=pM(x,[this.getRenderTransform(c.getTileCoordCenter(r.wrappedTileCoord),h,0,dM,x[0]*dM,x[1]*dM,0)],b,e.getStyleFunction(),c.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(e).renderedResolution,M),r.hitDetectionImageData[u]=g}n(yM(w,b,g))}}.bind(this))},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.Xc&&t.changed()},n.prototype.Tc=function(t){this.renderIfReadyAndVisible()},n.prototype.renderDeclutter=function(t){var n=this.context,i=n.globalAlpha;n.globalAlpha=this.getLayer().getOpacity();for(var r=t.viewHints,e=!(r[Ns]||r[zs]),u=this.renderedTiles,s=0,a=u.length;s<a;++s){var f=u[s],h=f.declutterExecutorGroups[o(this.getLayer())];if(h)for(var c=h.length-1;c>=0;--c)h[c].execute(this.context,1,this.getTileRenderTransform(f,t),t.viewState.rotation,e,void 0,t.declutterTree)}n.globalAlpha=i},n.prototype.getTileRenderTransform=function(t,n){var i=n.pixelRatio,r=n.viewState,e=r.center,o=r.resolution,u=r.rotation,s=n.size,a=Math.round(s[0]*i),f=Math.round(s[1]*i),h=this.getLayer().getSource().getTileGridForProjection(n.viewState.projection),c=t.tileCoord,l=h.getTileCoordExtent(t.wrappedTileCoord),v=h.getTileCoordExtent(c,this.tmpExtent)[0]-l[0];return $t(en(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(e,o,u,i,a,f,v))},n.prototype.renderFrame=function(n,i){var r=n.viewHints,e=!(r[Ns]||r[zs]);t.prototype.renderFrame.call(this,n,i),this.Wc=n.pixelToCoordinateTransform.slice(),this.Fc=n.viewState.rotation;var u=this.getLayer(),s=u.getRenderMode(),a=this.context,f=a.globalAlpha;a.globalAlpha=u.getOpacity();for(var h=jM[s],c=n.viewState,l=c.rotation,v=u.getSource(),d=v.getTileGridForProjection(c.projection).getZForResolution(c.resolution,v.zDirection),p=this.renderedTiles,y=[],m=[],w=p.length-1;w>=0;--w){var b=p[w],g=b.executorGroups[o(u)].filter((function(t){return t.hasExecutors(h)}));if(0!==g.length){for(var x=this.getTileRenderTransform(b,n),M=b.tileCoord[0],_=!1,S=g[0].getClipCoords(x),O=0,j=y.length;O<j;++O)if(d!==M&&M<m[O]){var E=y[O];ti([S[0],S[3],S[4],S[7]],[E[0],E[3],E[4],E[7]])&&(_||(a.save(),_=!0),a.beginPath(),a.moveTo(S[0],S[1]),a.lineTo(S[2],S[3]),a.lineTo(S[4],S[5]),a.lineTo(S[6],S[7]),a.moveTo(E[6],E[7]),a.lineTo(E[4],E[5]),a.lineTo(E[2],E[3]),a.lineTo(E[0],E[1]),a.clip())}y.push(S),m.push(M);for(var k=0,A=g.length;k<A;++k){g[k].execute(a,1,x,l,e,h)}_&&a.restore()}}return a.globalAlpha=f,this.container},n.prototype.renderFeature=function(t,n,i,r,e){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var u=0,s=i.length;u<s;++u)o=zh(r,t,i[u],n,this.Ac,void 0,e)||o;else o=zh(r,t,i,n,this.Ac,void 0,e);return o},n.prototype.Yc=function(t){var n=this.getLayer();if(n.getRenderMode()===_M)return!1;var i=t.getReplayState(n),r=n.getRevision(),e=t.wantedResolution;return i.renderedTileResolution!==e||i.renderedTileRevision!==r},n.prototype.Zc=function(t,n){var i=this.getLayer(),r=t.getReplayState(i),e=i.getRevision(),u=t.executorGroups[o(i)];r.renderedTileRevision=e;var s=t.wrappedTileCoord,a=s[0],f=i.getSource(),h=n.pixelRatio,c=n.viewState.projection,l=f.getTileGridForProjection(c),v=l.getResolution(t.tileCoord[0]),d=n.pixelRatio/t.wantedResolution*v,p=l.getResolution(a),y=t.getContext(i);h=Math.round(Math.max(h,d/h));var m=f.getTilePixelSize(a,h,c);y.canvas.width=m[0],y.canvas.height=m[1];var w=h/d;if(1!==w){var b=Jt(this.Hc);en(b,w,w),y.setTransform.apply(y,b)}var g=l.getTileCoordExtent(s,this.tmpExtent),x=d/p,M=Jt(this.Hc);en(M,x,-x),un(M,-g[0],-g[3]);for(var _=0,S=u.length;_<S;++_){u[_].execute(y,w,M,0,!0,OM[i.getRenderMode()])}r.renderedTileResolution=t.wantedResolution},n}(Bg),kM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),AM=function(t){function n(n,i){var r=t.call(this)||this;return i&&!Array.isArray(n[0])?r.setFlatCoordinates(i,n):r.setCoordinates(n,i),r}return kM(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<Sn(this.getExtent(),t,n))return r;for(var e=this.flatCoordinates,o=this.stride,u=0,s=e.length;u<s;u+=o){var a=li(t,n,e[u],e[u+1]);if(a<r){r=a;for(var f=0;f<o;++f)i[f]=e[u+f];i.length=o}}return r},n.prototype.getCoordinates=function(){return we(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Ee(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,r=[],e=0,o=t.length;e<o;e+=i){var u=new Ee(t.slice(e,e+i),n);r.push(u)}return r},n.prototype.getType=function(){return Pt.MULTI_POINT},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,r=0,e=n.length;r<e;r+=i){if(En(t,n[r],n[r+1]))return!0}return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ae(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Qr);function TM(t,n,i,r,e,o,u){var s,a,f=(i-n)/r;if(1===f)s=n;else if(2===f)s=n,a=e;else if(0!==f){for(var h=t[n],c=t[n+1],l=0,v=[0],p=n+r;p<i;p+=r){var y=t[p],m=t[p+1];l+=Math.sqrt((y-h)*(y-h)+(m-c)*(m-c)),v.push(l),h=y,c=m}var w=e*l,b=d(v,w);b<0?(a=(w-v[-b-2])/(v[-b-1]-v[-b-2]),s=n+(-b-2)*r):s=n+b*r}var g=u>1?u:2,x=o||new Array(g);for(p=0;p<g;++p)x[p]=void 0===s?NaN:void 0===a?t[s+p]:mi(t[s+p],t[s+r+p],a);return x}function CM(t,n,i,r,e,o){if(i==n)return null;var u;if(e<t[n+r-1])return o?((u=t.slice(n,n+r))[r-1]=e,u):null;if(t[i-1]<e)return o?((u=t.slice(i-r,i))[r-1]=e,u):null;if(e==t[n+r-1])return t.slice(n,n+r);for(var s=n/r,a=i/r;s<a;){var f=s+a>>1;e<t[(f+1)*r-1]?a=f:s=f+1}var h=t[s*r-1];if(e==h)return t.slice((s-1)*r,(s-1)*r+r);var c=(e-h)/(t[(s+1)*r-1]-h);u=[];for(var l=0;l<r-1;++l)u.push(mi(t[(s-1)*r+l],t[s*r+l],c));return u.push(e),u}function PM(t,n,i,r,e,o,u){if(u)return CM(t,n,i[i.length-1],r,e,o);var s;if(e<t[r-1])return o?((s=t.slice(0,r))[r-1]=e,s):null;if(t[t.length-1]<e)return o?((s=t.slice(t.length-r))[r-1]=e,s):null;for(var a=0,f=i.length;a<f;++a){var h=i[a];if(n!=h){if(e<t[n+r-1])return null;if(e<=t[h-1])return CM(t,n,h,r,e,!1);n=h}}return null}var RM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),IM=function(t){function n(n,i){var r=t.call(this)||this;return r.Jc=null,r.$c=-1,r.yt=-1,r.wt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return RM(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?b(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<Sn(this.getExtent(),t,n)?r:(this.wt!=this.getRevision()&&(this.yt=Math.sqrt(ne(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.wt=this.getRevision()),ee(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.yt,!1,t,n,i,r))},n.prototype.forEachSegment=function(t){return Ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinateAtM=function(t,n){if(this.layout!=Tt&&this.layout!=Ct)return null;var i=void 0!==n&&n;return CM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},n.prototype.getCoordinates=function(){return we(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(t,n){return TM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},n.prototype.getLength=function(){return $x(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.$c!=this.getRevision()&&(this.Jc=this.getCoordinateAt(.5,this.Jc),this.$c=this.getRevision()),this.Jc},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=ce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,kt)},n.prototype.getType=function(){return Pt.LINE_STRING},n.prototype.intersectsExtent=function(t){return Ne(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ae(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Qr),NM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zM=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.bt=[],e.yt=-1,e.wt=-1,Array.isArray(n[0]))e.setCoordinates(n,i);else if(void 0!==i&&r)e.setFlatCoordinates(i,n),e.bt=r;else{for(var o=e.getLayout(),u=n,s=[],a=[],f=0,h=u.length;f<h;++f){var c=u[f];0===f&&(o=c.getLayout()),b(s,c.getFlatCoordinates()),a.push(s.length)}e.setFlatCoordinates(o,s),e.bt=a}return e}return NM(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.bt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.bt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<Sn(this.getExtent(),t,n)?r:(this.wt!=this.getRevision()&&(this.yt=Math.sqrt(ie(this.flatCoordinates,0,this.bt,this.stride,0)),this.wt=this.getRevision()),oe(this.flatCoordinates,0,this.bt,this.stride,this.yt,!1,t,n,i,r))},n.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=Tt&&this.layout!=Ct||0===this.flatCoordinates.length)return null;var r=void 0!==n&&n,e=void 0!==i&&i;return PM(this.flatCoordinates,0,this.bt,this.stride,t,r,e)},n.prototype.getCoordinates=function(){return be(this.flatCoordinates,0,this.bt,this.stride)},n.prototype.getEnds=function(){return this.bt},n.prototype.getLineString=function(t){return t<0||this.bt.length<=t?null:new IM(this.flatCoordinates.slice(0===t?0:this.bt[t-1],this.bt[t]),this.layout)},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.bt,i=this.layout,r=[],e=0,o=0,u=n.length;o<u;++o){var s=n[o],a=new IM(t.slice(e,s),i);r.push(a),e=s}return r},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,r=this.bt,e=this.stride,o=0,u=r.length;o<u;++o){var s=r[o];b(t,TM(n,i,s,e,.5)),i=s}return t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=le(this.flatCoordinates,0,this.bt,this.stride,t,i,0,r),new n(i,kt,r)},n.prototype.getType=function(){return Pt.MULTI_LINE_STRING},n.prototype.intersectsExtent=function(t){return ze(this.flatCoordinates,0,this.bt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=fe(this.flatCoordinates,0,t,this.stride,this.bt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Qr);function FM(t,n,i,r){for(var e=[],o=[1/0,1/0,-1/0,-1/0],u=0,s=i.length;u<s;++u){var a=i[u];o=Rn(t,n,a[0],r),e.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=a[a.length-1]}return e}var LM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),GM=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.Qc=[],e.tl=-1,e.nl=null,e.yt=-1,e.wt=-1,e.Mt=-1,e._t=null,!r&&!Array.isArray(n[0])){for(var o=e.getLayout(),u=n,s=[],a=[],f=0,h=u.length;f<h;++f){var c=u[f];0===f&&(o=c.getLayout());for(var l=s.length,v=c.getEnds(),d=0,p=v.length;d<p;++d)v[d]+=l;b(s,c.getFlatCoordinates()),a.push(v)}i=o,n=s,r=a}return void 0!==i&&r?(e.setFlatCoordinates(i,n),e.Qc=r):e.setCoordinates(n,i),e}return LM(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var i=this.flatCoordinates.length;b(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,e=(n=t.getEnds().slice()).length;r<e;++r)n[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.Qc.push();this.Qc.push(n),this.changed()},n.prototype.clone=function(){for(var t=this.Qc.length,i=new Array(t),r=0;r<t;++r)i[r]=this.Qc[r].slice();var e=new n(this.flatCoordinates.slice(),this.layout,i);return e.applyProperties(this),e},n.prototype.closestPointXY=function(t,n,i,r){return r<Sn(this.getExtent(),t,n)?r:(this.wt!=this.getRevision()&&(this.yt=Math.sqrt(re(this.flatCoordinates,0,this.Qc,this.stride,0)),this.wt=this.getRevision()),ue(this.getOrientedFlatCoordinates(),0,this.Qc,this.stride,this.yt,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return Ce(this.getOrientedFlatCoordinates(),0,this.Qc,this.stride,t,n)},n.prototype.getArea=function(){return _e(this.getOrientedFlatCoordinates(),0,this.Qc,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?We(n=this.getOrientedFlatCoordinates().slice(),0,this.Qc,this.stride,t):n=this.flatCoordinates,ge(n,0,this.Qc,this.stride)},n.prototype.getEndss=function(){return this.Qc},n.prototype.getFlatInteriorPoints=function(){if(this.tl!=this.getRevision()){var t=FM(this.flatCoordinates,0,this.Qc,this.stride);this.nl=Re(this.getOrientedFlatCoordinates(),0,this.Qc,this.stride,t),this.tl=this.getRevision()}return this.nl},n.prototype.getInteriorPoints=function(){return new AM(this.getFlatInteriorPoints().slice(),Tt)},n.prototype.getOrientedFlatCoordinates=function(){if(this.Mt!=this.getRevision()){var t=this.flatCoordinates;qe(t,0,this.Qc,this.stride)?this._t=t:(this._t=t.slice(),this._t.length=We(this._t,0,this.Qc,this.stride)),this.Mt=this.getRevision()}return this._t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=me(this.flatCoordinates,0,this.Qc,this.stride,Math.sqrt(t),i,0,r),new n(i,kt,r)},n.prototype.getPolygon=function(t){if(t<0||this.Qc.length<=t)return null;var n;if(0===t)n=0;else{var i=this.Qc[t-1];n=i[i.length-1]}var r=this.Qc[t].slice(),e=r[r.length-1];if(0!==n)for(var o=0,u=r.length;o<u;++o)r[o]-=n;return new Ye(this.flatCoordinates.slice(n,e),this.layout,r)},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.Qc,r=[],e=0,o=0,u=i.length;o<u;++o){var s=i[o].slice(),a=s[s.length-1];if(0!==e)for(var f=0,h=s.length;f<h;++f)s[f]-=e;var c=new Ye(n.slice(e,a),t,s);r.push(c),e=a}return r},n.prototype.getType=function(){return Pt.MULTI_POLYGON},n.prototype.intersectsExtent=function(t){return Ge(this.getOrientedFlatCoordinates(),0,this.Qc,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=he(this.flatCoordinates,0,t,this.stride,this.Qc);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},n}(Qr),DM=[1,0,0,1,0,0],BM=function(){function t(t,n,i,r,e){this.styleFunction,this.ot,this.W=e,this.il=t,this.rl=n,this.nl=null,this.el=null,this.bt=i,this.ul=r}return t.prototype.get=function(t){return this.ul[t]},t.prototype.getExtent=function(){return this.ot||(this.ot=this.il===Pt.POINT?Pn(this.rl):Rn(this.rl,0,this.rl.length,2)),this.ot},t.prototype.getFlatInteriorPoint=function(){if(!this.nl){var t=Xn(this.getExtent());this.nl=Pe(this.rl,0,this.bt,2,t,0)}return this.nl},t.prototype.getFlatInteriorPoints=function(){if(!this.nl){var t=FM(this.rl,0,this.bt,2);this.nl=Re(this.rl,0,this.bt,2,t)}return this.nl},t.prototype.getFlatMidpoint=function(){return this.el||(this.el=TM(this.rl,0,this.rl.length,2,.5)),this.el},t.prototype.getFlatMidpoints=function(){if(!this.el){this.el=[];for(var t=this.rl,n=0,i=this.bt,r=0,e=i.length;r<e;++r){var o=i[r],u=TM(t,n,o,2,.5);b(this.el,u),n=o}}return this.el},t.prototype.getId=function(){return this.W},t.prototype.getOrientedFlatCoordinates=function(){return this.rl},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,n){return this},t.prototype.getProperties=function(){return this.ul},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){return this.styleFunction},t.prototype.getType=function(){return this.il},t.prototype.transform=function(t){var n=(t=br(t)).getExtent(),i=t.getWorldExtent();if(n&&i){var r=Yn(i)/Yn(n);sn(DM,i[0],i[3],r,-r,0,0,0),qr(this.rl,0,this.rl.length,2,DM,this.rl)}},t.prototype.getEnds=function(){return this.bt},t}();function UM(t){var n=t.getType();switch(n){case Pt.POINT:return new Ee(t.getFlatCoordinates());case Pt.MULTI_POINT:return new AM(t.getFlatCoordinates(),kt);case Pt.LINE_STRING:return new IM(t.getFlatCoordinates(),kt);case Pt.MULTI_LINE_STRING:return new zM(t.getFlatCoordinates(),kt,t.getEnds());case Pt.POLYGON:var i=t.getFlatCoordinates(),r=t.getEnds(),e=Xe(i,r);return e.length>1?new GM(i,kt,e):new Ye(i,kt,r);default:throw new Error("Invalid geometry type:"+n)}}BM.prototype.getEndss=BM.prototype.getEnds,BM.prototype.getFlatCoordinates=BM.prototype.getOrientedFlatCoordinates;var qM=BM;var VM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),WM=function(t){function n(n){return t.call(this,n)||this}return VM(n,t),n.prototype.createRenderer=function(){return new wM(this)},n}(kx);function XM(t,n,i){for(var r,e,o,u,s,a,f=[],h=t(0),c=t(1),l=n(h),v=n(c),d=[c,h],p=[v,l],y=[1,0],m={},w=1e5;--w>0&&y.length>0;)o=y.pop(),h=d.pop(),l=p.pop(),(a=o.toString())in m||(f.push(l[0],l[1]),m[a]=!0),u=y.pop(),c=d.pop(),v=p.pop(),ci((e=n(r=t(s=(o+u)/2)))[0],e[1],l[0],l[1],v[0],v[1])<i?(f.push(v[0],v[1]),m[a=u.toString()]=!0):(y.push(u,s,s,o),p.push(v,e,e,l),d.push(c,r,r,h));return f}function HM(t,n,i,r,e){return XM((function(r){return[t,n+(i-n)*r]}),Ar(br("EPSG:4326"),r),e)}function KM(t,n,i,r,e){return XM((function(r){return[n+(i-n)*r,t]}),Ar(br("EPSG:4326"),r),e)}var YM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ZM=new Vv({color:"rgba(0,0,0,0.2)"}),JM=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],$M=function(t){function n(n){var i=this,r=n||{},e=A({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,(i=t.call(this,e)||this).di=null,i.sl=1/0,i.al=1/0,i.fl=-1/0,i.hl=-1/0,i.cl=1/0,i.ll=1/0,i.vl=-1/0,i.dl=-1/0,i.pl=void 0!==r.targetSize?r.targetSize:100,i.yl=void 0!==r.maxLines?r.maxLines:100,i.ml=[],i.wl=[],i.bl=void 0!==r.strokeStyle?r.strokeStyle:ZM,i.gl=void 0,i.xl=void 0,i.Ml=null,i._l=null,i.Sl=null,i.Ol=null,i.jl=null,i.El=null,i.kl=null,r.showLabels&&(i.Al=null==r.lonLabelFormatter?Ji.bind(i,"EW"):r.lonLabelFormatter,i.Tl=null==r.latLabelFormatter?Ji.bind(i,"NS"):r.latLabelFormatter,i.Cl=null==r.lonLabelPosition?0:r.lonLabelPosition,i.Pl=null==r.latLabelPosition?1:r.latLabelPosition,i.Rl=new $v({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new nd({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Tv({color:"rgba(0,0,0,1)"}),stroke:new Vv({color:"rgba(255,255,255,1)",width:3})})}),i.Il=function(t){var n=t.get("graticule_label");return this.Rl.getText().setText(n),this.Rl}.bind(i),i.Nl=new $v({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new nd({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Tv({color:"rgba(0,0,0,1)"}),stroke:new Vv({color:"rgba(255,255,255,1)",width:3})})}),i.zl=function(t){var n=t.get("graticule_label");return this.Nl.getText().setText(n),this.Nl}.bind(i),i.El=[],i.kl=[],i.addEventListener(fu,i.Fl.bind(i))),i.Ll=void 0!==r.intervals?r.intervals:JM,i.setSource(new zd({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new ht,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),i.Gl=[],i.Dl=new $v({stroke:i.bl}),i.Bl=null,i.Ff=null,i.Nc=null,i.setRenderOrder(null),i}return YM(n,t),n.prototype.strategyFunction=function(t,n){var i=t.slice();return this.di&&this.getSource().getWrapX()&&ui(i,this.di),this.Bl&&(Nn(this.Bl,i,n)?i=this.Bl.slice():this.getSource().removeLoadedExtent(this.Bl)),[i]},n.prototype.loaderFunction=function(t,n,i){this.Bl=t;var r=this.getSource(),e=Zn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.Ff&&In(this.Ff,e)&&this.Nc===n||(this.Ff=e,this.Nc=n,ni(e)))){var o=Xn(e),u=n*n/4;(!this.di||!Er(this.di,i))&&this.Ul(i),this.ql(e,o,n,u);var s,a=this.ml.length+this.wl.length;for(this.El&&(a+=this.ml.length),this.kl&&(a+=this.wl.length);a>this.Gl.length;)s=new Et,this.Gl.push(s);var f=r.getFeaturesCollection();f.clear();var h,c,l=0;for(h=0,c=this.ml.length;h<c;++h)(s=this.Gl[l++]).setGeometry(this.ml[h]),s.setStyle(this.Dl),f.push(s);for(h=0,c=this.wl.length;h<c;++h)(s=this.Gl[l++]).setGeometry(this.wl[h]),s.setStyle(this.Dl),f.push(s)}},n.prototype.Vl=function(t,n,i,r,e,o){var u=this.Wl(t,n,i,r,o);if(ti(u.getExtent(),e)){if(this.El){var s=this.Al(t);o in this.El?this.El[o].text=s:this.El[o]={geom:new Ee([]),text:s}}this.ml[o++]=u}return o},n.prototype.Xl=function(t,n,i,r,e,o){var u=this.Hl(t,n,i,r,o);if(ti(u.getExtent(),e)){if(this.kl){var s=this.Tl(t);o in this.kl?this.kl[o].text=s:this.kl[o]={geom:new Ee([]),text:s}}this.wl[o++]=u}return o},n.prototype.Fl=function(t){var n=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,r=t.frameState.size,e=t.frameState.extent,o=Xn(e),u=e;if(n){var s=r[0]*i,a=r[1]*i;u=[o[0]-s/2,o[1]-a/2,o[0]+s/2,o[1]+a/2]}var f=0,h=0,c=this.Pl<.5,l=this.di.getExtent(),v=Qn(l);this.getSource().getWrapX()&&this.di.canWrapX()&&!jn(l,e)&&(f=Math.floor((e[0]-l[0])/v),h=Math.ceil((e[2]-l[2])/v),c=c!==Math.abs(n)>Math.PI/2);for(var d=Lh(t),p=f;p<=h;++p){var y=this.ml.length+this.wl.length,m=void 0,w=void 0,b=void 0,g=void 0;if(this.El)for(w=0,b=this.El.length;w<b;++w){var x=this.ml[w];if(n||0!==p)(M=x.clone()).translate(p*v,0),M.rotate(-n,o),(g=this.Kl(M,u,w)).rotate(n,o);else g=this.Kl(x,e,w);(m=this.Gl[y++]).setGeometry(g),m.set("graticule_label",this.El[w].text),d.drawFeature(m,this.Il(m))}if(this.kl&&(p===f&&c||p===h&&!c))for(w=0,b=this.wl.length;w<b;++w){var M;x=this.wl[w];if(n||0!==p)(M=x.clone()).translate(p*v,0),M.rotate(-n,o),(g=this.Yl(M,u,w)).rotate(n,o);else g=this.Yl(x,e,w);(m=this.Gl[y++]).setGeometry(g),m.set("graticule_label",this.kl[w].text),d.drawFeature(m,this.zl(m))}}},n.prototype.ql=function(t,n,i,r){var e=this.Zl(i);if(-1==e)return this.ml.length=0,this.wl.length=0,this.El&&(this.El.length=0),void(this.kl&&(this.kl.length=0));var o=!1,u=this.di.getExtent(),s=Qn(u);this.getSource().getWrapX()&&this.di.canWrapX()&&!jn(u,t)&&(Qn(t)>=s?(t[0]=u[0],t[2]=u[2]):o=!0);var a=[ai(n[0],this.vl,this.cl),ai(n[1],this.dl,this.ll)],f=this.xl(a);isNaN(f[1])&&(f[1]=Math.abs(this.sl)>=Math.abs(this.fl)?this.sl:this.fl);var h,c,l,v,d=ai(f[0],this.hl,this.al),p=ai(f[1],this.fl,this.sl),y=this.yl,m=t;o||(m=[ai(t[0],this.vl,this.cl),ai(t[1],this.dl,this.ll),ai(t[2],this.vl,this.cl),ai(t[3],this.dl,this.ll)]);var w=oi(m,this.xl,void 0,8),b=w[3],g=w[2],x=w[1],M=w[0];if(o||(On(m,this._l)&&(M=this.hl,x=this.fl),On(m,this.Sl)&&(g=this.al,x=this.fl),On(m,this.Ol)&&(M=this.hl,b=this.sl),On(m,this.jl)&&(g=this.al,b=this.sl),b=ai(b,p,this.sl),g=ai(g,d,this.al),x=ai(x,this.fl,p),M=ai(M,this.hl,d)),v=ai(d=Math.floor(d/e)*e,this.hl,this.al),c=this.Vl(v,x,b,r,t,0),h=0,o)for(;(v-=e)>=M&&h++<y;)c=this.Vl(v,x,b,r,t,c);else for(;v!=this.hl&&h++<y;)v=Math.max(v-e,this.hl),c=this.Vl(v,x,b,r,t,c);if(v=ai(d,this.hl,this.al),h=0,o)for(;(v+=e)<=g&&h++<y;)c=this.Vl(v,x,b,r,t,c);else for(;v!=this.al&&h++<y;)v=Math.min(v+e,this.al),c=this.Vl(v,x,b,r,t,c);for(this.ml.length=c,this.El&&(this.El.length=c),l=ai(p=Math.floor(p/e)*e,this.fl,this.sl),c=this.Xl(l,M,g,r,t,0),h=0;l!=this.fl&&h++<y;)l=Math.max(l-e,this.fl),c=this.Xl(l,M,g,r,t,c);for(l=ai(p,this.fl,this.sl),h=0;l!=this.sl&&h++<y;)l=Math.min(l+e,this.sl),c=this.Xl(l,M,g,r,t,c);this.wl.length=c,this.kl&&(this.kl.length=c)},n.prototype.Zl=function(t){for(var n=this.Ml[0],i=this.Ml[1],r=-1,e=Math.pow(this.pl*t,2),o=[],u=[],s=0,a=this.Ll.length;s<a;++s){var f=ai(this.Ll[s]/2,0,90),h=ai(i,-90+f,90-f);if(o[0]=n-f,o[1]=h-f,u[0]=n+f,u[1]=h+f,this.gl(o,o),this.gl(u,u),Math.pow(u[0]-o[0],2)+Math.pow(u[1]-o[1],2)<=e)break;r=this.Ll[s]}return r},n.prototype.Wl=function(t,n,i,r,e){var o=HM(t,n,i,this.di,r),u=this.ml[e];return u?(u.setFlatCoordinates(kt,o),u.changed()):(u=new IM(o,kt),this.ml[e]=u),u},n.prototype.Kl=function(t,n,i){var r=t.getFlatCoordinates(),e=1,o=r.length-1;r[e]>r[o]&&(e=o,o=1);var u=Math.max(n[1],r[e]),s=Math.min(n[3],r[o]),a=ai(n[1]+Math.abs(n[1]-n[3])*this.Cl,u,s),f=[r[e-1]+(r[o-1]-r[e-1])*(a-r[e])/(r[o]-r[e]),a],h=this.El[i].geom;return h.setCoordinates(f),h},n.prototype.getMeridians=function(){return this.ml},n.prototype.Hl=function(t,n,i,r,e){var o=KM(t,n,i,this.di,r),u=this.wl[e];return u?(u.setFlatCoordinates(kt,o),u.changed()):u=new IM(o,kt),u},n.prototype.Yl=function(t,n,i){var r=t.getFlatCoordinates(),e=0,o=r.length-2;r[e]>r[o]&&(e=o,o=0);var u=Math.max(n[0],r[e]),s=Math.min(n[2],r[o]),a=ai(n[0]+Math.abs(n[0]-n[2])*this.Pl,u,s),f=[a,r[e+1]+(r[o+1]-r[e+1])*(a-r[e])/(r[o]-r[e])],h=this.kl[i].geom;return h.setCoordinates(f),h},n.prototype.getParallels=function(){return this.wl},n.prototype.Ul=function(t){var n=br("EPSG:4326"),i=t.getWorldExtent();this.sl=i[3],this.al=i[2],this.fl=i[1],this.hl=i[0];var r=Ar(t,n);if(this.hl<this.al)this.xl=r;else{var e=this.hl+this.al/2;this.al+=360,this.xl=function(t,n,i){for(var o=i||2,u=r(t,n,o),s=0,a=u.length;s<a;s+=o)u[s]<e&&(u[s]+=360);return u}}this.gl=Ar(n,t);var o=oi([this.hl,this.fl,this.al,this.sl],this.gl,void 0,8);this.vl=o[0],this.cl=o[2],this.dl=o[1],this.ll=o[3],this._l=this.gl([this.hl,this.fl]),this.Sl=this.gl([this.al,this.fl]),this.Ol=this.gl([this.hl,this.sl]),this.jl=this.gl([this.al,this.sl]),this.Ml=this.xl(Xn(t.getExtent())),isNaN(this.Ml[1])&&(this.Ml[1]=Math.abs(this.sl)>=Math.abs(this.fl)?this.sl:this.fl),this.di=t},n}(WM),QM=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),t_="blur",n_="gradient",i_="radius",r_=["#00f","#0ff","#0f0","#ff0","#f00"];var e_=function(t){function n(n){var i=this,r=n||{},e=A({},r);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,(i=t.call(this,e)||this).Jl=null,i.addChangeListener(n_,i.$l),i.setGradient(r.gradient?r.gradient:r_),i.setBlur(void 0!==r.blur?r.blur:15),i.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return i.Ql="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return QM(n,t),n.prototype.getBlur=function(){return this.get(t_)},n.prototype.getGradient=function(){return this.get(n_)},n.prototype.getRadius=function(){return this.get(i_)},n.prototype.$l=function(){this.Jl=function(t){for(var n=1,i=256,r=jo(n,i),e=r.createLinearGradient(0,0,n,i),o=1/(t.length-1),u=0,s=t.length;u<s;++u)e.addColorStop(u*o,t[u]);return r.fillStyle=e,r.fillRect(0,0,n,i),r.canvas}(this.getGradient())},n.prototype.setBlur=function(t){this.set(t_,t)},n.prototype.setGradient=function(t){this.set(n_,t)},n.prototype.setRadius=function(t){this.set(i_,t)},n.prototype.createRenderer=function(){return new Tx(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.Ql(t);return void 0!==n?ai(n,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(i_)+this.get(t_))}.bind(this),u_blurSlope:function(){return this.get(i_)/Math.max(1,this.get(t_))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.Jl}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},n.prototype.renderDeclutter=function(){},n}(kx),o_=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,n){var i;if(n){var r=n.dataProjection?br(n.dataProjection):this.readProjection(t);n.extent&&r&&r.getUnits()===Lt.TILE_PIXELS&&(r=br(r)).setWorldExtent(n.extent),i={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return A({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return r()},t.prototype.readFeature=function(t,n){return r()},t.prototype.readFeatures=function(t,n){return r()},t.prototype.readGeometry=function(t,n){return r()},t.prototype.readProjection=function(t){return r()},t.prototype.writeFeature=function(t,n){return r()},t.prototype.writeFeatures=function(t,n){return r()},t.prototype.writeGeometry=function(t,n){return r()},t}();function u_(t,n,i){var r,e=i?br(i.featureProjection):null,o=i?br(i.dataProjection):null;if(r=e&&o&&!Er(e,o)?(n?t.clone():t).transform(n?e:o,n?o:e):t,n&&i&&void 0!==i.decimals){var u=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*u)/u;return t}))}return r}function s_(t,n){var i=n?br(n.featureProjection):null,r=n?br(n.dataProjection):null;return i&&r&&!Er(i,r)?Cr(t,r,i):t}var a_=i(98),f_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function h_(t,n,i){if(3===t){var r={keys:[],values:[],features:[]},e=i.readVarint()+i.pos;i.readFields(c_,r,e),r.length=r.features.length,r.length&&(n[r.name]=r)}}function c_(t,n,i){if(15===t)n.version=i.readVarint();else if(1===t)n.name=i.readString();else if(5===t)n.extent=i.readVarint();else if(2===t)n.features.push(i.pos);else if(3===t)n.keys.push(i.readString());else if(4===t){for(var r=null,e=i.readVarint()+i.pos;i.pos<e;)r=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;n.values.push(r)}}function l_(t,n,i){if(1==t)n.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var e=n.layer.keys[i.readVarint()],o=n.layer.values[i.readVarint()];n.properties[e]=o}else 3==t?n.type=i.readVarint():4==t&&(n.geometry=i.pos)}function v_(t,n,i){t.pos=n.features[i];var r=t.readVarint()+t.pos,e={layer:n,type:0,properties:{}};return t.readFields(l_,e,r),e}var d_=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=new si({code:"",units:Lt.TILE_PIXELS}),i.tv=r.featureClass?r.featureClass:qM,i.H=r.geometryName,i.nv=r.layerName?r.layerName:"layer",i.qf=r.layers?r.layers:null,i.iv=r.idProperty,i.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],i}return f_(n,t),n.prototype.rv=function(t,n,i,r){t.pos=n.geometry;for(var e=t.readVarint()+t.pos,o=1,u=0,s=0,a=0,f=0,h=0;t.pos<e;){if(!u){var c=t.readVarint();o=7&c,u=c>>3}u--,1===o||2===o?(s+=t.readSVarint(),a+=t.readSVarint(),1===o&&f>h&&(r.push(f),h=f),i.push(s,a),f+=2):7===o?f>h&&(i.push(i[h],i[h+1]),f+=2):St(!1,59)}f>h&&(r.push(f),h=f)},n.prototype.ev=function(t,n,i){var r,e=n.type;if(0===e)return null;var o,u=n.properties;this.iv?(o=u[this.iv],delete u[this.iv]):o=n.id,u[this.nv]=n.layer.name;var s=[],a=[];this.rv(t,n,s,a);var f=function(t,n){var i;1===t?i=1===n?Pt.POINT:Pt.MULTI_POINT:2===t?i=1===n?Pt.LINE_STRING:Pt.MULTI_LINE_STRING:3===t&&(i=Pt.POLYGON);return i}(e,a.length);if(this.tv===qM)(r=new this.tv(f,s,a,u,o)).transform(i.dataProjection);else{var h=void 0;if(f==Pt.POLYGON){var c=Xe(s,a);h=c.length>1?new GM(s,kt,c):new Ye(s,kt,a)}else h=f===Pt.POINT?new Ee(s,kt):f===Pt.LINE_STRING?new IM(s,kt):f===Pt.POLYGON?new Ye(s,kt,a):f===Pt.MULTI_POINT?new AM(s,kt):f===Pt.MULTI_LINE_STRING?new zM(s,kt,a):null;r=new(0,this.tv),this.H&&r.setGeometryName(this.H);var l=u_(h,!1,i);r.setGeometry(l),void 0!==o&&r.setId(o),r.setProperties(u,!0)}return r},n.prototype.getType=function(){return ah},n.prototype.readFeatures=function(t,n){var i=this.qf,r=this.adaptOptions(n),e=br(r.dataProjection);e.setWorldExtent(r.extent),r.dataProjection=e;var o=new a_(t),u=o.readFields(h_,{}),s=[];for(var a in u)if(!i||-1!=i.indexOf(a)){var f=u[a],h=f?[0,0,f.extent,f.extent]:null;e.setExtent(h);for(var c=0,l=f.length;c<l;++c){var v=v_(o,f,c),d=this.ev(o,v,r);null!==d&&s.push(d)}}return s},n.prototype.readProjection=function(t){return this.dataProjection},n.prototype.setLayers=function(t){this.qf=t},n}(o_),p_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),y_=function(t){function n(n){var i=this,r=n||{},e=A({},r);delete e.preload,delete e.useInterimTilesOnError,(i=t.call(this,e)||this).on,i.once,i.un,r.renderMode===xM&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),r.renderMode=void 0);var o=r.renderMode||MM;return St(o==MM||o==_M,28),i.ov=o,i.setPreload(r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i.getBackground,i.setBackground,i}return p_(n,t),n.prototype.createRenderer=function(){return new EM(this)},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderMode=function(){return this.ov},n.prototype.getPreload=function(){return this.get(zg)},n.prototype.getUseInterimTilesOnError=function(){return this.get(Fg)},n.prototype.setPreload=function(t){this.set(zg,t)},n.prototype.setUseInterimTilesOnError=function(t){this.set(Fg,t)},n}(kx),m_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function w_(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].clone());return n}var b_=function(t){function n(n){var i=t.call(this)||this;return i.uv=n||null,i.sv=[],i.av(),i}return m_(n,t),n.prototype.fv=function(){this.sv.forEach(J),this.sv.length=0},n.prototype.av=function(){if(this.uv)for(var t=0,n=this.uv.length;t<n;++t)this.sv.push(Y(this.uv[t],N,this.changed,this))},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.uv),t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<Sn(this.getExtent(),t,n))return r;for(var e=this.uv,o=0,u=e.length;o<u;++o)r=e[o].closestPointXY(t,n,i,r);return r},n.prototype.containsXY=function(t,n){for(var i=this.uv,r=0,e=i.length;r<e;++r)if(i[r].containsXY(t,n))return!0;return!1},n.prototype.computeExtent=function(t){Cn(t);for(var n=this.uv,i=0,r=n.length;i<r;++i)zn(t,n[i].getExtent());return t},n.prototype.getGeometries=function(){return w_(this.uv)},n.prototype.getGeometriesArray=function(){return this.uv},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.uv,i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.uv,e=!1,o=0,u=r.length;o<u;++o){var s=r[o],a=s.getSimplifiedGeometry(t);i.push(a),a!==s&&(e=!0)}if(e){var f=new n(null);return f.setGeometriesArray(i),f}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},n.prototype.getType=function(){return Pt.GEOMETRY_COLLECTION},n.prototype.intersectsExtent=function(t){for(var n=this.uv,i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.uv.length},n.prototype.rotate=function(t,n){for(var i=this.uv,r=0,e=i.length;r<e;++r)i[r].rotate(t,n);this.changed()},n.prototype.scale=function(t,n,i){var r=i;r||(r=Xn(this.getExtent()));for(var e=this.uv,o=0,u=e.length;o<u;++o)e[o].scale(t,n,r);this.changed()},n.prototype.setGeometries=function(t){this.setGeometriesArray(w_(t))},n.prototype.setGeometriesArray=function(t){this.fv(),this.uv=t,this.av(),this.changed()},n.prototype.applyTransform=function(t){for(var n=this.uv,i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()},n.prototype.translate=function(t,n){for(var i=this.uv,r=0,e=i.length;r<e;++r)i[r].translate(t,n);this.changed()},n.prototype.disposeInternal=function(){this.fv(),t.prototype.disposeInternal.call(this)},n}(Yr),g_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function x_(t){if("string"==typeof t){var n=JSON.parse(t);return n||null}return null!==t?t:null}var M_=function(t){function n(){return t.call(this)||this}return g_(n,t),n.prototype.getType=function(){return fh},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject(x_(t),this.getReadOptions(t,n))},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(x_(t),this.getReadOptions(t,n))},n.prototype.readFeatureFromObject=function(t,n){return r()},n.prototype.readFeaturesFromObject=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(x_(t),this.getReadOptions(t,n))},n.prototype.readGeometryFromObject=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromObject(x_(t))},n.prototype.readProjectionFromObject=function(t){return r()},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},n.prototype.writeFeatureObject=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},n.prototype.writeFeaturesObject=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},n.prototype.writeGeometryObject=function(t,n){return r()},n}(o_),__=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function S_(t,n){if(!t)return null;var i;switch(t.type){case Pt.POINT:i=function(t){return new Ee(t.coordinates)}(t);break;case Pt.LINE_STRING:i=function(t){return new IM(t.coordinates)}(t);break;case Pt.POLYGON:i=function(t){return new Ye(t.coordinates)}(t);break;case Pt.MULTI_POINT:i=function(t){return new AM(t.coordinates)}(t);break;case Pt.MULTI_LINE_STRING:i=function(t){return new zM(t.coordinates)}(t);break;case Pt.MULTI_POLYGON:i=function(t){return new GM(t.coordinates)}(t);break;case Pt.GEOMETRY_COLLECTION:i=function(t,n){var i=t.geometries.map((function(t){return S_(t,n)}));return new b_(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return u_(i,!1,n)}function O_(t,n){var i,r=(t=u_(t,!0,n)).getType();switch(r){case Pt.POINT:i=function(t,n){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case Pt.LINE_STRING:i=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case Pt.POLYGON:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,n);break;case Pt.MULTI_POINT:i=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case Pt.MULTI_LINE_STRING:i=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case Pt.MULTI_POLYGON:i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,n);break;case Pt.GEOMETRY_COLLECTION:i=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=A({},n);return delete i.featureProjection,O_(t,i)}))}}(t,n);break;case Pt.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}var j_=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).dataProjection=br(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=br(r.featureProjection)),i.H=r.geometryName,i.hv=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return __(n,t),n.prototype.readFeatureFromObject=function(t,n){var i=null,r=S_((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),e=new Et;return this.H?e.setGeometryName(this.H):this.hv&&"geometry_name"in i!==void 0&&e.setGeometryName(i.geometry_name),e.setGeometry(r),"id"in i&&e.setId(i.id),i.properties&&e.setProperties(i.properties,!0),e},n.prototype.readFeaturesFromObject=function(t,n){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,e=0,o=r.length;e<o;++e)i.push(this.readFeatureFromObject(r[e],n))}else i=[this.readFeatureFromObject(t,n)];return i},n.prototype.readGeometryFromObject=function(t,n){return S_(t,n)},n.prototype.readProjectionFromObject=function(t){var n,i=t.crs;return i?"name"==i.type?n=br(i.properties.name):"EPSG"===i.type?n=br("EPSG:"+i.properties.code):St(!1,36):n=this.dataProjection,n},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;var e=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=O_(o,n),delete e[t.getGeometryName()]),P(e)||(i.properties=e),i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}},n.prototype.writeGeometryObject=function(t,n){return O_(t,this.adaptOptions(n))},n}(M_);function E_(t){return(E_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k_(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}var A_={338:function(t){function n(t,n){this.x=t,this.y=n}t.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,i=t.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=n,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),i=Math.sin(t),r=n*this.x-i*this.y,e=i*this.x+n*this.y;return this.x=r,this.y=e,this},_rotateAround:function(t,n){var i=Math.cos(t),r=Math.sin(t),e=n.x+i*(this.x-n.x)-r*(this.y-n.y),o=n.y+r*(this.x-n.x)+i*(this.y-n.y);return this.x=e,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}},946:function(t){function n(t,n,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(r-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}t.exports=n,n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,n){var i,r,e,o,u;for(void 0===n&&(n=1e-6),e=t,u=0;u<8;u++){if(o=this.sampleCurveX(e)-t,Math.abs(o)<n)return e;var s=this.sampleCurveDerivativeX(e);if(Math.abs(s)<1e-6)break;e-=o/s}if((e=t)<(i=0))return i;if(e>(r=1))return r;for(;i<r;){if(o=this.sampleCurveX(e),Math.abs(o-t)<n)return e;t>o?i=e:r=e,e=.5*(r-i)+i}return e},n.prototype.solve=function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},872:function(t,n){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function e(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function u(t){return"%"===t[t.length-1]?e(parseFloat(t)/100):e(parseFloat(t))}function s(t,n,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(n-t)*i*6:2*i<1?n:3*i<2?t+(n-t)*(2/3-i)*6:t}try{n.G=function(t){var n,e=t.replace(/ /g,"").toLowerCase();if(e in i)return i[e].slice();if("#"===e[0])return 4===e.length?(n=parseInt(e.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===e.length&&(n=parseInt(e.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var a=e.indexOf("("),f=e.indexOf(")");if(-1!==a&&f+1===e.length){var h=e.substr(0,a),c=e.substr(a+1,f-(a+1)).split(","),l=1;switch(h){case"rgba":if(4!==c.length)return null;l=u(c.pop());case"rgb":return 3!==c.length?null:[o(c[0]),o(c[1]),o(c[2]),l];case"hsla":if(4!==c.length)return null;l=u(c.pop());case"hsl":if(3!==c.length)return null;var v=(parseFloat(c[0])%360+360)%360/360,d=u(c[1]),p=u(c[2]),y=p<=.5?p*(d+1):p+d-p*d,m=2*p-y;return[r(255*s(m,y,v+1/3)),r(255*s(m,y,v)),r(255*s(m,y,v-1/3)),l];default:return null}}return null}}catch(t){}},523:function(t){var n={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},i=" ",r=/(italic|oblique)$/i,e={};t.exports=function(t,o,u){var s=e[t];if(!s){Array.isArray(t)||(t=[t]);for(var a=400,f="normal",h=[],c=0,l=t.length;c<l;++c){var v=t[c].split(" "),d=v[v.length-1].toLowerCase();for(var p in"normal"==d||"italic"==d||"oblique"==d?(f=d,v.pop(),d=v[v.length-1].toLowerCase()):r.test(d)&&(d=d.replace(r,""),f=v[v.length-1].replace(d,"")),n){var y=v.length>1?v[v.length-2].toLowerCase():"";if(d==p||d==p.replace("-","")||y+"-"+d==p){a=n[p],v.pop(),y&&p.startsWith(y)&&v.pop();break}}"number"==typeof d&&(a=d);var m=v.join(i).replace("Klokantech Noto Sans","Noto Sans");-1!==m.indexOf(i)&&(m='"'+m+'"'),h.push(m)}s=e[t]=[f,a,h]}return s[0]+i+s[1]+i+o+"px"+(u?"/"+u:"")+i+s[2]}},619:function(t){t.exports=function t(i,r){if(!i){var e=new n(r);throw Error.captureStackTrace&&Error.captureStackTrace(e,t),e}};var n=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(Error);n.prototype.name="AssertionError"},422:function(t){(function(){var n;t.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return n},getLink:function(t){return"https://fonts.google.com/specimen/"+t.replace(/( )/g,"+")},normalizeName:function(t){return t}},n=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this)},840:function(t){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}}}},T_={};function C_(t){var n=T_[t];if(void 0!==n)return n.exports;var i=T_[t]={exports:{}};return A_[t].call(i.exports,i,i.exports,C_),i.exports}C_.d=function(t,n){for(var i in n)C_.o(n,i)&&!C_.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},C_.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},C_.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};n={};!function(){var t,i;C_.d(n,{nn:function(){return le},h0:function(){return ne},bg:function(){return Jr},ZP:function(){return le},gG:function(){return we},Hs:function(){return de},xb:function(){return pe},b5:function(){return ye},YU:function(){return Nr},iC:function(){return Ar},LN:function(){return me},uX:function(){return zr}});var r={};C_.r(r),C_.d(r,{array:function(){return en},color:function(){return rn},number:function(){return nn}});var e={};C_.r(e),C_.d(e,{hcl:function(){return gn},lab:function(){return bn}});var o=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return Av}))),u=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return Tv}))),s=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return qv}))),a=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return qM}))),f=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return Vv}))),h=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return $v}))),c=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return nd}))),l=C_(872),v=function(t,n,i,r){void 0===r&&(r=1),this.r=t,this.g=n,this.b=i,this.a=r};v.parse=function(t){if(t){if(t instanceof v)return t;if("string"==typeof t){var n=(0,l.G)(t);if(n)return new v(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}}},v.prototype.toString=function(){var t=this.toArray(),n=t[0],i=t[1],r=t[2],e=t[3];return"rgba("+Math.round(n)+","+Math.round(i)+","+Math.round(r)+","+e+")"},v.prototype.toArray=function(){var t=this,n=t.r,i=t.g,r=t.b,e=t.a;return 0===e?[0,0,0,0]:[255*n/e,255*i/e,255*r/e,e]},v.black=new v(0,0,0,1),v.white=new v(1,1,1,1),v.transparent=new v(0,0,0,0),v.red=new v(1,0,0,1),v.blue=new v(0,0,1,1);var d=v,p=C_(619),y=function(t,n){var i=t.stops;if(!i)return function(t,n){var i=["get",t.property];if(void 0===t.default)return"string"===n.type?["string",i]:i;if("enum"===n.type)return["match",i,Object.keys(n.values),i,t.default];var r=["color"===n.type?"to-color":n.type,i,m(t.default)];return"array"===n.type&&r.splice(1,0,n.value,n.length||null),r}(t,n);var r=i&&"object"===E_(i[0][0]),e=r||void 0!==t.property,o=r||!e;return i=i.map((function(t){return!e&&n.tokens&&"string"==typeof t[1]?[t[0],S(t[1])]:[t[0],m(t[1])]})),r?function(t,n,i){for(var r={},e={},o=[],u=0;u<i.length;u++){var s=i[u],a=s[0].zoom;void 0===r[a]&&(r[a]={zoom:a,type:t.type,property:t.property,default:t.default},e[a]=[],o.push(a)),e[a].push([s[0].value,s[1]])}if("exponential"===_({},n)){for(var f=[w(t),["linear"],["zoom"]],h=0,c=o;h<c.length;h+=1){var l=c[h];M(f,l,g(r[l],n,e[l]),!1)}return f}for(var v=["step",["zoom"]],d=0,p=o;d<p.length;d+=1){var y=p[d];M(v,y,g(r[y],n,e[y]),!0)}return x(v),v}(t,n,i):o?function(t,n,i,r){void 0===r&&(r=["zoom"]);var e,o=_(t,n),u=!1;if("interval"===o)e=["step",r],u=!0;else{if("exponential"!==o)throw new Error('Unknown zoom function type "'+o+'"');var s=void 0!==t.base?t.base:1;e=[w(t),1===s?["linear"]:["exponential",s],r]}for(var a=0,f=i;a<f.length;a+=1){var h=f[a];M(e,h[0],h[1],u)}return x(e),e}(t,n,i):g(t,n,i)};function m(t){return"object"===E_(t)?["literal",t]:t}function w(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function b(t,n){var i,r,e=m((i=t.default,r=n.default,void 0!==i?i:void 0!==r?r:void 0));return void 0===e&&"resolvedImage"===n.type?"":e}function g(t,n,i){var r=_(t,n),e=["get",t.property];if("categorical"===r&&"boolean"==typeof i[0][0]){p(t.stops.length>0&&t.stops.length<=2);for(var o=["case"],u=0,s=i;u<s.length;u+=1){var a=s[u];o.push(["==",e,a[0]],a[1])}return o.push(b(t,n)),o}if("categorical"===r){for(var f=["match",e],h=0,c=i;h<c.length;h+=1){var l=c[h];M(f,l[0],l[1],!1)}return f.push(b(t,n)),f}if("interval"===r){for(var v=["step",["number",e]],d=0,y=i;d<y.length;d+=1){var g=y[d];M(v,g[0],g[1],!0)}return x(v),void 0===t.default?v:["case",["==",["typeof",e],"number"],v,m(t.default)]}if("exponential"===r){for(var S=void 0!==t.base?t.base:1,O=[w(t),1===S?["linear"]:["exponential",S],["number",e]],j=0,E=i;j<E.length;j+=1){var k=E[j];M(O,k[0],k[1],!1)}return void 0===t.default?O:["case",["==",["typeof",e],"number"],O,m(t.default)]}throw new Error("Unknown property function type "+r)}function x(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function M(t,n,i,r){t.length>3&&n===t[t.length-2]||(r&&2===t.length||t.push(n),t.push(i))}function _(t,n){return t.type?t.type:(p(n.expression),n.expression.interpolated?"exponential":"interval")}function S(t){for(var n=["concat"],i=/{([^{}]+)}/g,r=0,e=i.exec(t);null!==e;e=i.exec(t)){var o=t.slice(r,i.lastIndex-e[0].length);r=i.lastIndex,o.length>0&&n.push(o),n.push(["get",e[1]])}if(1===n.length)return t;if(r<t.length)n.push(t.slice(r));else if(2===n.length)return["to-string",n[1]];return n}function O(t){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];for(var r=0,e=n;r<e.length;r+=1){var o=e[r];for(var u in o)t[u]=o[u]}return t}var j=function(t){function n(n,i){t.call(this,i),this.message=i,this.key=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(Error),E=function(t,n){void 0===n&&(n=[]),this.parent=t,this.bindings={};for(var i=0,r=n;i<r.length;i+=1){var e=r[i],o=e[0],u=e[1];this.bindings[o]=u}};E.prototype.concat=function(t){return new E(this,t)},E.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},E.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var k=E,T={kind:"null"},C={kind:"number"},P={kind:"string"},R={kind:"boolean"},I={kind:"color"},N={kind:"object"},z={kind:"value"},F={kind:"collator"},L={kind:"formatted"},G={kind:"resolvedImage"};function D(t,n){return{kind:"array",itemType:t,N:n}}function B(t){if("array"===t.kind){var n=B(t.itemType);return"number"==typeof t.N?"array<"+n+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+n+">"}return t.kind}var U=[T,C,P,R,I,L,N,D(z),G];function q(t,n){if("error"===n.kind)return null;if("array"===t.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!q(t.itemType,n.itemType))&&("number"!=typeof t.N||t.N===n.N))return null}else{if(t.kind===n.kind)return null;if("value"===t.kind)for(var i=0,r=U;i<r.length;i+=1){if(!q(r[i],n))return null}}return"Expected "+B(t)+" but found "+B(n)+" instead."}function V(t,n){return n.some((function(n){return n.kind===t.kind}))}function W(t,n){return n.some((function(n){return"null"===n?null===t:"array"===n?Array.isArray(t):"object"===n?t&&!Array.isArray(t)&&"object"===E_(t):n===E_(t)}))}var X=function(t,n,i){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};X.prototype.compare=function(t,n){return this.collator.compare(t,n)},X.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var H=X,K=function(t,n,i,r,e){this.text=t.normalize?t.normalize():t,this.image=n,this.scale=i,this.fontStack=r,this.textColor=e},Y=function(t){this.sections=t};Y.fromString=function(t){return new Y([new K(t,null,null,null,null)])},Y.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},Y.factory=function(t){return t instanceof Y?t:Y.fromString(t)},Y.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},Y.prototype.serialize=function(){for(var t=["format"],n=0,i=this.sections;n<i.length;n+=1){var r=i[n];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var e={};r.fontStack&&(e["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(e["font-scale"]=r.scale),r.textColor&&(e["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(e)}}return t};var Z=Y,J=function(t){this.name=t.name,this.available=t.available};J.prototype.toString=function(){return this.name},J.fromString=function(t){return t?new J({name:t,available:!1}):null},J.prototype.serialize=function(){return["image",this.name]};var $=J;function Q(t,n,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,n,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,n,i,r]:[t,n,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function tt(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof d)return!0;if(t instanceof H)return!0;if(t instanceof Z)return!0;if(t instanceof $)return!0;if(Array.isArray(t)){for(var n=0,i=t;n<i.length;n+=1){if(!tt(i[n]))return!1}return!0}if("object"===E_(t)){for(var r in t)if(!tt(t[r]))return!1;return!0}return!1}function nt(t){if(null===t)return T;if("string"==typeof t)return P;if("boolean"==typeof t)return R;if("number"==typeof t)return C;if(t instanceof d)return I;if(t instanceof H)return F;if(t instanceof Z)return L;if(t instanceof $)return G;if(Array.isArray(t)){for(var n,i=t.length,r=0,e=t;r<e.length;r+=1){var o=nt(e[r]);if(n){if(n===o)continue;n=z;break}n=o}return D(n||z,i)}return p("object"===E_(t)),N}function it(t){var n=E_(t);return null===t?"":"string"===n||"number"===n||"boolean"===n?String(t):t instanceof d||t instanceof Z||t instanceof $?t.toString():JSON.stringify(t)}var rt=function(t,n){this.type=t,this.value=n};rt.parse=function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!tt(t[1]))return n.error("invalid value");var i=t[1],r=nt(i),e=n.expectedType;return"array"!==r.kind||0!==r.N||!e||"array"!==e.kind||"number"==typeof e.N&&0!==e.N||(r=e),new rt(r,i)},rt.prototype.evaluate=function(){return this.value},rt.prototype.eachChild=function(){},rt.prototype.outputDefined=function(){return!0},rt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof d?["rgba"].concat(this.value.toArray()):this.value instanceof Z?this.value.serialize():(p(null===this.value||"string"==typeof this.value||"number"==typeof this.value||"boolean"==typeof this.value),this.value)};var et=rt,ot=function(t){this.name="ExpressionEvaluationError",this.message=t};ot.prototype.toJSON=function(){return this.message};var ut=ot,st={string:P,number:C,boolean:R,object:N},at=function(t,n){this.type=t,this.args=n};at.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i,r=1,e=t[0];if("array"===e){var o,u;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in st)||"object"===s)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=st[s],r++}else o=z;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);u=t[2],r++}i=D(o,u)}else p(st[e],e),i=st[e];for(var a=[];r<t.length;r++){var f=n.parse(t[r],r,z);if(!f)return null;a.push(f)}return new at(i,a)},at.prototype.evaluate=function(t){for(var n=0;n<this.args.length;n++){var i=this.args[n].evaluate(t);if(!q(this.type,nt(i)))return i;if(n===this.args.length-1)throw new ut("Expected value to be of type "+B(this.type)+", but found "+B(nt(i))+" instead.")}return p(!1),null},at.prototype.eachChild=function(t){this.args.forEach(t)},at.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},at.prototype.serialize=function(){var t=this.type,n=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){n.push(i.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&n.push(r)}}return n.concat(this.args.map((function(t){return t.serialize()})))};var ft=at,ht=function(t){this.type=L,this.sections=t};ht.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"===E_(i))return n.error("First argument must be an image or text section.");for(var r=[],e=!1,o=1;o<=t.length-1;++o){var u=t[o];if(e&&"object"===E_(u)&&!Array.isArray(u)){e=!1;var s=null;if(u["font-scale"]&&!(s=n.parse(u["font-scale"],1,C)))return null;var a=null;if(u["text-font"]&&!(a=n.parse(u["text-font"],1,D(P))))return null;var f=null;if(u["text-color"]&&!(f=n.parse(u["text-color"],1,I)))return null;var h=r[r.length-1];h.scale=s,h.font=a,h.textColor=f}else{var c=n.parse(t[o],1,z);if(!c)return null;var l=c.type.kind;if("string"!==l&&"value"!==l&&"null"!==l&&"resolvedImage"!==l)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");e=!0,r.push({content:c,scale:null,font:null,textColor:null})}}return new ht(r)},ht.prototype.evaluate=function(t){return new Z(this.sections.map((function(n){var i=n.content.evaluate(t);return nt(i)===G?new K("",i,null,null,null):new K(it(i),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)})))},ht.prototype.eachChild=function(t){for(var n=0,i=this.sections;n<i.length;n+=1){var r=i[n];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},ht.prototype.outputDefined=function(){return!1},ht.prototype.serialize=function(){for(var t=["format"],n=0,i=this.sections;n<i.length;n+=1){var r=i[n];t.push(r.content.serialize());var e={};r.scale&&(e["font-scale"]=r.scale.serialize()),r.font&&(e["text-font"]=r.font.serialize()),r.textColor&&(e["text-color"]=r.textColor.serialize()),t.push(e)}return t};var ct=ht,lt=function(t){this.type=G,this.input=t};lt.parse=function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,P);return i?new lt(i):n.error("No image name provided.")},lt.prototype.evaluate=function(t){var n=this.input.evaluate(t),i=$.fromString(n);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(n)>-1),i},lt.prototype.eachChild=function(t){t(this.input)},lt.prototype.outputDefined=function(){return!1},lt.prototype.serialize=function(){return["image",this.input.serialize()]};var vt=lt,dt={"to-boolean":R,"to-color":I,"to-number":C,"to-string":P},pt=function(t,n){this.type=t,this.args=n};pt.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[0];if(p(dt[i],i),("to-boolean"===i||"to-string"===i)&&2!==t.length)return n.error("Expected one argument.");for(var r=dt[i],e=[],o=1;o<t.length;o++){var u=n.parse(t[o],o,z);if(!u)return null;e.push(u)}return new pt(r,e)},pt.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var n,i,r=0,e=this.args;r<e.length;r+=1){if(i=null,(n=e[r].evaluate(t))instanceof d)return n;if("string"==typeof n){var o=t.parseColor(n);if(o)return o}else if(Array.isArray(n)&&!(i=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":Q(n[0],n[1],n[2],n[3])))return new d(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new ut(i||"Could not parse color from value '"+("string"==typeof n?n:String(JSON.stringify(n)))+"'")}if("number"===this.type.kind){for(var u=null,s=0,a=this.args;s<a.length;s+=1){if(null===(u=a[s].evaluate(t)))return 0;var f=Number(u);if(!isNaN(f))return f}throw new ut("Could not convert "+JSON.stringify(u)+" to number.")}return"formatted"===this.type.kind?Z.fromString(it(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?$.fromString(it(this.args[0].evaluate(t))):it(this.args[0].evaluate(t))},pt.prototype.eachChild=function(t){this.args.forEach(t)},pt.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},pt.prototype.serialize=function(){if("formatted"===this.type.kind)return new ct([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new vt(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(n){t.push(n.serialize())})),t};var yt=pt,mt=["Unknown","Point","LineString","Polygon"],wt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};wt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},wt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?mt[this.feature.type]:this.feature.type:null},wt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},wt.prototype.canonicalID=function(){return this.canonical},wt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},wt.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,n=this.featureDistanceData.scale,i=this.featureTileCoord,r=i.x,e=i.y,o=r*n-t[0],u=e*n-t[1];return this.featureDistanceData.bearing[0]*o+this.featureDistanceData.bearing[1]*u}return 0},wt.prototype.parseColor=function(t){var n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=d.parse(t)),n};var bt=wt,gt=function(t,n,i,r){this.name=t,this.type=n,this._evaluate=i,this.args=r};gt.prototype.evaluate=function(t){return this._evaluate(t,this.args)},gt.prototype.eachChild=function(t){this.args.forEach(t)},gt.prototype.outputDefined=function(){return!1},gt.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},gt.parse=function(t,n){var i,r=t[0],e=gt.definitions[r];if(!e)return n.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(e)?e[0]:e.type,u=Array.isArray(e)?[[e[1],e[2]]]:e.overloads,s=u.filter((function(n){var i=n[0];return!Array.isArray(i)||i.length===t.length-1})),a=null,f=0,h=s;f<h.length;f+=1){var c=h[f],l=c[0],v=c[1];a=new Yt(n.registry,n.path,null,n.scope);for(var d=[],y=!1,m=1;m<t.length;m++){var w=t[m],b=Array.isArray(l)?l[m-1]:l.type,g=a.parse(w,1+d.length,b);if(!g){y=!0;break}d.push(g)}if(!y)if(Array.isArray(l)&&l.length!==d.length)a.error("Expected "+l.length+" arguments, but found "+d.length+" instead.");else{for(var x=0;x<d.length;x++){var M=Array.isArray(l)?l[x]:l.type,_=d[x];a.concat(x+1).checkSubtype(M,_.type)}if(0===a.errors.length)return new gt(r,o,v,d)}}if(p(!a||a.errors.length>0),1===s.length)(i=n.errors).push.apply(i,a.errors);else{for(var S=(s.length?s:u).map((function(t){var n,i=t[0];return n=i,Array.isArray(n)?"("+n.map(B).join(", ")+")":"("+B(n.type)+"...)"})).join(" | "),O=[],j=1;j<t.length;j++){var E=n.parse(t[j],1+O.length);if(!E)return null;O.push(B(E.type))}n.error("Expected arguments of type "+S+", but found ("+O.join(", ")+") instead.")}return null},gt.register=function(t,n){for(var i in p(!gt.definitions),gt.definitions=n,n)t[i]=gt};var xt=gt,Mt=function(t,n,i){this.type=F,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=n};Mt.parse=function(t,n){if(2!==t.length)return n.error("Expected one argument.");var i=t[1];if("object"!==E_(i)||Array.isArray(i))return n.error("Collator options argument must be an object.");var r=n.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,R);if(!r)return null;var e=n.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,R);if(!e)return null;var o=null;return i.locale&&!(o=n.parse(i.locale,1,P))?null:new Mt(r,e,o)},Mt.prototype.evaluate=function(t){return new H(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Mt.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Mt.prototype.outputDefined=function(){return!1},Mt.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var _t=Mt,St=(C_(338),8192);function Ot(t,n){t[0]=Math.min(t[0],n[0]),t[1]=Math.min(t[1],n[1]),t[2]=Math.max(t[2],n[0]),t[3]=Math.max(t[3],n[1])}function jt(t,n){return!(t[0]<=n[0])&&(!(t[2]>=n[2])&&(!(t[1]<=n[1])&&!(t[3]>=n[3])))}function Et(t,n){var i,r=(180+t[0])/360,e=(i=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360),o=Math.pow(2,n.z);return[Math.round(r*o*St),Math.round(e*o*St)]}function kt(t,n,i){var r=t[0]-n[0],e=t[1]-n[1],o=t[0]-i[0],u=t[1]-i[1];return r*u-o*e==0&&r*o<=0&&e*u<=0}function At(t,n,i){return n[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-n[0])*(t[1]-n[1])/(i[1]-n[1])+n[0]}function Tt(t,n){for(var i=!1,r=0,e=n.length;r<e;r++)for(var o=n[r],u=0,s=o.length;u<s-1;u++){if(kt(t,o[u],o[u+1]))return!1;At(t,o[u],o[u+1])&&(i=!i)}return i}function Ct(t,n){for(var i=0;i<n.length;i++)if(Tt(t,n[i]))return!0;return!1}function Pt(t,n,i,r){var e=t[0]-i[0],o=t[1]-i[1],u=n[0]-i[0],s=n[1]-i[1],a=r[0]-i[0],f=r[1]-i[1],h=e*f-a*o,c=u*f-a*s;return h>0&&c<0||h<0&&c>0}function Rt(t,n,i){for(var r=0,e=i;r<e.length;r+=1)for(var o=e[r],u=0;u<o.length-1;++u)if(s=t,a=n,f=o[u],h=o[u+1],c=void 0,l=void 0,v=void 0,d=void 0,v=[a[0]-s[0],a[1]-s[1]],d=[h[0]-f[0],h[1]-f[1]],0!=(c=d)[0]*(l=v)[1]-c[1]*l[0]&&Pt(s,a,f,h)&&Pt(f,h,s,a))return!0;var s,a,f,h,c,l,v,d;return!1}function It(t,n){for(var i=0;i<t.length;++i)if(!Tt(t[i],n))return!1;for(var r=0;r<t.length-1;++r)if(Rt(t[r],t[r+1],n))return!1;return!0}function Nt(t,n){for(var i=0;i<n.length;i++)if(It(t,n[i]))return!0;return!1}function zt(t,n,i){for(var r=[],e=0;e<t.length;e++){for(var o=[],u=0;u<t[e].length;u++){var s=Et(t[e][u],i);Ot(n,s),o.push(s)}r.push(o)}return r}function Ft(t,n,i){for(var r=[],e=0;e<t.length;e++){var o=zt(t[e],n,i);r.push(o)}return r}function Lt(t,n,i,r){if(t[0]<i[0]||t[0]>i[2]){var e=.5*r,o=t[0]-i[0]>e?-r:i[0]-t[0]>e?r:0;0===o&&(o=t[0]-i[2]>e?-r:i[2]-t[0]>e?r:0),t[0]+=o}Ot(n,t)}function Gt(t,n,i,r){for(var e=Math.pow(2,r.z)*St,o=[r.x*St,r.y*St],u=[],s=0,a=t;s<a.length;s+=1)for(var f=0,h=a[s];f<h.length;f+=1){var c=h[f],l=[c.x+o[0],c.y+o[1]];Lt(l,n,i,e),u.push(l)}return u}function Dt(t,n,i,r){for(var e=Math.pow(2,r.z)*St,o=[r.x*St,r.y*St],u=[],s=0,a=t;s<a.length;s+=1){for(var f=[],h=0,c=a[s];h<c.length;h+=1){var l=c[h],v=[l.x+o[0],l.y+o[1]];Ot(n,v),f.push(v)}u.push(f)}if(n[2]-n[0]<=e/2){!function(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}(n);for(var d=0,p=u;d<p.length;d+=1)for(var y=0,m=p[d];y<m.length;y+=1){Lt(m[y],n,i,e)}}return u}var Bt=function(t,n){this.type=R,this.geojson=t,this.geometries=n};Bt.parse=function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(tt(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var e=i.features[r].geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new Bt(i,i.features[r].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Bt(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Bt(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Bt.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,n){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],e=t.canonicalID();if("Polygon"===n.type){var o=zt(n.coordinates,r,e),u=Gt(t.geometry(),i,r,e);if(!jt(i,r))return!1;for(var s=0,a=u;s<a.length;s+=1)if(!Tt(a[s],o))return!1}if("MultiPolygon"===n.type){var f=Ft(n.coordinates,r,e),h=Gt(t.geometry(),i,r,e);if(!jt(i,r))return!1;for(var c=0,l=h;c<l.length;c+=1)if(!Ct(l[c],f))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,n){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],e=t.canonicalID();if("Polygon"===n.type){var o=zt(n.coordinates,r,e),u=Dt(t.geometry(),i,r,e);if(!jt(i,r))return!1;for(var s=0,a=u;s<a.length;s+=1)if(!It(a[s],o))return!1}if("MultiPolygon"===n.type){var f=Ft(n.coordinates,r,e),h=Dt(t.geometry(),i,r,e);if(!jt(i,r))return!1;for(var c=0,l=h;c<l.length;c+=1)if(!Nt(l[c],f))return!1}return!0}(t,this.geometries)}return!1},Bt.prototype.eachChild=function(){},Bt.prototype.outputDefined=function(){return!0},Bt.prototype.serialize=function(){return["within",this.geojson]};var Ut=Bt;function qt(t){if(t instanceof xt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ut)return!1;var n=!0;return t.eachChild((function(t){n&&!qt(t)&&(n=!1)})),n}function Vt(t){if(t instanceof xt&&"feature-state"===t.name)return!1;var n=!0;return t.eachChild((function(t){n&&!Vt(t)&&(n=!1)})),n}function Wt(t,n){if(t instanceof xt&&n.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!Wt(t,n)&&(i=!1)})),i}var Xt=function(t,n){this.type=n.type,this.name=t,this.boundExpression=n};Xt.parse=function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var i=t[1];return n.scope.has(i)?new Xt(i,n.scope.get(i)):n.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Xt.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Xt.prototype.eachChild=function(){},Xt.prototype.outputDefined=function(){return!1},Xt.prototype.serialize=function(){return["var",this.name]};var Ht=Xt,Kt=function(t,n,i,r,e){void 0===n&&(n=[]),void 0===r&&(r=new k),void 0===e&&(e=[]),this.registry=t,this.path=n,this.key=n.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=e,this.expectedType=i};Kt.prototype.parse=function(t,n,i,r,e){return void 0===e&&(e={}),n?this.concat(n,i,r)._parse(t,e):this._parse(t,e)},Kt.prototype._parse=function(t,n){function i(t,n,i){return"assert"===i?new ft(n,[t]):"coerce"===i?new yt(n,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+E_(r)+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var e=this.registry[r];if(e){var o=e.parse(t,this);if(!o)return null;if(this.expectedType){var u=this.expectedType,s=o.type;if("string"!==u.kind&&"number"!==u.kind&&"boolean"!==u.kind&&"object"!==u.kind&&"array"!==u.kind||"value"!==s.kind)if("color"!==u.kind&&"formatted"!==u.kind&&"resolvedImage"!==u.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(u,s))return null}else o=i(o,u,n.typeAnnotation||"coerce");else o=i(o,u,n.typeAnnotation||"assert")}if(!(o instanceof et)&&"resolvedImage"!==o.type.kind&&Zt(o)){var a=new bt;try{o=new et(o.type,o.evaluate(a))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"===E_(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+E_(t)+" instead.")},Kt.prototype.concat=function(t,n,i){var r="number"==typeof t?this.path.concat(t):this.path,e=i?this.scope.concat(i):this.scope;return new Kt(this.registry,r,n||null,e,this.errors)},Kt.prototype.error=function(t){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var r=""+this.key+n.map((function(t){return"["+t+"]"})).join("");this.errors.push(new j(r,t))},Kt.prototype.checkSubtype=function(t,n){var i=q(t,n);return i&&this.error(i),i};var Yt=Kt;function Zt(t){if(t instanceof Ht)return Zt(t.boundExpression);if(t instanceof xt&&"error"===t.name)return!1;if(t instanceof _t)return!1;if(t instanceof Ut)return!1;var n=t instanceof yt||t instanceof ft,i=!0;return t.eachChild((function(t){i=n?i&&Zt(t):i&&t instanceof et})),!!i&&(qt(t)&&Wt(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}function Jt(t,n){for(var i,r,e=t.length-1,o=0,u=e,s=0;o<=u;)if(i=t[s=Math.floor((o+u)/2)],r=t[s+1],i<=n){if(s===e||n<r)return s;o=s+1}else{if(!(i>n))throw new ut("Input is not a number.");u=s-1}return 0}var $t=function(t,n,i){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(var r=0,e=i;r<e.length;r+=1){var o=e[r],u=o[0],s=o[1];this.labels.push(u),this.outputs.push(s)}};$t.parse=function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var i=n.parse(t[1],1,C);if(!i)return null;var r=[],e=null;n.expectedType&&"value"!==n.expectedType.kind&&(e=n.expectedType);for(var o=1;o<t.length;o+=2){var u=1===o?-1/0:t[o],s=t[o+1],a=o,f=o+1;if("number"!=typeof u)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=u)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);var h=n.parse(s,f,e);if(!h)return null;e=e||h.type,r.push([u,h])}return new $t(e,i,r)},$t.prototype.evaluate=function(t){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=n[0])return i[0].evaluate(t);var e=n.length;return r>=n[e-1]?i[e-1].evaluate(t):i[Jt(n,r)].evaluate(t)},$t.prototype.eachChild=function(t){t(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1){t(i[n])}},$t.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},$t.prototype.serialize=function(){for(var t=["step",this.input.serialize()],n=0;n<this.labels.length;n++)n>0&&t.push(this.labels[n]),t.push(this.outputs[n].serialize());return t};var Qt=$t,tn=C_(946);function nn(t,n,i){return t*(1-i)+n*i}function rn(t,n,i){return new d(nn(t.r,n.r,i),nn(t.g,n.g,i),nn(t.b,n.b,i),nn(t.a,n.a,i))}function en(t,n,i){return t.map((function(t,r){return nn(t,n[r],i)}))}var on=.95047,un=1.08883,sn=4/29,an=6/29,fn=3*an*an,hn=Math.PI/180,cn=180/Math.PI;function ln(t){return t>.008856451679035631?Math.pow(t,1/3):t/fn+sn}function vn(t){return t>an?t*t*t:fn*(t-sn)}function dn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function pn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yn(t){var n=pn(t.r),i=pn(t.g),r=pn(t.b),e=ln((.4124564*n+.3575761*i+.1804375*r)/on),o=ln((.2126729*n+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(e-o),b:200*(o-ln((.0193339*n+.119192*i+.9503041*r)/un)),alpha:t.a}}function mn(t){var n=(t.l+16)/116,i=isNaN(t.a)?n:n+t.a/500,r=isNaN(t.b)?n:n-t.b/200;return n=1*vn(n),i=on*vn(i),r=un*vn(r),new d(dn(3.2404542*i-1.5371385*n-.4985314*r),dn(-.969266*i+1.8760108*n+.041556*r),dn(.0556434*i-.2040259*n+1.0572252*r),t.alpha)}function wn(t,n,i){var r=n-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}var bn={forward:yn,reverse:mn,interpolate:function(t,n,i){return{l:nn(t.l,n.l,i),a:nn(t.a,n.a,i),b:nn(t.b,n.b,i),alpha:nn(t.alpha,n.alpha,i)}}},gn={forward:function(t){var n=yn(t),i=n.l,r=n.a,e=n.b,o=Math.atan2(e,r)*cn;return{h:o<0?o+360:o,c:Math.sqrt(r*r+e*e),l:i,alpha:t.a}},reverse:function(t){var n=t.h*hn,i=t.c;return mn({l:t.l,a:Math.cos(n)*i,b:Math.sin(n)*i,alpha:t.alpha})},interpolate:function(t,n,i){return{h:wn(t.h,n.h,i),c:nn(t.c,n.c,i),l:nn(t.l,n.l,i),alpha:nn(t.alpha,n.alpha,i)}}},xn=function(t,n,i,r,e){this.type=t,this.operator=n,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var o=0,u=e;o<u.length;o+=1){var s=u[o],a=s[0],f=s[1];this.labels.push(a),this.outputs.push(f)}};function Mn(t,n,i,r){var e=r-i,o=t-i;return 0===e?0:1===n?o/e:(Math.pow(n,o)-1)/(Math.pow(n,e)-1)}xn.interpolationFactor=function(t,n,i,r){var e=0;if("exponential"===t.name)e=Mn(n,t.base,i,r);else if("linear"===t.name)e=Mn(n,1,i,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;e=new tn(o[0],o[1],o[2],o[3]).solve(Mn(n,1,i,r))}return e},xn.parse=function(t,n){var i=t[0],r=t[1],e=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return n.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var u=r[1];if("number"!=typeof u)return n.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:u}}else{if("cubic-bezier"!==r[0])return n.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(e=n.parse(e,2,C)))return null;var a=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=I:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var h=0;h<o.length;h+=2){var c=o[h],l=o[h+1],v=h+3,d=h+4;if("number"!=typeof c)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(a.length&&a[a.length-1][0]>=c)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var p=n.parse(l,d,f);if(!p)return null;f=f||p.type,a.push([c,p])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new xn(f,i,r,e,a):n.error("Type "+B(f)+" is not interpolatable.")},xn.prototype.evaluate=function(t){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(t);var e=this.input.evaluate(t);if(e<=n[0])return i[0].evaluate(t);var o=n.length;if(e>=n[o-1])return i[o-1].evaluate(t);var u=Jt(n,e),s=n[u],a=n[u+1],f=xn.interpolationFactor(this.interpolation,e,s,a),h=i[u].evaluate(t),c=i[u+1].evaluate(t);return"interpolate"===this.operator?r[this.type.kind.toLowerCase()](h,c,f):"interpolate-hcl"===this.operator?gn.reverse(gn.interpolate(gn.forward(h),gn.forward(c),f)):bn.reverse(bn.interpolate(bn.forward(h),bn.forward(c),f))},xn.prototype.eachChild=function(t){t(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1){t(i[n])}},xn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},xn.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var n=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)n.push(this.labels[i],this.outputs[i].serialize());return n};var _n=xn,Sn=function(t,n){this.type=t,this.args=n};Sn.parse=function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var i=null,r=n.expectedType;r&&"value"!==r.kind&&(i=r);for(var e=[],o=0,u=t.slice(1);o<u.length;o+=1){var s=u[o],a=n.parse(s,1+e.length,i,void 0,{typeAnnotation:"omit"});if(!a)return null;i=i||a.type,e.push(a)}p(i);var f=r&&e.some((function(t){return q(r,t.type)}));return new Sn(f?z:i,e)},Sn.prototype.evaluate=function(t){for(var n,i=null,r=0,e=0,o=this.args;e<o.length;e+=1){if(r++,(i=o[e].evaluate(t))&&i instanceof $&&!i.available&&(n||(n=i),i=null,r===this.args.length))return n;if(null!==i)break}return i},Sn.prototype.eachChild=function(t){this.args.forEach(t)},Sn.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},Sn.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(n){t.push(n.serialize())})),t};var On=Sn,jn=function(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n};jn.prototype.evaluate=function(t){return this.result.evaluate(t)},jn.prototype.eachChild=function(t){for(var n=0,i=this.bindings;n<i.length;n+=1){t(i[n][1])}t(this.result)},jn.parse=function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var e=t[r];if("string"!=typeof e)return n.error("Expected string, but found "+E_(e)+" instead.",r);if(/[^a-zA-Z0-9_]/.test(e))return n.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=n.parse(t[r+1],r+1);if(!o)return null;i.push([e,o])}var u=n.parse(t[t.length-1],t.length-1,n.expectedType,i);return u?new jn(i,u):null},jn.prototype.outputDefined=function(){return this.result.outputDefined()},jn.prototype.serialize=function(){for(var t=["let"],n=0,i=this.bindings;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];t.push(e,o.serialize())}return t.push(this.result.serialize()),t};var En=jn,kn=function(t,n,i){this.type=t,this.index=n,this.input=i};kn.parse=function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,C),r=n.parse(t[2],2,D(n.expectedType||z));if(!i||!r)return null;var e=r.type;return new kn(e.itemType,i,r)},kn.prototype.evaluate=function(t){var n=this.index.evaluate(t),i=this.input.evaluate(t);if(n<0)throw new ut("Array index out of bounds: "+n+" < 0.");if(n>=i.length)throw new ut("Array index out of bounds: "+n+" > "+(i.length-1)+".");if(n!==Math.floor(n))throw new ut("Array index must be an integer, but found "+n+" instead.");return i[n]},kn.prototype.eachChild=function(t){t(this.index),t(this.input)},kn.prototype.outputDefined=function(){return!1},kn.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var An=kn,Tn=function(t,n){this.type=R,this.needle=t,this.haystack=n};Tn.parse=function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,z),r=n.parse(t[2],2,z);return i&&r?V(i.type,[R,P,C,T,z])?new Tn(i,r):n.error("Expected first argument to be of type boolean, string, number or null, but found "+B(i.type)+" instead"):null},Tn.prototype.evaluate=function(t){var n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!W(n,["boolean","string","number","null"]))throw new ut("Expected first argument to be of type boolean, string, number or null, but found "+B(nt(n))+" instead.");if(!W(i,["string","array"]))throw new ut("Expected second argument to be of type array or string, but found "+B(nt(i))+" instead.");return i.indexOf(n)>=0},Tn.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},Tn.prototype.outputDefined=function(){return!0},Tn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Cn=Tn,Pn=function(t,n,i){this.type=C,this.needle=t,this.haystack=n,this.fromIndex=i};Pn.parse=function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,z),r=n.parse(t[2],2,z);if(!i||!r)return null;if(!V(i.type,[R,P,C,T,z]))return n.error("Expected first argument to be of type boolean, string, number or null, but found "+B(i.type)+" instead");if(4===t.length){var e=n.parse(t[3],3,C);return e?new Pn(i,r,e):null}return new Pn(i,r)},Pn.prototype.evaluate=function(t){var n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!W(n,["boolean","string","number","null"]))throw new ut("Expected first argument to be of type boolean, string, number or null, but found "+B(nt(n))+" instead.");if(!W(i,["string","array"]))throw new ut("Expected second argument to be of type array or string, but found "+B(nt(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(n,r)}return i.indexOf(n)},Pn.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},Pn.prototype.outputDefined=function(){return!1},Pn.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Rn=Pn,In=function(t,n,i,r,e,o){this.inputType=t,this.type=n,this.input=i,this.cases=r,this.outputs=e,this.otherwise=o};In.parse=function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return n.error("Expected an even number of arguments.");var i,r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var e={},o=[],u=2;u<t.length-1;u+=2){var s=t[u],a=t[u+1];Array.isArray(s)||(s=[s]);var f=n.concat(u);if(0===s.length)return f.error("Expected at least one branch label.");for(var h=0,c=s;h<c.length;h+=1){var l=c[h];if("number"!=typeof l&&"string"!=typeof l)return f.error("Branch labels must be numbers or strings.");if("number"==typeof l&&Math.abs(l)>Number.MAX_SAFE_INTEGER)return f.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof l&&Math.floor(l)!==l)return f.error("Numeric branch labels must be integer values.");if(i){if(f.checkSubtype(i,nt(l)))return null}else i=nt(l);if(void 0!==e[String(l)])return f.error("Branch labels must be unique.");e[String(l)]=o.length}var v=n.parse(a,u,r);if(!v)return null;r=r||v.type,o.push(v)}var d=n.parse(t[1],1,z);if(!d)return null;var y=n.parse(t[t.length-1],t.length-1,r);return y?(p(i&&r),"value"!==d.type.kind&&n.concat(1).checkSubtype(i,d.type)?null:new In(i,r,d,e,o,y)):null},In.prototype.evaluate=function(t){var n=this.input.evaluate(t);return(nt(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)},In.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},In.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},In.prototype.serialize=function(){for(var t=this,n=["match",this.input.serialize()],i=[],r={},e=0,o=Object.keys(this.cases).sort();e<o.length;e+=1){var u=o[e];void 0===(c=r[this.cases[u]])?(r[this.cases[u]]=i.length,i.push([this.cases[u],[u]])):i[c][1].push(u)}for(var s=function(n){return"number"===t.inputType.kind?Number(n):n},a=0,f=i;a<f.length;a+=1){var h=f[a],c=h[0],l=h[1];1===l.length?n.push(s(l[0])):n.push(l.map(s)),n.push(this.outputs[outputIndex$1].serialize())}return n.push(this.otherwise.serialize()),n};var Nn=In,zn=function(t,n,i){this.type=t,this.branches=n,this.otherwise=i};zn.parse=function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var r=[],e=1;e<t.length-1;e+=2){var o=n.parse(t[e],e,R);if(!o)return null;var u=n.parse(t[e+1],e+1,i);if(!u)return null;r.push([o,u]),i=i||u.type}var s=n.parse(t[t.length-1],t.length-1,i);return s?(p(i),new zn(i,r,s)):null},zn.prototype.evaluate=function(t){for(var n=0,i=this.branches;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];if(e.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},zn.prototype.eachChild=function(t){for(var n=0,i=this.branches;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];t(e),t(o)}t(this.otherwise)},zn.prototype.outputDefined=function(){return this.branches.every((function(t){t[0];return t[1].outputDefined()}))&&this.otherwise.outputDefined()},zn.prototype.serialize=function(){var t=["case"];return this.eachChild((function(n){t.push(n.serialize())})),t};var Fn=zn,Ln=function(t,n,i,r){this.type=t,this.input=n,this.beginIndex=i,this.endIndex=r};Ln.parse=function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,z),r=n.parse(t[2],2,C);if(!i||!r)return null;if(!V(i.type,[D(z),P,z]))return n.error("Expected first argument to be of type array or string, but found "+B(i.type)+" instead");if(4===t.length){var e=n.parse(t[3],3,C);return e?new Ln(i.type,i,r,e):null}return new Ln(i.type,i,r)},Ln.prototype.evaluate=function(t){var n=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!W(n,["string","array"]))throw new ut("Expected first argument to be of type array or string, but found "+B(nt(n))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return n.slice(i,r)}return n.slice(i)},Ln.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},Ln.prototype.outputDefined=function(){return!1},Ln.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Gn=Ln;function Dn(t,n){return"=="===t||"!="===t?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function Bn(t,n,i,r){return 0===r.compare(n,i)}function Un(t,n,i){var r="=="!==t&&"!="!==t;return function(){function e(t,n,i){this.type=R,this.lhs=t,this.rhs=n,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===n.type.kind}return e.parse=function(t,n){if(3!==t.length&&4!==t.length)return n.error("Expected two or three arguments.");var i=t[0],o=n.parse(t[1],1,z);if(!o)return null;if(!Dn(i,o.type))return n.concat(1).error('"'+i+"\" comparisons are not supported for type '"+B(o.type)+"'.");var u=n.parse(t[2],2,z);if(!u)return null;if(!Dn(i,u.type))return n.concat(2).error('"'+i+"\" comparisons are not supported for type '"+B(u.type)+"'.");if(o.type.kind!==u.type.kind&&"value"!==o.type.kind&&"value"!==u.type.kind)return n.error("Cannot compare types '"+B(o.type)+"' and '"+B(u.type)+"'.");r&&("value"===o.type.kind&&"value"!==u.type.kind?o=new ft(u.type,[o]):"value"!==o.type.kind&&"value"===u.type.kind&&(u=new ft(o.type,[u])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==u.type.kind&&"value"!==o.type.kind&&"value"!==u.type.kind)return n.error("Cannot use collator to compare non-string types.");if(!(s=n.parse(t[3],3,F)))return null}return new e(o,u,s)},e.prototype.evaluate=function(e){var o=this.lhs.evaluate(e),u=this.rhs.evaluate(e);if(r&&this.hasUntypedArgument){var s=nt(o),a=nt(u);if(s.kind!==a.kind||"string"!==s.kind&&"number"!==s.kind)throw new ut('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+a.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var f=nt(o),h=nt(u);if("string"!==f.kind||"string"!==h.kind)return n(e,o,u)}return this.collator?i(e,o,u,this.collator.evaluate(e)):n(e,o,u)},e.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},e.prototype.outputDefined=function(){return!0},e.prototype.serialize=function(){var n=[t];return this.eachChild((function(t){n.push(t.serialize())})),n},e}()}var qn=Un("==",(function(t,n,i){return n===i}),Bn),Vn=Un("!=",(function(t,n,i){return n!==i}),(function(t,n,i,r){return!Bn(0,n,i,r)})),Wn=Un("<",(function(t,n,i){return n<i}),(function(t,n,i,r){return r.compare(n,i)<0})),Xn=Un(">",(function(t,n,i){return n>i}),(function(t,n,i,r){return r.compare(n,i)>0})),Hn=Un("<=",(function(t,n,i){return n<=i}),(function(t,n,i,r){return r.compare(n,i)<=0})),Kn=Un(">=",(function(t,n,i){return n>=i}),(function(t,n,i,r){return r.compare(n,i)>=0})),Yn=function(t,n,i,r,e){this.type=P,this.number=t,this.locale=n,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=e};Yn.parse=function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,C);if(!i)return null;var r=t[2];if("object"!==E_(r)||Array.isArray(r))return n.error("NumberFormat options argument must be an object.");var e=null;if(r.locale&&!(e=n.parse(r.locale,1,P)))return null;var o=null;if(r.currency&&!(o=n.parse(r.currency,1,P)))return null;var u=null;if(r["min-fraction-digits"]&&!(u=n.parse(r["min-fraction-digits"],1,C)))return null;var s=null;return r["max-fraction-digits"]&&!(s=n.parse(r["max-fraction-digits"],1,C))?null:new Yn(i,e,o,u,s)},Yn.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Yn.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Yn.prototype.outputDefined=function(){return!1},Yn.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Zn=Yn,Jn=function(t){this.type=C,this.input=t};Jn.parse=function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?n.error("Expected argument of type string or array, but found "+B(i.type)+" instead."):new Jn(i):null},Jn.prototype.evaluate=function(t){var n=this.input.evaluate(t);if("string"==typeof n)return n.length;if(Array.isArray(n))return n.length;throw new ut("Expected value to be of type string or array, but found "+B(nt(n))+" instead.")},Jn.prototype.eachChild=function(t){t(this.input)},Jn.prototype.outputDefined=function(){return!1},Jn.prototype.serialize=function(){var t=["length"];return this.eachChild((function(n){t.push(n.serialize())})),t};var $n={"==":qn,"!=":Vn,">":Xn,"<":Wn,">=":Kn,"<=":Hn,array:ft,at:An,boolean:ft,case:Fn,coalesce:On,collator:_t,format:ct,image:vt,in:Cn,"index-of":Rn,interpolate:_n,"interpolate-hcl":_n,"interpolate-lab":_n,length:Jn,let:En,literal:et,match:Nn,number:ft,"number-format":Zn,object:ft,slice:Gn,step:Qt,string:ft,"to-boolean":yt,"to-color":yt,"to-number":yt,"to-string":yt,var:Ht,within:Ut};function Qn(t,n){var i=n[0],r=n[1],e=n[2],o=n[3];i=i.evaluate(t),r=r.evaluate(t),e=e.evaluate(t);var u=o?o.evaluate(t):1,s=Q(i,r,e,u);if(s)throw new ut(s);return new d(i/255*u,r/255*u,e/255*u,u)}function ti(t,n){return t in n}function ni(t,n){var i=n[t];return void 0===i?null:i}function ii(t){return{type:t}}xt.register($n,{error:[{kind:"error"},[P],function(t,n){var i=n[0];throw new ut(i.evaluate(t))}],typeof:[P,[z],function(t,n){return B(nt(n[0].evaluate(t)))}],"to-rgba":[D(C,4),[I],function(t,n){return n[0].evaluate(t).toArray()}],rgb:[I,[C,C,C],Qn],rgba:[I,[C,C,C,C],Qn],has:{type:R,overloads:[[[P],function(t,n){return ti(n[0].evaluate(t),t.properties())}],[[P,N],function(t,n){var i=n[0],r=n[1];return ti(i.evaluate(t),r.evaluate(t))}]]},get:{type:z,overloads:[[[P],function(t,n){return ni(n[0].evaluate(t),t.properties())}],[[P,N],function(t,n){var i=n[0],r=n[1];return ni(i.evaluate(t),r.evaluate(t))}]]},"feature-state":[z,[P],function(t,n){return ni(n[0].evaluate(t),t.featureState||{})}],properties:[N,[],function(t){return t.properties()}],"geometry-type":[P,[],function(t){return t.geometryType()}],id:[z,[],function(t){return t.id()}],zoom:[C,[],function(t){return t.globals.zoom}],pitch:[C,[],function(t){return t.globals.pitch||0}],"distance-from-center":[C,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[C,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[C,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[C,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[z,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[C,ii(C),function(t,n){for(var i=0,r=0,e=n;r<e.length;r+=1){i+=e[r].evaluate(t)}return i}],"*":[C,ii(C),function(t,n){for(var i=1,r=0,e=n;r<e.length;r+=1){i*=e[r].evaluate(t)}return i}],"-":{type:C,overloads:[[[C,C],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)-r.evaluate(t)}],[[C],function(t,n){return-n[0].evaluate(t)}]]},"/":[C,[C,C],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)/r.evaluate(t)}],"%":[C,[C,C],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)%r.evaluate(t)}],ln2:[C,[],function(){return Math.LN2}],pi:[C,[],function(){return Math.PI}],e:[C,[],function(){return Math.E}],"^":[C,[C,C],function(t,n){var i=n[0],r=n[1];return Math.pow(i.evaluate(t),r.evaluate(t))}],sqrt:[C,[C],function(t,n){var i=n[0];return Math.sqrt(i.evaluate(t))}],log10:[C,[C],function(t,n){var i=n[0];return Math.log(i.evaluate(t))/Math.LN10}],ln:[C,[C],function(t,n){var i=n[0];return Math.log(i.evaluate(t))}],log2:[C,[C],function(t,n){var i=n[0];return Math.log(i.evaluate(t))/Math.LN2}],sin:[C,[C],function(t,n){var i=n[0];return Math.sin(i.evaluate(t))}],cos:[C,[C],function(t,n){var i=n[0];return Math.cos(i.evaluate(t))}],tan:[C,[C],function(t,n){var i=n[0];return Math.tan(i.evaluate(t))}],asin:[C,[C],function(t,n){var i=n[0];return Math.asin(i.evaluate(t))}],acos:[C,[C],function(t,n){var i=n[0];return Math.acos(i.evaluate(t))}],atan:[C,[C],function(t,n){var i=n[0];return Math.atan(i.evaluate(t))}],min:[C,ii(C),function(t,n){return Math.min.apply(Math,n.map((function(n){return n.evaluate(t)})))}],max:[C,ii(C),function(t,n){return Math.max.apply(Math,n.map((function(n){return n.evaluate(t)})))}],abs:[C,[C],function(t,n){var i=n[0];return Math.abs(i.evaluate(t))}],round:[C,[C],function(t,n){var i=n[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[C,[C],function(t,n){var i=n[0];return Math.floor(i.evaluate(t))}],ceil:[C,[C],function(t,n){var i=n[0];return Math.ceil(i.evaluate(t))}],"filter-==":[R,[P,z],function(t,n){var i=n[0],r=n[1];return t.properties()[i.value]===r.value}],"filter-id-==":[R,[z],function(t,n){var i=n[0];return t.id()===i.value}],"filter-type-==":[R,[P],function(t,n){var i=n[0];return t.geometryType()===i.value}],"filter-<":[R,[P,z],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return E_(e)===E_(o)&&e<o}],"filter-id-<":[R,[z],function(t,n){var i=n[0],r=t.id(),e=i.value;return E_(r)===E_(e)&&r<e}],"filter->":[R,[P,z],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return E_(e)===E_(o)&&e>o}],"filter-id->":[R,[z],function(t,n){var i=n[0],r=t.id(),e=i.value;return E_(r)===E_(e)&&r>e}],"filter-<=":[R,[P,z],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return E_(e)===E_(o)&&e<=o}],"filter-id-<=":[R,[z],function(t,n){var i=n[0],r=t.id(),e=i.value;return E_(r)===E_(e)&&r<=e}],"filter->=":[R,[P,z],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return E_(e)===E_(o)&&e>=o}],"filter-id->=":[R,[z],function(t,n){var i=n[0],r=t.id(),e=i.value;return E_(r)===E_(e)&&r>=e}],"filter-has":[R,[z],function(t,n){return n[0].value in t.properties()}],"filter-has-id":[R,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[R,[D(P)],function(t,n){return n[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[R,[D(z)],function(t,n){return n[0].value.indexOf(t.id())>=0}],"filter-in-small":[R,[P,D(z)],function(t,n){var i=n[0];return n[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[R,[P,D(z)],function(t,n){var i=n[0],r=n[1];return function(t,n,i,r){for(;i<=r;){var e=i+r>>1;if(n[e]===t)return!0;n[e]>t?r=e-1:i=e+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:R,overloads:[[[R,R],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)&&r.evaluate(t)}],[ii(R),function(t,n){for(var i=0,r=n;i<r.length;i+=1){if(!r[i].evaluate(t))return!1}return!0}]]},any:{type:R,overloads:[[[R,R],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)||r.evaluate(t)}],[ii(R),function(t,n){for(var i=0,r=n;i<r.length;i+=1){if(r[i].evaluate(t))return!0}return!1}]]},"!":[R,[R],function(t,n){return!n[0].evaluate(t)}],"is-supported-script":[R,[P],function(t,n){var i=n[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(i.evaluate(t))}],upcase:[P,[P],function(t,n){return n[0].evaluate(t).toUpperCase()}],downcase:[P,[P],function(t,n){return n[0].evaluate(t).toLowerCase()}],concat:[P,ii(z),function(t,n){return n.map((function(n){return it(n.evaluate(t))})).join("")}],"resolved-locale":[P,[F],function(t,n){return n[0].evaluate(t).resolvedLocale()}]});var ri=$n;function ei(t){return{result:"success",value:t}}function oi(t){return{result:"error",value:t}}function ui(t){return!!t.expression&&t.expression.interpolated}function si(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":E_(t)}function ai(t){return"object"===E_(t)&&null!==t&&!Array.isArray(t)}function fi(t){return t}function hi(t,n){var i,r,o,u="color"===n.type,s=t.stops&&"object"===E_(t.stops[0][0]),a=s||void 0!==t.property,f=s||!a,h=t.type||(ui(n)?"exponential":"interval");if(u&&((t=O({},t)).stops&&(t.stops=t.stops.map((function(t){return[t[0],d.parse(t[1])]}))),t.default?t.default=d.parse(t.default):t.default=d.parse(n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!e[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===h)i=di;else if("interval"===h)i=vi;else if("categorical"===h){i=li,r=Object.create(null);for(var c=0,l=t.stops;c<l.length;c+=1){var v=l[c];r[v[0]]=v[1]}o=E_(t.stops[0][0])}else{if("identity"!==h)throw new Error('Unknown function type "'+h+'"');i=pi}if(s){for(var p={},y=[],m=0;m<t.stops.length;m++){var w=t.stops[m],b=w[0].zoom;void 0===p[b]&&(p[b]={zoom:b,type:t.type,property:t.property,default:t.default,stops:[]},y.push(b)),p[b].stops.push([w[0].value,w[1]])}for(var g=[],x=0,M=y;x<M.length;x+=1){var _=M[x];g.push([p[_].zoom,hi(p[_],n)])}var S={name:"linear"};return{kind:"composite",interpolationType:S,interpolationFactor:_n.interpolationFactor.bind(void 0,S),zoomStops:g.map((function(t){return t[0]})),evaluate:function(i,r){var e=i.zoom;return di({stops:g,base:t.base},n,e).evaluate(e,r)}}}if(f){var j="exponential"===h?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:_n.interpolationFactor.bind(void 0,j),zoomStops:t.stops.map((function(t){return t[0]})),evaluate:function(e){var u=e.zoom;return i(t,n,u,r,o)}}}return{kind:"source",evaluate:function(e,u){var s=u&&u.properties?u.properties[t.property]:void 0;return void 0===s?ci(t.default,n.default):i(t,n,s,r,o)}}}function ci(t,n,i){return void 0!==t?t:void 0!==n?n:void 0!==i?i:void 0}function li(t,n,i,r,e){return ci(E_(i)===e?r[i]:void 0,t.default,n.default)}function vi(t,n,i){if("number"!==si(i))return ci(t.default,n.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var e=Jt(t.stops.map((function(t){return t[0]})),i);return t.stops[e][1]}function di(t,n,i){var o=void 0!==t.base?t.base:1;if("number"!==si(i))return ci(t.default,n.default);var u=t.stops.length;if(1===u)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[u-1][0])return t.stops[u-1][1];var s=Jt(t.stops.map((function(t){return t[0]})),i),a=function(t,n,i,r){var e=r-i,o=t-i;return 0===e?0:1===n?o/e:(Math.pow(n,o)-1)/(Math.pow(n,e)-1)}(i,o,t.stops[s][0],t.stops[s+1][0]),f=t.stops[s][1],h=t.stops[s+1][1],c=r[n.type]||fi;if(t.colorSpace&&"rgb"!==t.colorSpace){var l=e[t.colorSpace];c=function(t,n){return l.reverse(l.interpolate(l.forward(t),l.forward(n),a))}}return"function"==typeof f.evaluate?{evaluate:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var i=f.evaluate.apply(void 0,t),r=h.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return c(i,r,a)}}:c(f,h,a)}function pi(t,n,i){return"color"===n.type?i=d.parse(i):"formatted"===n.type?i=Z.fromString(i.toString()):"resolvedImage"===n.type?i=$.fromString(i.toString()):si(i)===n.type||"enum"===n.type&&n.values[i]||(i=void 0),ci(i,t.default,n.default)}var yi=function(t,n){var i;this.expression=t,this._warningHistory={},this._evaluator=new bt,this._defaultValue=n?"color"===(i=n).type&&ai(i.default)?new d(0,0,0,0):"color"===i.type?d.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=n&&"enum"===n.type?n.values:null};function mi(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ri}function wi(t,n){var i=new Yt(ri,[],n?function(t){var n={color:I,string:P,number:C,enum:P,boolean:R,formatted:L,resolvedImage:G};if("array"===t.type)return D(n[t.value]||z,t.length);return n[t.type]}(n):void 0),r=i.parse(t,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return r?ei(new yi(r,n)):(p(i.errors.length>0),oi(i.errors))}yi.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o,u,s){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=e||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=u||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)},yi.prototype.evaluate=function(t,n,i,r,e,o,u,s){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=e||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=u||null,this._evaluator.featureDistanceData=s||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ut("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var bi=function(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!Vt(n.expression)};bi.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,r,e,o)},bi.prototype.evaluate=function(t,n,i,r,e,o){return this._styleExpression.evaluate(t,n,i,r,e,o)};var gi=function(t,n,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=n,this.isStateDependent="camera"!==t&&!Vt(n.expression),this.interpolationType=r};function xi(t,n){if("error"===(t=wi(t,n)).result)return t;var i,r=t.value.expression,e=qt(r);if(!e&&("data-driven"!==(i=n)["property-type"]&&"cross-faded-data-driven"!==i["property-type"]))return oi([new j("","data expressions not supported")]);var o=Wt(r,["zoom","pitch","distance-from-center"]);if(!o&&!function(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}(n))return oi([new j("","zoom expressions not supported")]);var u=_i(r);if(!u&&!o)return oi([new j("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(u instanceof j)return oi([u]);if(u instanceof _n&&!ui(n))return oi([new j("",'"interpolate" expressions cannot be used with this property')]);if(!u)return ei(new bi(e?"constant":"source",t.value));var s=u instanceof _n?u.interpolation:void 0;return ei(new gi(e?"camera":"composite",t.value,u.labels,s))}gi.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,r,e,o)},gi.prototype.evaluate=function(t,n,i,r,e,o){return this._styleExpression.evaluate(t,n,i,r,e,o)},gi.prototype.interpolationFactor=function(t,n,i){return this.interpolationType?_n.interpolationFactor(this.interpolationType,t,n,i):0};var Mi=function(t,n){this._parameters=t,this._specification=n,O(this,hi(this._parameters,this._specification))};function _i(t){var n=null;if(t instanceof En)n=_i(t.result);else if(t instanceof On)for(var i=0,r=t.args;i<r.length;i+=1){var e=r[i];if(n=_i(e))break}else(t instanceof Qt||t instanceof _n)&&t.input instanceof xt&&"zoom"===t.input.name&&(n=t);return n instanceof j||t.eachChild((function(t){var i=_i(t);i instanceof j?n=i:!n&&i?n=new j("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new j("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function Si(t){if(Array.isArray(t))return t.map(Si);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var n={};for(var i in t)n[i]=Si(t[i]);return n}return function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}(t)}Mi.deserialize=function(t){return new Mi(t._parameters,t._specification)},Mi.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Oi=C_(840),ji=Oi,Ei=function(t,n){void 0===n&&(n="fill");if(null==t)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};ki(t)||(t=Ni(t));var i=t,r=!0;try{r=function(t){if(!Ci(t))return t;var n=Si(t);return Ti(n),n=Ai(n)}(i)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(i,null,2)+"\n        ")}var e=ji["filter_"+n],o=wi(r,e),u=null;if("error"===o.result)throw new Error(o.value.map((function(t){return t.key+": "+t.message})).join(", "));u=function(t,n,i){return o.value.evaluate(t,n,{},i)};var s=null,a=null;if(r!==i){var f=wi(i,e);if("error"===f.result)throw new Error(f.value.map((function(t){return t.key+": "+t.message})).join(", "));s=function(t,n,i,r,e){return f.value.evaluate(t,n,{},i,void 0,void 0,r,e)},a=!qt(f.value.expression)}u=u;var h=Ii(r);return{filter:u,dynamicFilter:s||void 0,needGeometry:h,needFeature:!!a}};function ki(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var n=0,i=t.slice(1);n<i.length;n+=1){var r=i[n];if(!ki(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function Ai(t){if(!Array.isArray(t))return t;var n=function(t){if(Pi.has(t[0]))for(var n=1;n<t.length;n++){if(Ci(t[n]))return!0}return t}(t);return!0===n?n:n.map((function(t){return Ai(t)}))}function Ti(t){var n=!1,i=[];if("case"===t[0]){for(var r=1;r<t.length-1;r+=2)n=n||Ci(t[r]),i.push(t[r+1]);i.push(t[t.length-1])}else if("match"===t[0]){n=n||Ci(t[1]);for(var e=2;e<t.length-1;e+=2)i.push(t[e+1]);i.push(t[t.length-1])}else if("step"===t[0]){n=n||Ci(t[1]);for(var o=1;o<t.length-1;o+=2)i.push(t[o+1])}n&&(t.length=0,t.push.apply(t,["any"].concat(i)));for(var u=1;u<t.length;u++)Ti(t[u])}function Ci(t){if(!Array.isArray(t))return!1;if("pitch"===(n=t[0])||"distance-from-center"===n)return!0;for(var n,i=1;i<t.length;i++){if(Ci(t[i]))return!0}return!1}var Pi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ri(t,n){return t<n?-1:t>n?1:0}function Ii(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var n=1;n<t.length;n++)if(Ii(t[n]))return!0;return!1}function Ni(t){if(!t)return!0;var n,i=t[0];return t.length<=1?"any"!==i:"=="===i?zi(t[1],t[2],"=="):"!="===i?Gi(zi(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?zi(t[1],t[2],i):"any"===i?(n=t.slice(1),["any"].concat(n.map(Ni))):"all"===i?["all"].concat(t.slice(1).map(Ni)):"none"===i?["all"].concat(t.slice(1).map(Ni).map(Gi)):"in"===i?Fi(t[1],t.slice(2)):"!in"===i?Gi(Fi(t[1],t.slice(2))):"has"===i?Li(t[1]):"!has"===i?Gi(Li(t[1])):"within"!==i||t}function zi(t,n,i){switch(t){case"$type":return["filter-type-"+i,n];case"$id":return["filter-id-"+i,n];default:return["filter-"+i,t,n]}}function Fi(t,n){if(0===n.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((function(t){return E_(t)!==E_(n[0])}))?["filter-in-large",t,["literal",n.sort(Ri)]]:["filter-in-small",t,["literal",n]]}}function Li(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Gi(t){return["!",t]}var Di=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Bi(t,n){var i={};for(var r in t)"ref"!==r&&(i[r]=t[r]);return Di.forEach((function(t){t in n&&(i[t]=n[t])})),i}var Ui=function(t){t=t.slice();for(var n=Object.create(null),i=0;i<t.length;i++)n[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Bi(t[r],n[t[r].ref]));return t};var qi=C_(523),Vi=C_(422),Wi=function(t){var n={};return C_.d(n,t),n}(k_({},"assign",(function(){return A}))),Xi="https://api.mapbox.com";function Hi(t){var n="mapbox://";return 0!==t.indexOf(n)?"":t.slice(n.length)}function Ki(t,n){var i=Hi(t);if(!i)return decodeURI(new URL(t,location.href).href);var r="styles/";if(0!==i.indexOf(r))throw new Error("unexpected style url: "+t);var e=i.slice(r.length);return Xi+"/styles/v1/"+e+"?&access_token="+n}function Yi(t,n,i,r){var e=new URL(t,r),o=Hi(t);return o?"https://{a-d}.tiles.mapbox.com/v4/"+o+"/{z}/{x}/{y}.vector.pbf?access_token="+n:n?(e.searchParams.set(i,n),decodeURI(e.href)):decodeURI(e.href)}function Zi(t){return t*Math.PI/180}var Ji=function(){for(var t=[],n=78271.51696402048;t.length<=24;n/=2)t.push(n);return t}();function $i(t,n){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,n);var i=document.createElement("canvas");return i.width=t,i.height=n,i}var Qi={};function tr(t,n,i){if(void 0===i&&(i={}),n in Qi)return Qi[n];var r=i.transformRequest&&i.transformRequest(n,t)||new Request(n);r.headers.get("Accept")||r.headers.set("Accept","application/json");var e=fetch(r).then((function(t){return delete Qi[n],t.ok?t.json():Promise.reject(new Error("Error fetching source "+n))})).catch((function(t){return delete Qi[n],Promise.reject(new Error("Error fetching source "+n))}));return Qi[n]=e,e}function nr(t,n){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return tr("Style",t=Ki(t,n.accessToken),n);try{var i=JSON.parse(t);return Promise.resolve(i)}catch(t){return Promise.reject(t)}}var ir={};function rr(t,n,i){void 0===i&&(i={});var r=[n,JSON.stringify(t)].toString(),e=ir[r];if(!e||i.transformRequest){var o=t.url;if(o){var u=Yi(o,i.accessToken,i.accessTokenParam||"access_token",n||location.href);e=o.startsWith("mapbox://")?Promise.resolve((0,Wi.assign)({},t,{url:void 0,tiles:u})):tr("Source",u,i).then((function(t){for(var n=0,r=t.tiles.length;n<r;++n){var e=Yi(t.tiles[n],i.accessToken,i.accessTokenParam||"access_token",u||location.href);if(i.transformRequest){var o=i.transformRequest(e,"Tiles");o instanceof Request&&(e=decodeURI(o.url))}t.tiles[n]=e}return Promise.resolve(t)}))}else t=(0,Wi.assign)({},t,{tiles:t.tiles.map((function(t){return Yi(t,i.accessToken,i.accessTokenParam||"access_token",n||location.href)}))}),e=Promise.resolve((0,Wi.assign)({},t));i.transformRequest||(ir[r]=e)}return e}var er,or=Array(256).join(" ");function ur(t,n){if(n>=.05){for(var i="",r=t.split("\n"),e=or.slice(0,Math.round(n/.1)),o=0,u=r.length;o<u;++o)o>0&&(i+="\n"),i+=r[o].split("").join(e);return i}return t}function sr(){return er||(er=$i(1,1).getContext("2d")),er}function ar(t,n){return sr().measureText(t).width+(t.length-1)*n}var fr={};function hr(t,n,i,r){if(-1!==t.indexOf("\n")){for(var e=t.split("\n"),o=[],u=0,s=e.length;u<s;++u)o.push(hr(e[u],n,i,r));return o.join("\n")}var a=i+","+n+","+t+","+r,f=fr[a];if(!f){var h=t.split(" ");if(h.length>1){var c=sr();c.font=n;for(var l=c.measureText("M").width*i,v="",d=[],p=0,y=h.length;p<y;++p){var m=h[p],w=v+(v?" ":"")+m;ar(w,r)<=l?v=w:(v&&d.push(v),v=m)}v&&d.push(v);for(var b=0,g=d.length;b<g&&g>1;++b){var x=d[b];if(ar(x,r)<.35*l){var M=b>0?ar(d[b-1],r):1/0,_=b<g-1?ar(d[b+1],r):1/0;d.splice(b,1),g-=1,M<_?(d[b-1]+=" "+x,b-=1):d[b]=x+" "+d[b]}}for(var S=0,O=d.length-1;S<O;++S){var j=d[S],E=d[S+1];if(ar(j,r)>.7*l&&ar(E,r)<.6*l){var k=j.split(" "),A=k.pop();ar(A,r)<.2*l&&(d[S]=k.join(" "),d[S+1]=A+" "+E),O-=1}}f=d.join("\n")}else f=t;f=ur(f,r),fr[a]=f}return f}var cr,lr=/font-family: ?([^;]*);/,vr=/("|')/g;function dr(t){if(!cr){cr={};for(var n=document.styleSheets,i=0,r=n.length;i<r;++i){var e=n[i];try{var o=e.rules||e.cssRules;if(o)for(var u=0,s=o.length;u<s;++u){var a=o[u];if(5==a.type){var f=a.cssText.match(lr);cr[f[1].replace(vr,"")]=!0}}}catch(t){}}}return t in cr}var pr={},yr=Vi.getNames();function mr(t){var n=t.toString();if(n in pr)return t;for(var i=t.map((function(t){var n=qi(t,1).split(" ");return[n.slice(3).join(" ").replace(/"/g,""),n[1]+n[0]]})),r=0,e=i.length;r<e;++r){var o=i[r],u=o[0];if(!dr(u)&&-1!==yr.indexOf(u)){var s="https://fonts.googleapis.com/css?family="+u.replace(/ /g,"+")+":"+o[1];if(!document.querySelector('link[href="'+s+'"]')){var a=document.createElement("link");a.href=s,a.rel="stylesheet",document.head.appendChild(a)}}}return pr[n]=!0,t}var wr,br,gr={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},xr={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Mr={},_r={zoom:0};function Sr(t,n,i,r,e,o,u){var s=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[s]||(o[s]={});var a=o[s];if(!a[i]){var f=(t[n]||Mr)[i],h=Oi[n+"_"+t.type][i];void 0===f&&(f=h.default);var c=mi(f);if(!c&&ai(f)&&(f=y(f,h),c=!0),c){var l=function(t,n){var i=xi(t,n);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value}(f,h);a[i]=l.evaluate.bind(l)}else"color"==h.type&&(f=d.parse(f)),a[i]=function(){return f}}return _r.zoom=r,a[i](_r,e,u)}function Or(t,n,i,r,e){return e||console.warn("No filterCache provided to evaluateFilter()"),t in e||(e[t]=Ei(n).filter),_r.zoom=r,e[t](_r,i)}var kr=!1;function Ar(t){kr=t}function Tr(t,n){if(t){if(!kr&&(0===t.a||0===n))return;var i=t.a;return n=void 0===n?1:n,0===i?"transparent":"rgba("+Math.round(255*t.r/i)+","+Math.round(255*t.g/i)+","+Math.round(255*t.b/i)+","+i*n+")"}return t}var Cr=/^([^]*)\{(.*)\}([^]*)$/;function Pr(t,n){var i;do{if(i=t.match(Cr)){var r=n[i[2]]||"";t=i[1]+r+i[3]}}while(i);return t}var Rr=!1;function Nr(t){void 0===t&&(t=!1),Rr=t}function zr(t,n,i,r,e,l,v){if(void 0===r&&(r=Ji),void 0===e&&(e=void 0),void 0===l&&(l=void 0),void 0===v&&(v=void 0),"string"==typeof n&&(n=JSON.parse(n)),8!=n.version)throw new Error("glStyle version 8 required.");var d,p;if(l)if("undefined"!=typeof Image){var y=new Image;y.crossOrigin="anonymous",y.onload=function(){d=y,p=[y.width,y.height],t.changed(),y.onload=null},y.src=l}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var m=self;m.postMessage({action:"loadImage",src:l}),m.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===l&&(d=t.data.image,p=[d.width,d.height])}))}for(var w,b=Ui(n.layers),g={},x=[],M={},_={},S={},O={},j=0,E=b.length;j<E;++j){var k=b[j],A=k.id;if("string"==typeof i&&k.source==i||-1!==i.indexOf(A)){var T=k["source-layer"];if(w){if(k.source!==w)throw new Error('Layer "'+A+'" does not use source "'+w)}else{w=k.source;var C=n.sources[w];if(!C)throw new Error('Source "'+w+'" is not defined');var P=C.type;if("vector"!==P&&"geojson"!==P)throw new Error('Source "'+w+'" is not of type "vector" or "geojson", but "'+P+'"')}var R=g[T];R||(R=[],g[T]=R),R.push({layer:k,index:j}),x.push(A)}}var I=new f.default,N=new u.default,z=[],F=function(n,i){var l=n.getProperties(),y=g[l.layer];if(y){var m=r.indexOf(i);-1==m&&(m=function(t,n){for(var i=0,r=n.length;i<r;++i)if(n[i]<t&&i+1<r){var e=n[i]/n[i+1];return i+Math.log(n[i]/t)/Math.log(e)}return r-1}(i,r));for(var w,b=gr[n.getGeometry().getType()],x={properties:l,type:b},j=t.get("mapbox-featurestate")[n.getId()],E=-1,k=0,A=y.length;k<A;++k){var T=y[k],C=T.layer,P=C.id,R=C.layout||Mr,F=C.paint||Mr;if(!("none"===R.visibility||"minzoom"in C&&m<C.minzoom||"maxzoom"in C&&m>=C.maxzoom)){var L=C.filter;if(!L||Or(P,L,x,m,O)){w=C;var G=void 0,D=void 0,B=void 0,U=void 0,q=void 0,V=void 0,W=T.index;if(3==b&&("fill"==C.type||"fill-extrusion"==C.type))if(D=Sr(C,"paint",C.type+"-opacity",m,x,S,j),C.type+"-pattern"in F){var X=Sr(C,"paint",C.type+"-pattern",m,x,S,j);if(X){var H="string"==typeof X?Pr(X,l):X.toString();if(d&&e&&e[H]){++E,(V=z[E])&&V.getFill()&&!V.getStroke()&&!V.getText()||(V=new h.default({fill:new u.default}),z[E]=V),B=V.getFill(),V.setZIndex(W);var K=H+"."+D,Y=_[K];if(!Y){var Z=e[H],J=$i(Z.width,Z.height),$=J.getContext("2d");$.globalAlpha=D,$.drawImage(d,Z.x,Z.y,Z.width,Z.height,0,0,Z.width,Z.height),Y=$.createPattern(J,"repeat"),_[K]=Y}B.setColor(Y)}}}else G=Tr(Sr(C,"paint",C.type+"-color",m,x,S,j),D),C.type+"-outline-color"in F&&(q=Tr(Sr(C,"paint",C.type+"-outline-color",m,x,S,j),D)),q||(q=G),(G||q)&&(++E,(!(V=z[E])||G&&!V.getFill()||!G&&V.getFill()||q&&!V.getStroke()||!q&&V.getStroke()||V.getText())&&(V=new h.default({fill:G?new u.default:void 0,stroke:q?new f.default:void 0}),z[E]=V),G&&(B=V.getFill()).setColor(G),q&&((U=V.getStroke()).setColor(q),U.setWidth(.5)),V.setZIndex(W));if(1!=b&&"line"==C.type){G=!("line-pattern"in F)&&"line-color"in F?Tr(Sr(C,"paint","line-color",m,x,S,j),Sr(C,"paint","line-opacity",m,x,S,j)):void 0;var Q=Sr(C,"paint","line-width",m,x,S,j);G&&Q>0&&(++E,(V=z[E])&&V.getStroke()&&!V.getFill()&&!V.getText()||(V=new h.default({stroke:new f.default}),z[E]=V),(U=V.getStroke()).setLineCap(Sr(C,"layout","line-cap",m,x,S,j)),U.setLineJoin(Sr(C,"layout","line-join",m,x,S,j)),U.setMiterLimit(Sr(C,"layout","line-miter-limit",m,x,S,j)),U.setColor(G),U.setWidth(Q),U.setLineDash(F["line-dasharray"]?Sr(C,"paint","line-dasharray",m,x,S,j).map((function(t){return t*Q})):null),V.setZIndex(W))}var tt=!1,nt=null,it=0,rt=void 0,et=void 0,ot=void 0;if((1==b||2==b)&&"icon-image"in R){var ut=Sr(C,"layout","icon-image",m,x,S,j);if(ut){rt="string"==typeof ut?Pr(ut,l):ut.toString();var st=void 0;if(d&&e&&e[rt]){var at=Sr(C,"layout","icon-rotation-alignment",m,x,S,j);if(2==b){var ft=n.getGeometry();if(ft.getFlatMidpoint||ft.getFlatMidpoints){var ht=ft.getExtent();if(Math.sqrt(Math.max(Math.pow((ht[2]-ht[0])/i,2),Math.pow((ht[3]-ht[1])/i,2)))>150){var ct="MultiLineString"===ft.getType()?ft.getFlatMidpoints():ft.getFlatMidpoint();if(br||(wr=[NaN,NaN],br=new a.default("Point",wr,[],{},null)),st=br,wr[0]=ct[0],wr[1]=ct[1],"line"===Sr(C,"layout","symbol-placement",m,x,S,j)&&"map"===at)for(var lt=ft.getStride(),vt=ft.getFlatCoordinates(),dt=0,pt=vt.length-lt;dt<pt;dt+=lt){var yt=vt[dt],mt=vt[dt+1],wt=vt[dt+lt],bt=vt[dt+lt+1],gt=Math.min(yt,wt),xt=Math.min(mt,bt),Mt=Math.max(yt,wt),_t=Math.max(mt,bt);if(ct[0]>=gt&&ct[0]<=Mt&&ct[1]>=xt&&ct[1]<=_t){it=Math.atan2(mt-bt,wt-yt);break}}}}}if(2!==b||st){var St=Sr(C,"layout","icon-size",m,x,S,j),Ot=void 0!==F["icon-color"]?Sr(C,"paint","icon-color",m,x,S,j):null;if(!Ot||0!==Ot.a){var jt=rt+"."+St;if(null!==Ot&&(jt+="."+Ot),!(et=M[jt])){var Et=e[rt];et=new s.default({color:Ot?[255*Ot.r,255*Ot.g,255*Ot.b,Ot.a]:void 0,img:d,imgSize:p,size:[Et.width,Et.height],offset:[Et.x,Et.y],rotateWithView:"map"===at,scale:St/Et.pixelRatio,displacement:"icon-offset"in R?Sr(C,"layout","icon-offset",m,x,S,j).map((function(t){return-t*Et.pixelRatio})):void 0}),M[jt]=et}}et&&(++E,(V=z[E])&&V.getImage()&&!V.getFill()&&!V.getStroke()||(V=new h.default,z[E]=V),V.setGeometry(st),et.setRotation(it+Zi(Sr(C,"layout","icon-rotate",m,x,S,j))),et.setOpacity(Sr(C,"paint","icon-opacity",m,x,S,j)),et.setAnchor(xr[Sr(C,"layout","icon-anchor",m,x,S,j)]),V.setImage(et),nt=V.getText(),V.setText(void 0),V.setZIndex(W),tt=!0,ot=!1)}else ot=!0}}}if(1==b&&"circle"===C.type){++E,(V=z[E])&&V.getImage()&&!V.getFill()&&!V.getStroke()||(V=new h.default,z[E]=V);var kt="circle-radius"in F?Sr(C,"paint","circle-radius",m,x,S,j):5,At=Tr(Sr(C,"paint","circle-stroke-color",m,x,S,j),Sr(C,"paint","circle-stroke-opacity",m,x,S,j)),Tt=Tr(Sr(C,"paint","circle-color",m,x,S,j),Sr(C,"paint","circle-opacity",m,x,S,j)),Ct=Sr(C,"paint","circle-stroke-width",m,x,S,j),Pt=kt+"."+At+"."+Tt+"."+Ct;(et=M[Pt])||(et=new o.default({radius:kt,stroke:At&&Ct>0?new f.default({width:Ct,color:At}):void 0,fill:Tt?new u.default({color:Tt}):void 0}),M[Pt]=et),V.setImage(et),nt=V.getText(),V.setText(void 0),V.setGeometry(void 0),V.setZIndex(W),tt=!0}var Rt=void 0,It=void 0,Nt=void 0,zt=void 0,Ft=void 0,Lt=void 0;if("text-field"in R){zt=Math.round(Sr(C,"layout","text-size",m,x,S,j));var Gt=Sr(C,"layout","text-font",m,x,S,j);Nt=Sr(C,"layout","text-line-height",m,x,S,j),It=qi(v?v(Gt):Gt,zt,Nt),Ft=Sr(C,"layout","text-letter-spacing",m,x,S,j),Lt=Sr(C,"layout","text-max-width",m,x,S,j);var Dt=Sr(C,"layout","text-field",m,x,S,j);Rt="object"===E_(Dt)&&Dt.sections?1===Dt.sections.length?Dt.toString():Dt.sections.reduce((function(t,n,i){var r=n.fontStack?n.fontStack.split(","):Gt,e=qi(v?v(r):r,zt*(n.scale||1),Nt),o=n.text;if("\n"===o)return t.push("\n",""),t;if(2!=b){for(var u=0,s=(o=hr(o,e,Lt,Ft).split("\n")).length;u<s;++u)u>0&&t.push("\n",""),t.push(o[u],e);return t}t.push(ur(o,Ft),e)}),[]):Pr(Dt,l).trim(),D=Sr(C,"paint","text-opacity",m,x,S,j)}if(Rt&&D&&!ot){tt||(++E,(V=z[E])&&V.getText()&&!V.getFill()&&!V.getStroke()||(V=new h.default,z[E]=V),V.setImage(void 0),V.setGeometry(void 0)),V.getText()||V.setText(nt||new c.default({padding:[2,2,2,2]})),nt=V.getText();var Bt=R["text-transform"];"uppercase"==Bt?Rt=Array.isArray(Rt)?Rt.map((function(t,n){return n%2?t:t.toUpperCase()})):Rt.toUpperCase():"lowercase"==Bt&&(Rt=Array.isArray(Rt)?Rt.map((function(t,n){return n%2?t:t.toLowerCase()})):Rt.toLowerCase());var Ut=Array.isArray(Rt)?Rt:2==b?ur(Rt,Ft):hr(Rt,It,Lt,Ft);nt.setText(Ut),nt.setFont(It),nt.setRotation(Zi(Sr(C,"layout","text-rotate",m,x,S,j)));var qt=Sr(C,"layout","text-anchor",m,x,S,j),Vt=tt||1==b?"point":Sr(C,"layout","symbol-placement",m,x,S,j);nt.setPlacement(Vt),nt.setOverflow("point"===Vt);var Wt=Sr(C,"paint","text-halo-width",m,x,S,j),Xt=Sr(C,"layout","text-offset",m,x,S,j),Ht=Sr(C,"paint","text-translate",m,x,S,j),Kt=0,Yt=0;if("point"==Vt){var Zt="center";-1!==qt.indexOf("left")?(Zt="left",Yt=Wt):-1!==qt.indexOf("right")&&(Zt="right",Yt=-Wt),nt.setTextAlign(Zt);var Jt=Sr(C,"layout","text-rotation-alignment",m,x,S,j);nt.setRotateWithView("map"==Jt)}else nt.setMaxAngle(Zi(Sr(C,"layout","text-max-angle",m,x,S,j))*Rt.length/Ut.length),nt.setTextAlign(),nt.setRotateWithView(!1);var $t="middle";0==qt.indexOf("bottom")?($t="bottom",Kt=-Wt-.5*(Nt-1)*zt):0==qt.indexOf("top")&&($t="top",Kt=Wt+.5*(Nt-1)*zt),nt.setTextBaseline($t),nt.setOffsetX(Xt[0]*zt+Yt+Ht[0]),nt.setOffsetY(Xt[1]*zt+Kt+Ht[1]),N.setColor(Tr(Sr(C,"paint","text-color",m,x,S,j),D)),nt.setFill(N);var Qt=Tr(Sr(C,"paint","text-halo-color",m,x,S,j),D);if(Qt){I.setColor(Qt),Wt*=2;var tn=.5*zt;I.setWidth(Wt<=tn?Wt:tn),nt.setStroke(I)}else nt.setStroke(void 0);var nn=Sr(C,"layout","text-padding",m,x,S,j),rn=nt.getPadding();nn!==rn[0]&&(rn[0]=nn,rn[1]=nn,rn[2]=nn,rn[3]=nn),V.setZIndex(W)}}}}return E>-1?(z.length=E+1,Rr&&("function"==typeof n.set?n.set("mapbox-layer",w):n.getProperties()["mapbox-layer"]=w),z):void 0}};return t.setStyle(F),t.set("mapbox-source",w),t.set("mapbox-layers",x),t.set("mapbox-featurestate",{}),F}var Fr=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return j_}))),Lr=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return d_}))),Gr=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return Of}))),Dr=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return Kh}))),Br=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return yx}))),Ur=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return qg}))),qr=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return WM}))),Vr=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return zd}))),Wr=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return y_}))),Xr=function(t){var n={};return C_.d(n,t),n}((k_(t={},"default",(function(){return bg})),k_(t,"defaultLoadFunction",(function(){return gg})),t)),Hr=function(t){var n={};return C_.d(n,t),n}(k_({},"default",(function(){return ra}))),Kr=function(t){var n={};return C_.d(n,t),n}(k_({},"createXYZ",(function(){return $h}))),Yr=function(t){var n={};return C_.d(n,t),n}((k_(i={},"equivalent",(function(){return Er})),k_(i,"fromLonLat",(function(){return jr})),k_(i,"getUserProjection",(function(){return Ir})),i));function Zr(t,n){n.accessToken||(n=(0,Wi.assign)({},n),new URL(t).searchParams.forEach((function(t,i){n.accessToken=t,n.accessTokenParam=i})));return n}function Jr(t,n,i,r,e){var o,u,s;return void 0===i&&(i=""),void 0===r&&(r={}),void 0===e&&(e=void 0),"string"==typeof r?(o=r,s={}):(o=r.styleUrl,s=r),e||(e=s.resolutions),o||"string"!=typeof n||n.trim().startsWith("{")||(o=n),o&&(o=o.startsWith("data:")?location.href:Ki(o,s.accessToken),s=Zr(o,s)),new Promise((function(r,a){nr(n,s).then((function(n){if(8!=n.version)return a(new Error("glStyle version 8 required."));if(!(t instanceof qr.default||t instanceof Wr.default))return a(new Error("Can only apply to VectorLayer or VectorTileLayer"));var f,h,c,l=t instanceof Wr.default?"vector":"geojson";if(i?u=Array.isArray(i)?n.layers.find((function(t){return t.id===i[0]})).source:i:(u=Object.keys(n.sources).find((function(t){return n.sources[t].type===l})),i=u),!u)return a(new Error("No "+l+" source found in the glStyle."));function v(){if(t instanceof Wr.default)return ee(n.sources[u],o,s).then((function(n){var i=t.getSource();if(i?n!==i&&(i.setTileUrlFunction(n.getTileUrlFunction()),i.Fe||(i.Fe=n.Fe),i.getAttributions()||i.setAttributions(n.getAttributions()),i.getTileLoadFunction()===Xr.defaultLoadFunction&&i.setTileLoadFunction(n.getTileLoadFunction()),(0,Yr.equivalent)(i.getProjection(),n.getProjection())&&(i.tileGrid=n.getTileGrid())):t.setSource(n),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var r=t.getSource().getTileGrid();t.setMaxResolution(r.getResolution(r.getMinZoom()))}}));var i=ae(n.sources[u],o,s),r=t.getSource();return r?i!==r&&(r.getAttributions()||r.setAttributions(i.getAttributions()),r.Fe||(r.Fe=i.getFormat()),r.Ge=i.getUrl()):t.setSource(i),Promise.resolve()}function d(){c||n.sprite&&!f?c?(t.setStyle(c),v().then(r).catch(a)):a(new Error("Something went wrong trying to apply style.")):(c=zr(t,n,i,e,f,h,mr),t.getStyle()?v().then(r).catch(a):a(new Error("Nothing to show for source ["+u+"]")))}if(n.sprite){var p=new URL(function(t,n,i){var r=Hi(t);if(!r)return decodeURI(new URL(t,i).href);var e="sprites/";if(0!==r.indexOf(e))throw new Error("unexpected sprites url: "+t);var o=r.slice(e.length);return Xi+"/styles/v1/"+o+"/sprite?access_token="+n}(n.sprite,s.accessToken,o||location.href)),y=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",m=p.origin+p.pathname+y+".json"+p.search;new Promise((function(t,n){tr("Sprite",m,s).then(t).catch((function(i){tr("Sprite",m=p.origin+p.pathname+".json"+p.search,s).then(t).catch(n)}))})).then((function(t){void 0===t&&a(new Error("No sprites found.")),f=t,h=p.origin+p.pathname+y+".png"+p.search,d()})).catch((function(t){a(new Error("Sprites cannot be loaded: "+m+": "+t.message))}))}else d()})).catch(a)}))}var $r={};function Qr(t,n){var i={id:n.id,type:n.type},r={};function e(e){var o=n.layout||{},u=n.paint||{};i.paint=u;var s,a,f="function"==typeof t.getSource?t.getSource().getTileGrid().getZForResolution(e):t.getView().getZoom(),h="function"==typeof t.getTargetElement?t.getTargetElement():void 0;if(void 0!==u["background-color"]&&(s=Sr(i,"paint","background-color",f,$r,r),h&&(h.style.background=d.parse(s).toString())),void 0!==u["background-opacity"]&&(a=Sr(i,"paint","background-opacity",f,$r,r),h&&(h.style.opacity=a)),"none"!=o.visibility)return Tr(s,a);h&&(h.style.backgroundColor="",h.style.opacity="")}if("function"==typeof t.getTargetElement)t.getTargetElement()&&e(),t.on(["change:resolution","change:target"],e);else{if("function"!=typeof t.setBackground)throw new Error("Unable to apply background.");t.setBackground(e)}}function te(t,n){n.layers.some((function(n){if("background"===n.type)return Qr(t,n),!0}))}function ne(t,n,i){return void 0===i&&(i={}),"object"===E_(n)?(te(t,n),Promise.resolve()):nr(n,i).then((function(n){te(t,n)}))}function ie(t,n){var i;return t.some((function(t){if(t.id==n)return i=t.source,!0})),i}function re(t){var n=t.bounds;if(n){var i=(0,Yr.fromLonLat)([n[0],n[1]]),r=(0,Yr.fromLonLat)([n[2],n[3]]);return[i[0],i[1],r[0],r[1]]}}function ee(t,n,i){return new Promise((function(r,e){rr(t,n,i).then((function(t){var n=new Br.default({tileJSON:t}),i=n.getTileJSON(),e=n.getTileGrid(),o=re(i),u=i.minzoom||0,s=i.maxzoom||22,a=n.get("ol-source");if(void 0===a){var f={attributions:n.getAttributions(),format:new Lr.default,tileGrid:new Dr.default({origin:e.getOrigin(0),extent:o||e.getExtent(),minZoom:u,resolutions:Ji.slice(0,s+1),tileSize:512})};Array.isArray(i.tiles)?f.urls=i.tiles:f.url=i.tiles,t.olSourceOptions&&Object.assign(f,t.olSourceOptions),a=new Xr.default(f),n.set("ol-source",a)}r(a)})).catch(e)}))}function oe(t,n,i){var r=new Wr.default({declutter:!0,visible:!1});return ee(t,n,i).then((function(t){r.setSource(t)})).catch((function(t){r.setSource(void 0)})),r}function ue(t,n,i){var r=new Ur.default;return rr(t,n,i).then((function(n){var i=new Br.default({transition:0,crossOrigin:"anonymous",tileJSON:n}),e=re(n),o=i.getTileGrid(),u=t.tileSize||n.tileSize||512,s=n.minzoom||0,a=n.maxzoom||22;i.tileGrid=new Dr.default({origin:o.getOrigin(0),extent:e||o.getExtent(),minZoom:s,resolutions:(0,Kr.createXYZ)({maxZoom:a,tileSize:u}).getResolutions(),tileSize:u});var f=i.getTileUrlFunction();i.setTileUrlFunction((function(t,n,r){var e=f(t,n,r);if(-1!=e.indexOf("{bbox-epsg-3857}")){var o=i.getTileGrid().getTileCoordExtent(t);e=e.replace("{bbox-epsg-3857}",o.toString())}return e})),r.setSource(i)})).catch((function(t){r.setSource(void 0)})),r}var se=new Fr.default;function ae(t,n,i){var r=t.data,e={};if("string"==typeof r){var o=Yi(r,i.accessToken,i.accessTokenParam||"access_token",n||location.href);if(i.transformRequest){var u=i.transformRequest(o,"GeoJSON");u instanceof Request&&(o=encodeURI(u.url))}e.url=o}else e.features=se.readFeatures(r,{featureProjection:(0,Yr.getUserProjection)()||"EPSG:3857"});return new Vr.default((0,Wi.assign)({attributions:t.attribution,format:se},e))}function fe(t,n,i){return new qr.default({declutter:!0,source:ae(t,n,i),visible:!1})}function he(t,n,i,r){var e=Sr(t,"paint","raster-opacity",i.getZoom(),$r,r);n.setOpacity(e)}function ce(t,n,i,r){var e=[],o=n.getView();o.isDef()||o.getRotation()||o.getResolutions()||(o=new Hr.default((0,Wi.assign)(o.getProperties(),{maxResolution:Ji[0]})),n.setView(o)),"center"in t&&!o.getCenter()&&o.setCenter((0,Yr.fromLonLat)(t.center)),"zoom"in t&&void 0===o.getZoom()&&o.setResolution(Ji[0]/Math.pow(2,t.zoom)),o.getCenter()&&void 0!==o.getZoom()||o.fit(o.getProjection().getExtent(),{nearest:!0,size:n.getSize()});for(var u,s,a,f,h,c=t.layers,l=[],v=0,d=c.length;v<d;++v){var p=(u=c[v]).type;if("heatmap"==p||"hillshade"==p)throw new Error(p+" layers are not supported");if("background"==p)Qr(n,u);else{if((f=u.source||ie(c,u.ref))!=a){if(l.length&&(e.push(ve(h,l,t,i,n,r)),l=[]),"vector"==(s=t.sources[f]).type)h=oe(s,i,r);else if("raster"==s.type){(h=ue(s,i,r)).setVisible(!u.layout||"none"!==u.layout.visibility);var y={};o.on("change:resolution",he.bind(this,u,h,o,y)),he(u,h,o,y)}else"geojson"==s.type&&(h=fe(s,i,r));a=f,h&&h.set("mapbox-source",a)}l.push(u.id)}}return e.push(ve(h,l,t,i,n,r)),n.set("mapbox-style",t),Promise.all(e)}function le(t,n,i){var r;if(void 0===i&&(i={}),("string"==typeof t||t instanceof HTMLElement)&&(t=new Gr.default({target:t})),"string"==typeof n){var e=n.startsWith("data:")?location.href:Ki(n,i.accessToken);i=Zr(e,i),r=new Promise((function(r,o){nr(n,i).then((function(n){ce(n,t,e,i).then((function(){r(t)})).catch(o)})).catch((function(t){o(new Error("Could not load "+n+": "+t.message))}))}))}else r=new Promise((function(r,e){ce(n,t,"",i).then((function(){r(t)})).catch(e)}));return r}function ve(t,n,i,r,e,o){void 0===o&&(o={});for(var u=24,s=0,a=i.layers,f=0,h=a.length;f<h;++f){var c=a[f];-1!==n.indexOf(c.id)&&(u=Math.min("minzoom"in c?c.minzoom:0,u),s=Math.max("maxzoom"in c?c.maxzoom:24,s))}return new Promise((function(a,f){var h=function(){var e=t.getSource();if(e&&"error"!==e.getState()){if("getTileGrid"in e){var h=e.getTileGrid();if(h){var c=h.getMinZoom();(u>0||c>0)&&t.setMaxResolution(Math.min(Ji[u],h.getResolution(c))+1e-9),s<24&&t.setMinResolution(Ji[s]+1e-9)}}e instanceof Vr.default||e instanceof Xr.default?Jr(t,i,n,(0,Wi.assign)({styleUrl:r},o)).then((function(){t.setVisible(!0),a()})).catch(f):a()}else f(new Error("Error accessing data for source "+t.get("mapbox-source")))};t.set("mapbox-layers",n),-1===e.getLayers().getArray().indexOf(t)&&e.addLayer(t),t.getSource()?h():t.once("change:source",h)}))}function de(t,n){for(var i=t.getLayers().getArray(),r=0,e=i.length;r<e;++r){var o=i[r].get("mapbox-layers");if(o&&-1!==o.indexOf(n))return i[r]}}function pe(t,n){for(var i=[],r=t.getAllLayers(),e=0,o=r.length;e<o;++e)r[e].get("mapbox-source")===n&&i.push(r[e]);return i}function ye(t,n){for(var i=t.getLayers().getArray(),r=0,e=i.length;r<e;++r){var o=i[r].getSource();if(i[r].get("mapbox-source")===n)return o}}function me(t,n,i){for(var r=("getLayers"in t?pe(t,n.source):[t]),e=0,o=r.length;e<o;++e){var u=r[e].get("mapbox-featurestate");if(!u)throw new Error('Map or layer for source "'+n.source+'" not found.');i?u[n.id]=i:delete u[n.id],r[e].changed()}}function we(t,n){for(var i=("getLayers"in t?pe(t,n.source):[t]),r=0,e=i.length;r<e;++r){var o=i[r].get("mapbox-featurestate");if(o&&o[n.id])return o[n.id]}return null}}();n.nn;var P_=n.h0,R_=n.bg,I_=(n.ZP,n.gG,n.Hs,n.xb,n.b5,n.YU,n.iC,n.LN,n.uX,function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),N_=function(t){function n(n){var i=t.call(this,z)||this;return i.error=n,i}return I_(n,t),n}(c),z_=function(t){function n(n){var i=this,r=!("declutter"in n)||n.declutter,e=new bg({state:du,format:new d_});i=t.call(this,{source:e,background:n.background,declutter:r,className:n.className,opacity:n.opacity,visible:n.visible,zIndex:n.zIndex,minResolution:n.minResolution,maxResolution:n.maxResolution,minZoom:n.minZoom,maxZoom:n.maxZoom,renderOrder:n.renderOrder,renderBuffer:n.renderBuffer,renderMode:n.renderMode,map:n.map,updateWhileAnimating:n.updateWhileAnimating,updateWhileInteracting:n.updateWhileInteracting,preload:n.preload,useInterimTilesOnError:n.useInterimTilesOnError,properties:n.properties})||this,n.accessToken&&(i.accessToken=n.accessToken);var o=n.styleUrl;return R_(i,o,n.layers||n.source,{accessToken:i.accessToken}).then((function(){e.setState(pu)})).catch((function(t){i.dispatchEvent(new N_(t)),i.getSource().setState(yu)})),void 0===i.getBackground()&&P_(i,n.styleUrl,{accessToken:i.accessToken}),i}return I_(n,t),n}(y_),F_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),L_=function(t){function n(n){var i=this,r=n||{},e=A({},r);return delete e.imageRatio,(i=t.call(this,e)||this).cv=void 0!==r.imageRatio?r.imageRatio:1,i}return F_(n,t),n.prototype.getImageRatio=function(){return this.cv},n.prototype.createRenderer=function(){return new gM(this)},n}(kx),G_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),D_=function(t){function n(n){var i=this,r=A({},n);return(i=t.call(this,r)||this).lv=gv(n.style),i.vv=n.style.variables||{},i.dv=!!n.disableHitDetection,i}return G_(n,t),n.prototype.createRenderer=function(){return new Tx(this,{vertexShader:this.lv.builder.getSymbolVertexShader(),fragmentShader:this.lv.builder.getSymbolFragmentShader(),hitVertexShader:!this.dv&&this.lv.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.dv&&this.lv.builder.getSymbolFragmentShader(!0),uniforms:this.lv.uniforms,attributes:this.lv.attributes})},n.prototype.updateStyleVariables=function(t){A(this.vv,t),this.changed()},n}(bu),B_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function U_(t,n){var i="\n    attribute vec2 ".concat(Nl.TEXTURE_COORD,";\n    uniform mat4 ").concat(Il.TILE_TRANSFORM,";\n    uniform float ").concat(Il.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Il.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Il.TEXTURE_RESOLUTION,";\n    uniform float ").concat(Il.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(Il.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(Il.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(Nl.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(Il.TEXTURE_ORIGIN_X," + ").concat(Il.TEXTURE_RESOLUTION," * ").concat(Il.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(Il.TEXTURE_ORIGIN_Y," - ").concat(Il.TEXTURE_RESOLUTION," * ").concat(Il.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(Il.TILE_TRANSFORM," * vec4(").concat(Nl.TEXTURE_COORD,", ").concat(Il.DEPTH,", 1.0);\n    }\n  "),r={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:n},e=[];if(void 0!==t.color){var o=ev(r,t.color,Wl);e.push("color = ".concat(o,";"))}if(void 0!==t.contrast){var u=ev(r,t.contrast,ql);e.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb - (").concat(u," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.exposure){var s=ev(r,t.exposure,ql);e.push("color.rgb = clamp((".concat(s," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.saturation){var a=ev(r,t.saturation,ql);e.push("\n      float saturation = ".concat(a," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))}if(void 0!==t.gamma){var f=ev(r,t.gamma,ql);e.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(f,"));"))}if(void 0!==t.brightness){var h=ev(r,t.brightness,ql);e.push("color.rgb = clamp(color.rgb + ".concat(h,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var c={},l=r.variables.length;if(l>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(r.variables,")"));for(var v=function(n){var i=r.variables[n];if(!(i in t.variables))throw new Error("Missing '".concat(i,"' in style variables"));var e=dv(i);c[e]=function(){var n=t.variables[i];return"string"==typeof n&&(n=iv(r,n)),void 0!==n?n:-9999999}},d=0;d<l;++d)v(d);var p=Object.keys(c).map((function(t){return"uniform float ".concat(t,";")})),y=Math.ceil(n/4);p.push("uniform sampler2D ".concat(Il.TILE_TEXTURE_ARRAY,"[").concat(y,"];")),r.paletteTextures&&p.push("uniform sampler2D ".concat(pv,"[").concat(r.paletteTextures.length,"];"));var m=Object.keys(r.functions).map((function(t){return r.functions[t]}));return{vertexShader:i,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(Il.RENDER_EXTENT,";\n    uniform float ").concat(Il.TRANSITION_ALPHA,";\n    uniform float ").concat(Il.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Il.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Il.RESOLUTION,";\n    uniform float ").concat(Il.ZOOM,";\n\n    ").concat(p.join("\n"),"\n\n    ").concat(m.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(Il.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(Il.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(Il.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(Il.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(Il.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(e.join("\n"),"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(Il.TRANSITION_ALPHA,";\n    }"),uniforms:c,paletteTextures:r.paletteTextures}}var q_=function(t){function n(n){var i=this,r=n?A({},n):{},e=r.style||{};delete r.style;var o=r.cacheSize;return delete r.cacheSize,(i=t.call(this,r)||this).pv=r.sources,i.yv=null,i.Nc=NaN,i.K=e,i.Jt=o,i.vv=i.K.variables||{},i.addChangeListener(ru,i.mv),i}return B_(n,t),n.prototype.getSources=function(t,n){var i=this.getSource();return this.pv?"function"==typeof this.pv?this.pv(t,n):this.pv:i?[i]:[]},n.prototype.getRenderSource=function(){return this.yv||this.getSource()},n.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():vu},n.prototype.mv=function(){this.getSource()&&this.setStyle(this.K)},n.prototype.wv=function(){var t=this.getSource();return t&&"bandCount"in t?t.bandCount:4},n.prototype.createRenderer=function(){var t=U_(this.K,this.wv());return new Ul(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.Jt,paletteTextures:t.paletteTextures})},n.prototype.renderSources=function(t,n){for(var i,r=this.getRenderer(),e=0,o=n.length;e<o;++e)this.yv=n[e],r.prepareFrame(t)&&(i=r.renderFrame(t));return i},n.prototype.render=function(t,n){var i=this;this.rendered=!0;for(var r=t.viewState,e=this.getSources(t.extent,r.resolution),o=!0,u=function(t,n){var r=e[t],u=r.getState();if(u==du){r.addEventListener("change",(function t(){r.getState()==pu&&(r.removeEventListener("change",t),i.changed())}))}o=o&&u==pu},s=0,a=e.length;s<a;++s)u(s);var f=this.renderSources(t,e);if(this.getRenderer().renderComplete&&o)return this.Nc=r.resolution,f;if(this.Nc>.5*r.resolution){var h=this.getSources(t.extent,this.Nc).filter((function(t){return!e.includes(t)}));if(h.length>0)return this.renderSources(t,h)}return f},n.prototype.setStyle=function(t){this.vv=t.variables||{},this.K=t;var n=U_(this.K,this.wv());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},n.prototype.updateStyleVariables=function(t){A(this.vv,t),this.changed()},n}(Gg);q_.prototype.dispose;var V_=q_,W_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),X_="addfeatures",H_=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.features=r,o.file=i,o.projection=e,o}return W_(n,t),n}(c),K_=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{handleEvent:S})||this).on,i.once,i.un,i.bv=!1,i.gv=[];for(var e=r.formatConstructors?r.formatConstructors:[],o=0,u=e.length;o<u;++o){var s=e[o];"function"==typeof s&&(s=new s),i.gv.push(s),i.bv=i.bv||s.getType()===ah}return i.di=r.projection?br(r.projection):null,i.xv=null,i.Mv=r.source||null,i.target=r.target?r.target:null,i}return W_(n,t),n.prototype._v=function(t,n){var i,r=n.target.result,e=this.getMap(),o=this.di;o||(o=e.getView().getProjection());for(var u=this.gv,s=0,a=u.length;s<a;++s){var f=u[s],h=r;this.bv&&f.getType()!==ah&&(void 0===i&&(i=(new TextDecoder).decode(r)),h=i);var c=this.Sv(f,h,{featureProjection:o});if(c&&c.length>0){this.Mv&&(this.Mv.clear(),this.Mv.addFeatures(c)),this.dispatchEvent(new H_(X_,t,c,o));break}}},n.prototype.Ov=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.xv=[Y(n,U,this.handleDrop,this),Y(n,D,this.handleStop,this),Y(n,B,this.handleStop,this),Y(n,U,this.handleStop,this)]}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.Ov(),this.getActive()&&!n&&this.jv(),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.jv(),t.prototype.setMap.call(this,n),this.getActive()&&this.Ov()},n.prototype.Sv=function(t,n,i){try{return t.readFeatures(n,i)}catch(t){return null}},n.prototype.jv=function(){this.xv&&(this.xv.forEach(J),this.xv=null)},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,i=0,r=n.length;i<r;++i){var e=n.item(i),o=new FileReader;o.addEventListener(W,this._v.bind(this,e)),this.bv?o.readAsArrayBuffer(e):o.readAsText(e)}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},n}(Oa),Y_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Z_=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).Yr=r.condition?r.condition:Ba,i.Jr=void 0,i.Ev=void 0,i.Ee=0,i.Lr=void 0!==r.duration?r.duration:400,i}return Y_(n,t),n.prototype.handleDragEvent=function(t){if(qa(t)){var n=t.map,i=n.getSize(),r=t.pixel,e=r[0]-i[0]/2,o=i[1]/2-r[1],u=Math.atan2(o,e),s=Math.sqrt(e*e+o*o),a=n.getView();if(void 0!==this.Jr){var f=this.Jr-u;a.adjustRotationInternal(f)}this.Jr=u,void 0!==this.Ev&&a.adjustResolutionInternal(this.Ev/s),void 0!==this.Ev&&(this.Ee=this.Ev/s),this.Ev=s}},n.prototype.handleUpEvent=function(t){if(!qa(t))return!0;var n=t.map.getView(),i=this.Ee>1?1:-1;return n.endInteraction(this.Lr,i),this.Ee=0,!1},n.prototype.handleDownEvent=function(t){return!!qa(t)&&(!!this.Yr(t)&&(t.map.getView().beginInteraction(),this.Jr=void 0,this.Ev=void 0,!0))},n}(Ta),J_=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$_=function(t){function n(n,i,r){var e=t.call(this)||this;if(void 0!==r&&void 0===i)e.setFlatCoordinates(r,n);else{var o=i||0;e.setCenterAndRadius(n,o,r)}return e}return J_(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=t-e[0],u=n-e[1],s=o*o+u*u;if(s<r){if(0===s)for(var a=0;a<this.stride;++a)i[a]=e[a];else{var f=this.getRadius()/Math.sqrt(s);i[0]=e[0]+f*o,i[1]=e[1]+f*u;for(a=2;a<this.stride;++a)i[a]=e[a]}return i.length=this.stride,s}return r},n.prototype.containsXY=function(t,n){var i=this.flatCoordinates,r=t-i[0],e=n-i[1];return r*r+e*e<=this.kv()},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return Tn(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},n.prototype.getRadius=function(){return Math.sqrt(this.kv())},n.prototype.kv=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},n.prototype.getType=function(){return Pt.CIRCLE},n.prototype.intersectsExtent=function(t){if(ti(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Un(t,this.intersectsCoordinate.bind(this)))}return!1},n.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=t.slice();r[n]=r[0]+i;for(var e=1;e<n;++e)r[n+e]=t[e];this.setFlatCoordinates(this.layout,r),this.changed()},n.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,e=se(r,0,t,this.stride);r[e++]=r[0]+n;for(var o=1,u=this.stride;o<u;++o)r[e++]=r[o];r.length=e,this.changed()},n.prototype.getCoordinates=function(){return null},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},n.prototype.rotate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Vr(i,0,i.length,r,t,n,i)),this.changed()},n.prototype.translate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Xr(i,0,i.length,r,t,n,i)),this.changed()},n}(Qr);$_.prototype.transform;var Q_=$_,tS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nS="Point",iS="LineString",rS="Polygon",eS="Circle",oS="drawstart",uS="drawend",sS="drawabort",aS=function(t){function n(n,i){var r=t.call(this,n)||this;return r.feature=i,r}return tS(n,t),n}(c);var fS=function(t){function n(n){var i=this,r=n;r.stopDown||(r.stopDown=O),(i=t.call(this,r)||this).on,i.once,i.un,i.Av=!1,i.Tv=null,i.Cv,i.Pv,i.Rv,i.Iv=!1,i.Mv=n.source?n.source:null,i.Le=n.features?n.features:null,i.Nv=n.snapTolerance?n.snapTolerance:12,i.il=n.type,i.ye=function(t){switch(t){case Pt.POINT:case Pt.MULTI_POINT:return nS;case Pt.LINE_STRING:case Pt.MULTI_LINE_STRING:return iS;case Pt.POLYGON:case Pt.MULTI_POLYGON:return rS;case Pt.CIRCLE:return eS;default:throw new Error("Invalid type: "+t)}}(i.il),i.zv=!!n.stopClick,i.Fv=n.minPoints?n.minPoints:i.ye===rS?3:2,i.Lv=i.ye===eS?2:n.maxPoints?n.maxPoints:1/0,i.Gv=n.finishCondition?n.finishCondition:S,i.Dv=n.geometryLayout?n.geometryLayout:kt;var e,o=n.geometryFunction;if(!o){var u,s=i.ye;if(s===eS)o=function(t,n,i){var r=n||new Q_([NaN,NaN]),e=zr(t[0],i),o=ir(e,zr(t[t.length-1],i));r.setCenterAndRadius(e,Math.sqrt(o),this.Dv);var u=Ir();return u&&r.transform(i,u),r};else s===nS?u=Ee:s===iS?u=IM:s===rS&&(u=Ye),o=function(t,n,i){return n?s===rS?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])],this.Dv):n.setCoordinates([],this.Dv):n.setCoordinates(t,this.Dv):n=new u(t,this.Dv),n}}return i.Vs=o,i.Bv=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,i.Uv=null,i.qv=null,i.Vv=null,i.Wv=null,i.Xv=null,i.Hv=null,i.Kv=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,i.Yv=new WM({source:new zd({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(e=Zv(),function(t,n){return e[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.H=n.geometryName,i.Yr=n.condition?n.condition:Da,i.Zv,n.freehand?i.Zv=za:i.Zv=n.freehandCondition?n.freehandCondition:Ba,i.addChangeListener(xa,i.Jv),i}return tS(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.Jv()},n.prototype.getOverlay=function(){return this.Yv},n.prototype.handleEvent=function(n){n.originalEvent.type===F&&n.originalEvent.preventDefault(),this.Iv=this.ye!==nS&&this.Zv(n);var i=n.type===ds.POINTERMOVE,r=!0;!this.Iv&&this.Pv&&n.type===ds.POINTERDRAG&&(Date.now()-this.Pv>=this.Bv?(this.Tv=n.pixel,this.Av=!this.Iv,i=!0):this.Pv=void 0,this.Av&&void 0!==this.Cv&&(clearTimeout(this.Cv),this.Cv=void 0));return this.Iv&&n.type===ds.POINTERDRAG&&null!==this.qv?(this.$v(n.coordinate),r=!1):this.Iv&&n.type===ds.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=n.type===ds.POINTERMOVE)&&this.Iv?(this.Kn(n),this.Av&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===ds.POINTERDRAG&&void 0===this.Cv)&&this.Kn(n):n.type===ds.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,n)&&r},n.prototype.handleDownEvent=function(t){return this.Av=!this.Iv,this.Iv?(this.Tv=t.pixel,this.Uv||this.Qv(t.coordinate),!0):this.Yr(t)?(this.Pv=Date.now(),this.Cv=setTimeout(function(){this.Kn(new vs(ds.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.Bv),this.Tv=t.pixel,!0):(this.Pv=void 0,!1)},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.Cv&&(clearTimeout(this.Cv),this.Cv=void 0),this.Kn(t),this.Av){var i=!this.Uv;i&&this.Qv(t.coordinate),!i&&this.Iv?this.finishDrawing():this.Iv||i&&this.ye!==nS||(this.td(t.pixel)?this.Gv(t)&&this.finishDrawing():this.$v(t.coordinate)),n=!1}else this.Iv&&this.abortDrawing();return!n&&this.zv&&t.preventDefault(),n},n.prototype.Kn=function(t){if(this.Rv=t.originalEvent.pointerType,this.Tv&&(!this.Iv&&this.Av||this.Iv&&!this.Av)){var n=this.Tv,i=t.pixel,r=n[0]-i[0],e=n[1]-i[1],o=r*r+e*e;if(this.Av=this.Iv?o>this.Kv:o<=this.Kv,!this.Av)return}this.Uv?this.rd(t.coordinate):this.ed(t.coordinate.slice())},n.prototype.td=function(t){var n=!1;if(this.qv){var i=!1,r=[this.Uv],e=this.ye;if(e===nS)n=!0;else if(e===eS)n=2===this.Wv.length;else if(e===iS)i=this.Wv.length>this.Fv;else if(e===rS){var o=this.Wv;i=o[0].length>this.Fv,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var u=this.getMap(),s=0,a=r.length;s<a;s++){var f=r[s],h=u.getPixelFromCoordinate(f),c=t[0]-h[0],l=t[1]-h[1],v=this.Iv?1:this.Nv;if(n=Math.sqrt(c*c+l*l)<=v){this.Uv=f;break}}}return n},n.prototype.ed=function(t){this.Vv?this.Vv.getGeometry().setCoordinates(t):(this.Vv=new Et(new Ee(t)),this.od())},n.prototype.ud=function(t){this.Xv||(this.Xv=new Et);var n=t.getLinearRing(0),i=this.Xv.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new IM(n.getFlatCoordinates(),n.getLayout()),this.Xv.setGeometry(i))},n.prototype.Qv=function(t){for(var n=this.getMap().getView().getProjection(),i=Jr(this.Dv);t.length<i;)t.push(0);this.Uv=t,this.ye===nS?this.Wv=t.slice():this.ye===rS?(this.Wv=[[t.slice(),t.slice()]],this.Hv=this.Wv[0]):this.Wv=[t.slice(),t.slice()],this.Hv&&(this.Xv=new Et(new IM(this.Hv)));var r=this.Vs(this.Wv,void 0,n);this.qv=new Et,this.H&&this.qv.setGeometryName(this.H),this.qv.setGeometry(r),this.od(),this.dispatchEvent(new aS(oS,this.qv))},n.prototype.rd=function(t){for(var n,i,r=this.getMap(),e=this.qv.getGeometry(),o=r.getView().getProjection(),u=Jr(this.Dv);t.length<u;)t.push(0);(this.ye===nS?i=this.Wv:this.ye===rS?(i=(n=this.Wv[0])[n.length-1],this.td(r.getPixelFromCoordinate(t))&&(t=this.Uv.slice())):i=(n=this.Wv)[n.length-1],i[0]=t[0],i[1]=t[1],this.Vs(this.Wv,e,o),this.Vv)&&this.Vv.getGeometry().setCoordinates(t);if(e.getType()===Pt.POLYGON&&this.ye!==rS)this.ud(e);else if(this.Hv){this.Xv.getGeometry().setCoordinates(this.Hv)}this.od()},n.prototype.$v=function(t){var n,i,r=this.qv.getGeometry(),e=this.getMap().getView().getProjection(),o=this.ye;o===iS||o===eS?(this.Uv=t.slice(),(i=this.Wv).length>=this.Lv&&(this.Iv?i.pop():n=!0),i.push(t.slice()),this.Vs(i,r,e)):o===rS&&((i=this.Wv[0]).length>=this.Lv&&(this.Iv?i.pop():n=!0),i.push(t.slice()),n&&(this.Uv=i[0]),this.Vs(this.Wv,r,e)),this.ed(t.slice()),this.od(),n&&this.finishDrawing()},n.prototype.removeLastPoint=function(){if(this.qv){var t,n=this.qv.getGeometry(),i=this.getMap().getView().getProjection(),r=this.ye;if(r===iS||r===eS){if((t=this.Wv).splice(-2,1),t.length>=2){this.Uv=t[t.length-2].slice();var e=this.Uv.slice();t[t.length-1]=e,this.ed(e)}this.Vs(t,n,i),n.getType()===Pt.POLYGON&&this.Xv&&this.ud(n)}else if(r===rS){(t=this.Wv[0]).splice(-2,1);var o=this.Xv.getGeometry();if(t.length>=2){e=t[t.length-2].slice();t[t.length-1]=e,this.ed(e)}o.setCoordinates(t),this.Vs(this.Wv,n,i)}1===t.length&&this.abortDrawing(),this.od()}},n.prototype.finishDrawing=function(){var t=this.sd();if(t){var n=this.Wv,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.ye===iS?(n.pop(),this.Vs(n,i,r)):this.ye===rS&&(n[0].pop(),this.Vs(n,i,r),n=i.getCoordinates()),this.il===Pt.MULTI_POINT?t.setGeometry(new AM([n])):this.il===Pt.MULTI_LINE_STRING?t.setGeometry(new zM([n])):this.il===Pt.MULTI_POLYGON&&t.setGeometry(new GM([n])),this.dispatchEvent(new aS(uS,t)),this.Le&&this.Le.push(t),this.Mv&&this.Mv.addFeature(t)}},n.prototype.sd=function(){this.Uv=null;var t=this.qv;return this.qv=null,this.Vv=null,this.Xv=null,this.Yv.getSource().clear(!0),t},n.prototype.abortDrawing=function(){var t=this.sd();t&&this.dispatchEvent(new aS(sS,t))},n.prototype.appendCoordinates=function(t){var n,i=this.ye,r=!this.qv;if(r&&this.Qv(t[0]),i===iS||i===eS)n=this.Wv;else{if(i!==rS)return;n=this.Wv&&this.Wv.length?this.Wv[0]:[]}r&&n.shift(),n.pop();for(var e=0;e<t.length;e++)this.$v(t[e]);var o=t[t.length-1];this.$v(o),this.rd(o)},n.prototype.extend=function(t){var n=t.getGeometry();this.qv=t,this.Wv=n.getCoordinates();var i=this.Wv[this.Wv.length-1];this.Uv=i.slice(),this.Wv.push(i.slice()),this.Vv=new Et(new Ee(i)),this.od(),this.dispatchEvent(new aS(oS,this.qv))},n.prototype.od=function(){var t=[];this.qv&&t.push(this.qv),this.Xv&&t.push(this.Xv),this.Vv&&t.push(this.Vv);var n=this.Yv.getSource();n.clear(!0),n.addFeatures(t)},n.prototype.Jv=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.Yv.setMap(n?t:null)},n}(Ta),hS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cS="extentchanged",lS=function(t){function n(n){var i=t.call(this,cS)||this;return i.extent=n,i}return hS(n,t),n}(c);function vS(){var t=Zv();return function(n,i){return t[Pt.POINT]}}function dS(t){return function(n){return xn([t,n])}}function pS(t,n){return t[0]==n[0]?function(i){return xn([t,[i[0],n[1]]])}:t[1]==n[1]?function(i){return xn([t,[n[0],i[1]]])}:null}var yS=function(t){function n(n){var i,r=this,e=n||{};return(r=t.call(this,e)||this).on,r.once,r.un,r.Yr=e.condition?e.condition:za,r.ot=null,r.ad=null,r.fd=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.hd=!1,r.ld=null,r.vd=null,n||(n={}),r.dd=new WM({source:new zd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(i=Zv(),function(t,n){return i[Pt.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.yd=new WM({source:new zd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:vS(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&r.setExtent(n.extent),r}return hS(n,t),n.prototype.md=function(t,n){var i=n.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var e=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);e.sort((function(t,n){return er(i,t)-er(i,n)}));var o=e[0],u=Zi(i,o),s=n.getPixelFromCoordinateInternal(u);if(rr(t,s)<=this.fd){var a=n.getPixelFromCoordinateInternal(o[0]),f=n.getPixelFromCoordinateInternal(o[1]),h=ir(s,a),c=ir(s,f),l=Math.sqrt(Math.min(h,c));return this.hd=l<=this.fd,this.hd&&(u=h>c?o[1]:o[0]),u}}return null},n.prototype.Kn=function(t){var n=t.pixel,i=t.map,r=this.md(n,i);r||(r=i.getCoordinateFromPixelInternal(n)),this.wd(r)},n.prototype.bd=function(t){var n=this.ld;return n?t?n.setGeometry(Je(t)):n.setGeometry(void 0):(n=new Et(t?Je(t):{}),this.ld=n,this.dd.getSource().addFeature(n)),n},n.prototype.wd=function(t){var n=this.vd;n?n.getGeometry().setCoordinates(t):(n=new Et(new Ee(t)),this.vd=n,this.yd.getSource().addFeature(n));return n},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.Yr(n)||(n.type!=ds.POINTERMOVE||this.handlingDownUpSequence||this.Kn(n),t.prototype.handleEvent.call(this,n),!1)},n.prototype.handleDownEvent=function(t){var n=t.pixel,i=t.map,r=this.getExtentInternal(),e=this.md(n,i),o=function(t){var n=null,i=null;return t[0]==r[0]?n=r[2]:t[0]==r[2]&&(n=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==n&&null!==i?[n,i]:null};if(e&&r){var u=e[0]==r[0]||e[0]==r[2]?e[0]:null,s=e[1]==r[1]||e[1]==r[3]?e[1]:null;null!==u&&null!==s?this.ad=dS(o(e)):null!==u?this.ad=pS(o([u,r[1]]),o([u,r[3]])):null!==s&&(this.ad=pS(o([r[0],s]),o([r[2],s])))}else e=i.getCoordinateFromPixelInternal(n),this.setExtent([e[0],e[1],e[0],e[1]]),this.ad=dS(e);return!0},n.prototype.handleDragEvent=function(t){if(this.ad){var n=t.coordinate;this.setExtent(this.ad(n)),this.wd(n)}},n.prototype.handleUpEvent=function(t){this.ad=null;var n=this.getExtentInternal();return n&&0!==qn(n)||this.setExtent(null),!1},n.prototype.setMap=function(n){this.dd.setMap(n),this.yd.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getExtent=function(){return Fr(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.ot},n.prototype.setExtent=function(t){this.ot=t||null,this.bd(t),this.dispatchEvent(new lS(this.ot))},n}(Ta);function mS(t){return(mS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var wS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bS=[0,0,0,0],gS=[],xS="modifystart",MS="modifyend",_S=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.features=i,e.mapBrowserEvent=r,e}return wS(n,t),n}(c);function SS(t,n){return t.index-n.index}function OS(t,n,i){var r=n.geometry;if(r.getType()===Pt.CIRCLE){var e=r;if(1===n.index){var o=Ir();o&&(e=e.clone().transform(o,i));var u=ir(e.getCenter(),zr(t,i)),s=Math.sqrt(u)-e.getRadius();return s*s}}var a=zr(t,i);return gS[0]=zr(n.segment[0],i),gS[1]=zr(n.segment[1],i),er(a,gS)}function jS(t,n,i){var r=n.geometry;if(r.getType()===Pt.CIRCLE&&1===n.index){var e=r,o=Ir();return o&&(e=e.clone().transform(o,i)),Nr(e.getClosestPoint(zr(t,i)),i)}var u=zr(t,i);return gS[0]=zr(n.segment[0],i),gS[1]=zr(n.segment[1],i),Nr(Zi(u,gS),i)}var ES=function(t){function n(n){var i,r,e=t.call(this,n)||this;if(e.on,e.once,e.un,e.gd=e.Za.bind(e),e.Yr=n.condition?n.condition:Va,e.xd=function(t){return Pa(t)&&Ga(t)},e.Md=n.deleteCondition?n.deleteCondition:e.xd,e._d=n.insertVertexCondition?n.insertVertexCondition:za,e.vd=null,e.Sd=null,e.Od=[0,0],e.jd=!1,e.Ed=null,e.kd=new ed,e.fd=void 0!==n.pixelTolerance?n.pixelTolerance:10,e.hd=!1,e.Ad=!1,e.Td=[],e.Yv=new WM({source:new zd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(i=Zv(),function(t,n){return i[Pt.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.Cd={Point:e.Pd.bind(e),LineString:e.Rd.bind(e),LinearRing:e.Rd.bind(e),Polygon:e.Id.bind(e),MultiPoint:e.Nd.bind(e),MultiLineString:e.zd.bind(e),MultiPolygon:e.Fd.bind(e),Circle:e.Ld.bind(e),GeometryCollection:e.Gd.bind(e)},e.Mv=null,e.Dd=null,n.features?r=n.features:n.source&&(e.Mv=n.source,r=new ht(e.Mv.getFeatures()),e.Mv.addEventListener(Ed,e.Bd.bind(e)),e.Mv.addEventListener(Td,e.Ud.bind(e))),!r)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(e.Dd=n.hitDetection),e.Le=r,e.Le.forEach(e.qd.bind(e)),e.Le.addEventListener(ot,e.Vd.bind(e)),e.Le.addEventListener(ut,e.Wd.bind(e)),e.Xd=null,e.qr=[0,0],e.Hd=void 0===n.snapToPointer?!e.Dd:n.snapToPointer,e}return wS(n,t),n.prototype.qd=function(t){var n=t.getGeometry();if(n){var i=this.Cd[n.getType()];i&&i(t,n)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.Kd(this.Od,r),t.addEventListener(N,this.gd)},n.prototype.Yd=function(t,n){if(!this.Ed){this.Ed=new ht;for(var i=this.Ed.getArray(),r=0,e=n.length;r<e;++r)for(var o=n[r],u=0,s=o.length;u<s;++u){var a=o[u].feature;a&&-1===i.indexOf(a)&&this.Ed.push(a)}0===this.Ed.getLength()?this.Ed=null:this.dispatchEvent(new _S(xS,this.Ed,t))}},n.prototype.Zd=function(t){this.Jd(t),this.vd&&0===this.Le.getLength()&&(this.Yv.getSource().removeFeature(this.vd),this.vd=null),t.removeEventListener(N,this.gd)},n.prototype.Jd=function(t){var n=this.kd,i=[];n.forEach((function(n){t===n.feature&&i.push(n)}));for(var r=i.length-1;r>=0;--r){for(var e=i[r],o=this.Td.length-1;o>=0;--o)this.Td[o][0]===e&&this.Td.splice(o,1);n.remove(e)}},n.prototype.setActive=function(n){this.vd&&!n&&(this.Yv.getSource().removeFeature(this.vd),this.vd=null),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Yv.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getOverlay=function(){return this.Yv},n.prototype.Bd=function(t){t.feature&&this.Le.push(t.feature)},n.prototype.Ud=function(t){t.feature&&this.Le.remove(t.feature)},n.prototype.Vd=function(t){this.qd(t.element)},n.prototype.Za=function(t){if(!this.Ad){var n=t.target;this.Zd(n),this.qd(n)}},n.prototype.Wd=function(t){var n=t.element;this.Zd(n)},n.prototype.Pd=function(t,n){var i=n.getCoordinates(),r={feature:t,geometry:n,segment:[i,i]};this.kd.insert(n.getExtent(),r)},n.prototype.Nd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){var o=i[r],u={feature:t,geometry:n,depth:[r],index:r,segment:[o,o]};this.kd.insert(n.getExtent(),u)}},n.prototype.Rd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r){var o=i.slice(r,r+2),u={feature:t,geometry:n,index:r,segment:o};this.kd.insert(xn(o),u)}},n.prototype.zd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],u=0,s=o.length-1;u<s;++u){var a=o.slice(u,u+2),f={feature:t,geometry:n,depth:[r],index:u,segment:a};this.kd.insert(xn(a),f)}},n.prototype.Id=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],u=0,s=o.length-1;u<s;++u){var a=o.slice(u,u+2),f={feature:t,geometry:n,depth:[r],index:u,segment:a};this.kd.insert(xn(a),f)}},n.prototype.Fd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],u=0,s=o.length;u<s;++u)for(var a=o[u],f=0,h=a.length-1;f<h;++f){var c=a.slice(f,f+2),l={feature:t,geometry:n,depth:[u,r],index:f,segment:c};this.kd.insert(xn(c),l)}},n.prototype.Ld=function(t,n){var i=n.getCenter(),r={feature:t,geometry:n,index:0,segment:[i,i]},e={feature:t,geometry:n,index:1,segment:[i,i]},o=[r,e];r.featureSegments=o,e.featureSegments=o,this.kd.insert(Pn(i),r);var u=n,s=Ir();if(s&&this.getMap()){var a=this.getMap().getView().getProjection();u=$e(u=u.clone().transform(s,a)).transform(a,s)}this.kd.insert(u.getExtent(),e)},n.prototype.Gd=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=i[r];(0,this.Cd[e.getType()])(t,e)}},n.prototype.$d=function(t,n,i){var r=this.vd;r?r.getGeometry().setCoordinates(t):(r=new Et(new Ee(t)),this.vd=r,this.Yv.getSource().addFeature(r));return r.set("features",n),r.set("geometries",i),r},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.Xd=n,n.map.getView().getInteracting()||n.type!=ds.POINTERMOVE||this.handlingDownUpSequence||this.Kn(n),this.vd&&this.Md(n)&&(i=!(n.type!=ds.SINGLECLICK||!this.jd)||this.removePoint()),n.type==ds.SINGLECLICK&&(this.jd=!1),t.prototype.handleEvent.call(this,n)&&!i);var i},n.prototype.handleDragEvent=function(t){this.jd=!1,this.Yd(t,this.Td);for(var n=[t.coordinate[0]+this.qr[0],t.coordinate[1]+this.qr[1]],i=[],r=[],e=0,o=this.Td.length;e<o;++e){var u=this.Td[e],s=u[0],a=s.feature;-1===i.indexOf(a)&&i.push(a);var f=s.geometry;-1===r.indexOf(f)&&r.push(f);for(var h=s.depth,c=void 0,l=s.segment,v=u[1];n.length<f.getStride();)n.push(l[v][n.length]);switch(f.getType()){case Pt.POINT:c=n,l[0]=n,l[1]=n;break;case Pt.MULTI_POINT:(c=f.getCoordinates())[s.index]=n,l[0]=n,l[1]=n;break;case Pt.LINE_STRING:(c=f.getCoordinates())[s.index+v]=n,l[v]=n;break;case Pt.MULTI_LINE_STRING:case Pt.POLYGON:(c=f.getCoordinates())[h[0]][s.index+v]=n,l[v]=n;break;case Pt.MULTI_POLYGON:(c=f.getCoordinates())[h[1]][h[0]][s.index+v]=n,l[v]=n;break;case Pt.CIRCLE:if(l[0]=n,l[1]=n,0===s.index)this.Ad=!0,f.setCenter(n),this.Ad=!1;else{this.Ad=!0;var d=t.map.getView().getProjection(),p=rr(zr(f.getCenter(),d),zr(n,d)),y=Ir();if(y){var m=f.clone().transform(y,d);m.setRadius(p),p=m.transform(d,y).getRadius()}f.setRadius(p),this.Ad=!1}}c&&this.Qd(f,c)}this.$d(n,i,r)},n.prototype.handleDownEvent=function(t){if(!this.Yr(t))return!1;var n=t.coordinate;this.Kd(t.pixel,t.map,n),this.Td.length=0,this.Ed=null;var i=this.vd;if(i){var r=t.map.getView().getProjection(),e=[],u=i.getGeometry().getCoordinates(),s=xn([u]),a=this.kd.getInExtent(s),f={};a.sort(SS);for(var h=0,c=a.length;h<c;++h){var l=a[h],v=l.segment,d=o(l.geometry),p=l.depth;if(p&&(d+="-"+p.join("-")),f[d]||(f[d]=new Array(2)),l.geometry.getType()!==Pt.CIRCLE||1!==l.index)if(!Qi(v[0],u)||f[d][0])if(!Qi(v[1],u)||f[d][1])o(v)in this.Sd&&!f[d][0]&&!f[d][1]&&this._d(t)&&e.push(l);else{if((l.geometry.getType()===Pt.LINE_STRING||l.geometry.getType()===Pt.MULTI_LINE_STRING)&&f[d][0]&&0===f[d][0].index)continue;this.Td.push([l,1]),f[d][1]=l}else this.Td.push([l,0]),f[d][0]=l;else Qi(jS(n,l,r),u)&&!f[d][0]&&(this.Td.push([l,0]),f[d][0]=l)}e.length&&this.Yd(t,[e]);for(var y=e.length-1;y>=0;--y)this.tp(e[y],u)}return!!this.vd},n.prototype.handleUpEvent=function(t){for(var n=this.Td.length-1;n>=0;--n){var i=this.Td[n][0],r=i.geometry;if(r.getType()===Pt.CIRCLE){var e=r.getCenter(),o=i.featureSegments[0],u=i.featureSegments[1];o.segment[0]=e,o.segment[1]=e,u.segment[0]=e,u.segment[1]=e,this.kd.update(Pn(e),o);var s=r,a=Ir();if(a){var f=t.map.getView().getProjection();s=$e(s=s.clone().transform(a,f)).transform(f,a)}this.kd.update(s.getExtent(),u)}else this.kd.update(xn(i.segment),i)}return this.Ed&&(this.dispatchEvent(new _S(MS,this.Ed,t)),this.Ed=null),!1},n.prototype.Kn=function(t){this.Od=t.pixel,this.Kd(t.pixel,t.map,t.coordinate)},n.prototype.Kd=function(t,n,i){var r,e,u=this,s=i||n.getCoordinateFromPixel(t),a=n.getView().getProjection();if(this.Dd){var f="object"===mS(this.Dd)?function(t){return t===u.Dd}:void 0;n.forEachFeatureAtPixel(t,(function(t,n,i){if((i=i||t.getGeometry()).getType()===Pt.POINT&&y(u.Le.getArray(),t)){e=i;var o=i.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:i,segment:[o,o]}]}return!0}),{layerFilter:f})}if(!r){var h=Fr(Mn(Lr(Pn(s,bS),a),n.getView().getResolution()*this.fd,bS),a);r=this.kd.getInExtent(h)}if(r&&r.length>0){var c=r.sort((function(t,n){return OS(s,t,a)-OS(s,n,a)}))[0],l=c.segment,v=jS(s,c,a),d=n.getPixelFromCoordinate(v),p=rr(t,d);if(e||p<=this.fd){var m={};if(m[o(l)]=!0,this.Hd||(this.qr[0]=v[0]-s[0],this.qr[1]=v[1]-s[1]),c.geometry.getType()===Pt.CIRCLE&&1===c.index)this.hd=!0,this.$d(v,[c.feature],[c.geometry]);else{var w=n.getPixelFromCoordinate(l[0]),b=n.getPixelFromCoordinate(l[1]),g=ir(d,w),x=ir(d,b);p=Math.sqrt(Math.min(g,x)),this.hd=p<=this.fd,this.hd&&(v=g>x?l[1]:l[0]),this.$d(v,[c.feature],[c.geometry]);var M={};M[o(c.geometry)]=!0;for(var _=1,S=r.length;_<S;++_){var O=r[_].segment;if(!(Qi(l[0],O[0])&&Qi(l[1],O[1])||Qi(l[0],O[1])&&Qi(l[1],O[0])))break;var j=o(r[_].geometry);j in M||(M[j]=!0,m[o(O)]=!0)}}return void(this.Sd=m)}}this.vd&&(this.Yv.getSource().removeFeature(this.vd),this.vd=null)},n.prototype.tp=function(t,n){for(var i,r=t.segment,e=t.feature,o=t.geometry,u=t.depth,s=t.index;n.length<o.getStride();)n.push(0);switch(o.getType()){case Pt.MULTI_LINE_STRING:case Pt.POLYGON:(i=o.getCoordinates())[u[0]].splice(s+1,0,n);break;case Pt.MULTI_POLYGON:(i=o.getCoordinates())[u[1]][u[0]].splice(s+1,0,n);break;case Pt.LINE_STRING:(i=o.getCoordinates()).splice(s+1,0,n);break;default:return}this.Qd(o,i);var a=this.kd;a.remove(t),this.np(o,s,u,1);var f={segment:[r[0],n],feature:e,geometry:o,depth:u,index:s};a.insert(xn(f.segment),f),this.Td.push([f,1]);var h={segment:[n,r[1]],feature:e,geometry:o,depth:u,index:s+1};a.insert(xn(h.segment),h),this.Td.push([h,0]),this.jd=!0},n.prototype.removePoint=function(){if(this.Xd&&this.Xd.type!=ds.POINTERDRAG){var t=this.Xd;this.Yd(t,this.Td);var n=this.ip();return this.Ed&&this.dispatchEvent(new _S(MS,this.Ed,t)),this.Ed=null,n}return!1},n.prototype.ip=function(){var t,n,i,r,e,u,s,a,f,h,c,l=this.Td,v={},d=!1;for(e=l.length-1;e>=0;--e)c=o((h=(i=l[e])[0]).feature),h.depth&&(c+="-"+h.depth.join("-")),c in v||(v[c]={}),0===i[1]?(v[c].right=h,v[c].index=h.index):1==i[1]&&(v[c].left=h,v[c].index=h.index+1);for(c in v){switch(f=v[c].right,s=v[c].left,(a=(u=v[c].index)-1)<0&&(a=0),t=n=(r=(h=void 0!==s?s:f).geometry).getCoordinates(),d=!1,r.getType()){case Pt.MULTI_LINE_STRING:n[h.depth[0]].length>2&&(n[h.depth[0]].splice(u,1),d=!0);break;case Pt.LINE_STRING:n.length>2&&(n.splice(u,1),d=!0);break;case Pt.MULTI_POLYGON:t=t[h.depth[1]];case Pt.POLYGON:(t=t[h.depth[0]]).length>4&&(u==t.length-1&&(u=0),t.splice(u,1),d=!0,0===u&&(t.pop(),t.push(t[0]),a=t.length-1))}if(d){this.Qd(r,n);var p=[];if(void 0!==s&&(this.kd.remove(s),p.push(s.segment[0])),void 0!==f&&(this.kd.remove(f),p.push(f.segment[1])),void 0!==s&&void 0!==f){var y={depth:h.depth,feature:h.feature,geometry:h.geometry,index:a,segment:p};this.kd.insert(xn(y.segment),y)}this.np(r,u,h.depth,-1),this.vd&&(this.Yv.getSource().removeFeature(this.vd),this.vd=null),l.length=0}}return d},n.prototype.Qd=function(t,n){this.Ad=!0,t.setCoordinates(n),this.Ad=!1},n.prototype.np=function(t,n,i,r){this.kd.forEachInExtent(t.getExtent(),(function(e){e.geometry===t&&(void 0===i||void 0===e.depth||x(e.depth,i))&&e.index>n&&(e.index+=r)}))},n}(Ta),kS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),AS="select",TS=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=e,o}return kS(n,t),n}(c),CS={};var PS=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r,e,o=n||{};if(i.rp=i.qd.bind(i),i.ep=i.Zd.bind(i),i.Yr=o.condition?o.condition:Ga,i.op=o.addCondition?o.addCondition:La,i.up=o.removeCondition?o.removeCondition:La,i.sp=o.toggleCondition?o.toggleCondition:Ba,i.ap=!!o.multi&&o.multi,i.fp=o.filter?o.filter:S,i.hp=o.hitTolerance?o.hitTolerance:0,i.K=void 0!==o.style?o.style:(b((r=Zv())[Pt.POLYGON],r[Pt.LINE_STRING]),b(r[Pt.GEOMETRY_COLLECTION],r[Pt.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.Le=o.features||new ht,o.layers)if("function"==typeof o.layers)e=o.layers;else{var u=o.layers;e=function(t){return y(u,t)}}else e=S;return i.cp=e,i.lp={},i}return kS(n,t),n.prototype.vp=function(t,n){this.lp[o(t)]=n},n.prototype.getFeatures=function(){return this.Le},n.prototype.getHitTolerance=function(){return this.hp},n.prototype.getLayer=function(t){return this.lp[o(t)]},n.prototype.setHitTolerance=function(t){this.hp=t},n.prototype.setMap=function(n){this.getMap()&&this.K&&this.Le.forEach(this.dp.bind(this)),t.prototype.setMap.call(this,n),n?(this.Le.addEventListener(ot,this.rp),this.Le.addEventListener(ut,this.ep),this.K&&this.Le.forEach(this.pp.bind(this))):(this.Le.removeEventListener(ot,this.rp),this.Le.removeEventListener(ut,this.ep))},n.prototype.qd=function(t){var n=t.element;if(this.K&&this.pp(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find((function(t){if(t instanceof WM&&t.getSource()&&t.getSource().hasFeature(n))return t}));i&&this.vp(n,i)}},n.prototype.Zd=function(t){var n=t.element;this.K&&this.dp(n)},n.prototype.getStyle=function(){return this.K},n.prototype.pp=function(t){var n=o(t);n in CS||(CS[n]=t.getStyle()),t.setStyle(this.K)},n.prototype.dp=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var e=i[r];if(e!==this&&e instanceof n&&e.getStyle()&&-1!==e.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(e.getStyle())}var u=o(t);t.setStyle(CS[u]),delete CS[u]},n.prototype.yp=function(t){delete this.lp[o(t)]},n.prototype.handleEvent=function(t){if(!this.Yr(t))return!0;var n=this.op(t),i=this.up(t),r=this.sp(t),e=!n&&!i&&!r,o=t.map,u=this.getFeatures(),s=[],a=[];if(e){T(this.lp),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.fp(t,n))return this.vp(t,n),a.push(t),!this.ap}.bind(this),{layerFilter:this.cp,hitTolerance:this.hp});for(var f=u.getLength()-1;f>=0;--f){var h=u.item(f),c=a.indexOf(h);c>-1?a.splice(c,1):(u.remove(h),s.push(h))}0!==a.length&&u.extend(a)}else{o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.fp(t,e))return!n&&!r||y(u.getArray(),t)?(i||r)&&y(u.getArray(),t)&&(s.push(t),this.yp(t)):(this.vp(t,e),a.push(t)),!this.ap}.bind(this),{layerFilter:this.cp,hitTolerance:this.hp});for(var l=s.length-1;l>=0;--l)u.remove(s[l]);u.extend(a)}return(a.length>0||s.length>0)&&this.dispatchEvent(new TS(AS,a,s,t)),!0},n}(Oa),RS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function IS(t){return t.feature?t.feature:t.element?t.element:void 0}var NS=[],zS=function(t){function n(n){var i=this,r=n||{},e=r;return e.handleDownEvent||(e.handleDownEvent=S),e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this).Mv=r.source?r.source:null,i.mp=void 0===r.vertex||r.vertex,i.wp=void 0===r.edge||r.edge,i.Le=r.features?r.features:null,i.bp=[],i.gp={},i.xp={},i.Mp={},i.fd=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.kd=new ed,i._p={Point:i.Sp.bind(i),LineString:i.Op.bind(i),LinearRing:i.Op.bind(i),Polygon:i.jp.bind(i),MultiPoint:i.Ep.bind(i),MultiLineString:i.kp.bind(i),MultiPolygon:i.Ap.bind(i),GeometryCollection:i.Tp.bind(i),Circle:i.Cp.bind(i)},i}return RS(n,t),n.prototype.addFeature=function(t,n){var i=void 0===n||n,r=o(t),e=t.getGeometry();if(e){var u=this._p[e.getType()];if(u){this.xp[r]=e.getExtent([1/0,1/0,-1/0,-1/0]);var s=[];if(u(s,e),1===s.length)this.kd.insert(xn(s[0]),{feature:t,segment:s[0]});else if(s.length>1){var a=s.map((function(t){return xn(t)})),f=s.map((function(n){return{feature:t,segment:n}}));this.kd.load(a,f)}}}i&&(this.gp[r]=Y(t,N,this.Za,this))},n.prototype.Pp=function(t){this.addFeature(t)},n.prototype.Rp=function(t){this.removeFeature(t)},n.prototype.Ip=function(){var t;return this.Le?t=this.Le:this.Mv&&(t=this.Mv.getFeatures()),t},n.prototype.handleEvent=function(n){var i=this.snapTo(n.pixel,n.coordinate,n.map);return i&&(n.coordinate=i.vertex.slice(0,2),n.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,n)},n.prototype.Vd=function(t){var n=IS(t);this.addFeature(n)},n.prototype.Wd=function(t){var n=IS(t);this.removeFeature(n)},n.prototype.Za=function(t){var n=t.target;if(this.handlingDownUpSequence){var i=o(n);i in this.Mp||(this.Mp[i]=n)}else this.Np(n)},n.prototype.handleUpEvent=function(t){var n=C(this.Mp);return n.length&&(n.forEach(this.Np.bind(this)),this.Mp={}),!1},n.prototype.removeFeature=function(t,n){var i=void 0===n||n,r=o(t),e=this.xp[r];if(e){var u=this.kd,s=[];u.forEachInExtent(e,(function(n){t===n.feature&&s.push(n)}));for(var a=s.length-1;a>=0;--a)u.remove(s[a])}i&&(J(this.gp[r]),delete this.gp[r])},n.prototype.setMap=function(n){var i=this.getMap(),r=this.bp,e=this.Ip();i&&(r.forEach(J),r.length=0,e.forEach(this.Rp.bind(this))),t.prototype.setMap.call(this,n),n&&(this.Le?r.push(Y(this.Le,ot,this.Vd,this),Y(this.Le,ut,this.Wd,this)):this.Mv&&r.push(Y(this.Mv,Ed,this.Vd,this),Y(this.Mv,Td,this.Wd,this)),e.forEach(this.Pp.bind(this)))},n.prototype.snapTo=function(t,n,i){var r=xn([i.getCoordinateFromPixel([t[0]-this.fd,t[1]+this.fd]),i.getCoordinateFromPixel([t[0]+this.fd,t[1]-this.fd])]),e=this.kd.getInExtent(r),o=e.length;if(0===o)return null;var u,s=i.getView().getProjection(),a=zr(n,s),f=1/0,h=this.fd*this.fd,c=function(){if(u){var n=i.getPixelFromCoordinate(u);if(ir(t,n)<=h)return{vertex:u,vertexPixel:[Math.round(n[0]),Math.round(n[1])]}}return null};if(this.mp){for(var l=0;l<o;++l){(v=e[l]).feature.getGeometry().getType()!==Pt.CIRCLE&&v.segment.forEach((function(t){var n=zr(t,s),i=ir(a,n);i<f&&(u=t,f=i)}))}if(x=c())return x}if(this.wp){for(l=0;l<o;++l){var v,d=null;if((v=e[l]).feature.getGeometry().getType()===Pt.CIRCLE){var p=v.feature.getGeometry(),y=Ir();y&&(p=p.clone().transform(y,s)),d=Nr(Yi(a,p),s)}else{var m=v.segment,w=m[0],b=m[1];b&&(NS[0]=zr(w,s),NS[1]=zr(b,s),d=Zi(a,NS))}if(d){var g=ir(a,d);g<f&&(u=d,f=g)}}var x;if(x=c())return x}return null},n.prototype.Np=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},n.prototype.Cp=function(t,n){var i=this.getMap().getView().getProjection(),r=n,e=Ir();e&&(r=r.clone().transform(e,i));var o=$e(r);e&&o.transform(i,e);for(var u=o.getCoordinates()[0],s=0,a=u.length-1;s<a;++s)t.push(u.slice(s,s+2))},n.prototype.Tp=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=this._p[i[r].getType()];e&&e(t,i[r])}},n.prototype.Op=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r)t.push(i.slice(r,r+2))},n.prototype.kp=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],u=0,s=o.length-1;u<s;++u)t.push(o.slice(u,u+2))},n.prototype.Ep=function(t,n){n.getCoordinates().forEach((function(n){t.push([n])}))},n.prototype.Ap=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],u=0,s=o.length;u<s;++u)for(var a=o[u],f=0,h=a.length-1;f<h;++f)t.push(a.slice(f,f+2))},n.prototype.Sp=function(t,n){t.push([n.getCoordinates()])},n.prototype.jp=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],u=0,s=o.length-1;u<s;++u)t.push(o.slice(u,u+2))},n}(Ta),FS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),LS="translatestart",GS="translating",DS="translateend",BS=function(t){function n(n,i,r,e,o){var u=t.call(this,n)||this;return u.features=i,u.coordinate=r,u.startCoordinate=e,u.mapBrowserEvent=o,u}return FS(n,t),n}(c),US=function(t){function n(n){var i,r=this,e=n||{};if((r=t.call(this,e)||this).on,r.once,r.un,r.zp=null,r.Fp=null,r.Le=void 0!==e.features?e.features:null,e.layers&&!r.Le)if("function"==typeof e.layers)i=e.layers;else{var o=e.layers;i=function(t){return y(o,t)}}else i=S;return r.cp=i,r.fp=e.filter&&!r.Le?e.filter:S,r.hp=e.hitTolerance?e.hitTolerance:0,r.Yr=e.condition?e.condition:za,r.Lp=null,r.addChangeListener(xa,r.Gp),r}return FS(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.Yr(t))return!1;if(this.Lp=this.Dp(t.pixel,t.map),!this.zp&&this.Lp){this.Fp=t.coordinate,this.zp=t.coordinate,this.handleMoveEvent(t);var n=this.Le||new ht([this.Lp]);return this.dispatchEvent(new BS(LS,n,t.coordinate,this.Fp,t)),!0}return!1},n.prototype.handleUpEvent=function(t){if(this.zp){this.zp=null,this.handleMoveEvent(t);var n=this.Le||new ht([this.Lp]);return this.dispatchEvent(new BS(DS,n,t.coordinate,this.Fp,t)),this.Fp=null,!0}return!1},n.prototype.handleDragEvent=function(t){if(this.zp){var n=t.coordinate,i=n[0]-this.zp[0],r=n[1]-this.zp[1],e=this.Le||new ht([this.Lp]);e.forEach((function(t){var n=t.getGeometry();n.translate(i,r),t.setGeometry(n)})),this.zp=n,this.dispatchEvent(new BS(GS,e,n,this.Fp,t))}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.Dp(t.pixel,t.map)?(n.classList.remove(this.zp?"ol-grab":"ol-grabbing"),n.classList.add(this.zp?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")},n.prototype.Dp=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.fp(t,n)&&(!this.Le||y(this.Le.getArray(),t)))return t}.bind(this),{layerFilter:this.cp,hitTolerance:this.hp})},n.prototype.getHitTolerance=function(){return this.hp},n.prototype.setHitTolerance=function(t){this.hp=t},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),this.Jv(i)},n.prototype.Gp=function(){this.Jv(null)},n.prototype.Jv=function(t){var n=this.getMap(),i=this.getActive();n&&i||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing")},n}(Ta);function qS(t,n,i,r,e,o){var u,s;void 0!==e?(u=e,s=void 0!==o?o:0):(u=[],s=0);for(var a=n;a<i;){var f=t[a++];u[s++]=t[a++],u[s++]=f;for(var h=2;h<r;++h)u[s++]=t[a++]}return u.length=s,u}var VS=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),WS={};WS[Pt.POINT]=function(t){var n;n=void 0!==t.m&&void 0!==t.z?new Ee([t.x,t.y,t.z,t.m],Ct):void 0!==t.z?new Ee([t.x,t.y,t.z],At):void 0!==t.m?new Ee([t.x,t.y,t.m],Tt):new Ee([t.x,t.y]);return n},WS[Pt.LINE_STRING]=function(t){var n=KS(t);return new IM(t.paths[0],n)},WS[Pt.POLYGON]=function(t){var n=KS(t);return new Ye(t.rings,n)},WS[Pt.MULTI_POINT]=function(t){var n=KS(t);return new AM(t.points,n)},WS[Pt.MULTI_LINE_STRING]=function(t){var n=KS(t);return new zM(t.paths,n)},WS[Pt.MULTI_POLYGON]=function(t){var n=KS(t);return new GM(t.rings,n)};var XS={};function HS(t,n){var i,r,e;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)e=Pt.POINT;else if(t.points)e=Pt.MULTI_POINT;else if(t.paths){e=1===t.paths.length?Pt.LINE_STRING:Pt.MULTI_LINE_STRING}else if(t.rings){var o=t,u=KS(o),s=function(t,n){var i,r,e=[],o=[],u=[];for(i=0,r=t.length;i<r;++i){e.length=0,ae(e,0,t[i],n.length),Be(e,0,e.length,n.length)?o.push([t[i]]):u.push(t[i])}for(;u.length;){var s=u.shift(),a=!1;for(i=o.length-1;i>=0;i--){var f=o[i][0];if(jn(new Oe(f).getExtent(),new Oe(s).getExtent())){o[i].push(s),a=!0;break}}a||o.push([s.reverse()])}return o}(o.rings,u);1===s.length?(e=Pt.POLYGON,t=A({},t,((i={}).rings=s[0],i))):(e=Pt.MULTI_POLYGON,t=A({},t,((r={}).rings=s,r)))}return u_((0,WS[e])(t),!1,n)}function KS(t){var n=kt;return!0===t.hasZ&&!0===t.hasM?n=Ct:!0===t.hasZ?n=At:!0===t.hasM&&(n=Tt),n}function YS(t){var n=t.getLayout();return{hasZ:n===At||n===Ct,hasM:n===Tt||n===Ct}}function ZS(t,n){return(0,XS[t.getType()])(u_(t,!0,n),n)}XS[Pt.POINT]=function(t,n){var i,r=t.getCoordinates(),e=t.getLayout();e===At?i={x:r[0],y:r[1],z:r[2]}:e===Tt?i={x:r[0],y:r[1],m:r[2]}:e===Ct?i={x:r[0],y:r[1],z:r[2],m:r[3]}:e===kt?i={x:r[0],y:r[1]}:St(!1,34);return i},XS[Pt.LINE_STRING]=function(t,n){var i=YS(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},XS[Pt.POLYGON]=function(t,n){var i=YS(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},XS[Pt.MULTI_POINT]=function(t,n){var i=YS(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},XS[Pt.MULTI_LINE_STRING]=function(t,n){var i=YS(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},XS[Pt.MULTI_POLYGON]=function(t,n){for(var i=YS(t),r=t.getCoordinates(!1),e=[],o=0;o<r.length;o++)for(var u=r[o].length-1;u>=0;u--)e.push(r[o][u]);return{hasZ:i.hasZ,hasM:i.hasM,rings:e}};var JS=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).H=r.geometryName,i}return VS(n,t),n.prototype.readFeatureFromObject=function(t,n,i){var r=t,e=HS(r.geometry,n),o=new Et;if(this.H&&o.setGeometryName(this.H),o.setGeometry(e),r.attributes){o.setProperties(r.attributes,!0);var u=r.attributes[i];void 0!==u&&o.setId(u)}return o},n.prototype.readFeaturesFromObject=function(t,n){var i=n||{};if(t.features){for(var r=[],e=t.features,o=0,u=e.length;o<u;++o)r.push(this.readFeatureFromObject(e[o],i,t.objectIdFieldName));return r}return[this.readFeatureFromObject(t,i)]},n.prototype.readGeometryFromObject=function(t,n){return HS(t,n)},n.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?br("EPSG:"+t.spatialReference.wkid):null},n.prototype.writeGeometryObject=function(t,n){return ZS(t,this.adaptOptions(n))},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={};if(!t.hasProperties())return i.attributes={},i;var r=t.getProperties(),e=t.getGeometry();if(e){i.geometry=ZS(e,n);var o=n&&(n.dataProjection||n.featureProjection);o&&(i.geometry.spatialReference={wkid:Number(br(o).getCode().split(":").pop())}),delete r[t.getGeometryName()]}return P(r)?i.attributes={}:i.attributes=r,i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(this.writeFeatureObject(t[r],n));return{features:i}},n}(M_),$S=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),QS=function(t){function n(){var n=t.call(this)||this;return n.Bp=Gc(),n}return $S(n,t),n.prototype.getType=function(){return ch},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var i=Mc(t);return this.readFeatureFromDocument(i,n)}return gc(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n)}return null},n.prototype.readFeatureFromDocument=function(t,n){var i=this.readFeaturesFromDocument(t,n);return i.length>0?i[0]:null},n.prototype.readFeatureFromNode=function(t,n){return null},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var i=Mc(t);return this.readFeaturesFromDocument(i,n)}return gc(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n)}return[]},n.prototype.readFeaturesFromDocument=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&b(i,this.readFeaturesFromNode(r,n));return i},n.prototype.readFeaturesFromNode=function(t,n){return r()},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var i=Mc(t);return this.readGeometryFromDocument(i,n)}return gc(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n)}return null},n.prototype.readGeometryFromDocument=function(t,n){return null},n.prototype.readGeometryFromNode=function(t,n){return null},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=Mc(t);return this.readProjectionFromDocument(n)}return gc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection},n.prototype.readProjectionFromNode=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){var i=this.writeFeatureNode(t,n);return this.Bp.serializeToString(i)},n.prototype.writeFeatureNode=function(t,n){return null},n.prototype.writeFeatures=function(t,n){var i=this.writeFeaturesNode(t,n);return this.Bp.serializeToString(i)},n.prototype.writeFeaturesNode=function(t,n){return null},n.prototype.writeGeometry=function(t,n){var i=this.writeGeometryNode(t,n);return this.Bp.serializeToString(i)},n.prototype.writeGeometryNode=function(t,n){return null},n}(o_),tO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nO="http://www.opengis.net/gml",iO=/^[\s\xa0]*$/,rO=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.featureType=r.featureType,i.featureNS=r.featureNS,i.srsName=r.srsName,i.schemaLocation="",i.FEATURE_COLLECTION_PARSERS={},i.FEATURE_COLLECTION_PARSERS[i.namespace]={featureMember:Sc(i.readFeaturesInternal),featureMembers:Oc(i.readFeaturesInternal)},i.supportedMediaTypes=["application/gml+xml"],i}return tO(n,t),n.prototype.readFeaturesInternal=function(t,n){var i=t.localName,r=null;if("FeatureCollection"==i)r=Nc([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if("featureMembers"==i||"featureMember"==i||"member"==i){var e=n[0],o=e.featureType,u=e.featureNS;if(!o&&t.childNodes){o=[],u={};for(var s=0,a=t.childNodes.length;s<a;++s){var f=t.childNodes[s];if(1===f.nodeType){var h=f.nodeName.split(":").pop();if(-1===o.indexOf(h)){var c="",l=0,v=f.namespaceURI;for(var d in u){if(u[d]===v){c=d;break}++l}c||(u[c="p"+l]=v),o.push(c+":"+h)}}}"featureMember"!=i&&(e.featureType=o,e.featureNS=u)}if("string"==typeof u){var p=u;(u={}).p0=p}var y={},m=Array.isArray(o)?o:[o];for(var w in u){var b={};for(s=0,a=m.length;s<a;++s){(-1===m[s].indexOf(":")?"p0":m[s].split(":")[0])===w&&(b[m[s].split(":").pop()]="featureMembers"==i?Sc(this.readFeatureElement,this):Oc(this.readFeatureElement,this))}y[u[w]]=b}r=Nc("featureMember"==i||"member"==i?void 0:[],y,t,n)}return null===r&&(r=[]),r},n.prototype.readGeometryOrExtent=function(t,n){var i=n[0];return i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Nc(null,this.GEOMETRY_PARSERS,t,n,this)},n.prototype.readExtentElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?s_(r,i):void 0},n.prototype.readGeometryElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?u_(r,!1,i):void 0},n.prototype.readFeatureElementInternal=function(t,n,i){for(var r,e={},o=t.firstElementChild;o;o=o.nextElementSibling){var u=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(u=wc(o,!1),iO.test(u)&&(u=void 0)):(i&&(u="boundedBy"===s?this.readExtentElement(o,n):this.readGeometryElement(o,n)),u?"boundedBy"!==s&&(r=s):u=this.readFeatureElementInternal(o,n,!1));var a=o.attributes.length;if(a>0){u={Up:u};for(var f=0;f<a;f++){u[o.attributes[f].name]=o.attributes[f].value}}e[s]?(e[s]instanceof Array||(e[s]=[e[s]]),e[s].push(u)):e[s]=u}if(i){var h=new Et(e);r&&h.setGeometryName(r);var c=t.getAttribute("fid")||xc(t,this.namespace,"id");return c&&h.setId(c),h}return e},n.prototype.readFeatureElement=function(t,n){return this.readFeatureElementInternal(t,n,!0)},n.prototype.readPoint=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new Ee(i,At)},n.prototype.readMultiPoint=function(t,n){var i=Nc([],this.MULTIPOINT_PARSERS,t,n,this);return i?new AM(i):void 0},n.prototype.readMultiLineString=function(t,n){var i=Nc([],this.MULTILINESTRING_PARSERS,t,n,this);if(i)return new zM(i)},n.prototype.readMultiPolygon=function(t,n){var i=Nc([],this.MULTIPOLYGON_PARSERS,t,n,this);if(i)return new GM(i)},n.prototype.pointMemberParser=function(t,n){Ic(this.POINTMEMBER_PARSERS,t,n,this)},n.prototype.lineStringMemberParser=function(t,n){Ic(this.LINESTRINGMEMBER_PARSERS,t,n,this)},n.prototype.polygonMemberParser=function(t,n){Ic(this.POLYGONMEMBER_PARSERS,t,n,this)},n.prototype.readLineString=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);return i?new IM(i,At):void 0},n.prototype.readFlatLinearRing=function(t,n){var i=Nc(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);return i||void 0},n.prototype.readLinearRing=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new Oe(i,At)},n.prototype.readPolygon=function(t,n){var i=Nc([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],u=void 0;for(u=1,r=i.length;u<r;++u)b(e,i[u]),o.push(e.length);return new Ye(e,At,o)}},n.prototype.readFlatCoordinatesFromNode=function(t,n){return Nc(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.readGeometryFromNode=function(t,n){var i=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return i||null},n.prototype.readFeaturesFromNode=function(t,n){var i={featureType:this.featureType,featureNS:this.featureNS};return n&&A(i,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[i])||[]},n.prototype.readProjectionFromNode=function(t){return br(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},n}(QS);rO.prototype.namespace=nO,rO.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},rO.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},rO.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},rO.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Sc(rO.prototype.pointMemberParser),pointMembers:Sc(rO.prototype.pointMemberParser)}},rO.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Sc(rO.prototype.lineStringMemberParser),lineStringMembers:Sc(rO.prototype.lineStringMemberParser)}},rO.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Sc(rO.prototype.polygonMemberParser),polygonMembers:Sc(rO.prototype.polygonMemberParser)}},rO.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Sc(rO.prototype.readFlatCoordinatesFromNode)}},rO.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Sc(rO.prototype.readLineString)}},rO.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Sc(rO.prototype.readPolygon)}},rO.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Oc(rO.prototype.readFlatLinearRing)}};var eO=rO;function oO(t){return uO(wc(t,!1))}function uO(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0}function sO(t){var n=wc(t,!1),i=Date.parse(n);return isNaN(i)?void 0:i/1e3}function aO(t){return fO(wc(t,!1))}function fO(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0}function hO(t){return cO(wc(t,!1))}function cO(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0}function lO(t){return wc(t,!1).trim()}function vO(t,n){wO(t,n?"1":"0")}function dO(t,n){t.appendChild(Bc().createCDATASection(n))}function pO(t,n){var i=new Date(1e3*n),r=i.getUTCFullYear()+"-"+Xi(i.getUTCMonth()+1,2)+"-"+Xi(i.getUTCDate(),2)+"T"+Xi(i.getUTCHours(),2)+":"+Xi(i.getUTCMinutes(),2)+":"+Xi(i.getUTCSeconds(),2)+"Z";t.appendChild(Bc().createTextNode(r))}function yO(t,n){var i=n.toPrecision();t.appendChild(Bc().createTextNode(i))}function mO(t,n){var i=n.toString();t.appendChild(Bc().createTextNode(i))}function wO(t,n){t.appendChild(Bc().createTextNode(n))}var bO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gO={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},xO=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).FEATURE_COLLECTION_PARSERS[nO].featureMember=Sc(i.readFeaturesInternal),i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",i}return bO(n,t),n.prototype.readFlatCoordinates=function(t,n){var i=wc(t,!1).replace(/^\s*|\s*$/g,""),r=n[0].srsName,e="enu";if(r){var o=br(r);o&&(e=o.getAxisOrientation())}for(var u=i.trim().split(/\s+/),s=[],a=0,f=u.length;a<f;a++){var h=u[a].split(/,+/),c=parseFloat(h[0]),l=parseFloat(h[1]),v=3===h.length?parseFloat(h[2]):0;"en"===e.substr(0,2)?s.push(c,l,v):s.push(l,c,v)}return s},n.prototype.readBox=function(t,n){var i=Nc([null],this.qp,t,n,this);return Tn(i[1][0],i[1][1],i[1][3],i[1][4])},n.prototype.innerBoundaryIsParser=function(t,n){var i=Nc(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i)},n.prototype.outerBoundaryIsParser=function(t,n){var i=Nc(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i)},n.prototype.Vp=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,u=e.surface,s=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===u?r="Surface":"MultiLineString"===r&&!0===s&&(r="MultiCurve"),mc("http://www.opengis.net/gml",r)},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,u=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var s=[],a=[];if(n.hasProperties()){var f=n.getProperties();for(var h in f){var c=f[h];null!==c&&(s.push(h),a.push(c),h==u||"function"==typeof c.getSimplifiedGeometry?h in e.serializers[o]||(e.serializers[o][h]=kc(this.writeGeometryElement,this)):h in e.serializers[o]||(e.serializers[o][h]=kc(wO)))}}var l=A({},e);l.node=t,Fc(l,e.serializers,Tc(void 0,o),a,i,s)},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=this.Wp(t.namespaceURI);t.appendChild(e),this.Xp(e,n,i)}else if("Curve"===t.nodeName){var o=mc(t.namespaceURI,"segments");t.appendChild(o),this.Hp(o,n,i)}},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.Vp(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i))},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,u=r.curve;o&&t.setAttribute("srsName",o);var s=n.getLineStrings();Fc({node:t,hasZ:e,srsName:o,curve:u},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.Kp,s,i,void 0,this)},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=A({},e);o.node=t,r=Array.isArray(n)?s_(n,e):u_(n,!0,e),Fc(o,this.GEOMETRY_SERIALIZERS,this.Vp,[r],i,void 0,this)},n.prototype.Wp=function(t){var n=mc(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n},n.prototype.Xp=function(t,n,i){for(var r=i[i.length-1],e=r.hasZ,o=r.srsName,u=n.getCoordinates(),s=u.length,a=new Array(s),f=0;f<s;++f){var h=u[f];a[f]=this.Yp(h,o,e)}wO(t,a.join(" "))},n.prototype.Hp=function(t,n,i){var r=mc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i)},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var u=n.getLinearRings();Fc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.Zp,u,i,void 0,this)}else if("Surface"===t.nodeName){var s=mc(t.namespaceURI,"patches");t.appendChild(s),this.Jp(s,n,i)}},n.prototype.Zp=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),mc(e.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},n.prototype.Jp=function(t,n,i){var r=mc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i)},n.prototype.writeRing=function(t,n,i){var r=mc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i)},n.prototype.Yp=function(t,n,i){var r="enu";n&&(r=br(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];i&&(e+=","+(t[2]||0));return e},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var u=this.Wp(t.namespaceURI);t.appendChild(u);var s=n.getCoordinates();wO(u,this.Yp(s,o,e))},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var u=n.getPoints();Fc({node:t,hasZ:e,srsName:o},this.POINTMEMBER_SERIALIZERS,Tc("pointMember"),u,i,void 0,this)},n.prototype.writePointMember=function(t,n,i){var r=mc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i)},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=this.Wp(t.namespaceURI);t.appendChild(e),this.Xp(e,n,i)},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,u=r.surface;o&&t.setAttribute("srsName",o);var s=n.getPolygons();Fc({node:t,hasZ:e,srsName:o,surface:u},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.Kp,s,i,void 0,this)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.Vp(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i))},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];Fc({node:t},this.ENVELOPE_SERIALIZERS,Cc,e,i,["lowerCorner","upperCorner"],this)},n.prototype.Kp=function(t,n,i){var r=n[n.length-1].node;return mc("http://www.opengis.net/gml",gO[r.nodeName])},n}(eO);xO.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Oc(xO.prototype.readFlatCoordinates)}},xO.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:xO.prototype.innerBoundaryIsParser,outerBoundaryIs:xO.prototype.outerBoundaryIsParser}},xO.prototype.qp={"http://www.opengis.net/gml":{coordinates:Sc(xO.prototype.readFlatCoordinates)}},xO.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Oc(eO.prototype.readPoint),MultiPoint:Oc(eO.prototype.readMultiPoint),LineString:Oc(eO.prototype.readLineString),MultiLineString:Oc(eO.prototype.readMultiLineString),LinearRing:Oc(eO.prototype.readLinearRing),Polygon:Oc(eO.prototype.readPolygon),MultiPolygon:Oc(eO.prototype.readMultiPolygon),Box:Oc(xO.prototype.readBox)}},xO.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:kc(xO.prototype.writeCurveOrLineString),MultiCurve:kc(xO.prototype.writeMultiCurveOrLineString),Point:kc(xO.prototype.writePoint),MultiPoint:kc(xO.prototype.writeMultiPoint),LineString:kc(xO.prototype.writeCurveOrLineString),MultiLineString:kc(xO.prototype.writeMultiCurveOrLineString),LinearRing:kc(xO.prototype.writeLinearRing),Polygon:kc(xO.prototype.writeSurfaceOrPolygon),MultiPolygon:kc(xO.prototype.writeMultiSurfaceOrPolygon),Surface:kc(xO.prototype.writeSurfaceOrPolygon),MultiSurface:kc(xO.prototype.writeMultiSurfaceOrPolygon),Envelope:kc(xO.prototype.writeEnvelope)}},xO.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:kc(xO.prototype.writeLineStringOrCurveMember),curveMember:kc(xO.prototype.writeLineStringOrCurveMember)}},xO.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:kc(xO.prototype.writeRing),innerBoundaryIs:kc(xO.prototype.writeRing)}},xO.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:kc(xO.prototype.writePointMember)}},xO.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:kc(xO.prototype.writeSurfaceOrPolygonMember),polygonMember:kc(xO.prototype.writeSurfaceOrPolygonMember)}},xO.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:kc(wO),upperCorner:kc(wO)}};var MO=xO,_O=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),SO={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},OO=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).$p=void 0!==r.surface&&r.surface,i.Qp=void 0!==r.curve&&r.curve,i.ty=void 0===r.multiCurve||r.multiCurve,i.ny=void 0===r.multiSurface||r.multiSurface,i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",i.hasZ=void 0!==r.hasZ&&r.hasZ,i}return _O(n,t),n.prototype.readMultiCurve=function(t,n){var i=Nc([],this.MULTICURVE_PARSERS,t,n,this);return i?new zM(i):void 0},n.prototype.readMultiSurface=function(t,n){var i=Nc([],this.MULTISURFACE_PARSERS,t,n,this);if(i)return new GM(i)},n.prototype.curveMemberParser=function(t,n){Ic(this.CURVEMEMBER_PARSERS,t,n,this)},n.prototype.surfaceMemberParser=function(t,n){Ic(this.SURFACEMEMBER_PARSERS,t,n,this)},n.prototype.readPatch=function(t,n){return Nc([null],this.PATCHES_PARSERS,t,n,this)},n.prototype.readSegment=function(t,n){return Nc([null],this.SEGMENTS_PARSERS,t,n,this)},n.prototype.readPolygonPatch=function(t,n){return Nc([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)},n.prototype.readLineStringSegment=function(t,n){return Nc([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.interiorParser=function(t,n){var i=Nc(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i)},n.prototype.exteriorParser=function(t,n){var i=Nc(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i)},n.prototype.readSurface=function(t,n){var i=Nc([null],this.SURFACE_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],u=void 0;for(u=1,r=i.length;u<r;++u)b(e,i[u]),o.push(e.length);return new Ye(e,At,o)}},n.prototype.readCurve=function(t,n){var i=Nc([null],this.CURVE_PARSERS,t,n,this);return i?new IM(i,At):void 0},n.prototype.readEnvelope=function(t,n){var i=Nc([null],this.ENVELOPE_PARSERS,t,n,this);return Tn(i[1][0],i[1][1],i[2][0],i[2][1])},n.prototype.readFlatPos=function(t,n){for(var i,r=wc(t,!1),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=e.exec(r);)o.push(parseFloat(i[1])),r=r.substr(i[0].length);if(""===r){var u=n[0].srsName,s="enu";if(u)s=br(u).getAxisOrientation();if("neu"===s){var a,f=void 0;for(f=0,a=o.length;f<a;f+=3){var h=o[f],c=o[f+1];o[f]=c,o[f+1]=h}}var l=o.length;if(2==l&&o.push(0),0!==l)return o}},n.prototype.readFlatPosList=function(t,n){var i=wc(t,!1).replace(/^\s*|\s*$/g,""),r=n[0],e=r.srsName,o=r.srsDimension,u="enu";e&&(u=br(e).getAxisOrientation());var s,a,f,h=i.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=cO(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=cO(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=cO(t.parentNode.getAttribute("srsDimension")):o&&(c=cO(o));for(var l=[],v=0,d=h.length;v<d;v+=c)s=parseFloat(h[v]),a=parseFloat(h[v+1]),f=3===c?parseFloat(h[v+2]):0,"en"===u.substr(0,2)?l.push(s,a,f):l.push(a,s,f);return l},n.prototype.iy=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);var u=r.srsName,s="enu";u&&(s=br(u).getAxisOrientation());var a,f=n.getCoordinates();(a="en"===s.substr(0,2)?f[0]+" "+f[1]:f[1]+" "+f[0],e)&&(a+=" "+(f[2]||0));wO(t,a)},n.prototype.Yp=function(t,n,i){var r="enu";n&&(r=br(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];i&&(e+=" "+(t[2]||0));return e},n.prototype.ey=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);for(var u,s=r.srsName,a=n.getCoordinates(),f=a.length,h=new Array(f),c=0;c<f;++c)u=a[c],h[c]=this.Yp(u,s,e);wO(t,h.join(" "))},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=mc(t.namespaceURI,"pos");t.appendChild(e),this.iy(e,n,i)},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];Fc({node:t},this.ENVELOPE_SERIALIZERS,Cc,e,i,["lowerCorner","upperCorner"],this)},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=mc(t.namespaceURI,"posList");t.appendChild(e),this.ey(e,n,i)},n.prototype.Zp=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),mc(e.namespaceURI,void 0!==o?"interior":"exterior")},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var u=n.getLinearRings();Fc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.Zp,u,i,void 0,this)}else if("Surface"===t.nodeName){var s=mc(t.namespaceURI,"patches");t.appendChild(s),this.Jp(s,n,i)}},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=mc(t.namespaceURI,"posList");t.appendChild(e),this.ey(e,n,i)}else if("Curve"===t.nodeName){var o=mc(t.namespaceURI,"segments");t.appendChild(o),this.Hp(o,n,i)}},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,u=r.surface;o&&t.setAttribute("srsName",o);var s=n.getPolygons();Fc({node:t,hasZ:e,srsName:o,surface:u},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.Kp,s,i,void 0,this)},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.srsName,o=r.hasZ;e&&t.setAttribute("srsName",e);var u=n.getPoints();Fc({node:t,hasZ:o,srsName:e},this.POINTMEMBER_SERIALIZERS,Tc("pointMember"),u,i,void 0,this)},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,u=r.curve;o&&t.setAttribute("srsName",o);var s=n.getLineStrings();Fc({node:t,hasZ:e,srsName:o,curve:u},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.Kp,s,i,void 0,this)},n.prototype.writeRing=function(t,n,i){var r=mc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.Vp(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i))},n.prototype.writePointMember=function(t,n,i){var r=mc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i)},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.Vp(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i))},n.prototype.Jp=function(t,n,i){var r=mc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i)},n.prototype.Hp=function(t,n,i){var r=mc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i)},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=A({},e);o.node=t,r=Array.isArray(n)?s_(n,e):u_(n,!0,e),Fc(o,this.GEOMETRY_SERIALIZERS,this.Vp,[r],i,void 0,this)},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,u=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var s=[],a=[];if(n.hasProperties()){var f=n.getProperties();for(var h in f){var c=f[h];null!==c&&(s.push(h),a.push(c),h==u||"function"==typeof c.getSimplifiedGeometry?h in e.serializers[o]||(e.serializers[o][h]=kc(this.writeGeometryElement,this)):h in e.serializers[o]||(e.serializers[o][h]=kc(wO)))}}var l=A({},e);l.node=t,Fc(l,e.serializers,Tc(void 0,o),a,i,s)},n.prototype.oy=function(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,u={};u[o]={},u[o][e]=kc(this.writeFeatureElement,this);var s=A({},r);s.node=t,Fc(s,u,Tc(e,o),n,i)},n.prototype.Kp=function(t,n,i){var r=n[n.length-1].node;return mc(this.namespace,SO[r.nodeName])},n.prototype.Vp=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,u=e.surface,s=e.curve,a=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===u?r="Surface":"LineString"===r&&!0===s?r="Curve":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),mc(this.namespace,r)},n.prototype.writeGeometryNode=function(t,n){n=this.adaptOptions(n);var i=mc(this.namespace,"geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.Qp,surface:this.$p,multiSurface:this.ny,multiCurve:this.ty};return n&&A(r,n),this.writeGeometryElement(i,t,[r]),i},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=mc(this.namespace,"featureMembers");i.setAttributeNS(yc,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.Qp,surface:this.$p,multiSurface:this.ny,multiCurve:this.ty,featureNS:this.featureNS,featureType:this.featureType};return n&&A(r,n),this.oy(i,t,[r]),i},n}(eO);OO.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Oc(OO.prototype.readFlatPos),posList:Oc(OO.prototype.readFlatPosList),coordinates:Oc(MO.prototype.readFlatCoordinates)}},OO.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:OO.prototype.interiorParser,exterior:OO.prototype.exteriorParser}},OO.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Oc(eO.prototype.readPoint),MultiPoint:Oc(eO.prototype.readMultiPoint),LineString:Oc(eO.prototype.readLineString),MultiLineString:Oc(eO.prototype.readMultiLineString),LinearRing:Oc(eO.prototype.readLinearRing),Polygon:Oc(eO.prototype.readPolygon),MultiPolygon:Oc(eO.prototype.readMultiPolygon),Surface:Oc(OO.prototype.readSurface),MultiSurface:Oc(OO.prototype.readMultiSurface),Curve:Oc(OO.prototype.readCurve),MultiCurve:Oc(OO.prototype.readMultiCurve),Envelope:Oc(OO.prototype.readEnvelope)}},OO.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Sc(OO.prototype.curveMemberParser),curveMembers:Sc(OO.prototype.curveMemberParser)}},OO.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Sc(OO.prototype.surfaceMemberParser),surfaceMembers:Sc(OO.prototype.surfaceMemberParser)}},OO.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Sc(eO.prototype.readLineString),Curve:Sc(OO.prototype.readCurve)}},OO.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Sc(eO.prototype.readPolygon),Surface:Sc(OO.prototype.readSurface)}},OO.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Oc(OO.prototype.readPatch)}},OO.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Oc(OO.prototype.readSegment)}},OO.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Sc(OO.prototype.readFlatPosList),upperCorner:Sc(OO.prototype.readFlatPosList)}},OO.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Oc(OO.prototype.readPolygonPatch)}},OO.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Oc(OO.prototype.readLineStringSegment)}},OO.prototype.writeFeatures,OO.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:kc(OO.prototype.writeRing),interior:kc(OO.prototype.writeRing)}},OO.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:kc(wO),upperCorner:kc(wO)}},OO.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:kc(OO.prototype.writeSurfaceOrPolygonMember),polygonMember:kc(OO.prototype.writeSurfaceOrPolygonMember)}},OO.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:kc(OO.prototype.writePointMember)}},OO.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:kc(OO.prototype.writeLineStringOrCurveMember),curveMember:kc(OO.prototype.writeLineStringOrCurveMember)}},OO.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:kc(OO.prototype.writeCurveOrLineString),MultiCurve:kc(OO.prototype.writeMultiCurveOrLineString),Point:kc(OO.prototype.writePoint),MultiPoint:kc(OO.prototype.writeMultiPoint),LineString:kc(OO.prototype.writeCurveOrLineString),MultiLineString:kc(OO.prototype.writeMultiCurveOrLineString),LinearRing:kc(OO.prototype.writeLinearRing),Polygon:kc(OO.prototype.writeSurfaceOrPolygon),MultiPolygon:kc(OO.prototype.writeMultiSurfaceOrPolygon),Surface:kc(OO.prototype.writeSurfaceOrPolygon),MultiSurface:kc(OO.prototype.writeMultiSurfaceOrPolygon),Envelope:kc(OO.prototype.writeEnvelope)}};var jO=OO,EO=jO;EO.prototype.writeFeatures,EO.prototype.writeFeaturesNode;var kO=EO,AO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),TO=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).schemaLocation=r.schemaLocation?r.schemaLocation:i.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",i}return AO(n,t),n}(jO);TO.prototype.namespace="http://www.opengis.net/gml/3.2",TO.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Oc(jO.prototype.readFlatPos),posList:Oc(jO.prototype.readFlatPosList),coordinates:Oc(MO.prototype.readFlatCoordinates)}},TO.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:jO.prototype.interiorParser,exterior:jO.prototype.exteriorParser}},TO.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Oc(eO.prototype.readPoint),MultiPoint:Oc(eO.prototype.readMultiPoint),LineString:Oc(eO.prototype.readLineString),MultiLineString:Oc(eO.prototype.readMultiLineString),LinearRing:Oc(eO.prototype.readLinearRing),Polygon:Oc(eO.prototype.readPolygon),MultiPolygon:Oc(eO.prototype.readMultiPolygon),Surface:Oc(TO.prototype.readSurface),MultiSurface:Oc(jO.prototype.readMultiSurface),Curve:Oc(TO.prototype.readCurve),MultiCurve:Oc(jO.prototype.readMultiCurve),Envelope:Oc(TO.prototype.readEnvelope)}},TO.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Sc(jO.prototype.curveMemberParser),curveMembers:Sc(jO.prototype.curveMemberParser)}},TO.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Sc(jO.prototype.surfaceMemberParser),surfaceMembers:Sc(jO.prototype.surfaceMemberParser)}},TO.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Sc(eO.prototype.readLineString),Curve:Sc(jO.prototype.readCurve)}},TO.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Sc(eO.prototype.readPolygon),Surface:Sc(jO.prototype.readSurface)}},TO.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Oc(jO.prototype.readPatch)}},TO.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Oc(jO.prototype.readSegment)}},TO.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Sc(jO.prototype.readFlatPosList),upperCorner:Sc(jO.prototype.readFlatPosList)}},TO.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Oc(jO.prototype.readPolygonPatch)}},TO.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Oc(jO.prototype.readLineStringSegment)}},TO.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Sc(eO.prototype.pointMemberParser),pointMembers:Sc(eO.prototype.pointMemberParser)}},TO.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Sc(eO.prototype.lineStringMemberParser),lineStringMembers:Sc(eO.prototype.lineStringMemberParser)}},TO.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Sc(eO.prototype.polygonMemberParser),polygonMembers:Sc(eO.prototype.polygonMemberParser)}},TO.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Sc(eO.prototype.readFlatCoordinatesFromNode)}},TO.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Sc(eO.prototype.readLineString)}},TO.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Sc(eO.prototype.readPolygon)}},TO.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Oc(eO.prototype.readFlatLinearRing)}},TO.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:kc(jO.prototype.writeRing),interior:kc(jO.prototype.writeRing)}},TO.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:kc(wO),upperCorner:kc(wO)}},TO.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:kc(jO.prototype.writeSurfaceOrPolygonMember),polygonMember:kc(jO.prototype.writeSurfaceOrPolygonMember)}},TO.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:kc(jO.prototype.writePointMember)}},TO.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:kc(jO.prototype.writeLineStringOrCurveMember),curveMember:kc(jO.prototype.writeLineStringOrCurveMember)}},TO.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:kc(jO.prototype.writeCurveOrLineString),MultiCurve:kc(jO.prototype.writeMultiCurveOrLineString),Point:kc(TO.prototype.writePoint),MultiPoint:kc(jO.prototype.writeMultiPoint),LineString:kc(jO.prototype.writeCurveOrLineString),MultiLineString:kc(jO.prototype.writeMultiCurveOrLineString),LinearRing:kc(jO.prototype.writeLinearRing),Polygon:kc(jO.prototype.writeSurfaceOrPolygon),MultiPolygon:kc(jO.prototype.writeMultiSurfaceOrPolygon),Surface:kc(jO.prototype.writeSurfaceOrPolygon),MultiSurface:kc(jO.prototype.writeMultiSurfaceOrPolygon),Envelope:kc(jO.prototype.writeEnvelope)}};var CO=TO,PO=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),RO=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],IO={rte:aj,trk:fj,wpt:hj},NO=Rc(RO,{rte:Sc(aj),trk:Sc(fj),wpt:Sc(hj)}),zO=Rc(RO,{text:Ec(lO,"linkText"),type:Ec(lO,"linkType")}),FO=Rc(RO,{rte:kc((function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var u=n.getGeometry();if(u.getType()==Pt.LINE_STRING){var s=u_(u,!0,r);o.geometryLayout=s.getLayout(),e.rtept=s.getCoordinates()}var a=i[i.length-1].node,f=HO[a.namespaceURI],h=Pc(e,f);Fc(o,KO,Cc,h,i,f)})),trk:kc((function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var u=n.getGeometry();if(u.getType()==Pt.MULTI_LINE_STRING){var s=u_(u,!0,r);e.trkseg=s.getLineStrings()}var a=i[i.length-1].node,f=ZO[a.namespaceURI],h=Pc(e,f);Fc(o,JO,Cc,h,i,f)})),wpt:kc((function(t,n,i){var r=i[0],e=i[i.length-1];e.properties=n.getProperties();var o=n.getGeometry();if(o.getType()==Pt.POINT){var u=u_(o,!0,r);e.geometryLayout=u.getLayout(),lj(t,u.getCoordinates(),i)}}))}),LO=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=br("EPSG:4326"),i.uy=r.readExtensions,i}return PO(n,t),n.prototype.sy=function(t){t||(t=[]);for(var n=0,i=t.length;n<i;++n){var r=t[n];if(this.uy){var e=r.get("extensionsNode_")||null;this.uy(r,e)}r.set("extensionsNode_",void 0)}},n.prototype.readFeatureFromNode=function(t,n){if(!y(RO,t.namespaceURI))return null;var i=IO[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,n)]);return r?(this.sy([r]),r):null},n.prototype.readFeaturesFromNode=function(t,n){if(!y(RO,t.namespaceURI))return[];if("gpx"==t.localName){var i=Nc([],NO,t,[this.getReadOptions(t,n)]);return i?(this.sy(i),i):[]}return[]},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=mc("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",yc),i.setAttributeNS(yc,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Fc({node:i},FO,rj,t,[n]),i},n}(QS),GO=Rc(RO,{name:Ec(lO),cmt:Ec(lO),desc:Ec(lO),src:Ec(lO),link:uj,number:Ec(hO),extensions:sj,type:Ec(lO),rtept:function(t,n){var i=Nc({},DO,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;ej(e,o,t,i)}}}),DO=Rc(RO,{ele:Ec(aO),time:Ec(sO)}),BO=Rc(RO,{name:Ec(lO),cmt:Ec(lO),desc:Ec(lO),src:Ec(lO),link:uj,number:Ec(hO),type:Ec(lO),extensions:sj,trkseg:function(t,n){var i=n[n.length-1];Ic(UO,t,n);var r=i.flatCoordinates;i.ends.push(r.length)}}),UO=Rc(RO,{trkpt:function(t,n){var i=Nc({},qO,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;ej(e,o,t,i)}}}),qO=Rc(RO,{ele:Ec(aO),time:Ec(sO)}),VO=Rc(RO,{ele:Ec(aO),time:Ec(sO),magvar:Ec(aO),geoidheight:Ec(aO),name:Ec(lO),cmt:Ec(lO),desc:Ec(lO),src:Ec(lO),link:uj,sym:Ec(lO),type:Ec(lO),fix:Ec(lO),sat:Ec(hO),hdop:Ec(aO),vdop:Ec(aO),pdop:Ec(aO),ageofdgpsdata:Ec(aO),dgpsid:Ec(hO),extensions:sj}),WO=["text","type"],XO=Rc(RO,{text:kc(wO),type:kc(wO)}),HO=Rc(RO,["name","cmt","desc","src","link","number","type","rtept"]),KO=Rc(RO,{name:kc(wO),cmt:kc(wO),desc:kc(wO),src:kc(wO),link:kc(cj),number:kc(mO),type:kc(wO),rtept:Ac(kc(lj))}),YO=Rc(RO,["ele","time"]),ZO=Rc(RO,["name","cmt","desc","src","link","number","type","trkseg"]),JO=Rc(RO,{name:kc(wO),cmt:kc(wO),desc:kc(wO),src:kc(wO),link:kc(cj),number:kc(mO),type:kc(wO),trkseg:Ac(kc((function(t,n,i){var r={node:t};r.geometryLayout=n.getLayout(),r.properties={},Fc(r,QO,$O,n.getCoordinates(),i)})))}),$O=Tc("trkpt"),QO=Rc(RO,{trkpt:kc(lj)}),tj=Rc(RO,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),nj=Rc(RO,{ele:kc(yO),time:kc(pO),magvar:kc(yO),geoidheight:kc(yO),name:kc(wO),cmt:kc(wO),desc:kc(wO),src:kc(wO),link:kc(cj),sym:kc(wO),type:kc(wO),fix:kc(wO),sat:kc(mO),hdop:kc(yO),vdop:kc(yO),pdop:kc(yO),ageofdgpsdata:kc(yO),dgpsid:kc(mO)}),ij={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function rj(t,n,i){var r=t.getGeometry();if(r){var e=ij[r.getType()];if(e)return mc(n[n.length-1].node.namespaceURI,e)}}function ej(t,n,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,n.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,n.hasM=!0):t.push(0),t}function oj(t,n,i){var r=kt,e=2;if(t.hasZ&&t.hasM?(r=Ct,e=4):t.hasZ?(r=At,e=3):t.hasM&&(r=Tt,e=3),4!==e){for(var o=0,u=n.length/4;o<u;o++)n[o*e]=n[4*o],n[o*e+1]=n[4*o+1],t.hasZ&&(n[o*e+2]=n[4*o+2]),t.hasM&&(n[o*e+2]=n[4*o+3]);if(n.length=n.length/4*e,i)for(o=0,u=i.length;o<u;o++)i[o]=i[o]/4*e}return r}function uj(t,n){var i=n[n.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),Ic(zO,t,n)}function sj(t,n){n[n.length-1].hy=t}function aj(t,n){var i=n[0],r=Nc({flatCoordinates:[],layoutOptions:{}},GO,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var u=oj(o,e),s=new IM(e,u);u_(s,!1,i);var a=new Et(s);return a.setProperties(r,!0),a}}function fj(t,n){var i=n[0],r=Nc({flatCoordinates:[],ends:[],layoutOptions:{}},BO,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var u=r.layoutOptions;delete r.layoutOptions;var s=oj(u,e,o),a=new zM(e,s,o);u_(a,!1,i);var f=new Et(a);return f.setProperties(r,!0),f}}function hj(t,n){var i=n[0],r=Nc({},VO,t,n);if(r){var e={},o=ej([],e,t,r),u=oj(e,o),s=new Ee(o,u);u_(s,!1,i);var a=new Et(s);return a.setProperties(r,!0),a}}function cj(t,n,i){t.setAttribute("href",n);var r=i[i.length-1].properties,e=[r.linkText,r.linkType];Fc({node:t},XO,Cc,e,i,WO)}function lj(t,n,i){var r=i[i.length-1],e=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),r.geometryLayout){case Ct:0!==n[3]&&(o.time=n[3]);case At:0!==n[2]&&(o.ele=n[2]);break;case Tt:0!==n[2]&&(o.time=n[2])}var u="rtept"==t.nodeName?YO[e]:tj[e],s=Pc(o,u);Fc({node:t,properties:o},nj,Cc,s,i,u)}var vj=LO,dj=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function pj(t){return"string"==typeof t?t:""}var yj=function(t){function n(){return t.call(this)||this}return dj(n,t),n.prototype.getType=function(){return hh},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(pj(t),this.adaptOptions(n))},n.prototype.readFeatureFromText=function(t,n){return r()},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(pj(t),this.adaptOptions(n))},n.prototype.readFeaturesFromText=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(pj(t),this.adaptOptions(n))},n.prototype.readGeometryFromText=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromText(pj(t))},n.prototype.readProjectionFromText=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))},n.prototype.writeFeaturesText=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n))},n.prototype.writeGeometryText=function(t,n){return r()},n}(o_),mj=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wj="barometric",bj="gps",gj="none",xj=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Mj=/^H.([A-Z]{3}).*?:(.*)/,_j=/^HFDTE(\d{2})(\d{2})(\d{2})/,Sj=/\r\n|\r|\n/,Oj=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=br("EPSG:4326"),i.ly=r.altitudeMode?r.altitudeMode:gj,i}return mj(n,t),n.prototype.readFeatureFromText=function(t,n){var i,r,e=this.ly,o=t.split(Sj),u={},s=[],a=2e3,f=0,h=1,c=-1;for(i=0,r=o.length;i<r;++i){var l=o[i],v=void 0;if("B"==l.charAt(0)){if(v=xj.exec(l)){var d=parseInt(v[1],10),p=parseInt(v[2],10),y=parseInt(v[3],10),m=parseInt(v[4],10)+parseInt(v[5],10)/6e4;"S"==v[6]&&(m=-m);var w=parseInt(v[7],10)+parseInt(v[8],10)/6e4;if("W"==v[9]&&(w=-w),s.push(w,m),e!=gj){var b=void 0;b=e==bj?parseInt(v[11],10):e==wj?parseInt(v[12],10):0,s.push(b)}var g=Date.UTC(a,f,h,d,p,y);g<c&&(g=Date.UTC(a,f,h+1,d,p,y)),s.push(g/1e3),c=g}}else"H"==l.charAt(0)&&((v=_j.exec(l))?(h=parseInt(v[1],10),f=parseInt(v[2],10)-1,a=2e3+parseInt(v[3],10)):(v=Mj.exec(l))&&(u[v[1]]=v[2].trim()))}if(0===s.length)return null;var x=new IM(s,e==gj?Tt:Ct),M=new Et(u_(x,!1,n));return M.setProperties(u,!0),M},n.prototype.readFeaturesFromText=function(t,n){var i=this.readFeatureFromText(t,n);return i?[i]:[]},n}(yj);function jj(t){return(jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ej,kj,Aj,Tj,Cj,Pj,Rj=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ij=["http://www.google.com/kml/ext/2.2"],Nj=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],zj={fraction:Cv,pixels:Pv,insetPixels:Pv},Fj=Rc(Nj,{ExtendedData:IE,Region:NE,MultiGeometry:Ec(OE,"geometry"),LineString:Ec(ME,"geometry"),LinearRing:Ec(_E,"geometry"),Point:Ec(jE,"geometry"),Polygon:Ec(kE,"geometry"),Style:Ec(TE),StyleMap:function(t,n){var i=aE.call(this,t,n);if(!i)return;var r=n[n.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:St(!1,38)},address:Ec(lO),description:Ec(lO),name:Ec(lO),open:Ec(oO),phoneNumber:Ec(lO),styleUrl:Ec(oE),visibility:Ec(oO)},Rc(Ij,{MultiTrack:Ec((function(t,n){var i=Nc([],pE,t,n);if(!i)return;return new zM(i)}),"geometry"),Track:Ec(mE,"geometry")})),Lj=Rc(Nj,{ExtendedData:IE,Region:NE,Link:function(t,n){Ic(Gj,t,n)},address:Ec(lO),description:Ec(lO),name:Ec(lO),open:Ec(oO),phoneNumber:Ec(lO),visibility:Ec(oO)}),Gj=Rc(Nj,{href:Ec(eE)}),Dj=Rc(Nj,{LatLonAltBox:function(t,n){var i=Nc({},LE,t,n);if(!i)return;var r=n[n.length-1],e=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=e,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,n){var i=Nc({},GE,t,n);if(!i)return;var r=n[n.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),Bj=Rc(Nj,["Document","Placemark"]),Uj=Rc(Nj,{Document:kc((function(t,n,i){Fc({node:t},VE,WE,n,i,void 0,this)})),Placemark:kc(pk)}),qj=null;var Vj,Wj=null;var Xj,Hj=null;var Kj=null;var Yj=null;var Zj,Jj=null;function $j(t){return 32/Math.min(t[0],t[1])}function Qj(t){return t}var tE=function(t){function n(n){var i=t.call(this)||this,r=n||{};return Jj||(qj=new Tv({color:Ej=[255,255,255,1]}),Pj="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Wj=new qv({anchor:kj=[20,2],anchorOrigin:Rv,anchorXUnits:Aj=Pv,anchorYUnits:Tj=Pv,crossOrigin:"anonymous",rotation:0,scale:$j(Cj=[64,64]),size:Cj,src:Pj}),Vj="NO_IMAGE",Hj=new Vv({color:Ej,width:1}),Xj=new Vv({color:[51,51,51,1],width:2}),Kj=new nd({font:"bold 16px Helvetica",fill:qj,stroke:Xj,scale:.8}),Yj=new $v({fill:qj,image:Wj,text:Kj,stroke:Hj,zIndex:0}),Jj=[Yj]),i.dataProjection=br("EPSG:4326"),i.vy=r.defaultStyle?r.defaultStyle:Jj,i.py=void 0===r.extractStyles||r.extractStyles,i.yy=void 0===r.writeStyles||r.writeStyles,i.my={},i.wy=void 0===r.showPointNames||r.showPointNames,i.Ut=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",i.gy=r.iconUrlFunction?r.iconUrlFunction:Qj,i.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],i}return Rj(n,t),n.prototype.xy=function(t,n){var i=Nc([],Rc(Nj,{Document:_c(this.xy,this),Folder:_c(this.xy,this),Placemark:Sc(this.My,this),Style:this._y.bind(this),StyleMap:this.Sy.bind(this)}),t,n,this);return i||void 0},n.prototype.My=function(t,n){var i=Nc({geometry:null},Fj,t,n,this);if(i){var r=new Et,e=t.getAttribute("id");null!==e&&r.setId(e);var o=n[0],u=i.geometry;if(u&&u_(u,!1,o),r.setGeometry(u),delete i.geometry,this.py){var s=function(t,n,i,r,e){return function(o,u){var s=e,a="",f=[];if(s){var h=o.getGeometry();if(h)if(h instanceof b_)s=(f=h.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.POINT||n===Pt.MULTI_POINT}))).length>0;else{var c=h.getType();s=c===Pt.POINT||c===Pt.MULTI_POINT}}s&&(a=o.get("name"),(s=s&&!!a)&&a.search(/&[^&]+;/)>-1&&(Zj||(Zj=document.createElement("textarea")),Zj.innerHTML=a,a=Zj.value));var l=i;if(t?l=t:n&&(l=nE(n,i,r)),s){var v=function(t,n){var i=[0,0],r="start",e=t.getImage();if(e){var o=e.getSize();if(o&&2==o.length){var u=e.getScaleArray(),s=e.getAnchor();i[0]=u[0]*(o[0]-s[0]),i[1]=u[1]*(o[1]/2-s[1]),r="left"}}var a=t.getText();a?((a=a.clone()).setFont(a.getFont()||Kj.getFont()),a.setScale(a.getScale()||Kj.getScale()),a.setFill(a.getFill()||Kj.getFill()),a.setStroke(a.getStroke()||Xj)):a=Kj.clone();return a.setText(n),a.setOffsetX(i[0]),a.setOffsetY(i[1]),a.setTextAlign(r),new $v({image:e,text:a})}(l[0],a);return f.length>0?(v.setGeometry(new b_(f)),[v,new $v({geometry:l[0].getGeometry(),image:null,fill:l[0].getFill(),stroke:l[0].getStroke(),text:null})].concat(l.slice(1))):v}return l}}(i.Style,i.styleUrl,this.vy,this.my,this.wy);r.setStyle(s)}return delete i.Style,r.setProperties(i,!0),r}},n.prototype._y=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=TE.call(this,t,n);if(r){var e=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.my[e]=r}}},n.prototype.Sy=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=aE.call(this,t,n);if(r){var e,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.my[e]=r}}},n.prototype.readFeatureFromNode=function(t,n){if(!y(Nj,t.namespaceURI))return null;var i=this.My(t,[this.getReadOptions(t,n)]);return i||null},n.prototype.readFeaturesFromNode=function(t,n){if(!y(Nj,t.namespaceURI))return[];var i,r=t.localName;if("Document"==r||"Folder"==r)return(i=this.xy(t,[this.getReadOptions(t,n)]))||[];if("Placemark"==r){var e=this.My(t,[this.getReadOptions(t,n)]);return e?[e]:[]}if("kml"==r){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var u=this.readFeaturesFromNode(o,n);u&&b(i,u)}return i}return[]},n.prototype.readName=function(t){if(t){if("string"==typeof t){var n=Mc(t);return this.readNameFromDocument(n)}return gc(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},n.prototype.readNameFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(n);if(i)return i}},n.prototype.readNameFromNode=function(t){for(var n=t.firstElementChild;n;n=n.nextElementSibling)if(y(Nj,n.namespaceURI)&&"name"==n.localName)return lO(n);for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;if(y(Nj,n.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var r=this.readNameFromNode(n);if(r)return r}}},n.prototype.readNetworkLinks=function(t){var n=[];if("string"==typeof t){var i=Mc(t);b(n,this.readNetworkLinksFromDocument(i))}else gc(t)?b(n,this.readNetworkLinksFromDocument(t)):b(n,this.readNetworkLinksFromNode(t));return n},n.prototype.readNetworkLinksFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&b(n,this.readNetworkLinksFromNode(i));return n},n.prototype.readNetworkLinksFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(y(Nj,i.namespaceURI)&&"NetworkLink"==i.localName){var r=Nc({},Lj,i,[]);n.push(r)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!y(Nj,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||b(n,this.readNetworkLinksFromNode(i))}return n},n.prototype.readRegion=function(t){var n=[];if("string"==typeof t){var i=Mc(t);b(n,this.readRegionFromDocument(i))}else gc(t)?b(n,this.readRegionFromDocument(t)):b(n,this.readRegionFromNode(t));return n},n.prototype.readRegionFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&b(n,this.readRegionFromNode(i));return n},n.prototype.readRegionFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(y(Nj,i.namespaceURI)&&"Region"==i.localName){var r=Nc({},Dj,i,[]);n.push(r)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!y(Nj,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||b(n,this.readRegionFromNode(i))}return n},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=mc(Nj[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",Ij[0]),i.setAttributeNS(r,"xmlns:xsi",yc),i.setAttributeNS(yc,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var e={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var u=Bj[i.namespaceURI],s=Pc(o,u);return Fc(e,Uj,Cc,s,[n],u,this),i},n}(QS);function nE(t,n,i){return Array.isArray(t)?t:"string"==typeof t?nE(i[t],n,i):n}function iE(t){var n=wc(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(n);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function rE(t){var n=wc(t,!1),i=[];n=n.replace(/\s*,\s*/g,",");for(var r,e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;r=e.exec(n);){var o=parseFloat(r[1]),u=parseFloat(r[2]),s=r[3]?parseFloat(r[3]):0;i.push(o,u,s),n=n.substr(r[0].length)}if(""===n)return i}function eE(t){var n=wc(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n}function oE(t){var n=wc(t,!1).trim().replace(/^(?!.*#)/,"#"),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n}function uE(t){return aO(t)}var sE=Rc(Nj,{Pair:function(t,n){var i=Nc({},zE,t,n,this);if(!i)return;var r=i.key;if(r&&"normal"==r){var e=i.styleUrl;e&&(n[n.length-1]=e);var o=i.Style;o&&(n[n.length-1]=o)}}});function aE(t,n){return Nc(void 0,sE,t,n,this)}var fE=Rc(Nj,{Icon:Ec((function(t,n){var i=Nc({},wE,t,n);return i||null})),color:Ec(iE),heading:Ec(aO),hotSpot:Ec((function(t){var n,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return n="insetPixels"!==i?"insetPixels"!==r?Rv:Nv:"insetPixels"!==r?Iv:zv,{x:parseFloat(t.getAttribute("x")),xunits:zj[i],y:parseFloat(t.getAttribute("y")),yunits:zj[r],origin:n}})),scale:Ec(uE)});var hE=Rc(Nj,{color:Ec(iE),scale:Ec(uE)});var cE=Rc(Nj,{color:Ec(iE),width:Ec(aO)});var lE=Rc(Nj,{color:Ec(iE),fill:Ec(oO),outline:Ec(oO)});var vE=Rc(Nj,{coordinates:Oc(rE)});function dE(t,n){return Nc(null,vE,t,n)}var pE=Rc(Ij,{Track:Sc(mE)});var yE=Rc(Nj,{when:function(t,n){var i=n[n.length-1].whens,r=wc(t,!1),e=Date.parse(r);i.push(isNaN(e)?0:e)}},Rc(Ij,{coord:function(t,n){var i=n[n.length-1].coordinates,r=wc(t,!1),e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(e){var o=parseFloat(e[1]),u=parseFloat(e[2]),s=parseFloat(e[3]);i.push([o,u,s])}else i.push([])}}));function mE(t,n){var i=Nc({coordinates:[],whens:[]},yE,t,n);if(i){for(var r=[],e=i.coordinates,o=i.whens,u=0,s=Math.min(e.length,o.length);u<s;++u)3==e[u].length&&r.push(e[u][0],e[u][1],e[u][2],o[u]);return new IM(r,Ct)}}var wE=Rc(Nj,{href:Ec(eE)},Rc(Ij,{x:Ec(aO),y:Ec(aO),w:Ec(aO),h:Ec(aO)}));var bE=Rc(Nj,{coordinates:Oc(rE)});function gE(t,n){return Nc(null,bE,t,n)}var xE=Rc(Nj,{extrude:Ec(oO),tessellate:Ec(oO),altitudeMode:Ec(lO)});function ME(t,n){var i=Nc({},xE,t,n),r=gE(t,n);if(r){var e=new IM(r,At);return e.setProperties(i,!0),e}}function _E(t,n){var i=Nc({},xE,t,n),r=gE(t,n);if(r){var e=new Ye(r,At,[r.length]);return e.setProperties(i,!0),e}}var SE=Rc(Nj,{LineString:Sc(ME),LinearRing:Sc(_E),MultiGeometry:Sc(OE),Point:Sc(jE),Polygon:Sc(kE)});function OE(t,n){var i,r=Nc([],SE,t,n);if(!r)return null;if(0===r.length)return new b_(r);for(var e=!0,o=r[0].getType(),u=1,s=r.length;u<s;++u)if(r[u].getType()!=o){e=!1;break}if(e){var a=void 0,f=void 0;if(o==Pt.POINT){var h=r[0];a=h.getLayout(),f=h.getFlatCoordinates();for(u=1,s=r.length;u<s;++u)b(f,r[u].getFlatCoordinates());CE(i=new AM(f,a),r)}else o==Pt.LINE_STRING?CE(i=new zM(r),r):o==Pt.POLYGON?CE(i=new GM(r),r):o==Pt.GEOMETRY_COLLECTION?i=new b_(r):St(!1,37)}else i=new b_(r);return i}function jE(t,n){var i=Nc({},xE,t,n),r=gE(t,n);if(r){var e=new Ee(r,At);return e.setProperties(i,!0),e}}var EE=Rc(Nj,{innerBoundaryIs:function(t,n){var i=Nc([],DE,t,n);if(i.length>0){var r=n[n.length-1];r.push.apply(r,i)}},outerBoundaryIs:function(t,n){var i=Nc(void 0,BE,t,n);if(i){n[n.length-1][0]=i}}});function kE(t,n){var i=Nc({},xE,t,n),r=Nc([null],EE,t,n);if(r&&r[0]){for(var e=r[0],o=[e.length],u=1,s=r.length;u<s;++u)b(e,r[u]),o.push(e.length);var a=new Ye(e,At,o);return a.setProperties(i,!0),a}}var AE=Rc(Nj,{IconStyle:function(t,n){var i=Nc({},fE,t,n);if(i){var r,e,o,u,s=n[n.length-1],a="Icon"in i?i.Icon:{},f=!("Icon"in i)||Object.keys(a).length>0,h=a.href;h?r=h:f&&(r=Pj);var c,l=Rv,v=i.hotSpot;v?(e=[v.x,v.y],o=v.xunits,u=v.yunits,l=v.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(/pushpin/.test(r)?(e=kj,o=Aj,u=Tj):/arrow-reverse/.test(r)?(e=[54,42],o=Aj,u=Tj):/paddle/.test(r)&&(e=[32,1],o=Aj,u=Tj));var d,p=a.x,y=a.y;void 0!==p&&void 0!==y&&(c=[p,y]);var m,w=a.w,b=a.h;void 0!==w&&void 0!==b&&(d=[w,b]);var g=i.heading;void 0!==g&&(m=pi(g));var x=i.scale,M=i.color;if(f){r==Pj&&(d=Cj);var _=new qv({anchor:e,anchorOrigin:l,anchorXUnits:o,anchorYUnits:u,crossOrigin:this.Ut,offset:c,offsetOrigin:Rv,rotation:m,scale:x,size:d,src:this.gy(r),color:M}),S=_.getScaleArray()[0],O=_.getSize();if(null===O){var j=_.getImageState();if(j===yo||j===mo){_.listenImageChange((function t(){var n=_.getImageState();if(n!==yo&&n!==mo){var i=_.getSize();if(i&&2==i.length){var r=$j(i);_.setScale(S*r)}_.unlistenImageChange(t)}})),j===yo&&_.load()}}else if(2==O.length){var E=$j(O);_.setScale(S*E)}s.imageStyle=_}else s.imageStyle=Vj}},LabelStyle:function(t,n){var i=Nc({},hE,t,n);if(i){var r=n[n.length-1],e=new nd({fill:new Tv({color:"color"in i?i.color:Ej}),scale:i.scale});r.textStyle=e}},LineStyle:function(t,n){var i=Nc({},cE,t,n);if(i){var r=n[n.length-1],e=new Vv({color:"color"in i?i.color:Ej,width:"width"in i?i.width:1});r.strokeStyle=e}},PolyStyle:function(t,n){var i=Nc({},lE,t,n);if(i){var r=n[n.length-1],e=new Tv({color:"color"in i?i.color:Ej});r.fillStyle=e;var o=i.fill;void 0!==o&&(r.fill=o);var u=i.outline;void 0!==u&&(r.outline=u)}}});function TE(t,n){var i=Nc({},AE,t,n,this);if(!i)return null;var r,e="fillStyle"in i?i.fillStyle:qj,o=i.fill;void 0===o||o||(e=null),"imageStyle"in i?i.imageStyle!=Vj&&(r=i.imageStyle):r=Wj;var u="textStyle"in i?i.textStyle:Kj,s="strokeStyle"in i?i.strokeStyle:Hj,a=i.outline;return void 0===a||a?[new $v({fill:e,image:r,stroke:s,text:u,zIndex:void 0})]:[new $v({geometry:function(t){var n=t.getGeometry(),i=n.getType();return i===Pt.GEOMETRY_COLLECTION?new b_(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n!==Pt.POLYGON&&n!==Pt.MULTI_POLYGON}))):i!==Pt.POLYGON&&i!==Pt.MULTI_POLYGON?n:void 0},fill:e,image:r,stroke:s,text:u,zIndex:void 0}),new $v({geometry:function(t){var n=t.getGeometry(),i=n.getType();return i===Pt.GEOMETRY_COLLECTION?new b_(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.POLYGON||n===Pt.MULTI_POLYGON}))):i===Pt.POLYGON||i===Pt.MULTI_POLYGON?n:void 0},fill:e,stroke:null,zIndex:void 0})]}function CE(t,n){var i,r,e,o=n.length,u=new Array(n.length),s=new Array(n.length),a=new Array(n.length);i=!1,r=!1,e=!1;for(var f=0;f<o;++f){var h=n[f];u[f]=h.get("extrude"),s[f]=h.get("tessellate"),a[f]=h.get("altitudeMode"),i=i||void 0!==u[f],r=r||void 0!==s[f],e=e||a[f]}i&&t.set("extrude",u),r&&t.set("tessellate",s),e&&t.set("altitudeMode",a)}var PE=Rc(Nj,{displayName:Ec(lO),value:Ec(lO)});var RE=Rc(Nj,{Data:function(t,n){var i=t.getAttribute("name");Ic(PE,t,n);var r=n[n.length-1];i&&r.displayName?r[i]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,n){Ic(FE,t,n)}});function IE(t,n){Ic(RE,t,n)}function NE(t,n){Ic(Dj,t,n)}var zE=Rc(Nj,{Style:Ec(TE),key:Ec(lO),styleUrl:Ec(oE)});var FE=Rc(Nj,{SimpleData:function(t,n){var i=t.getAttribute("name");if(null!==i){var r=lO(t);n[n.length-1][i]=r}}});var LE=Rc(Nj,{altitudeMode:Ec(lO),minAltitude:Ec(aO),maxAltitude:Ec(aO),north:Ec(aO),south:Ec(aO),east:Ec(aO),west:Ec(aO)});var GE=Rc(Nj,{minLodPixels:Ec(aO),maxLodPixels:Ec(aO),minFadeExtent:Ec(aO),maxFadeExtent:Ec(aO)});var DE=Rc(Nj,{LinearRing:Sc(dE)});var BE=Rc(Nj,{LinearRing:Oc(dE)});function UE(t,n){for(var i=Bo(n),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],e=0;e<4;++e){var o=Math.floor(r[e]).toString(16);r[e]=1==o.length?"0"+o:o}wO(t,r.join(""))}var qE=Rc(Nj,{Data:kc((function(t,n,i){t.setAttribute("name",n.name);var r={node:t},e=n.value;"object"==jj(e)?(null!==e&&e.displayName&&Fc(r,qE,Cc,[e.displayName],i,["displayName"]),null!==e&&e.value&&Fc(r,qE,Cc,[e.value],i,["value"])):Fc(r,qE,Cc,[e],i,["value"])})),value:kc((function(t,n){wO(t,n)})),displayName:kc((function(t,n){dO(t,n)}))});var VE=Rc(Nj,{Placemark:kc(pk)}),WE=function(t,n,i){return mc(n[n.length-1].node.namespaceURI,"Placemark")};var XE=Tc("Data");var HE=Rc(Nj,["href"],Rc(Ij,["x","y","w","h"])),KE=Rc(Nj,{href:kc(wO)},Rc(Ij,{x:kc(yO),y:kc(yO),w:kc(yO),h:kc(yO)})),YE=function(t,n,i){return mc(Ij[0],"gx:"+i)};var ZE=Rc(Nj,["scale","heading","Icon","color","hotSpot"]),JE=Rc(Nj,{Icon:kc((function(t,n,i){var r={node:t},e=i[i.length-1].node,o=HE[e.namespaceURI],u=Pc(n,o);Fc(r,KE,Cc,u,i,o),u=Pc(n,o=HE[Ij[0]]),Fc(r,KE,YE,u,i,o)})),color:kc(UE),heading:kc(yO),hotSpot:kc((function(t,n){t.setAttribute("x",String(n.x)),t.setAttribute("y",String(n.y)),t.setAttribute("xunits",n.xunits),t.setAttribute("yunits",n.yunits)})),scale:kc(Ok)});var $E=Rc(Nj,["color","scale"]),QE=Rc(Nj,{color:kc(UE),scale:kc(Ok)});var tk=Rc(Nj,["color","width"]),nk=Rc(Nj,{color:kc(UE),width:kc(yO)});var ik={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},rk=function(t,n,i){if(t)return mc(n[n.length-1].node.namespaceURI,ik[t.getType()])},ek=Tc("Point"),ok=Tc("LineString"),uk=Tc("LinearRing"),sk=Tc("Polygon"),ak=Rc(Nj,{LineString:kc(wk),Point:kc(wk),Polygon:kc(_k),GeometryCollection:kc(fk)});function fk(t,n,i){var r,e={node:t},o=n.getType(),u=[];o===Pt.GEOMETRY_COLLECTION?(n.getGeometriesArrayRecursive().forEach((function(t){var n=t.getType();n===Pt.MULTI_POINT?u=u.concat(t.getPoints()):n===Pt.MULTI_LINE_STRING?u=u.concat(t.getLineStrings()):n===Pt.MULTI_POLYGON?u=u.concat(t.getPolygons()):n===Pt.POINT||n===Pt.LINE_STRING||n===Pt.POLYGON?u.push(t):St(!1,39)})),r=rk):o===Pt.MULTI_POINT?(u=n.getPoints(),r=ek):o===Pt.MULTI_LINE_STRING?(u=n.getLineStrings(),r=ok):o===Pt.MULTI_POLYGON?(u=n.getPolygons(),r=sk):St(!1,39),Fc(e,ak,r,u,i)}var hk=Rc(Nj,{LinearRing:kc(wk)});function ck(t,n,i){Fc({node:t},hk,uk,[n],i)}var lk=Rc(Nj,{ExtendedData:kc((function(t,n,i){for(var r={node:t},e=n.names,o=n.values,u=e.length,s=0;s<u;s++)Fc(r,qE,XE,[{name:e[s],value:o[s]}],i)})),MultiGeometry:kc(fk),LineString:kc(wk),LinearRing:kc(wk),Point:kc(wk),Polygon:kc(_k),Style:kc((function(t,n,i){var r={node:t},e={};if(n.pointStyles.length){var o=n.pointStyles[0].getText();o&&(e.LabelStyle=o);var u=n.pointStyles[0].getImage();u&&"function"==typeof u.getSrc&&(e.IconStyle=u)}if(n.lineStyles.length){(s=n.lineStyles[0].getStroke())&&(e.LineStyle=s)}if(n.polyStyles.length){var s;(s=n.polyStyles[0].getStroke())&&!e.LineStyle&&(e.LineStyle=s),e.PolyStyle=n.polyStyles[0]}var a=i[i.length-1].node,f=jk[a.namespaceURI],h=Pc(e,f);Fc(r,Ek,Cc,h,i,f)})),address:kc(wO),description:kc(wO),name:kc(wO),open:kc(vO),phoneNumber:kc(wO),styleUrl:kc(wO),visibility:kc(vO)}),vk=Rc(Nj,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),dk=Tc("ExtendedData");function pk(t,n,i){var r={node:t};n.getId()&&t.setAttribute("id",n.getId());var e=n.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[n.getGeometryName()]=1;var u=Object.keys(e||{}).sort().filter((function(t){return!o[t]})),s=n.getStyleFunction();if(s){var a=s(n,0);if(a){var f=Array.isArray(a)?a:[a],h=f;if(n.getGeometry()&&(h=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return r===Pt.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.POINT||n===Pt.MULTI_POINT})).length:r===Pt.POINT||r===Pt.MULTI_POINT}}))),this.yy){var c=f,l=f;n.getGeometry()&&(c=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return r===Pt.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.LINE_STRING||n===Pt.MULTI_LINE_STRING})).length:r===Pt.LINE_STRING||r===Pt.MULTI_LINE_STRING}})),l=f.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return r===Pt.GEOMETRY_COLLECTION?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.POLYGON||n===Pt.MULTI_POLYGON})).length:r===Pt.POLYGON||r===Pt.MULTI_POLYGON}}))),e.Style={pointStyles:h,lineStyles:c,polyStyles:l}}if(h.length&&void 0===e.name){var v=h[0].getText();v&&(e.name=v.getText())}}}var d=i[i.length-1].node,p=vk[d.namespaceURI],y=Pc(e,p);if(Fc(r,lk,Cc,y,i,p),u.length>0){var m=Pc(e,u);Fc(r,lk,dk,[{names:u,values:m}],i)}var w=i[0],b=n.getGeometry();b&&(b=u_(b,!0,w)),Fc(r,lk,rk,[b],i)}var yk=Rc(Nj,["extrude","tessellate","altitudeMode","coordinates"]),mk=Rc(Nj,{extrude:kc(vO),tessellate:kc(vO),altitudeMode:kc(wO),coordinates:kc((function(t,n,i){var r,e=i[i.length-1],o=e.layout,u=e.stride;o==kt||o==Tt?r=2:o==At||o==Ct?r=3:St(!1,34);var s=n.length,a="";if(s>0){a+=n[0];for(var f=1;f<r;++f)a+=","+n[f];for(var h=u;h<s;h+=u){a+=" "+n[h];for(f=1;f<r;++f)a+=","+n[h+f]}}wO(t,a)}))});function wk(t,n,i){var r=n.getFlatCoordinates(),e={node:t};e.layout=n.getLayout(),e.stride=n.getStride();var o=n.getProperties();o.coordinates=r;var u=i[i.length-1].node,s=yk[u.namespaceURI],a=Pc(o,s);Fc(e,mk,Cc,a,i,s)}var bk=Rc(Nj,["color","fill","outline"]),gk=Rc(Nj,{outerBoundaryIs:kc(ck),innerBoundaryIs:kc(ck)}),xk=Tc("innerBoundaryIs"),Mk=Tc("outerBoundaryIs");function _k(t,n,i){var r=n.getLinearRings(),e=r.shift(),o={node:t};Fc(o,gk,xk,r,i),Fc(o,gk,Mk,[e],i)}var Sk=Rc(Nj,{color:kc(UE),fill:kc(vO),outline:kc(vO)});function Ok(t,n){yO(t,Math.round(1e6*n)/1e6)}var jk=Rc(Nj,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Ek=Rc(Nj,{IconStyle:kc((function(t,n,i){var r={node:t},e={},o=n.getSrc(),u=n.getSize(),s=n.getImageSize(),a={href:o};if(u){a.w=u[0],a.h=u[1];var f=n.getAnchor(),h=n.getOrigin();if(h&&s&&0!==h[0]&&h[1]!==u[1]&&(a.x=h[0],a.y=s[1]-(h[1]+u[1])),f&&(f[0]!==u[0]/2||f[1]!==u[1]/2)){var c={x:f[0],xunits:Pv,y:u[1]-f[1],yunits:Pv};e.hotSpot=c}}e.Icon=a;var l=n.getScaleArray()[0],v=u;null===v&&(v=Cj),2==v.length&&(l/=$j(v)),1!==l&&(e.scale=l);var d=n.getRotation();0!==d&&(e.heading=d);var p=n.getColor();p&&(e.color=p);var y=i[i.length-1].node,m=ZE[y.namespaceURI],w=Pc(e,m);Fc(r,JE,Cc,w,i,m)})),LabelStyle:kc((function(t,n,i){var r={node:t},e={},o=n.getFill();o&&(e.color=o.getColor());var u=n.getScale();u&&1!==u&&(e.scale=u);var s=i[i.length-1].node,a=$E[s.namespaceURI],f=Pc(e,a);Fc(r,QE,Cc,f,i,a)})),LineStyle:kc((function(t,n,i){var r={node:t},e={color:n.getColor(),width:Number(n.getWidth())||1},o=i[i.length-1].node,u=tk[o.namespaceURI],s=Pc(e,u);Fc(r,nk,Cc,s,i,u)})),PolyStyle:kc((function(t,n,i){var r={node:t},e=n.getFill(),o=n.getStroke(),u={color:e?e.getColor():void 0,fill:!!e&&void 0,outline:!!o&&void 0},s=i[i.length-1].node,a=bk[s.namespaceURI],f=Pc(u,a);Fc(r,Sk,Cc,f,i,a)}))});var kk=tE,Ak=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tk=[null],Ck=Rc(Tk,{nd:function(t,n){n[n.length-1].ndrefs.push(t.getAttribute("ref"))},tag:Nk}),Pk=Rc(Tk,{node:function(t,n){var i=n[0],r=n[n.length-1],e=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[e]=o;var u=Nc({tags:{}},Ik,t,n);if(!P(u.tags)){var s=new Ee(o);u_(s,!1,i);var a=new Et(s);void 0!==e&&a.setId(e),a.setProperties(u.tags,!0),r.features.push(a)}},way:function(t,n){var i=Nc({id:t.getAttribute("id"),ndrefs:[],tags:{}},Ck,t,n);n[n.length-1].ways.push(i)}}),Rk=function(t){function n(){var n=t.call(this)||this;return n.dataProjection=br("EPSG:4326"),n}return Ak(n,t),n.prototype.readFeaturesFromNode=function(t,n){var i=this.getReadOptions(t,n);if("osm"==t.localName){for(var r=Nc({nodes:{},ways:[],features:[]},Pk,t,[i]),e=0;e<r.ways.length;e++){for(var o=r.ways[e],u=[],s=0,a=o.ndrefs.length;s<a;s++){b(u,r.nodes[o.ndrefs[s]])}var f=void 0;u_(f=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ye(u,kt,[u.length]):new IM(u,kt),!1,i);var h=new Et(f);void 0!==o.id&&h.setId(o.id),h.setProperties(o.tags,!0),r.features.push(h)}if(r.features)return r.features}return[]},n}(QS),Ik=Rc(Tk,{tag:Nk});function Nk(t,n){n[n.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var zk=Rk,Fk=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=Mc(t);return this.readFromDocument(n)}return gc(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null},t.prototype.readFromNode=function(t){},t}();function Lk(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var Gk=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Dk=[null,"http://www.opengis.net/ows/1.1"],Bk=Rc(Dk,{ServiceIdentification:Ec((function(t,n){return Nc({},tA,t,n)})),ServiceProvider:Ec((function(t,n){return Nc({},nA,t,n)})),OperationsMetadata:Ec((function(t,n){return Nc({},Zk,t,n)}))}),Uk=function(t){function n(){return t.call(this)||this}return Gk(n,t),n.prototype.readFromNode=function(t){var n=Nc({},Bk,t,[]);return n||null},n}(Fk),qk=Rc(Dk,{DeliveryPoint:Ec(lO),City:Ec(lO),AdministrativeArea:Ec(lO),PostalCode:Ec(lO),Country:Ec(lO),ElectronicMailAddress:Ec(lO)}),Vk=Rc(Dk,{Value:jc((function(t,n){return lO(t)}))}),Wk=Rc(Dk,{AllowedValues:Ec((function(t,n){return Nc({},Vk,t,n)}))}),Xk=Rc(Dk,{Phone:Ec((function(t,n){return Nc({},Jk,t,n)})),Address:Ec((function(t,n){return Nc({},qk,t,n)}))}),Hk=Rc(Dk,{HTTP:Ec((function(t,n){return Nc({},Kk,t,n)}))}),Kk=Rc(Dk,{Get:jc((function(t,n){var i=Lk(t);if(!i)return;return Nc({href:i},$k,t,n)})),Post:void 0}),Yk=Rc(Dk,{DCP:Ec((function(t,n){return Nc({},Hk,t,n)}))}),Zk=Rc(Dk,{Operation:function(t,n){var i=t.getAttribute("name"),r=Nc({},Yk,t,n);if(!r)return;n[n.length-1][i]=r}}),Jk=Rc(Dk,{Voice:Ec(lO),Facsimile:Ec(lO)}),$k=Rc(Dk,{Constraint:jc((function(t,n){var i=t.getAttribute("name");if(!i)return;return Nc({name:i},Wk,t,n)}))}),Qk=Rc(Dk,{IndividualName:Ec(lO),PositionName:Ec(lO),ContactInfo:Ec((function(t,n){return Nc({},Xk,t,n)}))}),tA=Rc(Dk,{Abstract:Ec(lO),AccessConstraints:Ec(lO),Fees:Ec(lO),Title:Ec(lO),ServiceTypeVersion:Ec(lO),ServiceType:Ec(lO)}),nA=Rc(Dk,{ProviderName:Ec(lO),ProviderSite:Ec(Lk),ServiceContact:Ec((function(t,n){return Nc({},Qk,t,n)}))});var iA=Uk,rA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function eA(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var u=0,s=t.length;u<s;)for(r=0;r<n;++r,++u){var a=t[u],f=a-o[r];o[r]=a,t[u]=f}return uA(t,e)}function oA(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var u=sA(t,e),s=0,a=u.length;s<a;)for(r=0;r<n;++r,++s)o[r]+=u[s],u[s]=o[r];return u}function uA(t,n){for(var i=n||1e5,r=0,e=t.length;r<e;++r)t[r]=Math.round(t[r]*i);return aA(t)}function sA(t,n){for(var i=n||1e5,r=fA(t),e=0,o=r.length;e<o;++e)r[e]/=i;return r}function aA(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];t[n]=r<0?~(r<<1):r<<1}return hA(t)}function fA(t){for(var n=cA(t),i=0,r=n.length;i<r;++i){var e=n[i];n[i]=1&e?~(e>>1):e>>1}return n}function hA(t){for(var n="",i=0,r=t.length;i<r;++i)n+=lA(t[i]);return n}function cA(t){for(var n=[],i=0,r=0,e=0,o=t.length;e<o;++e){var u=t.charCodeAt(e)-63;i|=(31&u)<<r,u<32?(n.push(i),i=0,r=0):r+=5}return n}function lA(t){for(var n,i="";t>=32;)n=63+(32|31&t),i+=String.fromCharCode(n),t>>=5;return n=t+63,i+=String.fromCharCode(n)}var vA=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=br("EPSG:4326"),i.Oy=r.factor?r.factor:1e5,i.Dv=r.geometryLayout?r.geometryLayout:kt,i}return rA(n,t),n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n);return new Et(i)},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)]},n.prototype.readGeometryFromText=function(t,n){var i=Jr(this.Dv),r=oA(t,i,this.Oy);qS(r,0,r.length,i,r);var e=we(r,0,r.length,i);return u_(new IM(e,this.Dv),!1,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):(St(!1,40),"")},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n)},n.prototype.writeGeometryText=function(t,n){var i=(t=u_(t,!0,this.adaptOptions(n))).getFlatCoordinates(),r=t.getStride();return qS(i,0,i.length,r,i),eA(i,r,this.Oy)},n}(yj),dA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pA=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.nv=r.layerName,i.qf=r.layers?r.layers:null,i.dataProjection=br(r.dataProjection?r.dataProjection:"EPSG:4326"),i}return dA(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var i=t,r=void 0,e=null,o=null;i.transform&&(e=(r=i.transform).scale,o=r.translate);var u=i.arcs;r&&function(t,n,i){for(var r=0,e=t.length;r<e;++r)gA(t[r],n,i)}(u,e,o);var s=[],a=i.objects,f=this.nv,h=void 0;for(var c in a)this.qf&&-1==this.qf.indexOf(c)||("GeometryCollection"===a[c].type?(h=a[c],s.push.apply(s,wA(h,u,e,o,f,c,n))):(h=a[c],s.push(bA(h,u,e,o,f,c,n))));return s}return[]},n.prototype.readProjectionFromObject=function(t){return this.dataProjection},n}(M_),yA={Point:function(t,n,i){var r=t.coordinates;n&&i&&xA(r,n,i);return new Ee(r)},LineString:function(t,n){var i=mA(t.arcs,n);return new IM(i)},Polygon:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r)i[r]=mA(t.arcs[r],n);return new Ye(i)},MultiPoint:function(t,n,i){var r=t.coordinates;if(n&&i)for(var e=0,o=r.length;e<o;++e)xA(r[e],n,i);return new AM(r)},MultiLineString:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r)i[r]=mA(t.arcs[r],n);return new zM(i)},MultiPolygon:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r){for(var o=t.arcs[r],u=[],s=0,a=o.length;s<a;++s)u[s]=mA(o[s],n);i[r]=u}return new GM(i)}};function mA(t,n){for(var i,r=[],e=0,o=t.length;e<o;++e)if(i=t[e],e>0&&r.pop(),i>=0)for(var u=0,s=(a=n[i]).length;u<s;++u)r.push(a[u].slice(0));else{var a;for(u=(a=n[~i]).length-1;u>=0;--u)r.push(a[u].slice(0))}return r}function wA(t,n,i,r,e,o,u){for(var s=t.geometries,a=[],f=0,h=s.length;f<h;++f)a[f]=bA(s[f],n,i,r,e,o,u);return a}function bA(t,n,i,r,e,o,u){var s=null,a=t.type;if(a){var f=yA[a];s=u_(s="Point"===a||"MultiPoint"===a?f(t,i,r):f(t,n),!1,u)}var h=new Et({geometry:s});void 0!==t.id&&h.setId(t.id);var c=t.properties;return e&&(c||(c={}),c[e]=o),c&&h.setProperties(c,!0),h}function gA(t,n,i){for(var r=0,e=0,o=0,u=t.length;o<u;++o){var s=t[o];r+=s[0],e+=s[1],s[0]=r,s[1]=e,xA(s,n,i)}}function xA(t,n,i){t[0]=t[0]*n[0]+i[0],t[1]=t[1]*n[1]+i[1]}var MA=pA,_A=function(){function t(t){this.jy=t}return t.prototype.getTagName=function(){return this.jy},t}(),SA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),OA=function(t){function n(n,i){var r=t.call(this,n)||this;return r.conditions=i,St(r.conditions.length>=2,57),r}return SA(n,t),n}(_A),jA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),EA=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return jA(n,t),n}(OA),kA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),AA=function(t){function n(n,i,r){var e=t.call(this,"BBOX")||this;if(e.geometryName=n,e.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return e.srsName=r,e}return kA(n,t),n}(_A),TA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),CA=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.geometryName=i||"the_geom",o.geometry=r,o.srsName=e,o}return TA(n,t),n}(_A),PA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),RA=function(t){function n(n,i,r){return t.call(this,"Contains",n,i,r)||this}return PA(n,t),n}(CA),IA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),NA=function(t){function n(n,i,r,e,o){var u=t.call(this,"DWithin",n,i,o)||this;return u.distance=r,u.unit=e,u}return IA(n,t),n}(CA),zA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),FA=function(t){function n(n,i,r){return t.call(this,"Disjoint",n,i,r)||this}return zA(n,t),n}(CA),LA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),GA=function(t){function n(n,i){var r=t.call(this,n)||this;return r.propertyName=i,r}return LA(n,t),n}(_A),DA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),BA=function(t){function n(n,i,r){var e=t.call(this,"During",n)||this;return e.begin=i,e.end=r,e}return DA(n,t),n}(GA),UA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qA=function(t){function n(n,i,r,e){var o=t.call(this,n,i)||this;return o.expression=r,o.matchCase=e,o}return UA(n,t),n}(GA),VA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),WA=function(t){function n(n,i,r){return t.call(this,"PropertyIsEqualTo",n,i,r)||this}return VA(n,t),n}(qA),XA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),HA=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThan",n,i)||this}return XA(n,t),n}(qA),KA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),YA=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThanOrEqualTo",n,i)||this}return KA(n,t),n}(qA),ZA=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),JA=function(t){function n(n,i,r){return t.call(this,"Intersects",n,i,r)||this}return ZA(n,t),n}(CA),$A=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),QA=function(t){function n(n,i,r){var e=t.call(this,"PropertyIsBetween",n)||this;return e.lowerBoundary=i,e.upperBoundary=r,e}return $A(n,t),n}(GA),tT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nT=function(t){function n(n,i,r,e,o,u){var s=t.call(this,"PropertyIsLike",n)||this;return s.pattern=i,s.wildCard=void 0!==r?r:"*",s.singleChar=void 0!==e?e:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=u,s}return tT(n,t),n}(GA),iT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rT=function(t){function n(n){return t.call(this,"PropertyIsNull",n)||this}return iT(n,t),n}(GA),eT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oT=function(t){function n(n,i){return t.call(this,"PropertyIsLessThan",n,i)||this}return eT(n,t),n}(qA),uT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sT=function(t){function n(n,i){return t.call(this,"PropertyIsLessThanOrEqualTo",n,i)||this}return uT(n,t),n}(qA),aT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fT=function(t){function n(n){var i=t.call(this,"Not")||this;return i.condition=n,i}return aT(n,t),n}(_A),hT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),cT=function(t){function n(n,i,r){return t.call(this,"PropertyIsNotEqualTo",n,i,r)||this}return hT(n,t),n}(qA),lT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vT=function(t){function n(n){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return lT(n,t),n}(OA),dT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pT=function(t){function n(n){var i=t.call(this,"ResourceId")||this;return i.rid=n,i}return dT(n,t),n}(_A),yT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mT=function(t){function n(n,i,r){return t.call(this,"Within",n,i,r)||this}return yT(n,t),n}(CA);function wT(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(EA,n))}function bT(t,n,i){return new AA(t,n,i)}var gT=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xT={"http://www.opengis.net/gml":{boundedBy:Ec(eO.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Sc(eO.prototype.readFeaturesInternal)}},MT={"http://www.opengis.net/wfs":{totalInserted:Ec(hO),totalUpdated:Ec(hO),totalDeleted:Ec(hO)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ec(hO),totalUpdated:Ec(hO),totalDeleted:Ec(hO)}},_T={"http://www.opengis.net/wfs":{TransactionSummary:Ec(NT,"transactionSummary"),InsertResults:Ec(GT,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ec(NT,"transactionSummary"),InsertResults:Ec(GT,"insertIds")}},ST={"http://www.opengis.net/wfs":{PropertyName:kc(wO)},"http://www.opengis.net/wfs/2.0":{PropertyName:kc(wO)}},OT={"http://www.opengis.net/wfs":{Insert:kc(DT),Update:kc(VT),Delete:kc(qT),Property:kc(WT),Native:kc(XT)},"http://www.opengis.net/wfs/2.0":{Insert:kc(DT),Update:kc(VT),Delete:kc(qT),Property:kc(WT),Native:kc(XT)}},jT="feature",ET="http://www.w3.org/2000/xmlns/",kT={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},AT={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},TT={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},CT={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},PT={"2.0.0":CO,"1.1.0":jO,"1.0.0":MO},RT=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.sh=r.version?r.version:"1.1.0",i.Ey=r.featureType,i.ky=r.featureNS,i.Ay=r.gmlFormat?r.gmlFormat:new PT[i.sh],i.Ty=r.schemaLocation?r.schemaLocation:CT[i.sh],i}return gT(n,t),n.prototype.getFeatureType=function(){return this.Ey},n.prototype.setFeatureType=function(t){this.Ey=t},n.prototype.readFeaturesFromNode=function(t,n){var i={node:t};A(i,{featureType:this.Ey,featureNS:this.ky}),A(i,this.getReadOptions(t,n||{}));var r=[i],e=Nc([],"2.0.0"===this.sh?xT:this.Ay.FEATURE_COLLECTION_PARSERS,t,r,this.Ay);return e||(e=[]),e},n.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var n=Mc(t);return this.readTransactionResponseFromDocument(n)}return gc(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},n.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var n=Mc(t);return this.readFeatureCollectionMetadataFromDocument(n)}return gc(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},n.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)},n.prototype.readFeatureCollectionMetadataFromNode=function(t){var n={},i=cO(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=i,Nc(n,xT,t,[],this.Ay)},n.prototype.readTransactionResponseFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)},n.prototype.readTransactionResponseFromNode=function(t){return Nc({},_T,t,[])},n.prototype.writeGetFeature=function(t){var n=this,i=mc(AT[this.sh],"GetFeature");i.setAttribute("service","WFS"),i.setAttribute("version",this.sh),t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams",t.viewParams),i.setAttributeNS(yc,"xsi:schemaLocation",this.Ty);var r={node:i};if(A(r,{version:this.sh,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.ky,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),St(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var e=t.filter;t.bbox&&(St(t.geometryName,12),e=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,e)),A(r,{geometryName:t.geometryName,filter:e}),hC(i,t.featureTypes,[r])}else t.featureTypes.forEach((function(e){var o=n.combineBboxAndFilter(e.geometryName,e.bbox,t.srsName,t.filter);A(r,{geometryName:e.geometryName,filter:o}),hC(i,[e.name],[r])}));return i},n.prototype.combineBboxAndFilter=function(t,n,i,r){var e=bT(t,n,i);return r?wT(r,e):e},n.prototype.writeTransaction=function(t,n,i,r){var e,o=[],u=r.version?r.version:this.sh,s=mc(AT[u],"Transaction");s.setAttribute("service","WFS"),s.setAttribute("version",u),r&&(e=r.gmlOptions?r.gmlOptions:{},r.handle&&s.setAttribute("handle",r.handle)),s.setAttributeNS(yc,"xsi:schemaLocation",CT[u]);var a=function(t,n,i,r){var e,o=r.featurePrefix?r.featurePrefix:jT;"1.0.0"===i?e=2:"1.1.0"===i?e=3:"2.0.0"===i&&(e=3.2);return A({node:t},{version:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:o,gmlVersion:e,hasZ:r.hasZ,srsName:r.srsName},n)}(s,e,u,r);return t&&IT("Insert",t,o,a),n&&IT("Update",n,o,a),i&&IT("Delete",i,o,a),r.nativeElements&&IT("Native",r.nativeElements,o,a),s},n.prototype.readProjectionFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null},n.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var n=(t=t.firstElementChild.firstElementChild).firstElementChild;n;n=n.nextElementSibling)if(0!==n.childNodes.length&&(1!==n.childNodes.length||3!==n.firstChild.nodeType)){var i=[{}];return this.Ay.readGeometryElement(n,i),br(i.pop().srsName)}return null},n}(QS);function IT(t,n,i,r){Fc(r,OT,Tc(t),n,i)}function NT(t,n){return Nc({},MT,t,n)}var zT={"http://www.opengis.net/ogc":{FeatureId:Sc((function(t,n){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:Sc((function(t,n){return t.getAttribute("fid")}))}};function FT(t,n){Ic(zT,t,n)}var LT={"http://www.opengis.net/wfs":{Feature:FT},"http://www.opengis.net/wfs/2.0":{Feature:FT}};function GT(t,n){return Nc([],LT,t,n)}function DT(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,u=r.gmlVersion,s=mc(o,e);t.appendChild(s),2===u?MO.prototype.writeFeatureElement(s,n,i):3===u?jO.prototype.writeFeatureElement(s,n,i):CO.prototype.writeFeatureElement(s,n,i)}function BT(t,n,i){var r=i[i.length-1].version,e=kT[r],o=mc(e,"Filter"),u=mc(e,"FeatureId");o.appendChild(u),u.setAttribute("fid",n),t.appendChild(o)}function UT(t,n){var i=(t=t||jT)+":";return 0===n.indexOf(i)?n:i+n}function qT(t,n,i){var r=i[i.length-1];St(void 0!==n.getId(),26);var e=r.featureType,o=r.featurePrefix,u=r.featureNS,s=UT(o,e);t.setAttribute("typeName",s),t.setAttributeNS(ET,"xmlns:"+o,u);var a=n.getId();void 0!==a&&BT(t,a,i)}function VT(t,n,i){var r=i[i.length-1];St(void 0!==n.getId(),27);var e=r.version,o=r.featureType,u=r.featurePrefix,s=r.featureNS,a=UT(u,o),f=n.getGeometryName();t.setAttribute("typeName",a),t.setAttributeNS(ET,"xmlns:"+u,s);var h=n.getId();if(void 0!==h){for(var c=n.getKeys(),l=[],v=0,d=c.length;v<d;v++){var p=n.get(c[v]);if(void 0!==p){var y=c[v];p&&"function"==typeof p.getSimplifiedGeometry&&(y=f),l.push({name:y,value:p})}}Fc({version:e,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},OT,Tc("Property"),l,i),BT(t,h,i)}}function WT(t,n,i){var r=i[i.length-1],e=r.version,o=AT[e],u=mc(o,"Name"),s=r.gmlVersion;if(t.appendChild(u),wO(u,n.name),void 0!==n.value&&null!==n.value){var a=mc(o,"Value");t.appendChild(a),n.value&&"function"==typeof n.value.getSimplifiedGeometry?2===s?MO.prototype.writeGeometryElement(a,n.value,i):3===s?jO.prototype.writeGeometryElement(a,n.value,i):CO.prototype.writeGeometryElement(a,n.value,i):wO(a,n.value)}}function XT(t,n,i){n.vendorId&&t.setAttribute("vendorId",n.vendorId),void 0!==n.safeToIgnore&&t.setAttribute("safeToIgnore",String(n.safeToIgnore)),void 0!==n.value&&wO(t,n.value)}var HT={"http://www.opengis.net/wfs":{Query:kc(KT)},"http://www.opengis.net/wfs/2.0":{Query:kc(KT)},"http://www.opengis.net/ogc":{During:kc(QT),And:kc(tC),Or:kc(tC),Not:kc(nC),BBOX:kc(ZT),Contains:kc(JT),Intersects:kc(JT),Within:kc(JT),DWithin:kc($T),PropertyIsEqualTo:kc(iC),PropertyIsNotEqualTo:kc(iC),PropertyIsLessThan:kc(iC),PropertyIsLessThanOrEqualTo:kc(iC),PropertyIsGreaterThan:kc(iC),PropertyIsGreaterThanOrEqualTo:kc(iC),PropertyIsNull:kc(rC),PropertyIsBetween:kc(eC),PropertyIsLike:kc(oC)},"http://www.opengis.net/fes/2.0":{During:kc(QT),And:kc(tC),Or:kc(tC),Not:kc(nC),BBOX:kc(ZT),Contains:kc(JT),Disjoint:kc(JT),Intersects:kc(JT),ResourceId:kc((function(t,n,i){t.setAttribute("rid",n.rid)})),Within:kc(JT),DWithin:kc($T),PropertyIsEqualTo:kc(iC),PropertyIsNotEqualTo:kc(iC),PropertyIsLessThan:kc(iC),PropertyIsLessThanOrEqualTo:kc(iC),PropertyIsGreaterThan:kc(iC),PropertyIsGreaterThanOrEqualTo:kc(iC),PropertyIsNull:kc(rC),PropertyIsBetween:kc(eC),PropertyIsLike:kc(oC)}};function KT(t,n,i){var r,e,o=i[i.length-1],u=o.version,s=o.featurePrefix,a=o.featureNS,f=o.propertyNames,h=o.srsName;r=s?UT(s,n):n,e="2.0.0"===u?"typeNames":"typeName",t.setAttribute(e,r),h&&t.setAttribute("srsName",h),a&&t.setAttributeNS(ET,"xmlns:"+s,a);var c=A({},o);c.node=t,Fc(c,ST,Tc("PropertyName"),f,i);var l=o.filter;if(l){var v=mc(cC(u),"Filter");t.appendChild(v),YT(v,l,i)}}function YT(t,n,i){var r=i[i.length-1],e={node:t};A(e,{context:r}),Fc(e,HT,Tc(n.getTagName()),[n],i)}function ZT(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=PT[e];aC(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.extent,i)}function JT(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=PT[e];aC(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.geometry,i)}function $T(t,n,i){var r=i[i.length-1].context.version;JT(t,n,i);var e=mc(cC(r),"Distance");wO(e,n.distance.toString()),"2.0.0"===r?e.setAttribute("uom",n.unit):e.setAttribute("units",n.unit),t.appendChild(e)}function QT(t,n,i){var r=i[i.length-1].context.version;uC(TT[r],"ValueReference",t,n.propertyName);var e=mc(nO,"TimePeriod");t.appendChild(e);var o=mc(nO,"begin");e.appendChild(o),fC(o,n.begin);var u=mc(nO,"end");e.appendChild(u),fC(u,n.end)}function tC(t,n,i){var r=i[i.length-1].context,e={node:t};A(e,{context:r});for(var o=n.conditions,u=0,s=o.length;u<s;++u){var a=o[u];Fc(e,HT,Tc(a.getTagName()),[a],i)}}function nC(t,n,i){var r=i[i.length-1].context,e={node:t};A(e,{context:r});var o=n.condition;Fc(e,HT,Tc(o.getTagName()),[o],i)}function iC(t,n,i){var r=i[i.length-1].context.version;void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),aC(r,t,n.propertyName),sC(r,t,""+n.expression)}function rC(t,n,i){aC(i[i.length-1].context.version,t,n.propertyName)}function eC(t,n,i){var r=i[i.length-1].context.version,e=cC(r);aC(r,t,n.propertyName);var o=mc(e,"LowerBoundary");t.appendChild(o),sC(r,o,""+n.lowerBoundary);var u=mc(e,"UpperBoundary");t.appendChild(u),sC(r,u,""+n.upperBoundary)}function oC(t,n,i){var r=i[i.length-1].context.version;t.setAttribute("wildCard",n.wildCard),t.setAttribute("singleChar",n.singleChar),t.setAttribute("escapeChar",n.escapeChar),void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),aC(r,t,n.propertyName),sC(r,t,""+n.pattern)}function uC(t,n,i,r){var e=mc(t,n);wO(e,r),i.appendChild(e)}function sC(t,n,i){uC(cC(t),"Literal",n,i)}function aC(t,n,i){"2.0.0"===t?uC(TT[t],"ValueReference",n,i):uC(kT[t],"PropertyName",n,i)}function fC(t,n){var i=mc(nO,"TimeInstant");t.appendChild(i);var r=mc(nO,"timePosition");i.appendChild(r),wO(r,n)}function hC(t,n,i){var r=i[i.length-1],e=A({},r);e.node=t,Fc(e,HT,Tc("Query"),n,i)}function cC(t){return"2.0.0"===t?TT[t]:kT[t]}var lC=RT,vC=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dC=1,pC=2,yC=3,mC=4,wC=5,bC=6,gC=7,xC=15,MC=16,_C=17,SC=function(){function t(t){this.Cy=t,this.Py=0,this.Ry=!1,this.Iy=!1,this.Ny=!1,this.zy=!1,this.Fy=null,this.Ly=kt}return t.prototype.readUint8=function(){return this.Cy.getUint8(this.Py++)},t.prototype.readUint32=function(t){return this.Cy.getUint32((this.Py+=4)-4,void 0!==t?t:this.Iy)},t.prototype.readDouble=function(t){return this.Cy.getFloat64((this.Py+=8)-8,void 0!==t?t:this.Iy)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.Ny&&t.push(this.readDouble()),this.zy&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readPoint());return n},t.prototype.readPolygon=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readLineString());return n},t.prototype.readWkbHeader=function(t){var n=this.readUint8()>0,i=this.readUint32(n),r=Math.floor((268435455&i)/1e3),e=Boolean(2147483648&i)||1===r||3===r,o=Boolean(1073741824&i)||2===r||3===r,u=Boolean(536870912&i),s=(268435455&i)%1e3,a=["XY",e?"Z":"",o?"M":""].join(""),f=u?this.readUint32(n):null;if(void 0!==t&&t!==s)throw new Error("Unexpected WKB geometry type "+s);if(this.Ry){if(this.Iy!==n)throw new Error("Inconsistent endian");if(this.Ly!==a)throw new Error("Inconsistent geometry layout");if(f&&this.Fy!==f)throw new Error("Inconsistent coordinate system (SRID)")}else this.Iy=n,this.Ny=e,this.zy=o,this.Ly=a,this.Fy=f,this.Ry=!0;return s},t.prototype.readWkbPayload=function(t){switch(t){case dC:return this.readPoint();case pC:return this.readLineString();case yC:case _C:return this.readPolygon();case mC:return this.readMultiPoint();case wC:return this.readMultiLineString();case bC:case xC:case MC:return this.readMultiPolygon();case gC:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,n){for(var i=this.readUint32(),r=[],e=0;e<i;e++){var o=t.call(this,n);o&&r.push(o)}return r},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,dC)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,pC)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,yC)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case dC:return new Ee(n,this.Ly);case pC:return new IM(n,this.Ly);case yC:case _C:return new Ye(n,this.Ly);case mC:return new AM(n,this.Ly);case wC:return new zM(n,this.Ly);case bC:case xC:case MC:return new GM(n,this.Ly);case gC:return new b_(n);default:return null}},t.prototype.getSrid=function(){return this.Fy},t}(),OC=function(){function t(t){t=t||{},this.Ly=t.layout,this.Iy=!1!==t.littleEndian,this.Gy=!1!==t.ewkb,this.Dy=[],this.By=A({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.Dy.push([1,t])},t.prototype.writeUint32=function(t){this.Dy.push([4,t])},t.prototype.writeDouble=function(t){this.Dy.push([8,t])},t.prototype.writePoint=function(t,n){for(var i=A.apply(null,n.split("").map((function(n,i){var r;return(r={})[n]=t[i],r}))),r=0,e=this.Ly;r<e.length;r++){var o=e[r];this.writeDouble(o in i?i[o]:this.By[o])}},t.prototype.writeLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writePoint(t[i],n)},t.prototype.writePolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeLineString(t[i],n)},t.prototype.writeWkbHeader=function(t,n){t%=1e3,this.Ly.indexOf("Z")>=0&&(t+=this.Gy?2147483648:1e3),this.Ly.indexOf("M")>=0&&(t+=this.Gy?1073741824:2e3),this.Gy&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.Iy?1:0),this.writeUint32(t),this.Gy&&Number.isInteger(n)&&this.writeUint32(n)},t.prototype.writeMultiPoint=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(1),this.writePoint(t[i],n)},t.prototype.writeMultiLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(2),this.writeLineString(t[i],n)},t.prototype.writeMultiPolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(3),this.writePolygon(t[i],n)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeGeometry(t[n])},t.prototype.findMinimumLayout=function(t,n){void 0===n&&(n=Ct);var i,r;if(t instanceof Qr)return(i=t.getLayout())===(r=n)?i:i===Ct?r:r===Ct?i:kt;if(t instanceof b_)for(var e=t.getGeometriesArray(),o=0;o<e.length&&n!==kt;o++)n=this.findMinimumLayout(e[o],n);return n},t.prototype.writeGeometry=function(t,n){var i,r,e=((i={})[Pt.POINT]=dC,i[Pt.LINE_STRING]=pC,i[Pt.POLYGON]=yC,i[Pt.MULTI_POINT]=mC,i[Pt.MULTI_LINE_STRING]=wC,i[Pt.MULTI_POLYGON]=bC,i[Pt.GEOMETRY_COLLECTION]=gC,i),o=t.getType(),u=e[o];if(!u)throw new Error("GeometryType "+o+" is not supported");(this.Ly||(this.Ly=this.findMinimumLayout(t)),this.writeWkbHeader(u,n),t instanceof Qr)?((r={})[Pt.POINT]=this.writePoint,r[Pt.LINE_STRING]=this.writeLineString,r[Pt.POLYGON]=this.writePolygon,r[Pt.MULTI_POINT]=this.writeMultiPoint,r[Pt.MULTI_LINE_STRING]=this.writeMultiLineString,r[Pt.MULTI_POLYGON]=this.writeMultiPolygon,r)[o].call(this,t.getCoordinates(),t.getLayout()):t instanceof b_&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,n=this.Dy.reduce((function(t,n){return t+n[0]}),0),i=new ArrayBuffer(n),r=new DataView(i),e=0;return this.Dy.forEach((function(n){switch(n[0]){case 1:r.setUint8(e,n[1]);break;case 4:r.setUint32(e,n[1],t.Iy);break;case 8:r.setFloat64(e,n[1],t.Iy)}e+=n[0]})),i},t}();function jC(t){return"string"==typeof t?function(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.substr(2*i,2),16);return new DataView(n.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var EC=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.splitCollection=Boolean(r.splitCollection),i.Uy=null,i.qy=!1!==r.hex,i.Vy=!1!==r.littleEndian,i.Wy=!1!==r.ewkb,i.Ly=r.geometryLayout,i.Xy=r.nodataZ||0,i.Hy=r.nodataM||0,i.Fy=r.srid,i}return vC(n,t),n.prototype.getType=function(){return this.qy?hh:ah},n.prototype.readFeature=function(t,n){return new Et({geometry:this.readGeometry(t,n)})},n.prototype.readFeatures=function(t,n){var i=this.readGeometry(t,n);return(this.splitCollection&&i instanceof b_?i.getGeometriesArray():[i]).map((function(t){return new Et({geometry:t})}))},n.prototype.readGeometry=function(t,n){var i=jC(t);if(!i)return null;var r=new SC(i).readGeometry();this.Uy=i;var e=this.getReadOptions(t,n);return this.Uy=null,u_(r,!1,e)},n.prototype.readProjection=function(t){var n=this.Uy||jC(t);if(n){var i=new SC(n);return i.readWkbHeader(),i.getSrid()&&br("EPSG:"+i.getSrid())||void 0}},n.prototype.writeFeature=function(t,n){return this.writeGeometry(t.getGeometry(),n)},n.prototype.writeFeatures=function(t,n){return this.writeGeometry(new b_(t.map((function(t){return t.getGeometry()}))),n)},n.prototype.writeGeometry=function(t,n){var i=this.adaptOptions(n),r=new OC({layout:this.Ly,littleEndian:this.Vy,ewkb:this.Wy,nodata:{Z:this.Xy,M:this.Hy}}),e=Number.isInteger(this.Fy)?Number(this.Fy):null;if(!1!==this.Fy&&!Number.isInteger(this.Fy)){var o=i.dataProjection&&br(i.dataProjection);if(o){var u=o.getCode();0===u.indexOf("EPSG:")&&(e=Number(u.substring(5)))}}r.writeGeometry(u_(t,!0,i),e);var s=r.getBuffer();return this.qy?function(t){var n=new Uint8Array(t);return Array.from(n.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(s):s},n}(o_),kC=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),AC={POINT:Ee,LINESTRING:IM,POLYGON:Ye,MULTIPOINT:AM,MULTILINESTRING:zM,MULTIPOLYGON:GM},TC="EMPTY",CC=0,PC=1,RC=2,IC=3,NC=4,zC=5,FC=6,LC={};for(var GC in Pt)LC[GC]=Pt[GC].toUpperCase();var DC=function(){function t(t){this.wkt=t,this.Ky=-1}return t.prototype.Yy=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.Zy=function(t,n){return t>="0"&&t<="9"||"."==t&&!(void 0!==n&&n)},t.prototype.Jy=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.$y=function(){return this.wkt.charAt(++this.Ky)},t.prototype.nextToken=function(){var t,n=this.$y(),i=this.Ky,r=n;if("("==n)t=RC;else if(","==n)t=zC;else if(")"==n)t=IC;else if(this.Zy(n)||"-"==n)t=NC,r=this.Qy();else if(this.Yy(n))t=PC,r=this.tm();else{if(this.Jy(n))return this.nextToken();if(""!==n)throw new Error("Unexpected character: "+n);t=FC}return{position:i,value:r,type:t}},t.prototype.Qy=function(){var t,n=this.Ky,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.$y()}while(this.Zy(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(n,this.Ky--))},t.prototype.tm=function(){var t,n=this.Ky;do{t=this.$y()}while(this.Yy(t));return this.wkt.substring(n,this.Ky--).toUpperCase()},t}(),BC=function(){function t(t){this.nm=t,this.im={position:0,type:CC},this.Ly=kt}return t.prototype.rm=function(){this.im=this.nm.nextToken()},t.prototype.isTokenType=function(t){return this.im.type==t},t.prototype.match=function(t){var n=this.isTokenType(t);return n&&this.rm(),n},t.prototype.parse=function(){return this.rm(),this.om()},t.prototype.um=function(){var t=kt,n=this.im;if(this.isTokenType(PC)){var i=n.value;"Z"===i?t=At:"M"===i?t=Tt:"ZM"===i&&(t=Ct),t!==kt&&this.rm()}return t},t.prototype.sm=function(){if(this.match(RC)){var t=[];do{t.push(this.om())}while(this.match(zC));if(this.match(IC))return t}throw new Error(this.am())},t.prototype.fm=function(){if(this.match(RC)){var t=this.hm();if(this.match(IC))return t}throw new Error(this.am())},t.prototype.lm=function(){if(this.match(RC)){var t=this.vm();if(this.match(IC))return t}throw new Error(this.am())},t.prototype.dm=function(){if(this.match(RC)){var t=this.pm();if(this.match(IC))return t}throw new Error(this.am())},t.prototype.ym=function(){if(this.match(RC)){var t=void 0;if(t=this.im.type==RC?this.wm():this.vm(),this.match(IC))return t}throw new Error(this.am())},t.prototype.bm=function(){if(this.match(RC)){var t=this.pm();if(this.match(IC))return t}throw new Error(this.am())},t.prototype.gm=function(){if(this.match(RC)){var t=this.xm();if(this.match(IC))return t}throw new Error(this.am())},t.prototype.hm=function(){for(var t=[],n=this.Ly.length,i=0;i<n;++i){var r=this.im;if(!this.match(NC))break;t.push(r.value)}if(t.length==n)return t;throw new Error(this.am())},t.prototype.vm=function(){for(var t=[this.hm()];this.match(zC);)t.push(this.hm());return t},t.prototype.wm=function(){for(var t=[this.fm()];this.match(zC);)t.push(this.fm());return t},t.prototype.pm=function(){for(var t=[this.lm()];this.match(zC);)t.push(this.lm());return t},t.prototype.xm=function(){for(var t=[this.dm()];this.match(zC);)t.push(this.dm());return t},t.prototype.Mm=function(){var t=this.isTokenType(PC)&&this.im.value==TC;return t&&this.rm(),t},t.prototype.am=function(){return"Unexpected `"+this.im.value+"` at position "+this.im.position+" in `"+this.nm.wkt+"`"},t.prototype.om=function(){var t=this.im;if(this.match(PC)){var n=t.value;this.Ly=this.um();var i=this.Mm();if("GEOMETRYCOLLECTION"==n){if(i)return new b_([]);var r=this.sm();return new b_(r)}var e=AC[n];if(!e)throw new Error("Invalid geometry type: "+n);var o=void 0;if(i)o="POINT"==n?[NaN,NaN]:[];else switch(n){case"POINT":o=this.fm();break;case"LINESTRING":o=this.lm();break;case"POLYGON":o=this.dm();break;case"MULTIPOINT":o=this.ym();break;case"MULTILINESTRING":o=this.bm();break;case"MULTIPOLYGON":o=this.gm()}return new e(o,this.Ly)}throw new Error(this.am())},t}(),UC=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i._m=void 0!==r.splitCollection&&r.splitCollection,i}return kC(n,t),n.prototype.Sm=function(t){var n=new DC(t);return new BC(n).parse()},n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n),r=new Et;return r.setGeometry(i),r},n.prototype.readFeaturesFromText=function(t,n){for(var i=[],r=this.readGeometryFromText(t,n),e=[],o=0,u=(i=this._m&&r.getType()==Pt.GEOMETRY_COLLECTION?r.getGeometriesArray():[r]).length;o<u;++o){var s=new Et;s.setGeometry(i[o]),e.push(s)}return e},n.prototype.readGeometryFromText=function(t,n){return u_(this.Sm(t),!1,n)},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):""},n.prototype.writeFeaturesText=function(t,n){if(1==t.length)return this.writeFeatureText(t[0],n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(t[r].getGeometry());var o=new b_(i);return this.writeGeometryText(o,n)},n.prototype.writeGeometryText=function(t,n){return HC(u_(t,!0,n))},n}(yj);function qC(t){var n=t.getCoordinates();return 0===n.length?"":n.join(" ")}function VC(t){for(var n=t.getCoordinates(),i=[],r=0,e=n.length;r<e;++r)i.push(n[r].join(" "));return i.join(",")}function WC(t){for(var n=[],i=t.getLinearRings(),r=0,e=i.length;r<e;++r)n.push("("+VC(i[r])+")");return n.join(",")}var XC={Point:qC,LineString:VC,Polygon:WC,MultiPoint:function(t){for(var n=[],i=t.getPoints(),r=0,e=i.length;r<e;++r)n.push("("+qC(i[r])+")");return n.join(",")},MultiLineString:function(t){for(var n=[],i=t.getLineStrings(),r=0,e=i.length;r<e;++r)n.push("("+VC(i[r])+")");return n.join(",")},MultiPolygon:function(t){for(var n=[],i=t.getPolygons(),r=0,e=i.length;r<e;++r)n.push("("+WC(i[r])+")");return n.join(",")},GeometryCollection:function(t){for(var n=[],i=t.getGeometries(),r=0,e=i.length;r<e;++r)n.push(HC(i[r]));return n.join(",")}};function HC(t){var n=t.getType(),i=(0,XC[n])(t);if(n=n.toUpperCase(),"function"==typeof t.getFlatCoordinates){var r=function(t){var n=t.getLayout(),i="";return n!==At&&n!==Ct||(i+="Z"),n!==Tt&&n!==Ct||(i+="M"),i}(t);r.length>0&&(n+=" "+r)}return 0===i.length?n+" "+TC:n+"("+i+")"}var KC=UC,YC=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ZC=[null,"http://www.opengis.net/wms"],JC=Rc(ZC,{Service:Ec((function(t,n){return Nc({},tP,t,n)})),Capability:Ec((function(t,n){return Nc({},$C,t,n)}))}),$C=Rc(ZC,{Request:Ec((function(t,n){return Nc({},aP,t,n)})),Exception:Ec((function(t,n){return Nc([],eP,t,n)})),Layer:Ec((function(t,n){var i=Nc({},oP,t,n);if(void 0===i.Layer)return Object.assign(i,pP(t,n));return i}))}),QC=function(t){function n(){var n=t.call(this)||this;return n.version=void 0,n}return YC(n,t),n.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var n=Nc({version:this.version},JC,t,[]);return n||null},n}(Fk),tP=Rc(ZC,{Name:Ec(lO),Title:Ec(lO),Abstract:Ec(lO),KeywordList:Ec(bP),OnlineResource:Ec(Lk),ContactInformation:Ec((function(t,n){return Nc({},nP,t,n)})),Fees:Ec(lO),AccessConstraints:Ec(lO),LayerLimit:Ec(hO),MaxWidth:Ec(hO),MaxHeight:Ec(hO)}),nP=Rc(ZC,{ContactPersonPrimary:Ec((function(t,n){return Nc({},iP,t,n)})),ContactPosition:Ec(lO),ContactAddress:Ec((function(t,n){return Nc({},rP,t,n)})),ContactVoiceTelephone:Ec(lO),ContactFacsimileTelephone:Ec(lO),ContactElectronicMailAddress:Ec(lO)}),iP=Rc(ZC,{ContactPerson:Ec(lO),ContactOrganization:Ec(lO)}),rP=Rc(ZC,{AddressType:Ec(lO),Address:Ec(lO),City:Ec(lO),StateOrProvince:Ec(lO),PostCode:Ec(lO),Country:Ec(lO)}),eP=Rc(ZC,{Format:Sc(lO)}),oP=Rc(ZC,{Name:Ec(lO),Title:Ec(lO),Abstract:Ec(lO),KeywordList:Ec(bP),CRS:jc(lO),EX_GeographicBoundingBox:Ec((function(t,n){var i=Nc({},sP,t,n);if(!i)return;var r=i.westBoundLongitude,e=i.southBoundLatitude,o=i.eastBoundLongitude,u=i.northBoundLatitude;if(void 0===r||void 0===e||void 0===o||void 0===u)return;return[r,e,o,u]})),BoundingBox:jc((function(t,n){var i=[fO(t.getAttribute("minx")),fO(t.getAttribute("miny")),fO(t.getAttribute("maxx")),fO(t.getAttribute("maxy"))],r=[fO(t.getAttribute("resx")),fO(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:r}})),Dimension:jc((function(t,n){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:uO(t.getAttribute("multipleValues")),nearestValue:uO(t.getAttribute("nearestValue")),current:uO(t.getAttribute("current")),values:lO(t)}})),Attribution:Ec((function(t,n){return Nc({},uP,t,n)})),AuthorityURL:jc((function(t,n){var i=yP(t,n);if(i)return i.name=t.getAttribute("name"),i;return})),Identifier:jc(lO),MetadataURL:jc((function(t,n){var i=yP(t,n);if(i)return i.type=t.getAttribute("type"),i;return})),DataURL:jc(yP),FeatureListURL:jc(yP),Style:jc((function(t,n){return Nc({},lP,t,n)})),MinScaleDenominator:Ec(aO),MaxScaleDenominator:Ec(aO),Layer:jc(pP)}),uP=Rc(ZC,{Title:Ec(lO),OnlineResource:Ec(Lk),LogoURL:Ec(wP)}),sP=Rc(ZC,{westBoundLongitude:Ec(aO),eastBoundLongitude:Ec(aO),southBoundLatitude:Ec(aO),northBoundLatitude:Ec(aO)}),aP=Rc(ZC,{GetCapabilities:Ec(mP),GetMap:Ec(mP),GetFeatureInfo:Ec(mP)}),fP=Rc(ZC,{Format:jc(lO),DCPType:jc((function(t,n){return Nc({},hP,t,n)}))}),hP=Rc(ZC,{HTTP:Ec((function(t,n){return Nc({},cP,t,n)}))}),cP=Rc(ZC,{Get:Ec(yP),Post:Ec(yP)}),lP=Rc(ZC,{Name:Ec(lO),Title:Ec(lO),Abstract:Ec(lO),LegendURL:jc(wP),StyleSheetURL:Ec(yP),StyleURL:Ec(yP)}),vP=Rc(ZC,{Format:Ec(lO),OnlineResource:Ec(Lk)}),dP=Rc(ZC,{Keyword:Sc(lO)});function pP(t,n){var i=n[n.length-1],r=Nc({},oP,t,n);if(r){var e=uO(t.getAttribute("queryable"));void 0===e&&(e=i.queryable),r.queryable=void 0!==e&&e;var o=cO(t.getAttribute("cascaded"));void 0===o&&(o=i.cascaded),r.cascaded=o;var u=uO(t.getAttribute("opaque"));void 0===u&&(u=i.opaque),r.opaque=void 0!==u&&u;var s=uO(t.getAttribute("noSubsets"));void 0===s&&(s=i.noSubsets),r.noSubsets=void 0!==s&&s;var a=fO(t.getAttribute("fixedWidth"));a||(a=i.fixedWidth),r.fixedWidth=a;var f=fO(t.getAttribute("fixedHeight"));f||(f=i.fixedHeight),r.fixedHeight=f;["Style","CRS","AuthorityURL"].forEach((function(t){if(t in i){var n=r[t]||[];r[t]=n.concat(i[t])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in r)){var n=i[t];r[t]=n}})),r}}function yP(t,n){return Nc({},vP,t,n)}function mP(t,n){return Nc({},fP,t,n)}function wP(t,n){var i=yP(t,n);if(i){var r=[cO(t.getAttribute("width")),cO(t.getAttribute("height"))];return i.size=r,i}}function bP(t,n){return Nc([],dP,t,n)}var gP=QC,xP=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),MP=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.ky="http://mapserver.gis.umn.edu/mapserver",i.Ay=new MO,i.qf=r.layers?r.layers:null,i}return xP(n,t),n.prototype.getLayers=function(){return this.qf},n.prototype.setLayers=function(t){this.qf=t},n.prototype.Om=function(t,n){t.setAttribute("namespaceURI",this.ky);var i=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==i)for(var e=0,o=t.childNodes.length;e<o;e++){var u=t.childNodes[e];if(u.nodeType===Node.ELEMENT_NODE){var s=u,a=n[0],f=s.localName.replace("_layer","");if(!this.qf||y(this.qf,f)){var h=f+"_feature";a.featureType=h,a.featureNS=this.ky;var c={};c[h]=Sc(this.Ay.readFeatureElement,this.Ay);var l=Rc([a.featureNS,null],c);s.setAttribute("namespaceURI",this.ky);var v=Nc([],l,s,n,this.Ay);v&&b(r,v)}}}if("FeatureCollection"==i){var d=Nc([],this.Ay.FEATURE_COLLECTION_PARSERS,t,[{}],this.Ay);d&&(r=d)}return r},n.prototype.readFeaturesFromNode=function(t,n){var i={};return n&&A(i,this.getReadOptions(t,n)),this.Om(t,[i])},n}(QS),_P=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),SP=[null,"http://www.opengis.net/wmts/1.0"],OP=[null,"http://www.opengis.net/ows/1.1"],jP=Rc(SP,{Contents:Ec((function(t,n){return Nc({},kP,t,n)}))}),EP=function(t){function n(){var n=t.call(this)||this;return n.jm=new iA,n}return _P(n,t),n.prototype.readFromNode=function(t){var n=t.getAttribute("version");n&&(n=n.trim());var i=this.jm.readFromNode(t);return i?(i.version=n,(i=Nc(i,jP,t,[]))||null):null},n}(Fk),kP=Rc(SP,{Layer:jc((function(t,n){return Nc({},AP,t,n)})),TileMatrixSet:jc((function(t,n){return Nc({},zP,t,n)}))}),AP=Rc(SP,{Style:jc((function(t,n){var i=Nc({},TP,t,n);if(!i)return;var r="true"===t.getAttribute("isDefault");return i.isDefault=r,i})),Format:jc(lO),TileMatrixSetLink:jc((function(t,n){return Nc({},CP,t,n)})),Dimension:jc((function(t,n){return Nc({},IP,t,n)})),ResourceURL:jc((function(t,n){var i=t.getAttribute("format"),r=t.getAttribute("template"),e=t.getAttribute("resourceType"),o={};i&&(o.format=i);r&&(o.template=r);e&&(o.resourceType=e);return o}))},Rc(OP,{Title:Ec(lO),Abstract:Ec(lO),WGS84BoundingBox:Ec(LP),Identifier:Ec(lO)})),TP=Rc(SP,{LegendURL:jc((function(t,n){var i={};return i.format=t.getAttribute("format"),i.href=Lk(t),i}))},Rc(OP,{Title:Ec(lO),Identifier:Ec(lO)})),CP=Rc(SP,{TileMatrixSet:Ec(lO),TileMatrixSetLimits:Ec((function(t,n){return Nc([],PP,t,n)}))}),PP=Rc(SP,{TileMatrixLimits:Sc((function(t,n){return Nc({},RP,t,n)}))}),RP=Rc(SP,{TileMatrix:Ec(lO),MinTileRow:Ec(hO),MaxTileRow:Ec(hO),MinTileCol:Ec(hO),MaxTileCol:Ec(hO)}),IP=Rc(SP,{Default:Ec(lO),Value:jc(lO)},Rc(OP,{Identifier:Ec(lO)})),NP=Rc(OP,{LowerCorner:Sc(GP),UpperCorner:Sc(GP)}),zP=Rc(SP,{WellKnownScaleSet:Ec(lO),TileMatrix:jc((function(t,n){return Nc({},FP,t,n)}))},Rc(OP,{SupportedCRS:Ec(lO),Identifier:Ec(lO),BoundingBox:Ec(LP)})),FP=Rc(SP,{TopLeftCorner:Ec(GP),ScaleDenominator:Ec(aO),TileWidth:Ec(hO),TileHeight:Ec(hO),MatrixWidth:Ec(hO),MatrixHeight:Ec(hO)},Rc(OP,{Identifier:Ec(lO)}));function LP(t,n){var i=Nc([],NP,t,n);if(2==i.length)return xn(i)}function GP(t,n){var i=lO(t).split(/\s+/);if(i&&2==i.length){var r=+i[0],e=+i[1];if(!isNaN(r)&&!isNaN(e))return[r,e]}}var DP=EP,BP=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),UP=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],qP="enterfullscreen",VP="leavefullscreen";function WP(t){var n=t.body;return!!(n.webkitRequestFullscreen||n.msRequestFullscreen&&t.msFullscreenEnabled||n.requestFullscreen&&t.fullscreenEnabled)}function XP(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function HP(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var KP=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,i.once,i.un,i.ih=void 0!==r.keys&&r.keys,i.Mv=r.source,i.Em=!1,i.km=i.Am.bind(i),i.Tm=void 0!==r.className?r.className:"ol-full-screen",i.Cm=[],i.Pm=void 0!==r.activeClassName?r.activeClassName.split(" "):[i.Tm+"-true"],i.Rm=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[i.Tm+"-false"];var e=void 0!==r.label?r.label:"⤢";i.Im="string"==typeof e?document.createTextNode(e):e;var o=void 0!==r.labelActive?r.labelActive:"×";i.Nm="string"==typeof o?document.createTextNode(o):o;var u=r.tipLabel?r.tipLabel:"Toggle full-screen";return i.zm=document.createElement("button"),i.zm.title=u,i.zm.setAttribute("type","button"),i.zm.appendChild(i.Im),i.zm.addEventListener(L,i.Pr.bind(i),!1),i.Fm(i.zm,i.Em),i.element.className="".concat(i.Tm," ").concat(Eu," ").concat(Au),i.element.appendChild(i.zm),i}return BP(n,t),n.prototype.Pr=function(t){t.preventDefault(),this.Lm()},n.prototype.Lm=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(WP(n))if(XP(n))!function(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(n);else{var i=void 0;i=this.Mv?"string"==typeof this.Mv?n.getElementById(this.Mv):this.Mv:t.getTargetElement(),this.ih?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():HP(t)}(i):HP(i)}}},n.prototype.Gm=function(){var t=this.getMap();if(t){var n=this.Em;this.Em=XP(t.getOwnerDocument()),n!==this.Em&&(this.Fm(this.zm,this.Em),this.Em?(Ao(this.Nm,this.Im),this.dispatchEvent(qP)):(Ao(this.Im,this.Nm),this.dispatchEvent(VP)),t.updateSize())}},n.prototype.Fm=function(t,n){var i,r,e,o;n?((i=t.classList).remove.apply(i,this.Rm),(r=t.classList).add.apply(r,this.Pm)):((e=t.classList).remove.apply(e,this.Pm),(o=t.classList).add.apply(o,this.Rm))},n.prototype.setMap=function(n){var i=this.getMap();i&&i.removeChangeListener(ks,this.km),t.prototype.setMap.call(this,n),this.Am(),n&&n.addChangeListener(ks,this.km)},n.prototype.Am=function(){for(var t=this.Cm,n=0,i=t.length;n<i;++n)J(t[n]);t.length=0;var r=this.getMap();if(r){var e=r.getOwnerDocument();WP(e)?this.element.classList.remove(ku):this.element.classList.add(ku);for(n=0,i=UP.length;n<i;++n)t.push(Y(e,UP[n],this.Gm,this));this.Gm()}},n}(va),YP=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ZP="projection",JP="coordinateFormat",$P=function(t){function n(n){var i=this,r=n||{},e=document.createElement("div");e.className=void 0!==r.className?r.className:"ol-mouse-position",(i=t.call(this,{element:e,render:r.render,target:r.target})||this).on,i.once,i.un,i.addChangeListener(ZP,i.Et),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,u="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(u=r.undefinedHTML),o=!!u):"placeholder"in r&&(!1===r.placeholder?o=!1:u=String(r.placeholder)),i.Dm=u,i.Bm=o,i.Um=e.innerHTML,i.qm=null,i.Ot=null,i}return YP(n,t),n.prototype.Et=function(){this.Ot=null},n.prototype.getCoordinateFormat=function(){return this.get(JP)},n.prototype.getProjection=function(){return this.get(ZP)},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.Vm(n.getEventPixel(t))},n.prototype.handleMouseOut=function(t){this.Vm(null)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var i=n.getViewport();this.listenerKeys.push(Y(i,ps,this.handleMouseMove,this)),this.Bm&&this.listenerKeys.push(Y(i,ws,this.handleMouseOut,this)),this.Vm(null)}},n.prototype.setCoordinateFormat=function(t){this.set(JP,t)},n.prototype.setProjection=function(t){this.set(ZP,br(t))},n.prototype.Vm=function(t){var n=this.Dm;if(t&&this.qm){if(!this.Ot){var i=this.getProjection();this.Ot=i?kr(this.qm,i):yr}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var e=Ir();e&&(this.Ot=kr(this.qm,e)),this.Ot(r,r);var o=this.getCoordinateFormat();n=o?o(r):r.toString()}}this.Um&&n===this.Um||(this.element.innerHTML=n,this.Um=n)},n.prototype.render=function(t){var n=t.frameState;n?this.qm!=n.viewState.projection&&(this.qm=n.viewState.projection,this.Ot=null):this.qm=null},n}(va),QP=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tR=.75,nR=.1,iR=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return QP(n,t),n.prototype.createRenderer=function(){return new os(this)},n}(ca),rR=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Wm=i.Xm.bind(i),i.Sr=void 0===r.collapsed||r.collapsed,i.kr=void 0===r.collapsible||r.collapsible,i.kr||(i.Sr=!1),i.us=void 0!==r.rotateWithView&&r.rotateWithView,i.Hm=void 0;var e=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",u=void 0!==r.collapseLabel?r.collapseLabel:"‹";"string"==typeof u?(i.Ar=document.createElement("span"),i.Ar.textContent=u):i.Ar=u;var s=void 0!==r.label?r.label:"›";"string"==typeof s?(i.Tr=document.createElement("span"),i.Tr.textContent=s):i.Tr=s;var a=i.kr&&!i.Sr?i.Ar:i.Tr,f=document.createElement("button");f.setAttribute("type","button"),f.title=o,f.appendChild(a),f.addEventListener(L,i.Pr.bind(i),!1),i.Km=document.createElement("div"),i.Km.className="ol-overviewmap-map",i.Cy=r.view,i.Ym=new iR({view:r.view});var h=i.Ym;r.layers&&r.layers.forEach((function(t){h.addLayer(t)}));var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.Zm=new Uf({position:[0,0],positioning:Tf,element:c}),i.Ym.addOverlay(i.Zm);var l=e+" "+"ol-unselectable "+Au+(i.Sr&&i.kr?" ol-collapsed":"")+(i.kr?"":" ol-uncollapsible"),v=i.element;v.className=l,v.appendChild(i.Km),v.appendChild(f);var d=i,p=i.Zm,y=i.Zm.getElement(),m=function(t){var n,i={clientX:(n=t).clientX,clientY:n.clientY},r=h.getEventCoordinateInternal(i);p.setPosition(r)},w=function t(n){var i=h.getEventCoordinateInternal(n);d.getMap().getView().setCenterInternal(i),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",t)};return y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",w)})),i}return QP(n,t),n.prototype.setMap=function(n){var i=this.getMap();if(n!==i){if(i){var r=i.getView();r&&this.Jm(r),this.Ym.setTarget(null)}if(t.prototype.setMap.call(this,n),n){this.Ym.setTarget(this.Km),this.listenerKeys.push(Y(n,l,this.$m,this));var e=n.getView();e&&(this.Qm(e),e.isDef()&&(this.Ym.updateSize(),this.tw())),this.Ym.isRendered()||this.nw()}}},n.prototype.$m=function(t){if(t.key===As){var n=t.oldValue;n&&this.Jm(n);var i=this.getMap().getView();this.Qm(i)}else this.Ym.isRendered()||t.key!==ks&&t.key!==Es||this.Ym.updateSize()},n.prototype.Qm=function(t){if(!this.Cy){var n=new ra({projection:t.getProjection()});this.Ym.setView(n)}t.addChangeListener(Fs.ROTATION,this.Wm),this.Xm()},n.prototype.Jm=function(t){t.removeChangeListener(Fs.ROTATION,this.Wm)},n.prototype.Xm=function(){this.us&&this.Ym.getView().setRotation(this.getMap().getView().getRotation())},n.prototype.iw=function(){var t=this.getMap(),n=this.Ym;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView().calculateExtentInternal(i);if(!this.Hm||!In(r,this.Hm)){this.Hm=r;var e=n.getSize(),o=n.getView().calculateExtentInternal(e),u=n.getPixelFromCoordinateInternal(Jn(r)),s=n.getPixelFromCoordinateInternal(Wn(r)),a=Math.abs(u[0]-s[0]),f=Math.abs(u[1]-s[1]),h=e[0],c=e[1];a<h*nR||f<c*nR||a>h*tR||f>c*tR?this.tw():jn(o,r)||this.rw()}}},n.prototype.tw=function(){var t=this.getMap(),n=this.Ym,i=t.getSize(),r=t.getView().calculateExtentInternal(i),e=n.getView(),o=Math.log(7.5)/Math.LN2;ri(r,1/(Math.pow(2,o/2)*nR)),e.fitInternal(Je(r))},n.prototype.rw=function(){var t=this.getMap(),n=this.Ym,i=t.getView();n.getView().setCenterInternal(i.getCenterInternal())},n.prototype.ew=function(){var t=this.getMap(),n=this.Ym;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView(),e=n.getView(),o=this.us?0:-r.getRotation(),u=this.Zm,s=this.Zm.getElement(),a=r.getCenterInternal(),f=r.getResolution(),h=e.getResolution(),c=i[0]*f/h,l=i[1]*f/h;if(u.setPosition(a),s){s.style.width=c+"px",s.style.height=l+"px";var v="rotate("+o+"rad)";s.style.transform=v}}},n.prototype.nw=function(){this.ow||(this.ow=Z(this.Ym,xs,(function(t){delete this.ow,this.ew()}),this))},n.prototype.Pr=function(t){t.preventDefault(),this.zr()},n.prototype.zr=function(){this.element.classList.toggle(Tu),this.Sr?Ao(this.Ar,this.Tr):Ao(this.Tr,this.Ar),this.Sr=!this.Sr;var t=this.Ym;if(!this.Sr){if(t.isRendered())return this.Hm=void 0,void t.render();t.updateSize(),this.tw(),this.nw()}},n.prototype.getCollapsible=function(){return this.kr},n.prototype.setCollapsible=function(t){this.kr!==t&&(this.kr=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.Sr&&this.zr())},n.prototype.setCollapsed=function(t){this.kr&&this.Sr!==t&&this.zr()},n.prototype.getCollapsed=function(){return this.Sr},n.prototype.getRotateWithView=function(){return this.us},n.prototype.setRotateWithView=function(t){this.us!==t&&(this.us=t,0!==this.getMap().getView().getRotation()&&(this.us?this.Xm():this.Ym.getView().setRotation(0),this.Hm=void 0,this.iw(),this.ew()))},n.prototype.getOverviewMap=function(){return this.Ym},n.prototype.render=function(t){this.iw(),this.ew()},n}(va),eR=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oR="units",uR="degrees",sR="imperial",aR="nautical",fR="metric",hR="us",cR=[1,2,5],lR=25.4/.28,vR=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.uw=document.createElement("div"),i.uw.className=e+"-inner",i.element.className=e+" "+Eu,i.element.appendChild(i.uw),i.sw=null,i.aw=void 0!==r.minWidth?r.minWidth:64,i.fw=r.maxWidth,i.mn=!1,i.hw=void 0,i.Um="",i.addChangeListener(oR,i.cw),i.setUnits(r.units||fR),i.lw=r.bar||!1,i.dw=r.steps||4,i.pw=r.text||!1,i.yw=r.dpi||void 0,i}return eR(n,t),n.prototype.getUnits=function(){return this.get(oR)},n.prototype.cw=function(){this.Nr()},n.prototype.setUnits=function(t){this.set(oR,t)},n.prototype.setDpi=function(t){this.yw=t},n.prototype.Nr=function(){var t=this.sw;if(t){var n=t.center,i=t.projection,r=this.getUnits(),e=r==uR?Lt.DEGREES:Lt.METERS,o=gr(i,t.resolution,n,e),u=this.aw*(this.yw||lR)/lR,s=void 0!==this.fw?this.fw*(this.yw||lR)/lR:void 0,a=u*o,f="";if(r==uR){var h=zt[Lt.DEGREES];(a*=h)<h/60?(f="″",o*=3600):a<h?(f="′",o*=60):f="°"}else r==sR?a<.9144?(f="in",o/=.0254):a<1609.344?(f="ft",o/=.3048):(f="mi",o/=1609.344):r==aR?(o/=1852,f="NM"):r==fR?a<.001?(f="μm",o*=1e6):a<1?(f="mm",o*=1e3):a<1e3?f="m":(f="km",o/=1e3):r==hR?a<.9144?(f="in",o*=39.37):a<1609.344?(f="ft",o/=.30480061):(f="mi",o/=1609.3472):St(!1,33);for(var c,l,v,d,p,y,m,w=3*Math.floor(Math.log(u*o)/Math.log(10));;){v=Math.floor(w/3);var b=Math.pow(10,v);if(c=cR[(w%3+3)%3]*b,l=Math.round(c/o),isNaN(l))return this.element.style.display="none",void(this.mn=!1);if(void 0!==s&&l>=s){c=d,l=p,v=y;break}if(l>=u)break;d=c,p=l,y=v,++w}m=this.lw?this.createScaleBar(l,c,f):c.toFixed(v<0?-v:0)+" "+f,this.Um!=m&&(this.uw.innerHTML=m,this.Um=m),this.hw!=l&&(this.uw.style.width=l+"px",this.hw=l),this.mn||(this.element.style.display="",this.mn=!0)}else this.mn&&(this.element.style.display="none",this.mn=!1)},n.prototype.createScaleBar=function(t,n,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),e=[],o=t/this.dw,u="#ffffff",s=0;s<this.dw;s++)0===s&&e.push(this.createMarker("absolute",s)),e.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+u+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.dw?this.createStepText(s,t,!1,n,i):"")+"</div>"),s===this.dw-1&&e.push(this.createStepText(s+1,t,!0,n,i)),u="#ffffff"===u?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.pw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+e.join("")+"</div>"},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},n.prototype.createStepText=function(t,n,i,r,e){var o=(0===t?0:Math.round(r/this.dw*t*100)/100)+(0===t?"":" "+e);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.dw*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.dw*2)+"px;left: "+(i?n+"px":"unset")+';">'+o+"</div>"},n.prototype.getScaleForResolution=function(){var t=gr(this.sw.projection,this.sw.resolution,this.sw.center,Lt.METERS),n=this.yw||lR;return parseFloat(t.toString())*(1e3/25.4)*n},n.prototype.render=function(t){var n=t.frameState;this.sw=n?n.viewState:null,this.Nr()},n}(va),dR=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pR=0,yR=1,mR=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).Pn=[],i.mw=void 0,i.ww=pR,i.Cn,i.bw=0,i.gw=0,i.xw,i.Mw,i._w=null,i.Sw=!1,i.Lr=void 0!==r.duration?r.duration:200;var e=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=e+"-thumb "+Eu;var u=i.element;return u.className=e+" "+"ol-unselectable "+Au,u.appendChild(o),u.addEventListener(ys,i.Ow.bind(i),!1),u.addEventListener(ps,i.jw.bind(i),!1),u.addEventListener(ms,i.Ew.bind(i),!1),u.addEventListener(L,i.kw.bind(i),!1),o.addEventListener(L,h,!1),i}return dR(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render()},n.prototype.Aw=function(){var t=this.element,n=t.offsetWidth,i=t.offsetHeight;if(0===n&&0===i)return this.Sw=!1;var r=getComputedStyle(t);n-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var e=t.firstElementChild,o=getComputedStyle(e),u=e.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),s=e.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this._w=[u,s],n>i?(this.ww=yR,this.gw=n-u):(this.ww=pR,this.bw=i-s),this.Sw=!0},n.prototype.kw=function(t){var n=this.getMap().getView(),i=this.Tw(t.offsetX-this._w[0]/2,t.offsetY-this._w[1]/2),r=this.Cw(i),e=n.getConstrainedZoom(n.getZoomForResolution(r));n.animateInternal({zoom:e,duration:this.Lr,easing:mt})},n.prototype.Ow=function(t){if(!this.Cn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.xw=t.clientX-parseFloat(n.style.left),this.Mw=t.clientY-parseFloat(n.style.top),this.Cn=!0,0===this.Pn.length){var i=this.jw,r=this.Ew,e=this.getMap().getOwnerDocument();this.Pn.push(Y(e,ps,i,this),Y(e,ms,r,this))}}},n.prototype.jw=function(t){if(this.Cn){var n=t.clientX-this.xw,i=t.clientY-this.Mw,r=this.Tw(n,i);this.mw=this.Cw(r),this.getMap().getView().setResolution(this.mw)}},n.prototype.Ew=function(t){this.Cn&&(this.getMap().getView().endInteraction(),this.Cn=!1,this.xw=void 0,this.Mw=void 0,this.Pn.forEach(J),this.Pn.length=0)},n.prototype.Pw=function(t){var n=this.Rw(t),i=this.element.firstElementChild;this.ww==yR?i.style.left=this.gw*n+"px":i.style.top=this.bw*n+"px"},n.prototype.Tw=function(t,n){return ai(this.ww===yR?t/this.gw:n/this.bw,0,1)},n.prototype.Cw=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},n.prototype.Rw=function(t){return ai(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},n.prototype.render=function(t){if(t.frameState&&(this.Sw||this.Aw())){var n=t.frameState.viewState.resolution;this.mw=n,this.Pw(n)}},n}(va),wR=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bR=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var e=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",u=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=u,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(L,i.Pr.bind(i),!1);var a=e+" "+"ol-unselectable "+Au,f=i.element;return f.className=a,f.appendChild(s),i}return wR(n,t),n.prototype.Pr=function(t){t.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Je(n))},n}(va),gR={};gR.AssertionError=f,gR.Collection=ht,gR.Collection.CollectionEvent=ft,gR.DataTile=_t,gR.Disposable=v,gR.Feature=Et,gR.Feature.createStyleFunction=jt,gR.Geolocation=lo,gR.Image=_o,gR.Image.listenImage=Mo,gR.ImageBase=po,gR.ImageCanvas=Oo,gR.ImageTile=Io,gR.Kinetic=No,gR.Map=Of,gR.MapBrowserEvent=vs,gR.MapBrowserEventHandler=gs,gR.MapEvent=cs,gR.Object=et,gR.Object.ObjectEvent=rt,gR.Observable=nt,gR.Observable.unByKey=tt,gR.Overlay=Uf,gR.PluggableMap=ca,gR.Tile=xt,gR.TileCache=$f,gR.TileQueue=Rs,gR.TileQueue.getTilePriority=Is,gR.TileRange=nh,gR.TileRange.createOrUpdate=th,gR.VectorRenderTile=eh,gR.VectorTile=uh,gR.View=ra,gR.View.createCenterConstraint=$s,gR.View.createResolutionConstraint=Qs,gR.View.createRotationConstraint=ta,gR.View.isNoopAnimation=na,gR.array={},gR.array.binarySearch=d,gR.array.equals=x,gR.array.extend=b,gR.array.find=g,gR.array.findIndex=M,gR.array.includes=y,gR.array.isSorted=_,gR.array.linearFindNearest=m,gR.array.numberSafeCompareFunction=p,gR.array.remove=function(t,n){var i=t.indexOf(n),r=i>-1;return r&&t.splice(i,1),r},gR.array.reverseSubArray=w,gR.array.stableSort=function(t,n){var i,r=t.length,e=Array(t.length);for(i=0;i<r;i++)e[i]={index:i,value:t[i]};for(e.sort((function(t,i){return n(t.value,i.value)||t.index-i.index})),i=0;i<t.length;i++)t[i]=e[i].value},gR.asserts={},gR.asserts.assert=St,gR.centerconstraint={},gR.centerconstraint.createExtent=Gs,gR.centerconstraint.none=Ds,gR.color={},gR.color.asArray=Bo,gR.color.asString=Lo,gR.color.fromString=Do,gR.color.isStringColor=Vo,gR.color.normalize=Uo,gR.color.toString=qo,gR.colorlike={},gR.colorlike.asColorLike=sh,gR.control={},gR.control.Attribution=pa,gR.control.Control=va,gR.control.FullScreen=KP,gR.control.MousePosition=$P,gR.control.OverviewMap=rR,gR.control.Rotate=ma,gR.control.ScaleLine=vR,gR.control.Zoom=ba,gR.control.ZoomSlider=mR,gR.control.ZoomToExtent=bR,gR.control.defaults=ga,gR.coordinate={},gR.coordinate.add=Ki,gR.coordinate.closestOnCircle=Yi,gR.coordinate.closestOnSegment=Zi,gR.coordinate.createStringXY=function(t){return function(n){return or(n,t)}},gR.coordinate.degreesToStringHDMS=Ji,gR.coordinate.distance=rr,gR.coordinate.equals=Qi,gR.coordinate.format=$i,gR.coordinate.getWorldsAway=sr,gR.coordinate.rotate=tr,gR.coordinate.scale=nr,gR.coordinate.squaredDistance=ir,gR.coordinate.squaredDistanceToSegment=er,gR.coordinate.toStringHDMS=function(t,n){return t?Ji("NS",t[1],n)+" "+Ji("EW",t[0],n):""},gR.coordinate.toStringXY=or,gR.coordinate.wrapX=ur,gR.css={},gR.css.CLASS_COLLAPSED=Tu,gR.css.CLASS_CONTROL=Au,gR.css.CLASS_HIDDEN=Ou,gR.css.CLASS_SELECTABLE=ju,gR.css.CLASS_UNSELECTABLE=Eu,gR.css.CLASS_UNSUPPORTED=ku,gR.css.cssOpacity=Iu,gR.css.getFontParameters=Ru,gR.dom={},gR.dom.createCanvasContext2D=jo,gR.dom.outerHeight=ko,gR.dom.outerWidth=Eo,gR.dom.removeChildren=Co,gR.dom.removeNode=To,gR.dom.replaceChildren=Po,gR.dom.replaceNode=Ao,gR.easing={},gR.easing.easeIn=yt,gR.easing.easeOut=mt,gR.easing.inAndOut=wt,gR.easing.linear=bt,gR.easing.upAndDown=function(t){return t<.5?wt(2*t):1-wt(2*(t-.5))},gR.events={},gR.events.Event=c,gR.events.Event.preventDefault=function(t){t.preventDefault()},gR.events.Event.stopPropagation=h,gR.events.Target=I,gR.events.condition={},gR.events.condition.all=Ca,gR.events.condition.altKeyOnly=Pa,gR.events.condition.altShiftKeysOnly=Ra,gR.events.condition.always=za,gR.events.condition.click=function(t){return t.type==ds.CLICK},gR.events.condition.doubleClick=function(t){return t.type==ds.DBLCLICK},gR.events.condition.focus=Ia,gR.events.condition.focusWithTabindex=Na,gR.events.condition.mouseActionButton=Fa,gR.events.condition.mouseOnly=qa,gR.events.condition.never=La,gR.events.condition.noModifierKeys=Da,gR.events.condition.penOnly=function(t){var n=t.originalEvent;return St(void 0!==n,56),"pen"===n.pointerType},gR.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&(Vt?n.metaKey:n.ctrlKey)&&!n.shiftKey},gR.events.condition.pointerMove=function(t){return"pointermove"==t.type},gR.events.condition.primaryAction=Va,gR.events.condition.shiftKeyOnly=Ba,gR.events.condition.singleClick=Ga,gR.events.condition.targetNotEditable=Ua,gR.events.condition.touchOnly=function(t){var n=t.originalEvent;return St(void 0!==n,56),"touch"===n.pointerType},gR.events.listen=Y,gR.events.listenOnce=Z,gR.events.unlistenByKey=J,gR.extent={},gR.extent.applyTransform=oi,gR.extent.approximatelyEquals=Nn,gR.extent.boundingExtent=xn,gR.extent.buffer=Mn,gR.extent.clone=_n,gR.extent.closestSquaredDistanceXY=Sn,gR.extent.containsCoordinate=On,gR.extent.containsExtent=jn,gR.extent.containsXY=En,gR.extent.coordinateRelationship=kn,gR.extent.createEmpty=An,gR.extent.createOrUpdate=Tn,gR.extent.createOrUpdateEmpty=Cn,gR.extent.createOrUpdateFromCoordinate=Pn,gR.extent.createOrUpdateFromCoordinates=function(t,n){return Ln(Cn(n),t)},gR.extent.createOrUpdateFromFlatCoordinates=Rn,gR.extent.createOrUpdateFromRings=function(t,n){return Dn(Cn(n),t)},gR.extent.equals=In,gR.extent.extend=zn,gR.extent.extendCoordinate=Fn,gR.extent.extendCoordinates=Ln,gR.extent.extendFlatCoordinates=Gn,gR.extent.extendRings=Dn,gR.extent.extendXY=Bn,gR.extent.forEachCorner=Un,gR.extent.getArea=qn,gR.extent.getBottomLeft=Vn,gR.extent.getBottomRight=Wn,gR.extent.getCenter=Xn,gR.extent.getCorner=Hn,gR.extent.getEnlargedArea=function(t,n){var i=Math.min(t[0],n[0]),r=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-i)*(Math.max(t[3],n[3])-r)},gR.extent.getForViewAndSize=Kn,gR.extent.getHeight=Yn,gR.extent.getIntersection=Zn,gR.extent.getIntersectionArea=function(t,n){return qn(Zn(t,n))},gR.extent.getMargin=function(t){return Qn(t)+Yn(t)},gR.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},gR.extent.getTopLeft=Jn,gR.extent.getTopRight=$n,gR.extent.getWidth=Qn,gR.extent.intersects=ti,gR.extent.intersectsSegment=ei,gR.extent.isEmpty=ni,gR.extent.returnOrUpdate=ii,gR.extent.scaleFromCenter=ri,gR.extent.wrapX=ui,gR.featureloader={},gR.featureloader.loadFeaturesXhr=vh,gR.featureloader.setWithCredentials=function(t){lh=t},gR.featureloader.xhr=dh,gR.format={},gR.format.EsriJSON=JS,gR.format.Feature=o_,gR.format.Feature.transformExtentWithOptions=s_,gR.format.Feature.transformGeometryWithOptions=u_,gR.format.GML=kO,gR.format.GML2=MO,gR.format.GML3=jO,gR.format.GML32=CO,gR.format.GMLBase=eO,gR.format.GMLBase.GMLNS=nO,gR.format.GPX=vj,gR.format.GeoJSON=j_,gR.format.IGC=Oj,gR.format.IIIFInfo=Nb,gR.format.JSONFeature=M_,gR.format.KML=kk,gR.format.KML.getDefaultFillStyle=function(){return qj},gR.format.KML.getDefaultImageStyle=function(){return Wj},gR.format.KML.getDefaultStrokeStyle=function(){return Hj},gR.format.KML.getDefaultStyle=function(){return Yj},gR.format.KML.getDefaultStyleArray=function(){return Jj},gR.format.KML.getDefaultTextStyle=function(){return Kj},gR.format.KML.readFlatCoordinates=rE,gR.format.MVT=d_,gR.format.OSMXML=zk,gR.format.OWS=iA,gR.format.Polyline=vA,gR.format.Polyline.decodeDeltas=oA,gR.format.Polyline.decodeFloats=sA,gR.format.Polyline.decodeSignedIntegers=fA,gR.format.Polyline.decodeUnsignedIntegers=cA,gR.format.Polyline.encodeDeltas=eA,gR.format.Polyline.encodeFloats=uA,gR.format.Polyline.encodeSignedIntegers=aA,gR.format.Polyline.encodeUnsignedInteger=lA,gR.format.Polyline.encodeUnsignedIntegers=hA,gR.format.TextFeature=yj,gR.format.TopoJSON=MA,gR.format.WFS=lC,gR.format.WFS.writeFilter=function(t,n){var i=n||"1.1.0",r=mc(cC(i),"Filter"),e={node:r};return A(e,{version:i,filter:t}),YT(r,t,[e]),r},gR.format.WKB=EC,gR.format.WKT=KC,gR.format.WMSCapabilities=gP,gR.format.WMSGetFeatureInfo=MP,gR.format.WMTSCapabilities=DP,gR.format.XML=Fk,gR.format.XMLFeature=QS,gR.format.filter={},gR.format.filter.And=EA,gR.format.filter.Bbox=AA,gR.format.filter.Comparison=GA,gR.format.filter.ComparisonBinary=qA,gR.format.filter.Contains=RA,gR.format.filter.DWithin=NA,gR.format.filter.Disjoint=FA,gR.format.filter.During=BA,gR.format.filter.EqualTo=WA,gR.format.filter.Filter=_A,gR.format.filter.GreaterThan=HA,gR.format.filter.GreaterThanOrEqualTo=YA,gR.format.filter.Intersects=JA,gR.format.filter.IsBetween=QA,gR.format.filter.IsLike=nT,gR.format.filter.IsNull=rT,gR.format.filter.LessThan=oT,gR.format.filter.LessThanOrEqualTo=sT,gR.format.filter.LogicalNary=OA,gR.format.filter.Not=fT,gR.format.filter.NotEqualTo=cT,gR.format.filter.Or=vT,gR.format.filter.ResourceId=pT,gR.format.filter.Spatial=CA,gR.format.filter.Within=mT,gR.format.filter.and=wT,gR.format.filter.bbox=bT,gR.format.filter.between=function(t,n,i){return new QA(t,n,i)},gR.format.filter.contains=function(t,n,i){return new RA(t,n,i)},gR.format.filter.disjoint=function(t,n,i){return new FA(t,n,i)},gR.format.filter.during=function(t,n,i){return new BA(t,n,i)},gR.format.filter.dwithin=function(t,n,i,r,e){return new NA(t,n,i,r,e)},gR.format.filter.equalTo=function(t,n,i){return new WA(t,n,i)},gR.format.filter.greaterThan=function(t,n){return new HA(t,n)},gR.format.filter.greaterThanOrEqualTo=function(t,n){return new YA(t,n)},gR.format.filter.intersects=function(t,n,i){return new JA(t,n,i)},gR.format.filter.isNull=function(t){return new rT(t)},gR.format.filter.lessThan=function(t,n){return new oT(t,n)},gR.format.filter.lessThanOrEqualTo=function(t,n){return new sT(t,n)},gR.format.filter.like=function(t,n,i,r,e,o){return new nT(t,n,i,r,e,o)},gR.format.filter.not=function(t){return new fT(t)},gR.format.filter.notEqualTo=function(t,n,i){return new cT(t,n,i)},gR.format.filter.or=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(vT,n))},gR.format.filter.resourceId=function(t){return new pT(t)},gR.format.filter.within=function(t,n,i){return new mT(t,n,i)},gR.format.xlink={},gR.format.xlink.readHref=Lk,gR.format.xsd={},gR.format.xsd.readBoolean=oO,gR.format.xsd.readBooleanString=uO,gR.format.xsd.readDateTime=sO,gR.format.xsd.readDecimal=aO,gR.format.xsd.readDecimalString=fO,gR.format.xsd.readNonNegativeIntegerString=cO,gR.format.xsd.readPositiveInteger=hO,gR.format.xsd.readString=lO,gR.format.xsd.writeBooleanTextNode=vO,gR.format.xsd.writeCDATASection=dO,gR.format.xsd.writeDateTimeTextNode=pO,gR.format.xsd.writeDecimalTextNode=yO,gR.format.xsd.writeNonNegativeIntegerTextNode=mO,gR.format.xsd.writeStringTextNode=wO,gR.functions={},gR.functions.FALSE=O,gR.functions.TRUE=S,gR.functions.VOID=j,gR.functions.memoizeOne=E,gR.functions.toPromise=k,gR.geom={},gR.geom.Circle=Q_,gR.geom.Geometry=Yr,gR.geom.GeometryCollection=b_,gR.geom.LineString=IM,gR.geom.LinearRing=Oe,gR.geom.MultiLineString=zM,gR.geom.MultiPoint=AM,gR.geom.MultiPolygon=GM,gR.geom.Point=Ee,gR.geom.Polygon=Ye,gR.geom.Polygon.circular=Ze,gR.geom.Polygon.fromCircle=$e,gR.geom.Polygon.fromExtent=Je,gR.geom.Polygon.makeRegular=Qe,gR.geom.SimpleGeometry=Qr,gR.geom.SimpleGeometry.getStrideForLayout=Jr,gR.geom.SimpleGeometry.transformGeom2D=$r,gR.geom.flat={},gR.geom.flat.area={},gR.geom.flat.area.linearRing=xe,gR.geom.flat.area.linearRings=Me,gR.geom.flat.area.linearRingss=_e,gR.geom.flat.center={},gR.geom.flat.center.linearRingss=FM,gR.geom.flat.closest={},gR.geom.flat.closest.arrayMaxSquaredDelta=ie,gR.geom.flat.closest.assignClosestArrayPoint=oe,gR.geom.flat.closest.assignClosestMultiArrayPoint=ue,gR.geom.flat.closest.assignClosestPoint=ee,gR.geom.flat.closest.maxSquaredDelta=ne,gR.geom.flat.closest.multiArrayMaxSquaredDelta=re,gR.geom.flat.contains={},gR.geom.flat.contains.linearRingContainsExtent=ke,gR.geom.flat.contains.linearRingContainsXY=Ae,gR.geom.flat.contains.linearRingsContainsXY=Te,gR.geom.flat.contains.linearRingssContainsXY=Ce,gR.geom.flat.deflate={},gR.geom.flat.deflate.deflateCoordinate=se,gR.geom.flat.deflate.deflateCoordinates=ae,gR.geom.flat.deflate.deflateCoordinatesArray=fe,gR.geom.flat.deflate.deflateMultiCoordinatesArray=he,gR.geom.flat.flip={},gR.geom.flat.flip.flipXY=qS,gR.geom.flat.geodesic={},gR.geom.flat.geodesic.greatCircleArc=function(t,n,i,r,e,o){var u=br("EPSG:4326"),s=Math.cos(pi(n)),a=Math.sin(pi(n)),f=Math.cos(pi(r)),h=Math.sin(pi(r)),c=Math.cos(pi(i-t)),l=Math.sin(pi(i-t)),v=a*h+s*f*c;return XM((function(n){if(1<=v)return[i,r];var e=n*Math.acos(v),o=Math.cos(e),u=Math.sin(e),d=l*f,p=s*h-a*f*c,y=Math.atan2(d,p),m=Math.asin(a*o+s*u*Math.cos(y));return[di(pi(t)+Math.atan2(Math.sin(y)*u*s,o-a*Math.sin(m))),di(m)]}),Ar(u,e),o)},gR.geom.flat.geodesic.meridian=HM,gR.geom.flat.geodesic.parallel=KM,gR.geom.flat.inflate={},gR.geom.flat.inflate.inflateCoordinates=we,gR.geom.flat.inflate.inflateCoordinatesArray=be,gR.geom.flat.inflate.inflateMultiCoordinatesArray=ge,gR.geom.flat.interiorpoint={},gR.geom.flat.interiorpoint.getInteriorPointOfArray=Pe,gR.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=Re,gR.geom.flat.interpolate={},gR.geom.flat.interpolate.interpolatePoint=TM,gR.geom.flat.interpolate.lineStringCoordinateAtM=CM,gR.geom.flat.interpolate.lineStringsCoordinateAtM=PM,gR.geom.flat.intersectsextent={},gR.geom.flat.intersectsextent.intersectsLineString=Ne,gR.geom.flat.intersectsextent.intersectsLineStringArray=ze,gR.geom.flat.intersectsextent.intersectsLinearRing=Fe,gR.geom.flat.intersectsextent.intersectsLinearRingArray=Le,gR.geom.flat.intersectsextent.intersectsLinearRingMultiArray=Ge,gR.geom.flat.length={},gR.geom.flat.length.lineStringLength=$x,gR.geom.flat.length.linearRingLength=function(t,n,i,r){var e=$x(t,n,i,r),o=t[i-r]-t[n],u=t[i-r+1]-t[n+1];return e+=Math.sqrt(o*o+u*u)},gR.geom.flat.orient={},gR.geom.flat.orient.inflateEnds=Xe,gR.geom.flat.orient.linearRingIsClockwise=Be,gR.geom.flat.orient.linearRingsAreOriented=Ue,gR.geom.flat.orient.linearRingssAreOriented=qe,gR.geom.flat.orient.orientLinearRings=Ve,gR.geom.flat.orient.orientLinearRingsArray=We,gR.geom.flat.reverse={},gR.geom.flat.reverse.coordinates=De,gR.geom.flat.segments={},gR.geom.flat.segments.forEach=Ie,gR.geom.flat.simplify={},gR.geom.flat.simplify.douglasPeucker=ce,gR.geom.flat.simplify.douglasPeuckerArray=le,gR.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,i,r,e,o,u,s){for(var a=0,f=i.length;a<f;++a){var h=i[a],c=[];u=le(t,n,h,r,e,o,u,c),s.push(c),n=h[h.length-1]}return u},gR.geom.flat.simplify.quantize=pe,gR.geom.flat.simplify.quantizeArray=ye,gR.geom.flat.simplify.quantizeMultiArray=me,gR.geom.flat.simplify.radialDistance=ve,gR.geom.flat.simplify.simplifyLineString=function(t,n,i,r,e,o,u){var s=void 0!==u?u:[];return o||(i=ve(t,n,i,r,e,s,0),t=s,n=0,r=2),s.length=ce(t,n,i,r,e,s,0),s},gR.geom.flat.simplify.snap=de,gR.geom.flat.straightchunk={},gR.geom.flat.straightchunk.matchingChunk=Wx,gR.geom.flat.textpath={},gR.geom.flat.textpath.drawTextOnPath=Jx,gR.geom.flat.topology={},gR.geom.flat.topology.lineStringIsClosed=function(t,n,i,r){var e=i-r;return t[n]===t[e]&&t[n+1]===t[e+1]&&(i-n)/r>3&&!!xe(t,n,i,r)},gR.geom.flat.transform={},gR.geom.flat.transform.rotate=Vr,gR.geom.flat.transform.scale=Wr,gR.geom.flat.transform.transform2D=qr,gR.geom.flat.transform.translate=Xr,gR.has={},gR.has.DEVICE_PIXEL_RATIO=Wt,gR.has.FIREFOX=Dt,gR.has.IMAGE_DECODE=Ht,gR.has.MAC=Vt,gR.has.PASSIVE_EVENT_LISTENERS=Kt,gR.has.SAFARI=Bt,gR.has.SAFARI_BUG_237906=Ut,gR.has.WEBKIT=qt,gR.has.WORKER_OFFSCREEN_CANVAS=Xt,gR.interaction={},gR.interaction.DoubleClickZoom=Ea,gR.interaction.DragAndDrop=K_,gR.interaction.DragAndDrop.DragAndDropEvent=H_,gR.interaction.DragBox=ef,gR.interaction.DragBox.DragBoxEvent=rf,gR.interaction.DragPan=Xa,gR.interaction.DragRotate=Ka,gR.interaction.DragRotateAndZoom=Z_,gR.interaction.DragZoom=uf,gR.interaction.Draw=fS,gR.interaction.Draw.DrawEvent=aS,gR.interaction.Draw.createBox=function(){return function(t,n,i){var r=xn([t[0],t[t.length-1]].map((function(t){return zr(t,i)}))),e=[[Vn(r),Wn(r),$n(r),Jn(r),Vn(r)]],o=n;o?o.setCoordinates(e):o=new Ye(e);var u=Ir();return u&&o.transform(i,u),o}},gR.interaction.Draw.createRegularPolygon=function(t,n){return function(i,r,e){var o=zr(i[0],e),u=zr(i[i.length-1],e),s=Math.sqrt(ir(o,u)),a=r||$e(new Q_(o),t),f=n;if(!n&&0!==n){var h=u[0]-o[0],c=u[1]-o[1];f=Math.atan2(c,h)}Qe(a,o,s,f);var l=Ir();return l&&a.transform(e,l),a}},gR.interaction.Extent=yS,gR.interaction.Extent.ExtentEvent=lS,gR.interaction.Interaction=Oa,gR.interaction.Interaction.pan=_a,gR.interaction.Interaction.zoomByDelta=Sa,gR.interaction.KeyboardPan=lf,gR.interaction.KeyboardZoom=df,gR.interaction.Modify=ES,gR.interaction.Modify.ModifyEvent=_S,gR.interaction.MouseWheelZoom=wf,gR.interaction.PinchRotate=gf,gR.interaction.PinchZoom=Mf,gR.interaction.Pointer=Ta,gR.interaction.Pointer.centroid=Aa,gR.interaction.Select=PS,gR.interaction.Select.SelectEvent=TS,gR.interaction.Snap=zS,gR.interaction.Translate=US,gR.interaction.Translate.TranslateEvent=BS,gR.interaction.defaults=_f,gR.layer={},gR.layer.Base=su,gR.layer.BaseImage=Eg,gR.layer.BaseTile=Gg,gR.layer.BaseVector=kx,gR.layer.Graticule=$M,gR.layer.Group=fs,gR.layer.Group.GroupEvent=ss,gR.layer.Heatmap=e_,gR.layer.Image=Ng,gR.layer.Layer=bu,gR.layer.Layer.inView=wu,gR.layer.MapboxVector=z_,gR.layer.Tile=qg,gR.layer.Vector=WM,gR.layer.VectorImage=L_,gR.layer.VectorTile=y_,gR.layer.WebGLPoints=D_,gR.layer.WebGLTile=V_,gR.loadingstrategy={},gR.loadingstrategy.all=ph,gR.loadingstrategy.bbox=function(t,n){return[t]},gR.loadingstrategy.tile=function(t){return function(n,i,r){var e=t.getZForResolution(Dr(i,r)),o=t.getTileRangeForExtentAndZ(Lr(n,r),e),u=[],s=[e,0,0];for(s[1]=o.minX;s[1]<=o.maxX;++s[1])for(s[2]=o.minY;s[2]<=o.maxY;++s[2])u.push(Fr(t.getTileCoordExtent(s),r));return u}},gR.math={},gR.math.ceil=xi,gR.math.clamp=ai,gR.math.cosh=fi,gR.math.floor=gi,gR.math.lerp=mi,gR.math.log2=hi,gR.math.modulo=yi,gR.math.round=bi,gR.math.solveLinearSystem=vi,gR.math.squaredDistance=li,gR.math.squaredSegmentDistance=ci,gR.math.toDegrees=di,gR.math.toFixed=wi,gR.math.toRadians=pi,gR.net={},gR.net.ClientError=gh,gR.net.ResponseError=bh,gR.net.getJSON=xh,gR.net.jsonp=mh,gR.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(wh=XMLHttpRequest),global.XMLHttpRequest=t},gR.net.resolveUrl=Mh,gR.net.restoreXHR=function(){global.XMLHttpRequest=wh},gR.obj={},gR.obj.assign=A,gR.obj.clear=T,gR.obj.getValues=C,gR.obj.isEmpty=P,gR.proj={},gR.proj.Projection=si,gR.proj.Units={},gR.proj.Units.METERS_PER_UNIT=zt,gR.proj.Units.fromCode=Nt,gR.proj.addCommon=Ur,gR.proj.addCoordinateTransforms=Or,gR.proj.addEquivalentProjections=xr,gR.proj.addEquivalentTransforms=Mr,gR.proj.addProjection=mr,gR.proj.addProjections=wr,gR.proj.clearAllProjections=function(){Gi(),qi()},gR.proj.clearUserProjection=function(){Pr=null},gR.proj.cloneTransform=pr,gR.proj.createProjection=_r,gR.proj.createSafeCoordinateTransform=Br,gR.proj.createTransformFromCoordinateTransform=Sr,gR.proj.disableCoordinateWarning=dr,gR.proj.epsg3857={},gR.proj.epsg3857.EXTENT=Oi,gR.proj.epsg3857.HALF_SIZE=Si,gR.proj.epsg3857.MAX_SAFE_Y=Ei,gR.proj.epsg3857.PROJECTIONS=Ai,gR.proj.epsg3857.RADIUS=_i,gR.proj.epsg3857.WORLD_EXTENT=ji,gR.proj.epsg3857.fromEPSG4326=Ti,gR.proj.epsg3857.toEPSG4326=Ci,gR.proj.epsg4326={},gR.proj.epsg4326.EXTENT=Ii,gR.proj.epsg4326.METERS_PER_UNIT=Ni,gR.proj.epsg4326.PROJECTIONS=Fi,gR.proj.epsg4326.RADIUS=Ri,gR.proj.equivalent=Er,gR.proj.fromLonLat=jr,gR.proj.fromUserCoordinate=zr,gR.proj.fromUserExtent=Lr,gR.proj.fromUserResolution=Dr,gR.proj.get=br,gR.proj.getPointResolution=gr,gR.proj.getTransform=Ar,gR.proj.getTransformFromProjections=kr,gR.proj.getUserProjection=Ir,gR.proj.identityTransform=yr,gR.proj.proj4={},gR.proj.proj4.register=function(t){var n,i,r=Object.keys(t.defs),e=r.length;for(n=0;n<e;++n){var o=r[n];if(!br(o)){var u=t.defs(o),s=u.units;s||"longlat"!==u.projName||(s=Lt.DEGREES),mr(new si({code:o,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:s}))}}for(n=0;n<e;++n){var a=r[n],f=br(a);for(i=0;i<e;++i){var h=r[i],c=br(h);if(!Wi(a,h))if(t.defs[a]===t.defs[h])xr([f,c]);else{var l=t(a,h);Or(f,c,Br(f,c,l.forward),Br(c,f,l.inverse))}}}},gR.proj.projections={},gR.proj.projections.add=Bi,gR.proj.projections.clear=Gi,gR.proj.projections.get=Di,gR.proj.setUserProjection=Rr,gR.proj.toLonLat=function(t,n){var i=Tr(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=yi(r+180,360)-180),i},gR.proj.toUserCoordinate=Nr,gR.proj.toUserExtent=Fr,gR.proj.toUserResolution=Gr,gR.proj.transform=Tr,gR.proj.transformExtent=Cr,gR.proj.transformWithProjections=function(t,n,i){return kr(n,i)(t)},gR.proj.transforms={},gR.proj.transforms.add=Vi,gR.proj.transforms.clear=qi,gR.proj.transforms.get=Wi,gR.proj.transforms.remove=function(t,n){var i=t.getCode(),r=n.getCode(),e=Ui[i][r];return delete Ui[i][r],P(Ui[i])&&delete Ui[i],e},gR.proj.useGeographic=function(){Rr("EPSG:4326")},gR.render={},gR.render.Box=Za,gR.render.Event=Su,gR.render.Feature=qM,gR.render.Feature.toFeature=function(t,n){var i=t.getId(),r=UM(t),e=t.getProperties(),o=new Et;return void 0!==n&&o.setGeometryName(n),o.setGeometry(r),void 0!==i&&o.setId(i),o.setProperties(e,!0),o},gR.render.Feature.toGeometry=UM,gR.render.VectorContext=_h,gR.render.canvas={},gR.render.canvas.Builder=Lx,gR.render.canvas.BuilderGroup=Zx,gR.render.canvas.Executor=aM,gR.render.canvas.ExecutorGroup=vM,gR.render.canvas.ExecutorGroup.getPixelIndexArray=lM,gR.render.canvas.ImageBuilder=Dx,gR.render.canvas.Immediate=Oh,gR.render.canvas.Instruction={},gR.render.canvas.Instruction.beginPathInstruction=Ix,gR.render.canvas.Instruction.closePathInstruction=Nx,gR.render.canvas.Instruction.fillInstruction=Px,gR.render.canvas.Instruction.strokeInstruction=Rx,gR.render.canvas.LineStringBuilder=Ux,gR.render.canvas.PolygonBuilder=Vx,gR.render.canvas.TextBuilder=Kx,gR.render.canvas.checkedFonts=Wu,gR.render.canvas.defaultFillStyle=zu,gR.render.canvas.defaultFont=Nu,gR.render.canvas.defaultLineCap=Fu,gR.render.canvas.defaultLineDash=Lu,gR.render.canvas.defaultLineDashOffset=0,gR.render.canvas.defaultLineJoin=Gu,gR.render.canvas.defaultLineWidth=1,gR.render.canvas.defaultMiterLimit=Du,gR.render.canvas.defaultPadding=Vu,gR.render.canvas.defaultStrokeStyle=Bu,gR.render.canvas.defaultTextAlign=Uu,gR.render.canvas.defaultTextBaseline=qu,gR.render.canvas.drawImageOrLabel=rs,gR.render.canvas.getTextDimensions=is,gR.render.canvas.hitdetect={},gR.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=dM,gR.render.canvas.hitdetect.createHitDetectionImageData=pM,gR.render.canvas.hitdetect.hitDetect=yM,gR.render.canvas.labelCache=Xu,gR.render.canvas.measureAndCacheTextWidth=ns,gR.render.canvas.measureTextHeight=$u,gR.render.canvas.measureTextWidth=ts,gR.render.canvas.registerFont=Ju,gR.render.canvas.rotateAtOffset=function(t,n,i,r){0!==n&&(t.translate(i,r),t.rotate(n),t.translate(-i,-r))},gR.render.canvas.textHeights=Zu,gR.render.getRenderPixel=function(t,n){return nn(t.inversePixelTransform,n.slice(0))},gR.render.getVectorContext=Lh,gR.render.toContext=function(t,n){var i=t.canvas,r=n||{},e=r.pixelRatio||Wt,o=r.size;o&&(i.width=o[0]*e,i.height=o[1]*e,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var u=[0,0,i.width,i.height],s=en([1,0,0,1,0,0],e,e);return new Oh(t,e,u,s,0)},gR.renderer={},gR.renderer.Composite=os,gR.renderer.Layer=_l,gR.renderer.Map=Mu,gR.renderer.canvas={},gR.renderer.canvas.ImageLayer=Rg,gR.renderer.canvas.Layer=Cg,gR.renderer.canvas.TileLayer=Bg,gR.renderer.canvas.VectorImageLayer=gM,gR.renderer.canvas.VectorLayer=wM,gR.renderer.canvas.VectorTileLayer=EM,gR.renderer.canvas.common={},gR.renderer.canvas.common.IMAGE_SMOOTHING_DISABLED=Dh,gR.renderer.canvas.common.IMAGE_SMOOTHING_ENABLED=Bh,gR.renderer.vector={},gR.renderer.vector.defaultOrder=Rh,gR.renderer.vector.getSquaredTolerance=Ih,gR.renderer.vector.getTolerance=Nh,gR.renderer.vector.renderFeature=zh,gR.renderer.webgl={},gR.renderer.webgl.Layer=Pl,gR.renderer.webgl.Layer.colorDecodeId=Cl,gR.renderer.webgl.Layer.colorEncodeId=Tl,gR.renderer.webgl.Layer.getBlankImageData=function(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=255,t.data[1]=255,t.data[2]=255,t.data[3]=255,t},gR.renderer.webgl.Layer.writePointFeatureToBuffers=function(t,n,i,r,e,o){var u=3+e,s=t[n+0],a=t[n+1],f=El;f.length=e;for(var h=0;h<f.length;h++)f[h]=t[n+2+h];var c=o?o.vertexPosition:0,l=o?o.indexPosition:0,v=c/u;return Al(i,c,s,a,0),f.length&&i.set(f,c+3),Al(i,c+=u,s,a,1),f.length&&i.set(f,c+3),Al(i,c+=u,s,a,2),f.length&&i.set(f,c+3),Al(i,c+=u,s,a,3),f.length&&i.set(f,c+3),c+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,kl.vertexPosition=c,kl.indexPosition=l,kl},gR.renderer.webgl.PointsLayer=Tx,gR.renderer.webgl.TileLayer=Ul,gR.renderer.webgl.TileLayer.Attributes=Nl,gR.renderer.webgl.TileLayer.Uniforms=Il,gR.reproj={},gR.reproj.Image=Db,gR.reproj.Tile=yl,gR.reproj.Triangulation=dl,gR.reproj.calculateSourceExtentResolution=Wh,gR.reproj.calculateSourceResolution=Vh,gR.reproj.common={},gR.reproj.common.ENABLE_RASTER_REPROJECTION=vl,gR.reproj.common.ERROR_THRESHOLD=.5,gR.reproj.render=Xh,gR.resolutionconstraint={},gR.resolutionconstraint.createMinMaxResolution=Ws,gR.resolutionconstraint.createSnapToPower=Vs,gR.resolutionconstraint.createSnapToResolutions=qs,gR.rotationconstraint={},gR.rotationconstraint.createSnapToN=Ks,gR.rotationconstraint.createSnapToZero=Ys,gR.rotationconstraint.disable=Xs,gR.rotationconstraint.none=Hs,gR.size={},gR.size.buffer=ea,gR.size.hasArea=oa,gR.size.scale=ua,gR.size.toSize=sa,gR.source={},gR.source.BingMaps=Md,gR.source.BingMaps.quadKey=xd,gR.source.CartoDB=jd,gR.source.Cluster=Ld,gR.source.DataTile=Dd,gR.source.GeoTIFF=gb,gR.source.IIIF=Lb,gR.source.Image=Hb,gR.source.Image.ImageSourceEvent=Wb,gR.source.Image.defaultImageLoadFunction=Xb,gR.source.ImageArcGISRest=Yb,gR.source.ImageCanvas=Jb,gR.source.ImageMapGuide=Qb,gR.source.ImageStatic=ng,gR.source.ImageWMS=fg,gR.source.OGCMapTile=mg,gR.source.OGCVectorTile=Mg,gR.source.OSM=Og,gR.source.OSM.ATTRIBUTION=Sg,gR.source.Raster=ox,gR.source.Raster.Processor=Yg,gR.source.Raster.RasterSourceEvent=tx,gR.source.Raster.newImageData=Xg,gR.source.Source=hd,gR.source.Stamen=hx,gR.source.Tile=dd,gR.source.Tile.TileSourceEvent=vd,gR.source.TileArcGISRest=lx,gR.source.TileDebug=dx,gR.source.TileImage=bd,gR.source.TileJSON=yx,gR.source.TileWMS=wx,gR.source.UTFGrid=xx,gR.source.UTFGrid.CustomTile=gx,gR.source.UrlTile=yd,gR.source.Vector=zd,gR.source.Vector.VectorSourceEvent=Nd,gR.source.VectorTile=bg,gR.source.VectorTile.defaultLoadFunction=gg,gR.source.WMTS=Ox,gR.source.WMTS.optionsFromCapabilities=function(t,n){var i=g(t.Contents.Layer,(function(t,i,r){return t.Identifier==n.layer}));if(null===i)return null;var r,e=t.Contents.TileMatrixSet;(r=i.TileMatrixSetLink.length>1?M(i.TileMatrixSetLink,"projection"in n?function(t,i,r){var o=g(e,(function(n){return n.Identifier==t.TileMatrixSet})).SupportedCRS,u=br(o),s=br(n.projection);return u&&s?Er(u,s):o==n.projection}:function(t,i,r){return t.TileMatrixSet==n.matrixSet}):0)<0&&(r=0);var o=i.TileMatrixSetLink[r].TileMatrixSet,u=i.TileMatrixSetLink[r].TileMatrixSetLimits,s=i.Format[0];"format"in n&&(s=n.format),(r=M(i.Style,(function(t,i,r){return"style"in n?t.Title==n.style:t.isDefault})))<0&&(r=0);var a=i.Style[r].Identifier,f={};"Dimension"in i&&i.Dimension.forEach((function(t,n,i){var r=t.Identifier,e=t.Default;void 0===e&&(e=t.Value[0]),f[r]=e}));var h,c=g(t.Contents.TileMatrixSet,(function(t,n,i){return t.Identifier==o})),l=c.SupportedCRS;if(l&&(h=br(l)),"projection"in n){var v=br(n.projection);v&&(h&&!Er(v,h)||(h=v))}var d=!1,p="ne"==h.getAxisOrientation().substr(0,2),m=c.TileMatrix[0],w={MinTileCol:0,MinTileRow:0,MaxTileCol:m.MatrixWidth-1,MaxTileRow:m.MatrixHeight-1};if(u){w=u[u.length-1];var b=g(c.TileMatrix,(function(t){return t.Identifier===w.TileMatrix||c.Identifier+":"+t.Identifier===w.TileMatrix}));b&&(m=b)}var x=28e-5*m.ScaleDenominator/h.getMetersPerUnit(),_=p?[m.TopLeftCorner[1],m.TopLeftCorner[0]]:m.TopLeftCorner,S=m.TileWidth*x,O=m.TileHeight*x,j=c.BoundingBox,E=[_[0]+S*w.MinTileCol,_[1]-O*(1+w.MaxTileRow),_[0]+S*(1+w.MaxTileCol),_[1]-O*w.MinTileRow];if(void 0!==j&&!jn(j,E)){var k=i.WGS84BoundingBox,A=br("EPSG:4326").getExtent();if(E=j,k)d=k[0]===A[0]&&k[2]===A[2];else{var T=Cr(j,c.SupportedCRS,"EPSG:4326");d=T[0]-1e-10<=A[0]&&T[2]+1e-10>=A[2]}}var C=Sv(c,E,u),P=[],R=n.requestEncoding;if(R=void 0!==R?R:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var I=t.OperationsMetadata.GetTile.DCP.HTTP.Get,N=0,z=I.length;N<z;++N)if(I[N].Constraint){var F=g(I[N].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===R&&(R=F[0]),R!==Mx)break;y(F,Mx)&&P.push(I[N].href)}else I[N].href&&(R=Mx,P.push(I[N].href));return 0===P.length&&(R=_x,i.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,P.push(t.template))}))),{urls:P,layer:n.layer,matrixSet:o,format:s,projection:h,requestEncoding:R,tileGrid:C,style:a,dimensions:f,wrapX:d,crossOrigin:n.crossOrigin}},gR.source.XYZ=Sd,gR.source.Zoomify=Ob,gR.source.Zoomify.CustomTile=Sb,gR.source.common={},gR.source.common.DEFAULT_WMS_VERSION=ig,gR.source.ogcTileUtil={},gR.source.ogcTileUtil.getMapTileUrlTemplate=lg,gR.source.ogcTileUtil.getTileSetInfo=pg,gR.source.ogcTileUtil.getVectorTileUrlTemplate=vg,gR.source.sourcesFromTileGrid=function(t,n){var i=new qf(32),r=t.getExtent();return function(e,o){i.expireCache(),r&&(e=Zn(r,e));var u=t.getZForResolution(o),s=[];return t.forEachTileCoord(e,u,(function(t){var r=t.toString();if(!i.containsKey(r)){var e=n(t);i.set(r,e)}s.push(i.get(r))})),s}},gR.sphere={},gR.sphere.DEFAULT_RADIUS=ar,gR.sphere.getArea=function t(n,i){var r=i||{},e=r.radius||ar,o=r.projection||"EPSG:3857",u=n.getType();u!==Pt.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var s,a,f,h,c,l,v=0;switch(u){case Pt.POINT:case Pt.MULTI_POINT:case Pt.LINE_STRING:case Pt.MULTI_LINE_STRING:case Pt.LINEAR_RING:break;case Pt.POLYGON:for(s=n.getCoordinates(),v=Math.abs(cr(s[0],e)),f=1,h=s.length;f<h;++f)v-=Math.abs(cr(s[f],e));break;case Pt.MULTI_POLYGON:for(f=0,h=(s=n.getCoordinates()).length;f<h;++f)for(a=s[f],v+=Math.abs(cr(a[0],e)),c=1,l=a.length;c<l;++c)v-=Math.abs(cr(a[c],e));break;case Pt.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,h=d.length;f<h;++f)v+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+u)}return v},gR.sphere.getDistance=fr,gR.sphere.getLength=function t(n,i){var r=i||{},e=r.radius||ar,o=r.projection||"EPSG:3857",u=n.getType();u!==Pt.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var s,a,f,h,c,l,v=0;switch(u){case Pt.POINT:case Pt.MULTI_POINT:break;case Pt.LINE_STRING:case Pt.LINEAR_RING:v=hr(s=n.getCoordinates(),e);break;case Pt.MULTI_LINE_STRING:case Pt.POLYGON:for(f=0,h=(s=n.getCoordinates()).length;f<h;++f)v+=hr(s[f],e);break;case Pt.MULTI_POLYGON:for(f=0,h=(s=n.getCoordinates()).length;f<h;++f)for(c=0,l=(a=s[f]).length;c<l;++c)v+=hr(a[c],e);break;case Pt.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,h=d.length;f<h;++f)v+=t(d[f],i);break;default:throw new Error("Unsupported geometry type: "+u)}return v},gR.sphere.offset=lr,gR.string={},gR.string.compareVersions=Hi,gR.string.padNumber=Xi,gR.structs={},gR.structs.LRUCache=qf,gR.structs.LinkedList=id,gR.structs.PriorityQueue=Cs,gR.structs.PriorityQueue.DROP=Ts,gR.structs.RBush=ed,gR.style={},gR.style.Circle=Av,gR.style.Fill=Tv,gR.style.Icon=qv,gR.style.IconImage=Bv,gR.style.IconImage.get=Dv,gR.style.IconImageCache=Ho,gR.style.IconImageCache.shared=Ko,gR.style.Image=Ov,gR.style.RegularShape=Ev,gR.style.Stroke=Vv,gR.style.Style=$v,gR.style.Style.createDefaultStyle=Yv,gR.style.Style.createEditingStyle=Zv,gR.style.Style.toFunction=Hv,gR.style.Text=nd,gR.style.expressions={},gR.style.expressions.Operators=Zl,gR.style.expressions.PALETTE_TEXTURE_ARRAY=pv,gR.style.expressions.arrayToGlsl=tv,gR.style.expressions.colorToGlsl=nv,gR.style.expressions.expressionToGlsl=ev,gR.style.expressions.getStringNumberEquivalent=iv,gR.style.expressions.getValueType=Jl,gR.style.expressions.isTypeUnique=$l,gR.style.expressions.numberToGlsl=Ql,gR.style.expressions.stringToGlsl=rv,gR.style.expressions.uniformNameForVariable=dv,gR.tilecoord={},gR.tilecoord.createOrUpdate=Vf,gR.tilecoord.fromKey=Kf,gR.tilecoord.getCacheKeyForTileKey=Hf,gR.tilecoord.getKey=Xf,gR.tilecoord.getKeyZXY=Wf,gR.tilecoord.hash=Yf,gR.tilecoord.withinExtentAndZ=Zf,gR.tilegrid={},gR.tilegrid.TileGrid=Kh,gR.tilegrid.WMTS=_v,gR.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Sv,gR.tilegrid.common={},gR.tilegrid.common.DEFAULT_MAX_ZOOM=42,gR.tilegrid.common.DEFAULT_TILE_SIZE=Ls,gR.tilegrid.createForExtent=Jh,gR.tilegrid.createForProjection=tc,gR.tilegrid.createXYZ=$h,gR.tilegrid.extentFromProjection=nc,gR.tilegrid.getForProjection=Yh,gR.tilegrid.wrapX=Zh,gR.tileurlfunction={},gR.tileurlfunction.createFromTemplate=ic,gR.tileurlfunction.createFromTemplates=rc,gR.tileurlfunction.createFromTileUrlFunctions=ec,gR.tileurlfunction.expandUrl=uc,gR.tileurlfunction.nullTileUrlFunction=oc,gR.transform={},gR.transform.apply=nn;gR.transform.compose=sn,gR.transform.composeCssTransform=function(t,n,i,r,e,o,u){return hn(sn([1,0,0,1,0,0],t,n,i,r,e,o,u))},gR.transform.create=Zt,gR.transform.determinant=fn,gR.transform.invert=function(t){return an(t,t)},gR.transform.makeInverse=an,gR.transform.makeScale=on,gR.transform.multiply=$t,gR.transform.reset=Jt,gR.transform.rotate=rn,gR.transform.scale=en,gR.transform.set=Qt,gR.transform.setFromArray=tn,gR.transform.toString=hn,gR.transform.translate=un,gR.uri={},gR.uri.appendParams=sc,gR.util={},gR.util.VERSION=s,gR.util.abstract=r,gR.util.getUid=o,gR.vec={},gR.vec.mat4={},gR.vec.mat4.create=Kc,gR.vec.mat4.fromTransform=Yc,gR.webgl={},gR.webgl.ARRAY_BUFFER=fc,gR.webgl.Buffer=Vc,gR.webgl.Buffer.getArrayClassForType=qc,gR.webgl.DYNAMIC_DRAW=lc,gR.webgl.ELEMENT_ARRAY_BUFFER=hc,gR.webgl.FLOAT=vc,gR.webgl.Helper=fl,gR.webgl.Helper.computeAttributesStride=sl,gR.webgl.PaletteTexture=hl,gR.webgl.PostProcessingPass=Hc,gR.webgl.RenderTarget=ll,gR.webgl.STATIC_DRAW=cc,gR.webgl.STREAM_DRAW=35040,gR.webgl.ShaderBuilder={},gR.webgl.ShaderBuilder.ShaderBuilder=bv,gR.webgl.ShaderBuilder.parseLiteralStyle=gv,gR.webgl.TileTexture=xl,gR.webgl.UNSIGNED_BYTE=5121,gR.webgl.UNSIGNED_INT=5125,gR.webgl.UNSIGNED_SHORT=5123,gR.webgl.getContext=pc,gR.webgl.getSupportedExtensions=function(){if(!ac){var t=pc(document.createElement("canvas"));t&&(ac=t.getSupportedExtensions())}return ac},gR.xml={},gR.xml.OBJECT_PROPERTY_NODE_FACTORY=Cc,gR.xml.XML_SCHEMA_INSTANCE_URI=yc,gR.xml.createElementNS=mc,gR.xml.getAllTextContent=wc,gR.xml.Iw=bc,gR.xml.getAttributeNS=xc,gR.xml.getDocument=Bc,gR.xml.getXMLSerializer=Gc,gR.xml.isDocument=gc,gR.xml.makeArrayExtender=_c,gR.xml.makeArrayPusher=Sc,gR.xml.makeArraySerializer=Ac,gR.xml.makeChildAppender=kc,gR.xml.makeObjectPropertyPusher=jc,gR.xml.makeObjectPropertySetter=Ec,gR.xml.makeReplacer=Oc,gR.xml.makeSequence=Pc,gR.xml.makeSimpleNodeFactory=Tc,gR.xml.makeStructureNS=Rc,gR.xml.parse=Mc,gR.xml.parseNode=Ic,gR.xml.pushParseAndPop=Nc,gR.xml.pushSerializeAndPop=Fc,gR.xml.registerDocument=function(t){Dc=t},gR.xml.registerXMLSerializer=function(t){Lc=t},gR.xml.serialize=zc;var xR=gR},150:function(t,n,i){"use strict";i.d(n,{Ie:function(){return h},It:function(){return u},L:function(){return r},L5:function(){return l},P1:function(){return d},Qb:function(){return v},pd:function(){return c},sf:function(){return a}});var r={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},e={};for(var o in r)r.hasOwnProperty(o)&&(e[r[o]]=parseInt(o,10));var u=[e.BitsPerSample,e.ExtraSamples,e.SampleFormat,e.StripByteCounts,e.StripOffsets,e.StripRowCounts,e.TileByteCounts,e.TileOffsets,e.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={};for(var f in s)s.hasOwnProperty(f)&&(a[s[f]]=parseInt(f,10));var h={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},c={Unspecified:0,Assocalpha:1,Unassalpha:2},l={Version:0,AddCompression:1},v={None:0,Deflate:1},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},p={};for(var y in d)d.hasOwnProperty(y)&&(p[d[y]]=parseInt(y,10))}},i={};function r(t){var e=i[t];if(void 0!==e)return e.exports;var o=i[t]={id:t,loaded:!1,exports:{}};return n[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=n,r.d=function(t,n){for(var i in n)r.o(n,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(n,i){return r.f[i](t,n),n}),[]))},r.u=function(t){return t+".ol.js"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},t={},r.l=function(n,i,e,o){if(t[n])t[n].push(i);else{var u,s;if(void 0!==e)for(var a=document.getElementsByTagName("script"),f=0;f<a.length;f++){var h=a[f];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")=="ol:"+e){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.setAttribute("data-webpack","ol:"+e),u.src=n),t[n]=[i];var c=function(i,r){u.onerror=u.onload=null,clearTimeout(l);var e=t[n];if(delete t[n],u.parentNode&&u.parentNode.removeChild(u),e&&e.forEach((function(t){return t(r)})),i)return i(r)},l=setTimeout(c.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=c.bind(null,u.onerror),u.onload=c.bind(null,u.onload),s&&document.head.appendChild(u)}},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var t;r.g.importScripts&&(t=r.g.location+"");var n=r.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t}(),function(){var t={179:0};r.f.j=function(n,i){var e=r.o(t,n)?t[n]:void 0;if(0!==e)if(e)i.push(e[2]);else{var o=new Promise((function(i,r){e=t[n]=[i,r]}));i.push(e[2]=o);var u=r.p+r.u(n),s=new Error;r.l(u,(function(i){if(r.o(t,n)&&(0!==(e=t[n])&&(t[n]=void 0),e)){var o=i&&("load"===i.type?"missing":i.type),u=i&&i.target&&i.target.src;s.message="Loading chunk "+n+" failed.\n("+o+": "+u+")",s.name="ChunkLoadError",s.type=o,s.request=u,e[1](s)}}),"chunk-"+n,n)}};var n=function(n,i){var e,o,u=i[0],s=i[1],a=i[2],f=0;if(u.some((function(n){return 0!==t[n]}))){for(e in s)r.o(s,e)&&(r.m[e]=s[e]);if(a)a(r)}for(n&&n(i);f<u.length;f++)o=u[f],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0},i=self.webpackChunkol=self.webpackChunkol||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}(),r(760);var e=r(854);return e=e.default}()}));
//# sourceMappingURL=ol.js.map