/*! For license information please see ol.js.LICENSE.txt */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ol=n():t.ol=n()}(self,(function(){return function(){var t,n={226:function(t,n){n.read=function(t,n,r,i,e){var o,u,s=8*e-i-1,a=(1<<s)-1,f=a>>1,h=-7,c=r?e-1:0,l=r?-1:1,v=t[n+c];for(c+=l,o=v&(1<<-h)-1,v>>=-h,h+=s;h>0;o=256*o+t[n+c],c+=l,h-=8);for(u=o&(1<<-h)-1,o>>=-h,h+=i;h>0;u=256*u+t[n+c],c+=l,h-=8);if(0===o)o=1-f;else{if(o===a)return u?NaN:1/0*(v?-1:1);u+=Math.pow(2,i),o-=f}return(v?-1:1)*u*Math.pow(2,o-i)},n.write=function(t,n,r,i,e,o){var u,s,a,f=8*o-e-1,h=(1<<f)-1,c=h>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,v=i?0:o-1,d=i?1:-1,p=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(s=isNaN(n)?1:0,u=h):(u=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-u))<1&&(u--,a*=2),(n+=u+c>=1?l/a:l*Math.pow(2,1-c))*a>=2&&(u++,a/=2),u+c>=h?(s=0,u=h):u+c>=1?(s=(n*a-1)*Math.pow(2,e),u+=c):(s=n*Math.pow(2,c-1)*Math.pow(2,e),u=0));e>=8;t[r+v]=255&s,v+=d,s/=256,e-=8);for(u=u<<e|s,f+=e;f>0;t[r+v]=255&u,v+=d,u/=256,f-=8);t[r+v-d]|=128*p}},875:function(t,n,r){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var u=r(692),s=Symbol("max"),a=Symbol("length"),f=Symbol("lengthCalculator"),h=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),v=Symbol("noDisposeOnSet"),d=Symbol("lruList"),p=Symbol("cache"),y=Symbol("updateAgeOnGet"),w=function(){return 1},m=function(){function t(n){if(i(this,t),"number"==typeof n&&(n={max:n}),n||(n={}),n.max&&("number"!=typeof n.max||n.max<0))throw new TypeError("max must be a non-negative number");this[s]=n.max||1/0;var r=n.length||w;if(this[f]="function"!=typeof r?w:r,this[h]=n.stale||!1,n.maxAge&&"number"!=typeof n.maxAge)throw new TypeError("maxAge must be a number");this[c]=n.maxAge||0,this[l]=n.dispose,this[v]=n.noDisposeOnSet||!1,this[y]=n.updateAgeOnGet||!1,this.reset()}return o(t,[{key:"max",get:function(){return this[s]},set:function(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[s]=t||1/0,x(this)}},{key:"allowStale",get:function(){return this[h]},set:function(t){this[h]=!!t}},{key:"maxAge",get:function(){return this[c]},set:function(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[c]=t,x(this)}},{key:"lengthCalculator",get:function(){return this[f]},set:function(t){var n=this;"function"!=typeof t&&(t=w),t!==this[f]&&(this[f]=t,this[a]=0,this[d].forEach((function(t){t.length=n[f](t.value,t.key),n[a]+=t.length}))),x(this)}},{key:"length",get:function(){return this[a]}},{key:"itemCount",get:function(){return this[d].length}},{key:"rforEach",value:function(t,n){n=n||this;for(var r=this[d].tail;null!==r;){var i=r.prev;O(this,t,r,n),r=i}}},{key:"forEach",value:function(t,n){n=n||this;for(var r=this[d].head;null!==r;){var i=r.next;O(this,t,r,n),r=i}}},{key:"keys",value:function(){return this[d].toArray().map((function(t){return t.key}))}},{key:"values",value:function(){return this[d].toArray().map((function(t){return t.value}))}},{key:"reset",value:function(){var t=this;this[l]&&this[d]&&this[d].length&&this[d].forEach((function(n){return t[l](n.key,n.value)})),this[p]=new Map,this[d]=new u,this[a]=0}},{key:"dump",value:function(){var t=this;return this[d].map((function(n){return!g(t,n)&&{k:n.key,v:n.value,e:n.now+(n.maxAge||0)}})).toArray().filter((function(t){return t}))}},{key:"dumpLru",value:function(){return this[d]}},{key:"set",value:function(t,n,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var i=r?Date.now():0,e=this[f](n,t);if(this[p].has(t)){if(e>this[s])return _(this,this[p].get(t)),!1;var o=this[p].get(t).value;return this[l]&&(this[v]||this[l](t,o.value)),o.now=i,o.maxAge=r,o.value=n,this[a]+=e-o.length,o.length=e,this.get(t),x(this),!0}var u=new j(t,n,e,i,r);return u.length>this[s]?(this[l]&&this[l](t,n),!1):(this[a]+=u.length,this[d].unshift(u),this[p].set(t,this[d].head),x(this),!0)}},{key:"has",value:function(t){if(!this[p].has(t))return!1;var n=this[p].get(t).value;return!g(this,n)}},{key:"get",value:function(t){return b(this,t,!0)}},{key:"peek",value:function(t){return b(this,t,!1)}},{key:"pop",value:function(){var t=this[d].tail;return t?(_(this,t),t.value):null}},{key:"del",value:function(t){_(this,this[p].get(t))}},{key:"load",value:function(t){this.reset();for(var n=Date.now(),r=t.length-1;r>=0;r--){var i=t[r],e=i.e||0;if(0===e)this.set(i.k,i.v);else{var o=e-n;o>0&&this.set(i.k,i.v,o)}}}},{key:"prune",value:function(){var t=this;this[p].forEach((function(n,r){return b(t,r,!1)}))}}]),t}(),b=function(t,n,r){var i=t[p].get(n);if(i){var e=i.value;if(g(t,e)){if(_(t,i),!t[h])return}else r&&(t[y]&&(i.value.now=Date.now()),t[d].unshiftNode(i));return e.value}},g=function(t,n){if(!n||!n.maxAge&&!t[c])return!1;var r=Date.now()-n.now;return n.maxAge?r>n.maxAge:t[c]&&r>t[c]},x=function(t){if(t[a]>t[s])for(var n=t[d].tail;t[a]>t[s]&&null!==n;){var r=n.prev;_(t,n),n=r}},_=function(t,n){if(n){var r=n.value;t[l]&&t[l](r.key,r.value),t[a]-=r.length,t[p].delete(r.key),t[d].removeNode(n)}},j=o((function t(n,r,e,o,u){i(this,t),this.key=n,this.value=r,this.length=e,this.now=o,this.maxAge=u||0})),O=function(t,n,r,i){var e=r.value;g(t,e)&&(_(t,r),t[h]||(e=void 0)),e&&n.call(i,e.value,e.key,t)};t.exports=m},98:function(t,n,r){"use strict";t.exports=e;var i=r(226);function e(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var o=4294967296,u=1/o,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===e.Bytes?t.readVarint()+t.pos:t.pos+1}function f(t,n,r){return r?4294967296*n+(t>>>0):4294967296*(n>>>0)+(t>>>0)}function h(t,n,r){var i=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));r.realloc(i);for(var e=r.pos-1;e>=t;e--)r.buf[e+i]=r.buf[e]}function c(t,n){for(var r=0;r<t.length;r++)n.writeVarint(t[r])}function l(t,n){for(var r=0;r<t.length;r++)n.writeSVarint(t[r])}function v(t,n){for(var r=0;r<t.length;r++)n.writeFloat(t[r])}function d(t,n){for(var r=0;r<t.length;r++)n.writeDouble(t[r])}function p(t,n){for(var r=0;r<t.length;r++)n.writeBoolean(t[r])}function y(t,n){for(var r=0;r<t.length;r++)n.writeFixed32(t[r])}function w(t,n){for(var r=0;r<t.length;r++)n.writeSFixed32(t[r])}function m(t,n){for(var r=0;r<t.length;r++)n.writeFixed64(t[r])}function b(t,n){for(var r=0;r<t.length;r++)n.writeSFixed64(t[r])}function g(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+16777216*t[n+3]}function x(t,n,r){t[r]=n,t[r+1]=n>>>8,t[r+2]=n>>>16,t[r+3]=n>>>24}function _(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+(t[n+3]<<24)}e.prototype={destroy:function(){this.buf=null},readFields:function(t,n,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),e=i>>3,o=this.pos;this.type=7&i,t(e,n,this),this.pos===o&&this.skip(i)}return n},readMessage:function(t,n){return this.readFields(t,n,this.readVarint()+this.pos)},readFixed32:function(){var t=g(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=g(this.buf,this.pos)+g(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=g(this.buf,this.pos)+_(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var n,r,i=this.buf;return n=127&(r=i[this.pos++]),r<128?n:(n|=(127&(r=i[this.pos++]))<<7,r<128?n:(n|=(127&(r=i[this.pos++]))<<14,r<128?n:(n|=(127&(r=i[this.pos++]))<<21,r<128?n:function(t,n,r){var i,e,o=r.buf;if(e=o[r.pos++],i=(112&e)>>4,e<128)return f(t,i,n);if(e=o[r.pos++],i|=(127&e)<<3,e<128)return f(t,i,n);if(e=o[r.pos++],i|=(127&e)<<10,e<128)return f(t,i,n);if(e=o[r.pos++],i|=(127&e)<<17,e<128)return f(t,i,n);if(e=o[r.pos++],i|=(127&e)<<24,e<128)return f(t,i,n);if(e=o[r.pos++],i|=(1&e)<<31,e<128)return f(t,i,n);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(r=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,n=this.pos;return this.pos=t,t-n>=12&&s?function(t,n,r){return s.decode(t.subarray(n,r))}(this.buf,n,t):function(t,n,r){var i="",e=n;for(;e<r;){var o,u,s,a=t[e],f=null,h=a>239?4:a>223?3:a>191?2:1;if(e+h>r)break;1===h?a<128&&(f=a):2===h?128==(192&(o=t[e+1]))&&(f=(31&a)<<6|63&o)<=127&&(f=null):3===h?(o=t[e+1],u=t[e+2],128==(192&o)&&128==(192&u)&&((f=(15&a)<<12|(63&o)<<6|63&u)<=2047||f>=55296&&f<=57343)&&(f=null)):4===h&&(o=t[e+1],u=t[e+2],s=t[e+3],128==(192&o)&&128==(192&u)&&128==(192&s)&&((f=(15&a)<<18|(63&o)<<12|(63&u)<<6|63&s)<=65535||f>=1114112)&&(f=null)),null===f?(f=65533,h=1):f>65535&&(f-=65536,i+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),i+=String.fromCharCode(f),e+=h}return i}(this.buf,n,t)},readBytes:function(){var t=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,t);return this.pos=t,n},readPackedVarint:function(t,n){if(this.type!==e.Bytes)return t.push(this.readVarint(n));var r=a(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(n));return t},readPackedSVarint:function(t){if(this.type!==e.Bytes)return t.push(this.readSVarint());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==e.Bytes)return t.push(this.readBoolean());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==e.Bytes)return t.push(this.readFloat());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==e.Bytes)return t.push(this.readDouble());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed32());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed32());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed64());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed64());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed64());return t},skip:function(t){var n=7&t;if(n===e.Varint)for(;this.buf[this.pos++]>127;);else if(n===e.Bytes)this.pos=this.readVarint()+this.pos;else if(n===e.Fixed32)this.pos+=4;else{if(n!==e.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(t,n){this.writeVarint(t<<3|n)},realloc:function(t){for(var n=this.length||16;n<this.pos+t;)n*=2;if(n!==this.length){var r=new Uint8Array(n);r.set(this.buf),this.buf=r,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*u),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*u),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,n){var r,i;t>=0?(r=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,i=i+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(t,n,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,n),function(t,n){var r=(7&t)<<4;if(n.buf[n.pos++]|=r|((t>>>=3)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;n.buf[n.pos++]=127&t}(i,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var n=this.pos;this.pos=function(t,n,r){for(var i,e,o=0;o<n.length;o++){if((i=n.charCodeAt(o))>55295&&i<57344){if(!e){i>56319||o+1===n.length?(t[r++]=239,t[r++]=191,t[r++]=189):e=i;continue}if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,e=i;continue}i=e-55296<<10|i-56320|65536,e=null}else e&&(t[r++]=239,t[r++]=191,t[r++]=189,e=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=63&i|128)}return r}(this.buf,t,this.pos);var r=this.pos-n;r>=128&&h(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),i.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),i.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var n=t.length;this.writeVarint(n),this.realloc(n);for(var r=0;r<n;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,n){this.pos++;var r=this.pos;t(n,this);var i=this.pos-r;i>=128&&h(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,n,r){this.writeTag(t,e.Bytes),this.writeRawMessage(n,r)},writePackedVarint:function(t,n){n.length&&this.writeMessage(t,c,n)},writePackedSVarint:function(t,n){n.length&&this.writeMessage(t,l,n)},writePackedBoolean:function(t,n){n.length&&this.writeMessage(t,p,n)},writePackedFloat:function(t,n){n.length&&this.writeMessage(t,v,n)},writePackedDouble:function(t,n){n.length&&this.writeMessage(t,d,n)},writePackedFixed32:function(t,n){n.length&&this.writeMessage(t,y,n)},writePackedSFixed32:function(t,n){n.length&&this.writeMessage(t,w,n)},writePackedFixed64:function(t,n){n.length&&this.writeMessage(t,m,n)},writePackedSFixed64:function(t,n){n.length&&this.writeMessage(t,b,n)},writeBytesField:function(t,n){this.writeTag(t,e.Bytes),this.writeBytes(n)},writeFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeSFixed64(n)},writeVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeVarint(n)},writeSVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeSVarint(n)},writeStringField:function(t,n){this.writeTag(t,e.Bytes),this.writeString(n)},writeFloatField:function(t,n){this.writeTag(t,e.Fixed32),this.writeFloat(n)},writeDoubleField:function(t,n){this.writeTag(t,e.Fixed64),this.writeDouble(n)},writeBooleanField:function(t,n){this.writeVarintField(t,Boolean(n))}}},72:function(t,n,r){var i,e,o;function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,i,e,o,u){!function t(r,i,e,o,u){for(;o>e;){if(o-e>600){var s=o-e+1,a=i-e+1,f=Math.log(s),h=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*h*(s-h)/s)*(a-s/2<0?-1:1);t(r,i,Math.max(e,Math.floor(i-a*h/s+c)),Math.min(o,Math.floor(i+(s-a)*h/s+c)),u)}var l=r[i],v=e,d=o;for(n(r,e,i),u(r[o],l)>0&&n(r,e,o);v<d;){for(n(r,v,d),v++,d--;u(r[v],l)<0;)v++;for(;u(r[d],l)>0;)d--}0===u(r[e],l)?n(r,e,d):n(r,++d,o),d<=i&&(e=d+1),i<=d&&(o=d-1)}}(t,i,e||0,o||t.length-1,u||r)}function n(t,n,r){var i=t[n];t[n]=t[r],t[r]=i}function r(t,n){return t<n?-1:t>n?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,n,r){if(!r)return n.indexOf(t);for(var i=0;i<n.length;i++)if(r(t,n[i]))return i;return-1}function o(t,n){u(t,0,t.children.length,n,t)}function u(t,n,r,i,e){e||(e=d(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o=n;o<r;o++){var u=t.children[o];s(e,t.leaf?i(u):u)}return e}function s(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function a(t,n){return t.minX-n.minX}function f(t,n){return t.minY-n.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function l(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function v(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(n,r,i,e,o){for(var u=[r,i];u.length;)if(!((i=u.pop())-(r=u.pop())<=e)){var s=r+Math.ceil((i-r)/e/2)*e;t(n,s,r,i,o),u.push(r,s,s,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var n=this.data,r=[];if(!v(t,n))return r;for(var i=this.toBBox,e=[];n;){for(var o=0;o<n.children.length;o++){var u=n.children[o],s=n.leaf?i(u):u;v(t,s)&&(n.leaf?r.push(u):l(t,s)?this._all(u,r):e.push(u))}n=e.pop()}return r},i.prototype.collides=function(t){var n=this.data;if(!v(t,n))return!1;for(var r=[];n;){for(var i=0;i<n.children.length;i++){var e=n.children[i],o=n.leaf?this.toBBox(e):e;if(v(t,o)){if(n.leaf||l(t,o))return!0;r.push(e)}}n=r.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=d([]),this},i.prototype.remove=function(t,n){if(!t)return this;for(var r,i,o,u=this.data,s=this.toBBox(t),a=[],f=[];u||a.length;){if(u||(u=a.pop(),i=a[a.length-1],r=f.pop(),o=!0),u.leaf){var h=e(t,u.children,n);if(-1!==h)return u.children.splice(h,1),a.push(u),this._condense(a),this}o||u.leaf||!l(u,s)?i?(r++,u=i.children[r],o=!1):u=null:(a.push(u),f.push(r),r=0,i=u,u=u.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,n){return t.minX-n.minX},i.prototype.compareMinY=function(t,n){return t.minY-n.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,n){for(var r=[];t;)t.leaf?n.push.apply(n,t.children):r.push.apply(r,t.children),t=r.pop();return n},i.prototype._build=function(t,n,r,i){var e,u=r-n+1,s=this._maxEntries;if(u<=s)return o(e=d(t.slice(n,r+1)),this.toBBox),e;i||(i=Math.ceil(Math.log(u)/Math.log(s)),s=Math.ceil(u/Math.pow(s,i-1))),(e=d([])).leaf=!1,e.height=i;var a=Math.ceil(u/s),f=a*Math.ceil(Math.sqrt(s));p(t,n,r,f,this.compareMinX);for(var h=n;h<=r;h+=f){var c=Math.min(h+f-1,r);p(t,h,c,a,this.compareMinY);for(var l=h;l<=c;l+=a){var v=Math.min(l+a-1,c);e.children.push(this._build(t,l,v,i-1))}}return o(e,this.toBBox),e},i.prototype._chooseSubtree=function(t,n,r,i){for(;i.push(n),!n.leaf&&i.length-1!==r;){for(var e=1/0,o=1/0,u=void 0,s=0;s<n.children.length;s++){var a=n.children[s],f=h(a),c=(l=t,v=a,(Math.max(v.maxX,l.maxX)-Math.min(v.minX,l.minX))*(Math.max(v.maxY,l.maxY)-Math.min(v.minY,l.minY))-f);c<o?(o=c,e=f<e?f:e,u=a):c===o&&f<e&&(e=f,u=a)}n=u||n.children[0]}var l,v;return n},i.prototype._insert=function(t,n,r){var i=r?t:this.toBBox(t),e=[],o=this._chooseSubtree(i,this.data,n,e);for(o.children.push(t),s(o,i);n>=0&&e[n].children.length>this._maxEntries;)this._split(e,n),n--;this._adjustParentBBoxes(i,e,n)},i.prototype._split=function(t,n){var r=t[n],i=r.children.length,e=this._minEntries;this._chooseSplitAxis(r,e,i);var u=this._chooseSplitIndex(r,e,i),s=d(r.children.splice(u,r.children.length-u));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),n?t[n-1].children.push(s):this._splitRoot(r,s)},i.prototype._splitRoot=function(t,n){this.data=d([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,n,r){for(var i,e,o,s,a,f,c,l=1/0,v=1/0,d=n;d<=r-n;d++){var p=u(t,0,d,this.toBBox),y=u(t,d,r,this.toBBox),w=(e=p,o=y,s=Math.max(e.minX,o.minX),a=Math.max(e.minY,o.minY),f=Math.min(e.maxX,o.maxX),c=Math.min(e.maxY,o.maxY),Math.max(0,f-s)*Math.max(0,c-a)),m=h(p)+h(y);w<l?(l=w,i=d,v=m<v?m:v):w===l&&m<v&&(v=m,i=d)}return i||r-n},i.prototype._chooseSplitAxis=function(t,n,r){var i=t.leaf?this.compareMinX:a,e=t.leaf?this.compareMinY:f;this._allDistMargin(t,n,r,i)<this._allDistMargin(t,n,r,e)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,n,r,i){t.children.sort(i);for(var e=this.toBBox,o=u(t,0,n,e),a=u(t,r-n,r,e),f=c(o)+c(a),h=n;h<r-n;h++){var l=t.children[h];s(o,t.leaf?e(l):l),f+=c(o)}for(var v=r-n-1;v>=n;v--){var d=t.children[v];s(a,t.leaf?e(d):d),f+=c(a)}return f},i.prototype._adjustParentBBoxes=function(t,n,r){for(var i=r;i>=0;i--)s(n[i],t)},i.prototype._condense=function(t){for(var n=t.length-1,r=void 0;n>=0;n--)0===t[n].children.length?n>0?(r=t[n-1].children).splice(r.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},i},"object"==u(n)?t.exports=o():void 0===(e="function"==typeof(i=o)?i.call(n,r,n,t):i)||(t.exports=e)},760:function(t,n,r){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e=function(t){"use strict";var n,r=Object.prototype,e=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function f(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{f({},"")}catch(t){f=function(t,n,r){return t[n]=r}}function h(t,n,r,i){var e=n&&n.prototype instanceof w?n:w,o=Object.create(e.prototype),u=new k(i||[]);return o._invoke=function(t,n,r){var i=l;return function(e,o){if(i===d)throw new Error("Generator is already running");if(i===p){if("throw"===e)throw o;return C()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=M(u,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===l)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=d;var a=c(t,n,r);if("normal"===a.type){if(i=r.done?p:v,a.arg===y)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i=p,r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function c(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var l="suspendedStart",v="suspendedYield",d="executing",p="completed",y={};function w(){}function m(){}function b(){}var g={};f(g,u,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(A([])));_&&_!==r&&e.call(_,u)&&(g=_);var j=b.prototype=w.prototype=Object.create(g);function O(t){["next","throw","return"].forEach((function(n){f(t,n,(function(t){return this._invoke(n,t)}))}))}function S(t,n){function r(o,u,s,a){var f=c(t[o],t,u);if("throw"!==f.type){var h=f.arg,l=h.value;return l&&"object"===i(l)&&e.call(l,"__await")?n.resolve(l.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):n.resolve(l).then((function(t){h.value=t,s(h)}),(function(t){return r("throw",t,s,a)}))}a(f.arg)}var o;this._invoke=function(t,i){function e(){return new n((function(n,e){r(t,i,n,e)}))}return o=o?o.then(e,e):e()}}function M(t,r){var i=t.iterator[r.method];if(i===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=n,M(t,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var e=c(i,t.iterator,r.arg);if("throw"===e.type)return r.method="throw",r.arg=e.arg,r.delegate=null,y;var o=e.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=n),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function E(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function T(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function A(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(e.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=n,r.done=!0,r};return o.next=o}}return{next:C}}function C(){return{value:n,done:!0}}return m.prototype=b,f(j,"constructor",b),f(b,"constructor",m),m.displayName=f(b,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,a,"GeneratorFunction")),t.prototype=Object.create(j),t},t.awrap=function(t){return{__await:t}},O(S.prototype),f(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new S(h(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},O(j),f(j,a,"Generator"),f(j,u,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=A,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(i,e){return s.type="throw",s.arg=t,r.next=i,e&&(r.method="next",r.arg=n),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],s=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var a=e.call(u,"catchLoc"),f=e.call(u,"finallyLoc");if(a&&f){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(a){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&e.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),y},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;T(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:A(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=n),y}},t}("object"===i(t=r.nmd(t))?t.exports:{});try{regeneratorRuntime=e}catch(t){"object"===("undefined"==typeof globalThis?"undefined":i(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},617:function(t,n,r){var i=r(279);t.exports=function(t,n,r){var e=r&&r.debug||!1,o=r&&r.startIndex||0;e&&console.log("starting findTagByName with",n," and ",r);var u=i(t,"<".concat(n,"[ >]"),o);if(e&&console.log("start:",u),-1!==u){var s=t.slice(u+n.length),a=i(s,"[ /]"+n+">",0),f=-1===a;f&&(a=i(s,"[ /]>",0));var h=u+n.length+a+1+(f?0:n.length)+1;if(e&&console.log("end:",h),-1!==h){var c=t.slice(u,h);return{inner:f?null:c.slice(c.indexOf(">")+1,c.lastIndexOf("<")),outer:c,start:u,end:h}}}}},51:function(t,n,r){var i=r(617);t.exports=function(t,n,r){for(var e,o=[],u=r&&r.debug||!1,s=r&&r.startIndex||0;e=i(t,n,{debug:u,startIndex:s});)s=e.end,o.push(e);return u&&console.log("findTagsByName found",o.length,"tags"),o}},802:function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t,r,i){var e=i&&i.debug||!1;e&&console.log("getting "+r+" in "+t);var o="object"===n(t)?t.outer:t,u="".concat(r,'\\="([^"]*)"');e&&console.log("pattern:",u);var s=new RegExp(u).exec(o);if(e&&console.log("match:",s),s)return s[1]}},279:function(t){t.exports=function(t,n,r){var i=new RegExp(n).exec(t.slice(r));return i?r+i.index:-1}},518:function(t){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return t};var t={},i=Object.prototype,e=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function f(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{f({},"")}catch(t){f=function(t,n,r){return t[n]=r}}function h(t,n,r,i){var e=n&&n.prototype instanceof v?n:v,o=Object.create(e.prototype),u=new S(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return E()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=_(u,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=c(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===l)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function c(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var l={};function v(){}function d(){}function p(){}var y={};f(y,u,(function(){return this}));var w=Object.getPrototypeOf,m=w&&w(w(M([])));m&&m!==i&&e.call(m,u)&&(y=m);var b=p.prototype=v.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(n){f(t,n,(function(t){return this._invoke(n,t)}))}))}function x(t,r){function i(o,u,s,a){var f=c(t[o],t,u);if("throw"!==f.type){var h=f.arg,l=h.value;return l&&"object"==n(l)&&e.call(l,"__await")?r.resolve(l.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):r.resolve(l).then((function(t){h.value=t,s(h)}),(function(t){return i("throw",t,s,a)}))}a(f.arg)}var o;this._invoke=function(t,n){function e(){return new r((function(r,e){i(t,n,r,e)}))}return o=o?o.then(e,e):e()}}function _(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,_(t,n),"throw"===n.method))return l;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,l;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}function j(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function O(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function M(t){if(t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(e.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=p,f(b,"constructor",p),f(p,"constructor",d),d.displayName=f(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===d||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,f(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(x.prototype),f(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new x(h(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},g(b),f(b,a,"Generator"),f(b,u,(function(){return this})),f(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=M,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=e.call(o,"catchLoc"),a=e.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&e.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),l},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),l}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;O(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}t.exports=function(t){t.prototype[Symbol.iterator]=r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.head;case 1:if(!n){t.next=7;break}return t.next=4,n.value;case 4:n=n.next,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))}},692:function(t,n,r){"use strict";function i(t){var n=this;if(n instanceof i||(n=new i),n.tail=null,n.head=null,n.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){n.push(t)}));else if(arguments.length>0)for(var r=0,e=arguments.length;r<e;r++)n.push(arguments[r]);return n}function e(t,n,r){var i=n===t.head?new s(r,null,n,t):new s(r,n,n.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function o(t,n){t.tail=new s(n,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function u(t,n){t.head=new s(n,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,n,r,i){if(!(this instanceof s))return new s(t,n,r,i);this.list=i,this.value=t,n?(n.next=this,this.prev=n):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}t.exports=i,i.Node=s,i.create=i,i.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var n=t.next,r=t.prev;return n&&(n.prev=r),r&&(r.next=n),t===this.head&&(this.head=n),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,n},i.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var n=this.head;t.list=this,t.next=n,n&&(n.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},i.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var n=this.tail;t.list=this,t.prev=n,n&&(n.next=t),this.tail=t,this.head||(this.head=t),this.length++}},i.prototype.push=function(){for(var t=0,n=arguments.length;t<n;t++)o(this,arguments[t]);return this.length},i.prototype.unshift=function(){for(var t=0,n=arguments.length;t<n;t++)u(this,arguments[t]);return this.length},i.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},i.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},i.prototype.forEach=function(t,n){n=n||this;for(var r=this.head,i=0;null!==r;i++)t.call(n,r.value,i,this),r=r.next},i.prototype.forEachReverse=function(t,n){n=n||this;for(var r=this.tail,i=this.length-1;null!==r;i--)t.call(n,r.value,i,this),r=r.prev},i.prototype.get=function(t){for(var n=0,r=this.head;null!==r&&n<t;n++)r=r.next;if(n===t&&null!==r)return r.value},i.prototype.getReverse=function(t){for(var n=0,r=this.tail;null!==r&&n<t;n++)r=r.prev;if(n===t&&null!==r)return r.value},i.prototype.map=function(t,n){n=n||this;for(var r=new i,e=this.head;null!==e;)r.push(t.call(n,e.value,this)),e=e.next;return r},i.prototype.mapReverse=function(t,n){n=n||this;for(var r=new i,e=this.tail;null!==e;)r.push(t.call(n,e.value,this)),e=e.prev;return r},i.prototype.reduce=function(t,n){var r,i=this.head;if(arguments.length>1)r=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,r=this.head.value}for(var e=0;null!==i;e++)r=t(r,i.value,e),i=i.next;return r},i.prototype.reduceReverse=function(t,n){var r,i=this.tail;if(arguments.length>1)r=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,r=this.tail.value}for(var e=this.length-1;null!==i;e--)r=t(r,i.value,e),i=i.prev;return r},i.prototype.toArray=function(){for(var t=new Array(this.length),n=0,r=this.head;null!==r;n++)t[n]=r.value,r=r.next;return t},i.prototype.toArrayReverse=function(){for(var t=new Array(this.length),n=0,r=this.tail;null!==r;n++)t[n]=r.value,r=r.prev;return t},i.prototype.slice=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var r=new i;if(n<t||n<0)return r;t<0&&(t=0),n>this.length&&(n=this.length);for(var e=0,o=this.head;null!==o&&e<t;e++)o=o.next;for(;null!==o&&e<n;e++,o=o.next)r.push(o.value);return r},i.prototype.sliceReverse=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var r=new i;if(n<t||n<0)return r;t<0&&(t=0),n>this.length&&(n=this.length);for(var e=this.length,o=this.tail;null!==o&&e>n;e--)o=o.prev;for(;null!==o&&e>t;e--,o=o.prev)r.push(o.value);return r},i.prototype.splice=function(t,n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;null!==i&&r<t;r++)i=i.next;var o=[];for(r=0;i&&r<n;r++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<(arguments.length<=2?0:arguments.length-2);r++)i=e(this,i,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return o},i.prototype.reverse=function(){for(var t=this.head,n=this.tail,r=t;null!==r;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=n,this.tail=t,this};try{r(518)(i)}catch(t){}},752:function(){},640:function(){},630:function(){},484:function(t,n,r){"use strict";function i(){return function(){throw new Error("Unimplemented abstract method.")}()}r.d(n,{default:function(){return kG}});var e=0;function o(t){return t.ol_uid||(t.ol_uid=String(++e))}var u,s="6.14.2-dev",a=(u=function(t,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),f=function(t){function n(n){var r=this,i="Assertion failed. See https://openlayers.org/en/"+("v"+s.split("-")[0])+"/doc/errors/#"+n+" for details.";return(r=t.call(this,i)||this).code=n,r.name="AssertionError",r.message=i,r}return a(n,t),n}(Error);function h(t){t.stopPropagation()}var c=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),l="propertychange",v=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function d(t,n,r){for(var i,e,o=r||p,u=0,s=t.length,a=!1;u<s;)(e=+o(t[i=u+(s-u>>1)],n))<0?u=i+1:(s=i,a=!e);return a?u:~u}function p(t,n){return t>n?1:t<n?-1:0}function y(t,n){return t.indexOf(n)>=0}function w(t,n,r){var i=t.length;if(t[0]<=n)return 0;if(n<=t[i-1])return i-1;var e=void 0;if(r>0){for(e=1;e<i;++e)if(t[e]<n)return e-1}else if(r<0){for(e=1;e<i;++e)if(t[e]<=n)return e}else for(e=1;e<i;++e){if(t[e]==n)return e;if(t[e]<n)return"function"==typeof r?r(n,t[e-1],t[e])>0?e-1:e:t[e-1]-n<n-t[e]?e-1:e}return i-1}function m(t,n,r){for(;n<r;){var i=t[n];t[n]=t[r],t[r]=i,++n,--r}}function b(t,n){for(var r=Array.isArray(n)?n:[n],i=r.length,e=0;e<i;e++)t[t.length]=r[e]}function g(t,n){for(var r,i=t.length>>>0,e=0;e<i;e++)if(n(r=t[e],e,t))return r;return null}function x(t,n){var r=t.length;if(r!==n.length)return!1;for(var i=0;i<r;i++)if(t[i]!==n[i])return!1;return!0}function _(t,n){var r;return!t.every((function(i,e){return r=e,!n(i,e,t)}))?r:-1}function j(t,n,r){var i=n||p;return t.every((function(n,e){if(0===e)return!0;var o=i(t[e-1],n);return!(o>0||r&&0===o)}))}function O(){return!0}function S(){return!1}function M(){}function E(t){var n,r,i,e=!1;return function(){var o=Array.prototype.slice.call(arguments);return e&&this===i&&x(o,r)||(e=!0,i=this,r=o,n=t.apply(this,arguments)),n}}function T(t){return function(){var n;try{n=t()}catch(t){return Promise.reject(t)}return n instanceof Promise?n:Promise.resolve(n)}()}var k="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=1,e=arguments.length;i<e;++i){var o=arguments[i];if(null!=o)for(var u in o)o.hasOwnProperty(u)&&(r[u]=o[u])}return r};function A(t){for(var n in t)delete t[n]}var C="function"==typeof Object.values?Object.values:function(t){var n=[];for(var r in t)n.push(t[r]);return n};function P(t){var n;for(n in t)return!1;return!n}var N=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),I=function(t){function n(n){var r=t.call(this)||this;return r.t=n,r._=null,r.O=null,r.S=null,r}return N(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var r=this.S||(this.S={}),i=r[t]||(r[t]=[]);-1===i.indexOf(n)&&i.push(n)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t,r=n?t:t.type,i=this.S&&this.S[r];if(i){var e=n?new c(t):t;e.target||(e.target=this.t||this);var o,u=this.O||(this.O={}),s=this._||(this._={});r in u||(u[r]=0,s[r]=0),++u[r];for(var a=0,f=i.length;a<f;++a)if(!1===(o="handleEvent"in i[a]?i[a].handleEvent(e):i[a].call(this,e))||e.propagationStopped){o=!1;break}if(0==--u[r]){var h=s[r];for(delete s[r];h--;)this.removeEventListener(r,M);delete u[r]}return o}},n.prototype.disposeInternal=function(){this.S&&A(this.S)},n.prototype.getListeners=function(t){return this.S&&this.S[t]||void 0},n.prototype.hasListener=function(t){return!!this.S&&(t?t in this.S:Object.keys(this.S).length>0)},n.prototype.removeEventListener=function(t,n){var r=this.S&&this.S[t];if(r){var i=r.indexOf(n);-1!==i&&(this._&&t in this._?(r[i]=M,++this._[t]):(r.splice(i,1),0===r.length&&delete this.S[t]))}},n}(v),L="change",R="error",G="contextmenu",z="click",F="dblclick",D="dragenter",U="dragover",q="drop",B="keydown",X="keypress",V="load",Y="resize",W="touchmove",Z="wheel";function H(t,n,r,i,e){if(i&&i!==t&&(r=r.bind(i)),e){var o=r;r=function(){t.removeEventListener(n,r),o.apply(this,arguments)}}var u={target:t,type:n,listener:r};return t.addEventListener(n,r),u}function K(t,n,r,i){return H(t,n,r,i,!0)}function $(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),A(t))}var J=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Q=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.T=0,n}return J(n,t),n.prototype.changed=function(){++this.T,this.dispatchEvent(L)},n.prototype.getRevision=function(){return this.T},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var r=t.length,i=new Array(r),e=0;e<r;++e)i[e]=H(this,t[e],n);return i}return H(this,t,n)},n.prototype.onceInternal=function(t,n){var r;if(Array.isArray(t)){var i=t.length;r=new Array(i);for(var e=0;e<i;++e)r[e]=K(this,t[e],n)}else r=K(this,t,n);return n.ol_key=r,r},n.prototype.unInternal=function(t,n){var r=n.ol_key;if(r)tt(r);else if(Array.isArray(t))for(var i=0,e=t.length;i<e;++i)this.removeEventListener(t[i],n);else this.removeEventListener(t,n)},n}(I);function tt(t){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)$(t[n]);else $(t)}Q.prototype.on,Q.prototype.once,Q.prototype.un;var nt=Q,rt=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),it=function(t){function n(n,r,i){var e=t.call(this,n)||this;return e.key=r,e.oldValue=i,e}return rt(n,t),n}(c),et=function(t){function n(n){var r=t.call(this)||this;return r.on,r.once,r.un,o(r),r.A=null,void 0!==n&&r.setProperties(n),r}return rt(n,t),n.prototype.get=function(t){var n;return this.A&&this.A.hasOwnProperty(t)&&(n=this.A[t]),n},n.prototype.getKeys=function(){return this.A&&Object.keys(this.A)||[]},n.prototype.getProperties=function(){return this.A&&k({},this.A)||{}},n.prototype.hasProperties=function(){return!!this.A},n.prototype.notify=function(t,n){var r;r="change:".concat(t),this.hasListener(r)&&this.dispatchEvent(new it(r,t,n)),r=l,this.hasListener(r)&&this.dispatchEvent(new it(r,t,n))},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},n.prototype.set=function(t,n,r){var i=this.A||(this.A={});if(r)i[t]=n;else{var e=i[t];i[t]=n,e!==n&&this.notify(t,e)}},n.prototype.setProperties=function(t,n){for(var r in t)this.set(r,t[r],n)},n.prototype.applyProperties=function(t){t.A&&k(this.A||(this.A={}),t.A)},n.prototype.unset=function(t,n){if(this.A&&t in this.A){var r=this.A[t];delete this.A[t],P(this.A)&&(this.A=null),n||this.notify(t,r)}},n}(nt),ot="add",ut="remove",st=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),at="length",ft=function(t){function n(n,r,i){var e=t.call(this,n)||this;return e.element=r,e.index=i,e}return st(n,t),n}(c),ht=function(t){function n(n,r){var i=t.call(this)||this;i.on,i.once,i.un;var e=r||{};if(i.C=!!e.unique,i.P=n||[],i.C)for(var o=0,u=i.P.length;o<u;++o)i.R(i.P[o],o);return i.G(),i}return st(n,t),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var n=0,r=t.length;n<r;++n)this.push(t[n]);return this},n.prototype.forEach=function(t){for(var n=this.P,r=0,i=n.length;r<i;++r)t(n[r],r,n)},n.prototype.getArray=function(){return this.P},n.prototype.item=function(t){return this.P[t]},n.prototype.getLength=function(){return this.get(at)},n.prototype.insertAt=function(t,n){this.C&&this.R(n),this.P.splice(t,0,n),this.G(),this.dispatchEvent(new ft(ot,n,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.C&&this.R(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},n.prototype.remove=function(t){for(var n=this.P,r=0,i=n.length;r<i;++r)if(n[r]===t)return this.removeAt(r)},n.prototype.removeAt=function(t){var n=this.P[t];return this.P.splice(t,1),this.G(),this.dispatchEvent(new ft(ut,n,t)),n},n.prototype.setAt=function(t,n){var r=this.getLength();if(t<r){this.C&&this.R(n,t);var i=this.P[t];this.P[t]=n,this.dispatchEvent(new ft(ut,i,t)),this.dispatchEvent(new ft(ot,n,t))}else{for(var e=r;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,n)}},n.prototype.G=function(){this.set(at,this.P.length)},n.prototype.R=function(t,n){for(var r=0,i=this.P.length;r<i;++r)if(this.P[r]===t&&r!==n)throw new f(58)},n}(et),ct=0,lt=1,vt=2,dt=3,pt=4;function yt(t){return Math.pow(t,3)}function wt(t){return 1-yt(1-t)}function mt(t){return 3*t*t-2*t*t*t}function bt(t){return t}var gt=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),xt=function(t){function n(n,r,i){var e=t.call(this)||this,o=i||{};return e.tileCoord=n,e.state=r,e.interimTile=null,e.key="",e.D=void 0===o.transition?250:o.transition,e.U={},e.interpolate=!!o.interpolate,e}return gt(n,t),n.prototype.changed=function(){this.dispatchEvent(L)},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==vt)return this.D=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==vt){t.interimTile=null;break}t.getState()==lt?n=t:t.getState()==ct?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(this.state!==dt&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){i()},n.prototype.getAlpha=function(t,n){if(!this.D)return 1;var r=this.U[t];if(r){if(-1===r)return 1}else r=n,this.U[t]=r;var i=n-r+1e3/60;return i>=this.D?1:yt(i/this.D)},n.prototype.inTransition=function(t){return!!this.D&&-1!==this.U[t]},n.prototype.endTransition=function(t){this.D&&(this.U[t]=-1)},n}(I),_t=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),jt=function(t){function n(n){var r=this,i=ct;return(r=t.call(this,n.tileCoord,i,{transition:n.transition,interpolate:n.interpolate})||this).q=n.loader,r.B=null,r.V=null,r.W=n.size||[256,256],r}return _t(n,t),n.prototype.getSize=function(){return this.W},n.prototype.getData=function(){return this.B},n.prototype.getError=function(){return this.V},n.prototype.load=function(){if(this.state===ct||this.state===dt){this.state=lt,this.changed();var t=this;this.q().then((function(n){t.B=n,t.state=vt,t.changed()})).catch((function(n){t.V=n,t.state=dt,t.changed()}))}},n}(xt);function Ot(t,n){if(!t)throw new f(n)}var St=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Mt(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(Ot("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var Et=function(t){function n(n){var r=t.call(this)||this;if(r.on,r.once,r.un,r.H=void 0,r.K="geometry",r.$=null,r.tt=void 0,r.nt=null,r.addChangeListener(r.K,r.rt),n)if("function"==typeof n.getSimplifiedGeometry){var i=n;r.setGeometry(i)}else{var e=n;r.setProperties(e)}return r}return St(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var i=this.getStyle();return i&&t.setStyle(i),t},n.prototype.getGeometry=function(){return this.get(this.K)},n.prototype.getId=function(){return this.H},n.prototype.getGeometryName=function(){return this.K},n.prototype.getStyle=function(){return this.$},n.prototype.getStyleFunction=function(){return this.tt},n.prototype.it=function(){this.changed()},n.prototype.rt=function(){this.nt&&($(this.nt),this.nt=null);var t=this.getGeometry();t&&(this.nt=H(t,L,this.it,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.K,t)},n.prototype.setStyle=function(t){this.$=t,this.tt=t?Mt(t):void 0,this.changed()},n.prototype.setId=function(t){this.H=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.K,this.rt),this.K=t,this.addChangeListener(this.K,this.rt),this.rt()},n}(et),Tt="XY",kt="XYZ",At="XYM",Ct="XYZM",Pt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Nt={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},It={9001:Nt.METERS,9002:Nt.FEET,9003:Nt.USFEET,9101:Nt.RADIANS,9102:Nt.DEGREES};function Lt(t){return It[t]}var Rt={};Rt[Nt.RADIANS]=6370997/(2*Math.PI),Rt[Nt.DEGREES]=2*Math.PI*6370997/360,Rt[Nt.FEET]=.3048,Rt[Nt.METERS]=1,Rt[Nt.USFEET]=1200/3937;var Gt,zt=Nt,Ft="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Dt=-1!==Ft.indexOf("firefox"),Ut=-1!==Ft.indexOf("safari")&&-1==Ft.indexOf("chrom"),qt=Ut&&!!(Ft.indexOf("version/15.4")>=0||Ft.match(/cpu (os|iphone os) 15_4 like mac os x/)),Bt=-1!==Ft.indexOf("webkit")&&-1==Ft.indexOf("edge"),Xt=-1!==Ft.indexOf("macintosh"),Vt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Yt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Wt="undefined"!=typeof Image&&Image.prototype.decode,Zt=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return t}(),Ht=new Array(6);function Kt(){return[1,0,0,1,0,0]}function $t(t){return Qt(t,1,0,0,1,0,0)}function Jt(t,n){var r=t[0],i=t[1],e=t[2],o=t[3],u=t[4],s=t[5],a=n[0],f=n[1],h=n[2],c=n[3],l=n[4],v=n[5];return t[0]=r*a+e*f,t[1]=i*a+o*f,t[2]=r*h+e*c,t[3]=i*h+o*c,t[4]=r*l+e*v+u,t[5]=i*l+o*v+s,t}function Qt(t,n,r,i,e,o,u){return t[0]=n,t[1]=r,t[2]=i,t[3]=e,t[4]=o,t[5]=u,t}function tn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function nn(t,n){var r=n[0],i=n[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function rn(t,n){var r=Math.cos(n),i=Math.sin(n);return Jt(t,Qt(Ht,r,i,-i,r,0,0))}function en(t,n,r){return Jt(t,Qt(Ht,n,0,0,r,0,0))}function on(t,n,r){return Qt(t,n,0,0,r,0,0)}function un(t,n,r){return Jt(t,Qt(Ht,1,0,0,1,n,r))}function sn(t,n,r,i,e,o,u,s){var a=Math.sin(o),f=Math.cos(o);return t[0]=i*f,t[1]=e*a,t[2]=-i*a,t[3]=e*f,t[4]=u*i*f-s*i*a+n,t[5]=u*e*a+s*e*f+r,t}function an(t,n){var r=fn(n);Ot(0!==r,32);var i=n[0],e=n[1],o=n[2],u=n[3],s=n[4],a=n[5];return t[0]=u/r,t[1]=-e/r,t[2]=-o/r,t[3]=i/r,t[4]=(o*a-u*s)/r,t[5]=-(i*a-e*s)/r,t}function fn(t){return t[0]*t[3]-t[1]*t[2]}function hn(t){var n="matrix("+t.join(", ")+")";if(Yt)return n;var r=Gt||(Gt=document.createElement("div"));return r.style.transform=n,r.style.transform}var cn="bottom-left",ln="bottom-right",vn="top-left",dn="top-right",pn=0,yn=1,wn=2,mn=4,bn=8,gn=16;function xn(t){for(var n=kn(),r=0,i=t.length;r<i;++r)Gn(n,t[r]);return n}function _n(t,n,r){return r?(r[0]=t[0]-n,r[1]=t[1]-n,r[2]=t[2]+n,r[3]=t[3]+n,r):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function jn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function On(t,n,r){var i,e;return(i=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*i+(e=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*e}function Sn(t,n){return En(t,n[0],n[1])}function Mn(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function En(t,n,r){return t[0]<=n&&n<=t[2]&&t[1]<=r&&r<=t[3]}function Tn(t,n){var r=t[0],i=t[1],e=t[2],o=t[3],u=n[0],s=n[1],a=pn;return u<r?a|=gn:u>e&&(a|=mn),s<i?a|=bn:s>o&&(a|=wn),a===pn&&(a=yn),a}function kn(){return[1/0,1/0,-1/0,-1/0]}function An(t,n,r,i,e){return e?(e[0]=t,e[1]=n,e[2]=r,e[3]=i,e):[t,n,r,i]}function Cn(t){return An(1/0,1/0,-1/0,-1/0,t)}function Pn(t,n){var r=t[0],i=t[1];return An(r,i,r,i,n)}function Nn(t,n,r,i,e){return Fn(Cn(e),t,n,r,i)}function In(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function Ln(t,n,r){return Math.abs(t[0]-n[0])<r&&Math.abs(t[2]-n[2])<r&&Math.abs(t[1]-n[1])<r&&Math.abs(t[3]-n[3])<r}function Rn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function Gn(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function zn(t,n){for(var r=0,i=n.length;r<i;++r)Gn(t,n[r]);return t}function Fn(t,n,r,i,e){for(;r<i;r+=e)Un(t,n[r],n[r+1]);return t}function Dn(t,n){for(var r=0,i=n.length;r<i;++r)zn(t,n[r]);return t}function Un(t,n,r){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],r)}function qn(t,n){var r;return(r=n(Xn(t)))||(r=n(Vn(t)))||(r=n(Jn(t)))?r:(r=n($n(t)))||!1}function Bn(t){var n=0;return nr(t)||(n=Qn(t)*Hn(t)),n}function Xn(t){return[t[0],t[1]]}function Vn(t){return[t[2],t[1]]}function Yn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Wn(t,n){var r;return n===cn?r=Xn(t):n===ln?r=Vn(t):n===vn?r=$n(t):n===dn?r=Jn(t):Ot(!1,13),r}function Zn(t,n,r,i,e){var o=n*i[0]/2,u=n*i[1]/2,s=Math.cos(r),a=Math.sin(r),f=o*s,h=o*a,c=u*s,l=u*a,v=t[0],d=t[1],p=v-f+l,y=v-f-l,w=v+f-l,m=v+f+l,b=d-h-c,g=d-h+c,x=d+h+c,_=d+h-c;return An(Math.min(p,y,w,m),Math.min(b,g,x,_),Math.max(p,y,w,m),Math.max(b,g,x,_),e)}function Hn(t){return t[3]-t[1]}function Kn(t,n,r){var i=r||[1/0,1/0,-1/0,-1/0];return tr(t,n)?(t[0]>n[0]?i[0]=t[0]:i[0]=n[0],t[1]>n[1]?i[1]=t[1]:i[1]=n[1],t[2]<n[2]?i[2]=t[2]:i[2]=n[2],t[3]<n[3]?i[3]=t[3]:i[3]=n[3]):Cn(i),i}function $n(t){return[t[0],t[3]]}function Jn(t){return[t[2],t[3]]}function Qn(t){return t[2]-t[0]}function tr(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function nr(t){return t[2]<t[0]||t[3]<t[1]}function rr(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function ir(t,n){var r=(t[2]-t[0])/2*(n-1),i=(t[3]-t[1])/2*(n-1);t[0]-=r,t[2]+=r,t[1]-=i,t[3]+=i}function er(t,n,r){var i=!1,e=Tn(t,n),o=Tn(t,r);if(e===yn||o===yn)i=!0;else{var u=t[0],s=t[1],a=t[2],f=t[3],h=n[0],c=n[1],l=r[0],v=r[1],d=(v-c)/(l-h),p=void 0,y=void 0;o&wn&&!(e&wn)&&(i=(p=l-(v-f)/d)>=u&&p<=a),i||!(o&mn)||e&mn||(i=(y=v-(l-a)*d)>=s&&y<=f),i||!(o&bn)||e&bn||(i=(p=l-(v-s)/d)>=u&&p<=a),i||!(o&gn)||e&gn||(i=(y=v-(l-u)*d)>=s&&y<=f)}return i}function or(t,n,r,i){var e=[];if(i>1)for(var o=t[2]-t[0],u=t[3]-t[1],s=0;s<i;++s)e.push(t[0]+o*s/i,t[1],t[2],t[1]+u*s/i,t[2]-o*s/i,t[3],t[0],t[3]-u*s/i);else e=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(e,e,2);for(var a=[],f=[],h=(s=0,e.length);s<h;s+=2)a.push(e[s]),f.push(e[s+1]);return function(t,n,r){return An(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),r)}(a,f,r)}function ur(t,n){var r=n.getExtent(),i=Yn(t);if(n.canWrapX()&&(i[0]<r[0]||i[0]>=r[2])){var e=Qn(r),o=Math.floor((i[0]-r[0])/e)*e;t[0]-=o,t[2]-=o}return t}function sr(t,n){if(n.canWrapX()){var r=n.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];ur(t,n);var i=Qn(r);if(Qn(t)>i)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+i,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-i,t[3]]]}return[t]}var ar=function(){function t(t){this.et=t.code,this.ot=t.units,this.ut=void 0!==t.extent?t.extent:null,this.st=void 0!==t.worldExtent?t.worldExtent:null,this.ft=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.ht=void 0!==t.global&&t.global,this.ct=!(!this.ht||!this.ut),this.lt=t.getPointResolution,this.vt=null,this.dt=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.ct},t.prototype.getCode=function(){return this.et},t.prototype.getExtent=function(){return this.ut},t.prototype.getUnits=function(){return this.ot},t.prototype.getMetersPerUnit=function(){return this.dt||Rt[this.ot]},t.prototype.getWorldExtent=function(){return this.st},t.prototype.getAxisOrientation=function(){return this.ft},t.prototype.isGlobal=function(){return this.ht},t.prototype.setGlobal=function(t){this.ht=t,this.ct=!(!t||!this.ut)},t.prototype.getDefaultTileGrid=function(){return this.vt},t.prototype.setDefaultTileGrid=function(t){this.vt=t},t.prototype.setExtent=function(t){this.ut=t,this.ct=!(!this.ht||!t)},t.prototype.setWorldExtent=function(t){this.st=t},t.prototype.setGetPointResolution=function(t){this.lt=t},t.prototype.getPointResolutionFunc=function(){return this.lt},t}();function fr(t,n,r){return Math.min(Math.max(t,n),r)}var hr="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2},cr="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function lr(t,n,r,i,e,o){var u=e-r,s=o-i;if(0!==u||0!==s){var a=((t-r)*u+(n-i)*s)/(u*u+s*s);a>1?(r=e,i=o):a>0&&(r+=u*a,i+=s*a)}return vr(t,n,r,i)}function vr(t,n,r,i){var e=r-t,o=i-n;return e*e+o*o}function dr(t){for(var n=t.length,r=0;r<n;r++){for(var i=r,e=Math.abs(t[r][r]),o=r+1;o<n;o++){var u=Math.abs(t[o][r]);u>e&&(e=u,i=o)}if(0===e)return null;var s=t[i];t[i]=t[r],t[r]=s;for(var a=r+1;a<n;a++)for(var f=-t[a][r]/t[r][r],h=r;h<n+1;h++)r==h?t[a][h]=0:t[a][h]+=f*t[r][h]}for(var c=new Array(n),l=n-1;l>=0;l--){c[l]=t[l][n]/t[l][l];for(var v=l-1;v>=0;v--)t[v][n]-=t[v][l]*c[l]}return c}function pr(t){return 180*t/Math.PI}function yr(t){return t*Math.PI/180}function wr(t,n){var r=t%n;return r*n<0?r+n:r}function mr(t,n,r){return t+r*(n-t)}function br(t,n){var r=Math.pow(10,n);return Math.round(t*r)/r}function gr(t,n){return Math.round(br(t,n))}function xr(t,n){return Math.floor(br(t,n))}function _r(t,n){return Math.ceil(br(t,n))}var jr=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Or=6378137,Sr=Math.PI*Or,Mr=[-Sr,-Sr,Sr,Sr],Er=[-180,-85,180,85],Tr=Or*Math.log(Math.tan(Math.PI/2)),kr=function(t){function n(n){return t.call(this,{code:n,units:zt.METERS,extent:Mr,global:!0,worldExtent:Er,getPointResolution:function(t,n){return t/hr(n[1]/Or)}})||this}return jr(n,t),n}(ar),Ar=[new kr("EPSG:3857"),new kr("EPSG:102100"),new kr("EPSG:102113"),new kr("EPSG:900913"),new kr("http://www.opengis.net/def/crs/EPSG/0/3857"),new kr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Cr(t,n,r){var i=t.length,e=r>1?r:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(i));for(var u=0;u<i;u+=e){o[u]=Sr*t[u]/180;var s=Or*Math.log(Math.tan(Math.PI*(+t[u+1]+90)/360));s>Tr?s=Tr:s<-Tr&&(s=-Tr),o[u+1]=s}return o}function Pr(t,n,r){var i=t.length,e=r>1?r:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(i));for(var u=0;u<i;u+=e)o[u]=180*t[u]/Sr,o[u+1]=360*Math.atan(Math.exp(t[u+1]/Or))/Math.PI-90;return o}var Nr=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ir=6378137,Lr=[-180,-90,180,90],Rr=Math.PI*Ir/180,Gr=function(t){function n(n,r){return t.call(this,{code:n,units:zt.DEGREES,extent:Lr,axisOrientation:r,global:!0,metersPerUnit:Rr,worldExtent:Lr})||this}return Nr(n,t),n}(ar),zr=[new Gr("CRS:84"),new Gr("EPSG:4326","neu"),new Gr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Gr("urn:ogc:def:crs:OGC:2:84"),new Gr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Gr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Gr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Fr={};function Dr(){Fr={}}function Ur(t){return Fr[t]||Fr[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function qr(t,n){Fr[t]=n}var Br={};function Xr(){Br={}}function Vr(t,n,r){var i=t.getCode(),e=n.getCode();i in Br||(Br[i]={}),Br[i][e]=r}function Yr(t,n){var r;return t in Br&&n in Br[t]&&(r=Br[t][n]),r}function Wr(t,n,r){var i=void 0!==r?t.toFixed(r):""+t,e=i.indexOf(".");return(e=-1===e?i.length:e)>n?i:new Array(1+n-e).join("0")+i}function Zr(t,n){for(var r=(""+t).split("."),i=(""+n).split("."),e=0;e<Math.max(r.length,i.length);e++){var o=parseInt(r[e]||"0",10),u=parseInt(i[e]||"0",10);if(o>u)return 1;if(u>o)return-1}return 0}function Hr(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function Kr(t,n){var r=n.getRadius(),i=n.getCenter(),e=i[0],o=i[1],u=t[0]-e,s=t[1]-o;0===u&&0===s&&(u=1);var a=Math.sqrt(u*u+s*s);return[e+r*u/a,o+r*s/a]}function $r(t,n){var r,i,e=t[0],o=t[1],u=n[0],s=n[1],a=u[0],f=u[1],h=s[0],c=s[1],l=h-a,v=c-f,d=0===l&&0===v?0:(l*(e-a)+v*(o-f))/(l*l+v*v||0);return d<=0?(r=a,i=f):d>=1?(r=h,i=c):(r=a+d*l,i=f+d*v),[r,i]}function Jr(t,n,r){var i=wr(n+180,360)-180,e=Math.abs(3600*i),o=r||0,u=Math.pow(10,o),s=Math.floor(e/3600),a=Math.floor((e-3600*s)/60),f=e-3600*s-60*a;return(f=Math.ceil(f*u)/u)>=60&&(f=0,a+=1),a>=60&&(a=0,s+=1),s+"° "+Wr(a,2)+"′ "+Wr(f,2,o)+"″"+(0==i?"":" "+t.charAt(i<0?1:0))}function Qr(t,n,r){return t?n.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function ti(t,n){for(var r=!0,i=t.length-1;i>=0;--i)if(t[i]!=n[i]){r=!1;break}return r}function ni(t,n){var r=Math.cos(n),i=Math.sin(n),e=t[0]*r-t[1]*i,o=t[1]*r+t[0]*i;return t[0]=e,t[1]=o,t}function ri(t,n){return t[0]*=n,t[1]*=n,t}function ii(t,n){var r=t[0]-n[0],i=t[1]-n[1];return r*r+i*i}function ei(t,n){return Math.sqrt(ii(t,n))}function oi(t,n){return ii(t,$r(t,n))}function ui(t,n){return Qr(t,"{x}, {y}",n)}function si(t,n){if(n.canWrapX()){var r=Qn(n.getExtent()),i=ai(t,n,r);i&&(t[0]-=i*r)}return t}function ai(t,n,r){var i=n.getExtent(),e=0;if(n.canWrapX()&&(t[0]<i[0]||t[0]>i[2])){var o=r||Qn(i);e=Math.floor((t[0]-i[0])/o)}return e}var fi=6371008.8;function hi(t,n,r){var i=r||fi,e=yr(t[1]),o=yr(n[1]),u=(o-e)/2,s=yr(n[0]-t[0])/2,a=Math.sin(u)*Math.sin(u)+Math.sin(s)*Math.sin(s)*Math.cos(e)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function ci(t,n){for(var r=0,i=0,e=t.length;i<e-1;++i)r+=hi(t[i],t[i+1],n);return r}function li(t,n){for(var r=0,i=t.length,e=t[i-1][0],o=t[i-1][1],u=0;u<i;u++){var s=t[u][0],a=t[u][1];r+=yr(s-e)*(2+Math.sin(yr(o))+Math.sin(yr(a))),e=s,o=a}return r*n*n/2}function vi(t,n,r,i){var e=i||fi,o=yr(t[1]),u=yr(t[0]),s=n/e,a=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(r));return[pr(u+Math.atan2(Math.sin(r)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(a))),pr(a)]}var di=!0;function pi(t){di=!(void 0===t||t)}function yi(t,n,r){var i;if(void 0!==n){for(var e=0,o=t.length;e<o;++e)n[e]=t[e];i=n}else i=t.slice();return i}function wi(t,n,r){if(void 0!==n&&t!==n){for(var i=0,e=t.length;i<e;++i)n[i]=t[i];t=n}return t}function mi(t){qr(t.getCode(),t),Vr(t,t,yi)}function bi(t){t.forEach(mi)}function gi(t){return"string"==typeof t?Ur(t):t||null}function xi(t,n,r,i){var e,o=(t=gi(t)).getPointResolutionFunc();if(o){if(e=o(n,r),i&&i!==t.getUnits())(s=t.getMetersPerUnit())&&(e=e*s/Rt[i])}else{var u=t.getUnits();if(u==zt.DEGREES&&!i||i==zt.DEGREES)e=n;else{var s,a=ki(t,gi("EPSG:4326"));if(a===wi&&u!==zt.DEGREES)e=n*t.getMetersPerUnit();else{var f=[r[0]-n/2,r[1],r[0]+n/2,r[1],r[0],r[1]-n/2,r[0],r[1]+n/2];e=(hi((f=a(f,f,2)).slice(0,2),f.slice(2,4))+hi(f.slice(4,6),f.slice(6,8)))/2}void 0!==(s=i?Rt[i]:t.getMetersPerUnit())&&(e/=s)}}return e}function _i(t){bi(t),t.forEach((function(n){t.forEach((function(t){n!==t&&Vr(n,t,yi)}))}))}function ji(t,n,r,i){t.forEach((function(t){n.forEach((function(n){Vr(t,n,r),Vr(n,t,i)}))}))}function Oi(t,n){return t?"string"==typeof t?gi(t):t:gi(n)}function Si(t){return function(n,r,i){for(var e=n.length,o=void 0!==i?i:2,u=void 0!==r?r:new Array(e),s=0;s<e;s+=o)for(var a=t(n.slice(s,s+o)),f=a.length,h=0,c=o;h<c;++h)u[s+h]=h>=f?n[s+h]:a[h];return u}}function Mi(t,n,r,i){var e=gi(t),o=gi(n);Vr(e,o,Si(r)),Vr(o,e,Si(i))}function Ei(t,n){return pi(),Ci(t,"EPSG:4326",void 0!==n?n:"EPSG:3857")}function Ti(t,n){if(t===n)return!0;var r=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||ki(t,n)===yi)&&r}function ki(t,n){var r=Yr(t.getCode(),n.getCode());return r||(r=wi),r}function Ai(t,n){return ki(gi(t),gi(n))}function Ci(t,n,r){return Ai(n,r)(t,void 0,t.length)}function Pi(t,n,r,i){return or(t,Ai(n,r),void 0,i)}var Ni=null;function Ii(t){Ni=gi(t)}function Li(){return Ni}function Ri(t,n){return Ni?Ci(t,n,Ni):t}function Gi(t,n){return Ni?Ci(t,Ni,n):(di&&!ti(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(di=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function zi(t,n){return Ni?Pi(t,n,Ni):t}function Fi(t,n){return Ni?Pi(t,Ni,n):t}function Di(t,n){if(!Ni)return t;var r=gi(n).getUnits(),i=Ni.getUnits();return r&&i?t*Rt[r]/Rt[i]:t}function Ui(t,n){if(!Ni)return t;var r=gi(n).getUnits(),i=Ni.getUnits();return r&&i?t*Rt[i]/Rt[r]:t}function qi(t,n,r){return function(i){var e,o;if(t.canWrapX()){var u=t.getExtent(),s=Qn(u);(o=ai(i=i.slice(0),t,s))&&(i[0]=i[0]-o*s),i[0]=fr(i[0],u[0],u[2]),i[1]=fr(i[1],u[1],u[3]),e=r(i)}else e=r(i);return o&&n.canWrapX()&&(e[0]+=o*Qn(n.getExtent())),e}}function Bi(){_i(Ar),_i(zr),ji(zr,Ar,Cr,Pr)}function Xi(t,n,r,i,e,o){for(var u=o||[],s=0,a=n;a<r;a+=i){var f=t[a],h=t[a+1];u[s++]=e[0]*f+e[2]*h+e[4],u[s++]=e[1]*f+e[3]*h+e[5]}return o&&u.length!=s&&(u.length=s),u}function Vi(t,n,r,i,e,o,u){for(var s=u||[],a=Math.cos(e),f=Math.sin(e),h=o[0],c=o[1],l=0,v=n;v<r;v+=i){var d=t[v]-h,p=t[v+1]-c;s[l++]=h+d*a-p*f,s[l++]=c+d*f+p*a;for(var y=v+2;y<v+i;++y)s[l++]=t[y]}return u&&s.length!=l&&(s.length=l),s}function Yi(t,n,r,i,e,o,u,s){for(var a=s||[],f=u[0],h=u[1],c=0,l=n;l<r;l+=i){var v=t[l]-f,d=t[l+1]-h;a[c++]=f+e*v,a[c++]=h+o*d;for(var p=l+2;p<l+i;++p)a[c++]=t[p]}return s&&a.length!=c&&(a.length=c),a}function Wi(t,n,r,i,e,o,u){for(var s=u||[],a=0,f=n;f<r;f+=i){s[a++]=t[f]+e,s[a++]=t[f+1]+o;for(var h=f+2;h<f+i;++h)s[a++]=t[h]}return u&&s.length!=a&&(s.length=a),s}Bi();var Zi=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Hi=[1,0,0,1,0,0],Ki=function(t){function n(){var n=t.call(this)||this;return n.ut=[1/0,1/0,-1/0,-1/0],n.yt=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=E((function(t,n,r){if(!r)return this.getSimplifiedGeometry(n);var i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})),n}return Zi(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},n.prototype.clone=function(){return i()},n.prototype.closestPointXY=function(t,n,r,e){return i()},n.prototype.containsXY=function(t,n){var r=this.getClosestPoint([t,n]);return r[0]===t&&r[1]===n},n.prototype.getClosestPoint=function(t,n){var r=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return i()},n.prototype.getExtent=function(t){if(this.yt!=this.getRevision()){var n=this.computeExtent(this.ut);(isNaN(n[0])||isNaN(n[1]))&&Cn(n),this.yt=this.getRevision()}return rr(this.ut,t)},n.prototype.rotate=function(t,n){i()},n.prototype.scale=function(t,n,r){i()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return i()},n.prototype.getType=function(){return i()},n.prototype.applyTransform=function(t){i()},n.prototype.intersectsExtent=function(t){return i()},n.prototype.translate=function(t,n){i()},n.prototype.transform=function(t,n){var r=gi(t),i=r.getUnits()==zt.TILE_PIXELS?function(t,i,e){var o=r.getExtent(),u=r.getWorldExtent(),s=Hn(u)/Hn(o);return sn(Hi,u[0],u[3],s,-s,0,0,0),Xi(t,0,t.length,e,Hi,i),Ai(r,n)(t,i,e)}:Ai(r,n);return this.applyTransform(i),this},n}(et),$i=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Ji(t){var n;return t==Tt?n=2:t==kt||t==At?n=3:t==Ct&&(n=4),n}function Qi(t,n,r){var i=t.getFlatCoordinates();if(i){var e=t.getStride();return Xi(i,0,i.length,e,n,r)}return null}var te=function(t){function n(){var n=t.call(this)||this;return n.layout=Tt,n.stride=2,n.flatCoordinates=null,n}return $i(n,t),n.prototype.computeExtent=function(t){return Nn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return i()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,n){this.stride=Ji(t),this.layout=t,this.flatCoordinates=n},n.prototype.setCoordinates=function(t,n){i()},n.prototype.setLayout=function(t,n,r){var i;if(t)i=Ji(t);else{for(var e=0;e<r;++e){if(0===n.length)return this.layout=Tt,void(this.stride=2);n=n[0]}t=function(t){var n;2==t?n=Tt:3==t?n=kt:4==t&&(n=Ct);return n}(i=n.length)}this.layout=t,this.stride=i},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,n){var r=this.getFlatCoordinates();if(r){var i=this.getStride();Vi(r,0,r.length,i,t,n,r),this.changed()}},n.prototype.scale=function(t,n,r){var i=n;void 0===i&&(i=t);var e=r;e||(e=Yn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var u=this.getStride();Yi(o,0,o.length,u,t,i,e,o),this.changed()}},n.prototype.translate=function(t,n){var r=this.getFlatCoordinates();if(r){var i=this.getStride();Wi(r,0,r.length,i,t,n,r),this.changed()}},n}(Ki);function ne(t,n,r,i,e,o,u){var s,a=t[n],f=t[n+1],h=t[r]-a,c=t[r+1]-f;if(0===h&&0===c)s=n;else{var l=((e-a)*h+(o-f)*c)/(h*h+c*c);if(l>1)s=r;else{if(l>0){for(var v=0;v<i;++v)u[v]=mr(t[n+v],t[r+v],l);return void(u.length=i)}s=n}}for(v=0;v<i;++v)u[v]=t[s+v];u.length=i}function re(t,n,r,i,e){var o=t[n],u=t[n+1];for(n+=i;n<r;n+=i){var s=t[n],a=t[n+1],f=vr(o,u,s,a);f>e&&(e=f),o=s,u=a}return e}function ie(t,n,r,i,e){for(var o=0,u=r.length;o<u;++o){var s=r[o];e=re(t,n,s,i,e),n=s}return e}function ee(t,n,r,i,e){for(var o=0,u=r.length;o<u;++o){var s=r[o];e=ie(t,n,s,i,e),n=s[s.length-1]}return e}function oe(t,n,r,i,e,o,u,s,a,f,h){if(n==r)return f;var c,l;if(0===e){if((l=vr(u,s,t[n],t[n+1]))<f){for(c=0;c<i;++c)a[c]=t[n+c];return a.length=i,l}return f}for(var v=h||[NaN,NaN],d=n+i;d<r;)if(ne(t,d-i,d,i,u,s,v),(l=vr(u,s,v[0],v[1]))<f){for(f=l,c=0;c<i;++c)a[c]=v[c];a.length=i,d+=i}else d+=i*Math.max((Math.sqrt(l)-Math.sqrt(f))/e|0,1);if(o&&(ne(t,r-i,n,i,u,s,v),(l=vr(u,s,v[0],v[1]))<f)){for(f=l,c=0;c<i;++c)a[c]=v[c];a.length=i}return f}function ue(t,n,r,i,e,o,u,s,a,f,h){for(var c=h||[NaN,NaN],l=0,v=r.length;l<v;++l){var d=r[l];f=oe(t,n,d,i,e,o,u,s,a,f,c),n=d}return f}function se(t,n,r,i,e,o,u,s,a,f,h){for(var c=h||[NaN,NaN],l=0,v=r.length;l<v;++l){var d=r[l];f=ue(t,n,d,i,e,o,u,s,a,f,c),n=d[d.length-1]}return f}function ae(t,n,r,i){for(var e=0,o=r.length;e<o;++e)t[n++]=r[e];return n}function fe(t,n,r,i){for(var e=0,o=r.length;e<o;++e)for(var u=r[e],s=0;s<i;++s)t[n++]=u[s];return n}function he(t,n,r,i,e){for(var o=e||[],u=0,s=0,a=r.length;s<a;++s){var f=fe(t,n,r[s],i);o[u++]=f,n=f}return o.length=u,o}function ce(t,n,r,i,e){for(var o=e||[],u=0,s=0,a=r.length;s<a;++s){var f=he(t,n,r[s],i,o[u]);o[u++]=f,n=f[f.length-1]}return o.length=u,o}function le(t,n,r,i,e,o,u){var s=(r-n)/i;if(s<3){for(;n<r;n+=i)o[u++]=t[n],o[u++]=t[n+1];return u}var a=new Array(s);a[0]=1,a[s-1]=1;for(var f=[n,r-i],h=0;f.length>0;){for(var c=f.pop(),l=f.pop(),v=0,d=t[l],p=t[l+1],y=t[c],w=t[c+1],m=l+i;m<c;m+=i){var b=lr(t[m],t[m+1],d,p,y,w);b>v&&(h=m,v=b)}v>e&&(a[(h-n)/i]=1,l+i<h&&f.push(l,h),h+i<c&&f.push(h,c))}for(m=0;m<s;++m)a[m]&&(o[u++]=t[n+m*i],o[u++]=t[n+m*i+1]);return u}function ve(t,n,r,i,e,o,u,s){for(var a=0,f=r.length;a<f;++a){var h=r[a];u=le(t,n,h,i,e,o,u),s.push(u),n=h}return u}function de(t,n,r,i,e,o,u){if(r<=n+i){for(;n<r;n+=i)o[u++]=t[n],o[u++]=t[n+1];return u}var s=t[n],a=t[n+1];o[u++]=s,o[u++]=a;var f=s,h=a;for(n+=i;n<r;n+=i)vr(s,a,f=t[n],h=t[n+1])>e&&(o[u++]=f,o[u++]=h,s=f,a=h);return f==s&&h==a||(o[u++]=f,o[u++]=h),u}function pe(t,n){return n*Math.round(t/n)}function ye(t,n,r,i,e,o,u){if(n==r)return u;var s,a,f=pe(t[n],e),h=pe(t[n+1],e);n+=i,o[u++]=f,o[u++]=h;do{if(s=pe(t[n],e),a=pe(t[n+1],e),(n+=i)==r)return o[u++]=s,o[u++]=a,u}while(s==f&&a==h);for(;n<r;){var c=pe(t[n],e),l=pe(t[n+1],e);if(n+=i,c!=s||l!=a){var v=s-f,d=a-h,p=c-f,y=l-h;v*y==d*p&&(v<0&&p<v||v==p||v>0&&p>v)&&(d<0&&y<d||d==y||d>0&&y>d)?(s=c,a=l):(o[u++]=s,o[u++]=a,f=s,h=a,s=c,a=l)}}return o[u++]=s,o[u++]=a,u}function we(t,n,r,i,e,o,u,s){for(var a=0,f=r.length;a<f;++a){var h=r[a];u=ye(t,n,h,i,e,o,u),s.push(u),n=h}return u}function me(t,n,r,i,e,o,u,s){for(var a=0,f=r.length;a<f;++a){var h=r[a],c=[];u=we(t,n,h,i,e,o,u,c),s.push(c),n=h[h.length-1]}return u}function be(t,n,r,i,e){for(var o=void 0!==e?e:[],u=0,s=n;s<r;s+=i)o[u++]=t.slice(s,s+i);return o.length=u,o}function ge(t,n,r,i,e){for(var o=void 0!==e?e:[],u=0,s=0,a=r.length;s<a;++s){var f=r[s];o[u++]=be(t,n,f,i,o[u]),n=f}return o.length=u,o}function xe(t,n,r,i,e){for(var o=void 0!==e?e:[],u=0,s=0,a=r.length;s<a;++s){var f=r[s];o[u++]=ge(t,n,f,i,o[u]),n=f[f.length-1]}return o.length=u,o}function _e(t,n,r,i){for(var e=0,o=t[r-i],u=t[r-i+1];n<r;n+=i){var s=t[n],a=t[n+1];e+=u*s-o*a,o=s,u=a}return e/2}function je(t,n,r,i){for(var e=0,o=0,u=r.length;o<u;++o){var s=r[o];e+=_e(t,n,s,i),n=s}return e}function Oe(t,n,r,i){for(var e=0,o=0,u=r.length;o<u;++o){var s=r[o];e+=je(t,n,s,i),n=s[s.length-1]}return e}var Se=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Me=function(t){function n(n,r){var i=t.call(this)||this;return i.wt=-1,i.bt=-1,void 0===r||Array.isArray(n[0])?i.setCoordinates(n,r):i.setFlatCoordinates(r,n),i}return Se(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,n,r,i){return i<On(this.getExtent(),t,n)?i:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.bt=this.getRevision()),oe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.wt,!0,t,n,r,i))},n.prototype.getArea=function(){return _e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new n(r,Tt)},n.prototype.getType=function(){return Pt.LINEAR_RING},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fe(this.flatCoordinates,0,t,this.stride),this.changed()},n}(te),Ee=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Te=function(t){function n(n,r){var i=t.call(this)||this;return i.setCoordinates(n,r),i}return Ee(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,r,i){var e=this.flatCoordinates,o=vr(t,n,e[0],e[1]);if(o<i){for(var u=this.stride,s=0;s<u;++s)r[s]=e[s];return r.length=u,o}return i},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return Pn(this.flatCoordinates,t)},n.prototype.getType=function(){return Pt.POINT},n.prototype.intersectsExtent=function(t){return En(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ae(this.flatCoordinates,0,t,this.stride),this.changed()},n}(te);function ke(t,n,r,i,e){return!qn(e,(function(e){return!Ae(t,n,r,i,e[0],e[1])}))}function Ae(t,n,r,i,e,o){for(var u=0,s=t[r-i],a=t[r-i+1];n<r;n+=i){var f=t[n],h=t[n+1];a<=o?h>o&&(f-s)*(o-a)-(e-s)*(h-a)>0&&u++:h<=o&&(f-s)*(o-a)-(e-s)*(h-a)<0&&u--,s=f,a=h}return 0!==u}function Ce(t,n,r,i,e,o){if(0===r.length)return!1;if(!Ae(t,n,r[0],i,e,o))return!1;for(var u=1,s=r.length;u<s;++u)if(Ae(t,r[u-1],r[u],i,e,o))return!1;return!0}function Pe(t,n,r,i,e,o){if(0===r.length)return!1;for(var u=0,s=r.length;u<s;++u){var a=r[u];if(Ce(t,n,a,i,e,o))return!0;n=a[a.length-1]}return!1}function Ne(t,n,r,i,e,o,u){for(var s,a,f,h,c,l,v,d=e[o+1],y=[],w=0,m=r.length;w<m;++w){var b=r[w];for(h=t[b-i],l=t[b-i+1],s=n;s<b;s+=i)c=t[s],v=t[s+1],(d<=l&&v<=d||l<=d&&d<=v)&&(f=(d-l)/(v-l)*(c-h)+h,y.push(f)),h=c,l=v}var g=NaN,x=-1/0;for(y.sort(p),h=y[0],s=1,a=y.length;s<a;++s){c=y[s];var _=Math.abs(c-h);_>x&&Ce(t,n,r,i,f=(h+c)/2,d)&&(g=f,x=_),h=c}return isNaN(g)&&(g=e[o]),u?(u.push(g,d,x),u):[g,d,x]}function Ie(t,n,r,i,e){for(var o=[],u=0,s=r.length;u<s;++u){var a=r[u];o=Ne(t,n,a,i,e,2*u,o),n=a[a.length-1]}return o}function Le(t,n,r,i,e){var o;for(n+=i;n<r;n+=i)if(o=e(t.slice(n-i,n),t.slice(n,n+i)))return o;return!1}function Re(t,n,r,i,e){var o=Fn([1/0,1/0,-1/0,-1/0],t,n,r,i);return!!tr(e,o)&&(!!Mn(e,o)||(o[0]>=e[0]&&o[2]<=e[2]||(o[1]>=e[1]&&o[3]<=e[3]||Le(t,n,r,i,(function(t,n){return er(e,t,n)})))))}function Ge(t,n,r,i,e){for(var o=0,u=r.length;o<u;++o){if(Re(t,n,r[o],i,e))return!0;n=r[o]}return!1}function ze(t,n,r,i,e){return!!Re(t,n,r,i,e)||(!!Ae(t,n,r,i,e[0],e[1])||(!!Ae(t,n,r,i,e[0],e[3])||(!!Ae(t,n,r,i,e[2],e[1])||!!Ae(t,n,r,i,e[2],e[3]))))}function Fe(t,n,r,i,e){if(!ze(t,n,r[0],i,e))return!1;if(1===r.length)return!0;for(var o=1,u=r.length;o<u;++o)if(ke(t,r[o-1],r[o],i,e)&&!Re(t,r[o-1],r[o],i,e))return!1;return!0}function De(t,n,r,i,e){for(var o=0,u=r.length;o<u;++o){var s=r[o];if(Fe(t,n,s,i,e))return!0;n=s[s.length-1]}return!1}function Ue(t,n,r,i){for(;n<r-i;){for(var e=0;e<i;++e){var o=t[n+e];t[n+e]=t[r-i+e],t[r-i+e]=o}n+=i,r-=i}}function qe(t,n,r,i){for(var e=0,o=t[r-i],u=t[r-i+1];n<r;n+=i){var s=t[n],a=t[n+1];e+=(s-o)*(a+u),o=s,u=a}return 0===e?void 0:e>0}function Be(t,n,r,i,e){for(var o=void 0!==e&&e,u=0,s=r.length;u<s;++u){var a=r[u],f=qe(t,n,a,i);if(0===u){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=a}return!0}function Xe(t,n,r,i,e){for(var o=0,u=r.length;o<u;++o){var s=r[o];if(!Be(t,n,s,i,e))return!1;s.length&&(n=s[s.length-1])}return!0}function Ve(t,n,r,i,e){for(var o=void 0!==e&&e,u=0,s=r.length;u<s;++u){var a=r[u],f=qe(t,n,a,i);(0===u?o&&f||!o&&!f:o&&!f||!o&&f)&&Ue(t,n,a,i),n=a}return n}function Ye(t,n,r,i,e){for(var o=0,u=r.length;o<u;++o)n=Ve(t,n,r[o],i,e);return n}function We(t,n){for(var r=[],i=0,e=0,o=0,u=n.length;o<u;++o){var s=n[o];if(qe(t,i,s,2)){if(0===r.length)continue;r[r.length-1].push(n[e])}else r.push(n.slice(e,o+1));e=o+1,i=s}return r}var Ze=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),He=function(t){function n(n,r,i){var e=t.call(this)||this;return e.gt=[],e.xt=-1,e._t=null,e.wt=-1,e.bt=-1,e.jt=-1,e.Ot=null,void 0!==r&&i?(e.setFlatCoordinates(r,n),e.gt=i):e.setCoordinates(n,r),e}return Ze(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.gt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.gt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,r,i){return i<On(this.getExtent(),t,n)?i:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(ie(this.flatCoordinates,0,this.gt,this.stride,0)),this.bt=this.getRevision()),ue(this.flatCoordinates,0,this.gt,this.stride,this.wt,!0,t,n,r,i))},n.prototype.containsXY=function(t,n){return Ce(this.getOrientedFlatCoordinates(),0,this.gt,this.stride,t,n)},n.prototype.getArea=function(){return je(this.getOrientedFlatCoordinates(),0,this.gt,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ve(n=this.getOrientedFlatCoordinates().slice(),0,this.gt,this.stride,t):n=this.flatCoordinates,ge(n,0,this.gt,this.stride)},n.prototype.getEnds=function(){return this.gt},n.prototype.getFlatInteriorPoint=function(){if(this.xt!=this.getRevision()){var t=Yn(this.getExtent());this._t=Ne(this.getOrientedFlatCoordinates(),0,this.gt,this.stride,t,0),this.xt=this.getRevision()}return this._t},n.prototype.getInteriorPoint=function(){return new Te(this.getFlatInteriorPoint(),At)},n.prototype.getLinearRingCount=function(){return this.gt.length},n.prototype.getLinearRing=function(t){return t<0||this.gt.length<=t?null:new Me(this.flatCoordinates.slice(0===t?0:this.gt[t-1],this.gt[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,r=this.gt,i=[],e=0,o=0,u=r.length;o<u;++o){var s=r[o],a=new Me(n.slice(e,s),t);i.push(a),e=s}return i},n.prototype.getOrientedFlatCoordinates=function(){if(this.jt!=this.getRevision()){var t=this.flatCoordinates;Be(t,0,this.gt,this.stride)?this.Ot=t:(this.Ot=t.slice(),this.Ot.length=Ve(this.Ot,0,this.gt,this.stride)),this.jt=this.getRevision()}return this.Ot},n.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=we(this.flatCoordinates,0,this.gt,this.stride,Math.sqrt(t),r,0,i),new n(r,Tt,i)},n.prototype.getType=function(){return Pt.POLYGON},n.prototype.intersectsExtent=function(t){return Fe(this.getOrientedFlatCoordinates(),0,this.gt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=he(this.flatCoordinates,0,t,this.stride,this.gt);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},n}(te),Ke=He;function $e(t,n,r,i){for(var e=r||32,o=[],u=0;u<e;++u)b(o,vi(t,n,2*Math.PI*u/e,i));return o.push(o[0],o[1]),new He(o,Tt,[o.length])}function Je(t){var n=t[0],r=t[1],i=t[2],e=t[3],o=[n,r,n,e,i,e,i,r,n,r];return new He(o,Tt,[o.length])}function Qe(t,n,r){for(var i=n||32,e=t.getStride(),o=t.getLayout(),u=t.getCenter(),s=e*(i+1),a=new Array(s),f=0;f<s;f+=e){a[f]=0,a[f+1]=0;for(var h=2;h<e;h++)a[f+h]=u[h]}var c=[a.length],l=new He(a,o,c);return to(l,u,t.getRadius(),r),l}function to(t,n,r,i){for(var e=t.getFlatCoordinates(),o=t.getStride(),u=e.length/o-1,s=i||0,a=0;a<=u;++a){var f=a*o,h=s+2*wr(a,u)*Math.PI/u;e[f]=n[0]+r*Math.cos(h),e[f+1]=n[1]+r*Math.sin(h)}t.changed()}var no=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ro="accuracy",io="accuracyGeometry",eo="altitude",oo="altitudeAccuracy",uo="heading",so="position",ao="projection",fo="speed",ho="tracking",co="trackingOptions",lo=function(t){function n(n){var r=t.call(this,R)||this;return r.code=n.code,r.message=n.message,r}return no(n,t),n}(c),vo=function(t){function n(n){var r=t.call(this)||this;r.on,r.once,r.un;var i=n||{};return r.St=null,r.Mt=wi,r.Et=void 0,r.addChangeListener(ao,r.Tt),r.addChangeListener(ho,r.kt),void 0!==i.projection&&r.setProjection(i.projection),void 0!==i.trackingOptions&&r.setTrackingOptions(i.trackingOptions),r.setTracking(void 0!==i.tracking&&i.tracking),r}return no(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},n.prototype.Tt=function(){var t=this.getProjection();t&&(this.Mt=ki(gi("EPSG:4326"),t),this.St&&this.set(so,this.Mt(this.St)))},n.prototype.kt=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.Et?this.Et=navigator.geolocation.watchPosition(this.At.bind(this),this.Ct.bind(this),this.getTrackingOptions()):t||void 0===this.Et||(navigator.geolocation.clearWatch(this.Et),this.Et=void 0)}},n.prototype.At=function(t){var n=t.coords;this.set(ro,n.accuracy),this.set(eo,null===n.altitude?void 0:n.altitude),this.set(oo,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(uo,null===n.heading?void 0:yr(n.heading)),this.St?(this.St[0]=n.longitude,this.St[1]=n.latitude):this.St=[n.longitude,n.latitude];var r=this.Mt(this.St);this.set(so,r),this.set(fo,null===n.speed?void 0:n.speed);var i=$e(this.St,n.accuracy);i.applyTransform(this.Mt),this.set(io,i),this.changed()},n.prototype.Ct=function(t){this.dispatchEvent(new lo(t))},n.prototype.getAccuracy=function(){return this.get(ro)},n.prototype.getAccuracyGeometry=function(){return this.get(io)||null},n.prototype.getAltitude=function(){return this.get(eo)},n.prototype.getAltitudeAccuracy=function(){return this.get(oo)},n.prototype.getHeading=function(){return this.get(uo)},n.prototype.getPosition=function(){return this.get(so)},n.prototype.getProjection=function(){return this.get(ao)},n.prototype.getSpeed=function(){return this.get(fo)},n.prototype.getTracking=function(){return this.get(ho)},n.prototype.getTrackingOptions=function(){return this.get(co)},n.prototype.setProjection=function(t){this.set(ao,gi(t))},n.prototype.setTracking=function(t){this.set(ho,t)},n.prototype.setTrackingOptions=function(t){this.set(co,t)},n}(et),po=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),yo=function(t){function n(n,r,i,e){var o=t.call(this)||this;return o.extent=n,o.Pt=i,o.resolution=r,o.state=e,o}return po(n,t),n.prototype.changed=function(){this.dispatchEvent(L)},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return i()},n.prototype.getPixelRatio=function(){return this.Pt},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){i()},n}(I),wo=0,mo=1,bo=2,go=3,xo=4,_o=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function jo(t,n,r){var i=t,e=!0,o=!1,u=!1,s=[K(i,V,(function(){u=!0,o||n()}))];return i.src&&Wt?(o=!0,i.decode().then((function(){e&&n()})).catch((function(t){e&&(u?n():r())}))):s.push(K(i,R,r)),function(){e=!1,s.forEach($)}}var Oo=function(t){function n(n,r,i,e,o,u){var s=t.call(this,n,r,i,wo)||this;return s.Nt=e,s.Lt=new Image,null!==o&&(s.Lt.crossOrigin=o),s.Rt=null,s.state=wo,s.Gt=u,s}return _o(n,t),n.prototype.getImage=function(){return this.Lt},n.prototype.zt=function(){this.state=go,this.Ft(),this.changed()},n.prototype.Dt=function(){void 0===this.resolution&&(this.resolution=Hn(this.extent)/this.Lt.height),this.state=bo,this.Ft(),this.changed()},n.prototype.load=function(){this.state!=wo&&this.state!=go||(this.state=mo,this.changed(),this.Gt(this,this.Nt),this.Rt=jo(this.Lt,this.Dt.bind(this),this.zt.bind(this)))},n.prototype.setImage=function(t){this.Lt=t,this.resolution=Hn(this.extent)/this.Lt.height},n.prototype.Ft=function(){this.Rt&&(this.Rt(),this.Rt=null)},n}(yo),So=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Mo=function(t){function n(n,r,i,e,o){var u=this,s=void 0!==o?wo:bo;return(u=t.call(this,n,r,i,s)||this).q=void 0!==o?o:null,u.Ut=e,u.V=null,u}return So(n,t),n.prototype.getError=function(){return this.V},n.prototype.qt=function(t){t?(this.V=t,this.state=go):this.state=bo,this.changed()},n.prototype.load=function(){this.state==wo&&(this.state=mo,this.changed(),this.q(this.qt.bind(this)))},n.prototype.getImage=function(){return this.Ut},n}(yo);function Eo(t,n,r,i){var e;return e=r&&r.length?r.shift():Yt?new OffscreenCanvas(t||300,n||300):document.createElement("canvas"),t&&(e.width=t),n&&(e.height=n),e.getContext("2d",i)}function To(t){var n=t.offsetWidth,r=getComputedStyle(t);return n+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function ko(t){var n=t.offsetHeight,r=getComputedStyle(t);return n+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function Ao(t,n){var r=n.parentNode;r&&r.replaceChild(t,n)}function Co(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Po(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function No(t,n){for(var r=t.childNodes,i=0;;++i){var e=r[i],o=n[i];if(!e&&!o)break;e!==o&&(e?o?t.insertBefore(o,e):(t.removeChild(e),--i):t.appendChild(o))}}var Io=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();var Lo=function(t){function n(n,r,i,e,o,u){var s=t.call(this,n,r,u)||this;return s.Bt=e,s.Nt=i,s.key=i,s.Lt=new Image,null!==e&&(s.Lt.crossOrigin=e),s.Rt=null,s.Xt=o,s}return Io(n,t),n.prototype.getImage=function(){return this.Lt},n.prototype.setImage=function(t){this.Lt=t,this.state=vt,this.Ft(),this.changed()},n.prototype.zt=function(){var t;this.state=dt,this.Ft(),this.Lt=((t=Eo(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},n.prototype.Dt=function(){var t=this.Lt;t.naturalWidth&&t.naturalHeight?this.state=vt:this.state=pt,this.Ft(),this.changed()},n.prototype.load=function(){this.state==dt&&(this.state=ct,this.Lt=new Image,null!==this.Bt&&(this.Lt.crossOrigin=this.Bt)),this.state==ct&&(this.state=lt,this.changed(),this.Xt(this,this.Nt),this.Rt=jo(this.Lt,this.Dt.bind(this),this.zt.bind(this)))},n.prototype.Ft=function(){this.Rt&&(this.Rt(),this.Rt=null)},n}(xt),Ro=function(){function t(t,n,r){this.Vt=t,this.Yt=n,this.Wt=r,this.Zt=[],this.Ht=0,this.Kt=0}return t.prototype.begin=function(){this.Zt.length=0,this.Ht=0,this.Kt=0},t.prototype.update=function(t,n){this.Zt.push(t,n,Date.now())},t.prototype.end=function(){if(this.Zt.length<6)return!1;var t=Date.now()-this.Wt,n=this.Zt.length-3;if(this.Zt[n+2]<t)return!1;for(var r=n-3;r>0&&this.Zt[r+2]>t;)r-=3;var i=this.Zt[n+2]-this.Zt[r+2];if(i<1e3/60)return!1;var e=this.Zt[n]-this.Zt[r],o=this.Zt[n+1]-this.Zt[r+1];return this.Ht=Math.atan2(o,e),this.Kt=Math.sqrt(e*e+o*o)/i,this.Kt>this.Yt},t.prototype.getDistance=function(){return(this.Yt-this.Kt)/this.Vt},t.prototype.getAngle=function(){return this.Ht},t}(),Go=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,zo=/^([a-z]*)$|^hsla?\(.*\)$/i;function Fo(t){return"string"==typeof t?t:Xo(t)}function Do(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var r=getComputedStyle(n).color;return document.body.removeChild(n),r}return""}var Uo=function(){var t={},n=0;return function(r){var i;if(t.hasOwnProperty(r))i=t[r];else{if(n>=1024){var e=0;for(var o in t)0==(3&e++)&&(delete t[o],--n)}i=function(t){var n,r,i,e,o;zo.exec(t)&&(t=Do(t));if(Go.exec(t)){var u=t.length-1,s=void 0;s=u<=4?1:2;var a=4===u||8===u;n=parseInt(t.substr(1+0*s,s),16),r=parseInt(t.substr(1+1*s,s),16),i=parseInt(t.substr(1+2*s,s),16),e=a?parseInt(t.substr(1+3*s,s),16):255,1==s&&(n=(n<<4)+n,r=(r<<4)+r,i=(i<<4)+i,a&&(e=(e<<4)+e)),o=[n,r,i,e/255]}else 0==t.indexOf("rgba(")?Bo(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Bo(o)):Ot(!1,14);return o}(r),t[r]=i,++n}return i}}();function qo(t){return Array.isArray(t)?t:Uo(t)}function Bo(t){return t[0]=fr(t[0]+.5|0,0,255),t[1]=fr(t[1]+.5|0,0,255),t[2]=fr(t[2]+.5|0,0,255),t[3]=fr(t[3],0,1),t}function Xo(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+n+","+r+","+i+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function Vo(t){return zo.test(t)&&(t=Do(t)),Go.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var Yo=function(){function t(){this.$t={},this.Jt=0,this.Qt=32}return t.prototype.clear=function(){this.$t={},this.Jt=0},t.prototype.canExpireCache=function(){return this.Jt>this.Qt},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.$t){var r=this.$t[n];0!=(3&t++)||r.hasListener()||(delete this.$t[n],--this.Jt)}}},t.prototype.get=function(t,n,r){var i=Wo(t,n,r);return i in this.$t?this.$t[i]:null},t.prototype.set=function(t,n,r,i){var e=Wo(t,n,r);this.$t[e]=i,++this.Jt},t.prototype.setSize=function(t){this.Qt=t,this.expire()},t}();function Wo(t,n,r){return n+":"+t+":"+(r?Fo(r):"null")}var Zo=Yo,Ho=new Yo,Ko="opacity",$o="visible",Jo="extent",Qo="zIndex",tu="maxResolution",nu="minResolution",ru="maxZoom",iu="minZoom",eu="source",ou="map";function uu(t){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var su=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),au=function(t){function n(n){var r=t.call(this)||this;r.on,r.once,r.un,r.tn=n.background;var i=k({},n);return"object"===uu(n.properties)&&(delete i.properties,k(i,n.properties)),i[Ko]=void 0!==n.opacity?n.opacity:1,Ot("number"==typeof i[Ko],64),i[$o]=void 0===n.visible||n.visible,i[Qo]=n.zIndex,i[tu]=void 0!==n.maxResolution?n.maxResolution:1/0,i[nu]=void 0!==n.minResolution?n.minResolution:0,i[iu]=void 0!==n.minZoom?n.minZoom:-1/0,i[ru]=void 0!==n.maxZoom?n.maxZoom:1/0,r.nn=void 0!==i.className?i.className:"ol-layer",delete i.className,r.setProperties(i),r.rn=null,r}return su(n,t),n.prototype.getBackground=function(){return this.tn},n.prototype.getClassName=function(){return this.nn},n.prototype.getLayerState=function(t){var n=this.rn||{layer:this,managed:void 0===t||t},r=this.getZIndex();return n.opacity=fr(Math.round(100*this.getOpacity())/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==r||n.managed?r:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.rn=n,n},n.prototype.getLayersArray=function(t){return i()},n.prototype.getLayerStatesArray=function(t){return i()},n.prototype.getExtent=function(){return this.get(Jo)},n.prototype.getMaxResolution=function(){return this.get(tu)},n.prototype.getMinResolution=function(){return this.get(nu)},n.prototype.getMinZoom=function(){return this.get(iu)},n.prototype.getMaxZoom=function(){return this.get(ru)},n.prototype.getOpacity=function(){return this.get(Ko)},n.prototype.getSourceState=function(){return i()},n.prototype.getVisible=function(){return this.get($o)},n.prototype.getZIndex=function(){return this.get(Qo)},n.prototype.setBackground=function(t){this.tn=t,this.changed()},n.prototype.setExtent=function(t){this.set(Jo,t)},n.prototype.setMaxResolution=function(t){this.set(tu,t)},n.prototype.setMinResolution=function(t){this.set(nu,t)},n.prototype.setMaxZoom=function(t){this.set(ru,t)},n.prototype.setMinZoom=function(t){this.set(iu,t)},n.prototype.setOpacity=function(t){Ot("number"==typeof t,64),this.set(Ko,t)},n.prototype.setVisible=function(t){this.set($o,t)},n.prototype.setZIndex=function(t){this.set(Qo,t)},n.prototype.disposeInternal=function(){this.rn&&(this.rn.layer=null,this.rn=null),t.prototype.disposeInternal.call(this)},n}(et),fu="prerender",hu="postrender",cu="precompose",lu="postcompose",vu="rendercomplete",du="undefined",pu="loading",yu="ready",wu="error",mu=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function bu(t,n){if(!t.visible)return!1;var r=n.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var i=n.zoom;return i>t.minZoom&&i<=t.maxZoom}var gu=function(t){function n(n){var r=this,i=k({},n);delete i.source,(r=t.call(this,i)||this).on,r.once,r.un,r.en=null,r.sn=null,r.an=null,r.fn=null,r.rendered=!1,n.render&&(r.render=n.render),n.map&&r.setMap(n.map),r.addChangeListener(eu,r.hn);var e=n.source?n.source:null;return r.setSource(e),r}return mu(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},n.prototype.getSource=function(){return this.get(eu)||null},n.prototype.getRenderSource=function(){return this.getSource()},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():du},n.prototype.cn=function(){this.changed()},n.prototype.hn=function(){this.an&&($(this.an),this.an=null);var t=this.getSource();t&&(this.an=H(t,L,this.cn,this)),this.changed()},n.prototype.getFeatures=function(t){return this.fn?this.fn.getFeatures(t):new Promise((function(t){return t([])}))},n.prototype.getData=function(t){return this.fn&&this.rendered?this.fn.getData(t):null},n.prototype.render=function(t,n){var r=this.getRenderer();if(r.prepareFrame(t))return this.rendered=!0,r.renderFrame(t,n)},n.prototype.unrender=function(){this.rendered=!1},n.prototype.setMapInternal=function(t){t||this.unrender(),this.set(ou,t)},n.prototype.getMapInternal=function(){return this.get(ou)},n.prototype.setMap=function(t){this.en&&($(this.en),this.en=null),t||this.changed(),this.sn&&($(this.sn),this.sn=null),t&&(this.en=H(t,cu,(function(t){var n=t.frameState.layerStatesArray,r=this.getLayerState(!1);Ot(!n.some((function(t){return t.layer===r.layer})),67),n.push(r)}),this),this.sn=H(this,L,t.render,t),this.changed())},n.prototype.setSource=function(t){this.set(eu,t)},n.prototype.getRenderer=function(){return this.fn||(this.fn=this.createRenderer()),this.fn},n.prototype.hasRenderer=function(){return!!this.fn},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.fn&&(this.fn.dispose(),delete this.fn),this.setSource(null),t.prototype.disposeInternal.call(this)},n}(au),xu=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function _u(t,n){Ho.expire()}var ju=function(t){function n(n){var r=t.call(this)||this;return r.vn=n,r}return xu(n,t),n.prototype.dispatchRenderEvent=function(t,n){i()},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,r=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;sn(r,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),an(i,r)},n.prototype.forEachFeatureAtCoordinate=function(t,n,r,i,e,o,u,s){var a,f=n.viewState;function h(t,n,r,i){return e.call(o,n,t?r:null,i)}var c=f.projection,l=si(t.slice(),c),v=[[0,0]];if(c.canWrapX()&&i){var d=Qn(c.getExtent());v.push([-d,0],[d,0])}for(var p=n.layerStatesArray,y=p.length,w=[],m=[],b=0;b<v.length;b++)for(var g=y-1;g>=0;--g){var x=p[g],_=x.layer;if(_.hasRenderer()&&bu(x,f)&&u.call(s,_)){var j=_.getRenderer(),O=_.getSource();if(j&&O){var S=O.getWrapX()?l:t,M=h.bind(null,x.managed);m[0]=S[0]+v[b][0],m[1]=S[1]+v[b][1],a=j.forEachFeatureAtCoordinate(m,n,r,M,w)}if(a)return a}}if(0!==w.length){var E=1/w.length;return w.forEach((function(t,n){return t.distanceSq+=n*E})),w.sort((function(t,n){return t.distanceSq-n.distanceSq})),w.some((function(t){return a=t.callback(t.feature,t.layer,t.geometry)})),a}},n.prototype.forEachLayerAtPixel=function(t,n,r,e,o){return i()},n.prototype.hasFeatureAtCoordinate=function(t,n,r,i,e,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,r,i,O,this,e,o)},n.prototype.getMap=function(){return this.vn},n.prototype.renderFrame=function(t){i()},n.prototype.scheduleExpireIconCache=function(t){Ho.canExpireCache()&&t.postRenderFunctions.push(_u)},n}(v),Ou=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Su=function(t){function n(n,r,i,e){var o=t.call(this,n)||this;return o.inversePixelTransform=r,o.frameState=i,o.context=e,o}return Ou(n,t),n}(c),Mu="ol-hidden",Eu="ol-selectable",Tu="ol-unselectable",ku="ol-unsupported",Au="ol-control",Cu="ol-collapsed",Pu=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Nu=["style","variant","weight","size","lineHeight","family"],Iu=function(t){var n=t.match(Pu);if(!n)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,e=Nu.length;i<e;++i){var o=n[i+1];void 0!==o&&(r[Nu[i]]=o)}return r.families=r.family.split(/,\s?/),r};function Lu(t){return 1===t?"":String(Math.round(100*t)/100)}var Ru="10px sans-serif",Gu="#000",zu="round",Fu=[],Du="round",Uu=10,qu="#000",Bu="center",Xu="middle",Vu=[0,0,0,0],Yu=new et,Wu=new I;Wu.setSize=function(){console.warn("labelCache is deprecated.")};var Zu,Hu,Ku=null,$u={},Ju=function(){var t,n,r="32px ",i=["monospace","serif"],e=i.length,o="wmytzilWMYTZIL@#/&?$%10";function u(t,u,s){for(var a=!0,f=0;f<e;++f){var h=i[f];if(n=ns(t+" "+u+" "+r+h,o),s!=h){var c=ns(t+" "+u+" "+r+s+","+h,o);a=a&&c!=n}}return!!a}function s(){for(var n=!0,r=Yu.getKeys(),i=0,e=r.length;i<e;++i){var o=r[i];Yu.get(o)<100&&(u.apply(this,o.split("\n"))?(A($u),Ku=null,Zu=void 0,Yu.set(o,100)):(Yu.set(o,Yu.get(o)+1,!0),n=!1))}n&&(clearInterval(t),t=void 0)}return function(n){var r=Iu(n);if(r)for(var i=r.families,e=0,o=i.length;e<o;++e){var a=i[e],f=r.style+"\n"+r.weight+"\n"+a;void 0===Yu.get(f)&&(Yu.set(f,100,!0),u(r.style,r.weight,a)||(Yu.set(f,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),Qu=function(t){var n=$u[t];if(null==n){if(Yt){var r=Iu(t),i=ts(t,"Žg");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else Hu||((Hu=document.createElement("div")).innerHTML="M",Hu.style.minHeight="0",Hu.style.maxHeight="none",Hu.style.height="auto",Hu.style.padding="0",Hu.style.border="none",Hu.style.position="absolute",Hu.style.display="block",Hu.style.left="-99999px"),Hu.style.font=t,document.body.appendChild(Hu),n=Hu.offsetHeight,document.body.removeChild(Hu);$u[t]=n}return n};function ts(t,n){return Ku||(Ku=Eo(1,1)),t!=Zu&&(Ku.font=t,Zu=Ku.font),Ku.measureText(n)}function ns(t,n){return ts(t,n).width}function rs(t,n,r){if(n in r)return r[n];var i=n.split("\n").reduce((function(n,r){return Math.max(n,ns(t,r))}),0);return r[n]=i,i}function is(t,n){for(var r=[],i=[],e=[],o=0,u=0,s=0,a=0,f=0,h=n.length;f<=h;f+=2){var c=n[f];if("\n"!==c&&f!==h){var l=n[f+1]||t.font,v=ns(l,c);r.push(v),u+=v;var d=Qu(l);i.push(d),a=Math.max(a,d)}else o=Math.max(o,u),e.push(u),u=0,s+=a}return{width:o,height:s,widths:r,heights:i,lineWidths:e}}function es(t,n,r,i,e,o,u,s,a,f,h){t.save(),1!==r&&(t.globalAlpha*=r),n&&t.setTransform.apply(t,n),i.contextInstructions?(t.translate(a,f),t.scale(h[0],h[1]),function(t,n){for(var r=t.contextInstructions,i=0,e=r.length;i<e;i+=2)Array.isArray(r[i+1])?n[r[i]].apply(n,r[i+1]):n[r[i]]=r[i+1]}(i,t)):h[0]<0||h[1]<0?(t.translate(a,f),t.scale(h[0],h[1]),t.drawImage(i,e,o,u,s,0,0,u,s)):t.drawImage(i,e,o,u,s,a,f,u*h[0],s*h[1]),t.restore()}var os=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),us=function(t){function n(n){var r=t.call(this,n)||this;r.dn=H(Yu,l,n.redrawText.bind(n)),r.pn=document.createElement("div");var i=r.pn.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",r.pn.className="ol-unselectable ol-layers";var e=n.getViewport();return e.insertBefore(r.pn,e.firstChild||null),r.yn=[],r.wn=!0,r}return os(n,t),n.prototype.dispatchRenderEvent=function(t,n){var r=this.getMap();if(r.hasListener(t)){var i=new Su(t,void 0,n);r.dispatchEvent(i)}},n.prototype.disposeInternal=function(){$(this.dn),this.pn.parentNode.removeChild(this.pn),t.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(cu,t);var n=t.layerStatesArray.sort((function(t,n){return t.zIndex-n.zIndex})),r=t.viewState;this.yn.length=0;for(var i=[],e=null,o=0,u=n.length;o<u;++o){var s=n[o];t.layerIndex=o;var a=s.layer,f=a.getSourceState();if(!bu(s,r)||f!=yu&&f!=du)a.unrender();else{var h=a.render(t,e);h&&(h!==e&&(this.yn.push(h),e=h),"getDeclutter"in a&&i.push(a))}}for(o=i.length-1;o>=0;--o)i[o].renderDeclutter(t);No(this.pn,this.yn),this.dispatchRenderEvent(lu,t),this.wn||(this.pn.style.display="",this.wn=!0),this.scheduleExpireIconCache(t)}else this.wn&&(this.pn.style.display="none",this.wn=!1)},n.prototype.forEachLayerAtPixel=function(t,n,r,i,e){for(var o=n.viewState,u=n.layerStatesArray,s=u.length-1;s>=0;--s){var a=u[s],f=a.layer;if(f.hasRenderer()&&bu(a,o)&&e(f)){var h=f.getRenderer().getDataAtPixel(t,n,r);if(h){var c=i(f,h);if(c)return c}}}},n}(ju),ss=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),as=function(t){function n(n,r){var i=t.call(this,n)||this;return i.layer=r,i}return ss(n,t),n}(c),fs="layers",hs=function(t){function n(n){var r=this,i=n||{},e=k({},i);delete e.layers;var o=i.layers;return(r=t.call(this,e)||this).on,r.once,r.un,r.mn=[],r.bn={},r.addChangeListener(fs,r.gn),o?Array.isArray(o)?o=new ht(o.slice(),{unique:!0}):Ot("function"==typeof o.getArray,43):o=new ht(void 0,{unique:!0}),r.setLayers(o),r}return ss(n,t),n.prototype.xn=function(){this.changed()},n.prototype.gn=function(){this.mn.forEach($),this.mn.length=0;var t=this.getLayers();for(var n in this.mn.push(H(t,ot,this._n,this),H(t,ut,this.jn,this)),this.bn)this.bn[n].forEach($);A(this.bn);for(var r=t.getArray(),i=0,e=r.length;i<e;i++){var o=r[i];this.On(o),this.dispatchEvent(new as("addlayer",o))}this.changed()},n.prototype.On=function(t){var r=[H(t,l,this.xn,this),H(t,L,this.xn,this)];t instanceof n&&r.push(H(t,"addlayer",this.Sn,this),H(t,"removelayer",this.Mn,this)),this.bn[o(t)]=r},n.prototype.Sn=function(t){this.dispatchEvent(new as("addlayer",t.layer))},n.prototype.Mn=function(t){this.dispatchEvent(new as("removelayer",t.layer))},n.prototype._n=function(t){var n=t.element;this.On(n),this.dispatchEvent(new as("addlayer",n)),this.changed()},n.prototype.jn=function(t){var n=t.element,r=o(n);this.bn[r].forEach($),delete this.bn[r],this.dispatchEvent(new as("removelayer",n)),this.changed()},n.prototype.getLayers=function(){return this.get(fs)},n.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var r=n.getArray(),i=0,e=r.length;i<e;++i)this.dispatchEvent(new as("removelayer",r[i]));this.set(fs,t)},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(n)})),n},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],r=n.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(n)}));var i=this.getLayerState(),e=i.zIndex;t||void 0!==i.zIndex||(e=0);for(var o=r,u=n.length;o<u;o++){var s=n[o];s.opacity*=i.opacity,s.visible=s.visible&&i.visible,s.maxResolution=Math.min(s.maxResolution,i.maxResolution),s.minResolution=Math.max(s.minResolution,i.minResolution),s.minZoom=Math.max(s.minZoom,i.minZoom),s.maxZoom=Math.min(s.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==s.extent?s.extent=Kn(s.extent,i.extent):s.extent=i.extent),void 0===s.zIndex&&(s.zIndex=e)}return n},n.prototype.getSourceState=function(){return yu},n}(au),cs=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ls=function(t){function n(n,r,i){var e=t.call(this,n)||this;return e.map=r,e.frameState=void 0!==i?i:null,e}return cs(n,t),n}(c),vs=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ds=function(t){function n(n,r,i,e,o){var u=t.call(this,n,r,o)||this;return u.originalEvent=i,u.En=null,u.Tn=null,u.dragging=void 0!==e&&e,u}return vs(n,t),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.En||(this.En=this.map.getEventPixel(this.originalEvent)),this.En},set:function(t){this.En=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.Tn||(this.Tn=this.map.getCoordinateFromPixel(this.pixel)),this.Tn},set:function(t){this.Tn=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(ls),ps={SINGLECLICK:"singleclick",CLICK:z,DBLCLICK:F,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ys="pointermove",ws="pointerdown",ms="pointerup",bs="pointerout",gs=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),xs=function(t){function n(n,r){var i=t.call(this,n)||this;i.vn=n,i.kn,i.An=!1,i.Cn=!1,i.Pn=[],i.Nn=void 0===r?1:r,i.In=null;var e=i.vn.getViewport();return i.Ln=0,i.Rn={},i.pn=e,i.Gn=H(e,ws,i.zn,i),i.Fn,i.Dn=H(e,ys,i.Un,i),i.qn=i.Bn.bind(i),i.pn.addEventListener(W,i.qn,!!Zt&&{passive:!1}),i}return gs(n,t),n.prototype.Xn=function(t){var n=new ds(ps.CLICK,this.vn,t);this.dispatchEvent(n),void 0!==this.kn?(clearTimeout(this.kn),this.kn=void 0,n=new ds(ps.DBLCLICK,this.vn,t),this.dispatchEvent(n)):this.kn=setTimeout(function(){this.kn=void 0;var n=new ds(ps.SINGLECLICK,this.vn,t);this.dispatchEvent(n)}.bind(this),250)},n.prototype.Vn=function(t){var n=t;n.type==ps.POINTERUP||n.type==ps.POINTERCANCEL?delete this.Rn[n.pointerId]:n.type==ps.POINTERDOWN&&(this.Rn[n.pointerId]=!0),this.Ln=Object.keys(this.Rn).length},n.prototype.Yn=function(t){this.Vn(t);var n=new ds(ps.POINTERUP,this.vn,t);this.dispatchEvent(n),this.An&&!n.defaultPrevented&&!this.Cn&&this.Wn(t)&&this.Xn(this.In),0===this.Ln&&(this.Pn.forEach($),this.Pn.length=0,this.Cn=!1,this.In=null)},n.prototype.Wn=function(t){return 0===t.button},n.prototype.zn=function(t){this.An=0===this.Ln,this.Vn(t);var n=new ds(ps.POINTERDOWN,this.vn,t);for(var r in this.dispatchEvent(n),this.In={},t){var i=t[r];this.In[r]="function"==typeof i?M:i}if(0===this.Pn.length){var e=this.vn.getOwnerDocument();this.Pn.push(H(e,ps.POINTERMOVE,this.Zn,this),H(e,ps.POINTERUP,this.Yn,this),H(this.pn,ps.POINTERCANCEL,this.Yn,this)),this.pn.getRootNode&&this.pn.getRootNode()!==e&&this.Pn.push(H(this.pn.getRootNode(),ps.POINTERUP,this.Yn,this))}},n.prototype.Zn=function(t){if(this.Hn(t)){this.Cn=!0;var n=new ds(ps.POINTERDRAG,this.vn,t,this.Cn);this.dispatchEvent(n)}},n.prototype.Un=function(t){this.Fn=t;var n=!(!this.In||!this.Hn(t));this.dispatchEvent(new ds(t.type,this.vn,t,n))},n.prototype.Bn=function(t){var n=this.Fn;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},n.prototype.Hn=function(t){return this.Cn||Math.abs(t.clientX-this.In.clientX)>this.Nn||Math.abs(t.clientY-this.In.clientY)>this.Nn},n.prototype.disposeInternal=function(){this.Dn&&($(this.Dn),this.Dn=null),this.pn.removeEventListener(W,this.qn),this.Gn&&($(this.Gn),this.Gn=null),this.Pn.forEach($),this.Pn.length=0,this.pn=null,t.prototype.disposeInternal.call(this)},n}(I),_s="postrender",js="movestart",Os="moveend",Ss="loadstart",Ms="loadend",Es="layergroup",Ts="size",ks="target",As="view",Cs=1/0,Ps=function(){function t(t,n){this.Kn=t,this.$n=n,this.Jn=[],this.Qn=[],this.tr={}}return t.prototype.clear=function(){this.Jn.length=0,this.Qn.length=0,A(this.tr)},t.prototype.dequeue=function(){var t=this.Jn,n=this.Qn,r=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.nr(0));var i=this.$n(r);return delete this.tr[i],r},t.prototype.enqueue=function(t){Ot(!(this.$n(t)in this.tr),31);var n=this.Kn(t);return n!=Cs&&(this.Jn.push(t),this.Qn.push(n),this.tr[this.$n(t)]=!0,this.rr(0,this.Jn.length-1),!0)},t.prototype.getCount=function(){return this.Jn.length},t.prototype.ir=function(t){return 2*t+1},t.prototype.er=function(t){return 2*t+2},t.prototype.ur=function(t){return t-1>>1},t.prototype.sr=function(){var t;for(t=(this.Jn.length>>1)-1;t>=0;t--)this.nr(t)},t.prototype.isEmpty=function(){return 0===this.Jn.length},t.prototype.isKeyQueued=function(t){return t in this.tr},t.prototype.isQueued=function(t){return this.isKeyQueued(this.$n(t))},t.prototype.nr=function(t){for(var n=this.Jn,r=this.Qn,i=n.length,e=n[t],o=r[t],u=t;t<i>>1;){var s=this.ir(t),a=this.er(t),f=a<i&&r[a]<r[s]?a:s;n[t]=n[f],r[t]=r[f],t=f}n[t]=e,r[t]=o,this.rr(u,t)},t.prototype.rr=function(t,n){for(var r=this.Jn,i=this.Qn,e=r[n],o=i[n];n>t;){var u=this.ur(n);if(!(i[u]>o))break;r[n]=r[u],i[n]=i[u],n=u}r[n]=e,i[n]=o},t.prototype.reprioritize=function(){var t,n,r,i=this.Kn,e=this.Jn,o=this.Qn,u=0,s=e.length;for(n=0;n<s;++n)(r=i(t=e[n]))==Cs?delete this.tr[this.$n(t)]:(o[u]=r,e[u++]=t);e.length=u,o.length=u,this.sr()},t}(),Ns=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Is=function(t){function n(n,r){var i=t.call(this,(function(t){return n.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return i.ar=i.handleTileChange.bind(i),i.hr=r,i.cr=0,i.lr={},i}return Ns(n,t),n.prototype.enqueue=function(n){var r=t.prototype.enqueue.call(this,n);r&&n[0].addEventListener(L,this.ar);return r},n.prototype.getTilesLoading=function(){return this.cr},n.prototype.handleTileChange=function(t){var n=t.target,r=n.getState();if(r===vt||r===dt||r===pt){n.removeEventListener(L,this.ar);var i=n.getKey();i in this.lr&&(delete this.lr[i],--this.cr),this.hr()}},n.prototype.loadMoreTiles=function(t,n){for(var r,i,e=0;this.cr<t&&e<n&&this.getCount()>0;)i=(r=this.dequeue()[0]).getKey(),r.getState()!==ct||i in this.lr||(this.lr[i]=!0,++this.cr,++e,r.load())},n}(Ps);function Ls(t,n,r,i,e){if(!t||!(r in t.wantedTiles))return Cs;if(!t.wantedTiles[r][n.getKey()])return Cs;var o=t.viewState.center,u=i[0]-o[0],s=i[1]-o[1];return 65536*Math.log(e)+Math.sqrt(u*u+s*s)/e}var Rs=0,Gs=1,zs={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Fs=256;function Ds(t,n,r){return function(i,e,o,u,s){if(i){if(!e&&!n)return i;var a=n?0:o[0]*e,f=n?0:o[1]*e,h=s?s[0]:0,c=s?s[1]:0,l=t[0]+a/2+h,v=t[2]-a/2+h,d=t[1]+f/2+c,p=t[3]-f/2+c;l>v&&(v=l=(v+l)/2),d>p&&(p=d=(p+d)/2);var y=fr(i[0],l,v),w=fr(i[1],d,p);if(u&&r&&e){var m=30*e;y+=-m*Math.log(1+Math.max(0,l-i[0])/m)+m*Math.log(1+Math.max(0,i[0]-v)/m),w+=-m*Math.log(1+Math.max(0,d-i[1])/m)+m*Math.log(1+Math.max(0,i[1]-p)/m)}return[y,w]}}}function Us(t){return t}function qs(t,n,r,i){var e=Qn(n)/r[0],o=Hn(n)/r[1];return i?Math.min(t,Math.max(e,o)):Math.min(t,Math.min(e,o))}function Bs(t,n,r){var i=Math.min(t,n);return i*=Math.log(1+50*Math.max(0,t/n-1))/50+1,r&&(i=Math.max(i,r),i/=Math.log(1+50*Math.max(0,r/t-1))/50+1),fr(i,r/2,2*n)}function Xs(t,n,r,i){return function(e,o,u,s){if(void 0!==e){var a=t[0],f=t[t.length-1],h=r?qs(a,r,u,i):a;if(s)return void 0===n||n?Bs(e,h,f):fr(e,f,h);var c=Math.min(h,e),l=Math.floor(w(t,c,o));return t[l]>h&&l<t.length-1?t[l+1]:t[l]}}}function Vs(t,n,r,i,e,o){return function(u,s,a,f){if(void 0!==u){var h=e?qs(n,e,a,o):n,c=void 0!==r?r:0;if(f)return void 0===i||i?Bs(u,h,c):fr(u,c,h);var l=Math.ceil(Math.log(n/h)/Math.log(t)-1e-9),v=-s*(.5-1e-9)+.5,d=Math.min(h,u),p=Math.floor(Math.log(n/d)/Math.log(t)+v),y=Math.max(l,p);return fr(n/Math.pow(t,y),c,h)}}}function Ys(t,n,r,i,e){return function(o,u,s,a){if(void 0!==o){var f=i?qs(t,i,s,e):t;return(void 0===r||r)&&a?Bs(o,f,n):fr(o,n,f)}}}function Ws(t){return void 0!==t?0:void 0}function Zs(t){return void 0!==t?t:void 0}function Hs(t){var n=2*Math.PI/t;return function(t,r){return r?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function Ks(t){var n=t||yr(5);return function(t,r){return r?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}var $s=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Js(t,n){setTimeout((function(){t(n)}),0)}function Qs(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Ds(t.extent,t.constrainOnlyCenter,n)}var r=Oi(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var i=r.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Ds(i,!1,!1)}return Us}function ta(t){var n,r,i,e=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,a=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,h=Oi(t.projection,"EPSG:3857"),c=h.getExtent(),l=t.constrainOnlyCenter,v=t.extent;if(s||v||!h.isGlobal()||(l=!1,v=c),void 0!==t.resolutions){var d=t.resolutions;r=d[e],i=void 0!==d[o]?d[o]:d[d.length-1],n=t.constrainResolution?Xs(d,a,!l&&v,f):Ys(r,i,a,!l&&v,f)}else{var p=(c?Math.max(Qn(c),Hn(c)):360*Rt[zt.DEGREES]/h.getMetersPerUnit())/Fs/Math.pow(2,0),y=p/Math.pow(2,28);void 0!==(r=t.maxResolution)?e=0:r=p/Math.pow(u,e),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(u,o):p/Math.pow(u,o):y),o=e+Math.floor(Math.log(r/i)/Math.log(u)),i=r/Math.pow(u,o-e),n=t.constrainResolution?Vs(u,r,i,a,!l&&v,f):Ys(r,i,a,!l&&v,f)}return{constraint:n,maxResolution:r,minResolution:i,minZoom:e,zoomFactor:u}}function na(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?Ks():!1===n?Zs:"number"==typeof n?Hs(n):Zs}return Ws}function ra(t){return!(t.sourceCenter&&t.targetCenter&&!ti(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function ia(t,n,r,i,e){var o=Math.cos(-e),u=Math.sin(-e),s=t[0]*o-t[1]*u,a=t[1]*o+t[0]*u;return[(s+=(n[0]/2-r[0])*i)*o-(a+=(r[1]-n[1]/2)*i)*(u=-u),a*o+s*u]}var ea=function(t){function n(n){var r=t.call(this)||this;r.on,r.once,r.un;var i=k({},n);return r.vr=[0,0],r.dr=[],r.pr,r.yr=Oi(i.projection,"EPSG:3857"),r.wr=[100,100],r.mr=null,r.br,r.gr,r._r=null,r.jr,r.Sr,r.Mr=void 0,i.projection&&pi(),i.center&&(i.center=Gi(i.center,r.yr)),i.extent&&(i.extent=Fi(i.extent,r.yr)),r.Er(i),r}return $s(n,t),n.prototype.Er=function(t){var n=k({},t);for(var r in zs)delete n[r];this.setProperties(n,!0);var i=ta(t);this.Tr=i.maxResolution,this.kr=i.minResolution,this.Ar=i.zoomFactor,this.Cr=t.resolutions,this.Pr=t.padding,this.Nr=i.minZoom;var e=Qs(t),o=i.constraint,u=na(t);this.Ir={center:e,resolution:o,rotation:u},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(n.prototype,"padding",{get:function(){return this.Pr},set:function(t){var n=this.Pr;this.Pr=t;var r=this.getCenter();if(r){var i=t||[0,0,0,0];n=n||[0,0,0,0];var e=this.getResolution(),o=e/2*(i[3]-n[3]+n[1]-i[1]),u=e/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-u])}},enumerable:!1,configurable:!0}),n.prototype.Lr=function(t){var n=this.getProperties();return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),k({},n,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),r=0;r<n.length;++r){var i=arguments[r];i.center&&((i=k({},i)).center=Gi(i.center,this.getProjection())),i.anchor&&((i=k({},i)).anchor=Gi(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)},n.prototype.animateInternal=function(t){var n,r=arguments.length;r>1&&"function"==typeof arguments[r-1]&&(n=arguments[r-1],--r);for(var i=0;i<r&&!this.isDef();++i){var e=arguments[i];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation)}if(i!==r){for(var o=Date.now(),u=this.mr.slice(),s=this.br,a=this.gr,f=[];i<r;++i){var h=arguments[i],c={start:o,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||mt,callback:n};if(h.center&&(c.sourceCenter=u,c.targetCenter=h.center.slice(),u=c.targetCenter),void 0!==h.zoom?(c.sourceResolution=s,c.targetResolution=this.getResolutionForZoom(h.zoom),s=c.targetResolution):h.resolution&&(c.sourceResolution=s,c.targetResolution=h.resolution,s=c.targetResolution),void 0!==h.rotation){c.sourceRotation=a;var l=wr(h.rotation-a+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=a+l,a=c.targetRotation}ra(c)?c.complete=!0:o+=c.duration,f.push(c)}this.dr.push(f),this.setHint(Rs,1),this.Rr()}else n&&Js(n,!0)},n.prototype.getAnimating=function(){return this.vr[Rs]>0},n.prototype.getInteracting=function(){return this.vr[Gs]>0},n.prototype.cancelAnimations=function(){var t;this.setHint(Rs,-this.vr[Rs]);for(var n=0,r=this.dr.length;n<r;++n){var i=this.dr[n];if(i[0].callback&&Js(i[0].callback,!1),!t)for(var e=0,o=i.length;e<o;++e){var u=i[e];if(!u.complete){t=u.anchor;break}}}this.dr.length=0,this.Mr=t,this._r=null,this.jr=NaN,this.Sr=NaN},n.prototype.Rr=function(){if(void 0!==this.pr&&(cancelAnimationFrame(this.pr),this.pr=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,r=this.dr.length-1;r>=0;--r){for(var i=this.dr[r],e=!0,o=0,u=i.length;o<u;++o){var s=i[o];if(!s.complete){var a=t-s.start,f=s.duration>0?a/s.duration:1;f>=1?(s.complete=!0,f=1):e=!1;var h=s.easing(f);if(s.sourceCenter){var c=s.sourceCenter[0],l=s.sourceCenter[1],v=s.targetCenter[0],d=s.targetCenter[1];this._r=s.targetCenter;var p=c+h*(v-c),y=l+h*(d-l);this.mr=[p,y]}if(s.sourceResolution&&s.targetResolution){var w=1===h?s.targetResolution:s.sourceResolution+h*(s.targetResolution-s.sourceResolution);if(s.anchor){var m=this.Gr(this.getRotation()),b=this.Ir.resolution(w,0,m,!0);this.mr=this.calculateCenterZoom(b,s.anchor)}this.jr=s.targetResolution,this.br=w,this.zr(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var g=1===h?wr(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+h*(s.targetRotation-s.sourceRotation);if(s.anchor){var x=this.Ir.rotation(g,!0);this.mr=this.calculateCenterRotate(x,s.anchor)}this.Sr=s.targetRotation,this.gr=g}if(this.zr(!0),n=!0,!s.complete)break}}if(e){this.dr[r]=null,this.setHint(Rs,-1),this._r=null,this.jr=NaN,this.Sr=NaN;var _=i[0].callback;_&&Js(_,!0)}}this.dr=this.dr.filter(Boolean),n&&void 0===this.pr&&(this.pr=requestAnimationFrame(this.Rr.bind(this)))}},n.prototype.calculateCenterRotate=function(t,n){var r,i=this.getCenterInternal();return void 0!==i&&(ni(r=[i[0]-n[0],i[1]-n[1]],t-this.getRotation()),Hr(r,n)),r},n.prototype.calculateCenterZoom=function(t,n){var r,i=this.getCenterInternal(),e=this.getResolution();void 0!==i&&void 0!==e&&(r=[n[0]-t*(n[0]-i[0])/e,n[1]-t*(n[1]-i[1])/e]);return r},n.prototype.Gr=function(t){var n=this.wr;if(t){var r=n[0],i=n[1];return[Math.abs(r*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(i*Math.cos(t))]}return n},n.prototype.setViewportSize=function(t){this.wr=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Ri(t,this.getProjection()):t},n.prototype.getCenterInternal=function(){return this.get(zs.CENTER)},n.prototype.getConstraints=function(){return this.Ir},n.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.vr[0],t[1]=this.vr[1],t):this.vr.slice()},n.prototype.calculateExtent=function(t){return zi(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var n=t||this.Fr(),r=this.getCenterInternal();Ot(r,1);var i=this.getResolution();Ot(void 0!==i,2);var e=this.getRotation();return Ot(void 0!==e,3),Zn(r,i,e,n)},n.prototype.getMaxResolution=function(){return this.Tr},n.prototype.getMinResolution=function(){return this.kr},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.kr)},n.prototype.setMaxZoom=function(t){this.Er(this.Lr({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.Tr)},n.prototype.setMinZoom=function(t){this.Er(this.Lr({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.Er(this.Lr({constrainResolution:t}))},n.prototype.getProjection=function(){return this.yr},n.prototype.getResolution=function(){return this.get(zs.RESOLUTION)},n.prototype.getResolutions=function(){return this.Cr},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Fi(t,this.getProjection()),n)},n.prototype.getResolutionForExtentInternal=function(t,n){var r=n||this.Fr(),i=Qn(t)/r[0],e=Hn(t)/r[1];return Math.max(i,e)},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,r=this.getConstrainedResolution(this.Tr),i=this.kr,e=Math.log(r/i)/Math.log(n);return function(t){return r/Math.pow(n,t*e)}},n.prototype.getRotation=function(){return this.get(zs.ROTATION)},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),r=this.getConstrainedResolution(this.Tr),i=this.kr,e=Math.log(r/i)/n;return function(t){return Math.log(r/t)/n/e}},n.prototype.Fr=function(t){var n=this.Gr(t),r=this.Pr;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),r=this.getRotation(),i=this.getCenterInternal(),e=this.Pr;if(e){var o=this.Fr();i=ia(i,this.Gr(),[o[0]/2+e[3],o[1]/2+e[0]],n,r)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this._r,nextResolution:this.jr,nextRotation:this.Sr,rotation:r,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},n.prototype.getZoomForResolution=function(t){var n,r,i=this.Nr||0;if(this.Cr){var e=w(this.Cr,t,1);i=e,n=this.Cr[e],r=e==this.Cr.length-1?2:n/this.Cr[e+1]}else n=this.Tr,r=this.Ar;return i+Math.log(n/t)/Math.log(r)},n.prototype.getResolutionForZoom=function(t){if(this.Cr){if(this.Cr.length<=1)return 0;var n=fr(Math.floor(t),0,this.Cr.length-2),r=this.Cr[n]/this.Cr[n+1];return this.Cr[n]/Math.pow(r,fr(t-n,0,1))}return this.Tr/Math.pow(this.Ar,t-this.Nr)},n.prototype.fit=function(t,n){var r;if(Ot(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Ot(!nr(t),25),r=Je(i=Fi(t,this.getProjection()));else if(t.getType()===Pt.CIRCLE){var i;(r=Je(i=Fi(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Yn(i))}else{var e=Li();r=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(r,n)},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),e=t.getFlatCoordinates(),o=t.getStride(),u=1/0,s=1/0,a=-1/0,f=-1/0,h=0,c=e.length;h<c;h+=o){var l=e[h]*r-e[h+1]*i,v=e[h]*i+e[h+1]*r;u=Math.min(u,l),s=Math.min(s,v),a=Math.max(a,l),f=Math.max(f,v)}return[u,s,a,f]},n.prototype.fitInternal=function(t,n){var r=n||{},i=r.size;i||(i=this.Fr());var e,o=void 0!==r.padding?r.padding:[0,0,0,0],u=void 0!==r.nearest&&r.nearest;e=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;var s=this.rotatedExtentForGeometry(t),a=this.getResolutionForExtentInternal(s,[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);a=isNaN(a)?e:Math.max(a,e),a=this.getConstrainedResolution(a,u?0:1);var f=this.getRotation(),h=Math.sin(f),c=Math.cos(f),l=Yn(s);l[0]+=(o[1]-o[3])/2*a,l[1]+=(o[0]-o[2])/2*a;var v=l[0]*c-l[1]*h,d=l[1]*c+l[0]*h,p=this.getConstrainedCenter([v,d],a),y=r.callback?r.callback:M;void 0!==r.duration?this.animateInternal({resolution:a,center:p,duration:r.duration,easing:r.easing},y):(this.br=a,this.mr=p,this.zr(!1,!0),Js(y,!0))},n.prototype.centerOn=function(t,n,r){this.centerOnInternal(Gi(t,this.getProjection()),n,r)},n.prototype.centerOnInternal=function(t,n,r){this.setCenterInternal(ia(t,n,r,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,n,r,i){var e,o=this.Pr;if(o&&t){var u=this.Fr(-r),s=ia(t,i,[u[0]/2+o[3],u[1]/2+o[0]],n,r);e=[t[0]-s[0],t[1]-s[1]]}return e},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var n=Ri(this.mr,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var n=this.mr;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustResolution=function(t,n){var r=n&&Gi(n,this.getProjection());this.adjustResolutionInternal(t,r)},n.prototype.adjustResolutionInternal=function(t,n){var r=this.getAnimating()||this.getInteracting(),i=this.Gr(this.getRotation()),e=this.Ir.resolution(this.br*t,0,i,r);n&&(this.mr=this.calculateCenterZoom(e,n)),this.br*=t,this.zr()},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.Ar,-t),n)},n.prototype.adjustRotation=function(t,n){n&&(n=Gi(n,this.getProjection())),this.adjustRotationInternal(t,n)},n.prototype.adjustRotationInternal=function(t,n){var r=this.getAnimating()||this.getInteracting(),i=this.Ir.rotation(this.gr+t,r);n&&(this.mr=this.calculateCenterRotate(i,n)),this.gr+=t,this.zr()},n.prototype.setCenter=function(t){this.setCenterInternal(t?Gi(t,this.getProjection()):t)},n.prototype.setCenterInternal=function(t){this.mr=t,this.zr()},n.prototype.setHint=function(t,n){return this.vr[t]+=n,this.changed(),this.vr[t]},n.prototype.setResolution=function(t){this.br=t,this.zr()},n.prototype.setRotation=function(t){this.gr=t,this.zr()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.zr=function(t,n){var r=this.getAnimating()||this.getInteracting()||n,i=this.Ir.rotation(this.gr,r),e=this.Gr(i),o=this.Ir.resolution(this.br,0,e,r),u=this.Ir.center(this.mr,o,e,r,this.calculateCenterShift(this.mr,o,i,e));this.get(zs.ROTATION)!==i&&this.set(zs.ROTATION,i),this.get(zs.RESOLUTION)!==o&&(this.set(zs.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),u&&this.get(zs.CENTER)&&ti(this.get(zs.CENTER),u)||this.set(zs.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.Mr=void 0},n.prototype.resolveConstraints=function(t,n,r){var i=void 0!==t?t:200,e=n||0,o=this.Ir.rotation(this.gr),u=this.Gr(o),s=this.Ir.resolution(this.br,e,u),a=this.Ir.center(this.mr,s,u,!1,this.calculateCenterShift(this.mr,s,o,u));if(0===i&&!this.Mr)return this.br=s,this.gr=o,this.mr=a,void this.zr();var f=r||(0===i?this.Mr:void 0);this.Mr=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&ti(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:a,resolution:s,duration:i,easing:wt,anchor:f}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Gs,1)},n.prototype.endInteraction=function(t,n,r){var i=r&&Gi(r,this.getProjection());this.endInteractionInternal(t,n,i)},n.prototype.endInteractionInternal=function(t,n,r){this.setHint(Gs,-1),this.resolveConstraints(t,n,r)},n.prototype.getConstrainedCenter=function(t,n){var r=this.Gr(this.getRotation());return this.Ir.center(t,n||this.getResolution(),r)},n.prototype.getConstrainedZoom=function(t,n){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,n))},n.prototype.getConstrainedResolution=function(t,n){var r=n||0,i=this.Gr(this.getRotation());return this.Ir.resolution(t,r,i)},n}(et);function oa(t,n,r){return void 0===r&&(r=[0,0]),r[0]=t[0]+2*n,r[1]=t[1]+2*n,r}function ua(t){return t[0]>0&&t[1]>0}function sa(t,n,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*n+.5|0,r[1]=t[1]*n+.5|0,r}function aa(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n)}var fa=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function ha(t){t instanceof gu?t.setMapInternal(null):t instanceof hs&&t.getLayers().forEach(ha)}function ca(t,n){if(t instanceof gu)t.setMapInternal(n);else if(t instanceof hs)for(var r=t.getLayers().getArray(),i=0,e=r.length;i<e;++i)ca(r[i],n)}var la=function(t){function n(n){var r=t.call(this)||this;r.on,r.once,r.un;var i=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,i,e,o={},u=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new hs({layers:t.layers});o[Es]=u,o[ks]=t.target,o[As]=t.view instanceof ea?t.view:new ea,void 0!==t.controls&&(Array.isArray(t.controls)?r=new ht(t.controls.slice()):(Ot("function"==typeof t.controls.getArray,47),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new ht(t.interactions.slice()):(Ot("function"==typeof t.interactions.getArray,48),i=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?e=new ht(t.overlays.slice()):(Ot("function"==typeof t.overlays.getArray,49),e=t.overlays):e=new ht;return{controls:r,interactions:i,keyboardEventTarget:n,overlays:e,values:o}}(n);r.Dr,r.Ur=!0,r.qr=r.handleBrowserEvent.bind(r),r.Br=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,r.Pt=void 0!==n.pixelRatio?n.pixelRatio:Vt,r.Xr,r.Vr,r.Yr=function(){this.Vr=void 0,this.Wr(Date.now())}.bind(r),r.Zr=[1,0,0,1,0,0],r.Hr=[1,0,0,1,0,0],r.Kr=0,r.$r=null,r.Jr=null,r.Qr=null,r.ti=null,r.ni=null,r.ri=document.createElement("div"),r.ri.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.ri.style.position="relative",r.ri.style.overflow="hidden",r.ri.style.width="100%",r.ri.style.height="100%",r.ii=document.createElement("div"),r.ii.style.position="absolute",r.ii.style.zIndex="0",r.ii.style.width="100%",r.ii.style.height="100%",r.ii.style.pointerEvents="none",r.ii.className="ol-overlaycontainer",r.ri.appendChild(r.ii),r.ei=document.createElement("div"),r.ei.style.position="absolute",r.ei.style.zIndex="0",r.ei.style.width="100%",r.ei.style.height="100%",r.ei.style.pointerEvents="none",r.ei.className="ol-overlaycontainer-stopevent",r.ri.appendChild(r.ei),r.oi=null,r.Nn=n.moveTolerance,r.ui=i.keyboardEventTarget,r.si=null,r.controls=i.controls||new ht,r.interactions=i.interactions||new ht,r.ai=i.overlays,r.fi={},r.fn=null,r.hi=[],r.ci=new Is(r.getTilePriority.bind(r),r.li.bind(r)),r.addChangeListener(Es,r.vi),r.addChangeListener(As,r.di),r.addChangeListener(Ts,r.yi),r.addChangeListener(ks,r.wi),r.setProperties(i.values);var e=r;return!n.view||n.view instanceof ea||n.view.then((function(t){e.setView(new ea(t))})),r.controls.addEventListener(ot,function(t){t.element.setMap(this)}.bind(r)),r.controls.addEventListener(ut,function(t){t.element.setMap(null)}.bind(r)),r.interactions.addEventListener(ot,function(t){t.element.setMap(this)}.bind(r)),r.interactions.addEventListener(ut,function(t){t.element.setMap(null)}.bind(r)),r.ai.addEventListener(ot,function(t){this.mi(t.element)}.bind(r)),r.ai.addEventListener(ut,function(t){var n=t.element.getId();void 0!==n&&delete this.fi[n.toString()],t.element.setMap(null)}.bind(r)),r.controls.forEach(function(t){t.setMap(this)}.bind(r)),r.interactions.forEach(function(t){t.setMap(this)}.bind(r)),r.ai.forEach(r.mi.bind(r)),r}return fa(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.bi=function(t){ca(t.layer,this)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.mi=function(t){var n=t.getId();void 0!==n&&(this.fi[n.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.ai.clear(),this.setTarget(null),t.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,n,r){if(this.$r&&this.fn){var i=this.getCoordinateFromPixelInternal(t),e=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,o=void 0!==r.layerFilter?r.layerFilter:O,u=!1!==r.checkWrapped;return this.fn.forEachFeatureAtCoordinate(i,this.$r,e,u,n,null,o,null)}},n.prototype.getFeaturesAtPixel=function(t,n){var r=[];return this.forEachFeatureAtPixel(t,(function(t){r.push(t)}),n),r},n.prototype.getAllLayers=function(){var t=[];return function n(r){r.forEach((function(r){r instanceof hs?n(r.getLayers()):t.push(r)}))}(this.getLayers()),t},n.prototype.forEachLayerAtPixel=function(t,n,r){if(this.$r&&this.fn){var i=r||{},e=void 0!==i.hitTolerance?i.hitTolerance:0,o=i.layerFilter||O;return this.fn.forEachLayerAtPixel(t,this.$r,e,n,o)}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.$r||!this.fn)return!1;var r=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:O,e=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.fn.hasFeatureAtCoordinate(r,this.$r,e,o,i,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var n=this.ri.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-n.left,r.clientY-n.top]},n.prototype.getTarget=function(){return this.get(ks)},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return Ri(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.$r;return n?nn(n.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.ai},n.prototype.getOverlayById=function(t){var n=this.fi[t.toString()];return void 0!==n?n:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get(Es)},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof ht)n.setLayers(t);else{var r=n.getLayers();r.clear(),r.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,r=t.length;n<r;++n){var i=t[n];if(i.visible){var e=i.layer.getRenderer();if(e&&!e.ready)return!0;var o=i.layer.getSource();if(o&&o.loading)return!0}}return!1},n.prototype.getPixelFromCoordinate=function(t){var n=Gi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.$r;return n?nn(n.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.fn},n.prototype.getSize=function(){return this.get(Ts)},n.prototype.getView=function(){return this.get(As)},n.prototype.getViewport=function(){return this.ri},n.prototype.getOverlayContainer=function(){return this.ii},n.prototype.getOverlayContainerStopEvent=function(){return this.ei},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,n,r,i){return Ls(this.$r,t,n,r,i)},n.prototype.handleBrowserEvent=function(t,n){var r=n||t.type,i=new ds(r,this,t);this.handleMapBrowserEvent(i)},n.prototype.handleMapBrowserEvent=function(t){if(this.$r){var n=t.originalEvent,r=n.type;if(r===ws||r===Z||r===B){var i=this.getOwnerDocument(),e=this.ri.getRootNode?this.ri.getRootNode():i,o=n.target;if(this.ei.contains(o)||!(e===i?i.documentElement:e).contains(o))return}if(t.frameState=this.$r,!1!==this.dispatchEvent(t))for(var u=this.getInteractions().getArray().slice(),s=u.length-1;s>=0;s--){var a=u[s];if(a.getMap()===this&&a.getActive()&&this.getTargetElement())if(!a.handleEvent(t)||t.propagationStopped)break}}},n.prototype.handlePostRender=function(){var t=this.$r,n=this.ci;if(!n.isEmpty()){var r=this.Br,i=r;if(t){var e=t.viewHints;if(e[Rs]||e[Gs]){var o=Date.now()-t.time>8;r=o?0:8,i=o?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,i))}t&&this.fn&&!t.animate&&(!0===this.Dr?(this.hasListener(vu)&&this.fn.dispatchRenderEvent(vu,t),!1===this.Ur&&(this.Ur=!0,this.dispatchEvent(new ls(Ms,this,t)))):!0===this.Ur&&(this.Ur=!1,this.dispatchEvent(new ls(Ss,this,t))));for(var u=this.hi,s=0,a=u.length;s<a;++s)u[s](this,t);u.length=0},n.prototype.yi=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.wi=function(){if(this.oi){for(var t=0,n=this.si.length;t<n;++t)$(this.si[t]);this.si=null,this.ri.removeEventListener(G,this.qr),this.ri.removeEventListener(Z,this.qr),this.oi.dispose(),this.oi=null,Co(this.ri)}var r=this.getTargetElement();if(r){for(var i in r.appendChild(this.ri),this.fn||(this.fn=this.createRenderer()),this.oi=new xs(this,this.Nn),ps)this.oi.addEventListener(ps[i],this.handleMapBrowserEvent.bind(this));this.ri.addEventListener(G,this.qr,!1),this.ri.addEventListener(Z,this.qr,!!Zt&&{passive:!1});var e=this.getOwnerDocument().defaultView,o=this.ui?this.ui:r;this.si=[H(o,B,this.handleBrowserEvent,this),H(o,X,this.handleBrowserEvent,this),H(e,Y,this.updateSize,this)]}else this.fn&&(clearTimeout(this.Xr),this.Xr=void 0,this.hi.length=0,this.fn.dispose(),this.fn=null),this.Vr&&(cancelAnimationFrame(this.Vr),this.Vr=void 0);this.updateSize()},n.prototype.li=function(){this.render()},n.prototype.gi=function(){this.render()},n.prototype.di=function(){this.Qr&&($(this.Qr),this.Qr=null),this.ti&&($(this.ti),this.ti=null);var t=this.getView();t&&(this.xi(),this.Qr=H(t,l,this.gi,this),this.ti=H(t,L,this.gi,this),t.resolveConstraints(0)),this.render()},n.prototype.vi=function(){this.ni&&(this.ni.forEach($),this.ni=null);var t=this.getLayerGroup();t&&(this.bi(new as("addlayer",t)),this.ni=[H(t,l,this.render,this),H(t,L,this.render,this),H(t,"addlayer",this.bi,this),H(t,"removelayer",this._i,this)]),this.render()},n.prototype.isRendered=function(){return!!this.$r},n.prototype.renderSync=function(){this.Vr&&cancelAnimationFrame(this.Vr),this.Yr()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,r=t.length;n<r;++n){var i=t[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.fn&&void 0===this.Vr&&(this.Vr=requestAnimationFrame(this.Yr))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype._i=function(t){ha(t.layer)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.Wr=function(t){var n=this,r=this.getSize(),i=this.getView(),e=this.$r,u=null;if(void 0!==r&&ua(r)&&i&&i.isDef()){var s=i.getHints(this.$r?this.$r.viewHints:void 0),a=i.getState();if(u={animate:!1,coordinateToPixelTransform:this.Zr,declutterTree:null,extent:Zn(a.center,a.resolution,a.rotation,r),index:this.Kr++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.Pt,pixelToCoordinateTransform:this.Hr,postRenderFunctions:[],size:r,tileQueue:this.ci,time:t,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:o(this),renderTargets:{}},a.nextCenter&&a.nextResolution){var f=isNaN(a.nextRotation)?a.rotation:a.nextRotation;u.nextExtent=Zn(a.nextCenter,a.nextResolution,f,r)}}if(this.$r=u,this.fn.renderFrame(u),u){if(u.animate&&this.render(),Array.prototype.push.apply(this.hi,u.postRenderFunctions),e)(!this.Jr||!nr(this.Jr)&&!In(u.extent,this.Jr))&&(this.dispatchEvent(new ls(js,this,e)),this.Jr=Cn(this.Jr));this.Jr&&!u.viewHints[Rs]&&!u.viewHints[Gs]&&!In(u.extent,this.Jr)&&(this.dispatchEvent(new ls(Os,this,u)),jn(u.extent,this.Jr))}this.dispatchEvent(new ls(_s,this,u)),this.Dr=this.hasListener(Ss)||this.hasListener(Ms)||this.hasListener(vu)?!this.ci.getTilesLoading()&&!this.ci.getCount()&&!this.getLoadingOrNotReady():void 0,this.Xr||(this.Xr=setTimeout((function(){n.Xr=void 0,n.handlePostRender()}),0))},n.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this._i(new as("removelayer",n)),this.set(Es,t)},n.prototype.setSize=function(t){this.set(Ts,t)},n.prototype.setTarget=function(t){this.set(ks,t)},n.prototype.setView=function(t){if(!t||t instanceof ea)this.set(As,t);else{this.set(As,new ea);var n=this;t.then((function(t){n.setView(new ea(t))}))}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var r=getComputedStyle(t),i=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),e=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(i)||isNaN(e)||!ua(n=[i,e])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.xi()},n.prototype.xi=function(){var t=this.getView();if(t){var n=void 0,r=getComputedStyle(this.ri);r.width&&r.height&&(n=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(n)}},n}(et),va=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),da=function(t){function n(n){var r=t.call(this)||this,i=n.element;return!i||n.target||i.style.pointerEvents||(i.style.pointerEvents="auto"),r.element=i||null,r.ji=null,r.vn=null,r.listenerKeys=[],n.render&&(r.render=n.render),n.target&&r.setTarget(n.target),r}return va(n,t),n.prototype.disposeInternal=function(){Co(this.element),t.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.vn},n.prototype.setMap=function(t){this.vn&&Co(this.element);for(var n=0,r=this.listenerKeys.length;n<r;++n)$(this.listenerKeys[n]);(this.listenerKeys.length=0,this.vn=t,t)&&((this.ji?this.ji:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==M&&this.listenerKeys.push(H(t,_s,this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.ji="string"==typeof t?document.getElementById(t):t},n}(et),pa=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ya=function(t){function n(n){var r=this,i=n||{};(r=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).Oi=document.createElement("ul"),r.Si=void 0===i.collapsed||i.collapsed,r.Mi=r.Si,r.Ei=void 0!==i.collapsible,r.Ti=void 0===i.collapsible||i.collapsible,r.Ti||(r.Si=!1);var e=void 0!==i.className?i.className:"ol-attribution",o=void 0!==i.tipLabel?i.tipLabel:"Attributions",u=void 0!==i.expandClassName?i.expandClassName:e+"-expand",s=void 0!==i.collapseLabel?i.collapseLabel:"›",a=void 0!==i.collapseClassName?i.collapseClassName:e+"-collapse";"string"==typeof s?(r.ki=document.createElement("span"),r.ki.textContent=s,r.ki.className=a):r.ki=s;var f=void 0!==i.label?i.label:"i";"string"==typeof f?(r.Ai=document.createElement("span"),r.Ai.textContent=f,r.Ai.className=u):r.Ai=f;var h=r.Ti&&!r.Si?r.ki:r.Ai;r.Ci=document.createElement("button"),r.Ci.setAttribute("type","button"),r.Ci.setAttribute("aria-expanded",String(!r.Si)),r.Ci.title=o,r.Ci.appendChild(h),r.Ci.addEventListener(z,r.Pi.bind(r),!1);var c=e+" "+"ol-unselectable "+Au+(r.Si&&r.Ti?" ol-collapsed":"")+(r.Ti?"":" ol-uncollapsible"),l=r.element;return l.className=c,l.appendChild(r.Ci),l.appendChild(r.Oi),r.Ni=[],r.wn=!0,r}return pa(n,t),n.prototype.Ii=function(t){for(var n={},r=[],i=!0,e=t.layerStatesArray,o=0,u=e.length;o<u;++o){var s=e[o];if(bu(s,t.viewState)){var a=s.layer.getSource();if(a){var f=a.getAttributions();if(f){var h=f(t);if(h)if(i=i&&!1!==a.getAttributionsCollapsible(),Array.isArray(h))for(var c=0,l=h.length;c<l;++c)h[c]in n||(r.push(h[c]),n[h[c]]=!0);else h in n||(r.push(h),n[h]=!0)}}}}return this.Ei||this.setCollapsible(i),r},n.prototype.Li=function(t){if(t){var n=this.Ii(t),r=n.length>0;if(this.wn!=r&&(this.element.style.display=r?"":"none",this.wn=r),!x(n,this.Ni)){Po(this.Oi);for(var i=0,e=n.length;i<e;++i){var o=document.createElement("li");o.innerHTML=n[i],this.Oi.appendChild(o)}this.Ni=n}}else this.wn&&(this.element.style.display="none",this.wn=!1)},n.prototype.Pi=function(t){t.preventDefault(),this.Ri(),this.Mi=this.Si},n.prototype.Ri=function(){this.element.classList.toggle(Cu),this.Si?Ao(this.ki,this.Ai):Ao(this.Ai,this.ki),this.Si=!this.Si,this.Ci.setAttribute("aria-expanded",String(!this.Si))},n.prototype.getCollapsible=function(){return this.Ti},n.prototype.setCollapsible=function(t){this.Ti!==t&&(this.Ti=t,this.element.classList.toggle("ol-uncollapsible"),this.Mi&&this.Ri())},n.prototype.setCollapsed=function(t){this.Mi=t,this.Ti&&this.Si!==t&&this.Ri()},n.prototype.getCollapsed=function(){return this.Si},n.prototype.render=function(t){this.Li(t.frameState)},n}(da),wa=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ma=function(t){function n(n){var r=this,i=n||{};r=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var e=void 0!==i.className?i.className:"ol-rotate",o=void 0!==i.label?i.label:"⇧",u=void 0!==i.compassClassName?i.compassClassName:"ol-compass";r.Ai=null,"string"==typeof o?(r.Ai=document.createElement("span"),r.Ai.className=u,r.Ai.textContent=o):(r.Ai=o,r.Ai.classList.add(u));var s=i.tipLabel?i.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(r.Ai),a.addEventListener(z,r.Pi.bind(r),!1);var f=e+" "+"ol-unselectable "+Au,h=r.element;return h.className=f,h.appendChild(a),r.Gi=i.resetNorth?i.resetNorth:void 0,r.zi=void 0!==i.duration?i.duration:250,r.Fi=void 0===i.autoHide||i.autoHide,r.Di=void 0,r.Fi&&r.element.classList.add(Mu),r}return wa(n,t),n.prototype.Pi=function(t){t.preventDefault(),void 0!==this.Gi?this.Gi():this.Ui()},n.prototype.Ui=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.zi>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.zi,easing:wt}):t.setRotation(0))}},n.prototype.render=function(t){var n=t.frameState;if(n){var r=n.viewState.rotation;if(r!=this.Di){var i="rotate("+r+"rad)";if(this.Fi){var e=this.element.classList.contains(Mu);e||0!==r?e&&0!==r&&this.element.classList.remove(Mu):this.element.classList.add(Mu)}this.Ai.style.transform=i}this.Di=r}},n}(da),ba=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ga=function(t){function n(n){var r=this,i=n||{};r=t.call(this,{element:document.createElement("div"),target:i.target})||this;var e=void 0!==i.className?i.className:"ol-zoom",o=void 0!==i.delta?i.delta:1,u=void 0!==i.zoomInClassName?i.zoomInClassName:e+"-in",s=void 0!==i.zoomOutClassName?i.zoomOutClassName:e+"-out",a=void 0!==i.zoomInLabel?i.zoomInLabel:"+",f=void 0!==i.zoomOutLabel?i.zoomOutLabel:"–",h=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",c=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=u,l.setAttribute("type","button"),l.title=h,l.appendChild("string"==typeof a?document.createTextNode(a):a),l.addEventListener(z,r.Pi.bind(r,o),!1);var v=document.createElement("button");v.className=s,v.setAttribute("type","button"),v.title=c,v.appendChild("string"==typeof f?document.createTextNode(f):f),v.addEventListener(z,r.Pi.bind(r,-o),!1);var d=e+" "+"ol-unselectable "+Au,p=r.element;return p.className=d,p.appendChild(l),p.appendChild(v),r.zi=void 0!==i.duration?i.duration:250,r}return ba(n,t),n.prototype.Pi=function(t,n){n.preventDefault(),this.qi(t)},n.prototype.qi=function(t){var n=this.getMap().getView();if(n){var r=n.getZoom();if(void 0!==r){var i=n.getConstrainedZoom(r+t);this.zi>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:i,duration:this.zi,easing:wt})):n.setZoom(i)}}},n}(da);function xa(t){var n=t||{},r=new ht;return(void 0===n.zoom||n.zoom)&&r.push(new ga(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&r.push(new ma(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&r.push(new ya(n.attributionOptions)),r}var _a="active",ja=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Oa(t,n,r){var i=t.getCenterInternal();if(i){var e=[i[0]+n[0],i[1]+n[1]];t.animateInternal({duration:void 0!==r?r:250,easing:bt,center:t.getConstrainedCenter(e)})}}function Sa(t,n,r,i){var e=t.getZoom();if(void 0!==e){var o=t.getConstrainedZoom(e+n),u=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:u,anchor:r,duration:void 0!==i?i:250,easing:wt})}}var Ma=function(t){function n(n){var r=t.call(this)||this;return r.on,r.once,r.un,n&&n.handleEvent&&(r.handleEvent=n.handleEvent),r.vn=null,r.setActive(!0),r}return ja(n,t),n.prototype.getActive=function(){return this.get(_a)},n.prototype.getMap=function(){return this.vn},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(_a,t)},n.prototype.setMap=function(t){this.vn=t},n}(et),Ea=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ta=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.Bi=i.delta?i.delta:1,r.zi=void 0!==i.duration?i.duration:250,r}return Ea(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==ps.DBLCLICK){var r=t.originalEvent,i=t.map,e=t.coordinate,o=r.shiftKey?-this.Bi:this.Bi;Sa(i.getView(),o,e,this.zi),r.preventDefault(),n=!0}return!n},n}(Ma),ka=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Aa(t){for(var n=t.length,r=0,i=0,e=0;e<n;e++)r+=t[e].clientX,i+=t[e].clientY;return[r/n,i/n]}var Ca=function(t){function n(n){var r=this,i=n||{};return r=t.call(this,i)||this,i.handleDownEvent&&(r.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(r.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(r.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(r.handleUpEvent=i.handleUpEvent),i.stopDown&&(r.stopDown=i.stopDown),r.handlingDownUpSequence=!1,r.Xi={},r.targetPointers=[],r}return ka(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.Vi(t),this.handlingDownUpSequence){if(t.type==ps.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ps.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==ps.POINTERDOWN){var i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==ps.POINTERMOVE&&this.handleMoveEvent(t);return!n},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.Vi=function(t){if(function(t){var n=t.type;return n===ps.POINTERDOWN||n===ps.POINTERDRAG||n===ps.POINTERUP}(t)){var n=t.originalEvent,r=n.pointerId.toString();t.type==ps.POINTERUP?delete this.Xi[r]:(t.type==ps.POINTERDOWN||r in this.Xi)&&(this.Xi[r]=n),this.targetPointers=C(this.Xi)}},n}(Ma);function Pa(t){var n=arguments;return function(t){for(var r=!0,i=0,e=n.length;i<e&&(r=r&&n[i](t));++i);return r}}var Na=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},Ia=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},La=function(t){var n=t.map.getTargetElement(),r=t.map.getOwnerDocument().activeElement;return n.contains(r)},Ra=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||La(t)},Ga=O,za=function(t){var n=t.originalEvent;return 0==n.button&&!(Bt&&Xt&&n.ctrlKey)},Fa=S,Da=function(t){return t.type==ps.SINGLECLICK},Ua=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},qa=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Ba=function(t){var n=t.originalEvent.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n},Xa=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"mouse"==n.pointerType},Va=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),n.isPrimary&&0===n.button},Ya=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Wa=function(t){function n(n){var r=t.call(this,{stopDown:S})||this,i=n||{};r.Yi=i.kinetic,r.lastCentroid=null,r.Wi,r.Zi=!1;var e=i.condition?i.condition:Pa(Ua,Va);return r.Hi=i.onFocusOnly?Pa(Ra,e):e,r.Ki=!1,r}return Ya(n,t),n.prototype.handleDragEvent=function(t){this.Zi||(this.Zi=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,r=Aa(n);if(n.length==this.Wi){if(this.Yi&&this.Yi.update(r[0],r[1]),this.lastCentroid){var i=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],e=t.map.getView();ri(i,e.getResolution()),ni(i,e.getRotation()),e.adjustCenterInternal(i)}}else this.Yi&&this.Yi.begin();this.lastCentroid=r,this.Wi=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,r=n.getView();if(0===this.targetPointers.length){if(!this.Ki&&this.Yi&&this.Yi.end()){var i=this.Yi.getDistance(),e=this.Yi.getAngle(),o=r.getCenterInternal(),u=n.getPixelFromCoordinateInternal(o),s=n.getCoordinateFromPixelInternal([u[0]-i*Math.cos(e),u[1]-i*Math.sin(e)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:wt})}return this.Zi&&(this.Zi=!1,r.endInteraction()),!1}return this.Yi&&this.Yi.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.Hi(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.Yi&&this.Yi.begin(),this.Ki=this.targetPointers.length>1,!0}return!1},n}(Ca),Za=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ha=function(t){function n(n){var r=this,i=n||{};return(r=t.call(this,{stopDown:S})||this).Hi=i.condition?i.condition:Ia,r.$i=void 0,r.zi=void 0!==i.duration?i.duration:250,r}return Za(n,t),n.prototype.handleDragEvent=function(t){if(Xa(t)){var n=t.map,r=n.getView();if(r.getConstraints().rotation!==Ws){var i=n.getSize(),e=t.pixel,o=Math.atan2(i[1]/2-e[1],e[0]-i[0]/2);if(void 0!==this.$i){var u=o-this.$i;r.adjustRotationInternal(-u)}this.$i=o}}},n.prototype.handleUpEvent=function(t){return!Xa(t)||(t.map.getView().endInteraction(this.zi),!1)},n.prototype.handleDownEvent=function(t){return!!Xa(t)&&(!(!za(t)||!this.Hi(t))&&(t.map.getView().beginInteraction(),this.$i=void 0,!0))},n}(Ca),Ka=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$a=function(t){function n(n){var r=t.call(this)||this;return r.Ji=null,r.pn=document.createElement("div"),r.pn.style.position="absolute",r.pn.style.pointerEvents="auto",r.pn.className="ol-box "+n,r.vn=null,r.Qi=null,r.te=null,r}return Ka(n,t),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.ne=function(){var t=this.Qi,n=this.te,r="px",i=this.pn.style;i.left=Math.min(t[0],n[0])+r,i.top=Math.min(t[1],n[1])+r,i.width=Math.abs(n[0]-t[0])+r,i.height=Math.abs(n[1]-t[1])+r},n.prototype.setMap=function(t){if(this.vn){this.vn.getOverlayContainer().removeChild(this.pn);var n=this.pn.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.vn=t,this.vn&&this.vn.getOverlayContainer().appendChild(this.pn)},n.prototype.setPixels=function(t,n){this.Qi=t,this.te=n,this.createOrUpdateGeometry(),this.ne()},n.prototype.createOrUpdateGeometry=function(){var t=this.Qi,n=this.te,r=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.vn.getCoordinateFromPixelInternal,this.vn);r[4]=r[0].slice(),this.Ji?this.Ji.setCoordinates([r]):this.Ji=new Ke([r])},n.prototype.getGeometry=function(){return this.Ji},n}(v),Ja=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Qa="boxstart",tf="boxdrag",nf="boxend",rf="boxcancel",ef=function(t){function n(n,r,i){var e=t.call(this,n)||this;return e.coordinate=r,e.mapBrowserEvent=i,e}return Ja(n,t),n}(c),of=function(t){function n(n){var r=t.call(this)||this;r.on,r.once,r.un;var i=n||{};return r.re=new $a(i.className||"ol-dragbox"),r.ie=void 0!==i.minArea?i.minArea:64,i.onBoxEnd&&(r.onBoxEnd=i.onBoxEnd),r.Qi=null,r.Hi=i.condition?i.condition:za,r.ee=i.boxEndCondition?i.boxEndCondition:r.defaultBoxEndCondition,r}return Ja(n,t),n.prototype.defaultBoxEndCondition=function(t,n,r){var i=r[0]-n[0],e=r[1]-n[1];return i*i+e*e>=this.ie},n.prototype.getGeometry=function(){return this.re.getGeometry()},n.prototype.handleDragEvent=function(t){this.re.setPixels(this.Qi,t.pixel),this.dispatchEvent(new ef(tf,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.re.setMap(null);var n=this.ee(t,this.Qi,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new ef(n?nf:rf,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.Hi(t)&&(this.Qi=t.pixel,this.re.setMap(t.map),this.re.setPixels(this.Qi,this.Qi),this.dispatchEvent(new ef(Qa,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(Ca),uf=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),sf=function(t){function n(n){var r=this,i=n||{},e=i.condition?i.condition:qa;return(r=t.call(this,{condition:e,className:i.className||"ol-dragzoom",minArea:i.minArea})||this).zi=void 0!==i.duration?i.duration:200,r.oe=void 0!==i.out&&i.out,r}return uf(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),r=this.getGeometry();if(this.oe){var i=n.rotatedExtentForGeometry(r),e=n.getResolutionForExtentInternal(i),o=n.getResolution()/e;(r=r.clone()).scale(o*o)}n.fitInternal(r,{duration:this.zi,easing:wt})},n}(of),af=37,ff=38,hf=39,cf=40,lf=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),vf=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.ue=function(t){return Ua(t)&&Ba(t)},r.Hi=void 0!==i.condition?i.condition:r.ue,r.zi=void 0!==i.duration?i.duration:100,r.se=void 0!==i.pixelDelta?i.pixelDelta:128,r}return lf(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B){var r=t.originalEvent,i=r.keyCode;if(this.Hi(t)&&(i==cf||i==af||i==hf||i==ff)){var e=t.map.getView(),o=e.getResolution()*this.se,u=0,s=0;i==cf?s=-o:i==af?u=-o:i==hf?u=o:s=o;var a=[u,s];ni(a,e.getRotation()),Oa(e,a,this.zi),r.preventDefault(),n=!0}}return!n},n}(Ma),df=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),pf=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.Hi=i.condition?i.condition:Ba,r.Bi=i.delta?i.delta:1,r.zi=void 0!==i.duration?i.duration:100,r}return df(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B||t.type==X){var r=t.originalEvent,i=r.charCode;if(this.Hi(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var e=t.map,o=i=="+".charCodeAt(0)?this.Bi:-this.Bi;Sa(e.getView(),o,void 0,this.zi),r.preventDefault(),n=!0}}return!n},n}(Ma),yf=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),wf="trackpad",mf="wheel",bf=function(t){function n(n){var r=this,i=n||{};(r=t.call(this,i)||this).ae=0,r.fe=0,r.wt=void 0!==i.maxDelta?i.maxDelta:1,r.zi=void 0!==i.duration?i.duration:250,r.he=void 0!==i.timeout?i.timeout:80,r.ce=void 0===i.useAnchor||i.useAnchor,r.le=void 0!==i.constrainResolution&&i.constrainResolution;var e=i.condition?i.condition:Ga;return r.Hi=i.onFocusOnly?Pa(Ra,e):e,r.ve=null,r.de=void 0,r.pe,r.ye=void 0,r.we=400,r.me,r.be=300,r}return yf(n,t),n.prototype.ge=function(){this.me=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.fe?this.fe>0?1:-1:0,this.ve)},n.prototype.handleEvent=function(t){if(!this.Hi(t))return!0;if(t.type!==Z)return!0;var n,r=t.map,i=t.originalEvent;if(i.preventDefault(),this.ce&&(this.ve=t.coordinate),t.type==Z&&(n=i.deltaY,Dt&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Vt),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.fe=n;var e=Date.now();void 0===this.de&&(this.de=e),(!this.ye||e-this.de>this.we)&&(this.ye=Math.abs(n)<4?wf:mf);var o=r.getView();if(this.ye===wf&&!o.getConstrainResolution()&&!this.le)return this.me?clearTimeout(this.me):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.me=setTimeout(this.ge.bind(this),this.he),o.adjustZoom(-n/this.be,this.ve),this.de=e,!1;this.ae+=n;var u=Math.max(this.he-(e-this.de),0);return clearTimeout(this.pe),this.pe=setTimeout(this.xe.bind(this,r),u),!1},n.prototype.xe=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var r=-fr(this.ae,-this.wt*this.be,this.wt*this.be)/this.be;(n.getConstrainResolution()||this.le)&&(r=r?r>0?1:-1:0),Sa(n,r,this.ve,this.zi),this.ye=void 0,this.ae=0,this.ve=null,this.de=void 0,this.pe=void 0},n.prototype.setMouseAnchor=function(t){this.ce=t,t||(this.ve=null)},n}(Ma),gf=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),xf=function(t){function n(n){var r=this,i=n||{},e=i;return e.stopDown||(e.stopDown=S),(r=t.call(this,e)||this)._e=null,r.$i=void 0,r.je=!1,r.Oe=0,r.Se=void 0!==i.threshold?i.threshold:.3,r.zi=void 0!==i.duration?i.duration:250,r}return gf(n,t),n.prototype.handleDragEvent=function(t){var n=0,r=this.targetPointers[0],i=this.targetPointers[1],e=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(void 0!==this.$i){var o=e-this.$i;this.Oe+=o,!this.je&&Math.abs(this.Oe)>this.Se&&(this.je=!0),n=o}this.$i=e;var u=t.map,s=u.getView();if(s.getConstraints().rotation!==Ws){var a=u.getViewport().getBoundingClientRect(),f=Aa(this.targetPointers);f[0]-=a.left,f[1]-=a.top,this._e=u.getCoordinateFromPixelInternal(f),this.je&&(u.render(),s.adjustRotationInternal(n,this._e))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.zi),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this._e=null,this.$i=void 0,this.je=!1,this.Oe=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Ca),_f=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),jf=function(t){function n(n){var r=this,i=n||{},e=i;return e.stopDown||(e.stopDown=S),(r=t.call(this,e)||this)._e=null,r.zi=void 0!==i.duration?i.duration:400,r.Me=void 0,r.Ee=1,r}return _f(n,t),n.prototype.handleDragEvent=function(t){var n=1,r=this.targetPointers[0],i=this.targetPointers[1],e=r.clientX-i.clientX,o=r.clientY-i.clientY,u=Math.sqrt(e*e+o*o);void 0!==this.Me&&(n=this.Me/u),this.Me=u;var s=t.map,a=s.getView();1!=n&&(this.Ee=n);var f=s.getViewport().getBoundingClientRect(),h=Aa(this.targetPointers);h[0]-=f.left,h[1]-=f.top,this._e=s.getCoordinateFromPixelInternal(h),s.render(),a.adjustResolutionInternal(n,this._e)},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),r=this.Ee>1?1:-1;return n.endInteraction(this.zi,r),!1}return!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this._e=null,this.Me=void 0,this.Ee=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Ca);function Of(t){var n=t||{},r=new ht,i=new Ro(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&r.push(new Ha),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&r.push(new Ta({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&r.push(new Wa({onFocusOnly:n.onFocusOnly,kinetic:i})),(void 0===n.pinchRotate||n.pinchRotate)&&r.push(new xf),(void 0===n.pinchZoom||n.pinchZoom)&&r.push(new jf({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(r.push(new vf),r.push(new pf({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&r.push(new bf({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&r.push(new sf({duration:n.zoomDuration})),r}var Sf=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Mf=function(t){function n(n){return(n=k({},n)).controls||(n.controls=xa()),n.interactions||(n.interactions=Of({onFocusOnly:!0})),t.call(this,n)||this}return Sf(n,t),n.prototype.createRenderer=function(){return new us(this)},n}(la),Ef="bottom-left",Tf="bottom-center",kf="bottom-right",Af="center-left",Cf="center-center",Pf="center-right",Nf="top-left",If="top-center",Lf="top-right";function Rf(t){return(Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Gf=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),zf="element",Ff="map",Df="offset",Uf="position",qf="positioning",Bf=function(t){function n(n){var r=t.call(this)||this;r.on,r.once,r.un,r.options=n,r.id=n.id,r.insertFirst=void 0===n.insertFirst||n.insertFirst,r.stopEvent=void 0===n.stopEvent||n.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",r.element.style.position="absolute",r.element.style.pointerEvents="auto";var i=n.autoPan;return i&&"object"!==Rf(i)&&(i={animation:n.autoPanAnimation,margin:n.autoPanMargin}),r.autoPan=i||!1,r.rendered={Mt:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(zf,r.handleElementChanged),r.addChangeListener(Ff,r.handleMapChanged),r.addChangeListener(Df,r.handleOffsetChanged),r.addChangeListener(Uf,r.handlePositionChanged),r.addChangeListener(qf,r.handlePositioningChanged),void 0!==n.element&&r.setElement(n.element),r.setOffset(void 0!==n.offset?n.offset:[0,0]),r.setPositioning(void 0!==n.positioning?n.positioning:Nf),void 0!==n.position&&r.setPosition(n.position),r}return Gf(n,t),n.prototype.getElement=function(){return this.get(zf)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(Ff)||null},n.prototype.getOffset=function(){return this.get(Df)},n.prototype.getPosition=function(){return this.get(Uf)},n.prototype.getPositioning=function(){return this.get(qf)},n.prototype.handleElementChanged=function(){Po(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Co(this.element),$(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=H(t,_s,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(zf,t)},n.prototype.setMap=function(t){this.set(Ff,t)},n.prototype.setOffset=function(t){this.set(Df,t)},n.prototype.setPosition=function(t){this.set(Uf,t)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(Uf)){var r=this.getRect(n.getTargetElement(),n.getSize()),i=this.getElement(),e=this.getRect(i,[To(i),ko(i)]),o=t||{},u=void 0===o.margin?20:o.margin;if(!Mn(r,e)){var s=e[0]-r[0],a=r[2]-e[2],f=e[1]-r[1],h=r[3]-e[3],c=[0,0];if(s<0?c[0]=s-u:a<0&&(c[0]=Math.abs(a)+u),f<0?c[1]=f-u:h<0&&(c[1]=Math.abs(h)+u),0!==c[0]||0!==c[1]){var l=n.getView().getCenterInternal(),v=n.getPixelFromCoordinateInternal(l);if(!v)return;var d=[v[0]+c[0],v[1]+c[1]],p=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(d),duration:p.duration,easing:p.easing})}}}},n.prototype.getRect=function(t,n){var r=t.getBoundingClientRect(),i=r.left+window.pageXOffset,e=r.top+window.pageYOffset;return[i,e,i+n[0],e+n[1]]},n.prototype.setPositioning=function(t){this.set(qf,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var r=t.getPixelFromCoordinate(n),i=t.getSize();this.updateRenderedPosition(r,i)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,n){var r=this.element.style,i=this.getOffset(),e=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+i[0])+"px",u=Math.round(t[1]+i[1])+"px",s="0%",a="0%";e==kf||e==Pf||e==Lf?s="-100%":e!=Tf&&e!=Cf&&e!=If||(s="-50%"),e==Ef||e==Tf||e==kf?a="-100%":e!=Af&&e!=Cf&&e!=Pf||(a="-50%");var f="translate(".concat(s,", ").concat(a,") translate(").concat(o,", ").concat(u,")");this.rendered.Mt!=f&&(this.rendered.Mt=f,r.transform=f,r.msTransform=f)},n.prototype.getOptions=function(){return this.options},n}(et),Xf=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.Te=0,this.ke={},this.Ae=null,this.Ce=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.Te=0,this.ke={},this.Ae=null,this.Ce=null},t.prototype.containsKey=function(t){return this.ke.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var n=this.Ae;n;)t(n.Pe,n.Ne,this),n=n.newer},t.prototype.get=function(t,n){var r=this.ke[t];return Ot(void 0!==r,15),r===this.Ce||(r===this.Ae?(this.Ae=this.Ae.newer,this.Ae.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.Ce,this.Ce.newer=r,this.Ce=r),r.Pe},t.prototype.remove=function(t){var n=this.ke[t];return Ot(void 0!==n,15),n===this.Ce?(this.Ce=n.older,this.Ce&&(this.Ce.newer=null)):n===this.Ae?(this.Ae=n.newer,this.Ae&&(this.Ae.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.ke[t],--this.Te,n.Pe},t.prototype.getCount=function(){return this.Te},t.prototype.getKeys=function(){var t,n=new Array(this.Te),r=0;for(t=this.Ce;t;t=t.older)n[r++]=t.Ne;return n},t.prototype.getValues=function(){var t,n=new Array(this.Te),r=0;for(t=this.Ce;t;t=t.older)n[r++]=t.Pe;return n},t.prototype.peekLast=function(){return this.Ae.Pe},t.prototype.peekLastKey=function(){return this.Ae.Ne},t.prototype.peekFirstKey=function(){return this.Ce.Ne},t.prototype.pop=function(){var t=this.Ae;return delete this.ke[t.Ne],t.newer&&(t.newer.older=null),this.Ae=t.newer,this.Ae||(this.Ce=null),--this.Te,t.Pe},t.prototype.replace=function(t,n){this.get(t),this.ke[t].Pe=n},t.prototype.set=function(t,n){Ot(!(t in this.ke),16);var r={Ne:t,newer:null,older:this.Ce,Pe:n};this.Ce?this.Ce.newer=r:this.Ae=r,this.Ce=r,this.ke[t]=r,++this.Te},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Vf(t,n,r,i){return void 0!==i?(i[0]=t,i[1]=n,i[2]=r,i):[t,n,r]}function Yf(t,n,r){return t+"/"+n+"/"+r}function Wf(t){return Yf(t[0],t[1],t[2])}function Zf(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return Yf(n[0],n[1],n[2])}function Hf(t){return t.split("/").map(Number)}function Kf(t){return(t[1]<<t[0])+t[2]}function $f(t,n){var r=t[0],i=t[1],e=t[2];if(n.getMinZoom()>r||r>n.getMaxZoom())return!1;var o=n.getFullTileRange(r);return!o||o.containsXY(i,e)}var Jf=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Qf=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Jf(n,t),n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Hf(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove(Wf(n.tileCoord)),n.release())}.bind(this))}},n}(Xf),th=function(){function t(t,n,r,i){this.minX=t,this.maxX=n,this.minY=r,this.maxY=i}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function nh(t,n,r,i,e){return void 0!==e?(e.minX=t,e.maxX=n,e.minY=r,e.maxY=i,e):new th(t,n,r,i)}var rh=th,ih=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),eh=[],oh=function(t){function n(n,r,i,e){var o=t.call(this,n,r,{transition:0})||this;return o.Le={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.Re={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=e.bind(void 0,o),o.wrappedTileCoord=i,o}return ih(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.Le||(this.Le[n]=Eo(1,1,eh)),this.Le[n]},n.prototype.hasContext=function(t){return o(t)in this.Le},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},n.prototype.getReplayState=function(t){var n=o(t);return n in this.Re||(this.Re[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.Re[n]},n.prototype.load=function(){this.getSourceTiles()},n.prototype.release=function(){for(var n in this.Le)eh.push(this.Le[n].canvas),delete this.Le[n];t.prototype.release.call(this)},n}(xt),uh=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),sh=function(t){function n(n,r,i,e,o,u){var s=t.call(this,n,r,u)||this;return s.extent=null,s.Ge=e,s.ze=null,s.q,s.projection=null,s.resolution,s.Xt=o,s.Fe=i,s.key=i,s}return uh(n,t),n.prototype.getFormat=function(){return this.Ge},n.prototype.getFeatures=function(){return this.ze},n.prototype.load=function(){this.state==ct&&(this.setState(lt),this.Xt(this,this.Fe),this.q&&this.q(this.extent,this.resolution,this.projection))},n.prototype.onLoad=function(t,n){this.setFeatures(t)},n.prototype.onError=function(){this.setState(dt)},n.prototype.setFeatures=function(t){this.ze=t,this.setState(vt)},n.prototype.setLoader=function(t){this.q=t},n}(xt);function ah(t){return Array.isArray(t)?Xo(t):t}var fh="arraybuffer",hh="json",ch="text",lh="xml",vh=!1;function dh(t,n,r,i,e,o,u){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(r,i,e):t,!0),n.getType()==fh&&(s.responseType="arraybuffer"),s.withCredentials=vh,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var i=n.getType(),a=void 0;i==hh||i==ch?a=s.responseText:i==lh?(a=s.responseXML)||(a=(new DOMParser).parseFromString(s.responseText,"application/xml")):i==fh&&(a=s.response),a?o(n.readFeatures(a,{extent:r,featureProjection:e}),n.readProjection(a)):u()}else u()},s.onerror=u,s.send()}function ph(t,n){return function(r,i,e,o,u){var s=this;dh(t,n,r,i,e,(function(t,n){s.addFeatures(t),void 0!==o&&o(t)}),u||M)}}function yh(t,n){return[[-1/0,-1/0,1/0,1/0]]}var wh=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function mh(t,n,r,i){var e=document.createElement("script"),u="olc_"+o(n);function s(){delete window[u],e.parentNode.removeChild(e)}e.async=!0,e.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+u;var a=setTimeout((function(){s(),r&&r()}),1e4);window[u]=function(t){clearTimeout(a),s(),n(t)},document.head.appendChild(e)}var bh,gh=function(t){function n(n){var r=this,i="Unexpected response status: "+n.status;return(r=t.call(this,i)||this).name="ResponseError",r.response=n,r}return wh(n,t),n}(Error),xh=function(t){function n(n){var r=t.call(this,"Failed to issue request")||this;return r.name="ClientError",r.client=n,r}return wh(n,t),n}(Error);function _h(t){return new Promise((function(n,r){var i=new XMLHttpRequest;i.addEventListener("load",(function(t){var i=t.target;if(!i.status||i.status>=200&&i.status<300){var e=void 0;try{e=JSON.parse(i.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void r(new Error(o))}n(e)}else r(new gh(i))})),i.addEventListener("error",(function(t){r(new xh(t.target))})),i.open("GET",t),i.setRequestHeader("Accept","application/json"),i.send()}))}function jh(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href}var Oh=function(){function t(){}return t.prototype.drawCustom=function(t,n,r,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t}(),Sh=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Mh=function(t){function n(n,r,i,e,o,u,s){var a=t.call(this)||this;return a.Le=n,a.Pt=r,a.ut=i,a.Mt=e,a.De=o,a.Ue=u,a.qe=s,a.Be=null,a.Xe=null,a.Ve=null,a.Ye=null,a.We=null,a.Lt=null,a.Ze=0,a.He=0,a.Ke=0,a.$e=0,a.Je=0,a.Qe=0,a.no=!1,a.ro=0,a.io=[0,0],a.eo=0,a.oo="",a.uo=0,a.so=0,a.ao=!1,a.fo=0,a.ho=[0,0],a.co=null,a.lo=null,a.vo=null,a.do=[],a.po=[1,0,0,1,0,0],a}return Sh(n,t),n.prototype.yo=function(t,n,r,i){if(this.Lt){var e=Xi(t,n,r,i,this.Mt,this.do),o=this.Le,u=this.po,s=o.globalAlpha;1!=this.$e&&(o.globalAlpha=s*this.$e);var a=this.ro;this.no&&(a+=this.De);for(var f=0,h=e.length;f<h;f+=2){var c=e[f]-this.Ze,l=e[f+1]-this.He;if(0!==a||1!=this.io[0]||1!=this.io[1]){var v=c+this.Ze,d=l+this.He;sn(u,v,d,1,1,a,-v,-d),o.setTransform.apply(o,u),o.translate(v,d),o.scale(this.io[0],this.io[1]),o.drawImage(this.Lt,this.Je,this.Qe,this.eo,this.Ke,-this.Ze,-this.He,this.eo,this.Ke),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.Lt,this.Je,this.Qe,this.eo,this.Ke,c,l,this.eo,this.Ke)}1!=this.$e&&(o.globalAlpha=s)}},n.prototype.wo=function(t,n,r,i){if(this.vo&&""!==this.oo){this.co&&this.mo(this.co),this.lo&&this.bo(this.lo),this.xo(this.vo);var e=Xi(t,n,r,i,this.Mt,this.do),o=this.Le,u=this.fo;for(this.ao&&(u+=this.De);n<r;n+=i){var s=e[n]+this.uo,a=e[n+1]+this.so;if(0!==u||1!=this.ho[0]||1!=this.ho[1]){var f=sn(this.po,s,a,1,1,u,-s,-a);o.setTransform.apply(o,f),o.translate(s,a),o.scale(this.ho[0],this.ho[1]),this.lo&&o.strokeText(this.oo,0,0),this.co&&o.fillText(this.oo,0,0),o.setTransform(1,0,0,1,0,0)}else this.lo&&o.strokeText(this.oo,s,a),this.co&&o.fillText(this.oo,s,a)}}},n.prototype._o=function(t,n,r,i,e){var o=this.Le,u=Xi(t,n,r,i,this.Mt,this.do);o.moveTo(u[0],u[1]);var s=u.length;e&&(s-=2);for(var a=2;a<s;a+=2)o.lineTo(u[a],u[a+1]);return e&&o.closePath(),r},n.prototype.jo=function(t,n,r,i){for(var e=0,o=r.length;e<o;++e)n=this._o(t,n,r[e],i,!0);return n},n.prototype.drawCircle=function(t){if(tr(this.ut,t.getExtent())){if(this.Ye||this.We){this.Ye&&this.mo(this.Ye),this.We&&this.bo(this.We);var n=Qi(t,this.Mt,this.do),r=n[2]-n[0],i=n[3]-n[1],e=Math.sqrt(r*r+i*i),o=this.Le;o.beginPath(),o.arc(n[0],n[1],e,0,2*Math.PI),this.Ye&&o.fill(),this.We&&o.stroke()}""!==this.oo&&this.wo(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.Mt=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case Pt.POINT:this.drawPoint(t);break;case Pt.LINE_STRING:this.drawLineString(t);break;case Pt.POLYGON:this.drawPolygon(t);break;case Pt.MULTI_POINT:this.drawMultiPoint(t);break;case Pt.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Pt.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Pt.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Pt.CIRCLE:this.drawCircle(t)}},n.prototype.drawFeature=function(t,n){var r=n.getGeometryFunction()(t);r&&tr(this.ut,r.getExtent())&&(this.setStyle(n),this.drawGeometry(r))},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])},n.prototype.drawPoint=function(t){this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe));var n=t.getFlatCoordinates(),r=t.getStride();this.Lt&&this.yo(n,0,n.length,r),""!==this.oo&&this.wo(n,0,n.length,r)},n.prototype.drawMultiPoint=function(t){this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe));var n=t.getFlatCoordinates(),r=t.getStride();this.Lt&&this.yo(n,0,n.length,r),""!==this.oo&&this.wo(n,0,n.length,r)},n.prototype.drawLineString=function(t){if(this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe)),tr(this.ut,t.getExtent())){if(this.We){this.bo(this.We);var n=this.Le,r=t.getFlatCoordinates();n.beginPath(),this._o(r,0,r.length,t.getStride(),!1),n.stroke()}if(""!==this.oo){var i=t.getFlatMidpoint();this.wo(i,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe));var n=t.getExtent();if(tr(this.ut,n)){if(this.We){this.bo(this.We);var r=this.Le,i=t.getFlatCoordinates(),e=0,o=t.getEnds(),u=t.getStride();r.beginPath();for(var s=0,a=o.length;s<a;++s)e=this._o(i,e,o[s],u,!1);r.stroke()}if(""!==this.oo){var f=t.getFlatMidpoints();this.wo(f,0,f.length,2)}}},n.prototype.drawPolygon=function(t){if(this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe)),tr(this.ut,t.getExtent())){if(this.We||this.Ye){this.Ye&&this.mo(this.Ye),this.We&&this.bo(this.We);var n=this.Le;n.beginPath(),this.jo(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.Ye&&n.fill(),this.We&&n.stroke()}if(""!==this.oo){var r=t.getFlatInteriorPoint();this.wo(r,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.Ue&&(t=t.simplifyTransformed(this.Ue,this.qe)),tr(this.ut,t.getExtent())){if(this.We||this.Ye){this.Ye&&this.mo(this.Ye),this.We&&this.bo(this.We);var n=this.Le,r=t.getOrientedFlatCoordinates(),i=0,e=t.getEndss(),o=t.getStride();n.beginPath();for(var u=0,s=e.length;u<s;++u){var a=e[u];i=this.jo(r,i,a,o)}this.Ye&&n.fill(),this.We&&n.stroke()}if(""!==this.oo){var f=t.getFlatInteriorPoints();this.wo(f,0,f.length,2)}}},n.prototype.mo=function(t){var n=this.Le,r=this.Be;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.Be={fillStyle:t.fillStyle})},n.prototype.bo=function(t){var n=this.Le,r=this.Xe;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(x(r.lineDash,t.lineDash)||n.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.Xe={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.xo=function(t){var n=this.Le,r=this.Ve,i=t.textAlign?t.textAlign:Bu;r?(r.font!=t.font&&(r.font=t.font,n.font=t.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=i,n.textBaseline=t.textBaseline,this.Ve={font:t.font,textAlign:i,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,n){var r=this;if(t){var i=t.getColor();this.Ye={fillStyle:ah(i||Gu)}}else this.Ye=null;if(n){var e=n.getColor(),o=n.getLineCap(),u=n.getLineDash(),s=n.getLineDashOffset(),a=n.getLineJoin(),f=n.getWidth(),h=n.getMiterLimit(),c=u||Fu;this.We={lineCap:void 0!==o?o:zu,lineDash:1===this.Pt?c:c.map((function(t){return t*r.Pt})),lineDashOffset:(s||0)*this.Pt,lineJoin:void 0!==a?a:Du,lineWidth:(void 0!==f?f:1)*this.Pt,miterLimit:void 0!==h?h:Uu,strokeStyle:ah(e||qu)}}else this.We=null},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var r=t.getAnchor(),i=t.getOrigin();this.Lt=t.getImage(this.Pt),this.Ze=r[0]*this.Pt,this.He=r[1]*this.Pt,this.Ke=n[1]*this.Pt,this.$e=t.getOpacity(),this.Je=i[0],this.Qe=i[1],this.no=t.getRotateWithView(),this.ro=t.getRotation(),this.io=t.getScaleArray(),this.eo=n[0]*this.Pt}else this.Lt=null},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var r=n.getColor();this.co={fillStyle:ah(r||Gu)}}else this.co=null;var i=t.getStroke();if(i){var e=i.getColor(),o=i.getLineCap(),u=i.getLineDash(),s=i.getLineDashOffset(),a=i.getLineJoin(),f=i.getWidth(),h=i.getMiterLimit();this.lo={lineCap:void 0!==o?o:zu,lineDash:u||Fu,lineDashOffset:s||0,lineJoin:void 0!==a?a:Du,lineWidth:void 0!==f?f:1,miterLimit:void 0!==h?h:Uu,strokeStyle:ah(e||qu)}}else this.lo=null;var c=t.getFont(),l=t.getOffsetX(),v=t.getOffsetY(),d=t.getRotateWithView(),p=t.getRotation(),y=t.getScaleArray(),w=t.getText(),m=t.getTextAlign(),b=t.getTextBaseline();this.vo={font:void 0!==c?c:Ru,textAlign:void 0!==m?m:Bu,textBaseline:void 0!==b?b:Xu},this.oo=void 0!==w?Array.isArray(w)?w.reduce((function(t,n,r){return t+(r%2?" ":n)}),""):w:"",this.uo=void 0!==l?this.Pt*l:0,this.so=void 0!==v?this.Pt*v:0,this.ao=void 0!==d&&d,this.fo=void 0!==p?p:0,this.ho=[this.Pt*y[0],this.Pt*y[1]]}else this.oo=""},n}(Oh),Eh="Circle",Th="Default",kh="Image",Ah="LineString",Ch="Polygon",Ph="Text",Nh={Point:function(t,n,r,i,e){var o,u=r.getImage(),s=r.getText();if(u){if(u.getImageState()!=bo)return;var a=t;if(e){var f=u.getDeclutterMode();if("none"!==f)if(a=e,"obstacle"===f){var h=t.getBuilder(r.getZIndex(),kh);h.setImageStyle(u,o),h.drawPoint(n,i)}else s&&s.getText()&&(o={})}var c=a.getBuilder(r.getZIndex(),kh);c.setImageStyle(u,o),c.drawPoint(n,i)}if(s&&s.getText()){var l=t;e&&(l=e);var v=l.getBuilder(r.getZIndex(),Ph);v.setTextStyle(s,o),v.drawText(n,i)}},LineString:function(t,n,r,i,e){var o=r.getStroke();if(o){var u=t.getBuilder(r.getZIndex(),Ah);u.setFillStrokeStyle(null,o),u.drawLineString(n,i)}var s=r.getText();if(s&&s.getText()){var a=(e||t).getBuilder(r.getZIndex(),Ph);a.setTextStyle(s),a.drawText(n,i)}},Polygon:function(t,n,r,i,e){var o=r.getFill(),u=r.getStroke();if(o||u){var s=t.getBuilder(r.getZIndex(),Ch);s.setFillStrokeStyle(o,u),s.drawPolygon(n,i)}var a=r.getText();if(a&&a.getText()){var f=(e||t).getBuilder(r.getZIndex(),Ph);f.setTextStyle(a),f.drawText(n,i)}},MultiPoint:function(t,n,r,i,e){var o,u=r.getImage(),s=r.getText();if(u){if(u.getImageState()!=bo)return;var a=t;if(e){var f=u.getDeclutterMode();if("none"!==f)if(a=e,"obstacle"===f){var h=t.getBuilder(r.getZIndex(),kh);h.setImageStyle(u,o),h.drawMultiPoint(n,i)}else s&&s.getText()&&(o={})}var c=a.getBuilder(r.getZIndex(),kh);c.setImageStyle(u,o),c.drawMultiPoint(n,i)}if(s&&s.getText()){var l=t;e&&(l=e);var v=l.getBuilder(r.getZIndex(),Ph);v.setTextStyle(s,o),v.drawText(n,i)}},MultiLineString:function(t,n,r,i,e){var o=r.getStroke();if(o){var u=t.getBuilder(r.getZIndex(),Ah);u.setFillStrokeStyle(null,o),u.drawMultiLineString(n,i)}var s=r.getText();if(s&&s.getText()){var a=(e||t).getBuilder(r.getZIndex(),Ph);a.setTextStyle(s),a.drawText(n,i)}},MultiPolygon:function(t,n,r,i,e){var o=r.getFill(),u=r.getStroke();if(u||o){var s=t.getBuilder(r.getZIndex(),Ch);s.setFillStrokeStyle(o,u),s.drawMultiPolygon(n,i)}var a=r.getText();if(a&&a.getText()){var f=(e||t).getBuilder(r.getZIndex(),Ph);f.setTextStyle(a),f.drawText(n,i)}},GeometryCollection:function(t,n,r,i,e){var o,u,s=n.getGeometriesArray();for(o=0,u=s.length;o<u;++o){(0,Nh[s[o].getType()])(t,s[o],r,i,e)}},Circle:function(t,n,r,i,e){var o=r.getFill(),u=r.getStroke();if(o||u){var s=t.getBuilder(r.getZIndex(),Eh);s.setFillStrokeStyle(o,u),s.drawCircle(n,i)}var a=r.getText();if(a&&a.getText()){var f=(e||t).getBuilder(r.getZIndex(),Ph);f.setTextStyle(a),f.drawText(n,i)}}};function Ih(t,n){return parseInt(o(t),10)-parseInt(o(n),10)}function Lh(t,n){var r=Rh(t,n);return r*r}function Rh(t,n){return.5*t/n}function Gh(t,n,r,i,e,o,u){var s=!1,a=r.getImage();if(a){var f=a.getImageState();f==bo||f==go?a.unlistenImageChange(e):(f==wo&&a.load(),a.listenImageChange(e),s=!0)}return function(t,n,r,i,e,o){var u=r.getGeometryFunction()(n);if(!u)return;var s=u.simplifyTransformed(i,e);if(r.getRenderer())zh(t,s,r,n);else{(0,Nh[s.getType()])(t,s,r,n,o)}}(t,n,r,i,o,u),s}function zh(t,n,r,i){if(n.getType()!=Pt.GEOMETRY_COLLECTION)t.getBuilder(r.getZIndex(),Th).drawCustom(n,i,r.getRenderer(),r.getHitDetectionRenderer());else for(var e=n.getGeometries(),o=0,u=e.length;o<u;++o)zh(t,e[o],r,i)}function Fh(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var n,r=t.inversePixelTransform[0],i=t.frameState,e=Jt(t.inversePixelTransform.slice(),i.coordinateToPixelTransform),o=Lh(i.viewState.resolution,r),u=Li();return u&&(n=ki(u,i.viewState.projection)),new Mh(t.context,r,i.extent,e,i.viewState.rotation,o,n)}var Dh,Uh={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},qh={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};function Bh(t,n,r,i,e){t.beginPath(),t.moveTo(0,0),t.lineTo(n,r),t.lineTo(i,e),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,i)+1,Math.max(r,e)),t.restore()}function Xh(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2}function Vh(t,n,r,i){var e=Ci(r,n,t),o=xi(n,i,r),u=n.getMetersPerUnit();void 0!==u&&(o*=u);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var a=t.getExtent();if(!a||Sn(a,e)){var f=xi(t,o,e)/o;isFinite(f)&&f>0&&(o/=f)}return o}function Yh(t,n,r,i){var e=Yn(r),o=Vh(t,n,e,i);return(!isFinite(o)||o<=0)&&qn(r,(function(r){return o=Vh(t,n,r,i),isFinite(o)&&o>0})),o}function Wh(t,n,r,i,e,o,u,s,a,f,h,c){var l=Eo(Math.round(r*t),Math.round(r*n));if(c||k(l,Uh),0===a.length)return l.canvas;function v(t){return Math.round(t*r)/r}l.scale(r,r),l.globalCompositeOperation="lighter";var d=[1/0,1/0,-1/0,-1/0];a.forEach((function(t,n,r){Rn(d,t.extent)}));var p=Qn(d),y=Hn(d),w=Eo(Math.round(r*p/i),Math.round(r*y/i));c||k(w,Uh);var m=r/i;a.forEach((function(t,n,r){var i=t.extent[0]-d[0],e=-(t.extent[3]-d[3]),o=Qn(t.extent),u=Hn(t.extent);t.image.width>0&&t.image.height>0&&w.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,i*m,e*m,o*m,u*m)}));var b=$n(u);return s.getTriangles().forEach((function(t,n,e){var u=t.source,s=t.target,a=u[0][0],f=u[0][1],h=u[1][0],p=u[1][1],y=u[2][0],m=u[2][1],g=v((s[0][0]-b[0])/o),x=v(-(s[0][1]-b[1])/o),_=v((s[1][0]-b[0])/o),j=v(-(s[1][1]-b[1])/o),O=v((s[2][0]-b[0])/o),S=v(-(s[2][1]-b[1])/o),M=a,E=f;a=0,f=0;var T=dr([[h-=M,p-=E,0,0,_-g],[y-=M,m-=E,0,0,O-g],[0,0,h,p,j-x],[0,0,y,m,S-x]]);if(T){if(l.save(),l.beginPath(),function(){if(void 0===Dh){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Bh(t,4,5,4,0),Bh(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;Dh=Xh(n,0)||Xh(n,4)||Xh(n,8)}return Dh}()||!c){l.moveTo(_,j);for(var k=g-_,A=x-j,C=0;C<4;C++)l.lineTo(_+v((C+1)*k/4),j+v(C*A/3)),3!=C&&l.lineTo(_+v((C+1)*k/4),j+v((C+1)*A/3));l.lineTo(O,S)}else l.moveTo(_,j),l.lineTo(g,x),l.lineTo(O,S);l.clip(),l.transform(T[0],T[2],T[1],T[3],g,x),l.translate(d[0]-M,d[3]-E),l.scale(i/r,-i/r),l.drawImage(w.canvas,0,0),l.restore()}})),h&&(l.save(),l.globalCompositeOperation="source-over",l.strokeStyle="black",l.lineWidth=1,s.getTriangles().forEach((function(t,n,r){var i=t.target,e=(i[0][0]-b[0])/o,u=-(i[0][1]-b[1])/o,s=(i[1][0]-b[0])/o,a=-(i[1][1]-b[1])/o,f=(i[2][0]-b[0])/o,h=-(i[2][1]-b[1])/o;l.beginPath(),l.moveTo(s,a),l.lineTo(e,u),l.lineTo(f,h),l.closePath(),l.stroke()})),l.restore()),l.canvas}var Zh=[0,0,0],Hh=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.Cr=t.resolutions,Ot(j(this.Cr,(function(t,n){return n-t}),!0),17),!t.origins)for(var r=0,i=this.Cr.length-1;r<i;++r)if(n){if(this.Cr[r]/this.Cr[r+1]!==n){n=void 0;break}}else n=this.Cr[r]/this.Cr[r+1];this.Ar=n,this.maxZoom=this.Cr.length-1,this.Oo=void 0!==t.origin?t.origin:null,this.So=null,void 0!==t.origins&&(this.So=t.origins,Ot(this.So.length==this.Cr.length,20));var e=t.extent;void 0===e||this.Oo||this.So||(this.Oo=$n(e)),Ot(!this.Oo&&this.So||this.Oo&&!this.So,18),this.Mo=null,void 0!==t.tileSizes&&(this.Mo=t.tileSizes,Ot(this.Mo.length==this.Cr.length,19)),this.Eo=void 0!==t.tileSize?t.tileSize:this.Mo?null:Fs,Ot(!this.Eo&&this.Mo||this.Eo&&!this.Mo,22),this.ut=void 0!==e?e:null,this.To=null,this.ko=[0,0],this.Ao=[0,0,0,0],void 0!==t.sizes?this.To=t.sizes.map((function(t,n){var r=new rh(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(e){var i=this.getTileRangeForExtentAndZ(e,n);r.minX=Math.max(i.minX,r.minX),r.maxX=Math.min(i.maxX,r.maxX),r.minY=Math.max(i.minY,r.minY),r.maxY=Math.min(i.maxY,r.maxY)}return r}),this):e&&this.Co(e)}return t.prototype.forEachTileCoord=function(t,n,r){for(var i=this.getTileRangeForExtentAndZ(t,n),e=i.minX,o=i.maxX;e<=o;++e)for(var u=i.minY,s=i.maxY;u<=s;++u)r([n,e,u])},t.prototype.forEachTileCoordParentTileRange=function(t,n,r,i){var e,o,u=null,s=t[0]-1;for(2===this.Ar?(e=t[1],o=t[2]):u=this.getTileCoordExtent(t,i);s>=this.minZoom;){if(n(s,2===this.Ar?nh(e=Math.floor(e/2),e,o=Math.floor(o/2),o,r):this.getTileRangeForExtentAndZ(u,s,r)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.ut},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.Oo?this.Oo:this.So[t]},t.prototype.getResolution=function(t){return this.Cr[t]},t.prototype.getResolutions=function(){return this.Cr},t.prototype.getTileCoordChildTileRange=function(t,n,r){if(t[0]<this.maxZoom){if(2===this.Ar){var i=2*t[1],e=2*t[2];return nh(i,i+1,e,e+1,n)}var o=this.getTileCoordExtent(t,r||this.Ao);return this.getTileRangeForExtentAndZ(o,t[0]+1,n)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,r){if(n>this.maxZoom||n<this.minZoom)return null;var i=t[0],e=t[1],o=t[2];if(n===i)return nh(e,o,e,o,r);if(this.Ar){var u=Math.pow(this.Ar,n-i),s=Math.floor(e*u),a=Math.floor(o*u);return n<i?nh(s,s,a,a,r):nh(s,Math.floor(u*(e+1))-1,a,Math.floor(u*(o+1))-1,r)}var f=this.getTileCoordExtent(t,this.Ao);return this.getTileRangeForExtentAndZ(f,n,r)},t.prototype.getTileRangeExtent=function(t,n,r){var i=this.getOrigin(t),e=this.getResolution(t),o=aa(this.getTileSize(t),this.ko),u=i[0]+n.minX*o[0]*e,s=i[0]+(n.maxX+1)*o[0]*e;return An(u,i[1]+n.minY*o[1]*e,s,i[1]+(n.maxY+1)*o[1]*e,r)},t.prototype.getTileRangeForExtentAndZ=function(t,n,r){var i=Zh;this.Po(t[0],t[3],n,!1,i);var e=i[1],o=i[2];return this.Po(t[2],t[1],n,!0,i),nh(e,i[1],o,i[2],r)},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=aa(this.getTileSize(t[0]),this.ko);return[n[0]+(t[1]+.5)*i[0]*r,n[1]-(t[2]+.5)*i[1]*r]},t.prototype.getTileCoordExtent=function(t,n){var r=this.getOrigin(t[0]),i=this.getResolution(t[0]),e=aa(this.getTileSize(t[0]),this.ko),o=r[0]+t[1]*e[0]*i,u=r[1]-(t[2]+1)*e[1]*i;return An(o,u,o+e[0]*i,u+e[1]*i,n)},t.prototype.getTileCoordForCoordAndResolution=function(t,n,r){return this.No(t[0],t[1],n,!1,r)},t.prototype.No=function(t,n,r,i,e){var o=this.getZForResolution(r),u=r/this.getResolution(o),s=this.getOrigin(o),a=aa(this.getTileSize(o),this.ko),f=u*(t-s[0])/r/a[0],h=u*(s[1]-n)/r/a[1];return i?(f=_r(f,5)-1,h=_r(h,5)-1):(f=xr(f,5),h=xr(h,5)),Vf(o,f,h,e)},t.prototype.Po=function(t,n,r,i,e){var o=this.getOrigin(r),u=this.getResolution(r),s=aa(this.getTileSize(r),this.ko),a=(t-o[0])/u/s[0],f=(o[1]-n)/u/s[1];return i?(a=_r(a,5)-1,f=_r(f,5)-1):(a=xr(a,5),f=xr(f,5)),Vf(r,a,f,e)},t.prototype.getTileCoordForCoordAndZ=function(t,n,r){return this.Po(t[0],t[1],n,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.Cr[t[0]]},t.prototype.getTileSize=function(t){return this.Eo?this.Eo:this.Mo[t]},t.prototype.getFullTileRange=function(t){return this.To?this.To[t]:this.ut?this.getTileRangeForExtentAndZ(this.ut,t):null},t.prototype.getZForResolution=function(t,n){return fr(w(this.Cr,t,n||0),this.minZoom,this.maxZoom)},t.prototype.Co=function(t){for(var n=this.Cr.length,r=new Array(n),i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(t,i);this.To=r},t}();function Kh(t){var n=t.getDefaultTileGrid();return n||(n=nc(t),t.setDefaultTileGrid(n)),n}function $h(t,n,r){var i=n[0],e=t.getTileCoordCenter(n),o=rc(r);if(Sn(o,e))return n;var u=Qn(o),s=Math.ceil((o[0]-e[0])/u);return e[0]+=u*s,t.getTileCoordForCoordAndZ(e,i)}function Jh(t,n,r,i){var e=void 0!==i?i:vn,o=tc(t,n,r);return new Hh({extent:t,origin:Wn(t,e),resolutions:o,tileSize:r})}function Qh(t){var n=t||{},r=n.extent||gi("EPSG:3857").getExtent(),i={extent:r,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:tc(r,n.maxZoom,n.tileSize,n.maxResolution)};return new Hh(i)}function tc(t,n,r,i){for(var e=void 0!==n?n:42,o=Hn(t),u=Qn(t),s=aa(void 0!==r?r:Fs),a=i>0?i:Math.max(u/s[0],o/s[1]),f=e+1,h=new Array(f),c=0;c<f;++c)h[c]=a/Math.pow(2,c);return h}function nc(t,n,r,i){return Jh(rc(t),n,r,i)}function rc(t){var n=(t=gi(t)).getExtent();if(!n){var r=180*Rt[zt.DEGREES]/t.getMetersPerUnit();n=An(-r,-r,r,r)}return n}function ic(t,n){var r=/\{z\}/g,i=/\{x\}/g,e=/\{y\}/g,o=/\{-y\}/g;return function(u,s,a){return u?t.replace(r,u[0].toString()).replace(i,u[1].toString()).replace(e,u[2].toString()).replace(o,(function(){var t=u[0],r=n.getFullTileRange(t);return Ot(r,55),(r.getHeight()-u[2]-1).toString()})):void 0}}function ec(t,n){for(var r=t.length,i=new Array(r),e=0;e<r;++e)i[e]=ic(t[e],n);return oc(i)}function oc(t){return 1===t.length?t[0]:function(n,r,i){if(n){var e=wr(Kf(n),t.length);return t[e](n,r,i)}}}function uc(t,n,r){}function sc(t){var n=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var i=r[1].charCodeAt(0),e=r[2].charCodeAt(0),o=void 0;for(o=i;o<=e;++o)n.push(t.replace(r[0],String.fromCharCode(o)));return n}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var u=parseInt(r[2],10),s=parseInt(r[1],10);s<=u;s++)n.push(t.replace(r[0],s.toString()));return n}return n.push(t),n}function ac(t,n){var r=[];Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&r.push(t+"="+encodeURIComponent(n[t]))}));var i=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+i}var fc,hc=34962,cc=34963,lc=35044,vc=35048,dc=5126,pc=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function yc(t,n){for(var r=k({preserveDrawingBuffer:!0,antialias:!qt},n),i=pc.length,e=0;e<i;++e)try{var o=t.getContext(pc[e],r);if(o)return o}catch(t){}return null}var wc="http://www.w3.org/2001/XMLSchema-instance";function mc(t,n){return qc().createElementNS(t,n)}function bc(t,n){return gc(t,n,[]).join("")}function gc(t,n,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else{var i=void 0;for(i=t.firstChild;i;i=i.nextSibling)gc(i,n,r)}return r}function xc(t){return"documentElement"in t}function _c(t,n,r){return t.getAttributeNS(n,r)||""}function jc(t){return(new DOMParser).parseFromString(t,"application/xml")}function Oc(t,n){return function(r,i){var e=t.call(void 0!==n?n:this,r,i);void 0!==e&&b(i[i.length-1],e)}}function Sc(t,n){return function(r,i){var e=t.call(void 0!==n?n:this,r,i);void 0!==e&&i[i.length-1].push(e)}}function Mc(t,n){return function(r,i){var e=t.call(void 0!==n?n:this,r,i);void 0!==e&&(i[i.length-1]=e)}}function Ec(t,n,r){return function(i,e){var o=t.call(void 0!==r?r:this,i,e);if(void 0!==o){var u=e[e.length-1],s=void 0!==n?n:i.localName,a=void 0;s in u?a=u[s]:(a=[],u[s]=a),a.push(o)}}}function Tc(t,n,r){return function(i,e){var o=t.call(void 0!==r?r:this,i,e);void 0!==o&&(e[e.length-1][void 0!==n?n:i.localName]=o)}}function kc(t,n){return function(r,i,e){t.call(void 0!==n?n:this,r,i,e),e[e.length-1].node.appendChild(r)}}function Ac(t,n){var r,i;return function(n,e,o){if(void 0===r){r={};var u={};u[n.localName]=t,r[n.namespaceURI]=u,i=Cc(n.localName)}Gc(r,i,e,o)}}function Cc(t,n){var r=t;return function(t,i,e){var o=i[i.length-1].node,u=r;return void 0===u&&(u=e),mc(void 0!==n?n:o.namespaceURI,u)}}var Pc=Cc();function Nc(t,n){for(var r=n.length,i=new Array(r),e=0;e<r;++e)i[e]=t[n[e]];return i}function Ic(t,n,r){var i,e,o=void 0!==r?r:{};for(i=0,e=t.length;i<e;++i)o[t[i]]=n;return o}function Lc(t,n,r,i){var e;for(e=n.firstElementChild;e;e=e.nextElementSibling){var o=t[e.namespaceURI];if(void 0!==o){var u=o[e.localName];void 0!==u&&u.call(i,e,r)}}}function Rc(t,n,r,i,e){return i.push(t),Lc(n,r,i,e),i.pop()}function Gc(t,n,r,i,e,o){for(var u,s,a=(void 0!==e?e:r).length,f=0;f<a;++f)void 0!==(u=r[f])&&void 0!==(s=n.call(void 0!==o?o:this,u,i,void 0!==e?e[f]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,u,i)}function zc(t,n,r,i,e,o,u){return e.push(t),Gc(n,r,i,e,o,u),e.pop()}var Fc=void 0;function Dc(){return void 0===Fc&&"undefined"!=typeof XMLSerializer&&(Fc=new XMLSerializer),Fc}var Uc=void 0;function qc(){return void 0===Uc&&"undefined"!=typeof document&&(Uc=document.implementation.createDocument("","",null)),Uc}var Bc=lc;function Xc(t){switch(t){case hc:return Float32Array;case cc:return Uint32Array;default:return Float32Array}}var Vc=function(){function t(t,n){this.array=null,this.type=t,Ot(t===hc||t===cc,62),this.usage=void 0!==n?n:Bc}return t.prototype.ofSize=function(t){this.array=new(Xc(this.type))(t)},t.prototype.fromArray=function(t){var n=Xc(this.type);this.array=n.from?n.from(t):new n(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(Xc(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),Yc="webglcontextlost",Wc="webglcontextrestored",Zc=function(){function t(t){this.Io=t.webGlContext;var n=this.Io;this.Lo=t.scaleRatio||1,this.Ro=n.createTexture(),this.Go=null,this.zo=n.createFramebuffer();var r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(r);var i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),n.compileShader(i),this.Fo=n.createProgram(),n.attachShader(this.Fo,r),n.attachShader(this.Fo,i),n.linkProgram(this.Fo),this.Do=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.Do),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.Uo=n.getAttribLocation(this.Fo,"a_position"),this.qo=n.getUniformLocation(this.Fo,"u_screenSize"),this.Bo=n.getUniformLocation(this.Fo,"u_opacity"),this.Xo=n.getUniformLocation(this.Fo,"u_image"),this.Vo=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.Vo.push({value:t.uniforms[r],location:n.getUniformLocation(this.Fo,r)})}.bind(this))}return t.prototype.getGL=function(){return this.Io},t.prototype.init=function(t){var n=this.getGL(),r=[n.drawingBufferWidth*this.Lo,n.drawingBufferHeight*this.Lo];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,r[0],r[1]),!this.Go||this.Go[0]!==r[0]||this.Go[1]!==r[1]){this.Go=r;var i=n.RGBA,e=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.Ro),n.texImage2D(n.TEXTURE_2D,0,i,r[0],r[1],0,e,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.Ro,0)}},t.prototype.apply=function(t,n,r,i){var e=this.getGL(),u=t.size;if(e.bindFramebuffer(e.FRAMEBUFFER,n?n.getFrameBuffer():null),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.Ro),!n){var s=o(e.canvas);if(!t.renderTargets[s]){var a=e.getContextAttributes();a&&a.preserveDrawingBuffer&&(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.renderTargets[s]=!0}}e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.bindBuffer(e.ARRAY_BUFFER,this.Do),e.useProgram(this.Fo),e.enableVertexAttribArray(this.Uo),e.vertexAttribPointer(this.Uo,2,e.FLOAT,!1,0,0),e.uniform2f(this.qo,u[0],u[1]),e.uniform1i(this.Xo,0);var f=t.layerStatesArray[t.layerIndex].opacity;e.uniform1f(this.Bo,f),this.applyUniforms(t),r&&r(e,t),e.drawArrays(e.TRIANGLES,0,6),i&&i(e,t)},t.prototype.getFrameBuffer=function(){return this.zo},t.prototype.applyUniforms=function(t){var n,r=this.getGL(),i=1;this.Vo.forEach((function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof ImageData)e.texture||(e.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(i)]),r.bindTexture(r.TEXTURE_2D,e.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,n.width,n.height,0,r.UNSIGNED_BYTE,new Uint8Array(n.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.uniform1i(e.location,i++);else if(Array.isArray(n))switch(n.length){case 2:return void r.uniform2f(e.location,n[0],n[1]);case 3:return void r.uniform3f(e.location,n[0],n[1],n[2]);case 4:return void r.uniform4f(e.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&r.uniform1f(e.location,n)}))},t}();function Hc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Kc(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t}var $c=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Jc="u_projectionMatrix",Qc="u_offsetScaleMatrix",tl="u_offsetRotateMatrix",nl="u_time",rl="u_zoom",il="u_resolution",el={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:dc},ol={};function ul(t){return"shared/"+t}var sl=0;function al(t){for(var n=0,r=0;r<t.length;r++){var i=t[r];n+=i.size*fl(i.type)}return n}function fl(t){switch(t){case el.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case el.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case el.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case el.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var hl=function(t){function n(n){var r,i=t.call(this)||this,e=n||{};i.Yo=i.handleWebGLContextLost.bind(i),i.Wo=i.handleWebGLContextRestored.bind(i),i.Zo=e.canvasCacheKey?ul(e.canvasCacheKey):(r="unique/"+sl,sl+=1,r),i.Ut=function(t){var n=ol[t];if(!n){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",n={users:0,canvas:r},ol[t]=n}return n.users+=1,n.canvas}(i.Zo),i.Io=yc(i.Ut),i.Ho={},i.Ko={},i.$o=null,i.Ut.addEventListener(Yc,i.Yo),i.Ut.addEventListener(Wc,i.Wo),i.Jo=[1,0,0,1,0,0],i.Qo=[1,0,0,1,0,0],i.tu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.nu={},i.ru={},i.Vo=[],e.uniforms&&i.setUniforms(e.uniforms);var o=i.getGL();return i.iu=e.postProcesses?e.postProcesses.map((function(t){return new Zc({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new Zc({webGlContext:o})],i.eu=null,i.de=Date.now(),i}return $c(n,t),n.prototype.setUniforms=function(t){for(var n in this.Vo=[],t)this.Vo.push({name:n,value:t[n]});this.nu={}},n.prototype.canvasCacheKeyMatches=function(t){return this.Zo===ul(t)},n.prototype.getExtension=function(t){if(t in this.Ko)return this.Ko[t];var n=this.Io.getExtension(t);return this.Ko[t]=n,n},n.prototype.bindBuffer=function(t){var n=this.getGL(),r=o(t),i=this.Ho[r];i||(i={buffer:t,webGlBuffer:n.createBuffer()},this.Ho[r]=i);n.bindBuffer(t.getType(),i.webGlBuffer)},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},n.prototype.deleteBuffer=function(t){var n=this.getGL(),r=o(t),i=this.Ho[r];i&&!n.isContextLost()&&n.deleteBuffer(i.webGlBuffer),delete this.Ho[r]},n.prototype.disposeInternal=function(){this.Ut.removeEventListener(Yc,this.Yo),this.Ut.removeEventListener(Wc,this.Wo),function(t){var n=ol[t];if(n&&(n.users-=1,!(n.users>0))){var r=yc(n.canvas).getExtension("WEBGL_lose_context");r&&r.loseContext(),delete ol[t]}}(this.Zo),delete this.Io,delete this.Ut},n.prototype.prepareDraw=function(t,n){var r=this.getGL(),i=this.getCanvas(),e=t.size,o=t.pixelRatio;i.width=e[0]*o,i.height=e[1]*o,i.style.width=e[0]+"px",i.style.height=e[1]+"px",r.useProgram(this.$o);for(var u=this.iu.length-1;u>=0;u--)this.iu[u].init(t);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,n?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.$o),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.prepareDrawToRenderTarget=function(t,n,r){var i=this.getGL(),e=n.getSize();i.bindFramebuffer(i.FRAMEBUFFER,n.getFramebuffer()),i.viewport(0,0,e[0],e[1]),i.bindTexture(i.TEXTURE_2D,n.getTexture()),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,r?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.$o),this.applyFrameState(t),this.applyUniforms(t)},n.prototype.drawElements=function(t,n){var r=this.getGL();this.getExtension("OES_element_index_uint");var i=r.UNSIGNED_INT,e=n-t,o=4*t;r.drawElements(r.TRIANGLES,e,i,o)},n.prototype.finalizeDraw=function(t,n,r){for(var i=0,e=this.iu.length;i<e;i++)i===e-1?this.iu[i].apply(t,null,n,r):this.iu[i].apply(t,this.iu[i+1])},n.prototype.getCanvas=function(){return this.Ut},n.prototype.getGL=function(){return this.Io},n.prototype.applyFrameState=function(t){var n=t.size,r=t.viewState.rotation,i=$t(this.Qo);en(i,2/n[0],2/n[1]);var e=$t(this.Jo);0!==r&&rn(e,-r),this.setUniformMatrixValue(Qc,Kc(this.tu,i)),this.setUniformMatrixValue(tl,Kc(this.tu,e)),this.setUniformFloatValue(nl,.001*(Date.now()-this.de)),this.setUniformFloatValue(rl,t.viewState.zoom),this.setUniformFloatValue(il,t.viewState.resolution)},n.prototype.applyUniforms=function(t){var n,r=this.getGL(),i=0;this.Vo.forEach(function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)e.texture||(e.prevValue=void 0,e.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(i)]),r.bindTexture(r.TEXTURE_2D,e.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&e.prevValue!==n&&(e.prevValue=n,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n)),r.uniform1i(this.getUniformLocation(e.name),i++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(e.name,Kc(this.tu,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void r.uniform2f(this.getUniformLocation(e.name),n[0],n[1]);case 3:return void r.uniform3f(this.getUniformLocation(e.name),n[0],n[1],n[2]);case 4:return void r.uniform4f(this.getUniformLocation(e.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&r.uniform1f(this.getUniformLocation(e.name),n)}.bind(this))},n.prototype.useProgram=function(t){return t!=this.$o&&(this.getGL().useProgram(t),this.$o=t,this.nu={},this.ru={},!0)},n.prototype.compileShader=function(t,n){var r=this.getGL(),i=r.createShader(n);return r.shaderSource(i,t),r.compileShader(i),i},n.prototype.getProgram=function(t,n){var r=this.getGL(),i=this.compileShader(t,r.FRAGMENT_SHADER),e=this.compileShader(n,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,i),r.attachShader(o,e),r.linkProgram(o),!r.getShaderParameter(i,r.COMPILE_STATUS)){var u="Fragment shader compliation failed: ".concat(r.getShaderInfoLog(i));throw new Error(u)}if(r.deleteShader(i),!r.getShaderParameter(e,r.COMPILE_STATUS)){u="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(e));throw new Error(u)}if(r.deleteShader(e),!r.getProgramParameter(o,r.LINK_STATUS)){u="GL program linking failed: ".concat(r.getShaderInfoLog(e));throw new Error(u)}return o},n.prototype.getUniformLocation=function(t){return void 0===this.nu[t]&&(this.nu[t]=this.getGL().getUniformLocation(this.$o,t)),this.nu[t]},n.prototype.getAttributeLocation=function(t){return void 0===this.ru[t]&&(this.ru[t]=this.getGL().getAttribLocation(this.$o,t)),this.ru[t]},n.prototype.makeProjectionTransform=function(t,n){var r=t.size,i=t.viewState.rotation,e=t.viewState.resolution,o=t.viewState.center;return $t(n),sn(n,0,0,2/(e*r[0]),2/(e*r[1]),-i,-o[0],-o[1]),n},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},n.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n)},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},n.prototype.ou=function(t,n,r,i,e){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,r,!1,i,e))},n.prototype.enableAttributes=function(t){for(var n=al(t),r=0,i=0;i<t.length;i++){var e=t[i];this.ou(e.name,e.size,e.type||dc,n,r),r+=e.size*fl(e.type)}},n.prototype.handleWebGLContextLost=function(){A(this.Ho),this.$o=null},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,r){var i=this.getGL(),e=r||i.createTexture(),o=i.RGBA,u=i.RGBA,s=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,e),n?i.texImage2D(i.TEXTURE_2D,0,o,u,s,n):i.texImage2D(i.TEXTURE_2D,0,o,t[0],t[1],0,u,s,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),e},n}(v),cl=function(){function t(t,n){this.name=t,this.data=n,this.uu=null}return t.prototype.getTexture=function(t){if(!this.uu){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.uu=n}return this.uu},t}(),ll=new Uint8Array(4),vl=function(){function t(t,n){this.su=t;var r=t.getGL();this.uu=r.createTexture(),this.au=r.createFramebuffer(),this.W=n||[1,1],this.B=new Uint8Array(0),this.fu=!0,this.hu()}return t.prototype.setSize=function(t){x(t,this.W)||(this.W[0]=t[0],this.W[1]=t[1],this.hu())},t.prototype.getSize=function(){return this.W},t.prototype.clearCachedData=function(){this.fu=!0},t.prototype.readAll=function(){if(this.fu){var t=this.W,n=this.su.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.au),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.B),this.fu=!1}return this.B},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this.W[0]||n>=this.W[1])return ll[0]=0,ll[1]=0,ll[2]=0,ll[3]=0,ll;this.readAll();var r=Math.floor(t)+(this.W[1]-Math.floor(n)-1)*this.W[0];return ll[0]=this.B[4*r],ll[1]=this.B[4*r+1],ll[2]=this.B[4*r+2],ll[3]=this.B[4*r+3],ll},t.prototype.getTexture=function(){return this.uu},t.prototype.getFramebuffer=function(){return this.au},t.prototype.hu=function(){var t=this.W,n=this.su.getGL();this.uu=this.su.createTexture(t,null,this.uu),n.bindFramebuffer(n.FRAMEBUFFER,this.au),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.uu,0),this.B=new Uint8Array(t[0]*t[1]*4)},t}(),dl=!0,pl=function(){function t(t,n,r,i,e,o){this.cu=t,this.lu=n;var u={},s=Ai(this.lu,this.cu);this.vu=function(t){var n=t[0]+"/"+t[1];return u[n]||(u[n]=s(t)),u[n]},this.du=i,this.pu=e*e,this.yu=[],this.wu=!1,this.mu=this.cu.canWrapX()&&!!i&&!!this.cu.getExtent()&&Qn(i)==Qn(this.cu.getExtent()),this.bu=this.cu.getExtent()?Qn(this.cu.getExtent()):null,this.gu=this.lu.getExtent()?Qn(this.lu.getExtent()):null;var a=$n(r),f=Jn(r),h=Vn(r),c=Xn(r),l=this.vu(a),v=this.vu(f),d=this.vu(h),p=this.vu(c),y=10+(o?Math.max(0,Math.ceil(cr(Bn(r)/(o*o*256*256)))):0);if(this.xu(a,f,h,c,l,v,d,p,y),this.wu){var w=1/0;this.yu.forEach((function(t,n,r){w=Math.min(w,t.source[0][0],t.source[1][0],t.source[2][0])})),this.yu.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-w>this.bu/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-w>this.bu/2&&(n[0][0]-=this.bu),n[1][0]-w>this.bu/2&&(n[1][0]-=this.bu),n[2][0]-w>this.bu/2&&(n[2][0]-=this.bu);var r=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-r<this.bu/2&&(t.source=n)}}.bind(this))}u={}}return t.prototype._u=function(t,n,r,i,e,o){this.yu.push({source:[i,e,o],target:[t,n,r]})},t.prototype.xu=function(t,n,r,i,e,o,u,s,a){var f=xn([e,o,u,s]),h=this.bu?Qn(f)/this.bu:null,c=this.bu,l=this.cu.canWrapX()&&h>.5&&h<1,v=!1;if(a>0){if(this.lu.isGlobal()&&this.gu)v=Qn(xn([t,n,r,i]))/this.gu>.25||v;!l&&this.cu.isGlobal()&&h&&(v=h>.25||v)}if(!(!v&&this.du&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3]))||tr(f,this.du)){var d=0;if(!(v||isFinite(e[0])&&isFinite(e[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(s[0])&&isFinite(s[1])))if(a>0)v=!0;else if(1!=(d=(isFinite(e[0])&&isFinite(e[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(a>0){if(!v){var p=[(t[0]+r[0])/2,(t[1]+r[1])/2],y=this.vu(p),w=void 0;if(l)w=(wr(e[0],c)+wr(u[0],c))/2-wr(y[0],c);else w=(e[0]+u[0])/2-y[0];var m=(e[1]+u[1])/2-y[1];v=w*w+m*m>this.pu}if(v){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var b=[(n[0]+r[0])/2,(n[1]+r[1])/2],g=this.vu(b),x=[(i[0]+t[0])/2,(i[1]+t[1])/2],_=this.vu(x);this.xu(t,n,b,x,e,o,g,_,a-1),this.xu(x,b,r,i,_,g,u,s,a-1)}else{var j=[(t[0]+n[0])/2,(t[1]+n[1])/2],O=this.vu(j),S=[(r[0]+i[0])/2,(r[1]+i[1])/2],M=this.vu(S);this.xu(t,j,S,i,e,O,M,s,a-1),this.xu(j,n,r,S,O,o,u,M,a-1)}return}}if(l){if(!this.mu)return;this.wu=!0}0==(11&d)&&this._u(t,r,i,e,u,s),0==(14&d)&&this._u(t,r,n,e,u,o),d&&(0==(13&d)&&this._u(n,i,t,o,s,e),0==(7&d)&&this._u(n,i,r,o,s,u))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.yu.forEach((function(n,r,i){var e=n.source;Gn(t,e[0]),Gn(t,e[1]),Gn(t,e[2])})),t},t.prototype.getTriangles=function(){return this.yu},t}(),yl=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),wl=function(t){function n(n,r,i,e,o,u,s,a,f,h,c,l){var v=t.call(this,o,ct,{interpolate:!!l})||this;v.ju=void 0!==c&&c,v.Pt=s,v.Ou=a,v.Ut=null,v.Su=r,v.Mu=e,v.Eu=u||o,v.Tu=[],v.ku=null,v.Au=0;var d=e.getTileCoordExtent(v.Eu),p=v.Mu.getExtent(),y=v.Su.getExtent(),w=p?Kn(d,p):d;if(0===Bn(w))return v.state=pt,v;var m=n.getExtent();m&&(y=y?Kn(y,m):m);var b=e.getResolution(v.Eu[0]),g=Yh(n,i,w,b);if(!isFinite(g)||g<=0)return v.state=pt,v;var x=void 0!==h?h:.5;if(v.Cu=new pl(n,i,w,y,g*x,b),0===v.Cu.getTriangles().length)return v.state=pt,v;v.Au=r.getZForResolution(g);var _=v.Cu.calculateSourceExtent();if(y&&(n.canWrapX()?(_[1]=fr(_[1],y[1],y[3]),_[3]=fr(_[3],y[1],y[3])):_=Kn(_,y)),Bn(_)){for(var j=r.getTileRangeForExtentAndZ(_,v.Au),O=j.minX;O<=j.maxX;O++)for(var S=j.minY;S<=j.maxY;S++){var M=f(v.Au,O,S,s);M&&v.Tu.push(M)}0===v.Tu.length&&(v.state=pt)}else v.state=pt;return v}return yl(n,t),n.prototype.getImage=function(){return this.Ut},n.prototype.Pu=function(){var t=[];if(this.Tu.forEach(function(n,r,i){n&&n.getState()==vt&&t.push({extent:this.Su.getTileCoordExtent(n.tileCoord),image:n.getImage()})}.bind(this)),this.Tu.length=0,0===t.length)this.state=dt;else{var n=this.Eu[0],r=this.Mu.getTileSize(n),i="number"==typeof r?r:r[0],e="number"==typeof r?r:r[1],o=this.Mu.getResolution(n),u=this.Su.getResolution(this.Au),s=this.Mu.getTileCoordExtent(this.Eu);this.Ut=Wh(i,e,this.Pt,u,this.Su.getExtent(),o,s,this.Cu,t,this.Ou,this.ju,this.interpolate),this.state=vt}this.changed()},n.prototype.load=function(){if(this.state==ct){this.state=lt,this.changed();var t=0;this.ku=[],this.Tu.forEach(function(n,r,i){var e=n.getState();if(e==ct||e==lt){t++;var o=H(n,L,(function(r){var i=n.getState();i!=vt&&i!=dt&&i!=pt||($(o),0===--t&&(this.Nu(),this.Pu()))}),this);this.ku.push(o)}}.bind(this)),0===t?setTimeout(this.Pu.bind(this),0):this.Tu.forEach((function(t,n,r){t.getState()==ct&&t.load()}))}},n.prototype.Nu=function(){this.ku.forEach($),this.ku=null},n}(xt),ml=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function bl(t,n,r){var i=r?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i)}function gl(t,n,r,i,e,o){var u,s,a=t.getGL();r instanceof Float32Array?(u=a.FLOAT,t.getExtension("OES_texture_float"),s=null!==t.getExtension("OES_texture_float_linear")):(u=a.UNSIGNED_BYTE,s=!0);bl(a,n,o&&s);var f,h=r.byteLength/i[1],c=1;switch(h%8==0?c=8:h%4==0?c=4:h%2==0&&(c=2),e){case 1:f=a.LUMINANCE;break;case 2:f=a.LUMINANCE_ALPHA;break;case 3:f=a.RGB;break;case 4:f=a.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(e))}var l=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,c),a.texImage2D(a.TEXTURE_2D,0,f,i[0],i[1],0,f,u,r),a.pixelStorei(a.UNPACK_ALIGNMENT,l)}var xl=null;var _l=function(t){function n(n){var r=t.call(this)||this;r.tile,r.textures=[],r.li=r.li.bind(r),r.Iu=aa(n.grid.getTileSize(n.tile.tileCoord[0])),r.Ou=n.gutter||0,r.bandCount=NaN,r.su=n.helper;var i=new Vc(hc,lc);return i.fromArray([0,1,1,1,1,0,0,0]),r.su.flushBufferData(i),r.coords=i,r.setTile(n.tile),r}return ml(n,t),n.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(L,this.li),this.tile=t,this.textures.length=0,this.loaded=t.getState()===vt,this.loaded)this.Lu();else{if(t instanceof Lo){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(L,this.li)}},n.prototype.Lu=function(){var t=this.su,n=t.getGL(),r=this.tile;if(r instanceof Lo||r instanceof wl){var i=n.createTexture();return this.textures.push(i),this.bandCount=4,void function(t,n,r,i){bl(t,n,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}(n,i,r.getImage(),r.interpolate)}var e=r.getSize(),o=[e[0]+2*this.Ou,e[1]+2*this.Ou],u=r.getData(),s=u instanceof Float32Array,a=o[0]*o[1],f=s?Float32Array:Uint8Array,h=f.BYTES_PER_ELEMENT,c=u.byteLength/o[1];this.bandCount=Math.floor(c/h/o[0]);var l=Math.ceil(this.bandCount/4);if(1===l){i=n.createTexture();return this.textures.push(i),void gl(t,i,u,o,this.bandCount,r.interpolate)}for(var v=new Array(l),d=0;d<l;++d){i=n.createTexture();this.textures.push(i);var p=d<l-1?4:this.bandCount%4;v[d]=new f(a*p)}for(var y=0,w=0,m=o[0]*this.bandCount,b=0;b<o[1];++b){for(var g=0;g<m;++g){var x=u[w+g],_=Math.floor(y/this.bandCount),j=g%this.bandCount;(O=v[d=Math.floor(j/4)])[_*(p=O.length/a)+j%4]=x,++y}w+=c/h}for(d=0;d<l;++d){var O;gl(t,i=this.textures[d],O=v[d],o,p=O.length/a,r.interpolate)}},n.prototype.li=function(){this.tile.getState()===vt&&(this.loaded=!0,this.Lu(),this.dispatchEvent(L))},n.prototype.disposeInternal=function(){var t=this.su.getGL();this.su.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(L,this.li)},n.prototype.getPixelData=function(t,n){if(!this.loaded)return null;var r,i=this.Iu[0],e=this.Iu[1],o=this.Ou;if(this.tile instanceof jt){var u=this.tile.getSize(),s=u[0],a=u[1],f=s+2*o,h=a+2*o,c=o+Math.floor(s*(t/i)),l=o+Math.floor(a*(n/e)),v=this.tile.getData();if(v instanceof DataView){var d=v.byteLength/(f*h),p=d*(l*f+c),y=v.buffer.slice(p,p+d);return new DataView(y)}var w=this.bandCount*(l*f+c);return v.slice(w,w+this.bandCount)}xl||((r=document.createElement("canvas")).width=1,r.height=1,xl=r.getContext("2d")),xl.clearRect(0,0,1,1);var m,b=this.tile.getImage(),g=b.width-2*o,x=b.height-2*o,_=o+Math.floor(g*(t/i)),j=o+Math.floor(x*(n/e));try{xl.drawImage(b,_,j,1,1,0,0,1,1),m=xl.getImageData(0,0,1,1).data}catch(t){return xl=null,null}return m},n}(I),jl=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ol=function(t){function n(n){var r=t.call(this)||this;return r.ready=!0,r.Ru=r.Gu.bind(r),r.zu=n,r.declutterExecutorGroup=null,r}return jl(n,t),n.prototype.getFeatures=function(t){return i()},n.prototype.getData=function(t){return null},n.prototype.prepareFrame=function(t){return i()},n.prototype.renderFrame=function(t,n){return i()},n.prototype.loadedTileCallback=function(t,n,r){t[n]||(t[n]={}),t[n][r.tileCoord.toString()]=r},n.prototype.createLoadedTileFinder=function(t,n,r){return function(i,e){var o=this.loadedTileCallback.bind(this,r,i);return t.forEachLoadedTile(n,i,e,o)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,n,r,i,e){},n.prototype.getDataAtPixel=function(t,n,r){return null},n.prototype.getLayer=function(){return this.zu},n.prototype.handleFontsChanged=function(){},n.prototype.Gu=function(t){t.target.getState()===bo&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var n=t.getState();return n!=bo&&n!=go&&t.addEventListener(L,this.Ru),n==wo&&(t.load(),n=t.getState()),n==bo},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==yu&&t.changed()},n.prototype.disposeInternal=function(){delete this.zu,t.prototype.disposeInternal.call(this)},n}(nt),Sl=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ml="GENERATE_BUFFERS",El=function(t){function n(n,r){var i=t.call(this,n)||this,e=r||{};return i.Fu=[1,0,0,1,0,0],i.Du=null,i.Uu=e.postProcesses,i.Vo=e.uniforms,i.helper,n.addChangeListener(ou,i.removeHelper.bind(i)),i.dispatchPreComposeEvent=i.dispatchPreComposeEvent.bind(i),i.dispatchPostComposeEvent=i.dispatchPostComposeEvent.bind(i),i}return Sl(n,t),n.prototype.dispatchPreComposeEvent=function(t,n){var r=this.getLayer();if(r.hasListener(cu)){var i=new Su(cu,void 0,n,t);r.dispatchEvent(i)}},n.prototype.dispatchPostComposeEvent=function(t,n){var r=this.getLayer();if(r.hasListener(lu)){var i=new Su(lu,void 0,n,t);r.dispatchEvent(i)}},n.prototype.reset=function(t){this.Vo=t.uniforms,this.helper&&this.helper.setUniforms(this.Vo)},n.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},n.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var r=!0,i=-1,e=void 0,o=0,u=t.layerStatesArray.length;o<u;o++){var s=t.layerStatesArray[o].layer,a=s.getRenderer();if(a instanceof n){var f=s.getClassName();if((r||f!==e)&&(i+=1,r=!1),e=f,a===this)break}else r=!0}var h="map/"+t.mapId+"/group/"+i;this.helper&&this.helper.canvasCacheKeyMatches(h)||(this.removeHelper(),this.helper=new hl({postProcesses:this.Uu,uniforms:this.Vo,canvasCacheKey:h}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)},n.prototype.afterHelperCreated=function(){},n.prototype.prepareFrameInternal=function(t){return!0},n.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},n.prototype.qu=function(t,n,r){var i=this.getLayer();if(i.hasListener(t)){sn(this.Fu,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);var e=new Su(t,this.Fu,r,n);i.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.qu(fu,t,n)},n.prototype.postRender=function(t,n){this.qu(hu,t,n)},n.prototype.getDataAtPixel=function(t,n,r){var i=nn([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),e=this.helper.getGL();if(!e)return null;var o=this.getLayer().getExtent();if(o&&!Sn(o,nn(n.pixelToCoordinateTransform,t.slice())))return null;var u=e.getContextAttributes();if(!u||!u.preserveDrawingBuffer)return new Uint8Array;var s,a=Math.round(i[0]),f=Math.round(i[1]),h=this.Du;if(!h){var c=document.createElement("canvas");c.width=1,c.height=1,h=c.getContext("2d"),this.Du=h}h.clearRect(0,0,1,1);try{h.drawImage(e.canvas,a,f,1,1,0,0,1,1),s=h.getImageData(0,0,1,1).data}catch(t){return s}return 0===s[3]?null:s},n}(Ol),Tl=[],kl={vertexPosition:0,indexPosition:0};function Al(t,n,r,i,e){t[n+0]=r,t[n+1]=i,t[n+2]=e}function Cl(t,n){var r=n||[],i=256,e=255;return r[0]=Math.floor(t/i/i/i)/e,r[1]=Math.floor(t/i/i)%i/e,r[2]=Math.floor(t/i)%i/e,r[3]=t%i/e,r}function Pl(t){var n=0,r=256,i=255;return n+=Math.round(t[0]*r*r*r*i),n+=Math.round(t[1]*r*r*i),n+=Math.round(t[2]*r*i),n+=Math.round(t[3]*i)}var Nl=El,Il=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ll={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},Rl={TEXTURE_COORD:"a_textureCoord"},Gl=[{name:Rl.TEXTURE_COORD,size:2,type:el.FLOAT}],zl={};function Fl(t){return 2*(1-1/(t+1))-1}function Dl(t,n,r){r in t||(t[r]=[]),t[r].push(n)}function Ul(t,n){var r=t.layerStatesArray[t.layerIndex];r.extent&&(n=Kn(n,Fi(r.extent,t.viewState.projection)));var i=r.layer.getRenderSource();if(!i.getWrapX()){var e=i.getTileGridForProjection(t.viewState.projection).getExtent();e&&(n=Kn(n,e))}return n}function ql(t,n){return"".concat(t.getKey(),",").concat(Wf(n))}var Bl=function(t){function n(n,r){var i=t.call(this,n,{uniforms:r.uniforms})||this;i.renderComplete=!1,i.Bu=[1,0,0,1,0,0],i.Xu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i.Vu=new rh(0,0,0,0),i.Yu=Vf(0,0,0),i.Wu=[0,0],i.Zu,i.Hu=r.vertexShader,i.Ku=r.fragmentShader,i.$u=new Vc(cc,lc),i.$u.fromArray([0,1,3,1,2,3]);var e=void 0!==r.cacheSize?r.cacheSize:512;return i.Ju=new Xf(e),i.Qu=r.paletteTextures||[],i.$r=null,i}return Il(n,t),n.prototype.reset=function(n){t.prototype.reset.call(this,{uniforms:n.uniforms}),this.Hu=n.vertexShader,this.Ku=n.fragmentShader,this.Qu=n.paletteTextures||[],this.helper&&(this.Zu=this.helper.getProgram(this.Ku,this.Hu))},n.prototype.afterHelperCreated=function(){this.Zu=this.helper.getProgram(this.Ku,this.Hu),this.helper.flushBufferData(this.$u)},n.prototype.ts=function(t){var n=this.getLayer(),r=t.getState(),i=n.getUseInterimTilesOnError();return r==vt||r==pt||r==dt&&!i},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer().getRenderSource();return!!n&&(!nr(Ul(t,t.extent))&&n.getState()===yu)},n.prototype.enqueueTiles=function(t,n,r,i){var e=t.viewState,u=this.getLayer(),s=u.getRenderSource(),a=s.getTileGridForProjection(e.projection),f=s.getGutterForProjection(e.projection),h=o(s);h in t.wantedTiles||(t.wantedTiles[h]={});for(var c=t.wantedTiles[h],l=this.Ju,v=Math.max(r-u.getPreload(),a.getMinZoom(),u.getMinZoom()),d=r;d>=v;--d)for(var p=a.getTileRangeForExtentAndZ(n,d,this.Vu),y=a.getResolution(d),w=p.minX;w<=p.maxX;++w)for(var m=p.minY;m<=p.maxY;++m){var b=Vf(d,w,m,this.Yu),g=ql(s,b),x=void 0,_=void 0;if(l.containsKey(g)&&(_=(x=l.get(g)).tile),!x||x.tile.key!==s.getKey())if(_=s.getTile(d,w,m,t.pixelRatio,e.projection),x)if(this.ts(_))x.setTile(_);else{var j=_.getInterimTile();x.setTile(j)}else x=new _l({tile:_,grid:a,helper:this.helper,gutter:f}),l.set(g,x);Dl(i,x,d);var O=_.getKey();c[O]=!0,_.getState()===ct&&(t.tileQueue.isKeyQueued(O)||t.tileQueue.enqueue([_,h,a.getTileCoordCenter(b),y]))}},n.prototype.renderFrame=function(t){this.$r=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var r=t.viewState,i=this.getLayer().getRenderSource(),e=i.getTileGridForProjection(r.projection),u=i.getGutterForProjection(r.projection),s=Ul(t,t.extent),a=e.getZForResolution(r.resolution,i.zDirection),f={};if(t.nextExtent){var h=e.getZForResolution(r.nextResolution,i.zDirection),c=Ul(t,t.nextExtent);this.enqueueTiles(t,c,h,f)}this.enqueueTiles(t,s,a,f);for(var l={},v=o(this),d=t.time,y=!1,w=f[a],m=0,b=w.length;m<b;++m){var g=(D=(tt=w[m]).tile).tileCoord;if(tt.loaded){if(1===(U=D.getAlpha(v,d))){D.endTransition(v);continue}y=!0,l[q=Wf(g)]=U}if(this.renderComplete=!1,!this.ns(e,g,a+1,f))for(var x=e.getMinZoom(),_=a-1;_>=x;--_){if(this.ns(e,g,_,f))break}}this.helper.useProgram(this.Zu),this.helper.prepareDraw(t,!y);for(var j=Object.keys(f).map(Number).sort(p),O=r.center[0],S=r.center[1],M=0,E=j.length;M<E;++M){var T=j[M],k=e.getResolution(T),A=aa(e.getTileSize(T),this.Wu),C=e.getOrigin(T),P=A[0]+2*u,N=A[1]+2*u,I=P/N,L=(O-C[0])/(A[0]*k),R=(C[1]-S)/(A[1]*k),G=r.resolution/k,z=Fl(T),F=f[T];for(m=0,b=F.length;m<b;++m){if((tt=F[m]).loaded){var D,U,q=Wf(g=(D=tt.tile).tileCoord),B=g[1],X=g[2];$t(this.Bu),en(this.Bu,2/(t.size[0]*G/P),-2/(t.size[1]*G/P)),rn(this.Bu,r.rotation),en(this.Bu,1,1/I),un(this.Bu,(A[0]*(B-L)-u)/P,(A[1]*(X-R)-u)/N),this.helper.setUniformMatrixValue(Ll.TILE_TRANSFORM,Kc(this.Xu,this.Bu)),this.helper.bindBuffer(tt.coords),this.helper.bindBuffer(this.$u),this.helper.enableAttributes(Gl);for(var V=0;V<tt.textures.length;){var Y="TEXTURE"+V,W="".concat(Ll.TILE_TEXTURE_ARRAY,"[").concat(V,"]");n.activeTexture(n[Y]),n.bindTexture(n.TEXTURE_2D,tt.textures[V]),n.uniform1i(this.helper.getUniformLocation(W),V),++V}for(var Z=0;Z<this.Qu.length;++Z){var H=this.Qu[Z];n.activeTexture(n["TEXTURE"+V]);var K=H.getTexture(n);n.bindTexture(n.TEXTURE_2D,K),n.uniform1i(this.helper.getUniformLocation(H.name),V),++V}(U=q in l?l[q]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(Ll.TRANSITION_ALPHA,U),this.helper.setUniformFloatValue(Ll.DEPTH,z),this.helper.setUniformFloatValue(Ll.TEXTURE_PIXEL_WIDTH,P),this.helper.setUniformFloatValue(Ll.TEXTURE_PIXEL_HEIGHT,N),this.helper.setUniformFloatValue(Ll.TEXTURE_RESOLUTION,k),this.helper.setUniformFloatValue(Ll.TEXTURE_ORIGIN_X,C[0]+B*A[0]*k-u*k),this.helper.setUniformFloatValue(Ll.TEXTURE_ORIGIN_Y,C[1]-X*A[1]*k+u*k);var $=s;u>0&&Kn($=e.getTileCoordExtent(g),s,$),this.helper.setUniformFloatVec4(Ll.RENDER_EXTENT,$),this.helper.setUniformFloatValue(Ll.RESOLUTION,r.resolution),this.helper.setUniformFloatValue(Ll.ZOOM,r.zoom),this.helper.drawElements(0,this.$u.getSize())}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var J=this.helper.getCanvas(),Q=this.Ju;Q.canExpireCache();){var tt;(tt=Q.pop()).dispose()}return t.postRenderFunctions.push((function(t,n){i.expireCache(n.viewState.projection,zl)})),this.postRender(n,t),J},n.prototype.getData=function(t){if(!this.helper.getGL())return null;var n=this.$r;if(!n)return null;var r=this.getLayer(),i=nn(n.pixelToCoordinateTransform,t.slice()),e=n.viewState,o=r.getExtent();if(o&&!Sn(Fi(o,e.projection),i))return null;var u,s,a,f=r.getSources(xn([i]),e.resolution);for(u=f.length-1;u>=0;--u)if((s=f[u]).getState()===yu){if(a=s.getTileGridForProjection(e.projection),s.getWrapX())break;var h=a.getExtent();if(!h||Sn(h,i))break}if(u<0)return null;for(var c=this.Ju,l=a.getZForResolution(e.resolution);l>=a.getMinZoom();--l){var v=a.getTileCoordForCoordAndZ(i,l),d=ql(s,v);if(c.containsKey(d)){var p=c.get(d);if(p.loaded){var y=a.getOrigin(l),w=aa(a.getTileSize(l)),m=a.getResolution(l),b=(i[0]-y[0])/m-v[1]*w[0],g=(y[1]-i[1])/m-v[2]*w[1];return p.getPixelData(b,g)}}}return null},n.prototype.ns=function(t,n,r,i){var e=t.getTileRangeForTileCoordAndZ(n,r,this.Vu);if(!e)return!1;for(var o=!0,u=this.Ju,s=this.getLayer().getRenderSource(),a=e.minX;a<=e.maxX;++a)for(var f=e.minY;f<=e.maxY;++f){var h=ql(s,[r,a,f]),c=!1;if(u.containsKey(h)){var l=u.get(h);l.loaded&&(Dl(i,l,r),c=!0)}c||(o=!1)}return o},n.prototype.removeHelper=function(){if(this.helper){var n=this.Ju;n.forEach((function(t){return t.dispose()})),n.clear()}t.prototype.removeHelper.call(this)},n.prototype.disposeInternal=function(){var n=this.helper;n&&(n.getGL().deleteProgram(this.Zu),delete this.Zu,n.deleteBuffer(this.$u));t.prototype.disposeInternal.call(this),delete this.$u,delete this.Ju,delete this.$r},n}(Nl),Xl=1,Vl=2,Yl=4,Wl=8,Zl=16,Hl=31,Kl=0,$l={};function Jl(t){if("number"==typeof t)return Xl;if("boolean"==typeof t)return Wl;if("string"==typeof t)return Vo(t)?Yl|Vl:Vl;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var n=t;if(n.every((function(t){return"number"==typeof t})))return 3===n.length||4===n.length?Yl|Zl:Zl;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(n)));var r=$l[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return r.getReturnType(n.slice(1))}function Ql(t){return cr(t)%1==0}function tv(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n}function nv(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(tv).join(", "),")")}function rv(t){var n=qo(t).slice();return n.length<4&&n.push(1),nv(n.map((function(t,n){return n<3?t/255:t})))}function iv(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function ev(t,n){return tv(iv(t,n))}function ov(t,n,r){if(Array.isArray(n)&&"string"==typeof n[0]){var i=$l[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return i.toGlsl(t,n.slice(1),r)}var e=Jl(n);if((e&Xl)>0)return tv(n);if((e&Wl)>0)return n.toString();if((e&Vl)>0&&(void 0===r||r==Vl))return ev(t,n.toString());if((e&Yl)>0&&(void 0===r||r==Yl))return rv(n);if((e&Zl)>0)return nv(n);throw new Error("Unexpected expression ".concat(n," (expected type ").concat(r,")"))}function uv(t){if(!(Jl(t)&Xl))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function sv(t){for(var n=0;n<t.length;n++)uv(t[n])}function av(t){if(!(Jl(t)&Vl))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function fv(t){if(!(Jl(t)&Wl))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function hv(t,n){if(t.length!==n)throw new Error("Exactly ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function cv(t,n){if(t.length<n)throw new Error("At least ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function lv(t,n){if(t.length>n)throw new Error("At most ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function vv(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function dv(t,n){if(!Ql(n))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}function pv(t){return"u_var_"+t}$l.get={getReturnType:function(t){return Hl},toGlsl:function(t,n){hv(n,1),av(n[0]);var r=n[0].toString();return-1===t.attributes.indexOf(r)&&t.attributes.push(r),(t.inFragmentShader?"v_":"a_")+r}},$l.var={getReturnType:function(t){return Hl},toGlsl:function(t,n){hv(n,1),av(n[0]);var r=n[0].toString();return-1===t.variables.indexOf(r)&&t.variables.push(r),pv(r)}};var yv="u_paletteTextures";$l.palette={getReturnType:function(t){return Yl},toGlsl:function(t,n){hv(n,2),uv(n[0]);var r=ov(t,n[0]),i=n[1];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");for(var e=i.length,o=new Uint8Array(4*e),u=0;u<e;u++){var s=i[u],a=void 0;if("string"==typeof s)a=Uo(s);else{if(!Array.isArray(s))throw new Error("The second argument of palette must be an array of strings or colors");var f=s.length;if(4===f)a=s;else{if(3!==f)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(f));a=[s[0],s[1],s[2],1]}}var h=4*u;o[h]=a[0],o[h+1]=a[1],o[h+2]=a[2],o[h+3]=255*a[3]}t.paletteTextures||(t.paletteTextures=[]);var c="".concat(yv,"[").concat(t.paletteTextures.length,"]"),l=new cl(c,o);return t.paletteTextures.push(l),"texture2D(".concat(c,", vec2((").concat(r," + 0.5) / ").concat(e,".0, 0.5))")}};var wv="getBandValue";function mv(t){return{getReturnType:function(t){return Wl},toGlsl:function(n,r){hv(r,2);for(var i=Hl,e=0;e<r.length;e++)i&=Jl(r[e]);if(i===Kl)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return i&=~Yl,"(".concat(ov(n,r[0],i)," ").concat(t," ").concat(ov(n,r[1],i),")")}}}function bv(t){return{getReturnType:function(t){return Wl},toGlsl:function(n,r){cv(r,2);for(var i=0;i<r.length;i++)fv(r[i]);var e="";return e=r.map((function(t){return ov(n,t)})).join(" ".concat(t," ")),e="(".concat(e,")")}}}$l.band={getReturnType:function(t){return Xl},toGlsl:function(t,n){cv(n,1),lv(n,3);var r=n[0];if(!(wv in t.functions)){for(var i="",e=t.bandCount||1,o=0;o<e;o++){var u=Math.floor(o/4),s=o%4;s===e-1&&1===s&&(s=3);var a="".concat(Ll.TILE_TEXTURE_ARRAY,"[").concat(u,"]");i+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(a,", v_textureCoord + vec2(dx, dy))[").concat(s,"];\n          }\n        ")}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(Ll.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(Ll.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(i,"\n        }\n      ")}var f=ov(t,r),h=ov(t,n[1]||0),c=ov(t,n[2]||0);return"".concat(wv,"(").concat(f,", ").concat(h,", ").concat(c,")")}},$l.time={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,0),"u_time"}},$l.zoom={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,0),"u_zoom"}},$l.resolution={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,0),"u_resolution"}},$l["*"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,2),sv(n),"(".concat(ov(t,n[0])," * ").concat(ov(t,n[1]),")")}},$l["/"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,2),sv(n),"(".concat(ov(t,n[0])," / ").concat(ov(t,n[1]),")")}},$l["+"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,2),sv(n),"(".concat(ov(t,n[0])," + ").concat(ov(t,n[1]),")")}},$l["-"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,2),sv(n),"(".concat(ov(t,n[0])," - ").concat(ov(t,n[1]),")")}},$l.clamp={getReturnType:function(t){return Xl},toGlsl:function(t,n){hv(n,3),sv(n);var r=ov(t,n[1]),i=ov(t,n[2]);return"clamp(".concat(ov(t,n[0]),", ").concat(r,", ").concat(i,")")}},$l["%"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,2),sv(n),"mod(".concat(ov(t,n[0]),", ").concat(ov(t,n[1]),")")}},$l["^"]={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,2),sv(n),"pow(".concat(ov(t,n[0]),", ").concat(ov(t,n[1]),")")}},$l.abs={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,1),sv(n),"abs(".concat(ov(t,n[0]),")")}},$l.floor={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,1),sv(n),"floor(".concat(ov(t,n[0]),")")}},$l.round={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,1),sv(n),"floor(".concat(ov(t,n[0])," + 0.5)")}},$l.ceil={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,1),sv(n),"ceil(".concat(ov(t,n[0]),")")}},$l.sin={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,1),sv(n),"sin(".concat(ov(t,n[0]),")")}},$l.cos={getReturnType:function(t){return Xl},toGlsl:function(t,n){return hv(n,1),sv(n),"cos(".concat(ov(t,n[0]),")")}},$l.atan={getReturnType:function(t){return Xl},toGlsl:function(t,n){return cv(n,1),lv(n,2),sv(n),2===n.length?"atan(".concat(ov(t,n[0]),", ").concat(ov(t,n[1]),")"):"atan(".concat(ov(t,n[0]),")")}},$l[">"]={getReturnType:function(t){return Wl},toGlsl:function(t,n){return hv(n,2),sv(n),"(".concat(ov(t,n[0])," > ").concat(ov(t,n[1]),")")}},$l[">="]={getReturnType:function(t){return Wl},toGlsl:function(t,n){return hv(n,2),sv(n),"(".concat(ov(t,n[0])," >= ").concat(ov(t,n[1]),")")}},$l["<"]={getReturnType:function(t){return Wl},toGlsl:function(t,n){return hv(n,2),sv(n),"(".concat(ov(t,n[0])," < ").concat(ov(t,n[1]),")")}},$l["<="]={getReturnType:function(t){return Wl},toGlsl:function(t,n){return hv(n,2),sv(n),"(".concat(ov(t,n[0])," <= ").concat(ov(t,n[1]),")")}},$l["=="]=mv("=="),$l["!="]=mv("!="),$l["!"]={getReturnType:function(t){return Wl},toGlsl:function(t,n){return hv(n,1),fv(n[0]),"(!".concat(ov(t,n[0]),")")}},$l.all=bv("&&"),$l.any=bv("||"),$l.between={getReturnType:function(t){return Wl},toGlsl:function(t,n){hv(n,3),sv(n);var r=ov(t,n[1]),i=ov(t,n[2]),e=ov(t,n[0]);return"(".concat(e," >= ").concat(r," && ").concat(e," <= ").concat(i,")")}},$l.array={getReturnType:function(t){return Zl},toGlsl:function(t,n){cv(n,2),lv(n,4),sv(n);var r=n.map((function(n){return ov(t,n,Xl)}));return"vec".concat(n.length,"(").concat(r.join(", "),")")}},$l.color={getReturnType:function(t){return Yl},toGlsl:function(t,n){cv(n,3),lv(n,4),sv(n);var r=n;3===n.length&&r.push(1);var i=n.map((function(n,r){return ov(t,n,Xl)+(r<3?" / 255.0":"")}));return"vec".concat(n.length,"(").concat(i.join(", "),")")}},$l.interpolate={getReturnType:function(t){for(var n=Yl|Xl,r=3;r<t.length;r+=2)n&=Jl(t[r]);return n},toGlsl:function(t,n,r){vv(n),cv(n,6);var i,e=n[0];switch(e[0]){case"linear":i=1;break;case"exponential":i=e[1];break;default:i=null}if(!i)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(e)));var o=void 0!==r?r:Hl,u=$l.interpolate.getReturnType(n)&o;dv(n,u);for(var s=ov(t,n[1]),a=tv(i),f="",h=2;h<n.length-2;h+=2){var c=ov(t,n[h]),l=f||ov(t,n[h+1],u),v=ov(t,n[h+2]),d=ov(t,n[h+3],u);f="mix(".concat(l,", ").concat(d,", pow(clamp((").concat(s," - ").concat(c,") / (").concat(v," - ").concat(c,"), 0.0, 1.0), ").concat(a,"))")}return f}},$l.match={getReturnType:function(t){for(var n=Hl,r=2;r<t.length;r+=2)n&=Jl(t[r]);return n&=Jl(t[t.length-1])},toGlsl:function(t,n,r){vv(n),cv(n,4);var i=void 0!==r?r:Hl,e=$l.match.getReturnType(n)&i;dv(n,e);for(var o=ov(t,n[0]),u=ov(t,n[n.length-1],e),s=null,a=n.length-3;a>=1;a-=2){var f=ov(t,n[a]),h=ov(t,n[a+1],e);s="(".concat(o," == ").concat(f," ? ").concat(h," : ").concat(s||u,")")}return s}},$l.case={getReturnType:function(t){for(var n=Hl,r=1;r<t.length;r+=2)n&=Jl(t[r]);return n&=Jl(t[t.length-1])},toGlsl:function(t,n,r){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}(n),cv(n,3);var i=void 0!==r?r:Hl,e=$l.case.getReturnType(n)&i;dv(n,e);for(var o=0;o<n.length-1;o+=2)fv(n[o]);var u=ov(t,n[n.length-1],e),s=null;for(o=n.length-3;o>=0;o-=2){var a=ov(t,n[o]),f=ov(t,n[o+1],e);s="(".concat(a," ? ").concat(f," : ").concat(s||u,")")}return s}};var gv=function(){function t(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return t.prototype.addUniform=function(t){return this.uniforms.push(t),this},t.prototype.addAttribute=function(t){return this.attributes.push(t),this},t.prototype.addVarying=function(t,n,r){return this.varyings.push({name:t,type:n,expression:r}),this},t.prototype.setSizeExpression=function(t){return this.sizeExpression=t,this},t.prototype.setRotationExpression=function(t){return this.rotationExpression=t,this},t.prototype.setSymbolOffsetExpression=function(t){return this.offsetExpression=t,this},t.prototype.setColorExpression=function(t){return this.colorExpression=t,this},t.prototype.setTextureCoordinateExpression=function(t){return this.texCoordExpression=t,this},t.prototype.setFragmentDiscardExpression=function(t){return this.discardExpression=t,this},t.prototype.setSymbolRotateWithView=function(t){return this.rotateWithView=t,this},t.prototype.getSizeExpression=function(){return this.sizeExpression},t.prototype.getOffsetExpression=function(){return this.offsetExpression},t.prototype.getColorExpression=function(){return this.colorExpression},t.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},t.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},t.prototype.getSymbolVertexShader=function(t){var n=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",r=this.attributes,i=this.varyings;return t&&(r=r.concat("vec4 a_hitColor"),i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\n").concat(r.map((function(t){return"attribute "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(i.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  mat4 offsetMatrix = ").concat(n,";\n  vec2 halfSize = ").concat(this.sizeExpression," * 0.5;\n  vec2 offset = ").concat(this.offsetExpression,";\n  float angle = ").concat(this.rotationExpression,";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ").concat(this.texCoordExpression,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n").concat(i.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n"),"\n}")},t.prototype.getSymbolFragmentShader=function(t){var n=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",r=this.varyings;return t&&(r=r.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(r.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  if (").concat(this.discardExpression,") { discard; }\n  gl_FragColor = ").concat(this.colorExpression,";\n  gl_FragColor.rgb *= gl_FragColor.a;\n").concat(n,"\n}")},t}();function xv(t){var n=t.symbol,r=void 0!==n.size?n.size:1,i=n.color||"white",e=n.textureCoord||[0,0,1,1],o=n.offset||[0,0],u=void 0!==n.opacity?n.opacity:1,s=void 0!==n.rotation?n.rotation:0,a={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{}},f=ov(a,r,Zl|Xl),h=ov(a,o,Zl),c=ov(a,e,Zl),l=ov(a,s,Xl),v={inFragmentShader:!0,variables:a.variables,attributes:[],stringLiteralsMap:a.stringLiteralsMap,functions:{}},d=ov(v,i,Yl),p=ov(v,u,Xl),y="1.0",w="vec2(".concat(ov(v,r,Zl|Xl),").x");switch(n.symbolType){case"square":case"image":break;case"circle":y="(1.0-smoothstep(1.-4./".concat(w,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");break;case"triangle":var m="(v_quadCoord*2.-1.)",b="(atan(".concat(m,".x,").concat(m,".y))");y="(1.0-smoothstep(.5-3./".concat(w,",.5,cos(floor(.5+").concat(b,"/2.094395102)*2.094395102-").concat(b,")*length(").concat(m,")))");break;default:throw new Error("Unexpected symbol type: "+n.symbolType)}var g=(new gv).setSizeExpression("vec2(".concat(f,")")).setRotationExpression(l).setSymbolOffsetExpression(h).setTextureCoordinateExpression(c).setSymbolRotateWithView(!!n.rotateWithView).setColorExpression("vec4(".concat(d,".rgb, ").concat(d,".a * ").concat(p," * ").concat(y,")"));if(t.filter){var x=ov(v,t.filter,Wl);g.setFragmentDiscardExpression("!".concat(x))}var _={};if(v.variables.forEach((function(n){var r=pv(n);g.addUniform("float ".concat(r)),_[r]=function(){if(!t.variables||void 0===t.variables[n])throw new Error("The following variable is missing from the style: ".concat(n));var r=t.variables[n];return"string"==typeof r&&(r=iv(a,r)),void 0!==r?r:-9999999}})),"image"===n.symbolType&&n.src){var j=new Image;j.crossOrigin=void 0===n.crossOrigin?"anonymous":n.crossOrigin,j.src=n.src,g.addUniform("sampler2D u_texture").setColorExpression(g.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),_.u_texture=j}return v.attributes.forEach((function(t){-1===a.attributes.indexOf(t)&&a.attributes.push(t),g.addVarying("v_".concat(t),"float","a_".concat(t))})),a.attributes.forEach((function(t){g.addAttribute("float a_".concat(t))})),{builder:g,attributes:a.attributes.map((function(t){return{name:t,callback:function(n,r){var i=r[t];return"string"==typeof i&&(i=iv(a,i)),void 0!==i?i:-9999999}}})),uniforms:_}}var _v=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),jv=function(t){function n(n){var r=t.call(this,{extent:n.extent,origin:n.origin,origins:n.origins,resolutions:n.resolutions,tileSize:n.tileSize,tileSizes:n.tileSizes,sizes:n.sizes})||this;return r.rs=n.matrixIds,r}return _v(n,t),n.prototype.getMatrixId=function(t){return this.rs[t]},n.prototype.getMatrixIds=function(){return this.rs},n}(Hh),Ov=jv;function Sv(t,n,r){var i=[],e=[],o=[],u=[],s=[],a=void 0!==r?r:[],f=gi(t.SupportedCRS),h=f.getMetersPerUnit(),c="ne"==f.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,n){return n.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(n){if(!(a.length>0)||g(a,(function(r){return n.Identifier==r.TileMatrix||-1===n.Identifier.indexOf(":")&&t.Identifier+":"+n.Identifier===r.TileMatrix}))){e.push(n.Identifier);var r=28e-5*n.ScaleDenominator/h,f=n.TileWidth,l=n.TileHeight;c?o.push([n.TopLeftCorner[1],n.TopLeftCorner[0]]):o.push(n.TopLeftCorner),i.push(r),u.push(f==l?f:[f,l]),s.push([n.MatrixWidth,n.MatrixHeight])}})),new jv({extent:n,origins:o,resolutions:i,matrixIds:e,tileSizes:u,sizes:s})}var Mv=function(){function t(t){this.es=t.opacity,this.os=t.rotateWithView,this.Di=t.rotation,this.us=t.scale,this.ss=aa(t.scale),this.fs=t.displacement,this.hs=t.declutterMode}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getOpacity=function(){return this.es},t.prototype.getRotateWithView=function(){return this.os},t.prototype.getRotation=function(){return this.Di},t.prototype.getScale=function(){return this.us},t.prototype.getScaleArray=function(){return this.ss},t.prototype.getDisplacement=function(){return this.fs},t.prototype.getDeclutterMode=function(){return this.hs},t.prototype.getAnchor=function(){return i()},t.prototype.getImage=function(t){return i()},t.prototype.getHitDetectionImage=function(){return i()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return i()},t.prototype.getImageSize=function(){return i()},t.prototype.getOrigin=function(){return i()},t.prototype.getSize=function(){return i()},t.prototype.setDisplacement=function(t){this.fs=t},t.prototype.setOpacity=function(t){this.es=t},t.prototype.setRotateWithView=function(t){this.os=t},t.prototype.setRotation=function(t){this.Di=t},t.prototype.setScale=function(t){this.us=t,this.ss=aa(t)},t.prototype.listenImageChange=function(t){i()},t.prototype.load=function(){i()},t.prototype.unlistenImageChange=function(t){i()},t}(),Ev=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Tv=function(t){function n(n){var r=this,i=void 0!==n.rotateWithView&&n.rotateWithView;return(r=t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0],declutterMode:n.declutterMode})||this).Ut=void 0,r.cs=null,r.ls=void 0!==n.fill?n.fill:null,r.Oo=[0,0],r.Zt=n.points,r.vs=void 0!==n.radius?n.radius:n.radius1,r.ds=n.radius2,r.Ht=void 0!==n.angle?n.angle:0,r.ps=void 0!==n.stroke?n.stroke:null,r.W=null,r.ys=null,r.render(),r}return Ev(n,t),n.prototype.clone=function(){var t=this.getScale(),r=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r},n.prototype.getAnchor=function(){var t=this.W;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},n.prototype.getAngle=function(){return this.Ht},n.prototype.getFill=function(){return this.ls},n.prototype.getHitDetectionImage=function(){return this.cs||this.ws(this.ys),this.cs},n.prototype.getImage=function(t){var n=this.Ut[t];if(!n){var r=this.ys,i=Eo(r.size*t,r.size*t);this.bs(r,i,t),n=i.canvas,this.Ut[t]=n}return n},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.W},n.prototype.getImageState=function(){return bo},n.prototype.getOrigin=function(){return this.Oo},n.prototype.getPoints=function(){return this.Zt},n.prototype.getRadius=function(){return this.vs},n.prototype.getRadius2=function(){return this.ds},n.prototype.getSize=function(){return this.W},n.prototype.getStroke=function(){return this.ps},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.gs=function(t,n,r){if(0===n||this.Zt===1/0||"bevel"!==t&&"miter"!==t)return n;var i=this.vs,e=void 0===this.ds?i:this.ds;if(i<e){var o=i;i=e,e=o}var u=void 0===this.ds?this.Zt:2*this.Zt,s=2*Math.PI/u,a=e*Math.sin(s),f=i-Math.sqrt(e*e-a*a),h=Math.sqrt(a*a+f*f),c=h/a;if("miter"===t&&c<=r)return c*n;var l=n/2/c,v=n/2*(f/h),d=Math.sqrt((i+l)*(i+l)+v*v)-i;if(void 0===this.ds||"bevel"===t)return 2*d;var p=i*Math.sin(s),y=e-Math.sqrt(i*i-p*p),w=Math.sqrt(p*p+y*y)/p;if(w<=r){var m=w*n/2-e-i;return 2*Math.max(d,m)}return 2*d},n.prototype.createRenderOptions=function(){var t,n=Du,r=0,i=null,e=0,o=0;this.ps&&(null===(t=this.ps.getColor())&&(t=qu),t=ah(t),void 0===(o=this.ps.getWidth())&&(o=1),i=this.ps.getLineDash(),e=this.ps.getLineDashOffset(),void 0===(n=this.ps.getLineJoin())&&(n=Du),void 0===(r=this.ps.getMiterLimit())&&(r=Uu));var u=this.gs(n,o,r),s=Math.max(this.vs,this.ds||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*s+u),lineDash:i,lineDashOffset:e,lineJoin:n,miterLimit:r}},n.prototype.render=function(){this.ys=this.createRenderOptions();var t=this.ys.size;this.Ut={},this.W=[t,t]},n.prototype.bs=function(t,n,r){if(n.scale(r,r),n.translate(t.size/2,t.size/2),this.xs(n),this.ls){var i=this.ls.getColor();null===i&&(i=Gu),n.fillStyle=ah(i),n.fill()}this.ps&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n.prototype.ws=function(t){if(this.ls){var n=this.ls.getColor(),r=0;if("string"==typeof n&&(n=qo(n)),null===n?r=1:Array.isArray(n)&&(r=4===n.length?n[3]:1),0===r){var i=Eo(t.size,t.size);this.cs=i.canvas,this._s(t,i)}}this.cs||(this.cs=this.getImage(1))},n.prototype.xs=function(t){var n=this.Zt,r=this.vs;if(n===1/0)t.arc(0,0,r,0,2*Math.PI);else{var i=void 0===this.ds?r:this.ds;void 0!==this.ds&&(n*=2);for(var e=this.Ht-Math.PI/2,o=2*Math.PI/n,u=0;u<n;u++){var s=e+u*o,a=u%2==0?r:i;t.lineTo(a*Math.cos(s),a*Math.sin(s))}t.closePath()}},n.prototype._s=function(t,n){n.translate(t.size/2,t.size/2),this.xs(n),n.fillStyle=Gu,n.fill(),this.ps&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n}(Mv),kv=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Av=function(t){function n(n){var r=n||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:void 0!==r.scale?r.scale:1,rotation:void 0!==r.rotation?r.rotation:0,rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView,displacement:void 0!==r.displacement?r.displacement:[0,0],declutterMode:r.declutterMode})||this}return kv(n,t),n.prototype.clone=function(){var t=this.getScale(),r=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r},n.prototype.setRadius=function(t){this.vs=t,this.render()},n}(Tv),Cv=function(){function t(t){var n=t||{};this.js=void 0!==n.color?n.color:null}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0})},t.prototype.getColor=function(){return this.js},t.prototype.setColor=function(t){this.js=t},t}(),Pv="fraction",Nv="pixels",Iv="bottom-left",Lv="bottom-right",Rv="top-left",Gv="top-right",zv=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Fv=null,Dv=function(t){function n(n,r,i,e,o,u){var s=t.call(this)||this;return s.Os=null,s.Lt=n||new Image,null!==e&&(s.Lt.crossOrigin=e),s.Ut={},s.js=u,s.Rt=null,s.Ss=o,s.W=i,s.Nt=r,s.Ms,s}return zv(n,t),n.prototype.Es=function(){if(void 0===this.Ms&&this.Ss===bo){Fv||(Fv=Eo(1,1)),Fv.drawImage(this.Lt,0,0);try{Fv.getImageData(0,0,1,1),this.Ms=!1}catch(t){Fv=null,this.Ms=!0}}return!0===this.Ms},n.prototype.Ts=function(){this.dispatchEvent(L)},n.prototype.zt=function(){this.Ss=go,this.Ft(),this.Ts()},n.prototype.Dt=function(){this.Ss=bo,this.W?(this.Lt.width=this.W[0],this.Lt.height=this.W[1]):this.W=[this.Lt.width,this.Lt.height],this.Ft(),this.Ts()},n.prototype.getImage=function(t){return this.ks(t),this.Ut[t]?this.Ut[t]:this.Lt},n.prototype.getPixelRatio=function(t){return this.ks(t),this.Ut[t]?t:1},n.prototype.getImageState=function(){return this.Ss},n.prototype.getHitDetectionImage=function(){if(!this.Os)if(this.Es()){var t=this.W[0],n=this.W[1],r=Eo(t,n);r.fillRect(0,0,t,n),this.Os=r.canvas}else this.Os=this.Lt;return this.Os},n.prototype.getSize=function(){return this.W},n.prototype.getSrc=function(){return this.Nt},n.prototype.load=function(){if(this.Ss==wo){this.Ss=mo;try{this.Lt.src=this.Nt}catch(t){this.zt()}this.Rt=jo(this.Lt,this.Dt.bind(this),this.zt.bind(this))}},n.prototype.ks=function(t){if(this.js&&!this.Ut[t]&&this.Ss===bo){var n=document.createElement("canvas");this.Ut[t]=n,n.width=Math.ceil(this.Lt.width*t),n.height=Math.ceil(this.Lt.height*t);var r=n.getContext("2d");if(r.scale(t,t),r.drawImage(this.Lt,0,0),r.globalCompositeOperation="multiply","multiply"===r.globalCompositeOperation||this.Es())r.fillStyle=Fo(this.js),r.fillRect(0,0,n.width/t,n.height/t),r.globalCompositeOperation="destination-in",r.drawImage(this.Lt,0,0);else{for(var i=r.getImageData(0,0,n.width,n.height),e=i.data,o=this.js[0]/255,u=this.js[1]/255,s=this.js[2]/255,a=this.js[3],f=0,h=e.length;f<h;f+=4)e[f]*=o,e[f+1]*=u,e[f+2]*=s,e[f+3]*=a;r.putImageData(i,0,0)}}},n.prototype.Ft=function(){this.Rt&&(this.Rt(),this.Rt=null)},n}(I);function Uv(t,n,r,i,e,o){var u=Ho.get(n,i,o);return u||(u=new Dv(t,n,r,i,e,o),Ho.set(n,i,o,u)),u}var qv=Dv,Bv=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Xv=function(t){function n(n){var r=this,i=n||{},e=void 0!==i.opacity?i.opacity:1,u=void 0!==i.rotation?i.rotation:0,s=void 0!==i.scale?i.scale:1,a=void 0!==i.rotateWithView&&i.rotateWithView;(r=t.call(this,{opacity:e,rotation:u,scale:s,displacement:void 0!==i.displacement?i.displacement:[0,0],rotateWithView:a,declutterMode:i.declutterMode})||this)._e=void 0!==i.anchor?i.anchor:[.5,.5],r.As=null,r.Cs=void 0!==i.anchorOrigin?i.anchorOrigin:Rv,r.Ps=void 0!==i.anchorXUnits?i.anchorXUnits:Pv,r.Ns=void 0!==i.anchorYUnits?i.anchorYUnits:Pv,r.Bt=void 0!==i.crossOrigin?i.crossOrigin:null;var f=void 0!==i.img?i.img:null;r.Is=i.imgSize;var h=i.src;Ot(!(void 0!==h&&f),4),Ot(!f||f&&r.Is,5),void 0!==h&&0!==h.length||!f||(h=f.src||o(f)),Ot(void 0!==h&&h.length>0,6);var c=void 0!==i.src?wo:bo;return r.js=void 0!==i.color?qo(i.color):null,r.Ls=Uv(f,h,void 0!==r.Is?r.Is:null,r.Bt,c,r.js),r.Rs=void 0!==i.offset?i.offset:[0,0],r.Gs=void 0!==i.offsetOrigin?i.offsetOrigin:Rv,r.Oo=null,r.W=void 0!==i.size?i.size:null,r}return Bv(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this._e.slice(),anchorOrigin:this.Cs,anchorXUnits:this.Ps,anchorYUnits:this.Ns,color:this.js&&this.js.slice?this.js.slice():this.js||void 0,crossOrigin:this.Bt,imgSize:this.Is,offset:this.Rs.slice(),offsetOrigin:this.Gs,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.W?this.W.slice():void 0,src:this.getSrc()})},n.prototype.getAnchor=function(){var t=this.As;if(!t){t=this._e;var n=this.getSize();if(this.Ps==Pv||this.Ns==Pv){if(!n)return null;t=this._e.slice(),this.Ps==Pv&&(t[0]*=n[0]),this.Ns==Pv&&(t[1]*=n[1])}if(this.Cs!=Rv){if(!n)return null;t===this._e&&(t=this._e.slice()),this.Cs!=Gv&&this.Cs!=Lv||(t[0]=-t[0]+n[0]),this.Cs!=Iv&&this.Cs!=Lv||(t[1]=-t[1]+n[1])}this.As=t}var r=this.getDisplacement();return[t[0]-r[0],t[1]+r[1]]},n.prototype.setAnchor=function(t){this._e=t,this.As=null},n.prototype.getColor=function(){return this.js},n.prototype.getImage=function(t){return this.Ls.getImage(t)},n.prototype.getPixelRatio=function(t){return this.Ls.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.Ls.getSize()},n.prototype.getImageState=function(){return this.Ls.getImageState()},n.prototype.getHitDetectionImage=function(){return this.Ls.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.Oo)return this.Oo;var t=this.Rs;if(this.Gs!=Rv){var n=this.getSize(),r=this.Ls.getSize();if(!n||!r)return null;t=t.slice(),this.Gs!=Gv&&this.Gs!=Lv||(t[0]=r[0]-n[0]-t[0]),this.Gs!=Iv&&this.Gs!=Lv||(t[1]=r[1]-n[1]-t[1])}return this.Oo=t,this.Oo},n.prototype.getSrc=function(){return this.Ls.getSrc()},n.prototype.getSize=function(){return this.W?this.W:this.Ls.getSize()},n.prototype.listenImageChange=function(t){this.Ls.addEventListener(L,t)},n.prototype.load=function(){this.Ls.load()},n.prototype.unlistenImageChange=function(t){this.Ls.removeEventListener(L,t)},n}(Mv),Vv=function(){function t(t){var n=t||{};this.js=void 0!==n.color?n.color:null,this.zs=n.lineCap,this.Fs=void 0!==n.lineDash?n.lineDash:null,this.Ds=n.lineDashOffset,this.Us=n.lineJoin,this.qs=n.miterLimit,this.Bs=n.width}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.js},t.prototype.getLineCap=function(){return this.zs},t.prototype.getLineDash=function(){return this.Fs},t.prototype.getLineDashOffset=function(){return this.Ds},t.prototype.getLineJoin=function(){return this.Us},t.prototype.getMiterLimit=function(){return this.qs},t.prototype.getWidth=function(){return this.Bs},t.prototype.setColor=function(t){this.js=t},t.prototype.setLineCap=function(t){this.zs=t},t.prototype.setLineDash=function(t){this.Fs=t},t.prototype.setLineDashOffset=function(t){this.Ds=t},t.prototype.setLineJoin=function(t){this.Us=t},t.prototype.setMiterLimit=function(t){this.qs=t},t.prototype.setWidth=function(t){this.Bs=t},t}();function Yv(t){return(Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Wv=function(){function t(t){var n=t||{};this.Ji=null,this.Xs=Jv,void 0!==n.geometry&&this.setGeometry(n.geometry),this.ls=void 0!==n.fill?n.fill:null,this.Lt=void 0!==n.image?n.image:null,this.fn=void 0!==n.renderer?n.renderer:null,this.Vs=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.ps=void 0!==n.stroke?n.stroke:null,this.oo=void 0!==n.text?n.text:null,this.Ys=n.zIndex}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"===Yv(n)&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.fn},t.prototype.setRenderer=function(t){this.fn=t},t.prototype.setHitDetectionRenderer=function(t){this.Vs=t},t.prototype.getHitDetectionRenderer=function(){return this.Vs},t.prototype.getGeometry=function(){return this.Ji},t.prototype.getGeometryFunction=function(){return this.Xs},t.prototype.getFill=function(){return this.ls},t.prototype.setFill=function(t){this.ls=t},t.prototype.getImage=function(){return this.Lt},t.prototype.setImage=function(t){this.Lt=t},t.prototype.getStroke=function(){return this.ps},t.prototype.setStroke=function(t){this.ps=t},t.prototype.getText=function(){return this.oo},t.prototype.setText=function(t){this.oo=t},t.prototype.getZIndex=function(){return this.Ys},t.prototype.setGeometry=function(t){"function"==typeof t?this.Xs=t:"string"==typeof t?this.Xs=function(n){return n.get(t)}:t?void 0!==t&&(this.Xs=function(){return t}):this.Xs=Jv,this.Ji=t},t.prototype.setZIndex=function(t){this.Ys=t},t}();function Zv(t){var n;if("function"==typeof t)n=t;else{var r;if(Array.isArray(t))r=t;else Ot("function"==typeof t.getZIndex,41),r=[t];n=function(){return r}}return n}var Hv=null;function Kv(t,n){if(!Hv){var r=new Cv({color:"rgba(255,255,255,0.4)"}),i=new Vv({color:"#3399CC",width:1.25});Hv=[new Wv({image:new Av({fill:r,stroke:i,radius:5}),fill:r,stroke:i})]}return Hv}function $v(){var t={},n=[255,255,255,1],r=[0,153,255,1];return t[Pt.POLYGON]=[new Wv({fill:new Cv({color:[255,255,255,.5]})})],t[Pt.MULTI_POLYGON]=t[Pt.POLYGON],t[Pt.LINE_STRING]=[new Wv({stroke:new Vv({color:n,width:5})}),new Wv({stroke:new Vv({color:r,width:3})})],t[Pt.MULTI_LINE_STRING]=t[Pt.LINE_STRING],t[Pt.CIRCLE]=t[Pt.POLYGON].concat(t[Pt.LINE_STRING]),t[Pt.POINT]=[new Wv({image:new Av({radius:6,fill:new Cv({color:r}),stroke:new Vv({color:n,width:1.5})}),zIndex:1/0})],t[Pt.MULTI_POINT]=t[Pt.POINT],t[Pt.GEOMETRY_COLLECTION]=t[Pt.POLYGON].concat(t[Pt.LINE_STRING],t[Pt.POINT]),t}function Jv(t){return t.getGeometry()}var Qv=Wv,td="point",nd="line",rd=function(){function t(t){var n=t||{};this.Ws=n.font,this.Di=n.rotation,this.os=n.rotateWithView,this.us=n.scale,this.ss=aa(void 0!==n.scale?n.scale:1),this.oo=n.text,this.Zs=n.textAlign,this.Hs=n.justify,this.Ks=n.textBaseline,this.ls=void 0!==n.fill?n.fill:new Cv({color:"#333"}),this.$s=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.Js=void 0!==n.placement?n.placement:td,this.Qs=!!n.overflow,this.ps=void 0!==n.stroke?n.stroke:null,this.ta=void 0!==n.offsetX?n.offsetX:0,this.na=void 0!==n.offsetY?n.offsetY:0,this.ra=n.backgroundFill?n.backgroundFill:null,this.ia=n.backgroundStroke?n.backgroundStroke:null,this.Pr=void 0===n.padding?null:n.padding}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.Qs},t.prototype.getFont=function(){return this.Ws},t.prototype.getMaxAngle=function(){return this.$s},t.prototype.getPlacement=function(){return this.Js},t.prototype.getOffsetX=function(){return this.ta},t.prototype.getOffsetY=function(){return this.na},t.prototype.getFill=function(){return this.ls},t.prototype.getRotateWithView=function(){return this.os},t.prototype.getRotation=function(){return this.Di},t.prototype.getScale=function(){return this.us},t.prototype.getScaleArray=function(){return this.ss},t.prototype.getStroke=function(){return this.ps},t.prototype.getText=function(){return this.oo},t.prototype.getTextAlign=function(){return this.Zs},t.prototype.getJustify=function(){return this.Hs},t.prototype.getTextBaseline=function(){return this.Ks},t.prototype.getBackgroundFill=function(){return this.ra},t.prototype.getBackgroundStroke=function(){return this.ia},t.prototype.getPadding=function(){return this.Pr},t.prototype.setOverflow=function(t){this.Qs=t},t.prototype.setFont=function(t){this.Ws=t},t.prototype.setMaxAngle=function(t){this.$s=t},t.prototype.setOffsetX=function(t){this.ta=t},t.prototype.setOffsetY=function(t){this.na=t},t.prototype.setPlacement=function(t){this.Js=t},t.prototype.setRotateWithView=function(t){this.os=t},t.prototype.setFill=function(t){this.ls=t},t.prototype.setRotation=function(t){this.Di=t},t.prototype.setScale=function(t){this.us=t,this.ss=aa(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.ps=t},t.prototype.setText=function(t){this.oo=t},t.prototype.setTextAlign=function(t){this.Zs=t},t.prototype.setJustify=function(t){this.Hs=t},t.prototype.setTextBaseline=function(t){this.Ks=t},t.prototype.setBackgroundFill=function(t){this.ra=t},t.prototype.setBackgroundStroke=function(t){this.ia=t},t.prototype.setPadding=function(t){this.Pr=t},t}(),id=function(){function t(t){this.ea,this.oa,this.ua,this.sa=void 0===t||t,this.aa=0}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},r=this.ua;if(r){var i=r.next;n.prev=r,n.next=i,r.next=n,i&&(i.prev=n),r===this.oa&&(this.oa=n)}else this.ea=n,this.oa=n,this.sa&&(n.next=n,n.prev=n);this.ua=n,this.aa++},t.prototype.removeItem=function(){var t=this.ua;if(t){var n=t.next,r=t.prev;n&&(n.prev=r),r&&(r.next=n),this.ua=n||r,this.ea===this.oa?(this.ua=void 0,this.ea=void 0,this.oa=void 0):this.ea===t?this.ea=this.ua:this.oa===t&&(this.oa=r?this.ua.prev:this.ua),this.aa--}},t.prototype.firstItem=function(){if(this.ua=this.ea,this.ua)return this.ua.data},t.prototype.lastItem=function(){if(this.ua=this.oa,this.ua)return this.ua.data},t.prototype.nextItem=function(){if(this.ua&&this.ua.next)return this.ua=this.ua.next,this.ua.data},t.prototype.getNextItem=function(){if(this.ua&&this.ua.next)return this.ua.next.data},t.prototype.prevItem=function(){if(this.ua&&this.ua.prev)return this.ua=this.ua.prev,this.ua.data},t.prototype.getPrevItem=function(){if(this.ua&&this.ua.prev)return this.ua.prev.data},t.prototype.getCurrItem=function(){if(this.ua)return this.ua.data},t.prototype.setFirstItem=function(){this.sa&&this.ua&&(this.ea=this.ua,this.oa=this.ua.prev)},t.prototype.concat=function(t){if(t.ua){if(this.ua){var n=this.ua.next;this.ua.next=t.ea,t.ea.prev=this.ua,n.prev=t.oa,t.oa.next=n,this.aa+=t.aa}else this.ua=t.ua,this.ea=t.ea,this.oa=t.oa,this.aa=t.aa;t.ua=void 0,t.ea=void 0,t.oa=void 0,t.aa=0}},t.prototype.getLength=function(){return this.aa},t}(),ed=r(72),od=function(){function t(t){this.fa=new ed(t),this.ha={}}return t.prototype.insert=function(t,n){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.fa.insert(r),this.ha[o(n)]=r},t.prototype.load=function(t,n){for(var r=new Array(n.length),i=0,e=n.length;i<e;i++){var u=t[i],s=n[i],a={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:s};r[i]=a,this.ha[o(s)]=a}this.fa.load(r)},t.prototype.remove=function(t){var n=o(t),r=this.ha[n];return delete this.ha[n],null!==this.fa.remove(r)},t.prototype.update=function(t,n){var r=this.ha[o(n)];In([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(n),this.insert(t,n))},t.prototype.getAll=function(){return this.fa.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.fa.search(n).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.ca(this.getAll(),t)},t.prototype.forEachInExtent=function(t,n){return this.ca(this.getInExtent(t),n)},t.prototype.ca=function(t,n){for(var r,i=0,e=t.length;i<e;i++)if(r=n(t[i]))return r;return r},t.prototype.isEmpty=function(){return P(this.ha)},t.prototype.clear=function(){this.fa.clear(),this.ha={}},t.prototype.getExtent=function(t){var n=this.fa.toJSON();return An(n.minX,n.minY,n.maxX,n.maxY,t)},t.prototype.concat=function(t){for(var n in this.fa.load(t.fa.all()),t.ha)this.ha[n]=t.ha[n]},t}(),ud="tileloadstart",sd="tileloadend",ad="tileloaderror",fd=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function hd(t){return t?Array.isArray(t)?function(n){return t}:"function"==typeof t?t:function(n){return[t]}:null}var cd=function(t){function n(n){var r=t.call(this)||this;r.projection=gi(n.projection),r.la=hd(n.attributions),r.va=void 0===n.attributionsCollapsible||n.attributionsCollapsible,r.loading=!1,r.rn=void 0!==n.state?n.state:yu,r.da=void 0!==n.wrapX&&n.wrapX,r.pa=!!n.interpolate,r.viewResolver=null,r.viewRejector=null;var i=r;return r.ya=new Promise((function(t,n){i.viewResolver=t,i.viewRejector=n})),r}return fd(n,t),n.prototype.getAttributions=function(){return this.la},n.prototype.getAttributionsCollapsible=function(){return this.va},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return i()},n.prototype.getView=function(){return this.ya},n.prototype.getState=function(){return this.rn},n.prototype.getWrapX=function(){return this.da},n.prototype.getInterpolate=function(){return this.pa},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.la=hd(t),this.changed()},n.prototype.setState=function(t){this.rn=t,this.changed()},n}(et),ld=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),vd=function(t){function n(n){var r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate})||this;r.on,r.once,r.un,r.wa=void 0!==n.opaque&&n.opaque,r.ma=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,r.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;return r.tileGrid&&aa(r.tileGrid.getTileSize(r.tileGrid.getMinZoom()),[256,256]),r.tileCache=new Qf(n.cacheSize||0),r.tmpSize=[0,0],r.Ne=n.key||"",r.tileOptions={transition:n.transition,interpolate:n.interpolate},r.zDirection=n.zDirection?n.zDirection:0,r}return ld(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,n){var r=this.getTileCacheForProjection(t);r&&r.expireCache(n)},n.prototype.forEachLoadedTile=function(t,n,r,i){var e=this.getTileCacheForProjection(t);if(!e)return!1;for(var o,u,s,a=!0,f=r.minX;f<=r.maxX;++f)for(var h=r.minY;h<=r.maxY;++h)u=Yf(n,f,h),s=!1,e.containsKey(u)&&(s=(o=e.get(u)).getState()===vt)&&(s=!1!==i(o)),s||(a=!1);return a},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.Ne},n.prototype.setKey=function(t){this.Ne!==t&&(this.Ne=t,this.changed())},n.prototype.getOpaque=function(t){return this.wa},n.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},n.prototype.getTile=function(t,n,r,e,o){return i()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Kh(t)},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();return Ot(null===n||Ti(n,t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.ma},n.prototype.getTilePixelSize=function(t,n,r){var i=this.getTileGridForProjection(r),e=this.getTilePixelRatio(n),o=aa(i.getTileSize(t),this.tmpSize);return 1==e?o:sa(o,e,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var r=void 0!==n?n:this.getProjection(),i=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=$h(i,t,r)),$f(t,i)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,n){var r=this.getTileCacheForProjection(n);t>r.highWaterMark&&(r.highWaterMark=t)},n.prototype.useTile=function(t,n,r,i){},n}(cd),dd=function(t){function n(n,r){var i=t.call(this,n)||this;return i.tile=r,i}return ld(n,t),n}(c),pd=vd,yd=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),wd=function(t){function n(r){var i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return i.ba=i.tileUrlFunction===n.prototype.tileUrlFunction,i.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(i.tileUrlFunction=r.tileUrlFunction),i.urls=null,r.urls?i.setUrls(r.urls):r.url&&i.setUrl(r.url),i.ga={},i}return yd(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var n,r=t.target,i=o(r),e=r.getState();e==lt?(this.ga[i]=!0,n=ud):i in this.ga&&(delete this.ga[i],n=e==dt?ad:e==vt?sd:void 0),null!=n&&this.dispatchEvent(new dd(n,r))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},n.prototype.setUrl=function(t){var n=sc(t);this.urls=n,this.setUrls(n)},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.ba?this.setTileUrlFunction(ec(t,this.tileGrid),n):this.setKey(n)},n.prototype.tileUrlFunction=function(t,n,r){},n.prototype.useTile=function(t,n,r){var i=Yf(t,n,r);this.tileCache.containsKey(i)&&this.tileCache.get(i)},n}(pd),md=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function bd(t,n){t.getImage().src=n}var gd=function(t){function n(n){var r=this,i=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(i=n.interpolate),(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:bd,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:i,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this).crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,r.tileClass=void 0!==n.tileClass?n.tileClass:Lo,r.tileCacheForProjection={},r.tileGridForProjection={},r.xa=n.reprojectionErrorThreshold,r._a=!1,r}return md(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,n){var r=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==r?n:{}),this.tileCacheForProjection){var e=this.tileCacheForProjection[i];e.expireCache(e==r?n:{})}},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Ti(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){var n=t.prototype.getKey.call(this);return this.getInterpolate()||(n+=":disable-interpolation"),n},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!Ti(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n)},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!Ti(n,t)){var r=o(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Kh(t)),this.tileGridForProjection[r]}return this.tileGrid},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||Ti(n,t))return this.tileCache;var r=o(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new Qf(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},n.prototype.ja=function(t,n,r,i,e,o){var u=[t,n,r],s=this.getTileCoordForTileUrlFunction(u,e),a=s?this.tileUrlFunction(s,i,e):void 0,f=new this.tileClass(u,void 0!==a?ct:pt,void 0!==a?a:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(L,this.handleTileChange.bind(this)),f},n.prototype.getTile=function(t,n,r,i,e){var o=this.getProjection();if(o&&e&&!Ti(o,e)){var u=this.getTileCacheForProjection(e),s=[t,n,r],a=void 0,f=Wf(s);u.containsKey(f)&&(a=u.get(f));var h=this.getKey();if(a&&a.key==h)return a;var c=this.getTileGridForProjection(o),l=this.getTileGridForProjection(e),v=this.getTileCoordForTileUrlFunction(s,e),d=new wl(o,c,e,l,s,v,this.getTilePixelRatio(i),this.getGutter(),function(t,n,r,i){return this.getTileInternal(t,n,r,i,o)}.bind(this),this.xa,this._a,this.getInterpolate());return d.key=h,a?(d.interimTile=a,d.refreshInterimChain(),u.replace(f,d)):u.set(f,d),d}return this.getTileInternal(t,n,r,i,o||e)},n.prototype.getTileInternal=function(t,n,r,i,e){var o=null,u=Yf(t,n,r),s=this.getKey();if(this.tileCache.containsKey(u)){if((o=this.tileCache.get(u)).key!=s){var a=o;o=this.ja(t,n,r,i,e,s),a.getState()==ct?o.interimTile=a.interimTile:o.interimTile=a,o.refreshInterimChain(),this.tileCache.replace(u,o)}}else o=this.ja(t,n,r,i,e,s),this.tileCache.set(u,o);return o},n.prototype.setRenderReprojectionEdges=function(t){if(this._a!=t){for(var n in this._a=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,n){var r=gi(t);if(r){var i=o(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}},n}(wd),xd=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function _d(t){var n,r,i=t[0],e=new Array(i),o=1<<i-1;for(n=0;n<i;++n)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),e[n]=String.fromCharCode(r),o>>=1;return e.join("")}for(var jd=function(t){function n(n){var r=this,i=void 0!==n.hidpi&&n.hidpi,e=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(e=n.interpolate),(r=t.call(this,{cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:e,opaque:!0,projection:gi("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:pu,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:i?2:1,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).Oa=i,r.Sa=void 0!==n.culture?n.culture:"en-us",r.Ma=void 0!==n.maxZoom?n.maxZoom:-1,r.Ea=n.key,r.Ta=n.imagerySet,mh("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+r.Ta+"?uriScheme=https&include=ImageryProviders&key="+r.Ea+"&c="+r.Sa,r.handleImageryMetadataResponse.bind(r),void 0,"jsonp"),r}return xd(n,t),n.prototype.getApiKey=function(){return this.Ea},n.prototype.getImagerySet=function(){return this.Ta},n.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var n=t.resourceSets[0].resources[0],r=-1==this.Ma?n.zoomMax:this.Ma,i=rc(this.getProjection()),e=this.Oa?2:1,o=n.imageWidth==n.imageHeight?n.imageWidth/e:[n.imageWidth/e,n.imageHeight/e],u=Qh({extent:i,minZoom:n.zoomMin,maxZoom:r,tileSize:o});this.tileGrid=u;var s=this.Sa,a=this.Oa;if(this.tileUrlFunction=oc(n.imageUrlSubdomains.map((function(t){var r=[0,0,0],i=n.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,n,e){if(t){Vf(t[0],t[1],t[2],r);var o=i;return a&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",_d(r))}}}))),n.imageryProviders){var f=ki(gi("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var r=[],i=t.viewState,e=this.getTileGrid(),o=e.getZForResolution(i.resolution,this.zDirection),u=e.getTileCoordForCoordAndZ(i.center,o)[0];return n.imageryProviders.map((function(n){for(var i=!1,e=n.coverageAreas,o=0,s=e.length;o<s;++o){var a=e[o];if(u>=a.zoomMin&&u<=a.zoomMax){var h=a.bbox;if(tr(or([h[1],h[0],h[3],h[2]],f),t.extent)){i=!0;break}}}i&&r.push(n.attribution)})),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),r}.bind(this))}this.setState(yu)}else this.setState(wu)},n}(gd),Od=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Sd=function(t){function n(n){var r=this,i=n||{},e=void 0===i.imageSmoothing||i.imageSmoothing;void 0!==i.interpolate&&(e=i.interpolate);var o=void 0!==i.projection?i.projection:"EPSG:3857",u=void 0!==i.tileGrid?i.tileGrid:Qh({extent:rc(o),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return(r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:e,opaque:i.opaque,projection:o,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:u,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this).Ou=void 0!==i.gutter?i.gutter:0,r}return Od(n,t),n.prototype.getGutter=function(){return this.Ou},n}(gd),Md=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ed=function(t){function n(n){var r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,maxZoom:void 0!==n.maxZoom?n.maxZoom:18,minZoom:n.minZoom,projection:n.projection,transition:n.transition,wrapX:n.wrapX,zDirection:n.zDirection})||this;return r.ka=n.account,r.Aa=n.map||"",r.Ca=n.config||{},r.Pa={},r.Na(),r}return Md(n,t),n.prototype.getConfig=function(){return this.Ca},n.prototype.updateConfig=function(t){k(this.Ca,t),this.Na()},n.prototype.setConfig=function(t){this.Ca=t||{},this.Na()},n.prototype.Na=function(){var t=JSON.stringify(this.Ca);if(this.Pa[t])this.Ia(this.Pa[t]);else{var n="https://"+this.ka+".carto.com/api/v1/map";this.Aa&&(n+="/named/"+this.Aa);var r=new XMLHttpRequest;r.addEventListener("load",this.La.bind(this,t)),r.addEventListener("error",this.Ra.bind(this)),r.open("POST",n),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.Ca))}},n.prototype.La=function(t,n){var r=n.target;if(!r.status||r.status>=200&&r.status<300){var i=void 0;try{i=JSON.parse(r.responseText)}catch(t){return void this.setState(wu)}this.Ia(i),this.Pa[t]=i,this.setState(yu)}else this.setState(wu)},n.prototype.Ra=function(t){this.setState(wu)},n.prototype.Ia=function(t){var n="https://"+t.cdn_url.https+"/"+this.ka+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n)},n}(Sd),Td="addfeature",kd="changefeature",Ad="clear",Cd="removefeature",Pd="featuresloadstart",Nd="featuresloadend",Id="featuresloaderror",Ld=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Rd=function(t){function n(n,r,i){var e=t.call(this,n)||this;return e.feature=r,e.features=i,e}return Ld(n,t),n}(c),Gd=function(t){function n(n){var r=this,i=n||{};(r=t.call(this,{attributions:i.attributions,interpolate:!0,projection:void 0,state:yu,wrapX:void 0===i.wrapX||i.wrapX})||this).on,r.once,r.un,r.q=M,r.Ge=i.format,r.Ga=void 0===i.overlaps||i.overlaps,r.Fe=i.url,void 0!==i.loader?r.q=i.loader:void 0!==r.Fe&&(Ot(r.Ge,7),r.q=ph(r.Fe,r.Ge)),r.za=void 0!==i.strategy?i.strategy:yh;var e,o,u=void 0===i.useSpatialIndex||i.useSpatialIndex;return r.Fa=u?new od:null,r.Da=new od,r.Ua=0,r.qa={},r.Ba={},r.Xa={},r.Va={},r.Ya=null,Array.isArray(i.features)?o=i.features:i.features&&(o=(e=i.features).getArray()),u||void 0!==e||(e=new ht(o)),void 0!==o&&r.addFeaturesInternal(o),void 0!==e&&r.Wa(e),r}return Ld(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.Za(n,t)){this.Ha(n,t);var r=t.getGeometry();if(r){var i=r.getExtent();this.Fa&&this.Fa.insert(i,t)}else this.qa[n]=t;this.dispatchEvent(new Rd(Td,t))}else this.Ya&&this.Ya.remove(t)},n.prototype.Ha=function(t,n){this.Va[t]=[H(n,L,this.Ka,this),H(n,l,this.Ka,this)]},n.prototype.Za=function(t,n){var r=!0,i=n.getId();return void 0!==i&&(i.toString()in this.Ba?r=!1:this.Ba[i.toString()]=n),r&&(Ot(!(t in this.Xa),30),this.Xa[t]=n),r},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var n=[],r=[],i=[],e=0,u=t.length;e<u;e++){var s=o(f=t[e]);this.Za(s,f)&&r.push(f)}e=0;for(var a=r.length;e<a;e++){var f;s=o(f=r[e]);this.Ha(s,f);var h=f.getGeometry();if(h){var c=h.getExtent();n.push(c),i.push(f)}else this.qa[s]=f}if(this.Fa&&this.Fa.load(n,i),this.hasListener(Td)){e=0;for(var l=r.length;e<l;e++)this.dispatchEvent(new Rd(Td,r[e]))}},n.prototype.Wa=function(t){var n=!1;this.addEventListener(Td,(function(r){n||(n=!0,t.push(r.feature),n=!1)})),this.addEventListener(Cd,(function(r){n||(n=!0,t.remove(r.feature),n=!1)})),t.addEventListener(ot,function(t){n||(n=!0,this.addFeature(t.element),n=!1)}.bind(this)),t.addEventListener(ut,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)}.bind(this)),this.Ya=t},n.prototype.clear=function(t){if(t){for(var n in this.Va){this.Va[n].forEach($)}this.Ya||(this.Va={},this.Ba={},this.Xa={})}else if(this.Fa){var r=function(t){this.removeFeatureInternal(t)}.bind(this);for(var i in this.Fa.forEach(r),this.qa)this.removeFeatureInternal(this.qa[i])}this.Ya&&this.Ya.clear(),this.Fa&&this.Fa.clear(),this.qa={};var e=new Rd(Ad);this.dispatchEvent(e),this.changed()},n.prototype.forEachFeature=function(t){if(this.Fa)return this.Fa.forEach(t);this.Ya&&this.Ya.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,(function(r){return r.getGeometry().intersectsCoordinate(t)?n(r):void 0}))},n.prototype.forEachFeatureInExtent=function(t,n){if(this.Fa)return this.Fa.forEachInExtent(t,n);this.Ya&&this.Ya.forEach(n)},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,(function(r){if(r.getGeometry().intersectsExtent(t)){var i=n(r);if(i)return i}}))},n.prototype.getFeaturesCollection=function(){return this.Ya},n.prototype.getFeatures=function(){var t;return this.Ya?t=this.Ya.getArray().slice(0):this.Fa&&(t=this.Fa.getAll(),P(this.qa)||b(t,C(this.qa))),t},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){n.push(t)})),n},n.prototype.getFeaturesInExtent=function(t,n){var r=this;if(this.Fa){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.Fa.getInExtent(t);var i=sr(t,n);return[].concat.apply([],i.map((function(t){return r.Fa.getInExtent(t)})))}return this.Ya?this.Ya.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,n){var r=t[0],i=t[1],e=null,o=[NaN,NaN],u=1/0,s=[-1/0,-1/0,1/0,1/0],a=n||O;return this.Fa.forEachInExtent(s,(function(t){if(a(t)){var n=t.getGeometry(),f=u;if((u=n.closestPointXY(r,i,o,u))<f){e=t;var h=Math.sqrt(u);s[0]=r-h,s[1]=i-h,s[2]=r+h,s[3]=i+h}}})),e},n.prototype.getExtent=function(t){return this.Fa.getExtent(t)},n.prototype.getFeatureById=function(t){var n=this.Ba[t.toString()];return void 0!==n?n:null},n.prototype.getFeatureByUid=function(t){var n=this.Xa[t];return void 0!==n?n:null},n.prototype.getFormat=function(){return this.Ge},n.prototype.getOverlaps=function(){return this.Ga},n.prototype.getUrl=function(){return this.Fe},n.prototype.Ka=function(t){var n=t.target,r=o(n),i=n.getGeometry();if(i){var e=i.getExtent();r in this.qa?(delete this.qa[r],this.Fa&&this.Fa.insert(e,n)):this.Fa&&this.Fa.update(e,n)}else r in this.qa||(this.Fa&&this.Fa.remove(n),this.qa[r]=n);var u=n.getId();if(void 0!==u){var s=u.toString();this.Ba[s]!==n&&(this.$a(n),this.Ba[s]=n)}else this.$a(n),this.Xa[r]=n;this.changed(),this.dispatchEvent(new Rd(kd,n))},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.Ba:o(t)in this.Xa},n.prototype.isEmpty=function(){return this.Fa?this.Fa.isEmpty()&&P(this.qa):!this.Ya||0===this.Ya.getLength()},n.prototype.loadFeatures=function(t,n,r){for(var i=this.Da,e=this.za(t,n,r),o=function(t,o){var s=e[t];i.forEachInExtent(s,(function(t){return Mn(t.extent,s)}))||(++u.Ua,u.dispatchEvent(new Rd(Pd)),u.q.call(u,s,n,r,function(t){--this.Ua,this.dispatchEvent(new Rd(Nd,void 0,t))}.bind(u),function(){--this.Ua,this.dispatchEvent(new Rd(Id))}.bind(u)),i.insert(s,{extent:s.slice()}))},u=this,s=0,a=e.length;s<a;++s)o(s);this.loading=!(this.q.length<4)&&this.Ua>0},n.prototype.refresh=function(){this.clear(!0),this.Da.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var n,r=this.Da;r.forEachInExtent(t,(function(r){if(In(r.extent,t))return n=r,!0})),n&&r.remove(n)},n.prototype.removeFeature=function(t){if(t){var n=o(t);n in this.qa?delete this.qa[n]:this.Fa&&this.Fa.remove(t),this.removeFeatureInternal(t)&&this.changed()}},n.prototype.removeFeatureInternal=function(t){var n=o(t),r=this.Va[n];if(r){r.forEach($),delete this.Va[n];var i=t.getId();return void 0!==i&&delete this.Ba[i.toString()],delete this.Xa[n],this.dispatchEvent(new Rd(Cd,t)),t}},n.prototype.$a=function(t){var n=!1;for(var r in this.Ba)if(this.Ba[r]===t){delete this.Ba[r],n=!0;break}return n},n.prototype.setLoader=function(t){this.q=t},n.prototype.setUrl=function(t){Ot(this.Ge,7),this.Fe=t,this.setLoader(ph(t,this.Ge))},n}(cd),zd=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Fd=function(t){function n(n){var r=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return r.resolution=void 0,r.distance=void 0!==n.distance?n.distance:20,r.minDistance=n.minDistance||0,r.interpolationRatio=0,r.features=[],r.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return Ot(n.getType()==Pt.POINT,10),n},r.Ja=n.createCluster,r.source=null,r.Qa=r.refresh.bind(r),r.updateDistance(r.distance,r.minDistance),r.setSource(n.source||null),r}return zd(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n)},n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,n,r){this.source.loadFeatures(t,n,r),n!==this.resolution&&(this.resolution=n,this.refresh())},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},n.prototype.getMinDistance=function(){return this.minDistance},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(L,this.Qa),this.source=t,t&&t.addEventListener(L,this.Qa),this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},n.prototype.updateDistance=function(t,n){var r=0===t?0:Math.min(n,t)/t,i=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=n,this.interpolationRatio=r,i&&this.refresh()},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,r=this.source.getFeatures(),i={},e=0,u=r.length;e<u;e++){var s=r[e];if(!(o(s)in i)){var a=this.geometryFunction(s);if(a){Pn(a.getCoordinates(),t),_n(t,n,t);var f=this.source.getFeaturesInExtent(t).filter((function(t){var n=o(t);return!(n in i)&&(i[n]=!0,!0)}));this.features.push(this.createCluster(f,t))}}}},n.prototype.createCluster=function(t,n){for(var r=[0,0],i=t.length-1;i>=0;--i){var e=this.geometryFunction(t[i]);e?Hr(r,e.getCoordinates()):t.splice(i,1)}ri(r,1/t.length);var o=Yn(n),u=this.interpolationRatio,s=new Te([r[0]*(1-u)+o[0]*u,r[1]*(1-u)+o[1]*u]);return this.Ja?this.Ja(s,t):new Et({geometry:s,features:t})},n}(Gd),Dd=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ud=function(t){function n(n){var r=this,i=void 0===n.projection?"EPSG:3857":n.projection,e=n.tileGrid;if(void 0===e&&i&&(e=Qh({extent:rc(i),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(r=t.call(this,{cacheSize:.1,attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:i,tileGrid:e,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate})||this).Ou=void 0!==n.gutter?n.gutter:0,r.Eo=n.tileSize?aa(n.tileSize):null,!r.Eo&&n.tilePixelRatio&&e){var o=aa(e.getTileSize(0));r.Eo=[o[0]*n.tilePixelRatio,o[1]*n.tilePixelRatio]}return r.Mo=null,r.ga={},r.q=n.loader,r.li=r.li.bind(r),r.bandCount=void 0===n.bandCount?4:n.bandCount,r}return Dd(n,t),n.prototype.setTileSizes=function(t){this.Mo=t},n.prototype.getTileSize=function(t){if(this.Mo)return this.Mo[t];if(this.Eo)return this.Eo;var n=this.getTileGrid();return n?aa(n.getTileSize(t)):[256,256]},n.prototype.getGutterForProjection=function(t){return this.Ou},n.prototype.setLoader=function(t){this.q=t},n.prototype.getTile=function(t,n,r,i,e){var o=this.getTileSize(t),u=Yf(t,n,r);if(this.tileCache.containsKey(u))return this.tileCache.get(u);var s=this.q;var a=k({tileCoord:[t,n,r],loader:function(){return T((function(){return s(t,n,r)}))},size:o},this.tileOptions),f=new jt(a);return f.key=this.getKey(),f.addEventListener(L,this.li),this.tileCache.set(u,f),f},n.prototype.li=function(t){var n,r=t.target,i=o(r),e=r.getState();e==lt?(this.ga[i]=!0,n=ud):i in this.ga&&(delete this.ga[i],n=e==dt?ad:e==vt?sd:void 0),n&&this.dispatchEvent(new dd(n,r))},n}(pd),qd=new ArrayBuffer(4),Bd=new Float32Array(qd),Xd=new Uint32Array(qd),Vd=new Uint32Array(512),Yd=new Uint32Array(512),Wd=0;Wd<256;++Wd){var Zd=Wd-127;Zd<-27?(Vd[Wd]=0,Vd[256|Wd]=32768,Yd[Wd]=24,Yd[256|Wd]=24):Zd<-14?(Vd[Wd]=1024>>-Zd-14,Vd[256|Wd]=1024>>-Zd-14|32768,Yd[Wd]=-Zd-1,Yd[256|Wd]=-Zd-1):Zd<=15?(Vd[Wd]=Zd+15<<10,Vd[256|Wd]=Zd+15<<10|32768,Yd[Wd]=13,Yd[256|Wd]=13):Zd<128?(Vd[Wd]=31744,Vd[256|Wd]=64512,Yd[Wd]=24,Yd[256|Wd]=24):(Vd[Wd]=31744,Vd[256|Wd]=64512,Yd[Wd]=13,Yd[256|Wd]=13)}var Hd=new Uint32Array(2048),Kd=new Uint32Array(64),$d=new Uint32Array(64);Hd[0]=0;for(var Jd=1;Jd<1024;++Jd){for(var Qd=Jd<<13,tp=0;0==(8388608&Qd);)tp-=8388608,Qd<<=1;Qd&=-8388609,tp+=947912704,Hd[Jd]=Qd|tp}for(var np=1024;np<2048;++np)Hd[np]=939524096+(np-1024<<13);Kd[0]=0;for(var rp=1;rp<31;++rp)Kd[rp]=rp<<23;Kd[31]=1199570944,Kd[32]=2147483648;for(var ip=33;ip<63;++ip)Kd[ip]=2147483648+(ip-32<<23);Kd[63]=3347054592,$d[0]=0;for(var ep=1;ep<64;++ep)$d[ep]=32===ep?0:1024;function op(t){var n=t>>10;return Xd[0]=Hd[$d[n]+(1023&t)]+Kd[n],Bd[0]}var up=Reflect.getPrototypeOf(Uint8Array).prototype,sp=Reflect.getOwnPropertyDescriptor(up,Symbol.toStringTag).get;function ap(t){return void 0!==sp.call(t)}var fp=Object.prototype.toString;function hp(t){return!!ArrayBuffer.isView(t)&&(!ap(t)&&"[object DataView]"===fp.call(t))}function cp(t,n){if(!hp(t))throw new TypeError("First argument to getFloat16 function must be a DataView");for(var r=arguments.length,i=new Array(r>2?r-2:0),e=2;e<r;e++)i[e-2]=arguments[e];return op(t.getUint16.apply(t,[n].concat(i)))}var lp=r(802),vp=r(51),dp=r(150);function pp(t,n){for(var r,i=t.width,e=t.height,o=new Uint8Array(i*e*3),u=0,s=0;u<t.length;++u,s+=3)r=256-t[u]/n*256,o[s]=r,o[s+1]=r,o[s+2]=r;return o}function yp(t,n){for(var r,i=t.width,e=t.height,o=new Uint8Array(i*e*3),u=0,s=0;u<t.length;++u,s+=3)r=t[u]/n*256,o[s]=r,o[s+1]=r,o[s+2]=r;return o}function wp(t,n){for(var r=t.width,i=t.height,e=new Uint8Array(r*i*3),o=n.length/3,u=n.length/3*2,s=0,a=0;s<t.length;++s,a+=3){var f=t[s];e[a]=n[f]/65536*256,e[a+1]=n[f+o]/65536*256,e[a+2]=n[f+u]/65536*256}return e}function mp(t){for(var n=t.width,r=t.height,i=new Uint8Array(n*r*3),e=0,o=0;e<t.length;e+=4,o+=3){var u=t[e],s=t[e+1],a=t[e+2],f=t[e+3];i[o]=(255-u)/256*255*((255-f)/256),i[o+1]=(255-s)/256*255*((255-f)/256),i[o+2]=(255-a)/256*255*((255-f)/256)}return i}function bp(t){for(var n=t.width,r=t.height,i=new Uint8ClampedArray(n*r*3),e=0,o=0;e<t.length;e+=3,o+=3){var u=t[e],s=t[e+1],a=t[e+2];i[o]=u+1.402*(a-128),i[o+1]=u-.34414*(s-128)-.71414*(a-128),i[o+2]=u+1.772*(s-128)}return i}function gp(t){for(var n=t.width,r=t.height,i=new Uint8Array(n*r*3),e=0,o=0;e<t.length;e+=3,o+=3){var u=(t[e+0]+16)/116,s=(t[e+1]<<24>>24)/500+u,a=u-(t[e+2]<<24>>24)/200,f=void 0,h=void 0,c=void 0;h=-.9689*(s=.95047*(s*s*s>.008856?s*s*s:(s-16/116)/7.787))+1.8758*(u=1*(u*u*u>.008856?u*u*u:(u-16/116)/7.787))+.0415*(a=1.08883*(a*a*a>.008856?a*a*a:(a-16/116)/7.787)),c=.0557*s+-.204*u+1.057*a,f=(f=3.2406*s+-1.5372*u+-.4986*a)>.0031308?1.055*Math.pow(f,1/2.4)-.055:12.92*f,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:12.92*c,i[o]=255*Math.max(0,Math.min(1,f)),i[o+1]=255*Math.max(0,Math.min(1,h)),i[o+2]=255*Math.max(0,Math.min(1,c))}return i}function xp(t){return(xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _p(){_p=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==xp(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function jp(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function Op(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){jp(o,i,e,u,s,"next",t)}function s(t){jp(o,i,e,u,s,"throw",t)}u(void 0)}))}}var Sp=new Map;function Mp(t,n){Array.isArray(t)||(t=[t]),t.forEach((function(t){return Sp.set(t,n)}))}function Ep(t){return Tp.apply(this,arguments)}function Tp(){return(Tp=Op(_p().mark((function t(n){var r,i;return _p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Sp.get(n.Compression)){t.next=3;break}throw new Error("Unknown compression method identifier: ".concat(n.Compression));case 3:return t.next=5,r();case 5:return i=t.sent,t.abrupt("return",new i(n));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kp(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(t).constructor)(n*r*i)}function Ap(t,n,r,i,e){var o=n/i,u=r/e;return t.map((function(t){for(var s=kp(t,i,e),a=0;a<e;++a)for(var f=Math.min(Math.round(u*a),r-1),h=0;h<i;++h){var c=Math.min(Math.round(o*h),n-1),l=t[f*n+c];s[a*i+h]=l}return s}))}function Cp(t,n,r){return(1-r)*t+r*n}function Pp(t,n,r,i,e){var o=n/i,u=r/e;return t.map((function(t){for(var s=kp(t,i,e),a=0;a<e;++a)for(var f=u*a,h=Math.floor(f),c=Math.min(Math.ceil(f),r-1),l=0;l<i;++l){var v=o*l,d=v%1,p=Math.floor(v),y=Math.min(Math.ceil(v),n-1),w=t[h*n+p],m=t[h*n+y],b=t[c*n+p],g=t[c*n+y],x=Cp(Cp(w,m,d),Cp(b,g,d),f%1);s[a*i+l]=x}return s}))}function Np(t,n,r,i,e){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(o.toLowerCase()){case"nearest":return Ap(t,n,r,i,e);case"bilinear":case"linear":return Pp(t,n,r,i,e);default:throw new Error("Unsupported resampling method: '".concat(o,"'"))}}function Ip(t,n,r,i,e,o){for(var u=n/i,s=r/e,a=kp(t,i,e,o),f=0;f<e;++f)for(var h=Math.min(Math.round(s*f),r-1),c=0;c<i;++c)for(var l=Math.min(Math.round(u*c),n-1),v=0;v<o;++v){var d=t[h*n*o+l*o+v];a[f*i*o+c*o+v]=d}return a}function Lp(t,n,r,i,e,o){for(var u=n/i,s=r/e,a=kp(t,i,e,o),f=0;f<e;++f)for(var h=s*f,c=Math.floor(h),l=Math.min(Math.ceil(h),r-1),v=0;v<i;++v)for(var d=u*v,p=d%1,y=Math.floor(d),w=Math.min(Math.ceil(d),n-1),m=0;m<o;++m){var b=t[c*n*o+y*o+m],g=t[c*n*o+w*o+m],x=t[l*n*o+y*o+m],_=t[l*n*o+w*o+m],j=Cp(Cp(b,g,p),Cp(x,_,p),h%1);a[f*i*o+v*o+m]=j}return a}function Rp(t,n,r,i,e,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(u.toLowerCase()){case"nearest":return Ip(t,n,r,i,e,o);case"bilinear":case"linear":return Lp(t,n,r,i,e,o);default:throw new Error("Unsupported resampling method: '".concat(u,"'"))}}function Gp(t){return(Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zp(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,e,o=[],u=!0,s=!1;try{for(r=r.call(t);!(u=(i=r.next()).done)&&(o.push(i.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==r.return||r.return()}finally{if(s)throw e}}return o}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return Fp(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fp(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fp(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function Dp(){Dp=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==Gp(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function Up(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function qp(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){Up(o,i,e,u,s,"next",t)}function s(t){Up(o,i,e,u,s,"throw",t)}u(void 0)}))}}function Bp(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xp(t,n,r){for(var i=0,e=n;e<r;++e)i+=t[e];return i}function Vp(t,n,r){switch(t){case 1:if(n<=8)return new Uint8Array(r);if(n<=16)return new Uint16Array(r);if(n<=32)return new Uint32Array(r);break;case 2:if(8===n)return new Int8Array(r);if(16===n)return new Int16Array(r);if(32===n)return new Int32Array(r);break;case 3:switch(n){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}function Yp(t,n){return(1!==t&&2!==t||!(n<=32)||n%8!=0)&&(3!==t||16!==n&&32!==n&&64!==n)}function Wp(t,n,r,i,e,o,u){var s=new DataView(t),a=2===r?1:i,f=Vp(n,e,2===r?u*o:u*o*i),h=parseInt("1".repeat(e),2);if(1===n){var c=o*(1===r?i*e:e);0!=(7&c)&&(c=c+7&-8);for(var l=0;l<u;++l)for(var v=l*c,d=0;d<o;++d)for(var p=v+d*a*e,y=0;y<a;++y){var w=p+y*e,m=(l*o+d)*a+y,b=Math.floor(w/8),g=w%8;if(g+e<=8)f[m]=s.getUint8(b)>>8-e-g&h;else if(g+e<=16)f[m]=s.getUint16(b)>>16-e-g&h;else if(g+e<=24){var x=s.getUint16(b)<<8|s.getUint8(b+2);f[m]=x>>24-e-g&h}else f[m]=s.getUint32(b)>>32-e-g&h}}return f.buffer}Mp([void 0,1],(function(){return r.e(226).then(r.bind(r,966)).then((function(t){return t.default}))})),Mp(5,(function(){return r.e(611).then(r.bind(r,611)).then((function(t){return t.default}))})),Mp(6,(function(){throw new Error("old style JPEG compression is not supported.")})),Mp(7,(function(){return r.e(382).then(r.bind(r,382)).then((function(t){return t.default}))})),Mp([8,32946],(function(){return Promise.all([r.e(247),r.e(356)]).then(r.bind(r,356)).then((function(t){return t.default}))})),Mp(32773,(function(){return r.e(395).then(r.bind(r,395)).then((function(t){return t.default}))})),Mp(34887,(function(){return Promise.all([r.e(247),r.e(54)]).then(r.bind(r,54)).then((function(t){return t.default}))})),Mp(50001,(function(){return r.e(629).then(r.bind(r,629)).then((function(t){return t.default}))}));var Zp=function(){function t(n,r,i,e,o,u){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileDirectory=n,this.geoKeys=r,this.dataView=i,this.littleEndian=e,this.tiles=o?{}:null,this.isTiled=!n.StripOffsets;var s=n.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=u}var n,r,i,e,o,u,s;return n=t,(r=[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var t=0,n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}},{key:"getSampleByteSize",value:function(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(t," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}},{key:"getReaderForSample",value:function(t){var n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(t,n){return cp(this,t,n)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}},{key:"getBitsPerSample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[t]}},{key:"getArrayForSample",value:function(t,n){return Vp(this.getSampleFormat(t),this.getBitsPerSample(t),n)}},{key:"getTileOrStrip",value:(s=qp(Dp().mark((function t(n,r,i,e,o){var u,s,a,f,h,c,l,v,d=this;return Dp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight()),f=this.tiles,1===this.planarConfiguration?a=r*u+n:2===this.planarConfiguration&&(a=i*u*s+r*u+n),this.isTiled?(h=this.fileDirectory.TileOffsets[a],c=this.fileDirectory.TileByteCounts[a]):(h=this.fileDirectory.StripOffsets[a],c=this.fileDirectory.StripByteCounts[a]),t.next=7,this.source.fetch([{offset:h,length:c}],o);case 7:return l=t.sent[0],null!==f&&f[a]?v=f[a]:(v=qp(Dp().mark((function t(){var n,i,o;return Dp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.decode(d.fileDirectory,l);case 2:return n=t.sent,i=d.getSampleFormat(),o=d.getBitsPerSample(),Yp(i,o)&&(n=Wp(n,i,d.planarConfiguration,d.getSamplesPerPixel(),o,d.getTileWidth(),d.getBlockHeight(r))),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))(),null!==f&&(f[a]=v)),t.t0=n,t.t1=r,t.t2=i,t.next=14,v;case 14:return t.t3=t.sent,t.abrupt("return",{x:t.t0,y:t.t1,sample:t.t2,data:t.t3});case 16:case"end":return t.stop()}}),t,this)}))),function(t,n,r,i,e){return s.apply(this,arguments)})},{key:"_readRaster",value:(u=qp(Dp().mark((function t(n,r,i,e,o,u,s,a,f){var h,c,l,v,d,p,y,w,m,b,g,x,_,j,O,S,M,E,T,k,A=this;return Dp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(h=this.getTileWidth(),c=this.getTileHeight(),l=this.getWidth(),v=this.getHeight(),d=Math.max(Math.floor(n[0]/h),0),p=Math.min(Math.ceil(n[2]/h),Math.ceil(l/h)),y=Math.max(Math.floor(n[1]/c),0),w=Math.min(Math.ceil(n[3]/c),Math.ceil(v/c)),m=n[2]-n[0],b=this.getBytesPerPixel(),g=[],x=[],_=0;_<r.length;++_)1===this.planarConfiguration?g.push(Xp(this.fileDirectory.BitsPerSample,0,r[_])/8):g.push(0),x.push(this.getReaderForSample(r[_]));for(j=[],O=this.littleEndian,S=y;S<w;++S)for(M=d;M<p;++M)for(E=function(t){var u=t,s=r[t];2===A.planarConfiguration&&(b=A.getSampleByteSize(t));var a=A.getTileOrStrip(M,S,s,o,f);j.push(a),a.then((function(t){for(var o=t.data,s=new DataView(o),a=A.getBlockHeight(t.y),f=t.y*c,d=t.x*h,p=f+a,y=(t.x+1)*h,w=x[u],_=Math.min(a,a-(p-n[3]),v-f),j=Math.min(h,h-(y-n[2]),l-d),S=Math.max(0,n[1]-f);S<_;++S)for(var M=Math.max(0,n[0]-d);M<j;++M){var E=(S*h+M)*b,T=w.call(s,E+g[u],O),k=void 0;e?(k=(S+f-n[1])*m*r.length+(M+d-n[0])*r.length+u,i[k]=T):(k=(S+f-n[1])*m+M+d-n[0],i[u][k]=T)}}))},T=0;T<r.length;++T)E(T);return t.next=18,Promise.all(j);case 18:if(!(u&&n[2]-n[0]!==u||s&&n[3]-n[1]!==s)){t.next=23;break}return(k=e?Rp(i,n[2]-n[0],n[3]-n[1],u,s,r.length,a):Np(i,n[2]-n[0],n[3]-n[1],u,s,a)).width=u,k.height=s,t.abrupt("return",k);case 23:return i.width=u||n[2]-n[0],i.height=s||n[3]-n[1],t.abrupt("return",i);case 26:case"end":return t.stop()}}),t,this)}))),function(t,n,r,i,e,o,s,a,f){return u.apply(this,arguments)})},{key:"readRasters",value:(o=qp(Dp().mark((function t(){var n,r,i,e,o,u,s,a,f,h,c,l,v,d,p,y,w,m,b,g,x,_,j,O,S,M,E=arguments;return Dp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=E.length>0&&void 0!==E[0]?E[0]:{},r=n.window,i=n.samples,e=void 0===i?[]:i,o=n.interleave,u=n.pool,s=void 0===u?null:u,a=n.width,f=n.height,h=n.resampleMethod,c=n.fillValue,l=n.signal,!((v=r||[0,0,this.getWidth(),this.getHeight()])[0]>v[2]||v[1]>v[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if(d=v[2]-v[0],p=v[3]-v[1],y=d*p,w=this.getSamplesPerPixel(),e&&e.length){t.next=12;break}for(m=0;m<w;++m)e.push(m);t.next=19;break;case 12:b=0;case 13:if(!(b<e.length)){t.next=19;break}if(!(e[b]>=w)){t.next=16;break}return t.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(e[b],"'."))));case 16:++b,t.next=13;break;case 19:if(o)x=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,_=Math.max.apply(null,this.fileDirectory.BitsPerSample),g=Vp(x,_,y*e.length),c&&g.fill(c);else for(g=[],j=0;j<e.length;++j)O=this.getArrayForSample(e[j],y),Array.isArray(c)&&j<c.length?O.fill(c[j]):c&&!Array.isArray(c)&&O.fill(c),g.push(O);if(t.t0=s,t.t0){t.next=25;break}return t.next=24,Ep(this.fileDirectory);case 24:t.t0=t.sent;case 25:return S=t.t0,t.next=28,this._readRaster(v,e,g,o,S,a,f,h,l);case 28:return M=t.sent,t.abrupt("return",M);case 30:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"readRGB",value:(e=qp(Dp().mark((function t(){var n,r,i,e,o,u,s,a,f,h,c,l,v,d,p,y,w,m,b,g,x,_,j,O,S,M,E=arguments;return Dp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=E.length>0&&void 0!==E[0]?E[0]:{},r=n.window,i=n.interleave,e=void 0===i||i,o=n.pool,u=void 0===o?null:o,s=n.width,a=n.height,f=n.resampleMethod,h=n.enableAlpha,c=void 0!==h&&h,l=n.signal,!((v=r||[0,0,this.getWidth(),this.getHeight()])[0]>v[2]||v[1]>v[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if((d=this.fileDirectory.PhotometricInterpretation)!==dp.Ie.RGB){t.next=9;break}if(p=[0,1,2],this.fileDirectory.ExtraSamples!==dp.pd.Unspecified&&c)for(p=[],y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)p.push(y);return t.abrupt("return",this.readRasters({window:r,interleave:e,samples:p,pool:u,width:s,height:a,resampleMethod:f,signal:l}));case 9:t.t0=d,t.next=t.t0===dp.Ie.WhiteIsZero||t.t0===dp.Ie.BlackIsZero||t.t0===dp.Ie.Palette?12:t.t0===dp.Ie.CMYK?14:t.t0===dp.Ie.YCbCr||t.t0===dp.Ie.CIELab?16:18;break;case 12:return w=[0],t.abrupt("break",19);case 14:return w=[0,1,2,3],t.abrupt("break",19);case 16:return w=[0,1,2],t.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return m={window:v,interleave:!0,samples:w,pool:u,width:s,height:a,resampleMethod:f,signal:l},b=this.fileDirectory,t.next=23,this.readRasters(m);case 23:g=t.sent,x=Math.pow(2,this.fileDirectory.BitsPerSample[0]),t.t1=d,t.next=t.t1===dp.Ie.WhiteIsZero?28:t.t1===dp.Ie.BlackIsZero?30:t.t1===dp.Ie.Palette?32:t.t1===dp.Ie.CMYK?34:t.t1===dp.Ie.YCbCr?36:t.t1===dp.Ie.CIELab?38:40;break;case 28:return _=pp(g,x),t.abrupt("break",41);case 30:return _=yp(g,x),t.abrupt("break",41);case 32:return _=wp(g,b.ColorMap),t.abrupt("break",41);case 34:return _=mp(g),t.abrupt("break",41);case 36:return _=bp(g),t.abrupt("break",41);case 38:return _=gp(g),t.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!e){for(j=new Uint8Array(_.length/3),O=new Uint8Array(_.length/3),S=new Uint8Array(_.length/3),y=0,M=0;y<_.length;y+=3,++M)j[M]=_[y],O[M]=_[y+1],S[M]=_[y+2];_=[j,O,S]}return _.width=g.width,_.height=g.height,t.abrupt("return",_);case 45:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var t=[],n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}},{key:"getGDALMetadata",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n={};if(!this.fileDirectory.GDAL_METADATA)return null;var r=this.fileDirectory.GDAL_METADATA,i=vp(r,"Item");i=null===t?i.filter((function(t){return void 0===lp(t,"sample")})):i.filter((function(n){return Number(lp(n,"sample"))===t}));for(var e=0;e<i.length;++e){var o=i[e];n[lp(o,"name")]=o.inner}return n}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}},{key:"getOrigin",value:function(){var t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(r)return[r[0],r[5],r[10]];if(t){var i=t.getResolution(),e=zp(i,3),o=e[0],u=e[1],s=e[2];return[o*t.getWidth()/this.getWidth(),u*t.getHeight()/this.getHeight(),s*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var t=this.getOrigin(),n=this.getResolution(),r=t[0],i=t[1],e=r+n[0]*this.getWidth(),o=i+n[1]*this.getHeight();return[Math.min(r,e),Math.min(i,o),Math.max(r,e),Math.max(i,o)]}}])&&Bp(n.prototype,r),i&&Bp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}();function Hp(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Kp=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataView=new DataView(n)}var n,r,i;return n=t,(r=[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(t,n){var r,i=this.getUint32(t,n),e=this.getUint32(t+4,n);if(n){if(r=i+Math.pow(2,32)*e,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}if(r=Math.pow(2,32)*i+e,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}},{key:"getInt64",value:function(t,n){for(var r=0,i=(128&this._dataView.getUint8(t+(n?7:0)))>0,e=!0,o=0;o<8;o++){var u=this._dataView.getUint8(t+(n?o:7-o));i&&(e?0!==u&&(u=255&~(u-1),e=!1):u=255&~u),r+=u*Math.pow(256,o)}return i&&(r=-r),r}},{key:"getUint8",value:function(t,n){return this._dataView.getUint8(t,n)}},{key:"getInt8",value:function(t,n){return this._dataView.getInt8(t,n)}},{key:"getUint16",value:function(t,n){return this._dataView.getUint16(t,n)}},{key:"getInt16",value:function(t,n){return this._dataView.getInt16(t,n)}},{key:"getUint32",value:function(t,n){return this._dataView.getUint32(t,n)}},{key:"getInt32",value:function(t,n){return this._dataView.getInt32(t,n)}},{key:"getFloat16",value:function(t,n){return cp(this._dataView,t,n)}},{key:"getFloat32",value:function(t,n){return this._dataView.getFloat32(t,n)}},{key:"getFloat64",value:function(t,n){return this._dataView.getFloat64(t,n)}}])&&Hp(n.prototype,r),i&&Hp(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}();function $p(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Jp=function(){function t(n,r,i,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataView=new DataView(n),this._sliceOffset=r,this._littleEndian=i,this._bigTiff=e}var n,r,i;return n=t,(r=[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}},{key:"readUint8",value:function(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(t){var n,r=this.readUint32(t),i=this.readUint32(t+4);if(this._littleEndian){if(n=r+Math.pow(2,32)*i,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}if(n=Math.pow(2,32)*r+i,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}},{key:"readInt64",value:function(t){for(var n=0,r=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0,i=!0,e=0;e<8;e++){var o=this._dataView.getUint8(t+(this._littleEndian?e:7-e));r&&(i?0!==o&&(o=255&~(o-1),i=!1):o=255&~o),n+=o*Math.pow(256,e)}return r&&(n=-n),n}},{key:"readOffset",value:function(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}])&&$p(n.prototype,r),i&&$p(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}();function Qp(t){return ry(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||iy(t)||ny()}function ty(t,n){return ry(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,e,o=[],u=!0,s=!1;try{for(r=r.call(t);!(u=(i=r.next()).done)&&(o.push(i.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==r.return||r.return()}finally{if(s)throw e}}return o}(t,n)||iy(t,n)||ny()}function ny(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ry(t){if(Array.isArray(t))return t}function iy(t,n){if(t){if("string"==typeof t)return ey(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ey(t,n):void 0}}function ey(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}var oy="\r\n\r\n";function uy(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);var n,r={},i=function(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=iy(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{for(i.s();!(n=i.n()).done;){var e=ty(n.value,2),o=e[0],u=e[1];r[o.toLowerCase()]=u}}catch(t){i.e(t)}finally{i.f()}return r}function sy(t){return uy(t.split("\r\n").map((function(t){var n=t.split(":").map((function(t){return t.trim()}));return n[0]=n[0].toLowerCase(),n})))}function ay(t){var n,r,i;if(t){var e=ty(t.match(/bytes (\d+)-(\d+)\/(\d+)/),4);n=e[1],r=e[2],i=e[3],n=parseInt(n,10),r=parseInt(r,10),i=parseInt(i,10)}return{start:n,end:r,total:i}}function fy(t,n){for(var r=null,i=new TextDecoder("ascii"),e=[],o="--".concat(n),u="".concat(o,"--"),s=0;s<10;++s){i.decode(new Uint8Array(t,s,o.length))===o&&(r=s)}if(null===r)throw new Error("Could not find initial boundary");for(;r<t.byteLength;){var a=i.decode(new Uint8Array(t,r,Math.min(o.length+1024,t.byteLength-r)));if(0===a.length||a.startsWith(u))break;if(!a.startsWith(o))throw new Error("Part does not start with boundary");var f=a.substr(o.length+2);if(0===f.length)break;var h=f.indexOf(oy),c=sy(f.substr(0,h)),l=ay(c["content-range"]),v=l.start,d=l.end,p=l.total,y=r+o.length+h+oy.length,w=parseInt(d,10)+1-parseInt(v,10);e.push({headers:c,data:t.slice(y,y+w),offset:v,length:w,fileSize:p}),r=y+w+4}return e}function hy(t){return(hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cy(){cy=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==hy(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function ly(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function vy(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){ly(o,i,e,u,s,"next",t)}function s(t){ly(o,i,e,u,s,"throw",t)}u(void 0)}))}}function dy(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var py=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i,e,o,u;return n=t,(r=[{key:"fetch",value:(u=vy(cy().mark((function t(n){var r,i=this,e=arguments;return cy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:void 0,t.abrupt("return",Promise.all(n.map((function(t){return i.fetchSlice(t,r)}))));case 2:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})},{key:"fetchSlice",value:(o=vy(cy().mark((function t(n){return cy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("fetching of slice ".concat(n," not possible, not implemented"));case 1:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"fileSize",get:function(){return null}},{key:"close",value:(e=vy(cy().mark((function t(){return cy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}])&&dy(n.prototype,r),i&&dy(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(),yy=r(875);function wy(t){return(wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function my(){my=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==wy(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function by(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gy(t,n,r){return n&&by(t.prototype,n),r&&by(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xy(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _y(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&ky(t,n)}function jy(t){var n=Ty();return function(){var r,i=Ay(t);if(n){var e=Ay(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return Oy(this,r)}}function Oy(t,n){if(n&&("object"===wy(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Sy(t)}function Sy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function My(t){var n="function"==typeof Map?new Map:void 0;return(My=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,i)}function i(){return Ey(t,arguments,Ay(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ky(i,t)})(t)}function Ey(t,n,r){return(Ey=Ty()?Reflect.construct.bind():function(t,n,r){var i=[null];i.push.apply(i,n);var e=new(Function.bind.apply(t,i));return r&&ky(e,r.prototype),e}).apply(null,arguments)}function Ty(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ky(t,n){return(ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function Ay(t){return(Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cy(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function Py(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){Cy(o,i,e,u,s,"next",t)}function s(t){Cy(o,i,e,u,s,"throw",t)}u(void 0)}))}}function Ny(t){return Iy.apply(this,arguments)}function Iy(){return(Iy=Py(my().mark((function t(n){return my().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,n)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ly(t,n){var r=Array.isArray(t)?t:Array.from(t),i=Array.isArray(n)?n:Array.from(n);return r.map((function(t,n){return[t,i[n]]}))}var Ry=function(t){_y(r,t);var n=jy(r);function r(t){var i;return xy(this,r),i=n.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(Sy(i),r),i.name="AbortError",i}return gy(r)}(My(Error)),Gy=function(t){_y(r,t);var n=jy(r);function r(t,i){var e;return xy(this,r),(e=n.call(this,i)).errors=t,e.message=i,e.name="AggregateError",e}return gy(r)}(My(Error));function zy(t){return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fy(){Fy=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==zy(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function Dy(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,e,o=[],u=!0,s=!1;try{for(r=r.call(t);!(u=(i=r.next()).done)&&(o.push(i.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==r.return||r.return()}finally{if(s)throw e}}return o}(t,n)||qy(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uy(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=qy(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){s=!0,o=t},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw o}}}}function qy(t,n){if(t){if("string"==typeof t)return By(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?By(t,n):void 0}}function By(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function Xy(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function Vy(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){Xy(o,i,e,u,s,"next",t)}function s(t){Xy(o,i,e,u,s,"throw",t)}u(void 0)}))}}function Yy(t,n){return(Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function Wy(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=Hy(t);if(n){var e=Hy(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return Zy(this,r)}}function Zy(t,n){if(n&&("object"===zy(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Hy(t){return(Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ky(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function $y(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Jy(t,n,r){return n&&$y(t.prototype,n),r&&$y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Qy=function(){function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Ky(this,t),this.offset=n,this.length=r,this.data=i}return Jy(t,[{key:"top",get:function(){return this.offset+this.length}}]),t}(),tw=Jy((function t(n,r,i){Ky(this,t),this.offset=n,this.length=r,this.blockIds=i})),nw=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Yy(t,n)}(i,t);var n,r=Wy(i);function i(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.blockSize,u=void 0===o?65536:o,s=e.cacheSize,a=void 0===s?100:s;return Ky(this,i),(n=r.call(this)).source=t,n.blockSize=u,n.blockCache=new yy({max:a}),n.blockRequests=new Map,n.blockIdsToFetch=new Set,n}return Jy(i,[{key:"fileSize",get:function(){return this.source.fileSize}},{key:"fetch",value:(n=Vy(Fy().mark((function t(n,r){var i,e,o,u,s,a,f,h,c,l,v,d,p,y,w,m,b,g,x,_,j,O,S,M,E,T,k,A,C,P,N,I,L,R,G,z,F,D;return Fy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=new Map,e=new Map,o=new Set,u=Uy(n);try{for(u.s();!(s=u.n()).done;)for(a=s.value,f=a.offset,h=a.length,c=f+h,null!==(l=this.fileSize)&&(c=Math.min(c,l)),v=Math.floor(f/this.blockSize)*this.blockSize,d=v;d<c;d+=this.blockSize)p=Math.floor(d/this.blockSize),this.blockCache.has(p)?i.set(p,this.blockCache.get(p)):this.blockRequests.has(p)?e.set(p,this.blockRequests.get(p)):(this.blockIdsToFetch.has(p)||this.blockIdsToFetch.add(p),o.add(p))}catch(t){u.e(t)}finally{u.f()}return t.next=7,Ny();case 7:this.fetchBlocks(r),y=Uy(o),t.prev=9,y.s();case 11:if((w=y.n()).done){t.next=26;break}if(m=w.value,b=this.blockRequests.get(m),g=this.blockCache.get(m),!b){t.next=19;break}e.set(m,b),t.next=24;break;case 19:if(!g){t.next=23;break}i.set(m,g),t.next=24;break;case 23:throw new Error("Block ".concat(m," is not in the block requests"));case 24:t.next=11;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(9),y.e(t.t0);case 31:return t.prev=31,y.f(),t.finish(31);case 34:return t.next=36,Promise.allSettled(Array.from(e.values()));case 36:if(!(x=t.sent).some((function(t){return"rejected"===t.status}))){t.next=65;break}_=new Set,j=Uy(Ly(e.keys(),x));try{for(j.s();!(O=j.n()).done;)S=Dy(O.value,2),M=S[0],E=S[1],T=E.rejected,k=E.reason,T&&"AbortError"===k.name&&k.signal!==r&&(this.blockIdsToFetch.add(M),_.add(M))}catch(t){j.e(t)}finally{j.f()}if(!(this.blockIdsToFetch.length>0)){t.next=65;break}this.fetchBlocks(r),A=Uy(_),t.prev=44,A.s();case 46:if((C=A.n()).done){t.next=54;break}if(P=C.value,N=this.blockRequests.get(P)){t.next=51;break}throw new Error("Block ".concat(P," is not in the block requests"));case 51:e.set(P,N);case 52:t.next=46;break;case 54:t.next=59;break;case 56:t.prev=56,t.t1=t.catch(44),A.e(t.t1);case 59:return t.prev=59,A.f(),t.finish(59);case 62:return t.next=64,Promise.allSettled(Array.from(e.values()));case 64:x=t.sent;case 65:if(!x.some((function(t){return"rejected"===t.status}))){t.next=69;break}if(!r||!r.aborted){t.next=68;break}throw new Ry("Request was aborted");case 68:throw new Gy(x.filter((function(t){return"rejected"===t.status})).map((function(t){return t.reason})),"Request failed");case 69:I=x.map((function(t){return t.value})),L=new Map(Ly(Array.from(e.keys()),I)),R=Uy(i);try{for(R.s();!(G=R.n()).done;)z=Dy(G.value,2),F=z[0],D=z[1],L.set(F,D)}catch(t){R.e(t)}finally{R.f()}return t.abrupt("return",this.readSliceData(n,L));case 74:case"end":return t.stop()}}),t,this,[[9,28,31,34],[44,56,59,62]])}))),function(t,r){return n.apply(this,arguments)})},{key:"fetchBlocks",value:function(t){var n=this;this.blockIdsToFetch.size>0&&function(){for(var r=n.groupBlocks(n.blockIdsToFetch),i=n.source.fetch(r,t),e=function(e){var o,u=Uy(r[e].blockIds);try{var s=function(){var r=o.value,u=Vy(Fy().mark((function o(){var u,s,a,f,h,c;return Fy().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,i;case 3:return o.t0=e,u=o.sent[o.t0],s=r*n.blockSize,a=s-u.offset,f=Math.min(a+n.blockSize,u.data.byteLength),h=u.data.slice(a,f),c=new Qy(s,h.byteLength,h),n.blockCache.set(r,c),o.abrupt("return",c);case 14:throw o.prev=14,o.t1=o.catch(0),"AbortError"===o.t1.name&&(o.t1.signal=t),o.t1;case 18:return o.prev=18,n.blockRequests.delete(r),o.finish(18);case 21:case"end":return o.stop()}}),o,null,[[0,14,18,21]])})))();n.blockRequests.set(r,u)};for(u.s();!(o=u.n()).done;)s()}catch(t){u.e(t)}finally{u.f()}},o=0;o<r.length;++o)e(o);n.blockIdsToFetch.clear()}()}},{key:"groupBlocks",value:function(t){var n=Array.from(t).sort((function(t,n){return t-n}));if(0===n.length)return[];var r,i=[],e=null,o=[],u=Uy(n);try{for(u.s();!(r=u.n()).done;){var s=r.value;null===e||e+1===s?(i.push(s),e=s):(o.push(new tw(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[s],e=s)}}catch(t){u.e(t)}finally{u.f()}return o.push(new tw(i[0]*this.blockSize,i.length*this.blockSize,i)),o}},{key:"readSliceData",value:function(t,n){var r=this;return t.map((function(t){for(var i=t.offset+t.length,e=Math.floor(t.offset/r.blockSize),o=Math.floor((t.offset+t.length)/r.blockSize),u=new ArrayBuffer(t.length),s=new Uint8Array(u),a=e;a<=o;++a){var f=n.get(a),h=f.offset-t.offset,c=0,l=0,v=void 0;h<0?c=-h:h>0&&(l=h),v=f.top-i<0?f.length-c:i-f.offset-c;var d=new Uint8Array(f.data,c,v);s.set(d,l)}return u}))}}]),i}(py);function rw(t){return(rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iw(){iw=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==rw(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function ew(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function ow(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){ew(o,i,e,u,s,"next",t)}function s(t){ew(o,i,e,u,s,"throw",t)}u(void 0)}))}}function uw(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function sw(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function aw(t,n,r){return n&&sw(t.prototype,n),r&&sw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var fw=function(){function t(){uw(this,t)}var n;return aw(t,[{key:"ok",get:function(){return this.status>=200&&this.status<=299}},{key:"status",get:function(){throw new Error("not implemented")}},{key:"getHeader",value:function(t){throw new Error("not implemented")}},{key:"getData",value:(n=ow(iw().mark((function t(){return iw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("not implemented");case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}]),t}(),hw=function(){function t(n){uw(this,t),this.url=n}var n;return aw(t,[{key:"request",value:(n=ow(iw().mark((function t(){var n,r=arguments;return iw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw(n=r.length>0&&void 0!==r[0]?r[0]:{}).headers,n.credentials,n.signal,new Error("request is not implemented");case 2:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}]),t}();function cw(t){return(cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lw(){lw=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==cw(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function vw(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function dw(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){vw(o,i,e,u,s,"next",t)}function s(t){vw(o,i,e,u,s,"throw",t)}u(void 0)}))}}function pw(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function yw(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ww(t,n,r){return n&&yw(t.prototype,n),r&&yw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mw(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&bw(t,n)}function bw(t,n){return(bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function gw(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=_w(t);if(n){var e=_w(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return xw(this,r)}}function xw(t,n){if(n&&("object"===cw(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _w(t){return(_w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jw=function(t){mw(i,t);var n,r=gw(i);function i(t){var n;return pw(this,i),(n=r.call(this)).response=t,n}return ww(i,[{key:"status",get:function(){return this.response.status}},{key:"getHeader",value:function(t){return this.response.headers.get(t)}},{key:"getData",value:(n=dw(lw().mark((function t(){var n;return lw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.response.arrayBuffer){t.next=6;break}return t.next=3,this.response.arrayBuffer();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.response.buffer();case 8:t.t0=t.sent.buffer;case 9:return n=t.t0,t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),i}(fw),Ow=function(t){mw(i,t);var n,r=gw(i);function i(t,n){var e;return pw(this,i),(e=r.call(this,t)).credentials=n,e}return ww(i,[{key:"request",value:(n=dw(lw().mark((function t(){var n,r,i,e,o,u=arguments;return lw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:{},r=n.headers,i=n.credentials,e=n.signal,t.next=3,fetch(this.url,{headers:r,credentials:i,signal:e});case 3:return o=t.sent,t.abrupt("return",new jw(o));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),i}(hw);function Sw(t){return(Sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mw(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,e,o=[],u=!0,s=!1;try{for(r=r.call(t);!(u=(i=r.next()).done)&&(o.push(i.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==r.return||r.return()}finally{if(s)throw e}}return o}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return Ew(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ew(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ew(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function Tw(){Tw=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==Sw(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function kw(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function Aw(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){kw(o,i,e,u,s,"next",t)}function s(t){kw(o,i,e,u,s,"throw",t)}u(void 0)}))}}function Cw(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Pw(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nw(t,n,r){return n&&Pw(t.prototype,n),r&&Pw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Iw(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Lw(t,n)}function Lw(t,n){return(Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function Rw(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=zw(t);if(n){var e=zw(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return Gw(this,r)}}function Gw(t,n){if(n&&("object"===Sw(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zw(t){return(zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fw=function(t){Iw(i,t);var n,r=Rw(i);function i(t,n){var e;return Cw(this,i),(e=r.call(this)).xhr=t,e.data=n,e}return Nw(i,[{key:"status",get:function(){return this.xhr.status}},{key:"getHeader",value:function(t){return this.xhr.getResponseHeader(t)}},{key:"getData",value:(n=Aw(Tw().mark((function t(){return Tw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.data);case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),i}(fw),Dw=function(t){Iw(i,t);var n,r=Rw(i);function i(){return Cw(this,i),r.apply(this,arguments)}return Nw(i,[{key:"constructRequest",value:function(t,n){var r=this;return new Promise((function(i,e){var o=new XMLHttpRequest;o.open("GET",r.url),o.responseType="arraybuffer";for(var u=0,s=Object.entries(t);u<s.length;u++){var a=Mw(s[u],2),f=a[0],h=a[1];o.setRequestHeader(f,h)}o.onload=function(){var t=o.response;i(new Fw(o,t))},o.onerror=e,o.onabort=function(){return e(new Ry("Request aborted"))},o.send(),n&&(n.aborted&&o.abort(),n.addEventListener("abort",(function(){return o.abort()})))}))}},{key:"request",value:(n=Aw(Tw().mark((function t(){var n,r,i,e,o=arguments;return Tw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},r=n.headers,i=n.signal,t.next=3,this.constructRequest(r,i);case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),i}(hw),Uw=r(752),qw=r(640),Bw=r(630);function Xw(t){return(Xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vw(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,i)}return r}function Yw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Vw(Object(r),!0).forEach((function(n){Ww(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vw(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function Ww(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Zw(){Zw=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==Xw(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function Hw(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function Kw(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){Hw(o,i,e,u,s,"next",t)}function s(t){Hw(o,i,e,u,s,"throw",t)}u(void 0)}))}}function $w(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Jw(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qw(t,n,r){return n&&Jw(t.prototype,n),r&&Jw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function tm(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&nm(t,n)}function nm(t,n){return(nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function rm(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=em(t);if(n){var e=em(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return im(this,r)}}function im(t,n){if(n&&("object"===Xw(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function em(t){return(em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var om=function(t){tm(i,t);var n,r=rm(i);function i(t,n){var e;return $w(this,i),(e=r.call(this)).response=t,e.dataPromise=n,e}return Qw(i,[{key:"status",get:function(){return this.response.statusCode}},{key:"getHeader",value:function(t){return this.response.headers[t]}},{key:"getData",value:(n=Kw(Zw().mark((function t(){var n;return Zw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dataPromise;case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),i}(fw),um=function(t){tm(i,t);var n,r=rm(i);function i(t){var n;return $w(this,i),(n=r.call(this,t)).parsedUrl=Bw.parse(n.url),n.httpApi="http:"===n.parsedUrl.protocol?Uw:qw,n}return Qw(i,[{key:"constructRequest",value:function(t,n){var r=this;return new Promise((function(i,e){var o=r.httpApi.get(Yw(Yw({},r.parsedUrl),{},{headers:t}),(function(t){var n=new Promise((function(n){var r=[];t.on("data",(function(t){r.push(t)})),t.on("end",(function(){var t=Buffer.concat(r).buffer;n(t)})),t.on("error",e)}));i(new om(t,n))}));o.on("error",e),n&&(n.aborted&&o.destroy(new Ry("Request aborted")),n.addEventListener("abort",(function(){return o.destroy(new Ry("Request aborted"))})))}))}},{key:"request",value:(n=Kw(Zw().mark((function t(){var n,r,i,e,o=arguments;return Zw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},r=n.headers,i=n.signal,t.next=3,this.constructRequest(r,i);case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),i}(hw);function sm(t){return(sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var am=["headers","credentials","maxRanges","allowFullFile"],fm=["headers","maxRanges","allowFullFile"],hm=["headers","maxRanges","allowFullFile"],cm=["forceXHR"];function lm(t,n){if(null==t)return{};var r,i,e=function(t,n){if(null==t)return{};var r,i,e={},o=Object.keys(t);for(i=0;i<o.length;i++)r=o[i],n.indexOf(r)>=0||(e[r]=t[r]);return e}(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(e[r]=t[r])}return e}function vm(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,i)}return r}function dm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?vm(Object(r),!0).forEach((function(n){pm(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vm(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function pm(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function ym(){ym=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==sm(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function wm(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function mm(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){wm(o,i,e,u,s,"next",t)}function s(t){wm(o,i,e,u,s,"throw",t)}u(void 0)}))}}function bm(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gm(t,n){return(gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function xm(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=jm(t);if(n){var e=jm(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return _m(this,r)}}function _m(t,n){if(n&&("object"===sm(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jm(t){return(jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Om=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&gm(t,n)}(a,t);var n,r,i,e,o,u,s=xm(a);function a(t,n,r,i){var e;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a),(e=s.call(this)).client=t,e.headers=n,e.maxRanges=r,e.allowFullFile=i,e._fileSize=null,e}return n=a,(r=[{key:"fetch",value:(u=mm(ym().mark((function t(n,r){var i=this;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.maxRanges>=n.length)){t.next=4;break}return t.abrupt("return",this.fetchSlices(n,r));case 4:this.maxRanges>0&&n.length;case 5:return t.abrupt("return",Promise.all(n.map((function(t){return i.fetchSlice(t,r)}))));case 6:case"end":return t.stop()}}),t,this)}))),function(t,n){return u.apply(this,arguments)})},{key:"fetchSlices",value:(o=mm(ym().mark((function t(n,r){var i,e,o,u,s,a,f,h,c,l,v,d,p=this;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.request({headers:dm(dm({},this.headers),{},{Range:"bytes=".concat(n.map((function(t){var n=t.offset,r=t.length;return"".concat(n,"-").concat(n+r)})).join(","))}),signal:r});case 2:if((i=t.sent).ok){t.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==i.status){t.next=32;break}if(y=i.getHeader("content-type"),w=void 0,w=Qp(y.split(";").map((function(t){return t.trim()}))),e={type:w[0],params:uy(w.slice(1).map((function(t){return t.split("=")})))},o=e.params,"multipart/byteranges"!==e.type){t.next=18;break}return t.t0=fy,t.next=13,i.getData();case 13:return t.t1=t.sent,t.t2=o.boundary,u=(0,t.t0)(t.t1,t.t2),this._fileSize=u[0].fileSize||null,t.abrupt("return",u);case 18:return t.next=20,i.getData();case 20:if(s=t.sent,a=ay(i.getHeader("content-range")),f=a.start,h=a.end,c=a.total,this._fileSize=c||null,l=[{data:s,offset:f,length:h-f}],!(n.length>1)){t.next=29;break}return t.next=27,Promise.all(n.slice(1).map((function(t){return p.fetchSlice(t,r)})));case 27:return v=t.sent,t.abrupt("return",l.concat(v));case 29:return t.abrupt("return",l);case 32:if(this.allowFullFile){t.next=34;break}throw new Error("Server responded with full file");case 34:return t.next=36,i.getData();case 36:return d=t.sent,this._fileSize=d.byteLength,t.abrupt("return",[{data:d,offset:0,length:d.byteLength}]);case 39:case"end":return t.stop()}var y,w}),t,this)}))),function(t,n){return o.apply(this,arguments)})},{key:"fetchSlice",value:(e=mm(ym().mark((function t(n,r){var i,e,o,u,s,a,f;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.offset,e=n.length,t.next=3,this.client.request({headers:dm(dm({},this.headers),{},{Range:"bytes=".concat(i,"-").concat(i+e)}),signal:r});case 3:if((o=t.sent).ok){t.next=8;break}throw new Error("Error fetching data.");case 8:if(206!==o.status){t.next=17;break}return t.next=11,o.getData();case 11:return u=t.sent,s=ay(o.getHeader("content-range")),a=s.total,this._fileSize=a||null,t.abrupt("return",{data:u,offset:i,length:e});case 17:if(this.allowFullFile){t.next=19;break}throw new Error("Server responded with full file");case 19:return t.next=21,o.getData();case 21:return f=t.sent,this._fileSize=f.byteLength,t.abrupt("return",{data:f,offset:0,length:f.byteLength});case 24:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"fileSize",get:function(){return this._fileSize}}])&&bm(n.prototype,r),i&&bm(n,i),Object.defineProperty(n,"prototype",{writable:!1}),a}(py);function Sm(t,n){var r=n.blockSize,i=n.cacheSize;return null===r?t:new nw(t,r,i)}function Mm(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.headers,i=void 0===r?{}:r,e=n.credentials,o=n.maxRanges,u=void 0===o?0:o,s=n.allowFullFile,a=void 0!==s&&s,f=lm(n,am),h=new Ow(t,e),c=new Om(h,i,u,a);return Sm(c,f)}function Em(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.headers,i=void 0===r?{}:r,e=n.maxRanges,o=void 0===e?0:e,u=n.allowFullFile,s=void 0!==u&&u,a=lm(n,fm),f=new Dw(t),h=new Om(f,i,o,s);return Sm(h,a)}function Tm(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.headers,i=void 0===r?{}:r,e=n.maxRanges,o=void 0===e?0:e,u=n.allowFullFile,s=void 0!==u&&u,a=lm(n,hm),f=new um(t),h=new Om(f,i,o,s);return Sm(h,a)}function km(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.forceXHR,i=void 0!==r&&r,e=lm(n,cm);return"function"!=typeof fetch||i?"undefined"!=typeof XMLHttpRequest?Em(t,e):Tm(t,e):Mm(t,e)}function Am(t){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cm(){Cm=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==Am(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function Pm(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function Nm(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Im(t,n){return(Im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function Lm(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=Gm(t);if(n){var e=Gm(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return Rm(this,r)}}function Rm(t,n){if(n&&("object"===Am(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Gm(t){return(Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zm=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Im(t,n)}(s,t);var n,r,i,e,o,u=Lm(s);function s(t){var n;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,s),(n=u.call(this)).file=t,n}return n=s,(r=[{key:"fetchSlice",value:(e=Cm().mark((function t(n,r){var i=this;return Cm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var o=i.file.slice(n.offset,n.offset+n.length),u=new FileReader;u.onload=function(n){return t(n.target.result)},u.onerror=e,u.onabort=e,u.readAsArrayBuffer(o),r&&r.addEventListener("abort",(function(){return u.abort()}))})));case 1:case"end":return t.stop()}}),t)})),o=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(t){Pm(o,r,i,u,s,"next",t)}function s(t){Pm(o,r,i,u,s,"throw",t)}u(void 0)}))},function(t,n){return o.apply(this,arguments)})}])&&Nm(n.prototype,r),i&&Nm(n,i),Object.defineProperty(n,"prototype",{writable:!1}),s}(py);function Fm(t){return new zm(t)}function Dm(t){return(Dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Um(){Um=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==Dm(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function qm(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,i)}return r}function Bm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?qm(Object(r),!0).forEach((function(n){Xm(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qm(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function Xm(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Vm(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,e,o=[],u=!0,s=!1;try{for(r=r.call(t);!(u=(i=r.next()).done)&&(o.push(i.value),!n||o.length!==n);u=!0);}catch(t){s=!0,e=t}finally{try{u||null==r.return||r.return()}finally{if(s)throw e}}return o}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return Ym(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ym(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ym(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function Wm(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function Zm(t){return function(){var n=this,r=arguments;return new Promise((function(i,e){var o=t.apply(n,r);function u(t){Wm(o,i,e,u,s,"next",t)}function s(t){Wm(o,i,e,u,s,"throw",t)}u(void 0)}))}}function Hm(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&nb(t,n)}function Km(t){var n=tb();return function(){var r,i=rb(t);if(n){var e=rb(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return $m(this,r)}}function $m(t,n){if(n&&("object"===Dm(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jm(t){var n="function"==typeof Map?new Map:void 0;return(Jm=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,i)}function i(){return Qm(t,arguments,rb(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),nb(i,t)})(t)}function Qm(t,n,r){return(Qm=tb()?Reflect.construct.bind():function(t,n,r){var i=[null];i.push.apply(i,n);var e=new(Function.bind.apply(t,i));return r&&nb(e,r.prototype),e}).apply(null,arguments)}function tb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function nb(t,n){return(nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t})(t,n)}function rb(t){return(rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ib(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function eb(t,n,r){return n&&ib(t.prototype,n),r&&ib(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ob(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function ub(t){switch(t){case dp.sf.BYTE:case dp.sf.ASCII:case dp.sf.SBYTE:case dp.sf.UNDEFINED:return 1;case dp.sf.SHORT:case dp.sf.SSHORT:return 2;case dp.sf.LONG:case dp.sf.SLONG:case dp.sf.FLOAT:case dp.sf.IFD:return 4;case dp.sf.RATIONAL:case dp.sf.SRATIONAL:case dp.sf.DOUBLE:case dp.sf.LONG8:case dp.sf.SLONG8:case dp.sf.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(t))}}function sb(t){var n=t.GeoKeyDirectory;if(!n)return null;for(var r={},i=4;i<=4*n[3];i+=4){var e=dp.P1[n[i]],o=n[i+1]?dp.L[n[i+1]]:null,u=n[i+2],s=n[i+3],a=null;if(o){if(null==(a=t[o]))throw new Error("Could not get value of geoKey '".concat(e,"'."));"string"==typeof a?a=a.substring(s,s+u-1):a.subarray&&(a=a.subarray(s,s+u),1===u&&(a=a[0]))}else a=s;r[e]=a}return r}function ab(t,n,r,i){var e=null,o=null,u=ub(n);switch(n){case dp.sf.BYTE:case dp.sf.ASCII:case dp.sf.UNDEFINED:e=new Uint8Array(r),o=t.readUint8;break;case dp.sf.SBYTE:e=new Int8Array(r),o=t.readInt8;break;case dp.sf.SHORT:e=new Uint16Array(r),o=t.readUint16;break;case dp.sf.SSHORT:e=new Int16Array(r),o=t.readInt16;break;case dp.sf.LONG:case dp.sf.IFD:e=new Uint32Array(r),o=t.readUint32;break;case dp.sf.SLONG:e=new Int32Array(r),o=t.readInt32;break;case dp.sf.LONG8:case dp.sf.IFD8:e=new Array(r),o=t.readUint64;break;case dp.sf.SLONG8:e=new Array(r),o=t.readInt64;break;case dp.sf.RATIONAL:e=new Uint32Array(2*r),o=t.readUint32;break;case dp.sf.SRATIONAL:e=new Int32Array(2*r),o=t.readInt32;break;case dp.sf.FLOAT:e=new Float32Array(r),o=t.readFloat32;break;case dp.sf.DOUBLE:e=new Float64Array(r),o=t.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(n))}if(n!==dp.sf.RATIONAL&&n!==dp.sf.SRATIONAL)for(var s=0;s<r;++s)e[s]=o.call(t,i+s*u);else for(var a=0;a<r;a+=2)e[a]=o.call(t,i+a*u),e[a+1]=o.call(t,i+(a*u+4));return n===dp.sf.ASCII?new TextDecoder("utf-8").decode(e):e}var fb=eb((function t(n,r,i){ob(this,t),this.fileDirectory=n,this.geoKeyDirectory=r,this.nextIFDByteOffset=i})),hb=function(t){Hm(r,t);var n=Km(r);function r(t){var i;return ob(this,r),(i=n.call(this,"No image at index ".concat(t))).index=t,i}return eb(r)}(Jm(Error)),cb=function(){function t(){ob(this,t)}var n;return eb(t,[{key:"readRasters",value:(n=Zm(Um().mark((function t(){var n,r,i,e,o,u,s,a,f,h,c,l,v,d,p,y,w,m,b,g,x,_,j,O,S,M,E,T,k,A,C,P,N,I,L,R,G,z,F,D=arguments;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=D.length>0&&void 0!==D[0]?D[0]:{},r=n.window,i=n.width,e=n.height,o=n.resX,u=n.resY,s=n.bbox,t.next=5,this.getImage();case 5:return a=t.sent,f=a,t.next=9,this.getImageCount();case 9:if(h=t.sent,c=a.getBoundingBox(),!r||!s){t.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!i&&!e){t.next=24;break}if(r&&(l=a.getOrigin(),v=Vm(l,2),d=v[0],p=v[1],y=a.getResolution(),w=Vm(y,2),m=w[0],b=w[1],s=[d+r[0]*m,p+r[1]*b,d+r[2]*m,p+r[3]*b]),g=s||c,!i){t.next=20;break}if(!o){t.next=19;break}throw new Error("Both width and resX passed");case 19:o=(g[2]-g[0])/i;case 20:if(!e){t.next=24;break}if(!u){t.next=23;break}throw new Error("Both width and resY passed");case 23:u=(g[3]-g[1])/e;case 24:if(!o&&!u){t.next=48;break}x=[],_=0;case 27:if(!(_<h)){t.next=36;break}return t.next=30,this.getImage(_);case 30:j=t.sent,O=j.fileDirectory,S=O.SubfileType,M=O.NewSubfileType,(0===_||2===S||1&M)&&x.push(j);case 33:++_,t.next=27;break;case 36:x.sort((function(t,n){return t.getWidth()-n.getWidth()})),E=0;case 38:if(!(E<x.length)){t.next=48;break}if(T=x[E],k=(c[2]-c[0])/T.getWidth(),A=(c[3]-c[1])/T.getHeight(),f=T,!(o&&o>k||u&&u>A)){t.next=45;break}return t.abrupt("break",48);case 45:++E,t.next=38;break;case 48:return C=r,s&&(P=a.getOrigin(),N=Vm(P,2),I=N[0],L=N[1],R=f.getResolution(a),G=Vm(R,2),z=G[0],F=G[1],C=[Math.round((s[0]-I)/z),Math.round((s[1]-L)/F),Math.round((s[2]-I)/z),Math.round((s[3]-L)/F)],C=[Math.min(C[0],C[2]),Math.min(C[1],C[3]),Math.max(C[0],C[2]),Math.max(C[1],C[3])]),t.abrupt("return",f.readRasters(Bm(Bm({},n),{},{window:C})));case 51:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),t}(),lb=function(t){Hm(f,t);var n,r,i,e,o,u,s,a=Km(f);function f(t,n,r,i){var e,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return ob(this,f),(e=a.call(this)).source=t,e.littleEndian=n,e.bigTiff=r,e.firstIFDOffset=i,e.cache=o.cache||!1,e.ifdRequests=[],e.ghostValues=null,e}return eb(f,[{key:"getSlice",value:(s=Zm(Um().mark((function t(n,r){var i;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.bigTiff?4048:1024,t.t0=Jp,t.next=4,this.source.fetch([{offset:n,length:void 0!==r?r:i}]);case 4:return t.t1=t.sent[0],t.t2=n,t.t3=this.littleEndian,t.t4=this.bigTiff,t.abrupt("return",new t.t0(t.t1,t.t2,t.t3,t.t4));case 9:case"end":return t.stop()}}),t,this)}))),function(t,n){return s.apply(this,arguments)})},{key:"parseFileDirectoryAt",value:(u=Zm(Um().mark((function t(n){var r,i,e,o,u,s,a,f,h,c,l,v,d,p,y,w,m,b,g,x;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.bigTiff?20:12,i=this.bigTiff?8:2,t.next=4,this.getSlice(n);case 4:if(e=t.sent,o=this.bigTiff?e.readUint64(n):e.readUint16(n),u=o*r+(this.bigTiff?16:6),e.covers(n,u)){t.next=11;break}return t.next=10,this.getSlice(n,u);case 10:e=t.sent;case 11:s={},a=n+(this.bigTiff?8:2),f=0;case 14:if(!(f<o)){t.next=41;break}if(h=e.readUint16(a),c=e.readUint16(a+2),l=this.bigTiff?e.readUint64(a+4):e.readUint32(a+4),v=void 0,d=void 0,p=ub(c),y=a+(this.bigTiff?12:8),!(p*l<=(this.bigTiff?8:4))){t.next=26;break}v=ab(e,c,l,y),t.next=36;break;case 26:if(w=e.readOffset(y),m=ub(c)*l,!e.covers(w,m)){t.next=32;break}v=ab(e,c,l,w),t.next=36;break;case 32:return t.next=34,this.getSlice(w,m);case 34:b=t.sent,v=ab(b,c,l,w);case 36:d=1===l&&-1===dp.It.indexOf(h)&&c!==dp.sf.RATIONAL&&c!==dp.sf.SRATIONAL?v[0]:v,s[dp.L[h]]=d;case 38:a+=r,++f,t.next=14;break;case 41:return g=sb(s),x=e.readOffset(n+i+r*o),t.abrupt("return",new fb(s,g,x));case 44:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"requestIFD",value:(o=Zm(Um().mark((function t(n){var r=this;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.ifdRequests[n]){t.next=4;break}return t.abrupt("return",this.ifdRequests[n]);case 4:if(0!==n){t.next=9;break}return this.ifdRequests[n]=this.parseFileDirectoryAt(this.firstIFDOffset),t.abrupt("return",this.ifdRequests[n]);case 9:if(this.ifdRequests[n-1]){t.next=19;break}t.prev=10,this.ifdRequests[n-1]=this.requestIFD(n-1),t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(10),!(t.t0 instanceof hb)){t.next=18;break}throw new hb(n);case 18:throw t.t0;case 19:return this.ifdRequests[n]=Zm(Um().mark((function t(){var i;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.ifdRequests[n-1];case 2:if(0!==(i=t.sent).nextIFDByteOffset){t.next=5;break}throw new hb(n);case 5:return t.abrupt("return",r.parseFileDirectoryAt(i.nextIFDByteOffset));case 6:case"end":return t.stop()}}),t)})))(),t.abrupt("return",this.ifdRequests[n]);case 21:case"end":return t.stop()}}),t,this,[[10,14]])}))),function(t){return o.apply(this,arguments)})},{key:"getImage",value:(e=Zm(Um().mark((function t(){var n,r,i=arguments;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:0,t.next=3,this.requestIFD(n);case 3:return r=t.sent,t.abrupt("return",new Zp(r.fileDirectory,r.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getImageCount",value:(i=Zm(Um().mark((function t(){var n,r;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=!0;case 2:if(!r){t.next=18;break}return t.prev=3,t.next=6,this.requestIFD(n);case 6:++n,t.next=16;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(t.t0 instanceof hb)){t.next=15;break}r=!1,t.next=16;break;case 15:throw t.t0;case 16:t.next=2;break;case 18:return t.abrupt("return",n);case 19:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(){return i.apply(this,arguments)})},{key:"getGhostValues",value:(r=Zm(Um().mark((function t(){var n,r,i,e,o,u,s,a,f=this;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.bigTiff?16:8,!this.ghostValues){t.next=3;break}return t.abrupt("return",this.ghostValues);case 3:return i=(r="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,t.next=7,this.getSlice(n,i);case 7:if(e=t.sent,r!==ab(e,dp.sf.ASCII,r.length,n)){t.next=19;break}if(o=ab(e,dp.sf.ASCII,i,n),u=o.split("\n")[0],!((s=Number(u.split("=")[1].split(" ")[0])+u.length)>i)){t.next=16;break}return t.next=15,this.getSlice(n,s);case 15:e=t.sent;case 16:a=ab(e,dp.sf.ASCII,s,n),this.ghostValues={},a.split("\n").filter((function(t){return t.length>0})).map((function(t){return t.split("=")})).forEach((function(t){var n=Vm(t,2),r=n[0],i=n[1];f.ghostValues[r]=i}));case 19:return t.abrupt("return",this.ghostValues);case 20:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:(n=Zm(Um().mark((function t(n,r,i){var e,o,u,s,a,h,c;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.fetch([{offset:0,length:1024}],i);case 2:if(e=t.sent[0],o=new Kp(e),18761!==(u=o.getUint16(0,0))){t.next=9;break}s=!0,t.next=14;break;case 9:if(19789!==u){t.next=13;break}s=!1,t.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(a=o.getUint16(2,s))){t.next=19;break}h=!1,t.next=27;break;case 19:if(43!==a){t.next=26;break}if(h=!0,8===o.getUint16(4,s)){t.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:t.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return c=h?o.getUint64(8,s):o.getUint32(4,s),t.abrupt("return",new f(n,s,h,c,r));case 29:case"end":return t.stop()}}),t)}))),function(t,r,i){return n.apply(this,arguments)})}]),f}(cb),vb=function(t){Hm(o,t);var n,r,i,e=Km(o);function o(t,n){var r;return ob(this,o),(r=e.call(this)).mainFile=t,r.overviewFiles=n,r.imageFiles=[t].concat(n),r.fileDirectoriesPerFile=null,r.fileDirectoriesPerFileParsing=null,r.imageCount=null,r}return eb(o,[{key:"parseFileDirectoriesPerFile",value:(i=Zm(Um().mark((function t(){var n;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((function(t){return t.parseFileDirectoryAt(t.firstIFDOffset)}))),t.next=3,Promise.all(n);case 3:return this.fileDirectoriesPerFile=t.sent,t.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getImage",value:(r=Zm(Um().mark((function t(){var n,r,i,e,o,u,s,a=arguments;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:0,t.next=3,this.getImageCount();case 3:return t.next=5,this.parseFileDirectoriesPerFile();case 5:r=0,i=0,e=0;case 8:if(!(e<this.imageFiles.length)){t.next=26;break}o=this.imageFiles[e],u=0;case 11:if(!(u<this.imageCounts[e])){t.next=22;break}if(n!==r){t.next=17;break}return t.next=15,o.requestIFD(i);case 15:return s=t.sent,t.abrupt("return",new Zp(s.fileDirectory,s.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source));case 17:r++,i++;case 19:u++,t.next=11;break;case 22:i=0;case 23:e++,t.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getImageCount",value:(n=Zm(Um().mark((function t(){var n;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this.imageCount){t.next=2;break}return t.abrupt("return",this.imageCount);case 2:return n=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((function(t){return t.getImageCount()}))),t.next=5,Promise.all(n);case 5:return this.imageCounts=t.sent,this.imageCount=this.imageCounts.reduce((function(t,n){return t+n}),0),t.abrupt("return",this.imageCount);case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),o}(cb);function db(){return(db=Zm(Um().mark((function t(n){var r,i,e=arguments;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},i=e.length>2?e[2]:void 0,t.abrupt("return",lb.fromSource(km(n,r),i));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pb(){return(pb=Zm(Um().mark((function t(n,r){return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",lb.fromSource(Fm(n),r));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yb(){return(yb=Zm(Um().mark((function t(n){var r,i,e,o,u,s=arguments;return Um().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:[],i=s.length>2&&void 0!==s[2]?s[2]:{},e=s.length>3?s[3]:void 0,t.next=5,lb.fromSource(km(n,i),e);case 5:return o=t.sent,t.next=8,Promise.all(r.map((function(t){return lb.fromSource(km(t,i))})));case 8:return u=t.sent,t.abrupt("return",new vb(o,u));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wb(t){return(wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mb(){mb=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{s({},"")}catch(t){s=function(t,n,r){return t[n]=r}}function a(t,n,r,i){var e=n&&n.prototype instanceof c?n:c,o=Object.create(e.prototype),u=new j(i||[]);return o._invoke=function(t,n,r){var i="suspendedStart";return function(e,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===e)throw o;return S()}for(r.method=e,r.arg=o;;){var u=r.delegate;if(u){var s=g(u,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var a=f(t,n,r);if("normal"===a.type){if(i=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(i="completed",r.method="throw",r.arg=a.arg)}}}(t,r,u),o}function f(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var h={};function c(){}function l(){}function v(){}var d={};s(d,e,(function(){return this}));var p=Object.getPrototypeOf,y=p&&p(p(O([])));y&&y!==n&&r.call(y,e)&&(d=y);var w=v.prototype=c.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(n){s(t,n,(function(t){return this._invoke(n,t)}))}))}function b(t,n){function i(e,o,u,s){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==wb(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,u,s)}),(function(t){i("throw",t,u,s)})):n.resolve(c).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,s)}))}s(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function g(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,g(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var e=i.arg;return e?e.done?(n[t.resultName]=e.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):e:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function _(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[e];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return l.prototype=v,s(w,"constructor",v),s(v,"constructor",l),l.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===l||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(n,r,i,e,o){void 0===o&&(o=Promise);var u=new b(a(n,r,i,e),o);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(w),s(w,u,"Generator"),s(w,e,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var i=n.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),h},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),h}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var e=i.arg;_(r)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function bb(t,n,r,i,e,o,u){try{var s=t[o](u),a=s.value}catch(t){return void r(t)}s.done?n(a):Promise.resolve(a).then(i,e)}function gb(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function xb(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _b,jb="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,Ob=function(){function t(){var n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jb,e=arguments.length>1?arguments[1]:void 0;gb(this,t),this.workers=null,this._awaitingDecoder=null,this.size=i,this.messageId=0,i&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise((function(t){r.e(231).then(r.bind(r,231)).then((function(n){t(n.create)}))})),this._awaitingDecoder.then((function(t){n._awaitingDecoder=null,n.workers=[];for(var r=0;r<i;r++)n.workers.push({worker:t(),idle:!0})})))}var n,i,e,o,u;return n=t,(i=[{key:"decode",value:(o=mb().mark((function t(n,r){var i=this;return mb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._awaitingDecoder){t.next=3;break}return t.next=3,this._awaitingDecoder;case 3:return t.abrupt("return",0===this.size?Ep(n).then((function(t){return t.decode(n,r)})):new Promise((function(t){var e=i.workers.find((function(t){return t.idle}))||i.workers[Math.floor(Math.random()*i.size)];e.idle=!1;var o=i.messageId++;e.worker.addEventListener("message",(function n(r){r.data.id===o&&(e.idle=!0,t(r.data.decoded),e.worker.removeEventListener("message",n))})),e.worker.postMessage({fileDirectory:n,buffer:r,id:o},[r])})));case 4:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,n=arguments;return new Promise((function(r,i){var e=o.apply(t,n);function u(t){bb(e,r,i,u,s,"next",t)}function s(t){bb(e,r,i,u,s,"throw",t)}u(void 0)}))},function(t,n){return u.apply(this,arguments)})},{key:"destroy",value:function(){this.workers&&(this.workers.forEach((function(t){t.worker.terminate()})),this.workers=null)}}])&&xb(n.prototype,i),e&&xb(n,e),Object.defineProperty(n,"prototype",{writable:!1}),t}(),Sb=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Mb="STATISTICS_MAXIMUM",Eb="STATISTICS_MINIMUM";function Tb(t){try{return t.getBoundingBox()}catch(r){var n=t.fileDirectory;return[0,0,n.ImageWidth,n.ImageLength]}}function kb(t){try{return t.getOrigin().slice(0,2)}catch(n){return[0,t.fileDirectory.ImageLength]}}function Ab(t,n){try{return t.getResolution(n)}catch(r){return[n.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth,n.fileDirectory.ImageHeight/t.fileDirectory.ImageHeight]}}function Cb(t){var n=t.geoKeys;if(!n)return null;if(n.ProjectedCSTypeGeoKey){if(!(i=gi(r="EPSG:"+n.ProjectedCSTypeGeoKey)))(e=Lt(n.ProjLinearUnitsGeoKey))&&(i=new ar({code:r,units:e}));return i}if(n.GeographicTypeGeoKey){var r,i,e;if(!(i=gi(r="EPSG:"+n.GeographicTypeGeoKey)))(e=Lt(n.GeogAngularUnitsGeoKey))&&(i=new ar({code:r,units:e}));return i}return null}function Pb(t){return t.getImageCount().then((function(n){for(var r=new Array(n),i=0;i<n;++i)r[i]=t.getImage(i);return Promise.all(r)}))}function Nb(t,n){return(t.blob?function(t,n){return pb.apply(this,arguments)}(t.blob):t.overviews?function(t){return yb.apply(this,arguments)}(t.url,t.overviews,n):function(t){return db.apply(this,arguments)}(t.url,n)).then(Pb)}function Ib(t,n,r,i,e){if(Array.isArray(t)){var o=t.length;if(!Array.isArray(n)||o!=n.length){var u=new Error(i);throw e(u),u}for(var s=0;s<o;++s)Ib(t[s],n[s],r,i,e)}else if(n=n,Math.abs(t-n)>r*t)throw new Error(i)}function Lb(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function Rb(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}var Gb=function(t){function n(n){var r=t.call(this,{state:pu,tileGrid:null,projection:null,opaque:n.opaque,transition:n.transition,interpolate:!1!==n.interpolate,wrapX:n.wrapX})||this;r.tf=n.sources;var i=r.tf.length;r.nf=n.sourceOptions,r.rf=new Array(i),r.if=new Array(i),r.ef,r.uf,r.af,r.ff=!1!==n.normalize,r.hf=!1,r.V=null,r.cf=n.convertToRGB?"readRGB":"readRasters",r.setKey(r.tf.map((function(t){return t.url})).join(","));for(var e=r,o=new Array(i),u=0;u<i;++u)o[u]=Nb(r.tf[u],r.nf);return Promise.all(o).then((function(t){e.lf(t)})).catch((function(t){console.error(t),e.V=t,e.setState(wu)})),r}return Sb(n,t),n.prototype.getError=function(){return this.V},n.prototype.lf=function(t){for(var n,r,i,e,o,u=new Array(t.length),s=new Array(t.length),a=new Array(t.length),f=0,h=t.length,c=function(h){var c=t[h],v=c.length,d=void 0,p=void 0,y=new Array(v),w=new Array(v),m=new Array(v);s[h]=new Array(v),a[h]=new Array(v);for(var b=0;b<v;++b){var g=c[b],x=g.getGDALNoData();a[h][b]=g.getGDALMetadata(0),s[h][b]=x;var _=l.tf[h].bands;u[h]=_?_.length:g.getSamplesPerPixel();var j=v-(b+1);d||(d=Tb(g)),p||(p=kb(g));var O=Ab(g,c[0]);m[j]=O[0];var S=[g.getTileWidth(),g.getTileHeight()];y[j]=S;var M=O[0]/Math.abs(O[1]);w[j]=[S[0],S[1]/M]}if(n?Kn(n,d,n):n=d,r){var E="Origin mismatch for source ".concat(h,", got [").concat(p,"] but expected [").concat(r,"]");Ib(r,p,0,E,l.viewRejector)}else r=p;if(o){o.length-f>m.length&&(f=o.length-m.length);var T=o[o.length-1]/m[m.length-1];l.if[h]=T;var k=m.map((function(t){return t*T}));E="Resolution mismatch for source ".concat(h,", got [").concat(k,"] but expected [").concat(o,"]");Ib(o.slice(f,o.length),k,.02,E,l.viewRejector)}else o=m,l.if[h]=1;i?Ib(i.slice(f,i.length),w,.01,"Tile size mismatch for source ".concat(h),l.viewRejector):i=w,e?Ib(e.slice(f,e.length),y,0,"Tile size mismatch for source ".concat(h),l.viewRejector):e=y,l.rf[h]=c.reverse()},l=this,v=0;v<h;++v)c(v);for(var d=0,p=this.rf.length;d<p;++d)for(var y=this.rf[d];y.length<o.length;)y.unshift(void 0);if(!this.getProjection()){var w=t[0];for(d=w.length-1;d>=0;--d){var m=Cb(w[d]);if(m){this.projection=m;break}}}this.ef=u,this.uf=s,this.af=a;t:for(v=0;v<h;++v){if(void 0!==this.tf[v].nodata){this.hf=!0;break}var b=s[v],g=this.tf[v].bands;if(g){for(d=0;d<g.length;++d)if(null!==b[g[d]-1]){this.hf=!0;break t}}else for(var x=0;x<b.length;++x)if(null!==b[x]){this.hf=!0;break t}}var _=this.hf?1:0;this.bandCount=u.reduce((function(t,n){return t+=n}),0)+_;var j=new Hh({extent:n,minZoom:f,origin:r,resolutions:o,tileSizes:i});this.tileGrid=j,this.setTileSizes(e),this.setLoader(this.vf.bind(this)),this.setState(yu),this.viewResolver({projection:this.projection,resolutions:o,center:Ri(Yn(n),this.projection),extent:zi(n,this.projection),zoom:0})},n.prototype.vf=function(t,n,r){for(var i=this.getTileSize(t),e=this.rf.length,o=new Array(e),u=this.hf,s=this.bandCount,a=this.ef,f=this.uf,h=this.tf,c=function(e){var u=h[e],s=l.if[e],a=[Math.round(n*(i[0]*s)),Math.round(r*(i[1]*s)),Math.round((n+1)*(i[0]*s)),Math.round((r+1)*(i[1]*s))],c=l.rf[e][t],v=void 0;u.bands&&(v=u.bands.map((function(t){return t-1})));var d=void 0;d="nodata"in u&&null!==u.nodata?u.nodata:v?v.map((function(t){return f[e][t]})):f[e],o[e]=c[l.cf]({window:a,width:i[0],height:i[1],samples:v,fillValue:d,pool:(_b||(_b=new Ob),_b),interleave:!1})},l=this,v=0;v<e;++v)c(v);var d=i[0]*i[1],p=d*s,y=this.ff,w=this.af;return Promise.all(o).then((function(t){var n;n=y?new Uint8Array(p):new Float32Array(p);for(var r=0,i=0;i<d;++i){for(var o=u,s=0;s<e;++s){var c=h[s],l=c.min,v=c.max,m=void 0,b=void 0;if(y){var g=w[s][0];void 0===l&&(l=g&&Eb in g?parseFloat(g.STATISTICS_MINIMUM):Lb(t[s][0])),void 0===v&&(v=g&&Mb in g?parseFloat(g.STATISTICS_MAXIMUM):Rb(t[s][0])),b=-l*(m=255/(v-l))}for(var x=0;x<a[s];++x){var _=t[s][x][i],j=void 0;if(j=y?fr(m*_+b,0,255):_,u){var O=c.nodata;if(void 0===O){var S=void 0;S=c.bands?c.bands[x]-1:x,O=f[s][S]}var M=isNaN(O);(!M&&_!==O||M&&!isNaN(_))&&(o=!1,n[r]=j)}else n[r]=j;r++}}u&&(o||(n[r]=255),r++)}return n})).catch((function(t){throw console.error(t),t}))},n}(Ud);Gb.prototype.getView;var zb=Gb,Fb=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Db="default",Ub="truncated",qb=function(t){function n(n,r,i,e,o,u,s){var a=t.call(this,r,i,e,o,u,s)||this;return a.df=null,a.Eo=n,a}return Fb(n,t),n.prototype.getImage=function(){if(this.df)return this.df;var n=t.prototype.getImage.call(this);if(this.state==vt){var r=this.Eo;if(n.width==r[0]&&n.height==r[1])return this.df=n,n;var i=Eo(r[0],r[1]);return i.drawImage(n,0,0),this.df=i.canvas,i.canvas}return n},n}(Lo),Bb=function(t){function n(n){var r=this,i=n,e=void 0===i.imageSmoothing||i.imageSmoothing;void 0!==i.interpolate&&(e=i.interpolate);var o=i.size,u=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:Db,s=i.tilePixelRatio||1,a=o[0],f=o[1],h=[],c=i.tileSize||Fs,l=c*s;switch(u){case Db:for(;a>l||f>l;)h.push([Math.ceil(a/l),Math.ceil(f/l)]),l+=l;break;case Ub:for(var v=a,d=f;v>l||d>l;)h.push([Math.ceil(v/l),Math.ceil(d/l)]),v>>=1,d>>=1;break;default:Ot(!1,53)}h.push([1,1]),h.reverse();for(var p=[s],y=[0],w=1,m=h.length;w<m;w++)p.push(s<<w),y.push(h[w-1][0]*h[w-1][1]+y[w-1]);p.reverse();var b=new Hh({tileSize:c,extent:i.extent||[0,-f,a,0],resolutions:p}),g=i.url;g&&-1==g.indexOf("{TileGroup}")&&-1==g.indexOf("{tileIndex}")&&(g+="{TileGroup}/{z}-{x}-{y}.jpg");var x=sc(g),_=c*s;var j=oc(x.map((function(t){return function(n,r,i){if(n){var e=n[0],o=n[1],u=n[2],s=o+u*h[e][0],a={z:e,x:o,y:u,tileIndex:s,TileGroup:"TileGroup"+((s+y[e])/_|0)};return t.replace(/\{(\w+?)\}/g,(function(t,n){return a[n]}))}}}))),O=qb.bind(null,aa(c*s));(r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:e,projection:i.projection,tilePixelRatio:s,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:O,tileGrid:b,tileUrlFunction:j,transition:i.transition})||this).zDirection=i.zDirection;var S=j(b.getTileCoordForCoordAndResolution(Yn(b.getExtent()),p[p.length-1]),1,null),M=new Image;return M.addEventListener("error",function(){_=c,this.changed()}.bind(r)),M.src=S,r}return Fb(n,t),n}(gd),Xb=function(t,n,r){if(r||2===arguments.length)for(var i,e=0,o=n.length;e<o;e++)!i&&e in n||(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return t.concat(i||Array.prototype.slice.call(n))},Vb="version1",Yb="version2",Wb="version3",Zb={};Zb[Vb]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},Zb[Yb]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},Zb[Wb]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},Zb.none={none:{supports:[],formats:[],qualities:[]}};var Hb=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Kb=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,$b=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;var Jb={};Jb[Vb]=function(t){var n=t.getComplianceLevelSupportedFeatures();return void 0===n&&(n=Zb[Vb].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:n.supports,formats:Xb(Xb([],n.formats,!0),[void 0===t.imageInfo.formats?[]:t.imageInfo.formats],!1),qualities:Xb(Xb([],n.qualities,!0),[void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],!1),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},Jb[Yb]=function(t){var n=t.getComplianceLevelSupportedFeatures(),r=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,i=r&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],e=r&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=r&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:Xb(Xb([],n.supports,!0),i,!0),formats:Xb(Xb([],n.formats,!0),e,!0),qualities:Xb(Xb([],n.qualities,!0),o,!0)}},Jb[Wb]=function(t){var n=t.getComplianceLevelSupportedFeatures(),r=void 0===t.imageInfo.extraFormats?n.formats:Xb(Xb([],n.formats,!0),t.imageInfo.extraFormats,!0),i=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return y(["jpg","png","gif"],t)})).reduce((function(t,n){return void 0===t&&y(r,n)?n:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?n.supports:Xb(Xb([],n.supports,!0),t.imageInfo.extraFeatures,!0),formats:r,qualities:void 0===t.imageInfo.extraQualities?n.qualities:Xb(Xb([],n.qualities,!0),t.imageInfo.extraQualities,!0),preferredFormat:i}};var Qb=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)switch(t[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Vb;case"http://iiif.io/api/image/2/context.json":return Yb;case"http://iiif.io/api/image/3/context.json":return Wb;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Vb)&&this.imageInfo.identifier)return Vb}Ot(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case Vb:if(Hb.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Wb:if($b.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Yb:if("string"==typeof this.imageInfo.profile&&Kb.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&Kb.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var n=this.getComplianceLevelEntryFromProfile(t);if(void 0!==n){var r=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(t);return void 0===n?Zb.none.none:Zb[t][n]}},t.prototype.getTileSourceOptions=function(t){var n=t||{},r=this.getImageApiVersion();if(void 0!==r){var i=void 0===r?void 0:Jb[r](this);if(void 0!==i)return{url:i.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:void 0!==n.format&&y(i.formats,n.format)?n.format:void 0!==i.preferredFormat?i.preferredFormat:"jpg",supports:i.supports,quality:n.quality&&y(i.qualities,n.quality)?n.quality:y(i.qualities,"native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort((function(t,n){return n-t})):void 0,tileSize:i.tileSize}}},t}(),tg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function ng(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var rg=function(t){function n(n){var r=this,i=n||{},e=void 0===i.imageSmoothing||i.imageSmoothing;void 0!==i.interpolate&&(e=i.interpolate);var o=i.url||"";o+=o.lastIndexOf("/")===o.length-1||""===o?"":"/";var u=i.version||Yb,s=i.sizes||[],a=i.size;Ot(null!=a&&Array.isArray(a)&&2==a.length&&!isNaN(a[0])&&a[0]>0&&!isNaN(a[1])&&a[1]>0,60);var f,h,c,l=a[0],v=a[1],d=i.tileSize,p=i.tilePixelRatio||1,w=i.format||"jpg",m=i.quality||(i.version==Vb?"native":"default"),b=i.resolutions||[],g=i.supports||[],x=i.extent||[0,-v,l,0],_=null!=s&&Array.isArray(s)&&s.length>0,j=void 0!==d&&("number"==typeof d&&Number.isInteger(d)&&d>0||Array.isArray(d)&&d.length>0),O=null!=g&&Array.isArray(g)&&(y(g,"regionByPx")||y(g,"regionByPct"))&&(y(g,"sizeByWh")||y(g,"sizeByH")||y(g,"sizeByW")||y(g,"sizeByPct"));if(b.sort((function(t,n){return n-t})),j||O)if(null!=d&&("number"==typeof d&&Number.isInteger(d)&&d>0?(f=d,h=d):Array.isArray(d)&&d.length>0&&((1==d.length||null==d[1]&&Number.isInteger(d[0]))&&(f=d[0],h=d[0]),2==d.length&&(Number.isInteger(d[0])&&Number.isInteger(d[1])?(f=d[0],h=d[1]):null==d[0]&&Number.isInteger(d[1])&&(f=d[1],h=d[1])))),void 0!==f&&void 0!==h||(f=Fs,h=Fs),0==b.length)for(var S=c=Math.max(Math.ceil(Math.log(l/f)/Math.LN2),Math.ceil(Math.log(v/h)/Math.LN2));S>=0;S--)b.push(Math.pow(2,S));else{var M=Math.max.apply(Math,b);c=Math.round(Math.log(M)/Math.LN2)}else if(f=l,h=v,b=[],_){s.sort((function(t,n){return t[0]-n[0]})),c=-1;var E=[];for(S=0;S<s.length;S++){var T=l/s[S][0];b.length>0&&b[b.length-1]==T?E.push(S):(b.push(T),c++)}if(E.length>0)for(S=0;S<E.length;S++)s.splice(E[S]-S,1)}else b.push(1),s.push([l,v]),c=0;var k=new Hh({tileSize:[f,h],extent:x,origin:$n(x),resolutions:b}),A=qb.bind(null,aa(d||256).map((function(t){return t*p})));return(r=t.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:e,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,state:i.state,tileClass:A,tileGrid:k,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:function(t,n,r){var i,e,a=t[0];if(!(a>c)){var d=t[1],p=t[2],x=b[a];if(!(void 0===d||void 0===p||void 0===x||d<0||Math.ceil(l/x/f)<=d||p<0||Math.ceil(v/x/h)<=p)){if(O||j){var S=d*f*x,M=p*h*x,E=f*x,T=h*x,k=f,A=h;if(S+E>l&&(E=l-S),M+T>v&&(T=v-M),S+f*x>l&&(k=Math.floor((l-S+x-1)/x)),M+h*x>v&&(A=Math.floor((v-M+x-1)/x)),0==S&&E==l&&0==M&&T==v)i="full";else if(!O||y(g,"regionByPx"))i=S+","+M+","+E+","+T;else if(y(g,"regionByPct")){i="pct:"+ng(S/l*100)+","+ng(M/v*100)+","+ng(E/l*100)+","+ng(T/v*100)}u!=Wb||O&&!y(g,"sizeByWh")?!O||y(g,"sizeByW")?e=k+",":y(g,"sizeByH")?e=","+A:y(g,"sizeByWh")?e=k+","+A:y(g,"sizeByPct")&&(e="pct:"+ng(100/x)):e=k+","+A}else if(i="full",_){var C=s[a][0],P=s[a][1];e=u==Wb?C==l&&P==v?"max":C+","+P:C==l?"full":C+","}else e=u==Wb?"max":"full";return o+i+"/"+e+"/0/"+m+"."+w}}},transition:i.transition})||this).zDirection=i.zDirection,r}return tg(n,t),n}(gd),ig=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),eg=function(t){function n(n,r,i,e,o,u,s){var a=this,f=n.getExtent(),h=r.getExtent(),c=h?Kn(i,h):i,l=Vh(n,r,Yn(c),e),v=new pl(n,r,c,f,.5*l,e),d=u(v.calculateSourceExtent(),l,o),p=d?wo:xo,y=d?d.getPixelRatio():1;return(a=t.call(this,i,e,y,p)||this).lu=r,a.du=f,a.Cu=v,a.br=e,a.pf=i,a.yf=d,a.wf=y,a.pa=s,a.Ut=null,a.mf=null,a}return ig(n,t),n.prototype.disposeInternal=function(){this.state==mo&&this.bf(),t.prototype.disposeInternal.call(this)},n.prototype.getImage=function(){return this.Ut},n.prototype.getProjection=function(){return this.lu},n.prototype.Pu=function(){var t=this.yf.getState();if(t==bo){var n=Qn(this.pf)/this.br,r=Hn(this.pf)/this.br;this.Ut=Wh(n,r,this.wf,this.yf.getResolution(),this.du,this.br,this.pf,this.Cu,[{extent:this.yf.getExtent(),image:this.yf.getImage()}],0,void 0,this.pa)}this.state=t,this.changed()},n.prototype.load=function(){if(this.state==wo){this.state=mo,this.changed();var t=this.yf.getState();t==bo||t==go?this.Pu():(this.mf=H(this.yf,L,(function(t){var n=this.yf.getState();n!=bo&&n!=go||(this.bf(),this.Pu())}),this),this.yf.load())}},n.prototype.bf=function(){$(this.mf),this.mf=null},n}(yo),og=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ug="imageloadstart",sg="imageloadend",ag="imageloaderror",fg=function(t){function n(n,r){var i=t.call(this,n)||this;return i.image=r,i}return og(n,t),n}(c);function hg(t,n){t.getImage().src=n}var cg=function(t){function n(n){var r=this,i=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(i=n.interpolate),(r=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state,interpolate:i})||this).on,r.once,r.un,r.Cr=void 0!==n.resolutions?n.resolutions:null,r.gf=null,r.xf=0,r}return og(n,t),n.prototype.getResolutions=function(){return this.Cr},n.prototype.findNearestResolution=function(t){if(this.Cr){var n=w(this.Cr,t,0);t=this.Cr[n]}return t},n.prototype.getImage=function(t,n,r,i){var e=this.getProjection();if(e&&i&&!Ti(e,i)){if(this.gf){if(this.xf==this.getRevision()&&Ti(this.gf.getProjection(),i)&&this.gf.getResolution()==n&&In(this.gf.getExtent(),t))return this.gf;this.gf.dispose(),this.gf=null}return this.gf=new eg(e,i,t,n,r,function(t,n,r){return this.getImageInternal(t,n,r,e)}.bind(this),this.getInterpolate()),this.xf=this.getRevision(),this.gf}return e&&(i=e),this.getImageInternal(t,n,r,i)},n.prototype.getImageInternal=function(t,n,r,e){return i()},n.prototype.handleImageChange=function(t){var n,r=t.target;switch(r.getState()){case mo:this.loading=!0,n=ug;break;case bo:this.loading=!1,n=sg;break;case go:this.loading=!1,n=ag;break;default:return}this.hasListener(n)&&this.dispatchEvent(new fg(n,r))},n}(cd),lg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),vg=function(t){function n(n){var r=this,i=n||{},e=void 0===i.imageSmoothing||i.imageSmoothing;return void 0!==i.interpolate&&(e=i.interpolate),(r=t.call(this,{attributions:i.attributions,interpolate:e,projection:i.projection,resolutions:i.resolutions})||this).Bt=void 0!==i.crossOrigin?i.crossOrigin:null,r.Oa=void 0===i.hidpi||i.hidpi,r.Fe=i.url,r.Gt=void 0!==i.imageLoadFunction?i.imageLoadFunction:hg,r._f=i.params||{},r.Lt=null,r.jf=[0,0],r.Of=0,r.Sf=void 0!==i.ratio?i.ratio:1.5,r}return lg(n,t),n.prototype.getParams=function(){return this._f},n.prototype.getImageInternal=function(t,n,r,i){if(void 0===this.Fe)return null;n=this.findNearestResolution(n),r=this.Oa?r:1;var e=this.Lt;if(e&&this.Of==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==r&&Mn(e.getExtent(),t))return e;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};k(o,this._f);var u=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.Sf){var a=this.Sf*Qn(t)/2,f=this.Sf*Hn(t)/2;t[0]=u-a,t[1]=s-f,t[2]=u+a,t[3]=s+f}var h=n/r,c=Math.ceil(Qn(t)/h),l=Math.ceil(Hn(t)/h);t[0]=u-h*c/2,t[2]=u+h*c/2,t[1]=s-h*l/2,t[3]=s+h*l/2,this.jf[0]=c,this.jf[1]=l;var v=this.Mf(t,this.jf,r,i,o);return this.Lt=new Oo(t,n,r,v,this.Bt,this.Gt),this.Of=this.getRevision(),this.Lt.addEventListener(L,this.handleImageChange.bind(this)),this.Lt},n.prototype.getImageLoadFunction=function(){return this.Gt},n.prototype.Mf=function(t,n,r,i,e){var o=i.getCode().split(/:(?=\d+$)/).pop();e.SIZE=n[0]+","+n[1],e.BBOX=t.join(","),e.BBOXSR=o,e.IMAGESR=o,e.DPI=Math.round(90*r);var u=this.Fe,s=u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==u&&Ot(!1,50),ac(s,e)},n.prototype.getUrl=function(){return this.Fe},n.prototype.setImageLoadFunction=function(t){this.Lt=null,this.Gt=t,this.changed()},n.prototype.setUrl=function(t){t!=this.Fe&&(this.Fe=t,this.Lt=null,this.changed())},n.prototype.updateParams=function(t){k(this._f,t),this.Lt=null,this.changed()},n}(cg),dg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),pg=function(t){function n(n){var r=this,i=n||{},e=void 0===i.imageSmoothing||i.imageSmoothing;return void 0!==i.interpolate&&(e=i.interpolate),(r=t.call(this,{attributions:i.attributions,interpolate:e,projection:i.projection,resolutions:i.resolutions,state:i.state})||this).Ef=i.canvasFunction,r.Ut=null,r.Of=0,r.Sf=void 0!==i.ratio?i.ratio:1.5,r}return dg(n,t),n.prototype.getImageInternal=function(t,n,r,i){n=this.findNearestResolution(n);var e=this.Ut;if(e&&this.Of==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==r&&Mn(e.getExtent(),t))return e;ir(t=t.slice(),this.Sf);var o=[Qn(t)/n*r,Hn(t)/n*r],u=this.Ef.call(this,t,n,r,o,i);return u&&(e=new Mo(t,n,r,u)),this.Ut=e,this.Of=this.getRevision(),e},n}(cg),yg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();var wg=function(t){function n(n){var r=this,i=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(i=n.interpolate),(r=t.call(this,{interpolate:i,projection:n.projection,resolutions:n.resolutions})||this).Bt=void 0!==n.crossOrigin?n.crossOrigin:null,r.Tf=void 0!==n.displayDpi?n.displayDpi:96,r._f=n.params||{},r.Fe=n.url,r.Gt=void 0!==n.imageLoadFunction?n.imageLoadFunction:hg,r.Oa=void 0===n.hidpi||n.hidpi,r.dt=void 0!==n.metersPerUnit?n.metersPerUnit:1,r.Sf=void 0!==n.ratio?n.ratio:1,r.kf=void 0!==n.useOverlay&&n.useOverlay,r.Lt=null,r.Of=0,r}return yg(n,t),n.prototype.getParams=function(){return this._f},n.prototype.getImageInternal=function(t,n,r,i){n=this.findNearestResolution(n),r=this.Oa?r:1;var e=this.Lt;if(e&&this.Of==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==r&&Mn(e.getExtent(),t))return e;1!=this.Sf&&ir(t=t.slice(),this.Sf);var o=[Qn(t)/n*r,Hn(t)/n*r];if(void 0!==this.Fe){var u=this.getUrl(this.Fe,this._f,t,o,i);(e=new Oo(t,n,r,u,this.Bt,this.Gt)).addEventListener(L,this.handleImageChange.bind(this))}else e=null;return this.Lt=e,this.Of=this.getRevision(),e},n.prototype.getImageLoadFunction=function(){return this.Gt},n.prototype.updateParams=function(t){k(this._f,t),this.changed()},n.prototype.getUrl=function(t,n,r,i,e){var o=function(t,n,r,i){var e=Qn(t),o=Hn(t),u=n[0],s=n[1],a=.0254/i;return s*e>u*o?e*r/(u*a):o*r/(s*a)}(r,i,this.dt,this.Tf),u=Yn(r),s={OPERATION:this.kf?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.Tf,SETDISPLAYWIDTH:Math.round(i[0]),SETDISPLAYHEIGHT:Math.round(i[1]),SETVIEWSCALE:o,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]};return k(s,n),ac(t,s)},n.prototype.setImageLoadFunction=function(t){this.Lt=null,this.Gt=t,this.changed()},n}(cg),mg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),bg=function(t){function n(n){var r=this,i=void 0!==n.crossOrigin?n.crossOrigin:null,e=void 0!==n.imageLoadFunction?n.imageLoadFunction:hg,o=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(o=n.interpolate),(r=t.call(this,{attributions:n.attributions,interpolate:o,projection:gi(n.projection)})||this).Fe=n.url,r.Af=n.imageExtent,r.Lt=new Oo(r.Af,void 0,1,r.Fe,i,e),r.jf=n.imageSize?n.imageSize:null,r.Lt.addEventListener(L,r.handleImageChange.bind(r)),r}return mg(n,t),n.prototype.getImageExtent=function(){return this.Af},n.prototype.getImageInternal=function(t,n,r,i){return tr(t,this.Lt.getExtent())?this.Lt:null},n.prototype.getUrl=function(){return this.Fe},n.prototype.handleImageChange=function(n){if(this.Lt.getState()==bo){var r=this.Lt.getExtent(),i=this.Lt.getImage(),e=void 0,o=void 0;this.jf?(e=this.jf[0],o=this.jf[1]):(e=i.width,o=i.height);var u=Qn(r),s=Hn(r),a=u/e,f=s/o,h=e,c=o;if(a>f?h=Math.round(u/f):c=Math.round(s/a),h!==e||c!==o){var l=Eo(h,c);this.getInterpolate()||k(l,Uh);var v=l.canvas;l.drawImage(i,0,0,e,o,0,0,v.width,v.height),this.Lt.setImage(v)}}t.prototype.handleImageChange.call(this,n)},n}(cg),gg="1.3.0",xg="carmentaserver",_g="geoserver",jg="mapserver",Og="qgis",Sg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Mg=[101,101],Eg=function(t){function n(n){var r=this,i=n||{},e=void 0===i.imageSmoothing||i.imageSmoothing;return void 0!==i.interpolate&&(e=i.interpolate),(r=t.call(this,{attributions:i.attributions,interpolate:e,projection:i.projection,resolutions:i.resolutions})||this).Bt=void 0!==i.crossOrigin?i.crossOrigin:null,r.Fe=i.url,r.Gt=void 0!==i.imageLoadFunction?i.imageLoadFunction:hg,r._f=i.params||{},r.Cf=!0,r.Pf(),r.Nf=i.serverType,r.Oa=void 0===i.hidpi||i.hidpi,r.Lt=null,r.jf=[0,0],r.Of=0,r.Sf=void 0!==i.ratio?i.ratio:1.5,r}return Sg(n,t),n.prototype.getFeatureInfoUrl=function(t,n,r,i){if(void 0!==this.Fe){var e=gi(r),o=this.getProjection();o&&o!==e&&(n=Vh(o,e,t,n),t=Ci(t,e,o));var u=Zn(t,n,0,Mg),s={SERVICE:"WMS",VERSION:gg,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this._f.LAYERS};k(s,this._f,i);var a=xr((t[0]-u[0])/n,4),f=xr((u[3]-t[1])/n,4);return s[this.Cf?"I":"X"]=a,s[this.Cf?"J":"Y"]=f,this.Mf(u,Mg,1,o||e,s)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.Fe){var r={SERVICE:"WMS",VERSION:gg,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var i=this._f.LAYERS;if(!(!Array.isArray(i)||1===i.length))return;r.LAYER=i}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*e/28e-5}return k(r,n),ac(this.Fe,r)}},n.prototype.getParams=function(){return this._f},n.prototype.getImageInternal=function(t,n,r,i){if(void 0===this.Fe)return null;n=this.findNearestResolution(n),1==r||this.Oa&&void 0!==this.Nf||(r=1);var e=n/r,o=Yn(t),u=Zn(o,e,0,[_r(Qn(t)/e,4),_r(Hn(t)/e,4)]),s=Zn(o,e,0,[_r(this.Sf*Qn(t)/e,4),_r(this.Sf*Hn(t)/e,4)]),a=this.Lt;if(a&&this.Of==this.getRevision()&&a.getResolution()==n&&a.getPixelRatio()==r&&Mn(a.getExtent(),u))return a;var f={SERVICE:"WMS",VERSION:gg,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};k(f,this._f),this.jf[0]=gr(Qn(s)/e,4),this.jf[1]=gr(Hn(s)/e,4);var h=this.Mf(s,this.jf,r,i,f);return this.Lt=new Oo(s,n,r,h,this.Bt,this.Gt),this.Of=this.getRevision(),this.Lt.addEventListener(L,this.handleImageChange.bind(this)),this.Lt},n.prototype.getImageLoadFunction=function(){return this.Gt},n.prototype.Mf=function(t,n,r,i,e){if(Ot(void 0!==this.Fe,9),e[this.Cf?"CRS":"SRS"]=i.getCode(),"STYLES"in this._f||(e.STYLES=""),1!=r)switch(this.Nf){case _g:var o=90*r+.5|0;"FORMAT_OPTIONS"in e?e.FORMAT_OPTIONS+=";dpi:"+o:e.FORMAT_OPTIONS="dpi:"+o;break;case jg:e.MAP_RESOLUTION=90*r;break;case xg:case Og:e.DPI=90*r;break;default:Ot(!1,8)}e.WIDTH=n[0],e.HEIGHT=n[1];var u,s=i.getAxisOrientation();return u=this.Cf&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,e.BBOX=u.join(","),ac(this.Fe,e)},n.prototype.getUrl=function(){return this.Fe},n.prototype.setImageLoadFunction=function(t){this.Lt=null,this.Gt=t,this.changed()},n.prototype.setUrl=function(t){t!=this.Fe&&(this.Fe=t,this.Lt=null,this.changed())},n.prototype.updateParams=function(t){k(this._f,t),this.Pf(),this.Lt=null,this.changed()},n.prototype.Pf=function(){var t=this._f.VERSION||gg;this.Cf=Zr(t,"1.3")>=0},n}(cg),Tg={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},kg={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function Ag(t,n){for(var r,i,e=0;e<t.length;++e){var o=t[e];if("item"===o.rel){if(o.type===n){r=o.href;break}Tg[o.type]?i=o.href:i||0!==o.type.indexOf("image/")||(i=o.href)}}if(!r){if(!i)throw new Error('Could not find "item" link');r=i}return r}function Cg(t,n,r){for(var i,e,o={},u=0;u<t.length;++u){var s=t[u];if(o[s.type]=s.href,"item"===s.rel){if(s.type===n){i=s.href;break}kg[s.type]&&(e=s.href)}}if(!i&&r)for(u=0;u<r.length;++u){var a=r[u];if(o[a]){i=o[a];break}}if(!i){if(!e)throw new Error('Could not find "item" link');i=e}return i}function Pg(t,n,r,i){var e=t.projection;if(!e&&!(e=gi(n.crs)))throw new Error("Unsupported CRS: ".concat(n.crs));for(var o="en"!==e.getAxisOrientation().substr(0,2),u=n.tileMatrices,s={},a=0;a<u.length;++a){var f=u[a];s[f.id]=f}var h={},c=[];if(i)for(a=0;a<i.length;++a){var l=(b=i[a]).tileMatrix;c.push(l),h[l]=b}else for(a=0;a<u.length;++a){l=u[a].id;c.push(l)}var v=c.length,d=new Array(v),p=new Array(v),y=new Array(v),w=new Array(v),m=[-1/0,-1/0,1/0,1/0];for(a=0;a<v;++a){l=c[a];var b,g=(f=s[l]).pointOfOrigin;if(d[a]=o?[g[1],g[0]]:g,p[a]=f.cellSize,y[a]=[f.matrixWidth,f.matrixHeight],w[a]=[f.tileWidth,f.tileHeight],b=h[l]){var x=f.cellSize*f.tileWidth,_=d[a][0]+b.minTileCol*x,j=d[a][0]+(b.maxTileCol+1)*x,O=f.cellSize*f.tileHeight,S=void 0,M=void 0;"bottomLeft"===f.cornerOfOrigin?(S=d[a][1]+b.minTileRow*O,M=d[a][1]+(b.maxTileRow+1)*O):(S=d[a][1]-(b.maxTileRow+1)*O,M=d[a][1]-b.minTileRow*O),Kn(m,[_,S,j,M],m)}}var E=new Hh({origins:d,resolutions:p,sizes:y,tileSizes:w,extent:i?m:void 0}),T=t.context,A=t.url;return{grid:E,urlTemplate:r,urlFunction:function(t,n,e){if(t){var o=c[t[0]],u=s[o],a="bottomLeft"===u.cornerOfOrigin,f={tileMatrix:o,tileCol:t[1],tileRow:a?-t[2]-1:t[2]};if(i){var l=h[u.id];if(f.tileCol<l.minTileCol||f.tileCol>l.maxTileCol||f.tileRow<l.minTileRow||f.tileRow>l.maxTileRow)return}k(f,T);var v=r.replace(/\{(\w+?)\}/g,(function(t,n){return f[n]}));return jh(A,v)}}}}function Ng(t){return _h(t.url).then((function(n){return function(t,n){var r,i=n.tileMatrixSetLimits;if("map"===n.dataType)r=Ag(n.links,t.mediaType);else{if("vector"!==n.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');r=Cg(n.links,t.mediaType,t.supportedMediaTypes)}if(n.tileMatrixSet)return Pg(t,n.tileMatrixSet,r,i);var e=n.links.find((function(t){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel}));if(!e)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");var o=e.href;return _h(jh(t.url,o)).then((function(n){return Pg(t,n,r,i)}))}(t,n)}))}var Ig=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Lg=function(t){function n(n){var r=this,i=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(i=n.interpolate),r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:pu,tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this,Ng({url:n.url,projection:r.getProjection(),mediaType:n.mediaType,context:n.context||null}).then(r.If.bind(r)).catch(r.Lf.bind(r)),r}return Ig(n,t),n.prototype.If=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(yu)},n.prototype.Lf=function(t){console.error(t),this.setState(wu)},n}(gd),Rg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Gg=function(t){function n(n){var r=this,i=n.projection||"EPSG:3857",e=n.extent||rc(i),o=n.tileGrid||Qh({extent:e,maxResolution:n.maxResolution,maxZoom:void 0!==n.maxZoom?n.maxZoom:22,minZoom:n.minZoom,tileSize:n.tileSize||512});return(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,interpolate:!0,opaque:!1,projection:i,state:n.state,tileGrid:o,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:zg,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:void 0===n.zDirection?1:n.zDirection})||this).Ge=n.format?n.format:null,r.sourceTileCache=new Qf(r.tileCache.highWaterMark),r.Ga=null==n.overlaps||n.overlaps,r.tileClass=n.tileClass?n.tileClass:sh,r.Rf={},r}return Rg(n,t),n.prototype.getFeaturesInExtent=function(t){var n=[],r=this.tileCache;if(0===r.getCount())return n;var i=Hf(r.peekFirstKey())[0],e=this.tileGrid;return r.forEach((function(r){if(r.tileCoord[0]===i&&r.getState()===vt)for(var o=r.getSourceTiles(),u=0,s=o.length;u<s;++u){var a=o[u],f=a.tileCoord;if(tr(t,e.getTileCoordExtent(f))){var h=a.getFeatures();if(h)for(var c=0,l=h.length;c<l;++c){var v=h[c],d=v.getGeometry();tr(t,d.getExtent())&&n.push(v)}}}})),n},n.prototype.getOverlaps=function(){return this.Ga},n.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},n.prototype.expireCache=function(n,r){var i=this.getTileCacheForProjection(n),e=Object.keys(r).reduce((function(t,n){var r=Zf(n);if(i.containsKey(r))for(var e=i.get(r).sourceTiles,o=0,u=e.length;o<u;++o)t[e[o].getKey()]=!0;return t}),{});t.prototype.expireCache.call(this,n,r),this.sourceTileCache.expireCache(e)},n.prototype.getSourceTiles=function(t,n,r){var i=this;if(r.getState()===ct){r.setState(lt);var e=r.wrappedTileCoord,o=this.getTileGridForProjection(n),u=o.getTileCoordExtent(e),s=e[0],a=o.getResolution(s);_n(u,-a,u);var f=this.tileGrid,h=f.getExtent();h&&Kn(u,h,u);var c=f.getZForResolution(a,1);f.forEachTileCoord(u,c,(function(e){var o=i.tileUrlFunction(e,t,n),u=i.sourceTileCache.containsKey(o)?i.sourceTileCache.get(o):new i.tileClass(e,o?ct:pt,o,i.Ge,i.tileLoadFunction);r.sourceTiles.push(u);var s=u.getState();if(s<vt){u.addEventListener(L,(function t(n){i.handleTileChange(n);var e=u.getState();if(e===vt||e===dt){var o=u.getKey();o in r.errorTileKeys?u.getState()===vt&&delete r.errorTileKeys[o]:r.loadingSourceTiles--,e===dt?r.errorTileKeys[o]=!0:u.removeEventListener(L,t),0===r.loadingSourceTiles&&r.setState(P(r.errorTileKeys)?vt:dt)}})),r.loadingSourceTiles++}s===ct&&(u.extent=f.getTileCoordExtent(e),u.projection=n,u.resolution=f.getResolution(e[0]),i.sourceTileCache.set(o,u),u.load())})),r.loadingSourceTiles||r.setState(r.sourceTiles.some((function(t){return t.getState()===dt}))?dt:vt)}return r.sourceTiles},n.prototype.getTile=function(t,n,r,i,e){var o,u=Yf(t,n,r),s=this.getKey();if(this.tileCache.containsKey(u)&&(o=this.tileCache.get(u)).key===s)return o;var a=[t,n,r],f=this.getTileCoordForTileUrlFunction(a,e),h=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(e);if(f&&h){var l=c.getTileCoordExtent(f);_n(l,-c.getResolution(t),l),tr(h,l)||(f=null)}var v=!0;if(null!==f){var d=this.tileGrid,p=c.getResolution(t),y=d.getZForResolution(p,1),w=c.getTileCoordExtent(f);_n(w,-p,w),d.forEachTileCoord(w,y,function(t){v=v&&!this.tileUrlFunction(t,i,e)}.bind(this))}var m=new oh(a,v?pt:ct,f,this.getSourceTiles.bind(this,i,e));return m.key=s,o?(m.interimTile=o,m.refreshInterimChain(),this.tileCache.replace(u,m)):this.tileCache.set(u,m),m},n.prototype.getTileGridForProjection=function(t){var n=t.getCode(),r=this.Rf[n];if(!r){var i=this.tileGrid;r=nc(t,void 0,i?i.getTileSize(i.getMinZoom()):void 0),this.Rf[n]=r}return r},n.prototype.getTilePixelRatio=function(t){return t},n.prototype.getTilePixelSize=function(t,n,r){var i=aa(this.getTileGridForProjection(r).getTileSize(t),this.tmpSize);return[Math.round(i[0]*n),Math.round(i[1]*n)]},n.prototype.updateCacheSize=function(n,r){t.prototype.updateCacheSize.call(this,2*n,r),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(r).highWaterMark},n}(wd);function zg(t,n){t.setLoader((function(r,i,e){dh(n,t.getFormat(),r,i,e,t.onLoad.bind(t),t.onError.bind(t))}))}var Fg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Dg=function(t){function n(n){var r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,format:n.format,overlaps:n.overlaps,projection:n.projection,tileClass:n.tileClass,transition:n.transition,wrapX:n.wrapX,zDirection:n.zDirection,state:pu})||this;return Ng({url:n.url,projection:r.getProjection(),mediaType:n.mediaType,supportedMediaTypes:n.format.supportedMediaTypes,context:n.context||null}).then(r.If.bind(r)).catch(r.Lf.bind(r)),r}return Fg(n,t),n.prototype.If=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState(yu)},n.prototype.Lf=function(t){console.error(t),this.setState(wu)},n}(Gg),Ug=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),qg='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Bg=function(t){function n(n){var r,i=n||{},e=void 0===i.imageSmoothing||i.imageSmoothing;void 0!==i.interpolate&&(e=i.interpolate),r=void 0!==i.attributions?i.attributions:[qg];var o=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",u=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,attributionsCollapsible:!1,cacheSize:i.cacheSize,crossOrigin:o,interpolate:e,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,opaque:void 0===i.opaque||i.opaque,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,transition:i.transition,url:u,wrapX:i.wrapX,zDirection:i.zDirection})||this}return Ug(n,t),n}(Sd),Xg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Vg=function(t){function n(n){var r=n||{};return t.call(this,r)||this}return Xg(n,t),n}(gu),Yg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Wg=null;var Zg,Hg=function(t){function n(n){var r=t.call(this,n)||this;return r.container=null,r.renderedResolution,r.tempTransform=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r.Du=null,r.frameState=null,r}return Yg(n,t),n.prototype.getImageData=function(t,n,r){var i,e;Wg||((i=document.createElement("canvas")).width=1,i.height=1,Wg=i.getContext("2d")),Wg.clearRect(0,0,1,1);try{Wg.drawImage(t,n,r,1,1,0,0,1,1),e=Wg.getImageData(0,0,1,1).data}catch(t){return Wg=null,null}return e},n.prototype.getBackground=function(t){var n=this.getLayer().getBackground();return"function"==typeof n&&(n=n(t.viewState.resolution)),n||void 0},n.prototype.useContainer=function(t,n,r,i){var e,o,u=this.getLayer().getClassName();t&&t.className===u&&""===t.style.opacity&&1===r&&(!i||t&&t.style.backgroundColor&&x(qo(t.style.backgroundColor),qo(i)))&&((a=t.firstElementChild)instanceof HTMLCanvasElement&&(o=a.getContext("2d")));if(o&&o.canvas.style.transform===n?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(e=document.createElement("div")).className=u;var s=e.style;s.position="absolute",s.width="100%",s.height="100%";var a=(o=Eo()).canvas;e.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=e,this.context=o}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)},n.prototype.clipUnrotated=function(t,n,r){var i=$n(r),e=Jn(r),o=Vn(r),u=Xn(r);nn(n.coordinateToPixelTransform,i),nn(n.coordinateToPixelTransform,e),nn(n.coordinateToPixelTransform,o),nn(n.coordinateToPixelTransform,u);var s=this.inversePixelTransform;nn(s,i),nn(s,e),nn(s,o),nn(s,u),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(e[0]),Math.round(e[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()},n.prototype.qu=function(t,n,r){var i=this.getLayer();if(i.hasListener(t)){var e=new Su(t,this.inversePixelTransform,r,n);i.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.frameState=n,this.qu(fu,t,n)},n.prototype.postRender=function(t,n){this.qu(hu,t,n)},n.prototype.getRenderTransform=function(t,n,r,i,e,o,u){var s=e/2,a=o/2,f=i/n,h=-f,c=-t[0]+u,l=-t[1];return sn(this.tempTransform,s,a,f,h,-r,c,l)},n.prototype.getDataAtPixel=function(t,n,r){var i=nn(this.inversePixelTransform,t.slice()),e=this.context,o=this.getLayer().getExtent();if(o&&!Sn(o,nn(n.pixelToCoordinateTransform,t.slice())))return null;var u,s=Math.round(i[0]),a=Math.round(i[1]),f=this.Du;if(!f){var h=document.createElement("canvas");h.width=1,h.height=1,f=h.getContext("2d"),this.Du=f}f.clearRect(0,0,1,1);try{f.drawImage(e.canvas,s,a,1,1,0,0,1,1),u=f.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.Du=null,new Uint8Array):u}return 0===u[3]?null:u},n.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},n}(Ol),Kg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$g=function(t){function n(n){var r=t.call(this,n)||this;return r.Lt=null,r}return Kg(n,t),n.prototype.getImage=function(){return this.Lt?this.Lt.getImage():null},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,i=t.viewState,e=i.resolution,o=this.getLayer().getSource(),u=t.viewHints,s=t.extent;if(void 0!==n.extent&&(s=Kn(s,Fi(n.extent,i.projection))),!u[Rs]&&!u[Gs]&&!nr(s))if(o){var a=i.projection,f=o.getImage(s,e,r,a);f&&(this.loadImage(f)?this.Lt=f:f.getState()===xo&&(this.Lt=null))}else this.Lt=null;return!!this.Lt},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var r=this.getLayer(),i=nn(n.pixelToCoordinateTransform,t.slice()),e=r.getExtent();if(e&&!Sn(e,i))return null;var o=this.Lt.getExtent(),u=this.Lt.getImage(),s=Qn(o),a=Math.floor(u.width*((i[0]-o[0])/s));if(a<0||a>=u.width)return null;var f=Hn(o),h=Math.floor(u.height*((o[3]-i[1])/f));return h<0||h>=u.height?null:this.getImageData(u,a,h)},n.prototype.renderFrame=function(t,n){var r=this.Lt,i=r.getExtent(),e=r.getResolution(),o=r.getPixelRatio(),u=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,a=t.viewState,f=a.center,h=a.resolution,c=t.size,l=s*e/(h*o),v=Math.round(c[0]*s),d=Math.round(c[1]*s),p=a.rotation;if(p){var y=Math.round(Math.sqrt(v*v+d*d));v=y,d=y}sn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,p,-v/2,-d/2),an(this.inversePixelTransform,this.pixelTransform);var w=hn(this.pixelTransform);this.useContainer(n,w,u.opacity,this.getBackground(t));var m=this.context,b=m.canvas;b.width!=v||b.height!=d?(b.width=v,b.height=d):this.containerReused||m.clearRect(0,0,v,d);var g=!1,x=!0;if(u.extent){var _=Fi(u.extent,a.projection);(g=(x=tr(_,t.extent))&&!Mn(_,t.extent))&&this.clipUnrotated(m,t,_)}var j=r.getImage(),O=sn(this.tempTransform,v/2,d/2,l,l,0,o*(i[0]-f[0])/e,o*(f[1]-i[3])/e);this.renderedResolution=e*s/o;var S=j.width*O[0],M=j.height*O[3];if(this.getLayer().getSource().getInterpolate()||k(m,Uh),this.preRender(m,t),x&&S>=.5&&M>=.5){var E=O[4],T=O[5],A=u.opacity,C=void 0;1!==A&&(C=m.globalAlpha,m.globalAlpha=A),m.drawImage(j,0,0,+j.width,+j.height,Math.round(E),Math.round(T),Math.round(S),Math.round(M)),1!==A&&(m.globalAlpha=C)}return this.postRender(m,t),g&&m.restore(),k(m,qh),w!==b.style.transform&&(b.style.transform=w),this.container},n}(Hg),Jg=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Qg=function(t){function n(n){return t.call(this,n)||this}return Jg(n,t),n.prototype.createRenderer=function(){return new $g(this)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(Vg),tx="preload",nx="useInterimTilesOnError",rx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ix=function(t){function n(n){var r=this,i=n||{},e=k({},i);return delete e.preload,delete e.useInterimTilesOnError,(r=t.call(this,e)||this).on,r.once,r.un,r.setPreload(void 0!==i.preload?i.preload:0),r.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),r}return rx(n,t),n.prototype.getPreload=function(){return this.get(tx)},n.prototype.setPreload=function(t){this.set(tx,t)},n.prototype.getUseInterimTilesOnError=function(){return this.get(nx)},n.prototype.setUseInterimTilesOnError=function(t){this.set(nx,t)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(gu),ex=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ox=function(t){function n(n){var r=t.call(this,n)||this;return r.extentChanged=!0,r.Gf=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.zf=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.Ff=new rh(0,0,0,0),r}return ex(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),r=t.getState(),i=n.getUseInterimTilesOnError();return r==vt||r==pt||r==dt&&!i},n.prototype.getTile=function(t,n,r,i){var e=i.pixelRatio,o=i.viewState.projection,u=this.getLayer(),s=u.getSource().getTile(t,n,r,e,o);return s.getState()==dt&&(u.getUseInterimTilesOnError()?u.getPreload()>0&&(this.zf=!0):s.setState(vt)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var r=this.getLayer(),i=nn(n.pixelToCoordinateTransform,t.slice()),e=r.getExtent();if(e&&!Sn(e,i))return null;for(var o=n.pixelRatio,u=n.viewState.projection,s=n.viewState,a=r.getRenderSource(),f=a.getTileGridForProjection(s.projection),h=a.getTilePixelRatio(n.pixelRatio),c=f.getZForResolution(s.resolution);c>=f.getMinZoom();--c){var l=f.getTileCoordForCoordAndZ(i,c),v=a.getTile(c,l[1],l[2],o,u);if(!(v instanceof Lo||v instanceof wl))return null;if(v.getState()===vt){var d=f.getOrigin(c),p=aa(f.getTileSize(c)),y=f.getResolution(c),w=Math.floor(h*((i[0]-d[0])/y-l[1]*p[0])),m=Math.floor(h*((d[1]-i[1])/y-l[2]*p[1])),b=Math.round(h*a.getGutterForProjection(s.projection));return this.getImageData(v.getImage(),w+b,m+b)}}return null},n.prototype.loadedTileCallback=function(n,r,i){return!!this.isDrawableTile(i)&&t.prototype.loadedTileCallback.call(this,n,r,i)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,n){var r=t.layerStatesArray[t.layerIndex],i=t.viewState,e=i.projection,u=i.resolution,s=i.center,a=i.rotation,f=t.pixelRatio,h=this.getLayer(),c=h.getSource(),l=c.getRevision(),v=c.getTileGridForProjection(e),d=v.getZForResolution(u,c.zDirection),y=v.getResolution(d),w=t.extent,m=r.extent&&Fi(r.extent,e);m&&(w=Kn(w,Fi(r.extent,e)));var b=c.getTilePixelRatio(f),g=Math.round(t.size[0]*b),x=Math.round(t.size[1]*b);if(a){var _=Math.round(Math.sqrt(g*g+x*x));g=_,x=_}var j=y*g/2/b,O=y*x/2/b,S=[s[0]-j,s[1]-O,s[0]+j,s[1]+O],M=v.getTileRangeForExtentAndZ(w,d),E={};E[d]={};var T=this.createLoadedTileFinder(c,e,E),A=this.tmpExtent,C=this.Ff;this.zf=!1;for(var P=M.minX;P<=M.maxX;++P)for(var N=M.minY;N<=M.maxY;++N){var I=this.getTile(d,P,N,t);if(this.isDrawableTile(I)){var L=o(this);if(I.getState()==vt){E[d][I.tileCoord.toString()]=I;var R=I.inTransition(L);this.zf||!R&&-1!==this.renderedTiles.indexOf(I)||(this.zf=!0)}if(1===I.getAlpha(L,t.time))continue}var G=v.getTileCoordChildTileRange(I.tileCoord,C,A),z=!1;G&&(z=T(d+1,G)),z||v.forEachTileCoordParentTileRange(I.tileCoord,T,C,A)}var F=y/u;sn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/b,1/b,a,-g/2,-x/2);var D=hn(this.pixelTransform);this.useContainer(n,D,r.opacity,this.getBackground(t));var U=this.context,q=U.canvas;an(this.inversePixelTransform,this.pixelTransform),sn(this.tempTransform,g/2,x/2,F,F,0,-g/2,-x/2),q.width!=g||q.height!=x?(q.width=g,q.height=x):this.containerReused||U.clearRect(0,0,g,x),m&&this.clipUnrotated(U,t,m),c.getInterpolate()||k(U,Uh),this.preRender(U,t),this.renderedTiles.length=0;var B,X,V,Y=Object.keys(E).map(Number);Y.sort(p),1!==r.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(B=[],X=[]):Y=Y.reverse();for(var W=Y.length-1;W>=0;--W){var Z=Y[W],H=c.getTilePixelSize(Z,f,e),K=v.getResolution(Z)/y,$=H[0]*K*F,J=H[1]*K*F,Q=v.getTileCoordForCoordAndZ($n(S),Z),tt=v.getTileCoordExtent(Q),nt=nn(this.tempTransform,[b*(tt[0]-S[0])/y,b*(S[3]-tt[3])/y]),rt=b*c.getGutterForProjection(e),it=E[Z];for(var et in it){var ot=(I=it[et]).tileCoord,ut=Q[1]-ot[1],st=Math.round(nt[0]-(ut-1)*$),at=Q[2]-ot[2],ft=Math.round(nt[1]-(at-1)*J),ht=st-(P=Math.round(nt[0]-ut*$)),ct=ft-(N=Math.round(nt[1]-at*J)),lt=d===Z,dt=!1;if(!(R=lt&&1!==I.getAlpha(o(this),t.time)))if(B){V=[P,N,P+ht,N,P+ht,N+ct,P,N+ct];for(var pt=0,yt=B.length;pt<yt;++pt)if(d!==Z&&Z<X[pt]){var wt=B[pt];tr([P,N,P+ht,N+ct],[wt[0],wt[3],wt[4],wt[7]])&&(dt||(U.save(),dt=!0),U.beginPath(),U.moveTo(V[0],V[1]),U.lineTo(V[2],V[3]),U.lineTo(V[4],V[5]),U.lineTo(V[6],V[7]),U.moveTo(wt[6],wt[7]),U.lineTo(wt[4],wt[5]),U.lineTo(wt[2],wt[3]),U.lineTo(wt[0],wt[1]),U.clip())}B.push(V),X.push(Z)}else U.clearRect(P,N,ht,ct);this.drawTileImage(I,t,P,N,ht,ct,rt,lt),B&&!R?(dt&&U.restore(),this.renderedTiles.unshift(I)):this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,c,I)}}this.renderedRevision=l,this.renderedResolution=y,this.extentChanged=!this.Gf||!In(this.Gf,S),this.Gf=S,this.renderedPixelRatio=f,this.renderedProjection=e,this.manageTilePyramid(t,c,v,f,e,w,d,h.getPreload()),this.scheduleExpireCache(t,c),this.postRender(U,t),r.extent&&U.restore(),k(U,qh),D!==q.style.transform&&(q.style.transform=D);var mt=Lu(r.opacity),bt=this.container;return mt!==bt.style.opacity&&(bt.style.opacity=mt),this.container},n.prototype.drawTileImage=function(t,n,r,i,e,u,s,a){var f=this.getTileImage(t);if(f){var h=o(this),c=a?t.getAlpha(h,n.time):1,l=c!==this.context.globalAlpha;l&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(f,s,s,f.width-2*s,f.height-2*s,r,i,e,u),l&&this.context.restore(),1!==c?n.animate=!0:a&&t.endTransition(h)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var r=function(t,n,r){var i=o(t);i in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,n);t.postRenderFunctions.push(r)}},n.prototype.updateUsedTiles=function(t,n,r){var i=o(n);i in t||(t[i]={}),t[i][r.getKey()]=!0},n.prototype.manageTilePyramid=function(t,n,r,i,e,u,s,a,f){var h=o(n);h in t.wantedTiles||(t.wantedTiles[h]={});var c,l,v,d,p,y,w=t.wantedTiles[h],m=t.tileQueue,b=0;for(y=r.getMinZoom();y<=s;++y)for(l=r.getTileRangeForExtentAndZ(u,y,l),v=r.getResolution(y),d=l.minX;d<=l.maxX;++d)for(p=l.minY;p<=l.maxY;++p)s-y<=a?(++b,(c=n.getTile(y,d,p,i,e)).getState()==ct&&(w[c.getKey()]=!0,m.isKeyQueued(c.getKey())||m.enqueue([c,h,r.getTileCoordCenter(c.tileCoord),v])),void 0!==f&&f(c)):n.useTile(y,d,p,e);n.updateCacheSize(b,e)},n}(Hg),ux=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),sx=function(t){function n(n){return t.call(this,n)||this}return ux(n,t),n.prototype.createRenderer=function(){return new ox(this)},n}(ix),ax=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),fx=!0;try{new ImageData(10,10)}catch(t){fx=!1}function hx(t,n,r){if(fx)return new ImageData(t,n,r);Zg||(Zg=document.createElement("canvas").getContext("2d"));var i=Zg.createImageData(n,r);return i.data.set(t),i}function cx(t){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}function r(t,r,i){return n?new ImageData(t,r,i):{data:t,width:r,height:i}}return function(n){var i=n.buffers,e=n.meta,o=n.imageOps,u=n.width,s=n.height,a=i.length,f=i[0].byteLength;if(o){for(var h=new Array(a),c=0;c<a;++c)h[c]=r(new Uint8ClampedArray(i[c]),u,s);return t(h,e).data.buffer}var l=new Uint8ClampedArray(f),v=new Array(a),d=new Array(a);for(c=0;c<a;++c)v[c]=new Uint8ClampedArray(i[c]),d[c]=[0,0,0,0];for(var p=0;p<f;p+=4){for(var y=0;y<a;++y){var w=v[y];d[y][0]=w[p],d[y][1]=w[p+1],d[y][2]=w[p+2],d[y][3]=w[p+3]}var m=t(d,e);l[p]=m[0],l[p+1]=m[1],l[p+2]=m[2],l[p+3]=m[3]}return l.buffer}}function lx(t,n){var r=Object.keys(t.lib||{}).map((function(n){return"var "+n+" = "+t.lib[n].toString()+";"})).concat(["var __minion__ = ("+cx.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(r.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",n),i}var vx=function(t){function n(n){var r,i=t.call(this)||this;i._imageOps=!!n.imageOps,r=0===n.threads?0:i._imageOps?1:n.threads||1;var e=new Array(r);if(r)for(var o=0;o<r;++o)e[o]=lx(n,i._onWorkerMessage.bind(i,o));else e[0]=function(t,n){var r=cx(t.operation),i=!1;return{postMessage:function(t){setTimeout((function(){i||n({data:{buffer:r(t),meta:t.meta}})}),0)},terminate:function(){i=!0}}}(n,i._onWorkerMessage.bind(i,0));return i._workers=e,i._queue=[],i._maxQueueLength=n.queue||1/0,i._running=0,i._dataLookup={},i._job=null,i}return ax(n,t),n.prototype.process=function(t,n,r){this._enqueue({inputs:t,meta:n,callback:r}),this._dispatch()},n.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},n.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var n=t.inputs[0].width,r=t.inputs[0].height,i=t.inputs.map((function(t){return t.data.buffer})),e=this._workers.length;if(this._running=e,1!==e)for(var o=t.inputs[0].data.length,u=4*Math.ceil(o/4/e),s=0;s<e;++s){for(var a=s*u,f=[],h=0,c=i.length;h<c;++h)f.push(i[h].slice(a,a+u));this._workers[s].postMessage({buffers:f,meta:t.meta,imageOps:this._imageOps,width:n,height:r},f)}else this._workers[0].postMessage({buffers:i,meta:t.meta,imageOps:this._imageOps,width:n,height:r},i)}},n.prototype._onWorkerMessage=function(t,n){this.disposed||(this._dataLookup[t]=n.data,--this._running,0===this._running&&this._resolveJob())},n.prototype._resolveJob=function(){var t,n,r=this._job,i=this._workers.length;if(1===i)t=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{var e=r.inputs[0].data.length;t=new Uint8ClampedArray(e),n=new Array(i);for(var o=4*Math.ceil(e/4/i),u=0;u<i;++u){var s=this._dataLookup[u].buffer,a=u*o;t.set(new Uint8ClampedArray(s),a),n[u]=this._dataLookup[u].meta}}this._job=null,this._dataLookup={},r.callback(null,hx(t,r.inputs[0].width,r.inputs[0].height),n),this._dispatch()},n.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},n}(v),dx="beforeoperations",px="afteroperations",yx="pixel",wx="image",mx=function(t){function n(n,r,i){var e=t.call(this,n)||this;return e.extent=r.extent,e.resolution=r.viewState.resolution/r.pixelRatio,e.data=i,e}return ax(n,t),n}(c),bx=function(t){function n(n){var r=t.call(this,{projection:null})||this;r.on,r.once,r.un,r.Df=null,r.Uf=void 0!==n.operationType?n.operationType:yx,r.qf=void 0!==n.threads?n.threads:1,r.Bf=function(t){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=_x(t[i]);return r}(n.sources);for(var i,e=r.changed.bind(r),u=0,s=r.Bf.length;u<s;++u)r.Bf[u].addEventListener(L,e);return r.ci=new Is((function(){return 1}),r.changed.bind(r)),r.Xf,r.Vf=null,r.Of,r.$r={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(i=r.Bf,i.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:r.ci,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:o(r),renderTargets:{}},r.setAttributions((function(t){for(var r=[],i=0,e=n.sources.length;i<e;++i){var o=n.sources[i],u=(o instanceof cd?o:o.getSource()).getAttributions();if("function"==typeof u){var s=u(t);r.push.apply(r,s)}}return 0!==r.length?r:null})),void 0!==n.operation&&r.setOperation(n.operation,n.lib),r}return ax(n,t),n.prototype.setOperation=function(t,n){this.Df&&this.Df.dispose(),this.Df=new vx({operation:t,imageOps:this.Uf===wx,queue:1,lib:n,threads:this.qf}),this.changed()},n.prototype.Yf=function(t,n,r){var i=k({},this.$r);i.viewState=k({},i.viewState);var e=Yn(t);i.extent=t.slice(),i.size[0]=Math.round(Qn(t)/n),i.size[1]=Math.round(Hn(t)/n),i.time=Date.now();var o=i.viewState;return o.center=e,o.projection=r,o.resolution=n,i},n.prototype.Wf=function(){for(var t=!0,n=0,r=this.Bf.length;n<r;++n)if(this.Bf[n].getSource().getState()!==yu){t=!1;break}return t},n.prototype.getImage=function(t,n,r,i){if(!this.Wf())return null;var e=this.Yf(t,n,i);if(this.Xf=e,this.Vf){var o=this.Vf.getResolution(),u=this.Vf.getExtent();n===o&&In(t,u)||(this.Vf=null)}return this.Vf&&this.getRevision()===this.Of||this.Zf(),e.tileQueue.loadMoreTiles(16,16),e.animate&&requestAnimationFrame(this.changed.bind(this)),this.Vf},n.prototype.Zf=function(){for(var t=this.Xf,n=this.Bf.length,r=new Array(n),i=0;i<n;++i){t.layerIndex=i;var e=xx(this.Bf[i],t);if(!e)return;r[i]=e}var o={};this.dispatchEvent(new mx(dx,t,o)),this.Df.process(r,o,this.Hf.bind(this,t))},n.prototype.Hf=function(t,n,r,i){if(!n&&r){var e=t.extent,o=t.viewState.resolution;if(o===this.Xf.viewState.resolution&&In(e,this.Xf.extent)){var u;if(this.Vf)u=this.Vf.getImage().getContext("2d");else u=Eo(Math.round(Qn(e)/o),Math.round(Hn(e)/o)),this.Vf=new Mo(e,o,1,u.canvas);u.putImageData(r,0,0),this.changed(),this.Of=this.getRevision(),this.dispatchEvent(new mx(px,t,i)),t.animate&&requestAnimationFrame(this.changed.bind(this))}}},n.prototype.disposeInternal=function(){this.Df&&this.Df.dispose(),t.prototype.disposeInternal.call(this)},n}(cg);bx.prototype.dispose;var gx=null;function xx(t,n){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(n))return null;var i=n.size[0],e=n.size[1];if(0===i||0===e)return null;var o,u=r.renderFrame(n,null);if(u instanceof HTMLCanvasElement)o=u;else{if(u&&(o=u.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===i&&o.height===e)return o.getContext("2d").getImageData(0,0,i,e)}if(gx){var s=gx.canvas;s.width!==i||s.height!==e?gx=Eo(i,e):gx.clearRect(0,0,i,e)}else gx=Eo(i,e);return gx.drawImage(o,0,0,i,e),gx.getImageData(0,0,i,e)}function _x(t){var n;return t instanceof cd?t instanceof pd?n=new sx({source:t}):t instanceof cg&&(n=new Qg({source:t})):n=t,n}var jx=bx,Ox=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Sx=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',qg],Mx={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},Ex={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},Tx=function(t){function n(n){var r=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(r=n.interpolate);var i=n.layer.indexOf("-"),e=-1==i?n.layer:n.layer.slice(0,i),o=Ex[e],u=Mx[n.layer],s=void 0!==n.url?n.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+n.layer+"/{z}/{x}/{y}."+u.extension;return t.call(this,{attributions:Sx,cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:r,maxZoom:null!=n.maxZoom?n.maxZoom:o.maxZoom,minZoom:null!=n.minZoom?n.minZoom:o.minZoom,opaque:u.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:s,wrapX:n.wrapX,zDirection:n.zDirection})||this}return Ox(n,t),n}(Sd),kx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ax=function(t){function n(n){var r=this,i=n||{},e=void 0===i.imageSmoothing||i.imageSmoothing;return void 0!==i.interpolate&&(e=i.interpolate),(r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:e,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection})||this)._f=i.params||{},r.Oa=void 0===i.hidpi||i.hidpi,r.Ao=[1/0,1/0,-1/0,-1/0],r.setKey(r.Kf()),r}return kx(n,t),n.prototype.Kf=function(){var t=0,n=[];for(var r in this._f)n[t++]=r+"-"+this._f[r];return n.join("/")},n.prototype.getParams=function(){return this._f},n.prototype.Mf=function(t,n,r,i,e,o){var u=this.urls;if(u){var s,a=e.getCode().split(/:(?=\d+$)/).pop();if(o.SIZE=n[0]+","+n[1],o.BBOX=r.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(o.DPI?o.DPI*i:90*i),1==u.length)s=u[0];else s=u[wr(Kf(t),u.length)];return ac(s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},n.prototype.getTilePixelRatio=function(t){return this.Oa?t:1},n.prototype.updateParams=function(t){k(this._f,t),this.setKey(this.Kf())},n.prototype.tileUrlFunction=function(t,n,r){var i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),!(i.getResolutions().length<=t[0])){1==n||this.Oa||(n=1);var e=i.getTileCoordExtent(t,this.Ao),o=aa(i.getTileSize(t[0]),this.tmpSize);1!=n&&(o=sa(o,n,this.tmpSize));var u={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return k(u,this._f),this.Mf(t,o,e,n,r,u)}},n}(gd),Cx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Px=function(t){function n(n){var r=this,i=n||{};return r=t.call(this,{opaque:!1,projection:i.projection,tileGrid:i.tileGrid,wrapX:void 0===i.wrapX||i.wrapX,zDirection:i.zDirection,url:i.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,n){var i=t.getTileCoord()[0],e=aa(r.tileGrid.getTileSize(i)),o=Eo(e[0],e[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,e[0]+.5,e[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,e[0]/2,e[1]/2,e[0]),o.fillText(n,e[0]/2,e[1]/2,e[0]),t.setImage(o.canvas)}})||this}return Cx(n,t),n}(Sd),Nx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ix=function(t){function n(n){var r=this,i=void 0===n.imageSmoothing||n.imageSmoothing;if(void 0!==n.interpolate&&(i=n.interpolate),(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,projection:gi("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:pu,tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).$f=null,r.Eo=n.tileSize,n.url)if(n.jsonp)mh(n.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var e=new XMLHttpRequest;e.addEventListener("load",r.Jf.bind(r)),e.addEventListener("error",r.Qf.bind(r)),e.open("GET",n.url),e.send()}else n.tileJSON?r.handleTileJSONResponse(n.tileJSON):Ot(!1,51);return r}return Nx(n,t),n.prototype.Jf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var r=void 0;try{r=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},n.prototype.Qf=function(t){this.handleTileJSONError()},n.prototype.getTileJSON=function(){return this.$f},n.prototype.handleTileJSONResponse=function(t){var n,r=gi("EPSG:4326"),i=this.getProjection();if(void 0!==t.bounds){var e=ki(r,i);n=or(t.bounds,e)}var o=rc(i),u=t.minzoom||0,s=Qh({extent:o,maxZoom:t.maxzoom||22,minZoom:u,tileSize:this.Eo});if(this.tileGrid=s,this.tileUrlFunction=ec(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var a=void 0!==n?n:o;this.setAttributions((function(n){return tr(a,n.extent)?[t.attribution]:null}))}this.$f=t,this.setState(yu)},n.prototype.handleTileJSONError=function(){this.setState(wu)},n}(gd),Lx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Rx=function(t){function n(n){var r=this,i=n||{},e=void 0===i.imageSmoothing||i.imageSmoothing;void 0!==i.interpolate&&(e=i.interpolate);var o=i.params||{},u=!("TRANSPARENT"in o)||o.TRANSPARENT;return(r=t.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:e,opaque:!u,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection})||this).Ou=void 0!==i.gutter?i.gutter:0,r._f=o,r.Cf=!0,r.Nf=i.serverType,r.Oa=void 0===i.hidpi||i.hidpi,r.Ao=[1/0,1/0,-1/0,-1/0],r.Pf(),r.setKey(r.Kf()),r}return Lx(n,t),n.prototype.getFeatureInfoUrl=function(t,n,r,i){var e=gi(r),o=this.getProjection(),u=this.getTileGrid();u||(u=this.getTileGridForProjection(e));var s=u.getZForResolution(n,this.zDirection),a=u.getTileCoordForCoordAndZ(t,s);if(!(u.getResolutions().length<=a[0])){var f=u.getResolution(a[0]),h=u.getTileCoordExtent(a,this.Ao),c=aa(u.getTileSize(a[0]),this.tmpSize),l=this.Ou;0!==l&&(c=oa(c,l,this.tmpSize),h=_n(h,f*l,h)),o&&o!==e&&(f=Vh(o,e,t,f),h=Pi(h,e,o),t=Ci(t,e,o));var v={SERVICE:"WMS",VERSION:gg,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this._f.LAYERS};k(v,this._f,i);var d=Math.floor((t[0]-h[0])/f),p=Math.floor((h[3]-t[1])/f);return v[this.Cf?"I":"X"]=d,v[this.Cf?"J":"Y"]=p,this.Mf(a,c,h,1,o||e,v)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:gg,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var i=this._f.LAYERS;if(!(!Array.isArray(i)||1===i.length))return;r.LAYER=i}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*e/28e-5}return k(r,n),ac(this.urls[0],r)}},n.prototype.getGutter=function(){return this.Ou},n.prototype.getParams=function(){return this._f},n.prototype.Mf=function(t,n,r,i,e,o){var u=this.urls;if(u){if(o.WIDTH=n[0],o.HEIGHT=n[1],o[this.Cf?"CRS":"SRS"]=e.getCode(),"STYLES"in this._f||(o.STYLES=""),1!=i)switch(this.Nf){case _g:var s=90*i+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case jg:o.MAP_RESOLUTION=90*i;break;case xg:case Og:o.DPI=90*i;break;default:Ot(!1,52)}var a,f=e.getAxisOrientation(),h=r;if(this.Cf&&"ne"==f.substr(0,2)){var c=void 0;c=r[0],h[0]=r[1],h[1]=c,c=r[2],h[2]=r[3],h[3]=c}if(o.BBOX=h.join(","),1==u.length)a=u[0];else a=u[wr(Kf(t),u.length)];return ac(a,o)}},n.prototype.getTilePixelRatio=function(t){return this.Oa&&void 0!==this.Nf?t:1},n.prototype.Kf=function(){var t=0,n=[];for(var r in this._f)n[t++]=r+"-"+this._f[r];return n.join("/")},n.prototype.updateParams=function(t){k(this._f,t),this.Pf(),this.setKey(this.Kf())},n.prototype.Pf=function(){var t=this._f.VERSION||gg;this.Cf=Zr(t,"1.3")>=0},n.prototype.tileUrlFunction=function(t,n,r){var i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),!(i.getResolutions().length<=t[0])){1==n||this.Oa&&void 0!==this.Nf||(n=1);var e=i.getResolution(t[0]),o=i.getTileCoordExtent(t,this.Ao),u=aa(i.getTileSize(t[0]),this.tmpSize),s=this.Ou;0!==s&&(u=oa(u,s,this.tmpSize),o=_n(o,e*s,o)),1!=n&&(u=sa(u,n,this.tmpSize));var a={SERVICE:"WMS",VERSION:gg,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return k(a,this._f),this.Mf(t,u,o,n,r,a)}},n}(gd),Gx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),zx=function(t){function n(n,r,i,e,o,u){var s=t.call(this,n,r)||this;return s.Nt=i,s.ut=e,s.th=o,s.nh=null,s.rh=null,s.B=null,s.ih=u,s}return Gx(n,t),n.prototype.getImage=function(){return null},n.prototype.getData=function(t){if(!this.nh||!this.rh)return null;var n=(t[0]-this.ut[0])/(this.ut[2]-this.ut[0]),r=(t[1]-this.ut[1])/(this.ut[3]-this.ut[1]),i=this.nh[Math.floor((1-r)*this.nh.length)];if("string"!=typeof i)return null;var e=i.charCodeAt(Math.floor(n*i.length));e>=93&&e--,e>=35&&e--;var o=null;if((e-=32)in this.rh){var u=this.rh[e];o=this.B&&u in this.B?this.B[u]:u}return o},n.prototype.forDataAtCoordinate=function(t,n,r){this.state==pt&&!0===r?(this.state=ct,K(this,L,(function(r){n(this.getData(t))}),this),this.eh()):!0===r?setTimeout(function(){n(this.getData(t))}.bind(this),0):n(this.getData(t))},n.prototype.getKey=function(){return this.Nt},n.prototype.Lf=function(){this.state=dt,this.changed()},n.prototype.qt=function(t){this.nh=t.grid,this.rh=t.keys,this.B=t.data,this.state=vt,this.changed()},n.prototype.eh=function(){if(this.state==ct)if(this.state=lt,this.ih)mh(this.Nt,this.qt.bind(this),this.Lf.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.Jf.bind(this)),t.addEventListener("error",this.Qf.bind(this)),t.open("GET",this.Nt),t.send()}},n.prototype.Jf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var r=void 0;try{r=JSON.parse(n.responseText)}catch(t){return void this.Lf()}this.qt(r)}else this.Lf()},n.prototype.Qf=function(t){this.Lf()},n.prototype.load=function(){this.th?this.eh():this.setState(pt)},n}(xt),Fx=function(t){function n(n){var r=t.call(this,{projection:gi("EPSG:3857"),state:pu,zDirection:n.zDirection})||this;if(r.th=void 0===n.preemptive||n.preemptive,r.oh=uc,r.uh=void 0,r.ih=n.jsonp||!1,n.url)if(r.ih)mh(n.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var i=new XMLHttpRequest;i.addEventListener("load",r.Jf.bind(r)),i.addEventListener("error",r.Qf.bind(r)),i.open("GET",n.url),i.send()}else n.tileJSON?r.handleTileJSONResponse(n.tileJSON):Ot(!1,51);return r}return Gx(n,t),n.prototype.Jf=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var r=void 0;try{r=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},n.prototype.Qf=function(t){this.handleTileJSONError()},n.prototype.getTemplate=function(){return this.uh},n.prototype.forDataAtCoordinateAndResolution=function(t,n,r,i){if(this.tileGrid){var e=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,i)}else!0===i?setTimeout((function(){r(null)}),0):r(null)},n.prototype.handleTileJSONError=function(){this.setState(wu)},n.prototype.handleTileJSONResponse=function(t){var n,r=gi("EPSG:4326"),i=this.getProjection();if(void 0!==t.bounds){var e=ki(r,i);n=or(t.bounds,e)}var o=rc(i),u=t.minzoom||0,s=Qh({extent:o,maxZoom:t.maxzoom||22,minZoom:u});this.tileGrid=s,this.uh=t.template;var a=t.grids;if(a){if(this.oh=ec(a,s),void 0!==t.attribution){var f=void 0!==n?n:o;this.setAttributions((function(n){return tr(f,n.extent)?[t.attribution]:null}))}this.setState(yu)}else this.setState(wu)},n.prototype.getTile=function(t,n,r,i,e){var o=Yf(t,n,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var u=[t,n,r],s=this.getTileCoordForTileUrlFunction(u,e),a=this.oh(s,i,e),f=new zx(u,void 0!==a?ct:pt,void 0!==a?a:"",this.tileGrid.getTileCoordExtent(u),this.th,this.ih);return this.tileCache.set(o,f),f},n.prototype.useTile=function(t,n,r){var i=Yf(t,n,r);this.tileCache.containsKey(i)&&this.tileCache.get(i)},n}(pd),Dx="KVP",Ux="REST",qx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Bx=function(t){function n(n){var r=this,i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var e=void 0!==n.requestEncoding?n.requestEncoding:Dx,o=n.tileGrid,u=n.urls;return void 0===u&&void 0!==n.url&&(u=sc(n.url)),(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,urls:u,wrapX:void 0!==n.wrapX&&n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).sh=void 0!==n.version?n.version:"1.0.0",r.Ge=void 0!==n.format?n.format:"image/jpeg",r.ah=void 0!==n.dimensions?n.dimensions:{},r.zu=n.layer,r.fh=n.matrixSet,r.$=n.style,r.hh=e,r.setKey(r.lh()),u&&u.length>0&&(r.tileUrlFunction=oc(u.map(r.createFromWMTSTemplate.bind(r)))),r}return qx(n,t),n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.setTileUrlFunction(oc(t.map(this.createFromWMTSTemplate.bind(this))),n)},n.prototype.getDimensions=function(){return this.ah},n.prototype.getFormat=function(){return this.Ge},n.prototype.getLayer=function(){return this.zu},n.prototype.getMatrixSet=function(){return this.fh},n.prototype.getRequestEncoding=function(){return this.hh},n.prototype.getStyle=function(){return this.$},n.prototype.getVersion=function(){return this.sh},n.prototype.lh=function(){var t=0,n=[];for(var r in this.ah)n[t++]=r+"-"+this.ah[r];return n.join("/")},n.prototype.updateDimensions=function(t){k(this.ah,t),this.setKey(this.lh())},n.prototype.createFromWMTSTemplate=function(t){var n=this.hh,r={layer:this.zu,style:this.$,tilematrixset:this.fh};n==Dx&&k(r,{Service:"WMTS",Request:"GetTile",Version:this.sh,Format:this.Ge}),t=n==Dx?ac(t,r):t.replace(/\{(\w+?)\}/g,(function(t,n){return n.toLowerCase()in r?r[n.toLowerCase()]:t}));var i=this.tileGrid,e=this.ah;return function(r,o,u){if(r){var s={TileMatrix:i.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};k(s,e);var a=t;return a=n==Dx?ac(a,s):a.replace(/\{(\w+?)\}/g,(function(t,n){return s[n]}))}}},n}(gd);var Xx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Vx="renderOrder",Yx=function(t){function n(n){var r=this,i=n||{},e=k({},i);return delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,(r=t.call(this,e)||this).dh=void 0!==i.declutter&&i.declutter,r.ph=void 0!==i.renderBuffer?i.renderBuffer:100,r.$=null,r.tt=void 0,r.setStyle(i.style),r.yh=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,r.wh=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,r}return Xx(n,t),n.prototype.getDeclutter=function(){return this.dh},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderBuffer=function(){return this.ph},n.prototype.getRenderOrder=function(){return this.get(Vx)},n.prototype.getStyle=function(){return this.$},n.prototype.getStyleFunction=function(){return this.tt},n.prototype.getUpdateWhileAnimating=function(){return this.yh},n.prototype.getUpdateWhileInteracting=function(){return this.wh},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new ed(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(Vx,t)},n.prototype.setStyle=function(t){this.$=void 0!==t?t:Kv,this.tt=null===t?void 0:Zv(this.$),this.changed()},n}(gu);var Wx=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Zx=function(t){function n(n,r){var i=this,e=r.uniforms||{},u=[1,0,0,1,0,0];e[Jc]=u,(i=t.call(this,n,{uniforms:e,postProcesses:r.postProcesses})||this).ready=!1,i.mh=-1,i.bh=new Vc(hc,vc),i.gh=new Vc(hc,vc),i.xh=new Vc(cc,vc),i.Hu=r.vertexShader,i.Ku=r.fragmentShader,i.Zu,i._h=!(!r.hitFragmentShader||!r.hitVertexShader),i.jh=r.hitVertexShader,i.Oh=r.hitFragmentShader,i.Sh;var s=r.attributes?r.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:el.FLOAT}})):[];i.attributes=[{name:"a_position",size:2,type:el.FLOAT},{name:"a_index",size:1,type:el.FLOAT}].concat(s),i.hitDetectionAttributes=[{name:"a_position",size:2,type:el.FLOAT},{name:"a_index",size:1,type:el.FLOAT},{name:"a_hitColor",size:4,type:el.FLOAT},{name:"a_featureUid",size:1,type:el.FLOAT}].concat(s),i.customAttributes=r.attributes?r.attributes:[],i.Jr=[1/0,1/0,-1/0,-1/0],i.Mh=u,i.Eh=[1,0,0,1,0,0],i.Th=[1,0,0,1,0,0],i.kh=new Float32Array(0),i.Ah=new Float32Array(0),i.Ch,i.Ph=0,i.Nh=function(){var t='function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}(e)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var u="change",f=function(){function t(){e(this,t),this.disposed=!1}return n(t,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}]),t}(),l=function(){function t(n){e(this,t),this.propagationStopped,this.defaultPrevented,this.type=n,this.target=null}return n(t,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),t}();function c(){}var v="function"==typeof Object.assign?Object.assign:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}return n};function h(e){for(var t in e)delete e[t]}var p=function(t){r(o,f);var i=a(o);function o(t){var n;return e(this,o),(n=i.call(this)).eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return n(o,[{key:"addEventListener",value:function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);-1===r.indexOf(t)&&r.push(t)}}},{key:"dispatchEvent",value:function(e){var t="string"==typeof e,n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(r){var i=t?new l(e):e;i.target||(i.target=this.eventTarget_||this);var o,s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,a[n]=0),++s[n];for(var u=0,f=r.length;u<f;++u)if(!1===(o="handleEvent"in r[u]?r[u].handleEvent(i):r[u].call(this,i))||i.propagationStopped){o=!1;break}if(0==--s[n]){var v=a[n];for(delete a[n];v--;)this.removeEventListener(n,c);delete s[n]}return o}}},{key:"disposeInternal",value:function(){this.listeners_&&h(this.listeners_)}},{key:"getListeners",value:function(e){return this.listeners_&&this.listeners_[e]||void 0}},{key:"hasListener",value:function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(e,t){var n=this.listeners_&&this.listeners_[e];if(n){var r=n.indexOf(t);-1!==r&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=c,++this.pendingRemovals_[e]):(n.splice(r,1),0===n.length&&delete this.listeners_[e]))}}}]),o}();function d(e,t,n,r,i){if(r&&r!==e&&(n=n.bind(r)),i){var o=n;n=function(){e.removeEventListener(t,n),o.apply(this,arguments)}}var s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function y(e,t,n,r){return d(e,t,n,r,!0)}function g(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),h(e))}var _=function(t){r(o,p);var i=a(o);function o(){var t;return e(this,o),(t=i.call(this)).on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return n(o,[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(u)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(e,t){if(Array.isArray(e)){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=d(this,e[i],t);return r}return d(this,e,t)}},{key:"onceInternal",value:function(e,t){var n;if(Array.isArray(e)){var r=e.length;n=new Array(r);for(var i=0;i<r;++i)n[i]=y(this,e[i],t)}else n=y(this,e,t);return t.ol_key=n,n}},{key:"unInternal",value:function(e,t){var n=t.ol_key;if(n)!function(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)g(e[t]);else g(e)}(n);else if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}]),o}();_.prototype.on,_.prototype.once,_.prototype.un;var b="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";b.indexOf("firefox"),-1!==b.indexOf("safari")&&-1==b.indexOf("chrom")&&(b.indexOf("version/15.4")>=0||b.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==b.indexOf("webkit")&&b.indexOf("edge"),b.indexOf("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}}(),new Array(6);var O="GENERATE_BUFFERS",w=[],k={vertexPosition:0,indexPosition:0};function m(e,t,n,r,i){e[t+0]=n,e[t+1]=r,e[t+2]=i}function E(e,t,n,r,i,o){var s=3+i,a=e[t+0],u=e[t+1],f=w;f.length=i;for(var l=0;l<f.length;l++)f[l]=e[t+2+l];var c=o?o.vertexPosition:0,v=o?o.indexPosition:0,h=c/s;return m(n,c,a,u,0),f.length&&n.set(f,c+3),m(n,c+=s,a,u,1),f.length&&n.set(f,c+3),m(n,c+=s,a,u,2),f.length&&n.set(f,c+3),m(n,c+=s,a,u,3),f.length&&n.set(f,c+3),c+=s,r[v++]=h,r[v++]=h+1,r[v++]=h+3,r[v++]=h+1,r[v++]=h+2,r[v++]=h+3,k.vertexPosition=c,k.indexPosition=v,k}var x=self;x.onmessage=function(e){var t=e.data;if(t.type===O){for(var n,r=t.customAttributesCount,i=2+r,o=new Float32Array(t.renderInstructions),s=o.length/i,a=4*s*(r+3),u=new Uint32Array(6*s),f=new Float32Array(a),l=0;l<o.length;l+=i)n=E(o,l,f,u,r,n);var c=v({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:o.buffer},t);x.postMessage(c,[f.buffer,u.buffer,o.buffer])}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}(),i.Nh.addEventListener("message",function(t){var n=t.data;if(n.type===Ml){var r=n.projectionTransform;n.hitDetection?(this.gh.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.gh)):(this.bh.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.bh)),this.xh.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.xh),this.Eh=r,an(this.Th,this.Eh),n.hitDetection?this.Ah=new Float32Array(t.data.renderInstructions):(this.kh=new Float32Array(t.data.renderInstructions),n.generateBuffersRun===this.Ph&&(this.ready=!0)),this.getLayer().changed()}}.bind(i)),i.Ih={},i.Lh=0;var a=i.getLayer().getSource();return i.Rh=[H(a,Td,i.Gh,i),H(a,kd,i.zh,i),H(a,Cd,i.Fh,i),H(a,Ad,i.Dh,i)],a.forEachFeature(function(t){this.Ih[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.Lh++}.bind(i)),i}return Wx(n,t),n.prototype.afterHelperCreated=function(){this.Zu=this.helper.getProgram(this.Ku,this.Hu),this._h&&(this.Sh=this.helper.getProgram(this.Oh,this.jh),this.Ch=new vl(this.helper))},n.prototype.Gh=function(t){var n=t.feature;this.Ih[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.Lh++},n.prototype.zh=function(t){var n=t.feature;this.Ih[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}},n.prototype.Fh=function(t){var n=t.feature;delete this.Ih[o(n)],this.Lh--},n.prototype.Dh=function(){this.Ih={},this.Lh=0},n.prototype.renderFrame=function(t){var n=this.helper.getGL();this.preRender(n,t);var r=t.viewState.projection,i=this.getLayer().getSource().getWrapX()&&r.canWrapX(),e=r.getExtent(),o=t.extent,u=i?Qn(e):null,s=i?Math.ceil((o[2]-e[2])/u)+1:1,a=i?Math.floor((o[0]-e[0])/u):0,f=a,h=this.xh.getSize();do{this.helper.makeProjectionTransform(t,this.Mh),un(this.Mh,f*u,0),Jt(this.Mh,this.Th),this.helper.applyUniforms(t),this.helper.drawElements(0,h)}while(++f<s);this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var c=this.helper.getCanvas();return this._h&&(this.renderHitDetection(t,a,s,u),this.Ch.clearCachedData()),this.postRender(n,t),c},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),r=n.getSource(),i=t.viewState,e=!t.viewHints[Rs]&&!t.viewHints[Gs],o=!In(this.Jr,t.extent),u=this.mh<r.getRevision();if(u&&(this.mh=r.getRevision()),e&&(o||u)){var s=i.projection,a=i.resolution,f=n instanceof Yx?n.getRenderBuffer():0,h=_n(t.extent,f*a);r.loadFeatures(h,a,s),this.Uh(t),this.Jr=t.extent.slice()}return this.helper.useProgram(this.Zu),this.helper.prepareDraw(t),this.helper.bindBuffer(this.bh),this.helper.bindBuffer(this.xh),this.helper.enableAttributes(this.attributes),!0},n.prototype.Uh=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var r,i,e=(2+this.customAttributes.length)*this.Lh;if(this.kh&&this.kh.length===e||(this.kh=new Float32Array(e)),this._h){var o=(7+this.customAttributes.length)*this.Lh;this.Ah&&this.Ah.length===o||(this.Ah=new Float32Array(o))}var u,s=[],a=[],f=0,h=0;for(var c in this.Ih)if((i=(r=this.Ih[c]).geometry)&&i.getType()===Pt.POINT){s[0]=i.getFlatCoordinates()[0],s[1]=i.getFlatCoordinates()[1],nn(n,s),u=Cl(h+6,a),this.kh[f++]=s[0],this.kh[f++]=s[1],this._h&&(this.Ah[h++]=s[0],this.Ah[h++]=s[1],this.Ah[h++]=u[0],this.Ah[h++]=u[1],this.Ah[h++]=u[2],this.Ah[h++]=u[3],this.Ah[h++]=Number(c));for(var l=void 0,v=0;v<this.customAttributes.length;v++)l=this.customAttributes[v].callback(r.feature,r.properties),this.kh[f++]=l,this._h&&(this.Ah[h++]=l)}var d={type:Ml,renderInstructions:this.kh.buffer,customAttributesCount:this.customAttributes.length};if(d.projectionTransform=n,d.generateBuffersRun=++this.Ph,this.ready=!1,this.Nh.postMessage(d,[this.kh.buffer]),this.kh=null,this._h){var p={type:Ml,renderInstructions:this.Ah.buffer,customAttributesCount:5+this.customAttributes.length};p.projectionTransform=n,p.hitDetection=!0,this.Nh.postMessage(p,[this.Ah.buffer]),this.Ah=null}},n.prototype.forEachFeatureAtCoordinate=function(t,n,r,i,e){if(Ot(this._h,66),this.Ah){var o=nn(n.coordinateToPixelTransform,t.slice()),u=this.Ch.readPixel(o[0]/2,o[1]/2),s=Pl([u[0]/255,u[1]/255,u[2]/255,u[3]/255]),a=this.Ah[s],f=Math.floor(a).toString(),h=this.getLayer().getSource().getFeatureByUid(f);return h?i(h,this.getLayer(),null):void 0}},n.prototype.renderHitDetection=function(t,n,r,i){if(this.gh.getSize()){var e=n;this.Ch.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Sh),this.helper.prepareDrawToRenderTarget(t,this.Ch,!0),this.helper.bindBuffer(this.gh),this.helper.bindBuffer(this.xh),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(t,this.Mh),un(this.Mh,e*i,0),Jt(this.Mh,this.Th),this.helper.applyUniforms(t);var o=this.xh.getSize();this.helper.drawElements(0,o)}while(++e<r)}},n.prototype.disposeInternal=function(){this.Nh.terminate(),this.zu=null,this.Rh.forEach((function(t){$(t)})),this.Rh=null,t.prototype.disposeInternal.call(this)},n}(Nl),Hx={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Kx=[Hx.FILL],$x=[Hx.STROKE],Jx=[Hx.BEGIN_PATH],Qx=[Hx.CLOSE_PATH],t_=Hx,n_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),r_=function(t){function n(n,r,i,e){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=r,o.pixelRatio=e,o.maxLineWidth=0,o.resolution=i,o.qh=null,o.Bh=null,o.Xh=null,o.instructions=[],o.coordinates=[],o.Vh=[],o.hitDetectionInstructions=[],o.state={},o}return n_(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map((function(t){return t*n}))},n.prototype.appendFlatPointCoordinates=function(t,n){for(var r=this.getBufferedMaxExtent(),i=this.Vh,e=this.coordinates,o=e.length,u=0,s=t.length;u<s;u+=n)i[0]=t[u],i[1]=t[u+1],Sn(r,i)&&(e[o++]=i[0],e[o++]=i[1]);return o},n.prototype.appendFlatLineCoordinates=function(t,n,r,i,e,o){var u=this.coordinates,s=u.length,a=this.getBufferedMaxExtent();o&&(n+=i);var f,h,c,l=t[n],v=t[n+1],d=this.Vh,p=!0;for(f=n+i;f<r;f+=i)d[0]=t[f],d[1]=t[f+1],(c=Tn(a,d))!==h?(p&&(u[s++]=l,u[s++]=v,p=!1),u[s++]=d[0],u[s++]=d[1]):c===yn?(u[s++]=d[0],u[s++]=d[1],p=!1):p=!0,l=d[0],v=d[1],h=c;return(e&&p||f===n+i)&&(u[s++]=l,u[s++]=v),s},n.prototype.Yh=function(t,n,r,i,e){for(var o=0,u=r.length;o<u;++o){var s=r[o],a=this.appendFlatLineCoordinates(t,n,s,i,!1,!1);e.push(a),n=s}return n},n.prototype.drawCustom=function(t,n,r,i){this.beginGeometry(t,n);var e,o,u,s,a,f=t.getType(),h=t.getStride(),c=this.coordinates.length;switch(f){case Pt.MULTI_POLYGON:e=t.getOrientedFlatCoordinates(),s=[];var l=t.getEndss();a=0;for(var v=0,d=l.length;v<d;++v){var p=[];a=this.Yh(e,a,l[v],h,p),s.push(p)}this.instructions.push([t_.CUSTOM,c,s,t,r,xe]),this.hitDetectionInstructions.push([t_.CUSTOM,c,s,t,i||r,xe]);break;case Pt.POLYGON:case Pt.MULTI_LINE_STRING:u=[],e=f==Pt.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.Yh(e,0,t.getEnds(),h,u),this.instructions.push([t_.CUSTOM,c,u,t,r,ge]),this.hitDetectionInstructions.push([t_.CUSTOM,c,u,t,i||r,ge]);break;case Pt.LINE_STRING:case Pt.CIRCLE:e=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(e,0,e.length,h,!1,!1),this.instructions.push([t_.CUSTOM,c,o,t,r,be]),this.hitDetectionInstructions.push([t_.CUSTOM,c,o,t,i||r,be]);break;case Pt.MULTI_POINT:e=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(e,h))>c&&(this.instructions.push([t_.CUSTOM,c,o,t,r,be]),this.hitDetectionInstructions.push([t_.CUSTOM,c,o,t,i||r,be]));break;case Pt.POINT:e=t.getFlatCoordinates(),this.coordinates.push(e[0],e[1]),o=this.coordinates.length,this.instructions.push([t_.CUSTOM,c,o,t,r]),this.hitDetectionInstructions.push([t_.CUSTOM,c,o,t,i||r])}this.endGeometry(n)},n.prototype.beginGeometry=function(t,n){this.qh=[t_.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.qh),this.Bh=[t_.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.Bh)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var r,i,e=n.length,o=-1;for(t=0;t<e;++t)(i=(r=n[t])[0])==t_.END_GEOMETRY?o=t:i==t_.BEGIN_GEOMETRY&&(r[2]=t,m(this.hitDetectionInstructions,o,t),o=-1)},n.prototype.setFillStrokeStyle=function(t,n){var r=this.state;if(t){var i=t.getColor();r.fillStyle=ah(i||Gu)}else r.fillStyle=void 0;if(n){var e=n.getColor();r.strokeStyle=ah(e||qu);var o=n.getLineCap();r.lineCap=void 0!==o?o:zu;var u=n.getLineDash();r.lineDash=u?u.slice():Fu;var s=n.getLineDashOffset();r.lineDashOffset=s||0;var a=n.getLineJoin();r.lineJoin=void 0!==a?a:Du;var f=n.getWidth();r.lineWidth=void 0!==f?f:1;var h=n.getMiterLimit();r.miterLimit=void 0!==h?h:Uu,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.Xh=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},n.prototype.createFill=function(t){var n=t.fillStyle,r=[t_.SET_FILL_STYLE,n];return"string"!=typeof n&&r.push(!0),r},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[t_.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,n){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(n.call(this,t)),t.currentFillStyle=r)},n.prototype.updateStrokeStyle=function(t,n){var r=t.strokeStyle,i=t.lineCap,e=t.lineDash,o=t.lineDashOffset,u=t.lineJoin,s=t.lineWidth,a=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=i||e!=t.currentLineDash&&!x(t.currentLineDash,e)||t.currentLineDashOffset!=o||t.currentLineJoin!=u||t.currentLineWidth!=s||t.currentMiterLimit!=a)&&(void 0!==r&&n.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=i,t.currentLineDash=e,t.currentLineDashOffset=o,t.currentLineJoin=u,t.currentLineWidth=s,t.currentMiterLimit=a)},n.prototype.endGeometry=function(t){this.qh[2]=this.instructions.length,this.qh=null,this.Bh[2]=this.hitDetectionInstructions.length,this.Bh=null;var n=[t_.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},n.prototype.getBufferedMaxExtent=function(){if(!this.Xh&&(this.Xh=jn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;_n(this.Xh,t,this.Xh)}return this.Xh},n}(Oh),i_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),e_=function(t){function n(n,r,i,e){var o=t.call(this,n,r,i,e)||this;return o.Os=null,o.Lt=null,o.Wh=void 0,o.Zh=void 0,o.Hh=void 0,o.Kh=void 0,o.es=void 0,o.$h=void 0,o.Jh=void 0,o.os=void 0,o.Di=void 0,o.us=void 0,o.Bs=void 0,o.hs=void 0,o.Qh=void 0,o}return i_(n,t),n.prototype.drawPoint=function(t,n){if(this.Lt){this.beginGeometry(t,n);var r=t.getFlatCoordinates(),i=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(r,i);this.instructions.push([t_.DRAW_IMAGE,e,o,this.Lt,this.Zh*this.Wh,this.Hh*this.Wh,Math.ceil(this.Kh*this.Wh),this.es,this.$h*this.Wh,this.Jh*this.Wh,this.os,this.Di,[this.us[0]*this.pixelRatio/this.Wh,this.us[1]*this.pixelRatio/this.Wh],Math.ceil(this.Bs*this.Wh),this.hs,this.Qh]),this.hitDetectionInstructions.push([t_.DRAW_IMAGE,e,o,this.Os,this.Zh,this.Hh,this.Kh,this.es,this.$h,this.Jh,this.os,this.Di,this.us,this.Bs,this.hs,this.Qh]),this.endGeometry(n)}},n.prototype.drawMultiPoint=function(t,n){if(this.Lt){this.beginGeometry(t,n);var r=t.getFlatCoordinates(),i=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(r,i);this.instructions.push([t_.DRAW_IMAGE,e,o,this.Lt,this.Zh*this.Wh,this.Hh*this.Wh,Math.ceil(this.Kh*this.Wh),this.es,this.$h*this.Wh,this.Jh*this.Wh,this.os,this.Di,[this.us[0]*this.pixelRatio/this.Wh,this.us[1]*this.pixelRatio/this.Wh],Math.ceil(this.Bs*this.Wh),this.hs,this.Qh]),this.hitDetectionInstructions.push([t_.DRAW_IMAGE,e,o,this.Os,this.Zh,this.Hh,this.Kh,this.es,this.$h,this.Jh,this.os,this.Di,this.us,this.Bs,this.hs,this.Qh]),this.endGeometry(n)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.Zh=void 0,this.Hh=void 0,this.Os=null,this.Lt=null,this.Wh=void 0,this.Kh=void 0,this.us=void 0,this.es=void 0,this.$h=void 0,this.Jh=void 0,this.os=void 0,this.Di=void 0,this.Bs=void 0,t.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,n){var r=t.getAnchor(),i=t.getSize(),e=t.getOrigin();this.Wh=t.getPixelRatio(this.pixelRatio),this.Zh=r[0],this.Hh=r[1],this.Os=t.getHitDetectionImage(),this.Lt=t.getImage(this.pixelRatio),this.Kh=i[1],this.es=t.getOpacity(),this.$h=e[0],this.Jh=e[1],this.os=t.getRotateWithView(),this.Di=t.getRotation(),this.us=t.getScaleArray(),this.Bs=i[0],this.hs=t.getDeclutterMode(),this.Qh=n},n}(r_),o_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),u_=function(t){function n(n,r,i,e){return t.call(this,n,r,i,e)||this}return o_(n,t),n.prototype.tc=function(t,n,r,i){var e=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,r,i,!1,!1),u=[t_.MOVE_TO_LINE_TO,e,o];return this.instructions.push(u),this.hitDetectionInstructions.push(u),r},n.prototype.drawLineString=function(t,n){var r=this.state,i=r.strokeStyle,e=r.lineWidth;if(void 0!==i&&void 0!==e){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([t_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Fu,0],Jx);var o=t.getFlatCoordinates(),u=t.getStride();this.tc(o,0,o.length,u),this.hitDetectionInstructions.push($x),this.endGeometry(n)}},n.prototype.drawMultiLineString=function(t,n){var r=this.state,i=r.strokeStyle,e=r.lineWidth;if(void 0!==i&&void 0!==e){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([t_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],Jx);for(var o=t.getEnds(),u=t.getFlatCoordinates(),s=t.getStride(),a=0,f=0,h=o.length;f<h;++f)a=this.tc(u,a,o[f],s);this.hitDetectionInstructions.push($x),this.endGeometry(n)}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push($x),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push($x),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(Jx)},n}(r_),s_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),a_=function(t){function n(n,r,i,e){return t.call(this,n,r,i,e)||this}return s_(n,t),n.prototype.rc=function(t,n,r,i){var e=this.state,o=void 0!==e.fillStyle,u=void 0!==e.strokeStyle,s=r.length;this.instructions.push(Jx),this.hitDetectionInstructions.push(Jx);for(var a=0;a<s;++a){var f=r[a],h=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,f,i,!0,!u),l=[t_.MOVE_TO_LINE_TO,h,c];this.instructions.push(l),this.hitDetectionInstructions.push(l),u&&(this.instructions.push(Qx),this.hitDetectionInstructions.push(Qx)),n=f}return o&&(this.instructions.push(Kx),this.hitDetectionInstructions.push(Kx)),u&&(this.instructions.push($x),this.hitDetectionInstructions.push($x)),n},n.prototype.drawCircle=function(t,n){var r=this.state,i=r.fillStyle,e=r.strokeStyle;if(void 0!==i||void 0!==e){this.ic(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([t_.SET_FILL_STYLE,Gu]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([t_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getFlatCoordinates(),u=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,u,!1,!1);var a=[t_.CIRCLE,s];this.instructions.push(Jx,a),this.hitDetectionInstructions.push(Jx,a),void 0!==r.fillStyle&&(this.instructions.push(Kx),this.hitDetectionInstructions.push(Kx)),void 0!==r.strokeStyle&&(this.instructions.push($x),this.hitDetectionInstructions.push($x)),this.endGeometry(n)}},n.prototype.drawPolygon=function(t,n){var r=this.state,i=r.fillStyle,e=r.strokeStyle;if(void 0!==i||void 0!==e){this.ic(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([t_.SET_FILL_STYLE,Gu]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([t_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getEnds(),u=t.getOrientedFlatCoordinates(),s=t.getStride();this.rc(u,0,o,s),this.endGeometry(n)}},n.prototype.drawMultiPolygon=function(t,n){var r=this.state,i=r.fillStyle,e=r.strokeStyle;if(void 0!==i||void 0!==e){this.ic(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([t_.SET_FILL_STYLE,Gu]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([t_.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var o=t.getEndss(),u=t.getOrientedFlatCoordinates(),s=t.getStride(),a=0,f=0,h=o.length;f<h;++f)a=this.rc(u,a,o[f],s);this.endGeometry(n)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var r=this.coordinates,i=0,e=r.length;i<e;++i)r[i]=pe(r[i],n);return t.prototype.finish.call(this)},n.prototype.ic=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(r_);function f_(t,n,r,i,e){var o,u,s,a,f,h,c,l,v,d=r,p=r,y=0,w=0,m=r;for(o=r;o<i;o+=e){var b=n[o],g=n[o+1];void 0!==a&&(l=b-a,v=g-f,s=Math.sqrt(l*l+v*v),void 0!==h&&(w+=u,Math.acos((h*l+c*v)/(u*s))>t&&(w>y&&(y=w,d=m,p=o),w=0,m=o-e)),u=s,h=l,c=v),a=b,f=g}return(w+=s)>y?[m,o]:[d,p]}var h_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),c_={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},l_=function(t){function n(n,r,i,e){var o=t.call(this,n,r,i,e)||this;return o.ec=null,o.oo="",o.uo=0,o.so=0,o.ao=void 0,o.fo=0,o.co=null,o.fillStates={},o.lo=null,o.strokeStates={},o.vo={},o.textStates={},o.oc="",o.uc="",o.sc="",o.Qh=void 0,o}return h_(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n},n.prototype.drawText=function(t,n){var r=this.co,i=this.lo,e=this.vo;if(""!==this.oo&&e&&(r||i)){var o=this.coordinates,u=o.length,s=t.getType(),a=null,f=t.getStride();if(e.placement!==nd||s!=Pt.LINE_STRING&&s!=Pt.MULTI_LINE_STRING&&s!=Pt.POLYGON&&s!=Pt.MULTI_POLYGON){var h=e.overflow?null:[];switch(s){case Pt.POINT:case Pt.MULTI_POINT:a=t.getFlatCoordinates();break;case Pt.LINE_STRING:a=t.getFlatMidpoint();break;case Pt.CIRCLE:a=t.getCenter();break;case Pt.MULTI_LINE_STRING:a=t.getFlatMidpoints(),f=2;break;case Pt.POLYGON:a=t.getFlatInteriorPoint(),e.overflow||h.push(a[2]/this.resolution),f=3;break;case Pt.MULTI_POLYGON:var c=t.getFlatInteriorPoints();a=[];for(_=0,j=c.length;_<j;_+=3)e.overflow||h.push(c[_+2]/this.resolution),a.push(c[_],c[_+1]);if(0===a.length)return;f=2}if((A=this.appendFlatPointCoordinates(a,f))===u)return;if(h&&(A-u)/2!=a.length/f){var l=u/2;h=h.filter((function(t,n){var r=o[2*(l+n)]===a[n*f]&&o[2*(l+n)+1]===a[n*f+1];return r||--l,r}))}this.ac(),(e.backgroundFill||e.backgroundStroke)&&(this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke),e.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),e.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var v=e.padding;if(v!=Vu&&(e.scale[0]<0||e.scale[1]<0)){var d=e.padding[0],p=e.padding[1],y=e.padding[2],w=e.padding[3];e.scale[0]<0&&(p=-p,w=-w),e.scale[1]<0&&(d=-d,y=-y),v=[d,p,y,w]}var m=this.pixelRatio;this.instructions.push([t_.DRAW_IMAGE,u,A,null,NaN,NaN,NaN,1,0,0,this.ao,this.fo,[1,1],NaN,void 0,this.Qh,v==Vu?Vu:v.map((function(t){return t*m})),!!e.backgroundFill,!!e.backgroundStroke,this.oo,this.oc,this.sc,this.uc,this.uo,this.so,h]);var b=1/m;this.hitDetectionInstructions.push([t_.DRAW_IMAGE,u,A,null,NaN,NaN,NaN,1,0,0,this.ao,this.fo,[b,b],NaN,void 0,this.Qh,v,!!e.backgroundFill,!!e.backgroundStroke,this.oo,this.oc,this.sc,this.uc,this.uo,this.so,h]),this.endGeometry(n)}else{if(!tr(this.getBufferedMaxExtent(),t.getExtent()))return;var g=void 0;if(a=t.getFlatCoordinates(),s==Pt.LINE_STRING)g=[a.length];else if(s==Pt.MULTI_LINE_STRING)g=t.getEnds();else if(s==Pt.POLYGON)g=t.getEnds().slice(0,1);else if(s==Pt.MULTI_POLYGON){var x=t.getEndss();g=[];for(var _=0,j=x.length;_<j;++_)g.push(x[_][0])}this.beginGeometry(t,n);for(var O=e.textAlign,S=0,M=void 0,E=0,T=g.length;E<T;++E){if(null==O){var k=f_(e.maxAngle,a,S,g[E],f);S=k[0],M=k[1]}else M=g[E];for(var _=S;_<M;_+=f)o.push(a[_],a[_+1]);var A=o.length;S=g[E],this.fc(u,A),u=A}this.endGeometry(n)}}},n.prototype.ac=function(){var t=this.lo,n=this.vo,r=this.co,i=this.sc;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var e=this.oc;e in this.textStates||(this.textStates[e]={font:n.font,textAlign:n.textAlign||Bu,justify:n.justify,textBaseline:n.textBaseline||Xu,scale:n.scale});var o=this.uc;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))},n.prototype.fc=function(t,n){var r=this.lo,i=this.vo,e=this.sc,o=this.oc,u=this.uc;this.ac();var s=this.pixelRatio,a=c_[i.textBaseline],f=this.so*s,h=this.oo,c=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([t_.DRAW_CHARS,t,n,a,i.overflow,u,i.maxAngle,s,f,e,c*s,h,o,1]),this.hitDetectionInstructions.push([t_.DRAW_CHARS,t,n,a,i.overflow,u,i.maxAngle,1,f,e,c,h,o,1/s])},n.prototype.setTextStyle=function(t,n){var r,i,e;if(t){var u=t.getFill();u?((i=this.co)||(i={},this.co=i),i.fillStyle=ah(u.getColor()||Gu)):(i=null,this.co=i);var s=t.getStroke();if(s){(e=this.lo)||(e={},this.lo=e);var a=s.getLineDash(),f=s.getLineDashOffset(),h=s.getWidth(),c=s.getMiterLimit();e.lineCap=s.getLineCap()||zu,e.lineDash=a?a.slice():Fu,e.lineDashOffset=void 0===f?0:f,e.lineJoin=s.getLineJoin()||Du,e.lineWidth=void 0===h?1:h,e.miterLimit=void 0===c?Uu:c,e.strokeStyle=ah(s.getColor()||qu)}else e=null,this.lo=e;r=this.vo;var l=t.getFont()||Ru;Ju(l);var v=t.getScaleArray();r.overflow=t.getOverflow(),r.font=l,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.justify=t.getJustify(),r.textBaseline=t.getTextBaseline()||Xu,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||Vu,r.scale=void 0===v?[1,1]:v;var d=t.getOffsetX(),p=t.getOffsetY(),y=t.getRotateWithView(),w=t.getRotation();this.oo=t.getText()||"",this.uo=void 0===d?0:d,this.so=void 0===p?0:p,this.ao=void 0!==y&&y,this.fo=void 0===w?0:w,this.sc=e?("string"==typeof e.strokeStyle?e.strokeStyle:o(e.strokeStyle))+e.lineCap+e.lineDashOffset+"|"+e.lineWidth+e.lineJoin+e.miterLimit+"["+e.lineDash.join()+"]":"",this.oc=r.font+r.scale+(r.textAlign||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.uc=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+o(i.fillStyle):""}else this.oo="";this.Qh=n},n}(r_),v_={Circle:a_,Default:r_,Image:e_,LineString:u_,Polygon:a_,Text:l_},d_=function(){function t(t,n,r,i){this.hc=t,this.cc=n,this.Pt=i,this.lc=r,this.vc={}}return t.prototype.finish=function(){var t={};for(var n in this.vc){t[n]=t[n]||{};var r=this.vc[n];for(var i in r){var e=r[i].finish();t[n][i]=e}}return t},t.prototype.getBuilder=function(t,n){var r=void 0!==t?t.toString():"0",i=this.vc[r];void 0===i&&(i={},this.vc[r]=i);var e=i[n];void 0===e&&(e=new(0,v_[n])(this.hc,this.cc,this.lc,this.Pt),i[n]=e);return e},t}();function p_(t,n,r,i,e,o,u,s,a,f,h,c){var l=t[n],v=t[n+1],d=0,p=0,y=0,w=0;function m(){d=l,p=v,l=t[n+=i],v=t[n+1],w+=y,y=Math.sqrt((l-d)*(l-d)+(v-p)*(v-p))}do{m()}while(n<r-i&&w+y<o);for(var b=0===y?0:(o-w)/y,g=mr(d,l,b),x=mr(p,v,b),_=n-i,j=w,O=o+s*a(f,e,h);n<r-i&&w+y<O;)m();var S,M=mr(d,l,b=0===y?0:(O-w)/y),E=mr(p,v,b);if(c){var T=[g,x,M,E];Vi(T,0,4,2,c,T,T),S=T[0]>T[2]}else S=g>M;var k,A=Math.PI,C=[],P=_+i===n;if(y=0,w=j,l=t[n=_],v=t[n+1],P){m(),k=Math.atan2(v-p,l-d),S&&(k+=k>0?-A:A);var N=(M+g)/2,I=(E+x)/2;return C[0]=[N,I,(O-o)/2,k,e],C}for(var L=0,R=(e=e.replace(/\n/g," ")).length;L<R;){m();var G=Math.atan2(v-p,l-d);if(S&&(G+=G>0?-A:A),void 0!==k){var z=G-k;if(z+=z>A?-2*A:z<-A?2*A:0,Math.abs(z)>u)return null}k=G;for(var F=L,D=0;L<R;++L){var U=s*a(f,e[S?R-L-1:L],h);if(n+i<r&&w+y<o+D+U/2)break;D+=U}if(L!==F){var q=S?e.substring(R-F,R-L):e.substring(F,L);N=mr(d,l,b=0===y?0:(o+D/2-w)/y),I=mr(p,v,b);C.push([N,I,D/2,G,q]),o+=D}}return C}function y_(t,n,r,i){for(var e=t[n],o=t[n+1],u=0,s=n+i;s<r;s+=i){var a=t[s],f=t[s+1];u+=Math.sqrt((a-e)*(a-e)+(f-o)*(f-o)),e=a,o=f}return u}var w_=[1/0,1/0,-1/0,-1/0],m_=[],b_=[],g_=[],x_=[];function __(t){return t[3].declutterBox}var j_=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function O_(t,n){return"start"!==n&&"end"!==n||j_.test(t)||(n="start"===n?"left":"right"),c_[n]}function S_(t,n,r){return r>0&&t.push("\n",""),t.push(n,""),t}var M_=function(){function t(t,n,r,i){this.overlaps=r,this.pixelRatio=n,this.resolution=t,this.dc,this.instructions=i.instructions,this.coordinates=i.coordinates,this.yc={},this.wc=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.do=null,this.De=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.mc={},this.ec={}}return t.prototype.createLabel=function(t,n,r,i){var e=t+n+r+i;if(this.ec[e])return this.ec[e];var o=i?this.strokeStates[i]:null,u=r?this.fillStates[r]:null,s=this.textStates[n],a=this.pixelRatio,f=[s.scale[0]*a,s.scale[1]*a],h=Array.isArray(t),c=s.justify?c_[s.justify]:O_(Array.isArray(t)?t[0]:t,s.textAlign||Bu),l=i&&o.lineWidth?o.lineWidth:0,v=h?t:t.split("\n").reduce(S_,[]),d=is(s,v),p=d.width,y=d.height,w=d.widths,m=d.heights,b=d.lineWidths,g=p+l,x=[],_=(g+2)*f[0],j=(y+l)*f[1],O={width:_<0?Math.floor(_):Math.ceil(_),height:j<0?Math.floor(j):Math.ceil(j),contextInstructions:x};(1==f[0]&&1==f[1]||x.push("scale",f),i)&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",l),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),(Yt?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)));r&&x.push("fillStyle",u.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");for(var S,M=.5-c,E=c*g+M*l,T=[],k=[],A=0,C=0,P=0,N=0,I=0,L=v.length;I<L;I+=2){var R=v[I];if("\n"!==R){var G=v[I+1]||s.font;G!==S&&(i&&T.push("font",G),r&&k.push("font",G),S=G),A=Math.max(A,m[P]);var z=[R,E+M*w[P]+c*(w[P]-b[N]),.5*(l+A)+C];E+=w[P],i&&T.push("strokeText",z),r&&k.push("fillText",z),++P}else C+=A,A=0,E=c*g+M*l,++N}return Array.prototype.push.apply(x,T),Array.prototype.push.apply(x,k),this.ec[e]=O,O},t.prototype.bc=function(t,n,r,i,e,o,u){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,e),t.lineTo.apply(t,n),o&&(this.dc=o[2],this.ls(t)),u&&(this.gc(t,u),t.stroke())},t.prototype.xc=function(t,n,r,i,e,o,u,s,a,f,h,c,l,v,d,p){var y,w=r-(u*=c[0]),m=i-(s*=c[1]),b=e+a>t?t-a:e,g=o+f>n?n-f:o,x=v[3]+b*c[0]+v[1],_=v[0]+g*c[1]+v[2],j=w-v[3],O=m-v[0];return(d||0!==h)&&(m_[0]=j,x_[0]=j,m_[1]=O,b_[1]=O,b_[0]=j+x,g_[0]=b_[0],g_[1]=O+_,x_[1]=g_[1]),0!==h?(nn(y=sn([1,0,0,1,0,0],r,i,1,1,h,-r,-i),m_),nn(y,b_),nn(y,g_),nn(y,x_),An(Math.min(m_[0],b_[0],g_[0],x_[0]),Math.min(m_[1],b_[1],g_[1],x_[1]),Math.max(m_[0],b_[0],g_[0],x_[0]),Math.max(m_[1],b_[1],g_[1],x_[1]),w_)):An(Math.min(j,j+x),Math.min(O,O+_),Math.max(j,j+x),Math.max(O,O+_),w_),l&&(w=Math.round(w),m=Math.round(m)),{drawImageX:w,drawImageY:m,drawImageW:b,drawImageH:g,originX:a,originY:f,declutterBox:{minX:w_[0],minY:w_[1],maxX:w_[2],maxY:w_[3],value:p},canvasTransform:y,scale:c}},t.prototype._c=function(t,n,r,i,e,o,u){var s=!(!o&&!u),a=i.declutterBox,f=t.canvas,h=u?u[2]*i.scale[0]/2:0;return a.minX-h<=f.width/n&&a.maxX+h>=0&&a.minY-h<=f.height/n&&a.maxY+h>=0&&(s&&this.bc(t,m_,b_,g_,x_,o,u),es(t,i.canvasTransform,e,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},t.prototype.ls=function(t){if(this.dc){var n=nn(this.wc,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(n[0]%r,n[1]%r),t.rotate(this.De)}t.fill(),this.dc&&t.restore()},t.prototype.gc=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]))},t.prototype.jc=function(t,n,r,i){var e=this.textStates[n],o=this.createLabel(t,n,i,r),u=this.strokeStates[r],s=this.pixelRatio,a=O_(Array.isArray(t)?t[0]:t,e.textAlign||Bu),f=c_[e.textBaseline||Xu],h=u&&u.lineWidth?u.lineWidth:0;return{label:o,anchorX:a*(o.width/s-2*e.scale[0])+2*(.5-a)*h,anchorY:f*o.height/s+2*(.5-f)*h}},t.prototype.Oc=function(t,n,r,i,e,o,u,s){var a;this.do&&x(r,this.wc)?a=this.do:(this.do||(this.do=[]),a=Xi(this.coordinates,0,this.coordinates.length,2,r,this.do),tn(this.wc,r));for(var f,h,c,l,v,d,p,y,w,m,b,g,_,j,O,S,M=0,E=i.length,T=0,k=0,A=0,C=null,P=null,N=this.yc,I=this.De,L=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,R={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},G=this.instructions!=i||this.overlaps?0:200;M<E;){var z=i[M];switch(z[0]){case t_.BEGIN_GEOMETRY:_=z[1],S=z[3],_.getGeometry()?void 0===u||tr(u,S.getExtent())?++M:M=z[2]+1:M=z[2];break;case t_.BEGIN_PATH:k>G&&(this.ls(t),k=0),A>G&&(t.stroke(),A=0),k||A||(t.beginPath(),l=NaN,v=NaN),++M;break;case t_.CIRCLE:var F=a[T=z[1]],D=a[T+1],U=a[T+2]-F,q=a[T+3]-D,B=Math.sqrt(U*U+q*q);t.moveTo(F+B,D),t.arc(F,D,B,0,2*Math.PI,!0),++M;break;case t_.CLOSE_PATH:t.closePath(),++M;break;case t_.CUSTOM:T=z[1],f=z[2];var X=z[3],V=z[4],Y=6==z.length?z[5]:void 0;R.geometry=X,R.feature=_,M in N||(N[M]=[]);var W=N[M];Y?Y(a,T,f,2,W):(W[0]=a[T],W[1]=a[T+1],W.length=2),V(W,R),++M;break;case t_.DRAW_IMAGE:T=z[1],f=z[2],y=z[3],h=z[4],c=z[5];var Z=z[6],H=z[7],K=z[8],$=z[9],J=z[10],Q=z[11],tt=z[12],nt=z[13],rt=z[14],it=z[15];if(!y&&z.length>=20){w=z[19],m=z[20],b=z[21],g=z[22];var et=this.jc(w,m,b,g);y=et.label,z[3]=y;var ot=z[23];h=(et.anchorX-ot)*this.pixelRatio,z[4]=h;var ut=z[24];c=(et.anchorY-ut)*this.pixelRatio,z[5]=c,Z=y.height,z[6]=Z,nt=y.width,z[13]=nt}var st=void 0;z.length>25&&(st=z[25]);var at=void 0,ft=void 0,ht=void 0;z.length>17?(at=z[16],ft=z[17],ht=z[18]):(at=Vu,ft=!1,ht=!1),J&&L?Q+=I:J||L||(Q-=I);for(var ct=0;T<f;T+=2)if(!(st&&st[ct++]<nt/this.pixelRatio)){var lt=[t,n,y,Ft=this.xc(y.width,y.height,a[T],a[T+1],nt,Z,h,c,K,$,Q,tt,e,at,ft||ht,_),H,ft?C:null,ht?P:null];if(s){if("none"===rt)continue;if("obstacle"===rt){s.insert(Ft.declutterBox);continue}var vt=void 0,dt=void 0;if(it){var pt=f-T;if(!it[pt]){it[pt]=lt;continue}if(vt=it[pt],delete it[pt],dt=__(vt),s.collides(dt))continue}if(s.collides(Ft.declutterBox))continue;vt&&(s.insert(dt),this._c.apply(this,vt)),s.insert(Ft.declutterBox)}this._c.apply(this,lt)}++M;break;case t_.DRAW_CHARS:var yt=z[1],wt=z[2],mt=z[3],bt=z[4];g=z[5];var gt=z[6],xt=z[7],_t=z[8];b=z[9];var jt=z[10];w=z[11],m=z[12];var Ot=[z[13],z[13]],St=this.textStates[m],Mt=St.font,Et=[St.scale[0]*xt,St.scale[1]*xt],Tt=void 0;Mt in this.mc?Tt=this.mc[Mt]:(Tt={},this.mc[Mt]=Tt);var kt=y_(a,yt,wt,2),At=Math.abs(Et[0])*rs(Mt,w,Tt);if(bt||At<=kt){var Ct=this.textStates[m].textAlign,Pt=p_(a,yt,wt,2,w,(kt-At)*c_[Ct],gt,Math.abs(Et[0]),rs,Mt,Tt,L?0:this.De);t:if(Pt){var Nt=[],It=void 0,Lt=void 0,Rt=void 0,Gt=void 0,zt=void 0;if(b)for(It=0,Lt=Pt.length;It<Lt;++It){Rt=(zt=Pt[It])[4],Gt=this.createLabel(Rt,m,"",b),h=zt[2]+(Et[0]<0?-jt:jt),c=mt*Gt.height+2*(.5-mt)*jt*Et[1]/Et[0]-_t;var Ft=this.xc(Gt.width,Gt.height,zt[0],zt[1],Gt.width,Gt.height,h,c,0,0,zt[3],Ot,!1,Vu,!1,_);if(s&&s.collides(Ft.declutterBox))break t;Nt.push([t,n,Gt,Ft,1,null,null])}if(g)for(It=0,Lt=Pt.length;It<Lt;++It){Rt=(zt=Pt[It])[4],Gt=this.createLabel(Rt,m,g,""),h=zt[2],c=mt*Gt.height-_t;Ft=this.xc(Gt.width,Gt.height,zt[0],zt[1],Gt.width,Gt.height,h,c,0,0,zt[3],Ot,!1,Vu,!1,_);if(s&&s.collides(Ft.declutterBox))break t;Nt.push([t,n,Gt,Ft,1,null,null])}s&&s.load(Nt.map(__));for(var Dt=0,Ut=Nt.length;Dt<Ut;++Dt)this._c.apply(this,Nt[Dt])}}++M;break;case t_.END_GEOMETRY:if(void 0!==o){var qt=o(_=z[1],S);if(qt)return qt}++M;break;case t_.FILL:G?k++:this.ls(t),++M;break;case t_.MOVE_TO_LINE_TO:for(T=z[1],f=z[2],j=a[T],p=(O=a[T+1])+.5|0,(d=j+.5|0)===l&&p===v||(t.moveTo(j,O),l=d,v=p),T+=2;T<f;T+=2)d=(j=a[T])+.5|0,p=(O=a[T+1])+.5|0,T!=f-2&&d===l&&p===v||(t.lineTo(j,O),l=d,v=p);++M;break;case t_.SET_FILL_STYLE:C=z,this.dc=z[2],k&&(this.ls(t),k=0,A&&(t.stroke(),A=0)),t.fillStyle=z[1],++M;break;case t_.SET_STROKE_STYLE:P=z,A&&(t.stroke(),A=0),this.gc(t,z),++M;break;case t_.STROKE:G?A++:t.stroke(),++M;break;default:++M}}k&&this.ls(t),A&&t.stroke()},t.prototype.execute=function(t,n,r,i,e,o){this.De=i,this.Oc(t,n,r,this.instructions,e,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,n,r,i,e){return this.De=r,this.Oc(t,1,n,this.hitDetectionInstructions,!0,i,e)},t}(),E_=[Ch,Eh,Ah,kh,Ph,Th],T_=function(){function t(t,n,r,i,e,o){this.cc=t,this.Ga=i,this.Pt=r,this.lc=n,this.ph=o,this.Sc={},this.Mc=null,this.Ec=[1,0,0,1,0,0],this.Tc(e)}return t.prototype.clip=function(t,n){var r=this.getClipCoords(n);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},t.prototype.Tc=function(t){for(var n in t){var r=this.Sc[n];void 0===r&&(r={},this.Sc[n]=r);var i=t[n];for(var e in i){var o=i[e];r[e]=new M_(this.lc,this.Pt,this.Ga,o)}}},t.prototype.hasExecutors=function(t){for(var n in this.Sc)for(var r=this.Sc[n],i=0,e=t.length;i<e;++i)if(t[i]in r)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,n,r,i,e,o){var u=2*(i=Math.round(i))+1,s=sn(this.Ec,i+.5,i+.5,1/n,-1/n,-r,-t[0],-t[1]),a=!this.Mc;a&&(this.Mc=Eo(u,u));var f,h=this.Mc;h.canvas.width!==u||h.canvas.height!==u?(h.canvas.width=u,h.canvas.height=u):a||h.clearRect(0,0,u,u),void 0!==this.ph&&(Gn(f=[1/0,1/0,-1/0,-1/0],t),_n(f,n*(this.ph+i),f));var c,l=A_(i);function v(t,n){for(var r=h.getImageData(0,0,u,u).data,s=0,a=l.length;s<a;s++)if(r[l[s]]>0){if(!o||c!==kh&&c!==Ph||-1!==o.indexOf(t)){var f=(l[s]-3)/4,v=i-f%u,d=i-(f/u|0),p=e(t,n,v*v+d*d);if(p)return p}h.clearRect(0,0,u,u);break}}var d,y,w,m,b,g=Object.keys(this.Sc).map(Number);for(g.sort(p),d=g.length-1;d>=0;--d){var x=g[d].toString();for(w=this.Sc[x],y=E_.length-1;y>=0;--y)if(void 0!==(m=w[c=E_[y]])&&(b=m.executeHitDetection(h,s,r,v,f)))return b}},t.prototype.getClipCoords=function(t){var n=this.cc;if(!n)return null;var r=n[0],i=n[1],e=n[2],o=n[3],u=[r,i,r,o,e,o,e,i];return Xi(u,0,8,2,t,u),u},t.prototype.isEmpty=function(){return P(this.Sc)},t.prototype.execute=function(t,n,r,i,e,o,u){var s=Object.keys(this.Sc).map(Number);s.sort(p),this.cc&&(t.save(),this.clip(t,r));var a,f,h,c,l,v,d=o||E_;for(u&&s.reverse(),a=0,f=s.length;a<f;++a){var y=s[a].toString();for(l=this.Sc[y],h=0,c=d.length;h<c;++h){void 0!==(v=l[d[h]])&&v.execute(t,n,r,i,e,u)}}this.cc&&t.restore()},t}(),k_={};function A_(t){if(void 0!==k_[t])return k_[t];for(var n=2*t+1,r=t*t,i=new Array(r+1),e=0;e<=t;++e)for(var o=0;o<=t;++o){var u=e*e+o*o;if(u>r)break;var s=i[u];s||(s=[],i[u]=s),s.push(4*((t+e)*n+(t+o))+3),e>0&&s.push(4*((t-e)*n+(t+o))+3),o>0&&(s.push(4*((t+e)*n+(t-o))+3),e>0&&s.push(4*((t-e)*n+(t-o))+3))}for(var a=[],f=(e=0,i.length);e<f;++e)i[e]&&a.push.apply(a,i[e]);return k_[t]=a,a}var C_=T_,P_=.5;function N_(t,n,r,i,e,o,u){var s=Eo(t[0]*P_,t[1]*P_);s.imageSmoothingEnabled=!1;for(var a=s.canvas,f=new Mh(s,P_,e,null,u),h=r.length,c=Math.floor(16777215/h),l={},v=1;v<=h;++v){var d=r[v-1],y=d.getStyleFunction()||i;if(i){var w=y(d,o);if(w){Array.isArray(w)||(w=[w]);for(var m="#"+("000000"+(v*c).toString(16)).slice(-6),b=0,g=w.length;b<g;++b){var x=w[b],_=x.getGeometryFunction()(d);if(_&&tr(e,_.getExtent())){var j=x.clone(),O=j.getFill();O&&O.setColor(m);var S=j.getStroke();S&&(S.setColor(m),S.setLineDash(null)),j.setText(void 0);var M=x.getImage();if(M&&0!==M.getOpacity()){var E=M.getImageSize();if(!E)continue;var T=Eo(E[0],E[1],void 0,{alpha:!1}),k=T.canvas;T.fillStyle=m,T.fillRect(0,0,k.width,k.height),j.setImage(new Xv({img:k,imgSize:E,anchor:M.getAnchor(),anchorXUnits:Nv,anchorYUnits:Nv,offset:M.getOrigin(),opacity:1,size:M.getSize(),scale:M.getScale(),rotation:M.getRotation(),rotateWithView:M.getRotateWithView()}))}var A=j.getZIndex()||0;(N=l[A])||(N={},l[A]=N,N[Pt.POLYGON]=[],N[Pt.CIRCLE]=[],N[Pt.LINE_STRING]=[],N[Pt.POINT]=[]),N[_.getType().replace("Multi","")].push(_,j)}}}}}for(var C=Object.keys(l).map(Number).sort(p),P=(v=0,C.length);v<P;++v){var N=l[C[v]];for(var I in N){var L=N[I];for(b=0,g=L.length;b<g;b+=2){f.setStyle(L[b+1]);for(var R=0,G=n.length;R<G;++R)f.setTransform(n[R]),f.drawGeometry(L[b])}}}return s.getImageData(0,0,a.width,a.height)}function I_(t,n,r){var i=[];if(r){var e=Math.floor(Math.round(t[0])*P_),o=Math.floor(Math.round(t[1])*P_),u=4*(fr(e,0,r.width-1)+fr(o,0,r.height-1)*r.width),s=r.data[u],a=r.data[u+1],f=r.data[u+2]+256*(a+256*s),h=Math.floor(16777215/n.length);f&&f%h==0&&i.push(n[f/h-1])}return i}var L_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),R_=function(t){function n(n){var r=t.call(this,n)||this;return r.kc=r.Ac.bind(r),r.Cc,r.Pc=null,r.Nc=null,r.Of=-1,r.Ic=NaN,r.Gf=[1/0,1/0,-1/0,-1/0],r.Lc=[1/0,1/0,-1/0,-1/0],r.Rc,r.Gc=null,r.zc=null,r.Fc=null,r.Dc=null,r.replayGroupChanged=!0,r.declutterExecutorGroup=null,r.clipping=!0,r}return L_(n,t),n.prototype.renderWorlds=function(t,n,r){var i=n.extent,e=n.viewState,o=e.center,u=e.resolution,s=e.projection,a=e.rotation,f=s.getExtent(),h=this.getLayer().getSource(),c=n.pixelRatio,l=n.viewHints,v=!(l[Rs]||l[Gs]),d=this.context,p=Math.round(n.size[0]*c),y=Math.round(n.size[1]*c),w=h.getWrapX()&&s.canWrapX(),m=w?Qn(f):null,b=w?Math.ceil((i[2]-f[2])/m)+1:1,g=w?Math.floor((i[0]-f[0])/m):0;do{var x=this.getRenderTransform(o,u,a,c,p,y,g*m);t.execute(d,1,x,a,v,void 0,r)}while(++g<b)},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},n.prototype.renderFrame=function(t,n){var r=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];on(this.pixelTransform,1/r,1/r),an(this.inversePixelTransform,this.pixelTransform);var e=hn(this.pixelTransform);this.useContainer(n,e,i.opacity,this.getBackground(t));var o=this.context,u=o.canvas,s=this.Dc,a=this.declutterExecutorGroup;if((!s||s.isEmpty())&&(!a||a.isEmpty()))return null;var f=Math.round(t.size[0]*r),h=Math.round(t.size[1]*r);u.width!=f||u.height!=h?(u.width=f,u.height=h,u.style.transform!==e&&(u.style.transform=e)):this.containerReused||o.clearRect(0,0,f,h),this.preRender(o,t);var c=t.viewState,l=c.projection,v=!1,d=!0;if(i.extent&&this.clipping){var p=Fi(i.extent,l);(v=(d=tr(p,t.extent))&&!Mn(p,t.extent))&&this.clipUnrotated(o,t,p)}d&&this.renderWorlds(s,t),v&&o.restore(),this.postRender(o,t);var y=Lu(i.opacity),w=this.container;return y!==w.style.opacity&&(w.style.opacity=y),this.Rc!==c.rotation&&(this.Rc=c.rotation,this.Pc=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.Pc&&!this.Cc){var r=[this.context.canvas.width,this.context.canvas.height];nn(this.pixelTransform,r);var i=this.Gc,e=this.Ic,o=this.Rc,u=this.zc,s=this.Lc,a=this.getLayer(),f=[],h=r[0]*P_,c=r[1]*P_;f.push(this.getRenderTransform(i,e,o,P_,h,c,0).slice());var l=a.getSource(),v=u.getExtent();if(l.getWrapX()&&u.canWrapX()&&!Mn(v,s)){for(var d=s[0],p=Qn(v),y=0,w=void 0;d<v[0];)w=p*--y,f.push(this.getRenderTransform(i,e,o,P_,h,c,w).slice()),d+=p;for(y=0,d=s[2];d>v[2];)w=p*++y,f.push(this.getRenderTransform(i,e,o,P_,h,c,w).slice()),d-=p}this.Pc=N_(r,f,this.Nc,a.getStyleFunction(),s,e,o)}n(I_(t,this.Nc,this.Pc))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,n,r,i,e){var u=this;if(this.Dc){var s,a=n.viewState.resolution,f=n.viewState.rotation,h=this.getLayer(),c={},l=function(t,n,r){var u=o(t),s=c[u];if(s){if(!0!==s&&r<s.distanceSq){if(0===r)return c[u]=!0,e.splice(e.lastIndexOf(s),1),i(t,h,n);s.geometry=n,s.distanceSq=r}}else{if(0===r)return c[u]=!0,i(t,h,n);e.push(c[u]={feature:t,layer:h,geometry:n,distanceSq:r,callback:i})}},v=[this.Dc];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some((function(i){return s=i.forEachFeatureAtCoordinate(t,a,f,r,l,i===u.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map((function(t){return t.value})):null)})),s}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.Dc&&t.changed()},n.prototype.Ac=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var n=this.getLayer(),r=n.getSource();if(!r)return!1;var i=t.viewHints[Rs],e=t.viewHints[Gs],o=n.getUpdateWhileAnimating(),u=n.getUpdateWhileInteracting();if(this.ready&&!o&&i||!u&&e)return this.Cc=!0,!0;this.Cc=!1;var s=t.extent,a=t.viewState,f=a.projection,h=a.resolution,c=t.pixelRatio,l=n.getRevision(),v=n.getRenderBuffer(),d=n.getRenderOrder();void 0===d&&(d=Ih);var p=a.center.slice(),y=_n(s,v*h),w=y.slice(),m=[y.slice()],b=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!Mn(b,t.extent)){var g=Qn(b),_=Math.max(Qn(y)/2,g);y[0]=b[0]-_,y[2]=b[2]+_,si(p,f);var j=ur(m[0],f);j[0]<b[0]&&j[2]<b[2]?m.push([j[0]+g,j[1],j[2]+g,j[3]]):j[0]>b[0]&&j[2]>b[2]&&m.push([j[0]-g,j[1],j[2]-g,j[3]])}if(this.ready&&this.Ic==h&&this.Of==l&&this.Fc==d&&Mn(this.Lc,y))return x(this.Gf,w)||(this.Pc=null,this.Gf=w),this.Gc=p,this.replayGroupChanged=!1,!0;this.Dc=null;var O,S=new d_(Rh(h,c),y,h,c);this.getLayer().getDeclutter()&&(O=new d_(Rh(h,c),y,h,c));var M,E=Li();if(E){for(var T=0,k=m.length;T<k;++T){var A=zi(m[T],f);r.loadFeatures(A,Di(h,f),E)}M=ki(E,f)}else for(T=0,k=m.length;T<k;++T)r.loadFeatures(m[T],h,f);var C=Lh(h,c),P=!0,N=function(t){var r,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(r=i(t,h)),r){var e=this.renderFeature(t,C,r,S,M,O);P=P&&!e}}.bind(this),I=zi(y,f),L=r.getFeaturesInExtent(I);d&&L.sort(d);for(T=0,k=L.length;T<k;++T)N(L[T]);this.Nc=L,this.ready=P;var R=S.finish(),G=new C_(y,h,c,r.getOverlaps(),R,n.getRenderBuffer());return O&&(this.declutterExecutorGroup=new C_(y,h,c,r.getOverlaps(),O.finish(),n.getRenderBuffer())),this.Ic=h,this.Of=l,this.Fc=d,this.Gf=w,this.Lc=y,this.Gc=p,this.zc=f,this.Dc=G,this.Pc=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,n,r,i,e,o){if(!r)return!1;var u=!1;if(Array.isArray(r))for(var s=0,a=r.length;s<a;++s)u=Gh(i,t,r[s],n,this.kc,e,o)||u;else u=Gh(i,t,r,n,this.kc,e,o);return u},n}(Hg),G_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),z_=function(t){function n(n){var r=t.call(this,n)||this;return r.Uc=new R_(n),r.qc=n.getImageRatio(),r.Bc=[1,0,0,1,0,0],r.Xc=null,r}return G_(n,t),n.prototype.disposeInternal=function(){this.Uc.dispose(),t.prototype.disposeInternal.call(this)},n.prototype.getFeatures=function(t){if(!this.Uc)return new Promise((function(t){return t([])}));var n=nn(this.Bc,nn(this.Xc,t.slice()));return this.Uc.getFeatures(n)},n.prototype.handleFontsChanged=function(){this.Uc.handleFontsChanged()},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,r=t.viewState,i=r.resolution,e=t.viewHints,o=this.Uc,u=t.extent;1!==this.qc&&ir(u=u.slice(0),this.qc);var s=Qn(u)/i,a=Hn(u)/i;if(!e[Rs]&&!e[Gs]&&!nr(u)){o.useContainer(null,null,1);var f=o.context,h=k({},t,{declutterTree:new ed(9),extent:u,size:[s,a],viewState:k({},t.viewState,{rotation:0})}),c=!0,l=new Mo(u,i,n,f.canvas,(function(t){o.prepareFrame(h)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(h,null)&&(o.renderDeclutter(h),c=!1),t())}));l.addEventListener(L,function(){if(l.getState()===bo){this.Lt=c?null:l;var t=l.getResolution(),i=l.getPixelRatio(),e=t*n/i;this.renderedResolution=e,this.Bc=sn(this.Bc,s/2,a/2,1/e,-1/e,0,-r.center[0],-r.center[1])}}.bind(this)),l.load()}return this.Lt&&(this.Xc=t.pixelToCoordinateTransform.slice()),!!this.Lt},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,r,i,e,o){return this.Uc?this.Uc.forEachFeatureAtCoordinate(n,r,i,e,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,r,i,e,o)},n}($g),F_="image",D_="hybrid",U_="vector",q_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),B_={image:[Ch,Eh,Ah,kh,Ph],hybrid:[Ch,Ah],vector:[]},X_={hybrid:[kh,Ph,Th],vector:[Ch,Eh,Ah,kh,Ph,Th]},V_=function(t){function n(n){var r=t.call(this,n)||this;return r.kc=r.Ac.bind(r),r.Vc,r.Xc=null,r.Rc,r.Yc=[1,0,0,1,0,0],r}return q_(n,t),n.prototype.prepareTile=function(t,n,r){var i,e=t.getState();return e!==vt&&e!==dt||(this.Wc(t,n,r),this.Zc(t)&&(i=!0)),i},n.prototype.getTile=function(n,r,i,e){var o=e.pixelRatio,u=e.viewState,s=u.resolution,a=u.projection,f=this.getLayer(),h=f.getSource().getTile(n,r,i,o,a),c=e.viewHints,l=!(c[Rs]||c[Gs]);return!l&&h.wantedResolution||(h.wantedResolution=s),this.prepareTile(h,o,a)&&(l||Date.now()-e.time<8)&&f.getRenderMode()!==U_&&this.Hc(h,e),t.prototype.getTile.call(this,n,r,i,e)},n.prototype.isDrawableTile=function(n){var r=this.getLayer();return t.prototype.isDrawableTile.call(this,n)&&(r.getRenderMode()===U_?o(r)in n.executorGroups:n.hasContext(r))},n.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},n.prototype.prepareFrame=function(n){var r=this.getLayer().getRevision();return this.Vc!==r&&(this.Vc=r,this.renderedTiles.length=0),t.prototype.prepareFrame.call(this,n)},n.prototype.Wc=function(t,n,r){var i=this.getLayer(),e=i.getRevision(),u=i.getRenderOrder()||null,s=t.wantedResolution,a=t.getReplayState(i);if(a.dirty||a.renderedResolution!==s||a.renderedRevision!=e||a.renderedRenderOrder!=u){var f=i.getSource(),h=i.getDeclutter(),c=f.getTileGrid(),l=f.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),v=f.getSourceTiles(n,r,t),d=o(i);delete t.hitDetectionImageData[d],t.executorGroups[d]=[],h&&(t.declutterExecutorGroups[d]=[]),a.dirty=!1;for(var p=function(r,e){var o=v[r];if(o.getState()!=vt)return"continue";var p=o.tileCoord,w=c.getTileCoordExtent(p),m=Kn(l,w),b=_n(m,i.getRenderBuffer()*s,y.tmpExtent),g=In(w,m)?null:b,x=new d_(0,b,s,n),_=h?new d_(0,m,s,n):void 0,j=Lh(s,n),O=function(t){var n,r=t.getStyleFunction()||i.getStyleFunction();if(r&&(n=r(t,s)),n){var e=this.renderFeature(t,j,n,x,_);a.dirty=a.dirty||e}},S=o.getFeatures();u&&u!==a.renderedRenderOrder&&S.sort(u);for(var M=0,E=S.length;M<E;++M){var T=S[M];g&&!tr(g,T.getGeometry().getExtent())||O.call(y,T)}var k=x.finish(),A=i.getRenderMode()!==U_&&h&&1===v.length?null:m,C=new C_(A,s,n,f.getOverlaps(),k,i.getRenderBuffer());if(t.executorGroups[d].push(C),_){var P=new C_(null,s,n,f.getOverlaps(),_.finish(),i.getRenderBuffer());t.declutterExecutorGroups[d].push(P)}},y=this,w=0,m=v.length;w<m;++w)p(w);a.renderedRevision=e,a.renderedRenderOrder=u,a.renderedResolution=s}},n.prototype.forEachFeatureAtCoordinate=function(t,n,r,i,e){var u=n.viewState.resolution,s=n.viewState.rotation;r=null==r?0:r;var a=this.getLayer(),f=a.getSource().getTileGridForProjection(n.viewState.projection),h=xn([t]);_n(h,u*r,h);for(var c,l={},v=function(t,n,r){var u=t.getId();void 0===u&&(u=o(t));var s=l[u];if(s){if(!0!==s&&r<s.distanceSq){if(0===r)return l[u]=!0,e.splice(e.lastIndexOf(s),1),i(t,a,n);s.geometry=n,s.distanceSq=r}}else{if(0===r)return l[u]=!0,i(t,a,n);e.push(l[u]={feature:t,layer:a,geometry:n,distanceSq:r,callback:i})}},d=this.renderedTiles,p=function(i,e){var l=d[i];if(!tr(f.getTileCoordExtent(l.wrappedTileCoord),h))return"continue";var p=o(a),y=[l.executorGroups[p]],w=l.declutterExecutorGroups[p];w&&y.push(w),y.some((function(i){for(var e=i===w?n.declutterTree.all().map((function(t){return t.value})):null,o=0,a=i.length;o<a;++o){var f=i[o];if(c=f.forEachFeatureAtCoordinate(t,u,s,r,v,e))return!0}}))},y=0,w=d.length;!c&&y<w;++y)p(y);return c},n.prototype.getFeatures=function(t){return new Promise(function(n,r){for(var i,e=this.getLayer(),u=o(e),s=e.getSource(),a=this.renderedProjection,f=a.getExtent(),h=this.renderedResolution,c=s.getTileGridForProjection(a),l=nn(this.Xc,t.slice()),v=c.getTileCoordForCoordAndResolution(l,h),d=0,p=this.renderedTiles.length;d<p;++d)if(v.toString()===this.renderedTiles[d].tileCoord.toString()){if((i=this.renderedTiles[d]).getState()===vt){var y=c.getTileCoordExtent(i.tileCoord);s.getWrapX()&&a.canWrapX()&&!Mn(f,y)&&si(l,a);break}i=void 0}if(!i||i.loadingSourceTiles>0)n([]);else{var w=$n(c.getTileCoordExtent(i.wrappedTileCoord)),m=[(l[0]-w[0])/h,(w[1]-l[1])/h],b=i.getSourceTiles().reduce((function(t,n){return t.concat(n.getFeatures())}),[]),g=i.hitDetectionImageData[u];if(!g&&!this.Cc){var x=aa(c.getTileSize(c.getZForResolution(h))),_=this.Rc;g=N_(x,[this.getRenderTransform(c.getTileCoordCenter(i.wrappedTileCoord),h,0,P_,x[0]*P_,x[1]*P_,0)],b,e.getStyleFunction(),c.getTileCoordExtent(i.wrappedTileCoord),i.getReplayState(e).renderedResolution,_),i.hitDetectionImageData[u]=g}n(I_(m,b,g))}}.bind(this))},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.Vc&&t.changed()},n.prototype.Ac=function(t){this.renderIfReadyAndVisible()},n.prototype.renderDeclutter=function(t){var n=this.context,r=n.globalAlpha;n.globalAlpha=this.getLayer().getOpacity();for(var i=t.viewHints,e=!(i[Rs]||i[Gs]),u=this.renderedTiles,s=0,a=u.length;s<a;++s){var f=u[s],h=f.declutterExecutorGroups[o(this.getLayer())];if(h)for(var c=h.length-1;c>=0;--c)h[c].execute(this.context,1,this.getTileRenderTransform(f,t),t.viewState.rotation,e,void 0,t.declutterTree)}n.globalAlpha=r},n.prototype.getTileRenderTransform=function(t,n){var r=n.pixelRatio,i=n.viewState,e=i.center,o=i.resolution,u=i.rotation,s=n.size,a=Math.round(s[0]*r),f=Math.round(s[1]*r),h=this.getLayer().getSource().getTileGridForProjection(n.viewState.projection),c=t.tileCoord,l=h.getTileCoordExtent(t.wrappedTileCoord),v=h.getTileCoordExtent(c,this.tmpExtent)[0]-l[0];return Jt(en(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(e,o,u,r,a,f,v))},n.prototype.renderFrame=function(n,r){var i=n.viewHints,e=!(i[Rs]||i[Gs]);t.prototype.renderFrame.call(this,n,r),this.Xc=n.pixelToCoordinateTransform.slice(),this.Rc=n.viewState.rotation;var u=this.getLayer(),s=u.getRenderMode(),a=this.context,f=a.globalAlpha;a.globalAlpha=u.getOpacity();for(var h=X_[s],c=n.viewState,l=c.rotation,v=u.getSource(),d=v.getTileGridForProjection(c.projection).getZForResolution(c.resolution,v.zDirection),p=this.renderedTiles,y=[],w=[],m=!0,b=p.length-1;b>=0;--b){var g=p[b];m=m&&!g.getReplayState(u).dirty;var x=g.executorGroups[o(u)].filter((function(t){return t.hasExecutors(h)}));if(0!==x.length){var _=this.getTileRenderTransform(g,n),j=g.tileCoord[0],O=!1,S=x[0].getClipCoords(_);if(S){for(var M=0,E=y.length;M<E;++M)if(d!==j&&j<w[M]){var T=y[M];tr([S[0],S[3],S[4],S[7]],[T[0],T[3],T[4],T[7]])&&(O||(a.save(),O=!0),a.beginPath(),a.moveTo(S[0],S[1]),a.lineTo(S[2],S[3]),a.lineTo(S[4],S[5]),a.lineTo(S[6],S[7]),a.moveTo(T[6],T[7]),a.lineTo(T[4],T[5]),a.lineTo(T[2],T[3]),a.lineTo(T[0],T[1]),a.clip())}y.push(S),w.push(j)}for(var k=0,A=x.length;k<A;++k){x[k].execute(a,1,_,l,e,h)}O&&a.restore()}}return a.globalAlpha=f,this.ready=m,this.container},n.prototype.renderFeature=function(t,n,r,i,e){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var u=0,s=r.length;u<s;++u)o=Gh(i,t,r[u],n,this.kc,void 0,e)||o;else o=Gh(i,t,r,n,this.kc,void 0,e);return o},n.prototype.Zc=function(t){var n=this.getLayer();if(n.getRenderMode()===U_)return!1;var r=t.getReplayState(n),i=n.getRevision(),e=t.wantedResolution;return r.renderedTileResolution!==e||r.renderedTileRevision!==i},n.prototype.Hc=function(t,n){var r=this.getLayer(),i=t.getReplayState(r),e=r.getRevision(),u=t.executorGroups[o(r)];i.renderedTileRevision=e;var s=t.wrappedTileCoord,a=s[0],f=r.getSource(),h=n.pixelRatio,c=n.viewState.projection,l=f.getTileGridForProjection(c),v=l.getResolution(t.tileCoord[0]),d=n.pixelRatio/t.wantedResolution*v,p=l.getResolution(a),y=t.getContext(r);h=Math.round(Math.max(h,d/h));var w=f.getTilePixelSize(a,h,c);y.canvas.width=w[0],y.canvas.height=w[1];var m=h/d;if(1!==m){var b=$t(this.Yc);en(b,m,m),y.setTransform.apply(y,b)}var g=l.getTileCoordExtent(s,this.tmpExtent),x=d/p,_=$t(this.Yc);en(_,x,-x),un(_,-g[0],-g[3]);for(var j=0,O=u.length;j<O;++j){u[j].execute(y,m,_,0,!0,B_[r.getRenderMode()])}i.renderedTileResolution=t.wantedResolution},n}(ox),Y_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),W_=function(t){function n(n,r){var i=t.call(this)||this;return r&&!Array.isArray(n[0])?i.setFlatCoordinates(r,n):i.setCoordinates(n,r),i}return Y_(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,r,i){if(i<On(this.getExtent(),t,n))return i;for(var e=this.flatCoordinates,o=this.stride,u=0,s=e.length;u<s;u+=o){var a=vr(t,n,e[u],e[u+1]);if(a<i){i=a;for(var f=0;f<o;++f)r[f]=e[u+f];r.length=o}}return i},n.prototype.getCoordinates=function(){return be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Te(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,r=this.stride,i=[],e=0,o=t.length;e<o;e+=r){var u=new Te(t.slice(e,e+r),n);i.push(u)}return i},n.prototype.getType=function(){return Pt.MULTI_POINT},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,r=this.stride,i=0,e=n.length;i<e;i+=r){if(En(t,n[i],n[i+1]))return!0}return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fe(this.flatCoordinates,0,t,this.stride),this.changed()},n}(te);function Z_(t,n,r,i,e,o,u){var s,a,f=(r-n)/i;if(1===f)s=n;else if(2===f)s=n,a=e;else if(0!==f){for(var h=t[n],c=t[n+1],l=0,v=[0],p=n+i;p<r;p+=i){var y=t[p],w=t[p+1];l+=Math.sqrt((y-h)*(y-h)+(w-c)*(w-c)),v.push(l),h=y,c=w}var m=e*l,b=d(v,m);b<0?(a=(m-v[-b-2])/(v[-b-1]-v[-b-2]),s=n+(-b-2)*i):s=n+b*i}var g=u>1?u:2,x=o||new Array(g);for(p=0;p<g;++p)x[p]=void 0===s?NaN:void 0===a?t[s+p]:mr(t[s+p],t[s+i+p],a);return x}function H_(t,n,r,i,e,o){if(r==n)return null;var u;if(e<t[n+i-1])return o?((u=t.slice(n,n+i))[i-1]=e,u):null;if(t[r-1]<e)return o?((u=t.slice(r-i,r))[i-1]=e,u):null;if(e==t[n+i-1])return t.slice(n,n+i);for(var s=n/i,a=r/i;s<a;){var f=s+a>>1;e<t[(f+1)*i-1]?a=f:s=f+1}var h=t[s*i-1];if(e==h)return t.slice((s-1)*i,(s-1)*i+i);var c=(e-h)/(t[(s+1)*i-1]-h);u=[];for(var l=0;l<i-1;++l)u.push(mr(t[(s-1)*i+l],t[s*i+l],c));return u.push(e),u}function K_(t,n,r,i,e,o,u){if(u)return H_(t,n,r[r.length-1],i,e,o);var s;if(e<t[i-1])return o?((s=t.slice(0,i))[i-1]=e,s):null;if(t[t.length-1]<e)return o?((s=t.slice(t.length-i))[i-1]=e,s):null;for(var a=0,f=r.length;a<f;++a){var h=r[a];if(n!=h){if(e<t[n+i-1])return null;if(e<=t[h-1])return H_(t,n,h,i,e,!1);n=h}}return null}var $_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),J_=function(t){function n(n,r){var i=t.call(this)||this;return i.Kc=null,i.$c=-1,i.wt=-1,i.bt=-1,void 0===r||Array.isArray(n[0])?i.setCoordinates(n,r):i.setFlatCoordinates(r,n),i}return $_(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?b(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,r,i){return i<On(this.getExtent(),t,n)?i:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.bt=this.getRevision()),oe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.wt,!1,t,n,r,i))},n.prototype.forEachSegment=function(t){return Le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinateAtM=function(t,n){if(this.layout!=At&&this.layout!=Ct)return null;var r=void 0!==n&&n;return H_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},n.prototype.getCoordinates=function(){return be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(t,n){return Z_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},n.prototype.getLength=function(){return y_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.$c!=this.getRevision()&&(this.Kc=this.getCoordinateAt(.5,this.Kc),this.$c=this.getRevision()),this.Kc},n.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new n(r,Tt)},n.prototype.getType=function(){return Pt.LINE_STRING},n.prototype.intersectsExtent=function(t){return Re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fe(this.flatCoordinates,0,t,this.stride),this.changed()},n}(te),Q_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),tj=function(t){function n(n,r,i){var e=t.call(this)||this;if(e.gt=[],e.wt=-1,e.bt=-1,Array.isArray(n[0]))e.setCoordinates(n,r);else if(void 0!==r&&i)e.setFlatCoordinates(r,n),e.gt=i;else{for(var o=e.getLayout(),u=n,s=[],a=[],f=0,h=u.length;f<h;++f){var c=u[f];0===f&&(o=c.getLayout()),b(s,c.getFlatCoordinates()),a.push(s.length)}e.setFlatCoordinates(o,s),e.gt=a}return e}return Q_(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.gt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.gt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,r,i){return i<On(this.getExtent(),t,n)?i:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(ie(this.flatCoordinates,0,this.gt,this.stride,0)),this.bt=this.getRevision()),ue(this.flatCoordinates,0,this.gt,this.stride,this.wt,!1,t,n,r,i))},n.prototype.getCoordinateAtM=function(t,n,r){if(this.layout!=At&&this.layout!=Ct||0===this.flatCoordinates.length)return null;var i=void 0!==n&&n,e=void 0!==r&&r;return K_(this.flatCoordinates,0,this.gt,this.stride,t,i,e)},n.prototype.getCoordinates=function(){return ge(this.flatCoordinates,0,this.gt,this.stride)},n.prototype.getEnds=function(){return this.gt},n.prototype.getLineString=function(t){return t<0||this.gt.length<=t?null:new J_(this.flatCoordinates.slice(0===t?0:this.gt[t-1],this.gt[t]),this.layout)},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.gt,r=this.layout,i=[],e=0,o=0,u=n.length;o<u;++o){var s=n[o],a=new J_(t.slice(e,s),r);i.push(a),e=s}return i},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,r=0,i=this.gt,e=this.stride,o=0,u=i.length;o<u;++o){var s=i[o];b(t,Z_(n,r,s,e,.5)),r=s}return t},n.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=ve(this.flatCoordinates,0,this.gt,this.stride,t,r,0,i),new n(r,Tt,i)},n.prototype.getType=function(){return Pt.MULTI_LINE_STRING},n.prototype.intersectsExtent=function(t){return Ge(this.flatCoordinates,0,this.gt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=he(this.flatCoordinates,0,t,this.stride,this.gt);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},n}(te);function nj(t,n,r,i){for(var e=[],o=[1/0,1/0,-1/0,-1/0],u=0,s=r.length;u<s;++u){var a=r[u];o=Nn(t,n,a[0],i),e.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=a[a.length-1]}return e}var rj=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ij=function(t){function n(n,r,i){var e=t.call(this)||this;if(e.Jc=[],e.Qc=-1,e.tl=null,e.wt=-1,e.bt=-1,e.jt=-1,e.Ot=null,!i&&!Array.isArray(n[0])){for(var o=e.getLayout(),u=n,s=[],a=[],f=0,h=u.length;f<h;++f){var c=u[f];0===f&&(o=c.getLayout());for(var l=s.length,v=c.getEnds(),d=0,p=v.length;d<p;++d)v[d]+=l;b(s,c.getFlatCoordinates()),a.push(v)}r=o,n=s,i=a}return void 0!==r&&i?(e.setFlatCoordinates(r,n),e.Jc=i):e.setCoordinates(n,r),e}return rj(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var r=this.flatCoordinates.length;b(this.flatCoordinates,t.getFlatCoordinates());for(var i=0,e=(n=t.getEnds().slice()).length;i<e;++i)n[i]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.Jc.push();this.Jc.push(n),this.changed()},n.prototype.clone=function(){for(var t=this.Jc.length,r=new Array(t),i=0;i<t;++i)r[i]=this.Jc[i].slice();var e=new n(this.flatCoordinates.slice(),this.layout,r);return e.applyProperties(this),e},n.prototype.closestPointXY=function(t,n,r,i){return i<On(this.getExtent(),t,n)?i:(this.bt!=this.getRevision()&&(this.wt=Math.sqrt(ee(this.flatCoordinates,0,this.Jc,this.stride,0)),this.bt=this.getRevision()),se(this.getOrientedFlatCoordinates(),0,this.Jc,this.stride,this.wt,!0,t,n,r,i))},n.prototype.containsXY=function(t,n){return Pe(this.getOrientedFlatCoordinates(),0,this.Jc,this.stride,t,n)},n.prototype.getArea=function(){return Oe(this.getOrientedFlatCoordinates(),0,this.Jc,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ye(n=this.getOrientedFlatCoordinates().slice(),0,this.Jc,this.stride,t):n=this.flatCoordinates,xe(n,0,this.Jc,this.stride)},n.prototype.getEndss=function(){return this.Jc},n.prototype.getFlatInteriorPoints=function(){if(this.Qc!=this.getRevision()){var t=nj(this.flatCoordinates,0,this.Jc,this.stride);this.tl=Ie(this.getOrientedFlatCoordinates(),0,this.Jc,this.stride,t),this.Qc=this.getRevision()}return this.tl},n.prototype.getInteriorPoints=function(){return new W_(this.getFlatInteriorPoints().slice(),At)},n.prototype.getOrientedFlatCoordinates=function(){if(this.jt!=this.getRevision()){var t=this.flatCoordinates;Xe(t,0,this.Jc,this.stride)?this.Ot=t:(this.Ot=t.slice(),this.Ot.length=Ye(this.Ot,0,this.Jc,this.stride)),this.jt=this.getRevision()}return this.Ot},n.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=me(this.flatCoordinates,0,this.Jc,this.stride,Math.sqrt(t),r,0,i),new n(r,Tt,i)},n.prototype.getPolygon=function(t){if(t<0||this.Jc.length<=t)return null;var n;if(0===t)n=0;else{var r=this.Jc[t-1];n=r[r.length-1]}var i=this.Jc[t].slice(),e=i[i.length-1];if(0!==n)for(var o=0,u=i.length;o<u;++o)i[o]-=n;return new Ke(this.flatCoordinates.slice(n,e),this.layout,i)},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,r=this.Jc,i=[],e=0,o=0,u=r.length;o<u;++o){var s=r[o].slice(),a=s[s.length-1];if(0!==e)for(var f=0,h=s.length;f<h;++f)s[f]-=e;var c=new Ke(n.slice(e,a),t,s);i.push(c),e=a}return i},n.prototype.getType=function(){return Pt.MULTI_POLYGON},n.prototype.intersectsExtent=function(t){return De(this.getOrientedFlatCoordinates(),0,this.Jc,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=ce(this.flatCoordinates,0,t,this.stride,this.Jc);if(0===r.length)this.flatCoordinates.length=0;else{var i=r[r.length-1];this.flatCoordinates.length=0===i.length?0:i[i.length-1]}this.changed()},n}(te),ej=[1,0,0,1,0,0],oj=function(){function t(t,n,r,i,e){this.styleFunction,this.ut,this.H=e,this.nl=t,this.rl=n,this.tl=null,this.il=null,this.gt=r,this.el=i}return t.prototype.get=function(t){return this.el[t]},t.prototype.getExtent=function(){return this.ut||(this.ut=this.nl===Pt.POINT?Pn(this.rl):Nn(this.rl,0,this.rl.length,2)),this.ut},t.prototype.getFlatInteriorPoint=function(){if(!this.tl){var t=Yn(this.getExtent());this.tl=Ne(this.rl,0,this.gt,2,t,0)}return this.tl},t.prototype.getFlatInteriorPoints=function(){if(!this.tl){var t=nj(this.rl,0,this.gt,2);this.tl=Ie(this.rl,0,this.gt,2,t)}return this.tl},t.prototype.getFlatMidpoint=function(){return this.il||(this.il=Z_(this.rl,0,this.rl.length,2,.5)),this.il},t.prototype.getFlatMidpoints=function(){if(!this.il){this.il=[];for(var t=this.rl,n=0,r=this.gt,i=0,e=r.length;i<e;++i){var o=r[i],u=Z_(t,n,o,2,.5);b(this.il,u),n=o}}return this.il},t.prototype.getId=function(){return this.H},t.prototype.getOrientedFlatCoordinates=function(){return this.rl},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,n){return this},t.prototype.getProperties=function(){return this.el},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){return this.styleFunction},t.prototype.getType=function(){return this.nl},t.prototype.transform=function(t){var n=(t=gi(t)).getExtent(),r=t.getWorldExtent();if(n&&r){var i=Hn(r)/Hn(n);sn(ej,r[0],r[3],i,-i,0,0,0),Xi(this.rl,0,this.rl.length,2,ej,this.rl)}},t.prototype.getEnds=function(){return this.gt},t}();function uj(t){var n=t.getType();switch(n){case Pt.POINT:return new Te(t.getFlatCoordinates());case Pt.MULTI_POINT:return new W_(t.getFlatCoordinates(),Tt);case Pt.LINE_STRING:return new J_(t.getFlatCoordinates(),Tt);case Pt.MULTI_LINE_STRING:return new tj(t.getFlatCoordinates(),Tt,t.getEnds());case Pt.POLYGON:var r=t.getFlatCoordinates(),i=t.getEnds(),e=We(r,i);return e.length>1?new ij(r,Tt,e):new Ke(r,Tt,i);default:throw new Error("Invalid geometry type:"+n)}}oj.prototype.getEndss=oj.prototype.getEnds,oj.prototype.getFlatCoordinates=oj.prototype.getOrientedFlatCoordinates;var sj=oj;var aj=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),fj=function(t){function n(n){return t.call(this,n)||this}return aj(n,t),n.prototype.createRenderer=function(){return new R_(this)},n}(Yx);function hj(t,n,r){for(var i,e,o,u,s,a,f=[],h=t(0),c=t(1),l=n(h),v=n(c),d=[c,h],p=[v,l],y=[1,0],w={},m=1e5;--m>0&&y.length>0;)o=y.pop(),h=d.pop(),l=p.pop(),(a=o.toString())in w||(f.push(l[0],l[1]),w[a]=!0),u=y.pop(),c=d.pop(),v=p.pop(),lr((e=n(i=t(s=(o+u)/2)))[0],e[1],l[0],l[1],v[0],v[1])<r?(f.push(v[0],v[1]),w[a=u.toString()]=!0):(y.push(u,s,s,o),p.push(v,e,e,l),d.push(c,i,i,h));return f}function cj(t,n,r,i,e){return hj((function(i){return[t,n+(r-n)*i]}),Ai(gi("EPSG:4326"),i),e)}function lj(t,n,r,i,e){return hj((function(i){return[n+(r-n)*i,t]}),Ai(gi("EPSG:4326"),i),e)}var vj=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),dj=new Vv({color:"rgba(0,0,0,0.2)"}),pj=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],yj=function(t){function n(n){var r=this,i=n||{},e=k({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},i);return delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,(r=t.call(this,e)||this).yr=null,r.ul=1/0,r.sl=1/0,r.al=-1/0,r.fl=-1/0,r.hl=1/0,r.cl=1/0,r.ll=-1/0,r.vl=-1/0,r.dl=void 0!==i.targetSize?i.targetSize:100,r.pl=void 0!==i.maxLines?i.maxLines:100,r.yl=[],r.wl=[],r.ml=void 0!==i.strokeStyle?i.strokeStyle:dj,r.bl=void 0,r.gl=void 0,r.xl=null,r._l=null,r.jl=null,r.Ol=null,r.Sl=null,r.Ml=null,r.El=null,i.showLabels&&(r.Tl=null==i.lonLabelFormatter?Jr.bind(r,"EW"):i.lonLabelFormatter,r.kl=null==i.latLabelFormatter?Jr.bind(r,"NS"):i.latLabelFormatter,r.Al=null==i.lonLabelPosition?0:i.lonLabelPosition,r.Cl=null==i.latLabelPosition?1:i.latLabelPosition,r.Pl=new Qv({text:void 0!==i.lonLabelStyle?i.lonLabelStyle.clone():new rd({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Cv({color:"rgba(0,0,0,1)"}),stroke:new Vv({color:"rgba(255,255,255,1)",width:3})})}),r.Nl=function(t){var n=t.get("graticule_label");return this.Pl.getText().setText(n),this.Pl}.bind(r),r.Il=new Qv({text:void 0!==i.latLabelStyle?i.latLabelStyle.clone():new rd({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Cv({color:"rgba(0,0,0,1)"}),stroke:new Vv({color:"rgba(255,255,255,1)",width:3})})}),r.Ll=function(t){var n=t.get("graticule_label");return this.Il.getText().setText(n),this.Il}.bind(r),r.Ml=[],r.El=[],r.addEventListener(hu,r.Rl.bind(r))),r.Gl=void 0!==i.intervals?i.intervals:pj,r.setSource(new Gd({loader:r.loaderFunction.bind(r),strategy:r.strategyFunction.bind(r),features:new ht,overlaps:!1,useSpatialIndex:!1,wrapX:i.wrapX})),r.zl=[],r.Fl=new Qv({stroke:r.ml}),r.Dl=null,r.Gf=null,r.Ic=null,r.setRenderOrder(null),r}return vj(n,t),n.prototype.strategyFunction=function(t,n){var r=t.slice();return this.yr&&this.getSource().getWrapX()&&ur(r,this.yr),this.Dl&&(Ln(this.Dl,r,n)?r=this.Dl.slice():this.getSource().removeLoadedExtent(this.Dl)),[r]},n.prototype.loaderFunction=function(t,n,r){this.Dl=t;var i=this.getSource(),e=Kn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.Gf&&In(this.Gf,e)&&this.Ic===n||(this.Gf=e,this.Ic=n,nr(e)))){var o=Yn(e),u=n*n/4;(!this.yr||!Ti(this.yr,r))&&this.Ul(r),this.ql(e,o,n,u);var s,a=this.yl.length+this.wl.length;for(this.Ml&&(a+=this.yl.length),this.El&&(a+=this.wl.length);a>this.zl.length;)s=new Et,this.zl.push(s);var f=i.getFeaturesCollection();f.clear();var h,c,l=0;for(h=0,c=this.yl.length;h<c;++h)(s=this.zl[l++]).setGeometry(this.yl[h]),s.setStyle(this.Fl),f.push(s);for(h=0,c=this.wl.length;h<c;++h)(s=this.zl[l++]).setGeometry(this.wl[h]),s.setStyle(this.Fl),f.push(s)}},n.prototype.Bl=function(t,n,r,i,e,o){var u=this.Xl(t,n,r,i,o);if(tr(u.getExtent(),e)){if(this.Ml){var s=this.Tl(t);o in this.Ml?this.Ml[o].text=s:this.Ml[o]={geom:new Te([]),text:s}}this.yl[o++]=u}return o},n.prototype.Vl=function(t,n,r,i,e,o){var u=this.Yl(t,n,r,i,o);if(tr(u.getExtent(),e)){if(this.El){var s=this.kl(t);o in this.El?this.El[o].text=s:this.El[o]={geom:new Te([]),text:s}}this.wl[o++]=u}return o},n.prototype.Rl=function(t){var n=t.frameState.viewState.rotation,r=t.frameState.viewState.resolution,i=t.frameState.size,e=t.frameState.extent,o=Yn(e),u=e;if(n){var s=i[0]*r,a=i[1]*r;u=[o[0]-s/2,o[1]-a/2,o[0]+s/2,o[1]+a/2]}var f=0,h=0,c=this.Cl<.5,l=this.yr.getExtent(),v=Qn(l);this.getSource().getWrapX()&&this.yr.canWrapX()&&!Mn(l,e)&&(f=Math.floor((e[0]-l[0])/v),h=Math.ceil((e[2]-l[2])/v),c=c!==Math.abs(n)>Math.PI/2);for(var d=Fh(t),p=f;p<=h;++p){var y=this.yl.length+this.wl.length,w=void 0,m=void 0,b=void 0,g=void 0;if(this.Ml)for(m=0,b=this.Ml.length;m<b;++m){var x=this.yl[m];if(n||0!==p)(_=x.clone()).translate(p*v,0),_.rotate(-n,o),(g=this.Wl(_,u,m)).rotate(n,o);else g=this.Wl(x,e,m);(w=this.zl[y++]).setGeometry(g),w.set("graticule_label",this.Ml[m].text),d.drawFeature(w,this.Nl(w))}if(this.El&&(p===f&&c||p===h&&!c))for(m=0,b=this.wl.length;m<b;++m){var _;x=this.wl[m];if(n||0!==p)(_=x.clone()).translate(p*v,0),_.rotate(-n,o),(g=this.Zl(_,u,m)).rotate(n,o);else g=this.Zl(x,e,m);(w=this.zl[y++]).setGeometry(g),w.set("graticule_label",this.El[m].text),d.drawFeature(w,this.Ll(w))}}},n.prototype.ql=function(t,n,r,i){var e=this.Hl(r);if(-1==e)return this.yl.length=0,this.wl.length=0,this.Ml&&(this.Ml.length=0),void(this.El&&(this.El.length=0));var o=!1,u=this.yr.getExtent(),s=Qn(u);this.getSource().getWrapX()&&this.yr.canWrapX()&&!Mn(u,t)&&(Qn(t)>=s?(t[0]=u[0],t[2]=u[2]):o=!0);var a=[fr(n[0],this.ll,this.hl),fr(n[1],this.vl,this.cl)],f=this.gl(a);isNaN(f[1])&&(f[1]=Math.abs(this.ul)>=Math.abs(this.al)?this.ul:this.al);var h,c,l,v,d=fr(f[0],this.fl,this.sl),p=fr(f[1],this.al,this.ul),y=this.pl,w=t;o||(w=[fr(t[0],this.ll,this.hl),fr(t[1],this.vl,this.cl),fr(t[2],this.ll,this.hl),fr(t[3],this.vl,this.cl)]);var m=or(w,this.gl,void 0,8),b=m[3],g=m[2],x=m[1],_=m[0];if(o||(Sn(w,this._l)&&(_=this.fl,x=this.al),Sn(w,this.jl)&&(g=this.sl,x=this.al),Sn(w,this.Ol)&&(_=this.fl,b=this.ul),Sn(w,this.Sl)&&(g=this.sl,b=this.ul),b=fr(b,p,this.ul),g=fr(g,d,this.sl),x=fr(x,this.al,p),_=fr(_,this.fl,d)),v=fr(d=Math.floor(d/e)*e,this.fl,this.sl),c=this.Bl(v,x,b,i,t,0),h=0,o)for(;(v-=e)>=_&&h++<y;)c=this.Bl(v,x,b,i,t,c);else for(;v!=this.fl&&h++<y;)v=Math.max(v-e,this.fl),c=this.Bl(v,x,b,i,t,c);if(v=fr(d,this.fl,this.sl),h=0,o)for(;(v+=e)<=g&&h++<y;)c=this.Bl(v,x,b,i,t,c);else for(;v!=this.sl&&h++<y;)v=Math.min(v+e,this.sl),c=this.Bl(v,x,b,i,t,c);for(this.yl.length=c,this.Ml&&(this.Ml.length=c),l=fr(p=Math.floor(p/e)*e,this.al,this.ul),c=this.Vl(l,_,g,i,t,0),h=0;l!=this.al&&h++<y;)l=Math.max(l-e,this.al),c=this.Vl(l,_,g,i,t,c);for(l=fr(p,this.al,this.ul),h=0;l!=this.ul&&h++<y;)l=Math.min(l+e,this.ul),c=this.Vl(l,_,g,i,t,c);this.wl.length=c,this.El&&(this.El.length=c)},n.prototype.Hl=function(t){for(var n=this.xl[0],r=this.xl[1],i=-1,e=Math.pow(this.dl*t,2),o=[],u=[],s=0,a=this.Gl.length;s<a;++s){var f=fr(this.Gl[s]/2,0,90),h=fr(r,-90+f,90-f);if(o[0]=n-f,o[1]=h-f,u[0]=n+f,u[1]=h+f,this.bl(o,o),this.bl(u,u),Math.pow(u[0]-o[0],2)+Math.pow(u[1]-o[1],2)<=e)break;i=this.Gl[s]}return i},n.prototype.Xl=function(t,n,r,i,e){var o=cj(t,n,r,this.yr,i),u=this.yl[e];return u?(u.setFlatCoordinates(Tt,o),u.changed()):(u=new J_(o,Tt),this.yl[e]=u),u},n.prototype.Wl=function(t,n,r){var i=t.getFlatCoordinates(),e=1,o=i.length-1;i[e]>i[o]&&(e=o,o=1);var u=Math.max(n[1],i[e]),s=Math.min(n[3],i[o]),a=fr(n[1]+Math.abs(n[1]-n[3])*this.Al,u,s),f=[i[e-1]+(i[o-1]-i[e-1])*(a-i[e])/(i[o]-i[e]),a],h=this.Ml[r].geom;return h.setCoordinates(f),h},n.prototype.getMeridians=function(){return this.yl},n.prototype.Yl=function(t,n,r,i,e){var o=lj(t,n,r,this.yr,i),u=this.wl[e];return u?(u.setFlatCoordinates(Tt,o),u.changed()):u=new J_(o,Tt),u},n.prototype.Zl=function(t,n,r){var i=t.getFlatCoordinates(),e=0,o=i.length-2;i[e]>i[o]&&(e=o,o=0);var u=Math.max(n[0],i[e]),s=Math.min(n[2],i[o]),a=fr(n[0]+Math.abs(n[0]-n[2])*this.Cl,u,s),f=[a,i[e+1]+(i[o+1]-i[e+1])*(a-i[e])/(i[o]-i[e])],h=this.El[r].geom;return h.setCoordinates(f),h},n.prototype.getParallels=function(){return this.wl},n.prototype.Ul=function(t){var n=gi("EPSG:4326"),r=t.getWorldExtent();this.ul=r[3],this.sl=r[2],this.al=r[1],this.fl=r[0];var i=Ai(t,n);if(this.fl<this.sl)this.gl=i;else{var e=this.fl+this.sl/2;this.sl+=360,this.gl=function(t,n,r){for(var o=r||2,u=i(t,n,o),s=0,a=u.length;s<a;s+=o)u[s]<e&&(u[s]+=360);return u}}this.bl=Ai(n,t);var o=or([this.fl,this.al,this.sl,this.ul],this.bl,void 0,8);this.ll=o[0],this.hl=o[2],this.vl=o[1],this.cl=o[3],this._l=this.bl([this.fl,this.al]),this.jl=this.bl([this.sl,this.al]),this.Ol=this.bl([this.fl,this.ul]),this.Sl=this.bl([this.sl,this.ul]),this.xl=this.gl(Yn(t.getExtent())),isNaN(this.xl[1])&&(this.xl[1]=Math.abs(this.ul)>=Math.abs(this.al)?this.ul:this.al),this.yr=t},n}(fj),wj=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),mj="blur",bj="gradient",gj="radius",xj=["#00f","#0ff","#0f0","#ff0","#f00"];var _j=function(t){function n(n){var r=this,i=n||{},e=k({},i);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,(r=t.call(this,e)||this).Kl=null,r.addChangeListener(bj,r.$l),r.setGradient(i.gradient?i.gradient:xj),r.setBlur(void 0!==i.blur?i.blur:15),r.setRadius(void 0!==i.radius?i.radius:8);var o=i.weight?i.weight:"weight";return r.Jl="string"==typeof o?function(t){return t.get(o)}:o,r.setRenderOrder(null),r}return wj(n,t),n.prototype.getBlur=function(){return this.get(mj)},n.prototype.getGradient=function(){return this.get(bj)},n.prototype.getRadius=function(){return this.get(gj)},n.prototype.$l=function(){this.Kl=function(t){for(var n=1,r=256,i=Eo(n,r),e=i.createLinearGradient(0,0,n,r),o=1/(t.length-1),u=0,s=t.length;u<s;++u)e.addColorStop(u*o,t[u]);return i.fillStyle=e,i.fillRect(0,0,n,r),i.canvas}(this.getGradient())},n.prototype.setBlur=function(t){this.set(mj,t)},n.prototype.setGradient=function(t){this.set(bj,t)},n.prototype.setRadius=function(t){this.set(gj,t)},n.prototype.createRenderer=function(){return new Zx(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.Jl(t);return void 0!==n?fr(n,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(gj)+this.get(mj))}.bind(this),u_blurSlope:function(){return this.get(gj)/Math.max(1,this.get(mj))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.Kl}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},n.prototype.renderDeclutter=function(){},n}(Yx),jj=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,n){var r;if(n){var i=n.dataProjection?gi(n.dataProjection):this.readProjection(t);n.extent&&i&&i.getUnits()===zt.TILE_PIXELS&&(i=gi(i)).setWorldExtent(n.extent),r={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(r)},t.prototype.adaptOptions=function(t){return k({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return i()},t.prototype.readFeature=function(t,n){return i()},t.prototype.readFeatures=function(t,n){return i()},t.prototype.readGeometry=function(t,n){return i()},t.prototype.readProjection=function(t){return i()},t.prototype.writeFeature=function(t,n){return i()},t.prototype.writeFeatures=function(t,n){return i()},t.prototype.writeGeometry=function(t,n){return i()},t}();function Oj(t,n,r){var i,e=r?gi(r.featureProjection):null,o=r?gi(r.dataProjection):null;if(i=e&&o&&!Ti(e,o)?(n?t.clone():t).transform(n?e:o,n?o:e):t,n&&r&&void 0!==r.decimals){var u=Math.pow(10,r.decimals);i===t&&(i=t.clone()),i.applyTransform((function(t){for(var n=0,r=t.length;n<r;++n)t[n]=Math.round(t[n]*u)/u;return t}))}return i}function Sj(t,n){var r=n?gi(n.featureProjection):null,i=n?gi(n.dataProjection):null;return r&&i&&!Ti(r,i)?Pi(t,i,r):t}var Mj=r(98),Ej=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Tj(t,n,r){if(3===t){var i={keys:[],values:[],features:[]},e=r.readVarint()+r.pos;r.readFields(kj,i,e),i.length=i.features.length,i.length&&(n[i.name]=i)}}function kj(t,n,r){if(15===t)n.version=r.readVarint();else if(1===t)n.name=r.readString();else if(5===t)n.extent=r.readVarint();else if(2===t)n.features.push(r.pos);else if(3===t)n.keys.push(r.readString());else if(4===t){for(var i=null,e=r.readVarint()+r.pos;r.pos<e;)i=1===(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;n.values.push(i)}}function Aj(t,n,r){if(1==t)n.id=r.readVarint();else if(2==t)for(var i=r.readVarint()+r.pos;r.pos<i;){var e=n.layer.keys[r.readVarint()],o=n.layer.values[r.readVarint()];n.properties[e]=o}else 3==t?n.type=r.readVarint():4==t&&(n.geometry=r.pos)}function Cj(t,n,r){t.pos=n.features[r];var i=t.readVarint()+t.pos,e={layer:n,type:0,properties:{}};return t.readFields(Aj,e,i),e}var Pj=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.dataProjection=new ar({code:"",units:zt.TILE_PIXELS}),r.Ql=i.featureClass?i.featureClass:sj,r.K=i.geometryName,r.tv=i.layerName?i.layerName:"layer",r.Bf=i.layers?i.layers:null,r.nv=i.idProperty,r.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],r}return Ej(n,t),n.prototype.rv=function(t,n,r,i){t.pos=n.geometry;for(var e=t.readVarint()+t.pos,o=1,u=0,s=0,a=0,f=0,h=0;t.pos<e;){if(!u){var c=t.readVarint();o=7&c,u=c>>3}u--,1===o||2===o?(s+=t.readSVarint(),a+=t.readSVarint(),1===o&&f>h&&(i.push(f),h=f),r.push(s,a),f+=2):7===o?f>h&&(r.push(r[h],r[h+1]),f+=2):Ot(!1,59)}f>h&&(i.push(f),h=f)},n.prototype.iv=function(t,n,r){var i,e=n.type;if(0===e)return null;var o,u=n.properties;this.nv?(o=u[this.nv],delete u[this.nv]):o=n.id,u[this.tv]=n.layer.name;var s=[],a=[];this.rv(t,n,s,a);var f=function(t,n){var r;1===t?r=1===n?Pt.POINT:Pt.MULTI_POINT:2===t?r=1===n?Pt.LINE_STRING:Pt.MULTI_LINE_STRING:3===t&&(r=Pt.POLYGON);return r}(e,a.length);if(this.Ql===sj)(i=new this.Ql(f,s,a,u,o)).transform(r.dataProjection);else{var h=void 0;if(f==Pt.POLYGON){var c=We(s,a);h=c.length>1?new ij(s,Tt,c):new Ke(s,Tt,a)}else h=f===Pt.POINT?new Te(s,Tt):f===Pt.LINE_STRING?new J_(s,Tt):f===Pt.POLYGON?new Ke(s,Tt,a):f===Pt.MULTI_POINT?new W_(s,Tt):f===Pt.MULTI_LINE_STRING?new tj(s,Tt,a):null;i=new(0,this.Ql),this.K&&i.setGeometryName(this.K);var l=Oj(h,!1,r);i.setGeometry(l),void 0!==o&&i.setId(o),i.setProperties(u,!0)}return i},n.prototype.getType=function(){return fh},n.prototype.readFeatures=function(t,n){var r=this.Bf,i=this.adaptOptions(n),e=gi(i.dataProjection);e.setWorldExtent(i.extent),i.dataProjection=e;var o=new Mj(t),u=o.readFields(Tj,{}),s=[];for(var a in u)if(!r||-1!=r.indexOf(a)){var f=u[a],h=f?[0,0,f.extent,f.extent]:null;e.setExtent(h);for(var c=0,l=f.length;c<l;++c){var v=Cj(o,f,c),d=this.iv(o,v,i);null!==d&&s.push(d)}}return s},n.prototype.readProjection=function(t){return this.dataProjection},n.prototype.setLayers=function(t){this.Bf=t},n}(jj),Nj=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ij=function(t){function n(n){var r=this,i=n||{},e=k({},i);delete e.preload,delete e.useInterimTilesOnError,(r=t.call(this,e)||this).on,r.once,r.un,i.renderMode===F_&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),i.renderMode=void 0);var o=i.renderMode||D_;return Ot(o==D_||o==U_,28),r.ev=o,r.setPreload(i.preload?i.preload:0),r.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),r.getBackground,r.setBackground,r}return Nj(n,t),n.prototype.createRenderer=function(){return new V_(this)},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderMode=function(){return this.ev},n.prototype.getPreload=function(){return this.get(tx)},n.prototype.getUseInterimTilesOnError=function(){return this.get(nx)},n.prototype.setPreload=function(t){this.set(tx,t)},n.prototype.setUseInterimTilesOnError=function(t){this.set(nx,t)},n}(Yx),Lj=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Rj(t){for(var n=[],r=0,i=t.length;r<i;++r)n.push(t[r].clone());return n}var Gj=function(t){function n(n){var r=t.call(this)||this;return r.ov=n||null,r.uv=[],r.sv(),r}return Lj(n,t),n.prototype.av=function(){this.uv.forEach($),this.uv.length=0},n.prototype.sv=function(){if(this.ov)for(var t=0,n=this.ov.length;t<n;++t)this.uv.push(H(this.ov[t],L,this.changed,this))},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.ov),t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,r,i){if(i<On(this.getExtent(),t,n))return i;for(var e=this.ov,o=0,u=e.length;o<u;++o)i=e[o].closestPointXY(t,n,r,i);return i},n.prototype.containsXY=function(t,n){for(var r=this.ov,i=0,e=r.length;i<e;++i)if(r[i].containsXY(t,n))return!0;return!1},n.prototype.computeExtent=function(t){Cn(t);for(var n=this.ov,r=0,i=n.length;r<i;++r)Rn(t,n[r].getExtent());return t},n.prototype.getGeometries=function(){return Rj(this.ov)},n.prototype.getGeometriesArray=function(){return this.ov},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.ov,r=0,i=n.length;r<i;++r)n[r].getType()===this.getType()?t=t.concat(n[r].getGeometriesArrayRecursive()):t.push(n[r]);return t},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],i=this.ov,e=!1,o=0,u=i.length;o<u;++o){var s=i[o],a=s.getSimplifiedGeometry(t);r.push(a),a!==s&&(e=!0)}if(e){var f=new n(null);return f.setGeometriesArray(r),f}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},n.prototype.getType=function(){return Pt.GEOMETRY_COLLECTION},n.prototype.intersectsExtent=function(t){for(var n=this.ov,r=0,i=n.length;r<i;++r)if(n[r].intersectsExtent(t))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.ov.length},n.prototype.rotate=function(t,n){for(var r=this.ov,i=0,e=r.length;i<e;++i)r[i].rotate(t,n);this.changed()},n.prototype.scale=function(t,n,r){var i=r;i||(i=Yn(this.getExtent()));for(var e=this.ov,o=0,u=e.length;o<u;++o)e[o].scale(t,n,i);this.changed()},n.prototype.setGeometries=function(t){this.setGeometriesArray(Rj(t))},n.prototype.setGeometriesArray=function(t){this.av(),this.ov=t,this.sv(),this.changed()},n.prototype.applyTransform=function(t){for(var n=this.ov,r=0,i=n.length;r<i;++r)n[r].applyTransform(t);this.changed()},n.prototype.translate=function(t,n){for(var r=this.ov,i=0,e=r.length;i<e;++i)r[i].translate(t,n);this.changed()},n.prototype.disposeInternal=function(){this.av(),t.prototype.disposeInternal.call(this)},n}(Ki),zj=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Fj(t){if("string"==typeof t){var n=JSON.parse(t);return n||null}return null!==t?t:null}var Dj=function(t){function n(){return t.call(this)||this}return zj(n,t),n.prototype.getType=function(){return hh},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject(Fj(t),this.getReadOptions(t,n))},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(Fj(t),this.getReadOptions(t,n))},n.prototype.readFeatureFromObject=function(t,n){return i()},n.prototype.readFeaturesFromObject=function(t,n){return i()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(Fj(t),this.getReadOptions(t,n))},n.prototype.readGeometryFromObject=function(t,n){return i()},n.prototype.readProjection=function(t){return this.readProjectionFromObject(Fj(t))},n.prototype.readProjectionFromObject=function(t){return i()},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},n.prototype.writeFeatureObject=function(t,n){return i()},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},n.prototype.writeFeaturesObject=function(t,n){return i()},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},n.prototype.writeGeometryObject=function(t,n){return i()},n}(jj),Uj=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function qj(t,n){if(!t)return null;var r;switch(t.type){case Pt.POINT:r=function(t){return new Te(t.coordinates)}(t);break;case Pt.LINE_STRING:r=function(t){return new J_(t.coordinates)}(t);break;case Pt.POLYGON:r=function(t){return new Ke(t.coordinates)}(t);break;case Pt.MULTI_POINT:r=function(t){return new W_(t.coordinates)}(t);break;case Pt.MULTI_LINE_STRING:r=function(t){return new tj(t.coordinates)}(t);break;case Pt.MULTI_POLYGON:r=function(t){return new ij(t.coordinates)}(t);break;case Pt.GEOMETRY_COLLECTION:r=function(t,n){var r=t.geometries.map((function(t){return qj(t,n)}));return new Gj(r)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Oj(r,!1,n)}function Bj(t,n){var r,i=(t=Oj(t,!0,n)).getType();switch(i){case Pt.POINT:r=function(t,n){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case Pt.LINE_STRING:r=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case Pt.POLYGON:r=function(t,n){var r;n&&(r=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,n);break;case Pt.MULTI_POINT:r=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case Pt.MULTI_LINE_STRING:r=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case Pt.MULTI_POLYGON:r=function(t,n){var r;n&&(r=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,n);break;case Pt.GEOMETRY_COLLECTION:r=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var r=k({},n);return delete r.featureProjection,Bj(t,r)}))}}(t,n);break;case Pt.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return r}var Xj=function(t){function n(n){var r=this,i=n||{};return(r=t.call(this)||this).dataProjection=gi(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(r.defaultFeatureProjection=gi(i.featureProjection)),r.K=i.geometryName,r.fv=i.extractGeometryName,r.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],r}return Uj(n,t),n.prototype.readFeatureFromObject=function(t,n){var r=null,i=qj((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),e=new Et;return this.K?e.setGeometryName(this.K):this.fv&&"geometry_name"in r!==void 0&&e.setGeometryName(r.geometry_name),e.setGeometry(i),"id"in r&&e.setId(r.id),r.properties&&e.setProperties(r.properties,!0),e},n.prototype.readFeaturesFromObject=function(t,n){var r=null;if("FeatureCollection"===t.type){r=[];for(var i=t.features,e=0,o=i.length;e<o;++e)r.push(this.readFeatureFromObject(i[e],n))}else r=[this.readFeatureFromObject(t,n)];return r},n.prototype.readGeometryFromObject=function(t,n){return qj(t,n)},n.prototype.readProjectionFromObject=function(t){var n,r=t.crs;return r?"name"==r.type?n=gi(r.properties.name):"EPSG"===r.type?n=gi("EPSG:"+r.properties.code):Ot(!1,36):n=this.dataProjection,n},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var r={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(r.id=i),!t.hasProperties())return r;var e=t.getProperties(),o=t.getGeometry();return o&&(r.geometry=Bj(o,n),delete e[t.getGeometryName()]),P(e)||(r.properties=e),r},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var r=[],i=0,e=t.length;i<e;++i)r.push(this.writeFeatureObject(t[i],n));return{type:"FeatureCollection",features:r}},n.prototype.writeGeometryObject=function(t,n){return Bj(t,this.adaptOptions(n))},n}(Dj);function Vj(t){return(Vj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Yj,Wj={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Zj(t){return(t=Math.round(t))<0?0:t>255?255:t}function Hj(t){return t<0?0:t>1?1:t}function Kj(t){return"%"===t[t.length-1]?Zj(parseFloat(t)/100*255):Zj(parseInt(t))}function $j(t){return"%"===t[t.length-1]?Hj(parseFloat(t)/100):Hj(parseFloat(t))}function Jj(t,n,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(n-t)*r*6:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t}try{Yj={}.parseCSSColor=function(t){var n,r=t.replace(/ /g,"").toLowerCase();if(r in Wj)return Wj[r].slice();if("#"===r[0])return 4===r.length?(n=parseInt(r.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===r.length&&(n=parseInt(r.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var i=r.indexOf("("),e=r.indexOf(")");if(-1!==i&&e+1===r.length){var o=r.substr(0,i),u=r.substr(i+1,e-(i+1)).split(","),s=1;switch(o){case"rgba":if(4!==u.length)return null;s=$j(u.pop());case"rgb":return 3!==u.length?null:[Kj(u[0]),Kj(u[1]),Kj(u[2]),s];case"hsla":if(4!==u.length)return null;s=$j(u.pop());case"hsl":if(3!==u.length)return null;var a=(parseFloat(u[0])%360+360)%360/360,f=$j(u[1]),h=$j(u[2]),c=h<=.5?h*(f+1):h+f-h*f,l=2*h-c;return[Zj(255*Jj(l,c,a+1/3)),Zj(255*Jj(l,c,a)),Zj(255*Jj(l,c,a-1/3)),s];default:return null}}return null}}catch(Zd){}var Qj=function(t,n,r,i){void 0===i&&(i=1),this.r=t,this.g=n,this.b=r,this.a=i};function tO(t){return"object"===Vj(t)?["literal",t]:t}function nO(t,n){var r=t.stops;if(!r)return function(t,n){var r=["get",t.property];if(void 0===t.default)return"string"===n.type?["string",r]:r;if("enum"===n.type)return["match",r,Object.keys(n.values),r,t.default];var i=["color"===n.type?"to-color":n.type,r,tO(t.default)];return"array"===n.type&&i.splice(1,0,n.value,n.length||null),i}(t,n);var i=r&&"object"===Vj(r[0][0]),e=i||void 0!==t.property,o=i||!e;return r=r.map((function(t){return!e&&n.tokens&&"string"==typeof t[1]?[t[0],aO(t[1])]:[t[0],tO(t[1])]})),i?function(t,n,r){for(var i={},e={},o=[],u=0;u<r.length;u++){var s=r[u],a=s[0].zoom;void 0===i[a]&&(i[a]={zoom:a,type:t.type,property:t.property,default:t.default},e[a]=[],o.push(a)),e[a].push([s[0].value,s[1]])}if("exponential"===sO({},n)){for(var f=[rO(t),["linear"],["zoom"]],h=0,c=o;h<c.length;h+=1){var l=c[h];uO(f,l,eO(i[l],n,e[l]),!1)}return f}for(var v=["step",["zoom"]],d=0,p=o;d<p.length;d+=1){var y=p[d];uO(v,y,eO(i[y],n,e[y]),!0)}return oO(v),v}(t,n,r):o?function(t,n,r,i){void 0===i&&(i=["zoom"]);var e,o=sO(t,n),u=!1;if("interval"===o)e=["step",i],u=!0;else{if("exponential"!==o)throw new Error('Unknown zoom function type "'+o+'"');var s=void 0!==t.base?t.base:1;e=[rO(t),1===s?["linear"]:["exponential",s],i]}for(var a=0,f=r;a<f.length;a+=1){var h=f[a];uO(e,h[0],h[1],u)}return oO(e),e}(t,n,r):eO(t,n,r)}function rO(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function iO(t,n){var r,i,e=tO((r=t.default,i=n.default,void 0!==r?r:void 0!==i?i:void 0));return void 0===e&&"resolvedImage"===n.type?"":e}function eO(t,n,r){var i=sO(t,n),e=["get",t.property];if("categorical"===i&&"boolean"==typeof r[0][0]){for(var o=["case"],u=0,s=r;u<s.length;u+=1){var a=s[u];o.push(["==",e,a[0]],a[1])}return o.push(iO(t,n)),o}if("categorical"===i){for(var f=["match",e],h=0,c=r;h<c.length;h+=1){var l=c[h];uO(f,l[0],l[1],!1)}return f.push(iO(t,n)),f}if("interval"===i){for(var v=["step",["number",e]],d=0,p=r;d<p.length;d+=1){var y=p[d];uO(v,y[0],y[1],!0)}return oO(v),void 0===t.default?v:["case",["==",["typeof",e],"number"],v,tO(t.default)]}if("exponential"===i){for(var w=void 0!==t.base?t.base:1,m=[rO(t),1===w?["linear"]:["exponential",w],["number",e]],b=0,g=r;b<g.length;b+=1){var x=g[b];uO(m,x[0],x[1],!1)}return void 0===t.default?m:["case",["==",["typeof",e],"number"],m,tO(t.default)]}throw new Error("Unknown property function type "+i)}function oO(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function uO(t,n,r,i){t.length>3&&n===t[t.length-2]||(i&&2===t.length||t.push(n),t.push(r))}function sO(t,n){return t.type?t.type:n.expression.interpolated?"exponential":"interval"}function aO(t){for(var n=["concat"],r=/{([^{}]+)}/g,i=0,e=r.exec(t);null!==e;e=r.exec(t)){var o=t.slice(i,r.lastIndex-e[0].length);i=r.lastIndex,o.length>0&&n.push(o),n.push(["get",e[1]])}if(1===n.length)return t;if(i<t.length)n.push(t.slice(i));else if(2===n.length)return["to-string",n[1]];return n}Qj.parse=function(t){if(t){if(t instanceof Qj)return t;if("string"==typeof t){var n=Yj(t);if(n)return new Qj(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}}},Qj.prototype.toString=function(){var t=this.toArray(),n=t[0],r=t[1],i=t[2],e=t[3];return"rgba("+Math.round(n)+","+Math.round(r)+","+Math.round(i)+","+e+")"},Qj.prototype.toArray=function(){var t=this,n=t.r,r=t.g,i=t.b,e=t.a;return 0===e?[0,0,0,0]:[255*n/e,255*r/e,255*i/e,e]},Qj.black=new Qj(0,0,0,1),Qj.white=new Qj(1,1,1,1),Qj.transparent=new Qj(0,0,0,0),Qj.red=new Qj(1,0,0,1),Qj.blue=new Qj(0,0,1,1);var fO=function(t){function n(n,r){t.call(this,r),this.message=r,this.key=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(Error),hO=function(t,n){void 0===n&&(n=[]),this.parent=t,this.bindings={};for(var r=0,i=n;r<i.length;r+=1){var e=i[r],o=e[0],u=e[1];this.bindings[o]=u}};hO.prototype.concat=function(t){return new hO(this,t)},hO.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},hO.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var cO={kind:"null"},lO={kind:"number"},vO={kind:"string"},dO={kind:"boolean"},pO={kind:"color"},yO={kind:"object"},wO={kind:"value"},mO={kind:"collator"},bO={kind:"formatted"},gO={kind:"resolvedImage"};function xO(t,n){return{kind:"array",itemType:t,N:n}}function _O(t){if("array"===t.kind){var n=_O(t.itemType);return"number"==typeof t.N?"array<"+n+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+n+">"}return t.kind}var jO=[cO,lO,vO,dO,pO,bO,yO,xO(wO),gO];function OO(t,n){if("error"===n.kind)return null;if("array"===t.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!OO(t.itemType,n.itemType))&&("number"!=typeof t.N||t.N===n.N))return null}else{if(t.kind===n.kind)return null;if("value"===t.kind)for(var r=0,i=jO;r<i.length;r+=1){if(!OO(i[r],n))return null}}return"Expected "+_O(t)+" but found "+_O(n)+" instead."}function SO(t,n){return n.some((function(n){return n.kind===t.kind}))}function MO(t,n){return n.some((function(n){return"null"===n?null===t:"array"===n?Array.isArray(t):"object"===n?t&&!Array.isArray(t)&&"object"===Vj(t):n===Vj(t)}))}var EO=function(t,n,r){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};EO.prototype.compare=function(t,n){return this.collator.compare(t,n)},EO.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var TO=function(t,n,r,i,e){this.text=t.normalize?t.normalize():t,this.image=n,this.scale=r,this.fontStack=i,this.textColor=e},kO=function(t){this.sections=t};kO.fromString=function(t){return new kO([new TO(t,null,null,null,null)])},kO.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},kO.factory=function(t){return t instanceof kO?t:kO.fromString(t)},kO.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},kO.prototype.serialize=function(){for(var t=["format"],n=0,r=this.sections;n<r.length;n+=1){var i=r[n];if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var e={};i.fontStack&&(e["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(e["font-scale"]=i.scale),i.textColor&&(e["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(e)}}return t};var AO=function(t){this.name=t.name,this.available=t.available};function CO(t,n,r,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,n,r,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,n,r,i]:[t,n,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function PO(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Qj)return!0;if(t instanceof EO)return!0;if(t instanceof kO)return!0;if(t instanceof AO)return!0;if(Array.isArray(t)){for(var n=0,r=t;n<r.length;n+=1){if(!PO(r[n]))return!1}return!0}if("object"===Vj(t)){for(var i in t)if(!PO(t[i]))return!1;return!0}return!1}function NO(t){if(null===t)return cO;if("string"==typeof t)return vO;if("boolean"==typeof t)return dO;if("number"==typeof t)return lO;if(t instanceof Qj)return pO;if(t instanceof EO)return mO;if(t instanceof kO)return bO;if(t instanceof AO)return gO;if(Array.isArray(t)){for(var n,r=t.length,i=0,e=t;i<e.length;i+=1){var o=NO(e[i]);if(n){if(n===o)continue;n=wO;break}n=o}return xO(n||wO,r)}return yO}function IO(t){var n=Vj(t);return null===t?"":"string"===n||"number"===n||"boolean"===n?String(t):t instanceof Qj||t instanceof kO||t instanceof AO?t.toString():JSON.stringify(t)}AO.prototype.toString=function(){return this.name},AO.fromString=function(t){return t?new AO({name:t,available:!1}):null},AO.prototype.serialize=function(){return["image",this.name]};var LO=function(t,n){this.type=t,this.value=n};LO.parse=function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!PO(t[1]))return n.error("invalid value");var r=t[1],i=NO(r),e=n.expectedType;return"array"!==i.kind||0!==i.N||!e||"array"!==e.kind||"number"==typeof e.N&&0!==e.N||(i=e),new LO(i,r)},LO.prototype.evaluate=function(){return this.value},LO.prototype.eachChild=function(){},LO.prototype.outputDefined=function(){return!0},LO.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Qj?["rgba"].concat(this.value.toArray()):this.value instanceof kO?this.value.serialize():this.value};var RO=function(t){this.name="ExpressionEvaluationError",this.message=t};RO.prototype.toJSON=function(){return this.message};var GO={string:vO,number:lO,boolean:dO,object:yO},zO=function(t,n){this.type=t,this.args=n};zO.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r,i=1,e=t[0];if("array"===e){var o,u;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in GO)||"object"===s)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=GO[s],i++}else o=wO;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);u=t[2],i++}r=xO(o,u)}else r=GO[e];for(var a=[];i<t.length;i++){var f=n.parse(t[i],i,wO);if(!f)return null;a.push(f)}return new zO(r,a)},zO.prototype.evaluate=function(t){for(var n=0;n<this.args.length;n++){var r=this.args[n].evaluate(t);if(!OO(this.type,NO(r)))return r;if(n===this.args.length-1)throw new RO("Expected value to be of type "+_O(this.type)+", but found "+_O(NO(r))+" instead.")}return null},zO.prototype.eachChild=function(t){this.args.forEach(t)},zO.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},zO.prototype.serialize=function(){var t=this.type,n=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){n.push(r.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&n.push(i)}}return n.concat(this.args.map((function(t){return t.serialize()})))};var FO=function(t){this.type=bO,this.sections=t};FO.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"===Vj(r))return n.error("First argument must be an image or text section.");for(var i=[],e=!1,o=1;o<=t.length-1;++o){var u=t[o];if(e&&"object"===Vj(u)&&!Array.isArray(u)){e=!1;var s=null;if(u["font-scale"]&&!(s=n.parse(u["font-scale"],1,lO)))return null;var a=null;if(u["text-font"]&&!(a=n.parse(u["text-font"],1,xO(vO))))return null;var f=null;if(u["text-color"]&&!(f=n.parse(u["text-color"],1,pO)))return null;var h=i[i.length-1];h.scale=s,h.font=a,h.textColor=f}else{var c=n.parse(t[o],1,wO);if(!c)return null;var l=c.type.kind;if("string"!==l&&"value"!==l&&"null"!==l&&"resolvedImage"!==l)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");e=!0,i.push({content:c,scale:null,font:null,textColor:null})}}return new FO(i)},FO.prototype.evaluate=function(t){return new kO(this.sections.map((function(n){var r=n.content.evaluate(t);return NO(r)===gO?new TO("",r,null,null,null):new TO(IO(r),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)})))},FO.prototype.eachChild=function(t){for(var n=0,r=this.sections;n<r.length;n+=1){var i=r[n];t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},FO.prototype.outputDefined=function(){return!1},FO.prototype.serialize=function(){for(var t=["format"],n=0,r=this.sections;n<r.length;n+=1){var i=r[n];t.push(i.content.serialize());var e={};i.scale&&(e["font-scale"]=i.scale.serialize()),i.font&&(e["text-font"]=i.font.serialize()),i.textColor&&(e["text-color"]=i.textColor.serialize()),t.push(e)}return t};var DO=function(t){this.type=gO,this.input=t};DO.parse=function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,vO);return r?new DO(r):n.error("No image name provided.")},DO.prototype.evaluate=function(t){var n=this.input.evaluate(t),r=AO.fromString(n);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(n)>-1),r},DO.prototype.eachChild=function(t){t(this.input)},DO.prototype.outputDefined=function(){return!1},DO.prototype.serialize=function(){return["image",this.input.serialize()]};var UO={"to-boolean":dO,"to-color":pO,"to-number":lO,"to-string":vO},qO=function(t,n){this.type=t,this.args=n};qO.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return n.error("Expected one argument.");for(var i=UO[r],e=[],o=1;o<t.length;o++){var u=n.parse(t[o],o,wO);if(!u)return null;e.push(u)}return new qO(i,e)},qO.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var n,r,i=0,e=this.args;i<e.length;i+=1){if(r=null,(n=e[i].evaluate(t))instanceof Qj)return n;if("string"==typeof n){var o=t.parseColor(n);if(o)return o}else if(Array.isArray(n)&&!(r=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":CO(n[0],n[1],n[2],n[3])))return new Qj(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new RO(r||"Could not parse color from value '"+("string"==typeof n?n:String(JSON.stringify(n)))+"'")}if("number"===this.type.kind){for(var u=null,s=0,a=this.args;s<a.length;s+=1){if(null===(u=a[s].evaluate(t)))return 0;var f=Number(u);if(!isNaN(f))return f}throw new RO("Could not convert "+JSON.stringify(u)+" to number.")}return"formatted"===this.type.kind?kO.fromString(IO(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?AO.fromString(IO(this.args[0].evaluate(t))):IO(this.args[0].evaluate(t))},qO.prototype.eachChild=function(t){this.args.forEach(t)},qO.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},qO.prototype.serialize=function(){if("formatted"===this.type.kind)return new FO([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new DO(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(n){t.push(n.serialize())})),t};var BO=["Unknown","Point","LineString","Polygon"],XO=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};XO.prototype.id=function(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null},XO.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?BO[this.feature.type]:this.feature.type:null},XO.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},XO.prototype.canonicalID=function(){return this.canonical},XO.prototype.properties=function(){return this.feature&&this.feature.properties||{}},XO.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,n=this.featureDistanceData.scale,r=this.featureTileCoord,i=r.x,e=r.y,o=i*n-t[0],u=e*n-t[1];return this.featureDistanceData.bearing[0]*o+this.featureDistanceData.bearing[1]*u}return 0},XO.prototype.parseColor=function(t){var n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=Qj.parse(t)),n};var VO=function(t,n,r,i){this.name=t,this.type=n,this._evaluate=r,this.args=i};VO.prototype.evaluate=function(t){return this._evaluate(t,this.args)},VO.prototype.eachChild=function(t){this.args.forEach(t)},VO.prototype.outputDefined=function(){return!1},VO.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},VO.parse=function(t,n){var r,i=t[0],e=VO.definitions[i];if(!e)return n.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(e)?e[0]:e.type,u=Array.isArray(e)?[[e[1],e[2]]]:e.overloads,s=u.filter((function(n){var r=n[0];return!Array.isArray(r)||r.length===t.length-1})),a=null,f=0,h=s;f<h.length;f+=1){var c=h[f],l=c[0],v=c[1];a=new pS(n.registry,n.path,null,n.scope);for(var d=[],p=!1,y=1;y<t.length;y++){var w=t[y],m=Array.isArray(l)?l[y-1]:l.type,b=a.parse(w,1+d.length,m);if(!b){p=!0;break}d.push(b)}if(!p)if(Array.isArray(l)&&l.length!==d.length)a.error("Expected "+l.length+" arguments, but found "+d.length+" instead.");else{for(var g=0;g<d.length;g++){var x=Array.isArray(l)?l[g]:l.type,_=d[g];a.concat(g+1).checkSubtype(x,_.type)}if(0===a.errors.length)return new VO(i,o,v,d)}}if(1===s.length)(r=n.errors).push.apply(r,a.errors);else{for(var j=(s.length?s:u).map((function(t){var n,r=t[0];return n=r,Array.isArray(n)?"("+n.map(_O).join(", ")+")":"("+_O(n.type)+"...)"})).join(" | "),O=[],S=1;S<t.length;S++){var M=n.parse(t[S],1+O.length);if(!M)return null;O.push(_O(M.type))}n.error("Expected arguments of type "+j+", but found ("+O.join(", ")+") instead.")}return null},VO.register=function(t,n){for(var r in VO.definitions=n,n)t[r]=VO};var YO=function(t,n,r){this.type=mO,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n};YO.parse=function(t,n){if(2!==t.length)return n.error("Expected one argument.");var r=t[1];if("object"!==Vj(r)||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,dO);if(!i)return null;var e=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,dO);if(!e)return null;var o=null;return r.locale&&!(o=n.parse(r.locale,1,vO))?null:new YO(i,e,o)},YO.prototype.evaluate=function(t){return new EO(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},YO.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},YO.prototype.outputDefined=function(){return!1},YO.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var WO=8192;function ZO(t,n){t[0]=Math.min(t[0],n[0]),t[1]=Math.min(t[1],n[1]),t[2]=Math.max(t[2],n[0]),t[3]=Math.max(t[3],n[1])}function HO(t,n){return!(t[0]<=n[0])&&(!(t[2]>=n[2])&&(!(t[1]<=n[1])&&!(t[3]>=n[3])))}function KO(t,n){var r,i=(180+t[0])/360,e=(r=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360),o=Math.pow(2,n.z);return[Math.round(i*o*WO),Math.round(e*o*WO)]}function $O(t,n,r){var i=t[0]-n[0],e=t[1]-n[1],o=t[0]-r[0],u=t[1]-r[1];return i*u-o*e==0&&i*o<=0&&e*u<=0}function JO(t,n,r){return n[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-n[0])*(t[1]-n[1])/(r[1]-n[1])+n[0]}function QO(t,n){for(var r=!1,i=0,e=n.length;i<e;i++)for(var o=n[i],u=0,s=o.length;u<s-1;u++){if($O(t,o[u],o[u+1]))return!1;JO(t,o[u],o[u+1])&&(r=!r)}return r}function tS(t,n){for(var r=0;r<n.length;r++)if(QO(t,n[r]))return!0;return!1}function nS(t,n,r,i){var e=t[0]-r[0],o=t[1]-r[1],u=n[0]-r[0],s=n[1]-r[1],a=i[0]-r[0],f=i[1]-r[1],h=e*f-a*o,c=u*f-a*s;return h>0&&c<0||h<0&&c>0}function rS(t,n,r){for(var i=0,e=r;i<e.length;i+=1)for(var o=e[i],u=0;u<o.length-1;++u)if(s=t,a=n,f=o[u],h=o[u+1],c=void 0,l=void 0,v=void 0,d=void 0,v=[a[0]-s[0],a[1]-s[1]],d=[h[0]-f[0],h[1]-f[1]],0!=(c=d)[0]*(l=v)[1]-c[1]*l[0]&&nS(s,a,f,h)&&nS(f,h,s,a))return!0;var s,a,f,h,c,l,v,d;return!1}function iS(t,n){for(var r=0;r<t.length;++r)if(!QO(t[r],n))return!1;for(var i=0;i<t.length-1;++i)if(rS(t[i],t[i+1],n))return!1;return!0}function eS(t,n){for(var r=0;r<n.length;r++)if(iS(t,n[r]))return!0;return!1}function oS(t,n,r){for(var i=[],e=0;e<t.length;e++){for(var o=[],u=0;u<t[e].length;u++){var s=KO(t[e][u],r);ZO(n,s),o.push(s)}i.push(o)}return i}function uS(t,n,r){for(var i=[],e=0;e<t.length;e++){var o=oS(t[e],n,r);i.push(o)}return i}function sS(t,n,r,i){if(t[0]<r[0]||t[0]>r[2]){var e=.5*i,o=t[0]-r[0]>e?-i:r[0]-t[0]>e?i:0;0===o&&(o=t[0]-r[2]>e?-i:r[2]-t[0]>e?i:0),t[0]+=o}ZO(n,t)}function aS(t,n,r,i){var e=Math.pow(2,i.z)*WO,o=[i.x*WO,i.y*WO],u=[];if(!t)return u;for(var s=0,a=t;s<a.length;s+=1)for(var f=0,h=a[s];f<h.length;f+=1){var c=h[f],l=[c.x+o[0],c.y+o[1]];sS(l,n,r,e),u.push(l)}return u}function fS(t,n,r,i){var e=Math.pow(2,i.z)*WO,o=[i.x*WO,i.y*WO],u=[];if(!t)return u;for(var s=0,a=t;s<a.length;s+=1){for(var f=[],h=0,c=a[s];h<c.length;h+=1){var l=c[h],v=[l.x+o[0],l.y+o[1]];ZO(n,v),f.push(v)}u.push(f)}if(n[2]-n[0]<=e/2){!function(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}(n);for(var d=0,p=u;d<p.length;d+=1)for(var y=0,w=p[d];y<w.length;y+=1){sS(w[y],n,r,e)}}return u}var hS=function(t,n){this.type=dO,this.geojson=t,this.geometries=n};function cS(t){if(t instanceof VO){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof hS)return!1;var n=!0;return t.eachChild((function(t){n&&!cS(t)&&(n=!1)})),n}function lS(t){if(t instanceof VO&&"feature-state"===t.name)return!1;var n=!0;return t.eachChild((function(t){n&&!lS(t)&&(n=!1)})),n}function vS(t,n){if(t instanceof VO&&n.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild((function(t){r&&!vS(t,n)&&(r=!1)})),r}hS.parse=function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(PO(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var e=r.features[i].geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new hS(r,r.features[i].geometry)}else if("Feature"===r.type){var o=r.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new hS(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new hS(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")},hS.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,n){var r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],e=t.canonicalID();if(!e)return!1;if("Polygon"===n.type){var o=oS(n.coordinates,i,e),u=aS(t.geometry(),r,i,e);if(!HO(r,i))return!1;for(var s=0,a=u;s<a.length;s+=1)if(!QO(a[s],o))return!1}if("MultiPolygon"===n.type){var f=uS(n.coordinates,i,e),h=aS(t.geometry(),r,i,e);if(!HO(r,i))return!1;for(var c=0,l=h;c<l.length;c+=1)if(!tS(l[c],f))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,n){var r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],e=t.canonicalID();if(!e)return!1;if("Polygon"===n.type){var o=oS(n.coordinates,i,e),u=fS(t.geometry(),r,i,e);if(!HO(r,i))return!1;for(var s=0,a=u;s<a.length;s+=1)if(!iS(a[s],o))return!1}if("MultiPolygon"===n.type){var f=uS(n.coordinates,i,e),h=fS(t.geometry(),r,i,e);if(!HO(r,i))return!1;for(var c=0,l=h;c<l.length;c+=1)if(!eS(l[c],f))return!1}return!0}(t,this.geometries)}return!1},hS.prototype.eachChild=function(){},hS.prototype.outputDefined=function(){return!0},hS.prototype.serialize=function(){return["within",this.geojson]};var dS=function(t,n){this.type=n.type,this.name=t,this.boundExpression=n};dS.parse=function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var r=t[1];return n.scope.has(r)?new dS(r,n.scope.get(r)):n.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},dS.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},dS.prototype.eachChild=function(){},dS.prototype.outputDefined=function(){return!1},dS.prototype.serialize=function(){return["var",this.name]};var pS=function(t,n,r,i,e){void 0===n&&(n=[]),void 0===i&&(i=new hO),void 0===e&&(e=[]),this.registry=t,this.path=n,this.key=n.map((function(t){return"["+t+"]"})).join(""),this.scope=i,this.errors=e,this.expectedType=r};function yS(t){if(t instanceof dS)return yS(t.boundExpression);if(t instanceof VO&&"error"===t.name)return!1;if(t instanceof YO)return!1;if(t instanceof hS)return!1;var n=t instanceof qO||t instanceof zO,r=!0;return t.eachChild((function(t){r=n?r&&yS(t):r&&t instanceof LO})),!!r&&(cS(t)&&vS(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}function wS(t,n){for(var r,i,e=t.length-1,o=0,u=e,s=0;o<=u;)if(r=t[s=Math.floor((o+u)/2)],i=t[s+1],r<=n){if(s===e||n<i)return s;o=s+1}else{if(!(r>n))throw new RO("Input is not a number.");u=s-1}return 0}pS.prototype.parse=function(t,n,r,i,e){return void 0===e&&(e={}),n?this.concat(n,r,i)._parse(t,e):this._parse(t,e)},pS.prototype._parse=function(t,n){function r(t,n,r){return"assert"===r?new zO(n,[t]):"coerce"===r?new qO(n,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found "+Vj(i)+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var e=this.registry[i];if(e){var o=e.parse(t,this);if(!o)return null;if(this.expectedType){var u=this.expectedType,s=o.type;if("string"!==u.kind&&"number"!==u.kind&&"boolean"!==u.kind&&"object"!==u.kind&&"array"!==u.kind||"value"!==s.kind)if("color"!==u.kind&&"formatted"!==u.kind&&"resolvedImage"!==u.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(u,s))return null}else o=r(o,u,n.typeAnnotation||"coerce");else o=r(o,u,n.typeAnnotation||"assert")}if(!(o instanceof LO)&&"resolvedImage"!==o.type.kind&&yS(o)){var a=new XO;try{o=new LO(o.type,o.evaluate(a))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"===Vj(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+Vj(t)+" instead.")},pS.prototype.concat=function(t,n,r){var i="number"==typeof t?this.path.concat(t):this.path,e=r?this.scope.concat(r):this.scope;return new pS(this.registry,i,n||null,e,this.errors)},pS.prototype.error=function(t){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var i=""+this.key+n.map((function(t){return"["+t+"]"})).join("");this.errors.push(new fO(i,t))},pS.prototype.checkSubtype=function(t,n){var r=OO(t,n);return r&&this.error(r),r};var mS=function(t,n,r){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(var i=0,e=r;i<e.length;i+=1){var o=e[i],u=o[0],s=o[1];this.labels.push(u),this.outputs.push(s)}};mS.parse=function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(t[1],1,lO);if(!r)return null;var i=[],e=null;n.expectedType&&"value"!==n.expectedType.kind&&(e=n.expectedType);for(var o=1;o<t.length;o+=2){var u=1===o?-1/0:t[o],s=t[o+1],a=o,f=o+1;if("number"!=typeof u)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(i.length&&i[i.length-1][0]>=u)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);var h=n.parse(s,f,e);if(!h)return null;e=e||h.type,i.push([u,h])}return new mS(e,r,i)},mS.prototype.evaluate=function(t){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);var e=n.length;return i>=n[e-1]?r[e-1].evaluate(t):r[wS(n,i)].evaluate(t)},mS.prototype.eachChild=function(t){t(this.input);for(var n=0,r=this.outputs;n<r.length;n+=1){t(r[n])}},mS.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},mS.prototype.serialize=function(){for(var t=["step",this.input.serialize()],n=0;n<this.labels.length;n++)n>0&&t.push(this.labels[n]),t.push(this.outputs[n].serialize());return t};var bS=gS;function gS(t,n,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(i-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=r,this.p2y=i}function xS(t,n,r){return t*(1-r)+n*r}gS.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},gS.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},gS.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},gS.prototype.solveCurveX=function(t,n){var r,i,e,o,u;for(void 0===n&&(n=1e-6),e=t,u=0;u<8;u++){if(o=this.sampleCurveX(e)-t,Math.abs(o)<n)return e;var s=this.sampleCurveDerivativeX(e);if(Math.abs(s)<1e-6)break;e-=o/s}if((e=t)<(r=0))return r;if(e>(i=1))return i;for(;r<i;){if(o=this.sampleCurveX(e),Math.abs(o-t)<n)return e;t>o?r=e:i=e,e=.5*(i-r)+r}return e},gS.prototype.solve=function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))};var _S=Object.freeze({__proto__:null,number:xS,color:function(t,n,r){return new Qj(xS(t.r,n.r,r),xS(t.g,n.g,r),xS(t.b,n.b,r),xS(t.a,n.a,r))},array:function(t,n,r){return t.map((function(t,i){return xS(t,n[i],r)}))}}),jS=.95047,OS=1.08883,SS=4/29,MS=6/29,ES=3*MS*MS,TS=Math.PI/180,kS=180/Math.PI;function AS(t){return t>.008856451679035631?Math.pow(t,1/3):t/ES+SS}function CS(t){return t>MS?t*t*t:ES*(t-SS)}function PS(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function NS(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function IS(t){var n=NS(t.r),r=NS(t.g),i=NS(t.b),e=AS((.4124564*n+.3575761*r+.1804375*i)/jS),o=AS((.2126729*n+.7151522*r+.072175*i)/1);return{l:116*o-16,a:500*(e-o),b:200*(o-AS((.0193339*n+.119192*r+.9503041*i)/OS)),alpha:t.a}}function LS(t){var n=(t.l+16)/116,r=isNaN(t.a)?n:n+t.a/500,i=isNaN(t.b)?n:n-t.b/200;return n=1*CS(n),r=jS*CS(r),i=OS*CS(i),new Qj(PS(3.2404542*r-1.5371385*n-.4985314*i),PS(-.969266*r+1.8760108*n+.041556*i),PS(.0556434*r-.2040259*n+1.0572252*i),t.alpha)}function RS(t,n,r){var i=n-t;return t+r*(i>180||i<-180?i-360*Math.round(i/360):i)}var GS={forward:IS,reverse:LS,interpolate:function(t,n,r){return{l:xS(t.l,n.l,r),a:xS(t.a,n.a,r),b:xS(t.b,n.b,r),alpha:xS(t.alpha,n.alpha,r)}}},zS={forward:function(t){var n=IS(t),r=n.l,i=n.a,e=n.b,o=Math.atan2(e,i)*kS;return{h:o<0?o+360:o,c:Math.sqrt(i*i+e*e),l:r,alpha:t.a}},reverse:function(t){var n=t.h*TS,r=t.c;return LS({l:t.l,a:Math.cos(n)*r,b:Math.sin(n)*r,alpha:t.alpha})},interpolate:function(t,n,r){return{h:RS(t.h,n.h,r),c:xS(t.c,n.c,r),l:xS(t.l,n.l,r),alpha:xS(t.alpha,n.alpha,r)}}},FS=function(t,n,r,i,e){this.type=t,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(var o=0,u=e;o<u.length;o+=1){var s=u[o],a=s[0],f=s[1];this.labels.push(a),this.outputs.push(f)}};function DS(t,n,r,i){var e=i-r,o=t-r;return 0===e?0:1===n?o/e:(Math.pow(n,o)-1)/(Math.pow(n,e)-1)}FS.interpolationFactor=function(t,n,r,i){var e=0;if("exponential"===t.name)e=DS(n,t.base,r,i);else if("linear"===t.name)e=DS(n,1,r,i);else if("cubic-bezier"===t.name){var o=t.controlPoints;e=new bS(o[0],o[1],o[2],o[3]).solve(DS(n,1,r,i))}return e},FS.parse=function(t,n){var r=t[0],i=t[1],e=t[2],o=t.slice(3);if(!Array.isArray(i)||0===i.length)return n.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var u=i[1];if("number"!=typeof u)return n.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:u}}else{if("cubic-bezier"!==i[0])return n.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(e=n.parse(e,2,lO)))return null;var a=[],f=null;"interpolate-hcl"===r||"interpolate-lab"===r?f=pO:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var h=0;h<o.length;h+=2){var c=o[h],l=o[h+1],v=h+3,d=h+4;if("number"!=typeof c)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(a.length&&a[a.length-1][0]>=c)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var p=n.parse(l,d,f);if(!p)return null;f=f||p.type,a.push([c,p])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new FS(f,r,i,e,a):n.error("Type "+_O(f)+" is not interpolatable.")},FS.prototype.evaluate=function(t){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);var e=n.length;if(i>=n[e-1])return r[e-1].evaluate(t);var o=wS(n,i),u=n[o],s=n[o+1],a=FS.interpolationFactor(this.interpolation,i,u,s),f=r[o].evaluate(t),h=r[o+1].evaluate(t);return"interpolate"===this.operator?_S[this.type.kind.toLowerCase()](f,h,a):"interpolate-hcl"===this.operator?zS.reverse(zS.interpolate(zS.forward(f),zS.forward(h),a)):GS.reverse(GS.interpolate(GS.forward(f),GS.forward(h),a))},FS.prototype.eachChild=function(t){t(this.input);for(var n=0,r=this.outputs;n<r.length;n+=1){t(r[n])}},FS.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},FS.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var n=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)n.push(this.labels[r],this.outputs[r].serialize());return n};var US=function(t,n){this.type=t,this.args=n};US.parse=function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);for(var e=[],o=0,u=t.slice(1);o<u.length;o+=1){var s=u[o],a=n.parse(s,1+e.length,r,void 0,{typeAnnotation:"omit"});if(!a)return null;r=r||a.type,e.push(a)}var f=i&&e.some((function(t){return OO(i,t.type)}));return new US(f?wO:r,e)},US.prototype.evaluate=function(t){for(var n,r=null,i=0,e=0,o=this.args;e<o.length;e+=1){if(i++,(r=o[e].evaluate(t))&&r instanceof AO&&!r.available&&(n||(n=r),r=null,i===this.args.length))return n;if(null!==r)break}return r},US.prototype.eachChild=function(t){this.args.forEach(t)},US.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},US.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(n){t.push(n.serialize())})),t};var qS=function(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n};qS.prototype.evaluate=function(t){return this.result.evaluate(t)},qS.prototype.eachChild=function(t){for(var n=0,r=this.bindings;n<r.length;n+=1){t(r[n][1])}t(this.result)},qS.parse=function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],i=1;i<t.length-1;i+=2){var e=t[i];if("string"!=typeof e)return n.error("Expected string, but found "+Vj(e)+" instead.",i);if(/[^a-zA-Z0-9_]/.test(e))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=n.parse(t[i+1],i+1);if(!o)return null;r.push([e,o])}var u=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return u?new qS(r,u):null},qS.prototype.outputDefined=function(){return this.result.outputDefined()},qS.prototype.serialize=function(){for(var t=["let"],n=0,r=this.bindings;n<r.length;n+=1){var i=r[n],e=i[0],o=i[1];t.push(e,o.serialize())}return t.push(this.result.serialize()),t};var BS=function(t,n,r){this.type=t,this.index=n,this.input=r};BS.parse=function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=n.parse(t[1],1,lO),i=n.parse(t[2],2,xO(n.expectedType||wO));if(!r||!i)return null;var e=i.type;return new BS(e.itemType,r,i)},BS.prototype.evaluate=function(t){var n=this.index.evaluate(t),r=this.input.evaluate(t);if(n<0)throw new RO("Array index out of bounds: "+n+" < 0.");if(n>=r.length)throw new RO("Array index out of bounds: "+n+" > "+(r.length-1)+".");if(n!==Math.floor(n))throw new RO("Array index must be an integer, but found "+n+" instead.");return r[n]},BS.prototype.eachChild=function(t){t(this.index),t(this.input)},BS.prototype.outputDefined=function(){return!1},BS.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var XS=function(t,n){this.type=dO,this.needle=t,this.haystack=n};XS.parse=function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=n.parse(t[1],1,wO),i=n.parse(t[2],2,wO);return r&&i?SO(r.type,[dO,vO,lO,cO,wO])?new XS(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found "+_O(r.type)+" instead"):null},XS.prototype.evaluate=function(t){var n=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(null==r)return!1;if(!MO(n,["boolean","string","number","null"]))throw new RO("Expected first argument to be of type boolean, string, number or null, but found "+_O(NO(n))+" instead.");if(!MO(r,["string","array"]))throw new RO("Expected second argument to be of type array or string, but found "+_O(NO(r))+" instead.");return r.indexOf(n)>=0},XS.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},XS.prototype.outputDefined=function(){return!0},XS.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var VS=function(t,n,r){this.type=lO,this.needle=t,this.haystack=n,this.fromIndex=r};VS.parse=function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=n.parse(t[1],1,wO),i=n.parse(t[2],2,wO);if(!r||!i)return null;if(!SO(r.type,[dO,vO,lO,cO,wO]))return n.error("Expected first argument to be of type boolean, string, number or null, but found "+_O(r.type)+" instead");if(4===t.length){var e=n.parse(t[3],3,lO);return e?new VS(r,i,e):null}return new VS(r,i)},VS.prototype.evaluate=function(t){var n=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!MO(n,["boolean","string","number","null"]))throw new RO("Expected first argument to be of type boolean, string, number or null, but found "+_O(NO(n))+" instead.");if(!MO(r,["string","array"]))throw new RO("Expected second argument to be of type array or string, but found "+_O(NO(r))+" instead.");if(this.fromIndex){var i=this.fromIndex.evaluate(t);return r.indexOf(n,i)}return r.indexOf(n)},VS.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},VS.prototype.outputDefined=function(){return!1},VS.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var YS=function(t,n,r,i,e,o){this.inputType=t,this.type=n,this.input=r,this.cases=i,this.outputs=e,this.otherwise=o};YS.parse=function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var e={},o=[],u=2;u<t.length-1;u+=2){var s=t[u],a=t[u+1];Array.isArray(s)||(s=[s]);var f=n.concat(u);if(0===s.length)return f.error("Expected at least one branch label.");for(var h=0,c=s;h<c.length;h+=1){var l=c[h];if("number"!=typeof l&&"string"!=typeof l)return f.error("Branch labels must be numbers or strings.");if("number"==typeof l&&Math.abs(l)>Number.MAX_SAFE_INTEGER)return f.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof l&&Math.floor(l)!==l)return f.error("Numeric branch labels must be integer values.");if(r){if(f.checkSubtype(r,NO(l)))return null}else r=NO(l);if(void 0!==e[String(l)])return f.error("Branch labels must be unique.");e[String(l)]=o.length}var v=n.parse(a,u,i);if(!v)return null;i=i||v.type,o.push(v)}var d=n.parse(t[1],1,wO);if(!d)return null;var p=n.parse(t[t.length-1],t.length-1,i);return p?"value"!==d.type.kind&&n.concat(1).checkSubtype(r,d.type)?null:new YS(r,i,d,e,o,p):null},YS.prototype.evaluate=function(t){var n=this.input.evaluate(t);return(NO(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)},YS.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},YS.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},YS.prototype.serialize=function(){for(var t=this,n=["match",this.input.serialize()],r=[],i={},e=0,o=Object.keys(this.cases).sort();e<o.length;e+=1){var u=o[e];void 0===(c=i[this.cases[u]])?(i[this.cases[u]]=r.length,r.push([this.cases[u],[u]])):r[c][1].push(u)}for(var s=function(n){return"number"===t.inputType.kind?Number(n):n},a=0,f=r;a<f.length;a+=1){var h=f[a],c=h[0],l=h[1];1===l.length?n.push(s(l[0])):n.push(l.map(s)),n.push(this.outputs[outputIndex$1].serialize())}return n.push(this.otherwise.serialize()),n};var WS=function(t,n,r){this.type=t,this.branches=n,this.otherwise=r};WS.parse=function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],e=1;e<t.length-1;e+=2){var o=n.parse(t[e],e,dO);if(!o)return null;var u=n.parse(t[e+1],e+1,r);if(!u)return null;i.push([o,u]),r=r||u.type}var s=n.parse(t[t.length-1],t.length-1,r);return s?new WS(r,i,s):null},WS.prototype.evaluate=function(t){for(var n=0,r=this.branches;n<r.length;n+=1){var i=r[n],e=i[0],o=i[1];if(e.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},WS.prototype.eachChild=function(t){for(var n=0,r=this.branches;n<r.length;n+=1){var i=r[n],e=i[0],o=i[1];t(e),t(o)}t(this.otherwise)},WS.prototype.outputDefined=function(){return this.branches.every((function(t){return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()},WS.prototype.serialize=function(){var t=["case"];return this.eachChild((function(n){t.push(n.serialize())})),t};var ZS=function(t,n,r,i){this.type=t,this.input=n,this.beginIndex=r,this.endIndex=i};function HS(t,n){return"=="===t||"!="===t?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function KS(t,n,r,i){return 0===i.compare(n,r)}function $S(t,n,r){var i="=="!==t&&"!="!==t;return function(){function e(t,n,r){this.type=dO,this.lhs=t,this.rhs=n,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===n.type.kind}return e.parse=function(t,n){if(3!==t.length&&4!==t.length)return n.error("Expected two or three arguments.");var r=t[0],o=n.parse(t[1],1,wO);if(!o)return null;if(!HS(r,o.type))return n.concat(1).error('"'+r+"\" comparisons are not supported for type '"+_O(o.type)+"'.");var u=n.parse(t[2],2,wO);if(!u)return null;if(!HS(r,u.type))return n.concat(2).error('"'+r+"\" comparisons are not supported for type '"+_O(u.type)+"'.");if(o.type.kind!==u.type.kind&&"value"!==o.type.kind&&"value"!==u.type.kind)return n.error("Cannot compare types '"+_O(o.type)+"' and '"+_O(u.type)+"'.");i&&("value"===o.type.kind&&"value"!==u.type.kind?o=new zO(u.type,[o]):"value"!==o.type.kind&&"value"===u.type.kind&&(u=new zO(o.type,[u])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==u.type.kind&&"value"!==o.type.kind&&"value"!==u.type.kind)return n.error("Cannot use collator to compare non-string types.");if(!(s=n.parse(t[3],3,mO)))return null}return new e(o,u,s)},e.prototype.evaluate=function(e){var o=this.lhs.evaluate(e),u=this.rhs.evaluate(e);if(i&&this.hasUntypedArgument){var s=NO(o),a=NO(u);if(s.kind!==a.kind||"string"!==s.kind&&"number"!==s.kind)throw new RO('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+a.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var f=NO(o),h=NO(u);if("string"!==f.kind||"string"!==h.kind)return n(e,o,u)}return this.collator?r(e,o,u,this.collator.evaluate(e)):n(e,o,u)},e.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},e.prototype.outputDefined=function(){return!0},e.prototype.serialize=function(){var n=[t];return this.eachChild((function(t){n.push(t.serialize())})),n},e}()}ZS.parse=function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=n.parse(t[1],1,wO),i=n.parse(t[2],2,lO);if(!r||!i)return null;if(!SO(r.type,[xO(wO),vO,wO]))return n.error("Expected first argument to be of type array or string, but found "+_O(r.type)+" instead");if(4===t.length){var e=n.parse(t[3],3,lO);return e?new ZS(r.type,r,i,e):null}return new ZS(r.type,r,i)},ZS.prototype.evaluate=function(t){var n=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!MO(n,["string","array"]))throw new RO("Expected first argument to be of type array or string, but found "+_O(NO(n))+" instead.");if(this.endIndex){var i=this.endIndex.evaluate(t);return n.slice(r,i)}return n.slice(r)},ZS.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},ZS.prototype.outputDefined=function(){return!1},ZS.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var JS=$S("==",(function(t,n,r){return n===r}),KS),QS=$S("!=",(function(t,n,r){return n!==r}),(function(t,n,r,i){return!KS(0,n,r,i)})),tM=$S("<",(function(t,n,r){return n<r}),(function(t,n,r,i){return i.compare(n,r)<0})),nM=$S(">",(function(t,n,r){return n>r}),(function(t,n,r,i){return i.compare(n,r)>0})),rM=$S("<=",(function(t,n,r){return n<=r}),(function(t,n,r,i){return i.compare(n,r)<=0})),iM=$S(">=",(function(t,n,r){return n>=r}),(function(t,n,r,i){return i.compare(n,r)>=0})),eM=function(t,n,r,i,e){this.type=vO,this.number=t,this.locale=n,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=e};eM.parse=function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,lO);if(!r)return null;var i=t[2];if("object"!==Vj(i)||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var e=null;if(i.locale&&!(e=n.parse(i.locale,1,vO)))return null;var o=null;if(i.currency&&!(o=n.parse(i.currency,1,vO)))return null;var u=null;if(i["min-fraction-digits"]&&!(u=n.parse(i["min-fraction-digits"],1,lO)))return null;var s=null;return i["max-fraction-digits"]&&!(s=n.parse(i["max-fraction-digits"],1,lO))?null:new eM(r,e,o,u,s)},eM.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},eM.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},eM.prototype.outputDefined=function(){return!1},eM.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var oM=function(t){this.type=lO,this.input=t};oM.parse=function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=n.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found "+_O(r.type)+" instead."):new oM(r):null},oM.prototype.evaluate=function(t){var n=this.input.evaluate(t);if("string"==typeof n)return n.length;if(Array.isArray(n))return n.length;throw new RO("Expected value to be of type string or array, but found "+_O(NO(n))+" instead.")},oM.prototype.eachChild=function(t){t(this.input)},oM.prototype.outputDefined=function(){return!1},oM.prototype.serialize=function(){var t=["length"];return this.eachChild((function(n){t.push(n.serialize())})),t};var uM={"==":JS,"!=":QS,">":nM,"<":tM,">=":iM,"<=":rM,array:zO,at:BS,boolean:zO,case:WS,coalesce:US,collator:YO,format:FO,image:DO,in:XS,"index-of":VS,interpolate:FS,"interpolate-hcl":FS,"interpolate-lab":FS,length:oM,let:qS,literal:LO,match:YS,number:zO,"number-format":eM,object:zO,slice:ZS,step:mS,string:zO,"to-boolean":qO,"to-color":qO,"to-number":qO,"to-string":qO,var:dS,within:hS};function sM(t,n){var r=n[0],i=n[1],e=n[2],o=n[3];r=r.evaluate(t),i=i.evaluate(t),e=e.evaluate(t);var u=o?o.evaluate(t):1,s=CO(r,i,e,u);if(s)throw new RO(s);return new Qj(r/255*u,i/255*u,e/255*u,u)}function aM(t,n){return t in n}function fM(t,n){var r=n[t];return void 0===r?null:r}function hM(t){return{type:t}}function cM(t){return{result:"success",value:t}}function lM(t){return{result:"error",value:t}}function vM(t){return"object"===Vj(t)&&null!==t&&!Array.isArray(t)}VO.register(uM,{error:[{kind:"error"},[vO],function(t,n){var r=n[0];throw new RO(r.evaluate(t))}],typeof:[vO,[wO],function(t,n){return _O(NO(n[0].evaluate(t)))}],"to-rgba":[xO(lO,4),[pO],function(t,n){return n[0].evaluate(t).toArray()}],rgb:[pO,[lO,lO,lO],sM],rgba:[pO,[lO,lO,lO,lO],sM],has:{type:dO,overloads:[[[vO],function(t,n){return aM(n[0].evaluate(t),t.properties())}],[[vO,yO],function(t,n){var r=n[0],i=n[1];return aM(r.evaluate(t),i.evaluate(t))}]]},get:{type:wO,overloads:[[[vO],function(t,n){return fM(n[0].evaluate(t),t.properties())}],[[vO,yO],function(t,n){var r=n[0],i=n[1];return fM(r.evaluate(t),i.evaluate(t))}]]},"feature-state":[wO,[vO],function(t,n){return fM(n[0].evaluate(t),t.featureState||{})}],properties:[yO,[],function(t){return t.properties()}],"geometry-type":[vO,[],function(t){return t.geometryType()}],id:[wO,[],function(t){return t.id()}],zoom:[lO,[],function(t){return t.globals.zoom}],pitch:[lO,[],function(t){return t.globals.pitch||0}],"distance-from-center":[lO,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[lO,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[lO,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[lO,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[wO,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[lO,hM(lO),function(t,n){for(var r=0,i=0,e=n;i<e.length;i+=1){r+=e[i].evaluate(t)}return r}],"*":[lO,hM(lO),function(t,n){for(var r=1,i=0,e=n;i<e.length;i+=1){r*=e[i].evaluate(t)}return r}],"-":{type:lO,overloads:[[[lO,lO],function(t,n){var r=n[0],i=n[1];return r.evaluate(t)-i.evaluate(t)}],[[lO],function(t,n){return-n[0].evaluate(t)}]]},"/":[lO,[lO,lO],function(t,n){var r=n[0],i=n[1];return r.evaluate(t)/i.evaluate(t)}],"%":[lO,[lO,lO],function(t,n){var r=n[0],i=n[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[lO,[],function(){return Math.LN2}],pi:[lO,[],function(){return Math.PI}],e:[lO,[],function(){return Math.E}],"^":[lO,[lO,lO],function(t,n){var r=n[0],i=n[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[lO,[lO],function(t,n){var r=n[0];return Math.sqrt(r.evaluate(t))}],log10:[lO,[lO],function(t,n){var r=n[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[lO,[lO],function(t,n){var r=n[0];return Math.log(r.evaluate(t))}],log2:[lO,[lO],function(t,n){var r=n[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[lO,[lO],function(t,n){var r=n[0];return Math.sin(r.evaluate(t))}],cos:[lO,[lO],function(t,n){var r=n[0];return Math.cos(r.evaluate(t))}],tan:[lO,[lO],function(t,n){var r=n[0];return Math.tan(r.evaluate(t))}],asin:[lO,[lO],function(t,n){var r=n[0];return Math.asin(r.evaluate(t))}],acos:[lO,[lO],function(t,n){var r=n[0];return Math.acos(r.evaluate(t))}],atan:[lO,[lO],function(t,n){var r=n[0];return Math.atan(r.evaluate(t))}],min:[lO,hM(lO),function(t,n){return Math.min.apply(Math,n.map((function(n){return n.evaluate(t)})))}],max:[lO,hM(lO),function(t,n){return Math.max.apply(Math,n.map((function(n){return n.evaluate(t)})))}],abs:[lO,[lO],function(t,n){var r=n[0];return Math.abs(r.evaluate(t))}],round:[lO,[lO],function(t,n){var r=n[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[lO,[lO],function(t,n){var r=n[0];return Math.floor(r.evaluate(t))}],ceil:[lO,[lO],function(t,n){var r=n[0];return Math.ceil(r.evaluate(t))}],"filter-==":[dO,[vO,wO],function(t,n){var r=n[0],i=n[1];return t.properties()[r.value]===i.value}],"filter-id-==":[dO,[wO],function(t,n){var r=n[0];return t.id()===r.value}],"filter-type-==":[dO,[vO],function(t,n){var r=n[0];return t.geometryType()===r.value}],"filter-<":[dO,[vO,wO],function(t,n){var r=n[0],i=n[1],e=t.properties()[r.value],o=i.value;return Vj(e)===Vj(o)&&e<o}],"filter-id-<":[dO,[wO],function(t,n){var r=n[0],i=t.id(),e=r.value;return Vj(i)===Vj(e)&&i<e}],"filter->":[dO,[vO,wO],function(t,n){var r=n[0],i=n[1],e=t.properties()[r.value],o=i.value;return Vj(e)===Vj(o)&&e>o}],"filter-id->":[dO,[wO],function(t,n){var r=n[0],i=t.id(),e=r.value;return Vj(i)===Vj(e)&&i>e}],"filter-<=":[dO,[vO,wO],function(t,n){var r=n[0],i=n[1],e=t.properties()[r.value],o=i.value;return Vj(e)===Vj(o)&&e<=o}],"filter-id-<=":[dO,[wO],function(t,n){var r=n[0],i=t.id(),e=r.value;return Vj(i)===Vj(e)&&i<=e}],"filter->=":[dO,[vO,wO],function(t,n){var r=n[0],i=n[1],e=t.properties()[r.value],o=i.value;return Vj(e)===Vj(o)&&e>=o}],"filter-id->=":[dO,[wO],function(t,n){var r=n[0],i=t.id(),e=r.value;return Vj(i)===Vj(e)&&i>=e}],"filter-has":[dO,[wO],function(t,n){return n[0].value in t.properties()}],"filter-has-id":[dO,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[dO,[xO(vO)],function(t,n){return n[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[dO,[xO(wO)],function(t,n){return n[0].value.indexOf(t.id())>=0}],"filter-in-small":[dO,[vO,xO(wO)],function(t,n){var r=n[0];return n[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[dO,[vO,xO(wO)],function(t,n){var r=n[0],i=n[1];return function(t,n,r,i){for(;r<=i;){var e=r+i>>1;if(n[e]===t)return!0;n[e]>t?i=e-1:r=e+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:dO,overloads:[[[dO,dO],function(t,n){var r=n[0],i=n[1];return r.evaluate(t)&&i.evaluate(t)}],[hM(dO),function(t,n){for(var r=0,i=n;r<i.length;r+=1){if(!i[r].evaluate(t))return!1}return!0}]]},any:{type:dO,overloads:[[[dO,dO],function(t,n){var r=n[0],i=n[1];return r.evaluate(t)||i.evaluate(t)}],[hM(dO),function(t,n){for(var r=0,i=n;r<i.length;r+=1){if(i[r].evaluate(t))return!0}return!1}]]},"!":[dO,[dO],function(t,n){return!n[0].evaluate(t)}],"is-supported-script":[dO,[vO],function(t,n){var r=n[0],i=t.globals&&t.globals.isSupportedScript;return!i||i(r.evaluate(t))}],upcase:[vO,[vO],function(t,n){return n[0].evaluate(t).toUpperCase()}],downcase:[vO,[vO],function(t,n){return n[0].evaluate(t).toLowerCase()}],concat:[vO,hM(wO),function(t,n){return n.map((function(n){return IO(n.evaluate(t))})).join("")}],"resolved-locale":[vO,[mO],function(t,n){return n[0].evaluate(t).resolvedLocale()}]});var dM=function(t,n){this.expression=t,this._warningHistory={},this._evaluator=new XO,this._defaultValue=n?function(t){return"color"===t.type&&vM(t.default)?new Qj(0,0,0,0):"color"===t.type?Qj.parse(t.default)||null:void 0===t.default?null:t.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null};function pM(t,n){var r=new pS(uM,[],n?function(t){var n={color:pO,string:vO,number:lO,enum:vO,boolean:dO,formatted:bO,resolvedImage:gO};if("array"===t.type)return xO(n[t.value]||wO,t.length);return n[t.type]}(n):void 0),i=r.parse(t,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return i?cM(new dM(i,n)):lM(r.errors)}dM.prototype.evaluateWithoutErrorHandling=function(t,n,r,i,e,o,u,s){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=r,this._evaluator.canonical=i||null,this._evaluator.availableImages=e||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=u||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)},dM.prototype.evaluate=function(t,n,r,i,e,o,u,s){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=e||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=u||null,this._evaluator.featureDistanceData=s||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new RO("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var yM=function(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!lS(n.expression)};yM.prototype.evaluateWithoutErrorHandling=function(t,n,r,i,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,r,i,e,o)},yM.prototype.evaluate=function(t,n,r,i,e,o){return this._styleExpression.evaluate(t,n,r,i,e,o)};var wM=function(t,n,r,i){this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==t&&!lS(n.expression),this.interpolationType=i};function mM(t,n){if("error"===(t=pM(t,n)).result)return t;var r=t.value.expression,i=cS(r);if(!i&&!function(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}(n))return lM([new fO("","data expressions not supported")]);var e=vS(r,["zoom","pitch","distance-from-center"]);if(!e&&!function(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}(n))return lM([new fO("","zoom expressions not supported")]);var o=bM(r);if(!o&&!e)return lM([new fO("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof fO)return lM([o]);if(o instanceof FS&&!function(t){return!!t.expression&&t.expression.interpolated}(n))return lM([new fO("",'"interpolate" expressions cannot be used with this property')]);if(!o)return cM(new yM(i?"constant":"source",t.value));var u=o instanceof FS?o.interpolation:void 0;return cM(new wM(i?"camera":"composite",t.value,o.labels,u))}function bM(t){var n=null;if(t instanceof qS)n=bM(t.result);else if(t instanceof US)for(var r=0,i=t.args;r<i.length;r+=1){var e=i[r];if(n=bM(e))break}else(t instanceof mS||t instanceof FS)&&t.input instanceof VO&&"zoom"===t.input.name&&(n=t);return n instanceof fO||t.eachChild((function(t){var r=bM(t);r instanceof fO?n=r:!n&&r?n=new fO("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new fO("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function gM(t){if(Array.isArray(t))return t.map(gM);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var n={};for(var r in t)n[r]=gM(t[r]);return n}return function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}(t)}wM.prototype.evaluateWithoutErrorHandling=function(t,n,r,i,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,r,i,e,o)},wM.prototype.evaluate=function(t,n,r,i,e,o){return this._styleExpression.evaluate(t,n,r,i,e,o)},wM.prototype.interpolationFactor=function(t,n,r){return this.interpolationType?FS.interpolationFactor(this.interpolationType,t,n,r):0};var xM={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function _M(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var n=0,r=t.slice(1);n<r.length;n+=1){var i=r[n];if(!_M(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}function jM(t,n){if(void 0===n&&(n="fill"),null==t)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};_M(t)||(t=AM(t));var r=t,i=!0;try{i=function(t){if(!MM(t))return t;var n=gM(t);return SM(n),n=OM(n)}(r)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(r,null,2)+"\n        ")}var e=xM["filter_"+n],o=pM(i,e),u=null;if("error"===o.result)throw new Error(o.value.map((function(t){return t.key+": "+t.message})).join(", "));u=function(t,n,r){return o.value.evaluate(t,n,{},r)};var s=null,a=null;if(i!==r){var f=pM(r,e);if("error"===f.result)throw new Error(f.value.map((function(t){return t.key+": "+t.message})).join(", "));s=function(t,n,r,i,e){return f.value.evaluate(t,n,{},r,void 0,void 0,i,e)},a=!cS(f.value.expression)}return{filter:u=u,dynamicFilter:s||void 0,needGeometry:kM(i),needFeature:!!a}}function OM(t){if(!Array.isArray(t))return t;var n=function(t){if(EM.has(t[0]))for(var n=1;n<t.length;n++){if(MM(t[n]))return!0}return t}(t);return!0===n?n:n.map((function(t){return OM(t)}))}function SM(t){var n=!1,r=[];if("case"===t[0]){for(var i=1;i<t.length-1;i+=2)n=n||MM(t[i]),r.push(t[i+1]);r.push(t[t.length-1])}else if("match"===t[0]){n=n||MM(t[1]);for(var e=2;e<t.length-1;e+=2)r.push(t[e+1]);r.push(t[t.length-1])}else if("step"===t[0]){n=n||MM(t[1]);for(var o=1;o<t.length-1;o+=2)r.push(t[o+1])}n&&(t.length=0,t.push.apply(t,["any"].concat(r)));for(var u=1;u<t.length;u++)SM(t[u])}function MM(t){if(!Array.isArray(t))return!1;if("pitch"===(n=t[0])||"distance-from-center"===n)return!0;for(var n,r=1;r<t.length;r++){if(MM(t[r]))return!0}return!1}var EM=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function TM(t,n){return t<n?-1:t>n?1:0}function kM(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var n=1;n<t.length;n++)if(kM(t[n]))return!0;return!1}function AM(t){if(!t)return!0;var n,r=t[0];return t.length<=1?"any"!==r:"=="===r?CM(t[1],t[2],"=="):"!="===r?IM(CM(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?CM(t[1],t[2],r):"any"===r?(n=t.slice(1),["any"].concat(n.map(AM))):"all"===r?["all"].concat(t.slice(1).map(AM)):"none"===r?["all"].concat(t.slice(1).map(AM).map(IM)):"in"===r?PM(t[1],t.slice(2)):"!in"===r?IM(PM(t[1],t.slice(2))):"has"===r?NM(t[1]):"!has"===r?IM(NM(t[1])):"within"!==r||t}function CM(t,n,r){switch(t){case"$type":return["filter-type-"+r,n];case"$id":return["filter-id-"+r,n];default:return["filter-"+r,t,n]}}function PM(t,n){if(0===n.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((function(t){return Vj(t)!==Vj(n[0])}))?["filter-in-large",t,["literal",n.sort(TM)]]:["filter-in-small",t,["literal",n]]}}function NM(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function IM(t){return["!",t]}var LM=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function RM(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return LM.forEach((function(t){t in n&&(r[t]=n[t])})),r}var GM={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},zM=" ",FM=/(italic|oblique)$/i,DM={},UM=function(t,n,r){var i=DM[t];if(!i){Array.isArray(t)||(t=[t]);for(var e=400,o="normal",u=[],s=0,a=t.length;s<a;++s){var f=t[s].split(" "),h=f[f.length-1].toLowerCase();for(var c in"normal"==h||"italic"==h||"oblique"==h?(o=h,f.pop(),h=f[f.length-1].toLowerCase()):FM.test(h)&&(h=h.replace(FM,""),o=f[f.length-1].replace(h,"")),GM){var l=f.length>1?f[f.length-2].toLowerCase():"";if(h==c||h==c.replace("-","")||l+"-"+h==c){e=GM[c],f.pop(),l&&c.startsWith(l)&&f.pop();break}}"number"==typeof h&&(e=h);var v=f.join(zM).replace("Klokantech Noto Sans","Noto Sans");-1!==v.indexOf(zM)&&(v='"'+v+'"'),u.push(v)}i=DM[t]=[o,e,u]}return i[0]+zM+i[1]+zM+n+"px"+(r?"/"+r:"")+zM+i[2]},qM="https://api.mapbox.com";function BM(t){var n="mapbox://";return 0!==t.indexOf(n)?"":t.slice(n.length)}function XM(t,n){var r=BM(t);if(!r)return decodeURI(new URL(t,location.href).href);var i="styles/";if(0!==r.indexOf(i))throw new Error("unexpected style url: "+t);var e=r.slice(i.length);return qM+"/styles/v1/"+e+"?&access_token="+n}function VM(t,n,r,i){var e=new URL(t,i),o=BM(t);return o?"https://{a-d}.tiles.mapbox.com/v4/"+o+"/{z}/{x}/{y}.vector.pbf?access_token="+n:n?(e.searchParams.set(r,n),decodeURI(e.href)):decodeURI(e.href)}function YM(t){return t*Math.PI/180}var WM=function(){for(var t=[],n=78271.51696402048;t.length<=24;n/=2)t.push(n);return t}();function ZM(t,n){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,n);var r=document.createElement("canvas");return r.width=t,r.height=n,r}var HM={};function KM(t,n,r){if(void 0===r&&(r={}),n in HM)return HM[n];var i=r.transformRequest&&r.transformRequest(n,t)||new Request(n);i.headers.get("Accept")||i.headers.set("Accept","application/json");var e=fetch(i).then((function(t){return delete HM[n],t.ok?t.json():Promise.reject(new Error("Error fetching source "+n))})).catch((function(t){return delete HM[n],Promise.reject(new Error("Error fetching source "+n))}));return HM[n]=e,e}function $M(t,n){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return KM("Style",t=XM(t,n.accessToken),n);try{var r=JSON.parse(t);return Promise.resolve(r)}catch(t){return Promise.reject(t)}}var JM={};function QM(t,n,r){void 0===r&&(r={});var i=[n,JSON.stringify(t)].toString(),e=JM[i];if(!e||r.transformRequest){var o=t.url;if(o){var u=VM(o,r.accessToken,r.accessTokenParam||"access_token",n||location.href);e=o.startsWith("mapbox://")?Promise.resolve(k({},t,{url:void 0,tiles:u})):KM("Source",u,r).then((function(t){for(var n=0,i=t.tiles.length;n<i;++n){var e=t.tiles[n];if(r.transformRequest){var o=r.transformRequest(u,"Source");o&&(u=o.url)}var s=VM(e,r.accessToken,r.accessTokenParam||"access_token",u);if(r.transformRequest){var a=r.transformRequest(s,"Tiles");a instanceof Request&&(s=decodeURI(a.url))}t.tiles[n]=s}return Promise.resolve(t)}))}else t=k({},t,{tiles:t.tiles.map((function(t){return VM(t,r.accessToken,r.accessTokenParam||"access_token",n||location.href)}))}),e=Promise.resolve(k({},t));JM[i]=e}return e}var tE,nE=Array(256).join(" ");function rE(t,n){if(n>=.05){for(var r="",i=t.split("\n"),e=nE.slice(0,Math.round(n/.1)),o=0,u=i.length;o<u;++o)o>0&&(r+="\n"),r+=i[o].split("").join(e);return r}return t}function iE(){return tE||(tE=ZM(1,1).getContext("2d")),tE}function eE(t,n){return iE().measureText(t).width+(t.length-1)*n}var oE={};function uE(t,n,r,i){if(-1!==t.indexOf("\n")){for(var e=t.split("\n"),o=[],u=0,s=e.length;u<s;++u)o.push(uE(e[u],n,r,i));return o.join("\n")}var a=r+","+n+","+t+","+i,f=oE[a];if(!f){var h=t.split(" ");if(h.length>1){var c=iE();c.font=n;for(var l=c.measureText("M").width*r,v="",d=[],p=0,y=h.length;p<y;++p){var w=h[p],m=v+(v?" ":"")+w;eE(m,i)<=l?v=m:(v&&d.push(v),v=w)}v&&d.push(v);for(var b=0,g=d.length;b<g&&g>1;++b){var x=d[b];if(eE(x,i)<.35*l){var _=b>0?eE(d[b-1],i):1/0,j=b<g-1?eE(d[b+1],i):1/0;d.splice(b,1),g-=1,_<j?(d[b-1]+=" "+x,b-=1):d[b]=x+" "+d[b]}}for(var O=0,S=d.length-1;O<S;++O){var M=d[O],E=d[O+1];if(eE(M,i)>.7*l&&eE(E,i)<.6*l){var T=M.split(" "),k=T.pop();eE(k,i)<.2*l&&(d[O]=T.join(" "),d[O+1]=k+" "+E),S-=1}}f=d.join("\n")}else f=t;f=rE(f,i),oE[a]=f}return f}var sE,aE=/font-family: ?([^;]*);/,fE=/("|')/g;function hE(t){if(!sE){sE={};for(var n=document.styleSheets,r=0,i=n.length;r<i;++r){var e=n[r];try{var o=e.rules||e.cssRules;if(o)for(var u=0,s=o.length;u<s;++u){var a=o[u];if(5==a.type){var f=a.cssText.match(aE);sE[f[1].replace(fE,"")]=!0}}}catch(t){}}}return t in sE}var cE={};function lE(t){var n=t.toString();if(n in cE)return cE[n];for(var r=[],i=0,e=t.length;i<e;++i){t[i]=t[i].replace("Arial Unicode MS","Arial");var o=t[i],u=UM(o,1);Ju(u);var s=u.split(" ");r.push([s.slice(3).join(" ").replace(/"/g,""),s[1],s[0]])}for(var a=0,f=r.length;a<f;++a){var h=r[a],c=h[0];if(!hE(c)&&100!==Yu.get(h[2]+"\n"+h[1]+" \n"+c)){var l="https://fonts.googleapis.com/css?family="+c.replace(/ /g,"+")+":"+h[1]+h[2];if(!document.querySelector('link[href="'+l+'"]')){var v=document.createElement("link");v.href=l,v.rel="stylesheet",document.head.appendChild(v)}}}return cE[n]=t,t}var vE,dE,pE={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},yE={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},wE={},mE={zoom:0};function bE(t,n,r,i,e,o,u){var s=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[s]||(o[s]={});var a,f=o[s];if(!f[r]){var h=(t[n]||wE)[r],c=xM[n+"_"+t.type][r];void 0===h&&(h=c.default);var l=(a=h,Array.isArray(a)&&a.length>0&&"string"==typeof a[0]&&a[0]in uM);if(!l&&vM(h)&&(h=nO(h,c),l=!0),l){var v=function(t,n){var r=mM(t,n);if("error"===r.result)throw new Error(r.value.map((function(t){return t.key+": "+t.message})).join(", "));return r.value}(h,c);f[r]=v.evaluate.bind(v)}else"color"==c.type&&(h=Qj.parse(h)),f[r]=function(){return h}}return mE.zoom=i,f[r](mE,e,u)}function gE(t,n,r,i){return bE(t,"layout","icon-allow-overlap",n,r,i)?bE(t,"layout","icon-ignore-placement",n,r,i)?"none":"obstacle":"declutter"}function xE(t,n,r,i,e){return e||console.warn("No filterCache provided to evaluateFilter()"),t in e||(e[t]=jM(n).filter),mE.zoom=i,e[t](mE,r)}var _E=!1;function jE(t,n){if(t){if(!_E&&(0===t.a||0===n))return;var r=t.a;return n=void 0===n?1:n,0===r?"transparent":"rgba("+Math.round(255*t.r/r)+","+Math.round(255*t.g/r)+","+Math.round(255*t.b/r)+","+r*n+")"}return t}var OE=/^([^]*)\{(.*)\}([^]*)$/;function SE(t,n){var r;do{if(r=t.match(OE)){var i=n[r[2]]||"";t=r[1]+i+r[3]}}while(r);return t}var ME=!1;function EE(t,n,r,i,e,o,u){if(void 0===i&&(i=WM),void 0===e&&(e=void 0),void 0===o&&(o=void 0),void 0===u&&(u=void 0),"string"==typeof n&&(n=JSON.parse(n)),8!=n.version)throw new Error("glStyle version 8 required.");var s,a;if(o)if("undefined"!=typeof Image){var f=new Image;f.crossOrigin="anonymous",f.onload=function(){s=f,a=[f.width,f.height],t.changed(),f.onload=null},f.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var h=self;h.postMessage({action:"loadImage",src:o}),h.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(s=t.data.image,a=[s.width,s.height])}))}for(var c,l=function(t){t=t.slice();for(var n=Object.create(null),r=0;r<t.length;r++)n[t[r].id]=t[r];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=RM(t[i],n[t[i].ref]));return t}(n.layers),v={},d=[],p={},y={},w={},m={},b=0,g=l.length;b<g;++b){var x=l[b],_=x.id;if("string"==typeof r&&x.source==r||-1!==r.indexOf(_)){var j=x["source-layer"];if(c){if(x.source!==c)throw new Error('Layer "'+_+'" does not use source "'+c)}else{c=x.source;var O=n.sources[c];if(!O)throw new Error('Source "'+c+'" is not defined');var S=O.type;if("vector"!==S&&"geojson"!==S)throw new Error('Source "'+c+'" is not of type "vector" or "geojson", but "'+S+'"')}var M=v[j];M||(M=[],v[j]=M),M.push({layer:x,index:b}),d.push(_)}}var E=new Vv,T=new Cv,k=[],A=function(n,r){var o=n.getProperties(),f=v[o.layer];if(f){var h=i.indexOf(r);-1==h&&(h=function(t,n){for(var r=0,i=n.length;r<i;++r)if(n[r]<t&&r+1<i){var e=n[r]/n[r+1];return r+Math.log(n[r]/t)/Math.log(e)}return i-1}(r,i));for(var c,l=pE[n.getGeometry().getType()],d={properties:o,type:l},b=t.get("mapbox-featurestate")[n.getId()],g=-1,x=0,_=f.length;x<_;++x){var j=f[x],O=j.layer,S=O.id,M=O.layout||wE,A=O.paint||wE;if(!("none"===M.visibility||"minzoom"in O&&h<O.minzoom||"maxzoom"in O&&h>=O.maxzoom)){var C=O.filter;if(!C||xE(S,C,d,h,m)){c=O;var P=void 0,N=void 0,I=void 0,L=void 0,R=void 0,G=void 0,z=j.index;if(3==l&&("fill"==O.type||"fill-extrusion"==O.type))if(N=bE(O,"paint",O.type+"-opacity",h,d,w,b),O.type+"-pattern"in A){var F=bE(O,"paint",O.type+"-pattern",h,d,w,b);if(F){var D="string"==typeof F?SE(F,o):F.toString();if(s&&e&&e[D]){++g,(G=k[g])&&G.getFill()&&!G.getStroke()&&!G.getText()||(G=new Qv({fill:new Cv}),k[g]=G),I=G.getFill(),G.setZIndex(z);var U=D+"."+N,q=y[U];if(!q){var B=e[D],X=ZM(B.width,B.height),V=X.getContext("2d");V.globalAlpha=N,V.drawImage(s,B.x,B.y,B.width,B.height,0,0,B.width,B.height),q=V.createPattern(X,"repeat"),y[U]=q}I.setColor(q)}}}else P=jE(bE(O,"paint",O.type+"-color",h,d,w,b),N),O.type+"-outline-color"in A&&(R=jE(bE(O,"paint",O.type+"-outline-color",h,d,w,b),N)),R||(R=P),(P||R)&&(++g,(!(G=k[g])||P&&!G.getFill()||!P&&G.getFill()||R&&!G.getStroke()||!R&&G.getStroke()||G.getText())&&(G=new Qv({fill:P?new Cv:void 0,stroke:R?new Vv:void 0}),k[g]=G),P&&(I=G.getFill()).setColor(P),R&&((L=G.getStroke()).setColor(R),L.setWidth(.5)),G.setZIndex(z));if(1!=l&&"line"==O.type){P=!("line-pattern"in A)&&"line-color"in A?jE(bE(O,"paint","line-color",h,d,w,b),bE(O,"paint","line-opacity",h,d,w,b)):void 0;var Y=bE(O,"paint","line-width",h,d,w,b);P&&Y>0&&(++g,(G=k[g])&&G.getStroke()&&!G.getFill()&&!G.getText()||(G=new Qv({stroke:new Vv}),k[g]=G),(L=G.getStroke()).setLineCap(bE(O,"layout","line-cap",h,d,w,b)),L.setLineJoin(bE(O,"layout","line-join",h,d,w,b)),L.setMiterLimit(bE(O,"layout","line-miter-limit",h,d,w,b)),L.setColor(P),L.setWidth(Y),L.setLineDash(A["line-dasharray"]?bE(O,"paint","line-dasharray",h,d,w,b).map((function(t){return t*Y})):null),G.setZIndex(z))}var W=!1,Z=null,H=0,K=void 0,$=void 0,J=void 0;if((1==l||2==l)&&"icon-image"in M){var Q=bE(O,"layout","icon-image",h,d,w,b);if(Q){K="string"==typeof Q?SE(Q,o):Q.toString();var tt=void 0;if(s&&e&&e[K]){var nt=bE(O,"layout","icon-rotation-alignment",h,d,w,b);if(2==l){var rt=n.getGeometry();if(rt.getFlatMidpoint||rt.getFlatMidpoints){var it=rt.getExtent();if(Math.sqrt(Math.max(Math.pow((it[2]-it[0])/r,2),Math.pow((it[3]-it[1])/r,2)))>150){var et="MultiLineString"===rt.getType()?rt.getFlatMidpoints():rt.getFlatMidpoint();if(dE||(dE=new sj("Point",vE=[NaN,NaN],[],{},null)),tt=dE,vE[0]=et[0],vE[1]=et[1],"line"===bE(O,"layout","symbol-placement",h,d,w,b)&&"map"===nt)for(var ot=rt.getStride(),ut=rt.getFlatCoordinates(),st=0,at=ut.length-ot;st<at;st+=ot){var ft=ut[st],ht=ut[st+1],ct=ut[st+ot],lt=ut[st+ot+1],vt=Math.min(ft,ct),dt=Math.min(ht,lt),pt=Math.max(ft,ct),yt=Math.max(ht,lt);if(et[0]>=vt&&et[0]<=pt&&et[1]>=dt&&et[1]<=yt){H=Math.atan2(ht-lt,ct-ft);break}}}}}if(2!==l||tt){var wt=bE(O,"layout","icon-size",h,d,w,b),mt=void 0!==A["icon-color"]?bE(O,"paint","icon-color",h,d,w,b):null;if(!mt||0!==mt.a){var bt=K+"."+wt;if(null!==mt&&(bt+="."+mt),!($=p[bt])){var gt=e[K],xt=gE(O,h,d,w);$=new Xv({color:mt?[255*mt.r,255*mt.g,255*mt.b,mt.a]:void 0,img:s,imgSize:a,size:[gt.width,gt.height],offset:[gt.x,gt.y],rotateWithView:"map"===nt,scale:wt/gt.pixelRatio,displacement:"icon-offset"in M?bE(O,"layout","icon-offset",h,d,w,b).map((function(t){return-t*gt.pixelRatio})):void 0,declutterMode:xt}),p[bt]=$}}$&&(++g,(G=k[g])&&G.getImage()&&!G.getFill()&&!G.getStroke()||(G=new Qv,k[g]=G),G.setGeometry(tt),$.setRotation(H+YM(bE(O,"layout","icon-rotate",h,d,w,b))),$.setOpacity(bE(O,"paint","icon-opacity",h,d,w,b)),$.setAnchor(yE[bE(O,"layout","icon-anchor",h,d,w,b)]),G.setImage($),Z=G.getText(),G.setText(void 0),G.setZIndex(z),W=!0,J=!1)}else J=!0}}}if(1==l&&"circle"===O.type){++g,(G=k[g])&&G.getImage()&&!G.getFill()&&!G.getStroke()||(G=new Qv,k[g]=G);var _t="circle-radius"in A?bE(O,"paint","circle-radius",h,d,w,b):5,jt=jE(bE(O,"paint","circle-stroke-color",h,d,w,b),bE(O,"paint","circle-stroke-opacity",h,d,w,b)),Ot=jE(bE(O,"paint","circle-color",h,d,w,b),bE(O,"paint","circle-opacity",h,d,w,b)),St=bE(O,"paint","circle-stroke-width",h,d,w,b),Mt=_t+"."+jt+"."+Ot+"."+St;($=p[Mt])||($=new Av({radius:_t,stroke:jt&&St>0?new Vv({width:St,color:jt}):void 0,fill:Ot?new Cv({color:Ot}):void 0,declutterMode:"none"}),p[Mt]=$),G.setImage($),Z=G.getText(),G.setText(void 0),G.setGeometry(void 0),G.setZIndex(z),W=!0}var Et=void 0,Tt=void 0,kt=void 0,At=void 0,Ct=void 0,Pt=void 0;if("text-field"in M){At=Math.round(bE(O,"layout","text-size",h,d,w,b));var Nt=bE(O,"layout","text-font",h,d,w,b);kt=bE(O,"layout","text-line-height",h,d,w,b),(Tt=UM(u?u(Nt):Nt,At,kt)).includes("sans-serif")||(Tt+=",sans-serif"),Ct=bE(O,"layout","text-letter-spacing",h,d,w,b),Pt=bE(O,"layout","text-max-width",h,d,w,b);var It=bE(O,"layout","text-field",h,d,w,b);Et="object"===Vj(It)&&It.sections?1===It.sections.length?It.toString():It.sections.reduce((function(t,n,r){var i=n.fontStack?n.fontStack.split(","):Nt,e=UM(u?u(i):i,At*(n.scale||1),kt),o=n.text;if("\n"===o)return t.push("\n",""),t;if(2!=l){for(var s=0,a=(o=uE(o,e,Pt,Ct).split("\n")).length;s<a;++s)s>0&&t.push("\n",""),t.push(o[s],e);return t}t.push(rE(o,Ct),e)}),[]):SE(It,o).trim(),N=bE(O,"paint","text-opacity",h,d,w,b)}if(Et&&N&&!J){W||(++g,(G=k[g])&&G.getText()&&!G.getFill()&&!G.getStroke()||(G=new Qv,k[g]=G),G.setImage(void 0),G.setGeometry(void 0)),G.getText()||G.setText(Z||new rd({padding:[2,2,2,2]})),Z=G.getText();var Lt=M["text-transform"];"uppercase"==Lt?Et=Array.isArray(Et)?Et.map((function(t,n){return n%2?t:t.toUpperCase()})):Et.toUpperCase():"lowercase"==Lt&&(Et=Array.isArray(Et)?Et.map((function(t,n){return n%2?t:t.toLowerCase()})):Et.toLowerCase());var Rt=Array.isArray(Et)?Et:2==l?rE(Et,Ct):uE(Et,Tt,Pt,Ct);Z.setText(Rt),Z.setFont(Tt),Z.setRotation(YM(bE(O,"layout","text-rotate",h,d,w,b)));var Gt=bE(O,"layout","text-anchor",h,d,w,b),zt=W||1==l?"point":bE(O,"layout","symbol-placement",h,d,w,b);Z.setPlacement(zt),Z.setOverflow("point"===zt);var Ft=bE(O,"paint","text-halo-width",h,d,w,b),Dt=bE(O,"layout","text-offset",h,d,w,b),Ut=bE(O,"paint","text-translate",h,d,w,b),qt=0,Bt=0;if("point"==zt){var Xt="center";-1!==Gt.indexOf("left")?(Xt="left",Bt=Ft):-1!==Gt.indexOf("right")&&(Xt="right",Bt=-Ft),Z.setTextAlign(Xt);var Vt=bE(O,"layout","text-rotation-alignment",h,d,w,b);Z.setRotateWithView("map"==Vt)}else Z.setMaxAngle(YM(bE(O,"layout","text-max-angle",h,d,w,b))*Et.length/Rt.length),Z.setTextAlign(),Z.setRotateWithView(!1);var Yt="middle";0==Gt.indexOf("bottom")?(Yt="bottom",qt=-Ft-.5*(kt-1)*At):0==Gt.indexOf("top")&&(Yt="top",qt=Ft+.5*(kt-1)*At),Z.setTextBaseline(Yt),Z.setOffsetX(Dt[0]*At+Bt+Ut[0]),Z.setOffsetY(Dt[1]*At+qt+Ut[1]),T.setColor(jE(bE(O,"paint","text-color",h,d,w,b),N)),Z.setFill(T);var Wt=jE(bE(O,"paint","text-halo-color",h,d,w,b),N);if(Wt){E.setColor(Wt),Ft*=2;var Zt=.5*At;E.setWidth(Ft<=Zt?Ft:Zt),Z.setStroke(E)}else Z.setStroke(void 0);var Ht=bE(O,"layout","text-padding",h,d,w,b),Kt=Z.getPadding();Ht!==Kt[0]&&(Kt[0]=Ht,Kt[1]=Ht,Kt[2]=Ht,Kt[3]=Ht),G.setZIndex(z)}}}}return g>-1?(k.length=g+1,ME&&("function"==typeof n.set?n.set("mapbox-layer",c):n.getProperties()["mapbox-layer"]=c),k):void 0}};return t.setStyle(A),t.set("mapbox-source",c),t.set("mapbox-layers",d),t.set("mapbox-featurestate",{}),A}function TE(t,n){n.accessToken||(n=k({},n),new URL(t).searchParams.forEach((function(t,r){n.accessToken=t,n.accessTokenParam=r})));return n}function kE(t,n,r,i,e){var o,u,s;return void 0===r&&(r=""),void 0===i&&(i={}),void 0===e&&(e=void 0),"string"==typeof i?(o=i,s={}):(o=i.styleUrl,s=i),e||(e=s.resolutions),o||"string"!=typeof n||n.trim().startsWith("{")||(o=n),o&&(o=o.startsWith("data:")?location.href:XM(o,s.accessToken),s=TE(o,s)),new Promise((function(i,a){$M(n,s).then((function(n){if(8!=n.version)return a(new Error("glStyle version 8 required."));if(!(t instanceof fj||t instanceof Ij))return a(new Error("Can only apply to VectorLayer or VectorTileLayer"));var f,h,c,l=t instanceof Ij?"vector":"geojson";if(r?u=Array.isArray(r)?n.layers.find((function(t){return t.id===r[0]})).source:r:(u=Object.keys(n.sources).find((function(t){return n.sources[t].type===l})),r=u),!u)return a(new Error("No "+l+" source found in the glStyle."));function v(){if(t instanceof Ij)return IE(n.sources[u],o,s).then((function(n){var r=t.getSource();if(r?n!==r&&(r.setTileUrlFunction(n.getTileUrlFunction()),r.Ge||(r.Ge=n.Ge),r.getAttributions()||r.setAttributions(n.getAttributions()),r.getTileLoadFunction()===zg&&r.setTileLoadFunction(n.getTileLoadFunction()),Ti(r.getProjection(),n.getProjection())&&(r.tileGrid=n.getTileGrid())):t.setSource(n),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var i=t.getSource().getTileGrid();t.setMaxResolution(i.getResolution(i.getMinZoom()))}}));var r=n.sources[u],i=t.getSource();i&&i.get("mapbox-source")===r||(i=RE(r,o,s));var e=t.getSource();return e?i!==e&&(e.getAttributions()||e.setAttributions(i.getAttributions()),e.Ge||(e.Ge=i.getFormat()),e.Fe=i.getUrl()):t.setSource(i),Promise.resolve()}function d(){c||n.sprite&&!f?c?(t.setStyle(c),v().then(i).catch(a)):a(new Error("Something went wrong trying to apply style.")):(c=EE(t,n,r,e,f,h,lE),t.getStyle()?v().then(i).catch(a):a(new Error("Nothing to show for source ["+u+"]")))}if(n.sprite){var p=new URL(function(t,n,r){var i=BM(t);if(!i)return decodeURI(new URL(t,r).href);var e="sprites/";if(0!==i.indexOf(e))throw new Error("unexpected sprites url: "+t);var o=i.slice(e.length);return qM+"/styles/v1/"+o+"/sprite?access_token="+n}(n.sprite,s.accessToken,o||location.href)),y=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",w=p.origin+p.pathname+y+".json"+p.search;new Promise((function(t,n){KM("Sprite",w,s).then(t).catch((function(r){KM("Sprite",w=p.origin+p.pathname+".json"+p.search,s).then(t).catch(n)}))})).then((function(t){void 0===t&&a(new Error("No sprites found.")),f=t,h=p.origin+p.pathname+y+".png"+p.search,d()})).catch((function(t){a(new Error("Sprites cannot be loaded: "+w+": "+t.message))}))}else d()})).catch(a)}))}var AE={};function CE(t,n){var r={id:n.id,type:n.type},i={};function e(e){var o=n.layout||{},u=n.paint||{};r.paint=u;var s,a,f="function"==typeof t.getSource?t.getSource().getTileGrid().getZForResolution(e):t.getView().getZoom(),h="function"==typeof t.getTargetElement?t.getTargetElement():void 0;if(void 0!==u["background-color"]&&(s=bE(r,"paint","background-color",f,AE,i),h&&(h.style.background=Qj.parse(s).toString())),void 0!==u["background-opacity"]&&(a=bE(r,"paint","background-opacity",f,AE,i),h&&(h.style.opacity=a)),"none"!=o.visibility)return jE(s,a);h&&(h.style.backgroundColor="",h.style.opacity="")}if("function"==typeof t.getTargetElement)t.getTargetElement()&&e(),t.on(["change:resolution","change:target"],e);else{if("function"!=typeof t.setBackground)throw new Error("Unable to apply background.");t.setBackground(e)}}function PE(t,n){n.layers.some((function(n){if("background"===n.type)return CE(t,n),!0}))}function NE(t){var n=t.bounds;if(n){var r=Ei([n[0],n[1]]),i=Ei([n[2],n[3]]);return[r[0],r[1],i[0],i[1]]}}function IE(t,n,r){return new Promise((function(i,e){QM(t,n,r).then((function(t){var n=new Ix({tileJSON:t}),r=n.getTileJSON(),e=n.getTileGrid(),o=NE(r),u=r.minzoom||0,s=r.maxzoom||22,a={attributions:n.getAttributions(),format:new Pj,tileGrid:new Hh({origin:e.getOrigin(0),extent:o||e.getExtent(),minZoom:u,resolutions:WM.slice(0,s+1),tileSize:512})};Array.isArray(r.tiles)?a.urls=r.tiles:a.url=r.tiles,t.olSourceOptions&&Object.assign(a,t.olSourceOptions),i(new Gg(a))})).catch(e)}))}var LE=new Xj;function RE(t,n,r){var i=t.data,e={};if("string"==typeof i){var o=VM(i,r.accessToken,r.accessTokenParam||"access_token",n||location.href);if(r.transformRequest){var u=r.transformRequest(o,"GeoJSON");u instanceof Request&&(o=encodeURI(u.url))}e.url=o}else e.features=LE.readFeatures(i,{featureProjection:Li()||"EPSG:3857"});var s=new Gd(k({attributions:t.attribution,format:LE},e));return s.set("mapbox-source",t),s}var GE=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),zE=function(t){function n(n){var r=t.call(this,R)||this;return r.error=n,r}return GE(n,t),n}(c),FE=function(t){function n(n){var r=this,i=!("declutter"in n)||n.declutter,e=new Gg({state:pu,format:new Pj});r=t.call(this,{source:e,background:n.background,declutter:i,className:n.className,opacity:n.opacity,visible:n.visible,zIndex:n.zIndex,minResolution:n.minResolution,maxResolution:n.maxResolution,minZoom:n.minZoom,maxZoom:n.maxZoom,renderOrder:n.renderOrder,renderBuffer:n.renderBuffer,renderMode:n.renderMode,map:n.map,updateWhileAnimating:n.updateWhileAnimating,updateWhileInteracting:n.updateWhileInteracting,preload:n.preload,useInterimTilesOnError:n.useInterimTilesOnError,properties:n.properties})||this,n.accessToken&&(r.accessToken=n.accessToken);var o=n.styleUrl;return kE(r,o,n.layers||n.source,{accessToken:r.accessToken}).then((function(){e.setState(yu)})).catch((function(t){r.dispatchEvent(new zE(t)),r.getSource().setState(wu)})),void 0===r.getBackground()&&function(t,n,r){void 0===r&&(r={}),"object"===Vj(n)?(PE(t,n),Promise.resolve()):$M(n,r).then((function(n){PE(t,n)}))}(r,n.styleUrl,{accessToken:r.accessToken}),r}return GE(n,t),n}(Ij),DE=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),UE=function(t){function n(n){var r=this,i=n||{},e=k({},i);return delete e.imageRatio,(r=t.call(this,e)||this).hv=void 0!==i.imageRatio?i.imageRatio:1,r}return DE(n,t),n.prototype.getImageRatio=function(){return this.hv},n.prototype.createRenderer=function(){return new z_(this)},n}(Yx),qE=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BE=function(t){function n(n){var r=this,i=k({},n);return(r=t.call(this,i)||this).cv=xv(n.style),r.lv=n.style.variables||{},r.vv=!!n.disableHitDetection,r}return qE(n,t),n.prototype.createRenderer=function(){return new Zx(this,{vertexShader:this.cv.builder.getSymbolVertexShader(),fragmentShader:this.cv.builder.getSymbolFragmentShader(),hitVertexShader:!this.vv&&this.cv.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.vv&&this.cv.builder.getSymbolFragmentShader(!0),uniforms:this.cv.uniforms,attributes:this.cv.attributes})},n.prototype.updateStyleVariables=function(t){k(this.lv,t),this.changed()},n}(gu),XE=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function VE(t,n){var r="\n    attribute vec2 ".concat(Rl.TEXTURE_COORD,";\n    uniform mat4 ").concat(Ll.TILE_TRANSFORM,";\n    uniform float ").concat(Ll.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Ll.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Ll.TEXTURE_RESOLUTION,";\n    uniform float ").concat(Ll.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(Ll.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(Ll.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(Rl.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(Ll.TEXTURE_ORIGIN_X," + ").concat(Ll.TEXTURE_RESOLUTION," * ").concat(Ll.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(Ll.TEXTURE_ORIGIN_Y," - ").concat(Ll.TEXTURE_RESOLUTION," * ").concat(Ll.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(Ll.TILE_TRANSFORM," * vec4(").concat(Rl.TEXTURE_COORD,", ").concat(Ll.DEPTH,", 1.0);\n    }\n  "),i={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:n},e=[];if(void 0!==t.color){var o=ov(i,t.color,Yl);e.push("color = ".concat(o,";"))}if(void 0!==t.contrast){var u=ov(i,t.contrast,Xl);e.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb - (").concat(u," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.exposure){var s=ov(i,t.exposure,Xl);e.push("color.rgb = clamp((".concat(s," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.saturation){var a=ov(i,t.saturation,Xl);e.push("\n      float saturation = ".concat(a," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))}if(void 0!==t.gamma){var f=ov(i,t.gamma,Xl);e.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(f,"));"))}if(void 0!==t.brightness){var h=ov(i,t.brightness,Xl);e.push("color.rgb = clamp(color.rgb + ".concat(h,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var c={},l=i.variables.length;if(l>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(i.variables,")"));for(var v=function(n){var r=i.variables[n];if(!(r in t.variables))throw new Error("Missing '".concat(r,"' in style variables"));var e=pv(r);c[e]=function(){var n=t.variables[r];return"string"==typeof n&&(n=iv(i,n)),void 0!==n?n:-9999999}},d=0;d<l;++d)v(d);var p=Object.keys(c).map((function(t){return"uniform float ".concat(t,";")})),y=Math.ceil(n/4);p.push("uniform sampler2D ".concat(Ll.TILE_TEXTURE_ARRAY,"[").concat(y,"];")),i.paletteTextures&&p.push("uniform sampler2D ".concat(yv,"[").concat(i.paletteTextures.length,"];"));var w=Object.keys(i.functions).map((function(t){return i.functions[t]}));return{vertexShader:r,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(Ll.RENDER_EXTENT,";\n    uniform float ").concat(Ll.TRANSITION_ALPHA,";\n    uniform float ").concat(Ll.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Ll.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Ll.RESOLUTION,";\n    uniform float ").concat(Ll.ZOOM,";\n\n    ").concat(p.join("\n"),"\n\n    ").concat(w.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(Ll.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(Ll.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(Ll.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(Ll.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(Ll.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(e.join("\n"),"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(Ll.TRANSITION_ALPHA,";\n    }"),uniforms:c,paletteTextures:i.paletteTextures}}var YE=function(t){function n(n){var r=this,i=n?k({},n):{},e=i.style||{};delete i.style;var o=i.cacheSize;return delete i.cacheSize,(r=t.call(this,i)||this).dv=i.sources,r.pv=null,r.Ic=NaN,r.$=e,r.Jt=o,r.lv=r.$.variables||{},r.addChangeListener(eu,r.yv),r}return XE(n,t),n.prototype.getSources=function(t,n){var r=this.getSource();return this.dv?"function"==typeof this.dv?this.dv(t,n):this.dv:r?[r]:[]},n.prototype.getRenderSource=function(){return this.pv||this.getSource()},n.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():du},n.prototype.yv=function(){this.getSource()&&this.setStyle(this.$)},n.prototype.wv=function(){var t=this.getSource();return t&&"bandCount"in t?t.bandCount:4},n.prototype.createRenderer=function(){var t=VE(this.$,this.wv());return new Bl(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.Jt,paletteTextures:t.paletteTextures})},n.prototype.renderSources=function(t,n){for(var r,i=this.getRenderer(),e=0,o=n.length;e<o;++e)this.pv=n[e],i.prepareFrame(t)&&(r=i.renderFrame(t));return r},n.prototype.render=function(t,n){var r=this;this.rendered=!0;for(var i=t.viewState,e=this.getSources(t.extent,i.resolution),o=!0,u=function(t,n){var i=e[t],u=i.getState();if(u==pu){i.addEventListener("change",(function t(){i.getState()==yu&&(i.removeEventListener("change",t),r.changed())}))}o=o&&u==yu},s=0,a=e.length;s<a;++s)u(s);var f=this.renderSources(t,e);if(this.getRenderer().renderComplete&&o)return this.Ic=i.resolution,f;if(this.Ic>.5*i.resolution){var h=this.getSources(t.extent,this.Ic).filter((function(t){return!e.includes(t)}));if(h.length>0)return this.renderSources(t,h)}return f},n.prototype.setStyle=function(t){this.lv=t.variables||{},this.$=t;var n=VE(this.$,this.wv());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},n.prototype.updateStyleVariables=function(t){k(this.lv,t),this.changed()},n}(ix);YE.prototype.dispose;var WE=YE,ZE=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),HE="addfeatures",KE=function(t){function n(n,r,i,e){var o=t.call(this,n)||this;return o.features=i,o.file=r,o.projection=e,o}return ZE(n,t),n}(c),$E=function(t){function n(n){var r=this,i=n||{};(r=t.call(this,{handleEvent:O})||this).on,r.once,r.un,r.mv=!1,r.bv=[];for(var e=i.formatConstructors?i.formatConstructors:[],o=0,u=e.length;o<u;++o){var s=e[o];"function"==typeof s&&(s=new s),r.bv.push(s),r.mv=r.mv||s.getType()===fh}return r.yr=i.projection?gi(i.projection):null,r.gv=null,r.xv=i.source||null,r.target=i.target?i.target:null,r}return ZE(n,t),n.prototype._v=function(t,n){var r,i=n.target.result,e=this.getMap(),o=this.yr;o||(o=e.getView().getProjection());for(var u=this.bv,s=0,a=u.length;s<a;++s){var f=u[s],h=i;this.mv&&f.getType()!==fh&&(void 0===r&&(r=(new TextDecoder).decode(i)),h=r);var c=this.jv(f,h,{featureProjection:o});if(c&&c.length>0){this.xv&&(this.xv.clear(),this.xv.addFeatures(c)),this.dispatchEvent(new KE(HE,t,c,o));break}}},n.prototype.Ov=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.gv=[H(n,q,this.handleDrop,this),H(n,D,this.handleStop,this),H(n,U,this.handleStop,this),H(n,q,this.handleStop,this)]}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.Ov(),this.getActive()&&!n&&this.Sv(),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Sv(),t.prototype.setMap.call(this,n),this.getActive()&&this.Ov()},n.prototype.jv=function(t,n,r){try{return t.readFeatures(n,r)}catch(t){return null}},n.prototype.Sv=function(){this.gv&&(this.gv.forEach($),this.gv=null)},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,r=0,i=n.length;r<i;++r){var e=n.item(r),o=new FileReader;o.addEventListener(V,this._v.bind(this,e)),this.mv?o.readAsArrayBuffer(e):o.readAsText(e)}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},n}(Ma),JE=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),QE=function(t){function n(n){var r=this,i=n||{};return(r=t.call(this,i)||this).Hi=i.condition?i.condition:qa,r.$i=void 0,r.Mv=void 0,r.Ee=0,r.zi=void 0!==i.duration?i.duration:400,r}return JE(n,t),n.prototype.handleDragEvent=function(t){if(Xa(t)){var n=t.map,r=n.getSize(),i=t.pixel,e=i[0]-r[0]/2,o=r[1]/2-i[1],u=Math.atan2(o,e),s=Math.sqrt(e*e+o*o),a=n.getView();if(void 0!==this.$i){var f=this.$i-u;a.adjustRotationInternal(f)}this.$i=u,void 0!==this.Mv&&a.adjustResolutionInternal(this.Mv/s),void 0!==this.Mv&&(this.Ee=this.Mv/s),this.Mv=s}},n.prototype.handleUpEvent=function(t){if(!Xa(t))return!0;var n=t.map.getView(),r=this.Ee>1?1:-1;return n.endInteraction(this.zi,r),this.Ee=0,!1},n.prototype.handleDownEvent=function(t){return!!Xa(t)&&(!!this.Hi(t)&&(t.map.getView().beginInteraction(),this.$i=void 0,this.Mv=void 0,!0))},n}(Ca),tT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),nT=function(t){function n(n,r,i){var e=t.call(this)||this;if(void 0!==i&&void 0===r)e.setFlatCoordinates(i,n);else{var o=r||0;e.setCenterAndRadius(n,o,i)}return e}return tT(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,r,i){var e=this.flatCoordinates,o=t-e[0],u=n-e[1],s=o*o+u*u;if(s<i){if(0===s)for(var a=0;a<this.stride;++a)r[a]=e[a];else{var f=this.getRadius()/Math.sqrt(s);r[0]=e[0]+f*o,r[1]=e[1]+f*u;for(a=2;a<this.stride;++a)r[a]=e[a]}return r.length=this.stride,s}return i},n.prototype.containsXY=function(t,n){var r=this.flatCoordinates,i=t-r[0],e=n-r[1];return i*i+e*e<=this.Ev()},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,r=n[this.stride]-n[0];return An(n[0]-r,n[1]-r,n[0]+r,n[1]+r,t)},n.prototype.getRadius=function(){return Math.sqrt(this.Ev())},n.prototype.Ev=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},n.prototype.getType=function(){return Pt.CIRCLE},n.prototype.intersectsExtent=function(t){if(tr(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||qn(t,this.intersectsCoordinate.bind(this)))}return!1},n.prototype.setCenter=function(t){var n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],i=t.slice();i[n]=i[0]+r;for(var e=1;e<n;++e)i[n+e]=t[e];this.setFlatCoordinates(this.layout,i),this.changed()},n.prototype.setCenterAndRadius=function(t,n,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,e=ae(i,0,t,this.stride);i[e++]=i[0]+n;for(var o=1,u=this.stride;o<u;++o)i[e++]=i[o];i.length=e,this.changed()},n.prototype.getCoordinates=function(){return null},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},n.prototype.rotate=function(t,n){var r=this.getCenter(),i=this.getStride();this.setCenter(Vi(r,0,r.length,i,t,n,r)),this.changed()},n.prototype.translate=function(t,n){var r=this.getCenter(),i=this.getStride();this.setCenter(Wi(r,0,r.length,i,t,n,r)),this.changed()},n}(te);nT.prototype.transform;var rT=nT,iT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),eT="Point",oT="LineString",uT="Polygon",sT="Circle",aT="drawstart",fT="drawend",hT="drawabort",cT=function(t){function n(n,r){var i=t.call(this,n)||this;return i.feature=r,i}return iT(n,t),n}(c);var lT=function(t){function n(n){var r=this,i=n;i.stopDown||(i.stopDown=S),(r=t.call(this,i)||this).on,r.once,r.un,r.Tv=!1,r.kv=null,r.Av,r.Cv,r.Pv,r.Nv=!1,r.xv=n.source?n.source:null,r.ze=n.features?n.features:null,r.Iv=n.snapTolerance?n.snapTolerance:12,r.nl=n.type,r.ye=function(t){switch(t){case Pt.POINT:case Pt.MULTI_POINT:return eT;case Pt.LINE_STRING:case Pt.MULTI_LINE_STRING:return oT;case Pt.POLYGON:case Pt.MULTI_POLYGON:return uT;case Pt.CIRCLE:return sT;default:throw new Error("Invalid type: "+t)}}(r.nl),r.Lv=!!n.stopClick,r.Rv=n.minPoints?n.minPoints:r.ye===uT?3:2,r.Gv=r.ye===sT?2:n.maxPoints?n.maxPoints:1/0,r.zv=n.finishCondition?n.finishCondition:O,r.Fv=n.geometryLayout?n.geometryLayout:Tt;var e,o=n.geometryFunction;if(!o){var u,s=r.ye;if(s===sT)o=function(t,n,r){var i=n||new rT([NaN,NaN]),e=Gi(t[0],r),o=ii(e,Gi(t[t.length-1],r));i.setCenterAndRadius(e,Math.sqrt(o),this.Fv);var u=Li();return u&&i.transform(r,u),i};else s===eT?u=Te:s===oT?u=J_:s===uT&&(u=Ke),o=function(t,n,r){return n?s===uT?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])],this.Fv):n.setCoordinates([],this.Fv):n.setCoordinates(t,this.Fv):n=new u(t,this.Fv),n}}return r.Xs=o,r.Dv=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,r.Uv=null,r.qv=null,r.Bv=null,r.Xv=null,r.Vv=null,r.Yv=null,r.Wv=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,r.Zv=new fj({source:new Gd({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(e=$v(),function(t,n){return e[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.K=n.geometryName,r.Hi=n.condition?n.condition:Ua,r.Hv,n.freehand?r.Hv=Ga:r.Hv=n.freehandCondition?n.freehandCondition:qa,r.addChangeListener(_a,r.Kv),r}return iT(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.Kv()},n.prototype.getOverlay=function(){return this.Zv},n.prototype.handleEvent=function(n){n.originalEvent.type===G&&n.originalEvent.preventDefault(),this.Nv=this.ye!==eT&&this.Hv(n);var r=n.type===ps.POINTERMOVE,i=!0;!this.Nv&&this.Cv&&n.type===ps.POINTERDRAG&&(Date.now()-this.Cv>=this.Dv?(this.kv=n.pixel,this.Tv=!this.Nv,r=!0):this.Cv=void 0,this.Tv&&void 0!==this.Av&&(clearTimeout(this.Av),this.Av=void 0));return this.Nv&&n.type===ps.POINTERDRAG&&null!==this.qv?(this.$v(n.coordinate),i=!1):this.Nv&&n.type===ps.POINTERDOWN?i=!1:r&&this.getPointerCount()<2?(i=n.type===ps.POINTERMOVE)&&this.Nv?(this.Zn(n),this.Tv&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===ps.POINTERDRAG&&void 0===this.Av)&&this.Zn(n):n.type===ps.DBLCLICK&&(i=!1),t.prototype.handleEvent.call(this,n)&&i},n.prototype.handleDownEvent=function(t){return this.Tv=!this.Nv,this.Nv?(this.kv=t.pixel,this.Uv||this.Jv(t.coordinate),!0):this.Hi(t)?(this.Cv=Date.now(),this.Av=setTimeout(function(){this.Zn(new ds(ps.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.Dv),this.kv=t.pixel,!0):(this.Cv=void 0,!1)},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.Av&&(clearTimeout(this.Av),this.Av=void 0),this.Zn(t),this.Tv){var r=!this.Uv;r&&this.Jv(t.coordinate),!r&&this.Nv?this.finishDrawing():this.Nv||r&&this.ye!==eT||(this.Qv(t.pixel)?this.zv(t)&&this.finishDrawing():this.$v(t.coordinate)),n=!1}else this.Nv&&this.abortDrawing();return!n&&this.Lv&&t.preventDefault(),n},n.prototype.Zn=function(t){if(this.Pv=t.originalEvent.pointerType,this.kv&&(!this.Nv&&this.Tv||this.Nv&&!this.Tv)){var n=this.kv,r=t.pixel,i=n[0]-r[0],e=n[1]-r[1],o=i*i+e*e;if(this.Tv=this.Nv?o>this.Wv:o<=this.Wv,!this.Tv)return}this.Uv?this.td(t.coordinate):this.rd(t.coordinate.slice())},n.prototype.Qv=function(t){var n=!1;if(this.qv){var r=!1,i=[this.Uv],e=this.ye;if(e===eT)n=!0;else if(e===sT)n=2===this.Xv.length;else if(e===oT)r=this.Xv.length>this.Rv;else if(e===uT){var o=this.Xv;r=o[0].length>this.Rv,i=[o[0][0],o[0][o[0].length-2]]}if(r)for(var u=this.getMap(),s=0,a=i.length;s<a;s++){var f=i[s],h=u.getPixelFromCoordinate(f),c=t[0]-h[0],l=t[1]-h[1],v=this.Nv?1:this.Iv;if(n=Math.sqrt(c*c+l*l)<=v){this.Uv=f;break}}}return n},n.prototype.rd=function(t){this.Bv?this.Bv.getGeometry().setCoordinates(t):(this.Bv=new Et(new Te(t)),this.ed())},n.prototype.od=function(t){this.Vv||(this.Vv=new Et);var n=t.getLinearRing(0),r=this.Vv.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new J_(n.getFlatCoordinates(),n.getLayout()),this.Vv.setGeometry(r))},n.prototype.Jv=function(t){for(var n=this.getMap().getView().getProjection(),r=Ji(this.Fv);t.length<r;)t.push(0);this.Uv=t,this.ye===eT?this.Xv=t.slice():this.ye===uT?(this.Xv=[[t.slice(),t.slice()]],this.Yv=this.Xv[0]):this.Xv=[t.slice(),t.slice()],this.Yv&&(this.Vv=new Et(new J_(this.Yv)));var i=this.Xs(this.Xv,void 0,n);this.qv=new Et,this.K&&this.qv.setGeometryName(this.K),this.qv.setGeometry(i),this.ed(),this.dispatchEvent(new cT(aT,this.qv))},n.prototype.td=function(t){for(var n,r,i=this.getMap(),e=this.qv.getGeometry(),o=i.getView().getProjection(),u=Ji(this.Fv);t.length<u;)t.push(0);(this.ye===eT?r=this.Xv:this.ye===uT?(r=(n=this.Xv[0])[n.length-1],this.Qv(i.getPixelFromCoordinate(t))&&(t=this.Uv.slice())):r=(n=this.Xv)[n.length-1],r[0]=t[0],r[1]=t[1],this.Xs(this.Xv,e,o),this.Bv)&&this.Bv.getGeometry().setCoordinates(t);if(e.getType()===Pt.POLYGON&&this.ye!==uT)this.od(e);else if(this.Yv){this.Vv.getGeometry().setCoordinates(this.Yv)}this.ed()},n.prototype.$v=function(t){var n,r,i=this.qv.getGeometry(),e=this.getMap().getView().getProjection(),o=this.ye;o===oT||o===sT?(this.Uv=t.slice(),(r=this.Xv).length>=this.Gv&&(this.Nv?r.pop():n=!0),r.push(t.slice()),this.Xs(r,i,e)):o===uT&&((r=this.Xv[0]).length>=this.Gv&&(this.Nv?r.pop():n=!0),r.push(t.slice()),n&&(this.Uv=r[0]),this.Xs(this.Xv,i,e)),this.rd(t.slice()),this.ed(),n&&this.finishDrawing()},n.prototype.removeLastPoint=function(){if(this.qv){var t,n=this.qv.getGeometry(),r=this.getMap().getView().getProjection(),i=this.ye;if(i===oT||i===sT){if((t=this.Xv).splice(-2,1),t.length>=2){this.Uv=t[t.length-2].slice();var e=this.Uv.slice();t[t.length-1]=e,this.rd(e)}this.Xs(t,n,r),n.getType()===Pt.POLYGON&&this.Vv&&this.od(n)}else if(i===uT){(t=this.Xv[0]).splice(-2,1);var o=this.Vv.getGeometry();if(t.length>=2){e=t[t.length-2].slice();t[t.length-1]=e,this.rd(e)}o.setCoordinates(t),this.Xs(this.Xv,n,r)}1===t.length&&this.abortDrawing(),this.ed()}},n.prototype.finishDrawing=function(){var t=this.ud();if(t){var n=this.Xv,r=t.getGeometry(),i=this.getMap().getView().getProjection();this.ye===oT?(n.pop(),this.Xs(n,r,i)):this.ye===uT&&(n[0].pop(),this.Xs(n,r,i),n=r.getCoordinates()),this.nl===Pt.MULTI_POINT?t.setGeometry(new W_([n])):this.nl===Pt.MULTI_LINE_STRING?t.setGeometry(new tj([n])):this.nl===Pt.MULTI_POLYGON&&t.setGeometry(new ij([n])),this.dispatchEvent(new cT(fT,t)),this.ze&&this.ze.push(t),this.xv&&this.xv.addFeature(t)}},n.prototype.ud=function(){this.Uv=null;var t=this.qv;return this.qv=null,this.Bv=null,this.Vv=null,this.Zv.getSource().clear(!0),t},n.prototype.abortDrawing=function(){var t=this.ud();t&&this.dispatchEvent(new cT(hT,t))},n.prototype.appendCoordinates=function(t){var n,r=this.ye,i=!this.qv;if(i&&this.Jv(t[0]),r===oT||r===sT)n=this.Xv;else{if(r!==uT)return;n=this.Xv&&this.Xv.length?this.Xv[0]:[]}i&&n.shift(),n.pop();for(var e=0;e<t.length;e++)this.$v(t[e]);var o=t[t.length-1];this.$v(o),this.td(o)},n.prototype.extend=function(t){var n=t.getGeometry();this.qv=t,this.Xv=n.getCoordinates();var r=this.Xv[this.Xv.length-1];this.Uv=r.slice(),this.Xv.push(r.slice()),this.Bv=new Et(new Te(r)),this.ed(),this.dispatchEvent(new cT(aT,this.qv))},n.prototype.ed=function(){var t=[];this.qv&&t.push(this.qv),this.Vv&&t.push(this.Vv),this.Bv&&t.push(this.Bv);var n=this.Zv.getSource();n.clear(!0),n.addFeatures(t)},n.prototype.Kv=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.Zv.setMap(n?t:null)},n}(Ca),vT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),dT="extentchanged",pT=function(t){function n(n){var r=t.call(this,dT)||this;return r.extent=n,r}return vT(n,t),n}(c);function yT(){var t=$v();return function(n,r){return t[Pt.POINT]}}function wT(t){return function(n){return xn([t,n])}}function mT(t,n){return t[0]==n[0]?function(r){return xn([t,[r[0],n[1]]])}:t[1]==n[1]?function(r){return xn([t,[n[0],r[1]]])}:null}var bT=function(t){function n(n){var r,i=this,e=n||{};return(i=t.call(this,e)||this).on,i.once,i.un,i.Hi=e.condition?e.condition:Ga,i.ut=null,i.sd=null,i.ad=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.fd=!1,i.hd=null,i.ld=null,n||(n={}),i.vd=new fj({source:new Gd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(r=$v(),function(t,n){return r[Pt.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.dd=new fj({source:new Gd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:yT(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&i.setExtent(n.extent),i}return vT(n,t),n.prototype.yd=function(t,n){var r=n.getCoordinateFromPixelInternal(t),i=this.getExtentInternal();if(i){var e=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(i);e.sort((function(t,n){return oi(r,t)-oi(r,n)}));var o=e[0],u=$r(r,o),s=n.getPixelFromCoordinateInternal(u);if(ei(t,s)<=this.ad){var a=n.getPixelFromCoordinateInternal(o[0]),f=n.getPixelFromCoordinateInternal(o[1]),h=ii(s,a),c=ii(s,f),l=Math.sqrt(Math.min(h,c));return this.fd=l<=this.ad,this.fd&&(u=h>c?o[1]:o[0]),u}}return null},n.prototype.Zn=function(t){var n=t.pixel,r=t.map,i=this.yd(n,r);i||(i=r.getCoordinateFromPixelInternal(n)),this.wd(i)},n.prototype.md=function(t){var n=this.hd;return n?t?n.setGeometry(Je(t)):n.setGeometry(void 0):(n=new Et(t?Je(t):{}),this.hd=n,this.vd.getSource().addFeature(n)),n},n.prototype.wd=function(t){var n=this.ld;n?n.getGeometry().setCoordinates(t):(n=new Et(new Te(t)),this.ld=n,this.dd.getSource().addFeature(n));return n},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.Hi(n)||(n.type!=ps.POINTERMOVE||this.handlingDownUpSequence||this.Zn(n),t.prototype.handleEvent.call(this,n),!1)},n.prototype.handleDownEvent=function(t){var n=t.pixel,r=t.map,i=this.getExtentInternal(),e=this.yd(n,r),o=function(t){var n=null,r=null;return t[0]==i[0]?n=i[2]:t[0]==i[2]&&(n=i[0]),t[1]==i[1]?r=i[3]:t[1]==i[3]&&(r=i[1]),null!==n&&null!==r?[n,r]:null};if(e&&i){var u=e[0]==i[0]||e[0]==i[2]?e[0]:null,s=e[1]==i[1]||e[1]==i[3]?e[1]:null;null!==u&&null!==s?this.sd=wT(o(e)):null!==u?this.sd=mT(o([u,i[1]]),o([u,i[3]])):null!==s&&(this.sd=mT(o([i[0],s]),o([i[2],s])))}else e=r.getCoordinateFromPixelInternal(n),this.setExtent([e[0],e[1],e[0],e[1]]),this.sd=wT(e);return!0},n.prototype.handleDragEvent=function(t){if(this.sd){var n=t.coordinate;this.setExtent(this.sd(n)),this.wd(n)}},n.prototype.handleUpEvent=function(t){this.sd=null;var n=this.getExtentInternal();return n&&0!==Bn(n)||this.setExtent(null),!1},n.prototype.setMap=function(n){this.vd.setMap(n),this.dd.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getExtent=function(){return zi(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.ut},n.prototype.setExtent=function(t){this.ut=t||null,this.md(t),this.dispatchEvent(new pT(this.ut))},n}(Ca),gT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function xT(t){return parseFloat(t)}function _T(t){return function(t){return br(t,5)}(t).toString()}function jT(t,n){return!isNaN(t)&&t!==xT(_T(n))}var OT=function(t){function n(n){var r,i=t.call(this)||this,e=k({animate:!0,replace:!1,prefix:""},n||{});return r=!0===e.animate?{duration:250}:e.animate?e.animate:null,i.bd=r,i.gd=e.replace,i.xd=e.prefix,i.bn=[],i._d=!0,i.Kv=i.Kv.bind(i),i}return gT(n,t),n.prototype.jd=function(t){return this.xd?this.xd+t:t},n.prototype.Od=function(t,n){return t.get(this.jd(n))},n.prototype.Sd=function(t,n,r){t.set(this.jd(n),r)},n.prototype.Md=function(t,n){t.delete(this.jd(n))},n.prototype.setMap=function(n){var r=this.getMap();t.prototype.setMap.call(this,n),n!==r&&(r&&this.Sv(r),n&&(this._d=!0,this.Kv(),this.Ov(n)))},n.prototype.Ov=function(t){this.bn.push(H(t,Os,this.Ed,this),H(t.getLayerGroup(),L,this.Ed,this),H(t,"change:layergroup",this.Td,this)),this.gd||addEventListener("popstate",this.Kv)},n.prototype.Sv=function(t){for(var n=0,r=this.bn.length;n<r;++n)$(this.bn[n]);this.bn.length=0,this.gd||removeEventListener("popstate",this.Kv);var i=new URL(window.location.href),e=i.searchParams;this.Md(e,"x"),this.Md(e,"y"),this.Md(e,"z"),this.Md(e,"r"),this.Md(e,"l"),window.history.replaceState(null,"",i)},n.prototype.Td=function(){var t=this.getMap();t&&(this.Sv(t),this.Ov(t),this._d=!0,this.Ed())},n.prototype.Kv=function(){var t=this.getMap();if(t){var n=t.getView();if(n){var r=new URL(window.location.href).searchParams,i=!1,e={},o=xT(this.Od(r,"z"));jT(o,n.getZoom())&&(i=!0,e.zoom=o);var u=xT(this.Od(r,"r"));jT(u,n.getRotation())&&(i=!0,e.rotation=u);var s,a,f=[xT(this.Od(r,"x")),xT(this.Od(r,"y"))];s=f,a=n.getCenter(),(jT(s[0],a[0])||jT(s[1],a[1]))&&(i=!0,e.center=f),i&&(!this._d&&this.bd?n.animate(k(e,this.bd)):(e.center&&n.setCenter(e.center),"zoom"in e&&n.setZoom(e.zoom),"rotation"in e&&n.setRotation(e.rotation)));var h=t.getAllLayers(),c=this.Od(r,"l");if(c&&c.length===h.length)for(var l=0,v=h.length;l<v;++l){var d=parseInt(c[l]);if(!isNaN(d)){var p=Boolean(d),y=h[l];y.getVisible()!==p&&y.setVisible(p)}}}}},n.prototype.Ed=function(){var t=this.getMap();if(t){var n=t.getView();if(n){var r=this._d;this._d=!1;for(var i=n.getCenter(),e=n.getZoom(),o=n.getRotation(),u=t.getAllLayers(),s=new Array(u.length),a=0,f=u.length;a<f;++a)s[a]=u[a].getVisible()?"1":"0";var h=new URL(window.location.href),c=h.searchParams;this.Sd(c,"x",_T(i[0])),this.Sd(c,"y",_T(i[1])),this.Sd(c,"z",_T(e)),this.Sd(c,"r",_T(o)),this.Sd(c,"l",s.join("")),h.href!==window.location.href&&(r||this.gd?window.history.replaceState(null,"",h):window.history.pushState(null,"",h))}}},n}(Ma);function ST(t){return(ST="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var MT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ET=[0,0,0,0],TT=[],kT="modifystart",AT="modifyend",CT=function(t){function n(n,r,i){var e=t.call(this,n)||this;return e.features=r,e.mapBrowserEvent=i,e}return MT(n,t),n}(c);function PT(t,n){return t.index-n.index}function NT(t,n,r){var i=n.geometry;if(i.getType()===Pt.CIRCLE){var e=i;if(1===n.index){var o=Li();o&&(e=e.clone().transform(o,r));var u=ii(e.getCenter(),Gi(t,r)),s=Math.sqrt(u)-e.getRadius();return s*s}}var a=Gi(t,r);return TT[0]=Gi(n.segment[0],r),TT[1]=Gi(n.segment[1],r),oi(a,TT)}function IT(t,n,r){var i=n.geometry;if(i.getType()===Pt.CIRCLE&&1===n.index){var e=i,o=Li();return o&&(e=e.clone().transform(o,r)),Ri(e.getClosestPoint(Gi(t,r)),r)}var u=Gi(t,r);return TT[0]=Gi(n.segment[0],r),TT[1]=Gi(n.segment[1],r),Ri($r(u,TT),r)}var LT=function(t){function n(n){var r,i,e=t.call(this,n)||this;if(e.on,e.once,e.un,e.kd=e.Ka.bind(e),e.Hi=n.condition?n.condition:Va,e.Ad=function(t){return Na(t)&&Da(t)},e.Cd=n.deleteCondition?n.deleteCondition:e.Ad,e.Pd=n.insertVertexCondition?n.insertVertexCondition:Ga,e.ld=null,e.Nd=null,e.Id=[0,0],e.Ld=!1,e.Rd=null,e.Gd=new od,e.ad=void 0!==n.pixelTolerance?n.pixelTolerance:10,e.fd=!1,e.zd=!1,e.Fd=[],e.Zv=new fj({source:new Gd({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(r=$v(),function(t,n){return r[Pt.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.Dd={Point:e.Ud.bind(e),LineString:e.qd.bind(e),LinearRing:e.qd.bind(e),Polygon:e.Bd.bind(e),MultiPoint:e.Xd.bind(e),MultiLineString:e.Vd.bind(e),MultiPolygon:e.Yd.bind(e),Circle:e.Wd.bind(e),GeometryCollection:e.Zd.bind(e)},e.xv=null,e.Hd=null,n.features?i=n.features:n.source&&(e.xv=n.source,i=new ht(e.xv.getFeatures()),e.xv.addEventListener(Td,e.Kd.bind(e)),e.xv.addEventListener(Cd,e.$d.bind(e))),!i)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(e.Hd=n.hitDetection),e.ze=i,e.ze.forEach(e.Jd.bind(e)),e.ze.addEventListener(ot,e.Qd.bind(e)),e.ze.addEventListener(ut,e.tp.bind(e)),e.np=null,e.Bi=[0,0],e.rp=void 0===n.snapToPointer?!e.Hd:n.snapToPointer,e}return MT(n,t),n.prototype.Jd=function(t){var n=t.getGeometry();if(n){var r=this.Dd[n.getType()];r&&r(t,n)}var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.ip(this.Id,i),t.addEventListener(L,this.kd)},n.prototype.ep=function(t,n){if(!this.Rd){this.Rd=new ht;for(var r=this.Rd.getArray(),i=0,e=n.length;i<e;++i)for(var o=n[i],u=0,s=o.length;u<s;++u){var a=o[u].feature;a&&-1===r.indexOf(a)&&this.Rd.push(a)}0===this.Rd.getLength()?this.Rd=null:this.dispatchEvent(new CT(kT,this.Rd,t))}},n.prototype.op=function(t){this.up(t),this.ld&&0===this.ze.getLength()&&(this.Zv.getSource().removeFeature(this.ld),this.ld=null),t.removeEventListener(L,this.kd)},n.prototype.up=function(t){var n=this.Gd,r=[];n.forEach((function(n){t===n.feature&&r.push(n)}));for(var i=r.length-1;i>=0;--i){for(var e=r[i],o=this.Fd.length-1;o>=0;--o)this.Fd[o][0]===e&&this.Fd.splice(o,1);n.remove(e)}},n.prototype.setActive=function(n){this.ld&&!n&&(this.Zv.getSource().removeFeature(this.ld),this.ld=null),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Zv.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getOverlay=function(){return this.Zv},n.prototype.Kd=function(t){t.feature&&this.ze.push(t.feature)},n.prototype.$d=function(t){t.feature&&this.ze.remove(t.feature)},n.prototype.Qd=function(t){this.Jd(t.element)},n.prototype.Ka=function(t){if(!this.zd){var n=t.target;this.op(n),this.Jd(n)}},n.prototype.tp=function(t){var n=t.element;this.op(n)},n.prototype.Ud=function(t,n){var r=n.getCoordinates(),i={feature:t,geometry:n,segment:[r,r]};this.Gd.insert(n.getExtent(),i)},n.prototype.Xd=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length;i<e;++i){var o=r[i],u={feature:t,geometry:n,depth:[i],index:i,segment:[o,o]};this.Gd.insert(n.getExtent(),u)}},n.prototype.qd=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length-1;i<e;++i){var o=r.slice(i,i+2),u={feature:t,geometry:n,index:i,segment:o};this.Gd.insert(xn(o),u)}},n.prototype.Vd=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length;i<e;++i)for(var o=r[i],u=0,s=o.length-1;u<s;++u){var a=o.slice(u,u+2),f={feature:t,geometry:n,depth:[i],index:u,segment:a};this.Gd.insert(xn(a),f)}},n.prototype.Bd=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length;i<e;++i)for(var o=r[i],u=0,s=o.length-1;u<s;++u){var a=o.slice(u,u+2),f={feature:t,geometry:n,depth:[i],index:u,segment:a};this.Gd.insert(xn(a),f)}},n.prototype.Yd=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length;i<e;++i)for(var o=r[i],u=0,s=o.length;u<s;++u)for(var a=o[u],f=0,h=a.length-1;f<h;++f){var c=a.slice(f,f+2),l={feature:t,geometry:n,depth:[u,i],index:f,segment:c};this.Gd.insert(xn(c),l)}},n.prototype.Wd=function(t,n){var r=n.getCenter(),i={feature:t,geometry:n,index:0,segment:[r,r]},e={feature:t,geometry:n,index:1,segment:[r,r]},o=[i,e];i.featureSegments=o,e.featureSegments=o,this.Gd.insert(Pn(r),i);var u=n,s=Li();if(s&&this.getMap()){var a=this.getMap().getView().getProjection();u=Qe(u=u.clone().transform(s,a)).transform(a,s)}this.Gd.insert(u.getExtent(),e)},n.prototype.Zd=function(t,n){for(var r=n.getGeometriesArray(),i=0;i<r.length;++i){var e=r[i];(0,this.Dd[e.getType()])(t,e)}},n.prototype.sp=function(t,n,r){var i=this.ld;i?i.getGeometry().setCoordinates(t):(i=new Et(new Te(t)),this.ld=i,this.Zv.getSource().addFeature(i));return i.set("features",n),i.set("geometries",r),i},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.np=n,n.map.getView().getInteracting()||n.type!=ps.POINTERMOVE||this.handlingDownUpSequence||this.Zn(n),this.ld&&this.Cd(n)&&(r=!(n.type!=ps.SINGLECLICK||!this.Ld)||this.removePoint()),n.type==ps.SINGLECLICK&&(this.Ld=!1),t.prototype.handleEvent.call(this,n)&&!r);var r},n.prototype.handleDragEvent=function(t){this.Ld=!1,this.ep(t,this.Fd);for(var n=[t.coordinate[0]+this.Bi[0],t.coordinate[1]+this.Bi[1]],r=[],i=[],e=0,o=this.Fd.length;e<o;++e){var u=this.Fd[e],s=u[0],a=s.feature;-1===r.indexOf(a)&&r.push(a);var f=s.geometry;-1===i.indexOf(f)&&i.push(f);for(var h=s.depth,c=void 0,l=s.segment,v=u[1];n.length<f.getStride();)n.push(l[v][n.length]);switch(f.getType()){case Pt.POINT:c=n,l[0]=n,l[1]=n;break;case Pt.MULTI_POINT:(c=f.getCoordinates())[s.index]=n,l[0]=n,l[1]=n;break;case Pt.LINE_STRING:(c=f.getCoordinates())[s.index+v]=n,l[v]=n;break;case Pt.MULTI_LINE_STRING:case Pt.POLYGON:(c=f.getCoordinates())[h[0]][s.index+v]=n,l[v]=n;break;case Pt.MULTI_POLYGON:(c=f.getCoordinates())[h[1]][h[0]][s.index+v]=n,l[v]=n;break;case Pt.CIRCLE:if(l[0]=n,l[1]=n,0===s.index)this.zd=!0,f.setCenter(n),this.zd=!1;else{this.zd=!0;var d=t.map.getView().getProjection(),p=ei(Gi(f.getCenter(),d),Gi(n,d)),y=Li();if(y){var w=f.clone().transform(y,d);w.setRadius(p),p=w.transform(d,y).getRadius()}f.setRadius(p),this.zd=!1}}c&&this.ap(f,c)}this.sp(n,r,i)},n.prototype.handleDownEvent=function(t){if(!this.Hi(t))return!1;var n=t.coordinate;this.ip(t.pixel,t.map,n),this.Fd.length=0,this.Rd=null;var r=this.ld;if(r){var i=t.map.getView().getProjection(),e=[],u=r.getGeometry().getCoordinates(),s=xn([u]),a=this.Gd.getInExtent(s),f={};a.sort(PT);for(var h=0,c=a.length;h<c;++h){var l=a[h],v=l.segment,d=o(l.geometry),p=l.depth;if(p&&(d+="-"+p.join("-")),f[d]||(f[d]=new Array(2)),l.geometry.getType()!==Pt.CIRCLE||1!==l.index)if(!ti(v[0],u)||f[d][0])if(!ti(v[1],u)||f[d][1])o(v)in this.Nd&&!f[d][0]&&!f[d][1]&&this.Pd(t)&&e.push(l);else{if(f[d][0]&&0===f[d][0].index){var y=l.geometry.getCoordinates();switch(l.geometry.getType()){case Pt.LINE_STRING:case Pt.MULTI_LINE_STRING:continue;case Pt.MULTI_POLYGON:y=y[p[1]];case Pt.POLYGON:if(l.index!==y[p[0]].length-2)continue}}this.Fd.push([l,1]),f[d][1]=l}else this.Fd.push([l,0]),f[d][0]=l;else ti(IT(n,l,i),u)&&!f[d][0]&&(this.Fd.push([l,0]),f[d][0]=l)}e.length&&this.ep(t,[e]);for(var w=e.length-1;w>=0;--w)this.fp(e[w],u)}return!!this.ld},n.prototype.handleUpEvent=function(t){for(var n=this.Fd.length-1;n>=0;--n){var r=this.Fd[n][0],i=r.geometry;if(i.getType()===Pt.CIRCLE){var e=i.getCenter(),o=r.featureSegments[0],u=r.featureSegments[1];o.segment[0]=e,o.segment[1]=e,u.segment[0]=e,u.segment[1]=e,this.Gd.update(Pn(e),o);var s=i,a=Li();if(a){var f=t.map.getView().getProjection();s=Qe(s=s.clone().transform(a,f)).transform(f,a)}this.Gd.update(s.getExtent(),u)}else this.Gd.update(xn(r.segment),r)}return this.Rd&&(this.dispatchEvent(new CT(AT,this.Rd,t)),this.Rd=null),!1},n.prototype.Zn=function(t){this.Id=t.pixel,this.ip(t.pixel,t.map,t.coordinate)},n.prototype.ip=function(t,n,r){var i,e,u=this,s=r||n.getCoordinateFromPixel(t),a=n.getView().getProjection();if(this.Hd){var f="object"===ST(this.Hd)?function(t){return t===u.Hd}:void 0;n.forEachFeatureAtPixel(t,(function(t,n,r){if((r=r||t.getGeometry()).getType()===Pt.POINT&&y(u.ze.getArray(),t)){e=r;var o=r.getFlatCoordinates().slice(0,2);i=[{feature:t,geometry:r,segment:[o,o]}]}return!0}),{layerFilter:f})}if(!i){var h=zi(_n(Fi(Pn(s,ET),a),n.getView().getResolution()*this.ad,ET),a);i=this.Gd.getInExtent(h)}if(i&&i.length>0){var c=i.sort((function(t,n){return NT(s,t,a)-NT(s,n,a)}))[0],l=c.segment,v=IT(s,c,a),d=n.getPixelFromCoordinate(v),p=ei(t,d);if(e||p<=this.ad){var w={};if(w[o(l)]=!0,this.rp||(this.Bi[0]=v[0]-s[0],this.Bi[1]=v[1]-s[1]),c.geometry.getType()===Pt.CIRCLE&&1===c.index)this.fd=!0,this.sp(v,[c.feature],[c.geometry]);else{var m=n.getPixelFromCoordinate(l[0]),b=n.getPixelFromCoordinate(l[1]),g=ii(d,m),x=ii(d,b);p=Math.sqrt(Math.min(g,x)),this.fd=p<=this.ad,this.fd&&(v=g>x?l[1]:l[0]),this.sp(v,[c.feature],[c.geometry]);var _={};_[o(c.geometry)]=!0;for(var j=1,O=i.length;j<O;++j){var S=i[j].segment;if(!(ti(l[0],S[0])&&ti(l[1],S[1])||ti(l[0],S[1])&&ti(l[1],S[0])))break;var M=o(i[j].geometry);M in _||(_[M]=!0,w[o(S)]=!0)}}return void(this.Nd=w)}}this.ld&&(this.Zv.getSource().removeFeature(this.ld),this.ld=null)},n.prototype.fp=function(t,n){for(var r,i=t.segment,e=t.feature,o=t.geometry,u=t.depth,s=t.index;n.length<o.getStride();)n.push(0);switch(o.getType()){case Pt.MULTI_LINE_STRING:case Pt.POLYGON:(r=o.getCoordinates())[u[0]].splice(s+1,0,n);break;case Pt.MULTI_POLYGON:(r=o.getCoordinates())[u[1]][u[0]].splice(s+1,0,n);break;case Pt.LINE_STRING:(r=o.getCoordinates()).splice(s+1,0,n);break;default:return}this.ap(o,r);var a=this.Gd;a.remove(t),this.hp(o,s,u,1);var f={segment:[i[0],n],feature:e,geometry:o,depth:u,index:s};a.insert(xn(f.segment),f),this.Fd.push([f,1]);var h={segment:[n,i[1]],feature:e,geometry:o,depth:u,index:s+1};a.insert(xn(h.segment),h),this.Fd.push([h,0]),this.Ld=!0},n.prototype.removePoint=function(){if(this.np&&this.np.type!=ps.POINTERDRAG){var t=this.np;this.ep(t,this.Fd);var n=this.cp();return this.Rd&&this.dispatchEvent(new CT(AT,this.Rd,t)),this.Rd=null,n}return!1},n.prototype.cp=function(){var t,n,r,i,e,u,s,a,f,h,c,l=this.Fd,v={},d=!1;for(e=l.length-1;e>=0;--e)c=o((h=(r=l[e])[0]).feature),h.depth&&(c+="-"+h.depth.join("-")),c in v||(v[c]={}),0===r[1]?(v[c].right=h,v[c].index=h.index):1==r[1]&&(v[c].left=h,v[c].index=h.index+1);for(c in v){switch(f=v[c].right,s=v[c].left,(a=(u=v[c].index)-1)<0&&(a=0),t=n=(i=(h=void 0!==s?s:f).geometry).getCoordinates(),d=!1,i.getType()){case Pt.MULTI_LINE_STRING:n[h.depth[0]].length>2&&(n[h.depth[0]].splice(u,1),d=!0);break;case Pt.LINE_STRING:n.length>2&&(n.splice(u,1),d=!0);break;case Pt.MULTI_POLYGON:t=t[h.depth[1]];case Pt.POLYGON:(t=t[h.depth[0]]).length>4&&(u==t.length-1&&(u=0),t.splice(u,1),d=!0,0===u&&(t.pop(),t.push(t[0]),a=t.length-1))}if(d){this.ap(i,n);var p=[];if(void 0!==s&&(this.Gd.remove(s),p.push(s.segment[0])),void 0!==f&&(this.Gd.remove(f),p.push(f.segment[1])),void 0!==s&&void 0!==f){var y={depth:h.depth,feature:h.feature,geometry:h.geometry,index:a,segment:p};this.Gd.insert(xn(y.segment),y)}this.hp(i,u,h.depth,-1),this.ld&&(this.Zv.getSource().removeFeature(this.ld),this.ld=null),l.length=0}}return d},n.prototype.ap=function(t,n){this.zd=!0,t.setCoordinates(n),this.zd=!1},n.prototype.hp=function(t,n,r,i){this.Gd.forEachInExtent(t.getExtent(),(function(e){e.geometry===t&&(void 0===r||void 0===e.depth||x(e.depth,r))&&e.index>n&&(e.index+=i)}))},n}(Ca),RT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),GT="select",zT=function(t){function n(n,r,i,e){var o=t.call(this,n)||this;return o.selected=r,o.deselected=i,o.mapBrowserEvent=e,o}return RT(n,t),n}(c),FT={};var DT=function(t){function n(n){var r=t.call(this)||this;r.on,r.once,r.un;var i,e,o=n||{};if(r.lp=r.Jd.bind(r),r.vp=r.op.bind(r),r.Hi=o.condition?o.condition:Da,r.dp=o.addCondition?o.addCondition:Fa,r.pp=o.removeCondition?o.removeCondition:Fa,r.yp=o.toggleCondition?o.toggleCondition:qa,r.wp=!!o.multi&&o.multi,r.mp=o.filter?o.filter:O,r.bp=o.hitTolerance?o.hitTolerance:0,r.$=void 0!==o.style?o.style:(b((i=$v())[Pt.POLYGON],i[Pt.LINE_STRING]),b(i[Pt.GEOMETRY_COLLECTION],i[Pt.LINE_STRING]),function(t){return t.getGeometry()?i[t.getGeometry().getType()]:null}),r.ze=o.features||new ht,o.layers)if("function"==typeof o.layers)e=o.layers;else{var u=o.layers;e=function(t){return y(u,t)}}else e=O;return r.gp=e,r.xp={},r}return RT(n,t),n.prototype._p=function(t,n){this.xp[o(t)]=n},n.prototype.getFeatures=function(){return this.ze},n.prototype.getHitTolerance=function(){return this.bp},n.prototype.getLayer=function(t){return this.xp[o(t)]},n.prototype.setHitTolerance=function(t){this.bp=t},n.prototype.setMap=function(n){this.getMap()&&this.$&&this.ze.forEach(this.jp.bind(this)),t.prototype.setMap.call(this,n),n?(this.ze.addEventListener(ot,this.lp),this.ze.addEventListener(ut,this.vp),this.$&&this.ze.forEach(this.Op.bind(this))):(this.ze.removeEventListener(ot,this.lp),this.ze.removeEventListener(ut,this.vp))},n.prototype.Jd=function(t){var n=t.element;if(this.$&&this.Op(n),!this.getLayer(n)){var r=this.getMap().getAllLayers().find((function(t){if(t instanceof fj&&t.getSource()&&t.getSource().hasFeature(n))return t}));r&&this._p(n,r)}},n.prototype.op=function(t){var n=t.element;this.$&&this.jp(n)},n.prototype.getStyle=function(){return this.$},n.prototype.Op=function(t){var n=o(t);n in FT||(FT[n]=t.getStyle()),t.setStyle(this.$)},n.prototype.jp=function(t){for(var r=this.getMap().getInteractions().getArray(),i=r.length-1;i>=0;--i){var e=r[i];if(e!==this&&e instanceof n&&e.getStyle()&&-1!==e.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(e.getStyle())}var u=o(t);t.setStyle(FT[u]),delete FT[u]},n.prototype.Sp=function(t){delete this.xp[o(t)]},n.prototype.handleEvent=function(t){if(!this.Hi(t))return!0;var n=this.dp(t),r=this.pp(t),i=this.yp(t),e=!n&&!r&&!i,o=t.map,u=this.getFeatures(),s=[],a=[];if(e){A(this.xp),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.mp(t,n))return this._p(t,n),a.push(t),!this.wp}.bind(this),{layerFilter:this.gp,hitTolerance:this.bp});for(var f=u.getLength()-1;f>=0;--f){var h=u.item(f),c=a.indexOf(h);c>-1?a.splice(c,1):(u.remove(h),s.push(h))}0!==a.length&&u.extend(a)}else{o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.mp(t,e))return!n&&!i||y(u.getArray(),t)?(r||i)&&y(u.getArray(),t)&&(s.push(t),this.Sp(t)):(this._p(t,e),a.push(t)),!this.wp}.bind(this),{layerFilter:this.gp,hitTolerance:this.bp});for(var l=s.length-1;l>=0;--l)u.remove(s[l]);u.extend(a)}return(a.length>0||s.length>0)&&this.dispatchEvent(new zT(GT,a,s,t)),!0},n}(Ma),UT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function qT(t){return t.feature?t.feature:t.element?t.element:void 0}var BT=[],XT=function(t){function n(n){var r=this,i=n||{},e=i;return e.handleDownEvent||(e.handleDownEvent=O),e.stopDown||(e.stopDown=S),(r=t.call(this,e)||this).xv=i.source?i.source:null,r.Mp=void 0===i.vertex||i.vertex,r.Ep=void 0===i.edge||i.edge,r.ze=i.features?i.features:null,r.Tp=[],r.kp={},r.Ap={},r.Cp={},r.ad=void 0!==i.pixelTolerance?i.pixelTolerance:10,r.Gd=new od,r.Pp={Point:r.Np.bind(r),LineString:r.Ip.bind(r),LinearRing:r.Ip.bind(r),Polygon:r.Lp.bind(r),MultiPoint:r.Rp.bind(r),MultiLineString:r.Gp.bind(r),MultiPolygon:r.zp.bind(r),GeometryCollection:r.Fp.bind(r),Circle:r.Dp.bind(r)},r}return UT(n,t),n.prototype.addFeature=function(t,n){var r=void 0===n||n,i=o(t),e=t.getGeometry();if(e){var u=this.Pp[e.getType()];if(u){this.Ap[i]=e.getExtent([1/0,1/0,-1/0,-1/0]);var s=[];if(u(s,e),1===s.length)this.Gd.insert(xn(s[0]),{feature:t,segment:s[0]});else if(s.length>1){var a=s.map((function(t){return xn(t)})),f=s.map((function(n){return{feature:t,segment:n}}));this.Gd.load(a,f)}}}r&&(this.kp[i]=H(t,L,this.Ka,this))},n.prototype.Up=function(t){this.addFeature(t)},n.prototype.qp=function(t){this.removeFeature(t)},n.prototype.Bp=function(){var t;return this.ze?t=this.ze:this.xv&&(t=this.xv.getFeatures()),t},n.prototype.handleEvent=function(n){var r=this.snapTo(n.pixel,n.coordinate,n.map);return r&&(n.coordinate=r.vertex.slice(0,2),n.pixel=r.vertexPixel),t.prototype.handleEvent.call(this,n)},n.prototype.Qd=function(t){var n=qT(t);this.addFeature(n)},n.prototype.tp=function(t){var n=qT(t);this.removeFeature(n)},n.prototype.Ka=function(t){var n=t.target;if(this.handlingDownUpSequence){var r=o(n);r in this.Cp||(this.Cp[r]=n)}else this.Xp(n)},n.prototype.handleUpEvent=function(t){var n=C(this.Cp);return n.length&&(n.forEach(this.Xp.bind(this)),this.Cp={}),!1},n.prototype.removeFeature=function(t,n){var r=void 0===n||n,i=o(t),e=this.Ap[i];if(e){var u=this.Gd,s=[];u.forEachInExtent(e,(function(n){t===n.feature&&s.push(n)}));for(var a=s.length-1;a>=0;--a)u.remove(s[a])}r&&($(this.kp[i]),delete this.kp[i])},n.prototype.setMap=function(n){var r=this.getMap(),i=this.Tp,e=this.Bp();r&&(i.forEach($),i.length=0,e.forEach(this.qp.bind(this))),t.prototype.setMap.call(this,n),n&&(this.ze?i.push(H(this.ze,ot,this.Qd,this),H(this.ze,ut,this.tp,this)):this.xv&&i.push(H(this.xv,Td,this.Qd,this),H(this.xv,Cd,this.tp,this)),e.forEach(this.Up.bind(this)))},n.prototype.snapTo=function(t,n,r){var i=xn([r.getCoordinateFromPixel([t[0]-this.ad,t[1]+this.ad]),r.getCoordinateFromPixel([t[0]+this.ad,t[1]-this.ad])]),e=this.Gd.getInExtent(i),o=e.length;if(0===o)return null;var u,s=r.getView().getProjection(),a=Gi(n,s),f=1/0,h=this.ad*this.ad,c=function(){if(u){var n=r.getPixelFromCoordinate(u);if(ii(t,n)<=h)return{vertex:u,vertexPixel:[Math.round(n[0]),Math.round(n[1])]}}return null};if(this.Mp){for(var l=0;l<o;++l){(v=e[l]).feature.getGeometry().getType()!==Pt.CIRCLE&&v.segment.forEach((function(t){var n=Gi(t,s),r=ii(a,n);r<f&&(u=t,f=r)}))}if(x=c())return x}if(this.Ep){for(l=0;l<o;++l){var v,d=null;if((v=e[l]).feature.getGeometry().getType()===Pt.CIRCLE){var p=v.feature.getGeometry(),y=Li();y&&(p=p.clone().transform(y,s)),d=Ri(Kr(a,p),s)}else{var w=v.segment,m=w[0],b=w[1];b&&(BT[0]=Gi(m,s),BT[1]=Gi(b,s),d=$r(a,BT))}if(d){var g=ii(a,d);g<f&&(u=d,f=g)}}var x;if(x=c())return x}return null},n.prototype.Xp=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},n.prototype.Dp=function(t,n){var r=this.getMap().getView().getProjection(),i=n,e=Li();e&&(i=i.clone().transform(e,r));var o=Qe(i);e&&o.transform(r,e);for(var u=o.getCoordinates()[0],s=0,a=u.length-1;s<a;++s)t.push(u.slice(s,s+2))},n.prototype.Fp=function(t,n){for(var r=n.getGeometriesArray(),i=0;i<r.length;++i){var e=this.Pp[r[i].getType()];e&&e(t,r[i])}},n.prototype.Ip=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length-1;i<e;++i)t.push(r.slice(i,i+2))},n.prototype.Gp=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length;i<e;++i)for(var o=r[i],u=0,s=o.length-1;u<s;++u)t.push(o.slice(u,u+2))},n.prototype.Rp=function(t,n){n.getCoordinates().forEach((function(n){t.push([n])}))},n.prototype.zp=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length;i<e;++i)for(var o=r[i],u=0,s=o.length;u<s;++u)for(var a=o[u],f=0,h=a.length-1;f<h;++f)t.push(a.slice(f,f+2))},n.prototype.Np=function(t,n){t.push([n.getCoordinates()])},n.prototype.Lp=function(t,n){for(var r=n.getCoordinates(),i=0,e=r.length;i<e;++i)for(var o=r[i],u=0,s=o.length-1;u<s;++u)t.push(o.slice(u,u+2))},n}(Ca),VT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),YT="translatestart",WT="translating",ZT="translateend",HT=function(t){function n(n,r,i,e,o){var u=t.call(this,n)||this;return u.features=r,u.coordinate=i,u.startCoordinate=e,u.mapBrowserEvent=o,u}return VT(n,t),n}(c),KT=function(t){function n(n){var r,i=this,e=n||{};if((i=t.call(this,e)||this).on,i.once,i.un,i.Vp=null,i.Yp=null,i.ze=void 0!==e.features?e.features:null,e.layers&&!i.ze)if("function"==typeof e.layers)r=e.layers;else{var o=e.layers;r=function(t){return y(o,t)}}else r=O;return i.gp=r,i.mp=e.filter&&!i.ze?e.filter:O,i.bp=e.hitTolerance?e.hitTolerance:0,i.Hi=e.condition?e.condition:Ga,i.Wp=null,i.addChangeListener(_a,i.Zp),i}return VT(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.Hi(t))return!1;if(this.Wp=this.Hp(t.pixel,t.map),!this.Vp&&this.Wp){this.Yp=t.coordinate,this.Vp=t.coordinate,this.handleMoveEvent(t);var n=this.ze||new ht([this.Wp]);return this.dispatchEvent(new HT(YT,n,t.coordinate,this.Yp,t)),!0}return!1},n.prototype.handleUpEvent=function(t){if(this.Vp){this.Vp=null,this.handleMoveEvent(t);var n=this.ze||new ht([this.Wp]);return this.dispatchEvent(new HT(ZT,n,t.coordinate,this.Yp,t)),this.Yp=null,!0}return!1},n.prototype.handleDragEvent=function(t){if(this.Vp){var n=t.coordinate,r=n[0]-this.Vp[0],i=n[1]-this.Vp[1],e=this.ze||new ht([this.Wp]);e.forEach((function(t){var n=t.getGeometry();n.translate(r,i),t.setGeometry(n)})),this.Vp=n,this.dispatchEvent(new HT(WT,e,n,this.Yp,t))}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.Hp(t.pixel,t.map)?(n.classList.remove(this.Vp?"ol-grab":"ol-grabbing"),n.classList.add(this.Vp?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")},n.prototype.Hp=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.mp(t,n)&&(!this.ze||y(this.ze.getArray(),t)))return t}.bind(this),{layerFilter:this.gp,hitTolerance:this.bp})},n.prototype.getHitTolerance=function(){return this.bp},n.prototype.setHitTolerance=function(t){this.bp=t},n.prototype.setMap=function(n){var r=this.getMap();t.prototype.setMap.call(this,n),this.Kv(r)},n.prototype.Zp=function(){this.Kv(null)},n.prototype.Kv=function(t){var n=this.getMap(),r=this.getActive();n&&r||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing")},n}(Ca);function $T(t,n,r,i,e,o){var u,s;void 0!==e?(u=e,s=void 0!==o?o:0):(u=[],s=0);for(var a=n;a<r;){var f=t[a++];u[s++]=t[a++],u[s++]=f;for(var h=2;h<i;++h)u[s++]=t[a++]}return u.length=s,u}var JT=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),QT={};QT[Pt.POINT]=function(t){var n;n=void 0!==t.m&&void 0!==t.z?new Te([t.x,t.y,t.z,t.m],Ct):void 0!==t.z?new Te([t.x,t.y,t.z],kt):void 0!==t.m?new Te([t.x,t.y,t.m],At):new Te([t.x,t.y]);return n},QT[Pt.LINE_STRING]=function(t){var n=rk(t);return new J_(t.paths[0],n)},QT[Pt.POLYGON]=function(t){var n=rk(t);return new Ke(t.rings,n)},QT[Pt.MULTI_POINT]=function(t){var n=rk(t);return new W_(t.points,n)},QT[Pt.MULTI_LINE_STRING]=function(t){var n=rk(t);return new tj(t.paths,n)},QT[Pt.MULTI_POLYGON]=function(t){var n=rk(t);return new ij(t.rings,n)};var tk={};function nk(t,n){var r,i,e;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)e=Pt.POINT;else if(t.points)e=Pt.MULTI_POINT;else if(t.paths){e=1===t.paths.length?Pt.LINE_STRING:Pt.MULTI_LINE_STRING}else if(t.rings){var o=t,u=rk(o),s=function(t,n){var r,i,e=[],o=[],u=[];for(r=0,i=t.length;r<i;++r){e.length=0,fe(e,0,t[r],n.length),qe(e,0,e.length,n.length)?o.push([t[r]]):u.push(t[r])}for(;u.length;){var s=u.shift(),a=!1;for(r=o.length-1;r>=0;r--){var f=o[r][0];if(Mn(new Me(f).getExtent(),new Me(s).getExtent())){o[r].push(s),a=!0;break}}a||o.push([s.reverse()])}return o}(o.rings,u);1===s.length?(e=Pt.POLYGON,t=k({},t,((r={}).rings=s[0],r))):(e=Pt.MULTI_POLYGON,t=k({},t,((i={}).rings=s,i)))}return Oj((0,QT[e])(t),!1,n)}function rk(t){var n=Tt;return!0===t.hasZ&&!0===t.hasM?n=Ct:!0===t.hasZ?n=kt:!0===t.hasM&&(n=At),n}function ik(t){var n=t.getLayout();return{hasZ:n===kt||n===Ct,hasM:n===At||n===Ct}}function ek(t,n){return(0,tk[t.getType()])(Oj(t,!0,n),n)}tk[Pt.POINT]=function(t,n){var r,i=t.getCoordinates(),e=t.getLayout();e===kt?r={x:i[0],y:i[1],z:i[2]}:e===At?r={x:i[0],y:i[1],m:i[2]}:e===Ct?r={x:i[0],y:i[1],z:i[2],m:i[3]}:e===Tt?r={x:i[0],y:i[1]}:Ot(!1,34);return r},tk[Pt.LINE_STRING]=function(t,n){var r=ik(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:[t.getCoordinates()]}},tk[Pt.POLYGON]=function(t,n){var r=ik(t);return{hasZ:r.hasZ,hasM:r.hasM,rings:t.getCoordinates(!1)}},tk[Pt.MULTI_POINT]=function(t,n){var r=ik(t);return{hasZ:r.hasZ,hasM:r.hasM,points:t.getCoordinates()}},tk[Pt.MULTI_LINE_STRING]=function(t,n){var r=ik(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:t.getCoordinates()}},tk[Pt.MULTI_POLYGON]=function(t,n){for(var r=ik(t),i=t.getCoordinates(!1),e=[],o=0;o<i.length;o++)for(var u=i[o].length-1;u>=0;u--)e.push(i[o][u]);return{hasZ:r.hasZ,hasM:r.hasM,rings:e}};var ok=function(t){function n(n){var r=this,i=n||{};return(r=t.call(this)||this).K=i.geometryName,r}return JT(n,t),n.prototype.readFeatureFromObject=function(t,n,r){var i=t,e=nk(i.geometry,n),o=new Et;if(this.K&&o.setGeometryName(this.K),o.setGeometry(e),i.attributes){o.setProperties(i.attributes,!0);var u=i.attributes[r];void 0!==u&&o.setId(u)}return o},n.prototype.readFeaturesFromObject=function(t,n){var r=n||{};if(t.features){for(var i=[],e=t.features,o=0,u=e.length;o<u;++o)i.push(this.readFeatureFromObject(e[o],r,t.objectIdFieldName));return i}return[this.readFeatureFromObject(t,r)]},n.prototype.readGeometryFromObject=function(t,n){return nk(t,n)},n.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?gi("EPSG:"+t.spatialReference.wkid):null},n.prototype.writeGeometryObject=function(t,n){return ek(t,this.adaptOptions(n))},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var r={};if(!t.hasProperties())return r.attributes={},r;var i=t.getProperties(),e=t.getGeometry();if(e){r.geometry=ek(e,n);var o=n&&(n.dataProjection||n.featureProjection);o&&(r.geometry.spatialReference={wkid:Number(gi(o).getCode().split(":").pop())}),delete i[t.getGeometryName()]}return P(i)?r.attributes={}:r.attributes=i,r},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var r=[],i=0,e=t.length;i<e;++i)r.push(this.writeFeatureObject(t[i],n));return{features:r}},n}(Dj),uk=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),sk=function(t){function n(){var n=t.call(this)||this;return n.Kp=Dc(),n}return uk(n,t),n.prototype.getType=function(){return lh},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var r=jc(t);return this.readFeatureFromDocument(r,n)}return xc(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n)}return null},n.prototype.readFeatureFromDocument=function(t,n){var r=this.readFeaturesFromDocument(t,n);return r.length>0?r[0]:null},n.prototype.readFeatureFromNode=function(t,n){return null},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var r=jc(t);return this.readFeaturesFromDocument(r,n)}return xc(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n)}return[]},n.prototype.readFeaturesFromDocument=function(t,n){for(var r=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&b(r,this.readFeaturesFromNode(i,n));return r},n.prototype.readFeaturesFromNode=function(t,n){return i()},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var r=jc(t);return this.readGeometryFromDocument(r,n)}return xc(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n)}return null},n.prototype.readGeometryFromDocument=function(t,n){return null},n.prototype.readGeometryFromNode=function(t,n){return null},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=jc(t);return this.readProjectionFromDocument(n)}return xc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection},n.prototype.readProjectionFromNode=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){var r=this.writeFeatureNode(t,n);return this.Kp.serializeToString(r)},n.prototype.writeFeatureNode=function(t,n){return null},n.prototype.writeFeatures=function(t,n){var r=this.writeFeaturesNode(t,n);return this.Kp.serializeToString(r)},n.prototype.writeFeaturesNode=function(t,n){return null},n.prototype.writeGeometry=function(t,n){var r=this.writeGeometryNode(t,n);return this.Kp.serializeToString(r)},n.prototype.writeGeometryNode=function(t,n){return null},n}(jj),ak=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),fk="http://www.opengis.net/gml",hk=/^[\s\xa0]*$/,ck=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.featureType=i.featureType,r.featureNS=i.featureNS,r.srsName=i.srsName,r.schemaLocation="",r.FEATURE_COLLECTION_PARSERS={},r.FEATURE_COLLECTION_PARSERS[r.namespace]={featureMember:Sc(r.readFeaturesInternal),featureMembers:Mc(r.readFeaturesInternal)},r.supportedMediaTypes=["application/gml+xml"],r}return ak(n,t),n.prototype.readFeaturesInternal=function(t,n){var r=t.localName,i=null;if("FeatureCollection"==r)i=Rc([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if("featureMembers"==r||"featureMember"==r||"member"==r){var e=n[0],o=e.featureType,u=e.featureNS;if(!o&&t.childNodes){o=[],u={};for(var s=0,a=t.childNodes.length;s<a;++s){var f=t.childNodes[s];if(1===f.nodeType){var h=f.nodeName.split(":").pop();if(-1===o.indexOf(h)){var c="",l=0,v=f.namespaceURI;for(var d in u){if(u[d]===v){c=d;break}++l}c||(u[c="p"+l]=v),o.push(c+":"+h)}}}"featureMember"!=r&&(e.featureType=o,e.featureNS=u)}if("string"==typeof u){var p=u;(u={}).p0=p}var y={},w=Array.isArray(o)?o:[o];for(var m in u){var b={};for(s=0,a=w.length;s<a;++s){(-1===w[s].indexOf(":")?"p0":w[s].split(":")[0])===m&&(b[w[s].split(":").pop()]="featureMembers"==r?Sc(this.readFeatureElement,this):Mc(this.readFeatureElement,this))}y[u[m]]=b}i=Rc("featureMember"==r||"member"==r?void 0:[],y,t,n)}return null===i&&(i=[]),i},n.prototype.readGeometryOrExtent=function(t,n){var r=n[0];return r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Rc(null,this.GEOMETRY_PARSERS,t,n,this)},n.prototype.readExtentElement=function(t,n){var r=n[0],i=this.readGeometryOrExtent(t,n);return i?Sj(i,r):void 0},n.prototype.readGeometryElement=function(t,n){var r=n[0],i=this.readGeometryOrExtent(t,n);return i?Oj(i,!1,r):void 0},n.prototype.readFeatureElementInternal=function(t,n,r){for(var i,e={},o=t.firstElementChild;o;o=o.nextElementSibling){var u=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(u=bc(o,!1),hk.test(u)&&(u=void 0)):(r&&(u="boundedBy"===s?this.readExtentElement(o,n):this.readGeometryElement(o,n)),u?"boundedBy"!==s&&(i=s):u=this.readFeatureElementInternal(o,n,!1));var a=o.attributes.length;if(a>0){u={$p:u};for(var f=0;f<a;f++){u[o.attributes[f].name]=o.attributes[f].value}}e[s]?(e[s]instanceof Array||(e[s]=[e[s]]),e[s].push(u)):e[s]=u}if(r){var h=new Et(e);i&&h.setGeometryName(i);var c=t.getAttribute("fid")||_c(t,this.namespace,"id");return c&&h.setId(c),h}return e},n.prototype.readFeatureElement=function(t,n){return this.readFeatureElementInternal(t,n,!0)},n.prototype.readPoint=function(t,n){var r=this.readFlatCoordinatesFromNode(t,n);if(r)return new Te(r,kt)},n.prototype.readMultiPoint=function(t,n){var r=Rc([],this.MULTIPOINT_PARSERS,t,n,this);return r?new W_(r):void 0},n.prototype.readMultiLineString=function(t,n){var r=Rc([],this.MULTILINESTRING_PARSERS,t,n,this);if(r)return new tj(r)},n.prototype.readMultiPolygon=function(t,n){var r=Rc([],this.MULTIPOLYGON_PARSERS,t,n,this);if(r)return new ij(r)},n.prototype.pointMemberParser=function(t,n){Lc(this.POINTMEMBER_PARSERS,t,n,this)},n.prototype.lineStringMemberParser=function(t,n){Lc(this.LINESTRINGMEMBER_PARSERS,t,n,this)},n.prototype.polygonMemberParser=function(t,n){Lc(this.POLYGONMEMBER_PARSERS,t,n,this)},n.prototype.readLineString=function(t,n){var r=this.readFlatCoordinatesFromNode(t,n);return r?new J_(r,kt):void 0},n.prototype.readFlatLinearRing=function(t,n){var r=Rc(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);return r||void 0},n.prototype.readLinearRing=function(t,n){var r=this.readFlatCoordinatesFromNode(t,n);if(r)return new Me(r,kt)},n.prototype.readPolygon=function(t,n){var r=Rc([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(r&&r[0]){var i,e=r[0],o=[e.length],u=void 0;for(u=1,i=r.length;u<i;++u)b(e,r[u]),o.push(e.length);return new Ke(e,kt,o)}},n.prototype.readFlatCoordinatesFromNode=function(t,n){return Rc(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.readGeometryFromNode=function(t,n){var r=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return r||null},n.prototype.readFeaturesFromNode=function(t,n){var r={featureType:this.featureType,featureNS:this.featureNS};return n&&k(r,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[r])||[]},n.prototype.readProjectionFromNode=function(t){return gi(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},n}(sk);ck.prototype.namespace=fk,ck.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},ck.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},ck.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},ck.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Sc(ck.prototype.pointMemberParser),pointMembers:Sc(ck.prototype.pointMemberParser)}},ck.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Sc(ck.prototype.lineStringMemberParser),lineStringMembers:Sc(ck.prototype.lineStringMemberParser)}},ck.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Sc(ck.prototype.polygonMemberParser),polygonMembers:Sc(ck.prototype.polygonMemberParser)}},ck.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Sc(ck.prototype.readFlatCoordinatesFromNode)}},ck.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Sc(ck.prototype.readLineString)}},ck.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Sc(ck.prototype.readPolygon)}},ck.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Mc(ck.prototype.readFlatLinearRing)}};var lk=ck;function vk(t){return dk(bc(t,!1))}function dk(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0}function pk(t){var n=bc(t,!1),r=Date.parse(n);return isNaN(r)?void 0:r/1e3}function yk(t){return wk(bc(t,!1))}function wk(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0}function mk(t){return bk(bc(t,!1))}function bk(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0}function gk(t){return bc(t,!1).trim()}function xk(t,n){Mk(t,n?"1":"0")}function _k(t,n){t.appendChild(qc().createCDATASection(n))}function jk(t,n){var r=new Date(1e3*n),i=r.getUTCFullYear()+"-"+Wr(r.getUTCMonth()+1,2)+"-"+Wr(r.getUTCDate(),2)+"T"+Wr(r.getUTCHours(),2)+":"+Wr(r.getUTCMinutes(),2)+":"+Wr(r.getUTCSeconds(),2)+"Z";t.appendChild(qc().createTextNode(i))}function Ok(t,n){var r=n.toPrecision();t.appendChild(qc().createTextNode(r))}function Sk(t,n){var r=n.toString();t.appendChild(qc().createTextNode(r))}function Mk(t,n){t.appendChild(qc().createTextNode(n))}var Ek=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Tk={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},kk=function(t){function n(n){var r=this,i=n||{};return(r=t.call(this,i)||this).FEATURE_COLLECTION_PARSERS[fk].featureMember=Sc(r.readFeaturesInternal),r.schemaLocation=i.schemaLocation?i.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",r}return Ek(n,t),n.prototype.readFlatCoordinates=function(t,n){var r=bc(t,!1).replace(/^\s*|\s*$/g,""),i=n[0].srsName,e="enu";if(i){var o=gi(i);o&&(e=o.getAxisOrientation())}for(var u=r.trim().split(/\s+/),s=[],a=0,f=u.length;a<f;a++){var h=u[a].split(/,+/),c=parseFloat(h[0]),l=parseFloat(h[1]),v=3===h.length?parseFloat(h[2]):0;"en"===e.substr(0,2)?s.push(c,l,v):s.push(l,c,v)}return s},n.prototype.readBox=function(t,n){var r=Rc([null],this.Jp,t,n,this);return An(r[1][0],r[1][1],r[1][3],r[1][4])},n.prototype.innerBoundaryIsParser=function(t,n){var r=Rc(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)},n.prototype.outerBoundaryIsParser=function(t,n){var r=Rc(void 0,this.RING_PARSERS,t,n,this);r&&(n[n.length-1][0]=r)},n.prototype.Qp=function(t,n,r){var i,e=n[n.length-1],o=e.multiSurface,u=e.surface,s=e.multiCurve;return Array.isArray(t)?i="Envelope":"MultiPolygon"===(i=t.getType())&&!0===o?i="MultiSurface":"Polygon"===i&&!0===u?i="Surface":"MultiLineString"===i&&!0===s&&(i="MultiCurve"),mc("http://www.opengis.net/gml",i)},n.prototype.writeFeatureElement=function(t,n,r){var i=n.getId();i&&t.setAttribute("fid",i);var e=r[r.length-1],o=e.featureNS,u=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var s=[],a=[];if(n.hasProperties()){var f=n.getProperties();for(var h in f){var c=f[h];null!==c&&(s.push(h),a.push(c),h==u||"function"==typeof c.getSimplifiedGeometry?h in e.serializers[o]||(e.serializers[o][h]=kc(this.writeGeometryElement,this)):h in e.serializers[o]||(e.serializers[o][h]=kc(Mk)))}}var l=k({},e);l.node=t,zc(l,e.serializers,Cc(void 0,o),a,r,s)},n.prototype.writeCurveOrLineString=function(t,n,r){var i=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=this.ty(t.namespaceURI);t.appendChild(e),this.ny(e,n,r)}else if("Curve"===t.nodeName){var o=mc(t.namespaceURI,"segments");t.appendChild(o),this.iy(o,n,r)}},n.prototype.writeLineStringOrCurveMember=function(t,n,r){var i=this.Qp(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))},n.prototype.writeMultiCurveOrLineString=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=i.srsName,u=i.curve;o&&t.setAttribute("srsName",o);var s=n.getLineStrings();zc({node:t,hasZ:e,srsName:o,curve:u},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.ey,s,r,void 0,this)},n.prototype.writeGeometryElement=function(t,n,r){var i,e=r[r.length-1],o=k({},e);o.node=t,i=Array.isArray(n)?Sj(n,e):Oj(n,!0,e),zc(o,this.GEOMETRY_SERIALIZERS,this.Qp,[i],r,void 0,this)},n.prototype.ty=function(t){var n=mc(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n},n.prototype.ny=function(t,n,r){for(var i=r[r.length-1],e=i.hasZ,o=i.srsName,u=n.getCoordinates(),s=u.length,a=new Array(s),f=0;f<s;++f){var h=u[f];a[f]=this.oy(h,o,e)}Mk(t,a.join(" "))},n.prototype.iy=function(t,n,r){var i=mc(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)},n.prototype.writeSurfaceOrPolygon=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=i.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var u=n.getLinearRings();zc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.uy,u,r,void 0,this)}else if("Surface"===t.nodeName){var s=mc(t.namespaceURI,"patches");t.appendChild(s),this.sy(s,n,r)}},n.prototype.uy=function(t,n,r){var i=n[n.length-1],e=i.node,o=i.exteriorWritten;return void 0===o&&(i.exteriorWritten=!0),mc(e.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},n.prototype.sy=function(t,n,r){var i=mc(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)},n.prototype.writeRing=function(t,n,r){var i=mc(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)},n.prototype.oy=function(t,n,r){var i="enu";n&&(i=gi(n).getAxisOrientation());var e="en"===i.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];r&&(e+=","+(t[2]||0));return e},n.prototype.writePoint=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);var u=this.ty(t.namespaceURI);t.appendChild(u);var s=n.getCoordinates();Mk(u,this.oy(s,o,e))},n.prototype.writeMultiPoint=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);var u=n.getPoints();zc({node:t,hasZ:e,srsName:o},this.POINTMEMBER_SERIALIZERS,Cc("pointMember"),u,r,void 0,this)},n.prototype.writePointMember=function(t,n,r){var i=mc(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)},n.prototype.writeLinearRing=function(t,n,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var e=this.ty(t.namespaceURI);t.appendChild(e),this.ny(e,n,r)},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=i.srsName,u=i.surface;o&&t.setAttribute("srsName",o);var s=n.getPolygons();zc({node:t,hasZ:e,srsName:o,surface:u},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.ey,s,r,void 0,this)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,r){var i=this.Qp(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))},n.prototype.writeEnvelope=function(t,n,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];zc({node:t},this.ENVELOPE_SERIALIZERS,Pc,e,r,["lowerCorner","upperCorner"],this)},n.prototype.ey=function(t,n,r){var i=n[n.length-1].node;return mc("http://www.opengis.net/gml",Tk[i.nodeName])},n}(lk);kk.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Mc(kk.prototype.readFlatCoordinates)}},kk.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:kk.prototype.innerBoundaryIsParser,outerBoundaryIs:kk.prototype.outerBoundaryIsParser}},kk.prototype.Jp={"http://www.opengis.net/gml":{coordinates:Sc(kk.prototype.readFlatCoordinates)}},kk.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Mc(lk.prototype.readPoint),MultiPoint:Mc(lk.prototype.readMultiPoint),LineString:Mc(lk.prototype.readLineString),MultiLineString:Mc(lk.prototype.readMultiLineString),LinearRing:Mc(lk.prototype.readLinearRing),Polygon:Mc(lk.prototype.readPolygon),MultiPolygon:Mc(lk.prototype.readMultiPolygon),Box:Mc(kk.prototype.readBox)}},kk.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:kc(kk.prototype.writeCurveOrLineString),MultiCurve:kc(kk.prototype.writeMultiCurveOrLineString),Point:kc(kk.prototype.writePoint),MultiPoint:kc(kk.prototype.writeMultiPoint),LineString:kc(kk.prototype.writeCurveOrLineString),MultiLineString:kc(kk.prototype.writeMultiCurveOrLineString),LinearRing:kc(kk.prototype.writeLinearRing),Polygon:kc(kk.prototype.writeSurfaceOrPolygon),MultiPolygon:kc(kk.prototype.writeMultiSurfaceOrPolygon),Surface:kc(kk.prototype.writeSurfaceOrPolygon),MultiSurface:kc(kk.prototype.writeMultiSurfaceOrPolygon),Envelope:kc(kk.prototype.writeEnvelope)}},kk.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:kc(kk.prototype.writeLineStringOrCurveMember),curveMember:kc(kk.prototype.writeLineStringOrCurveMember)}},kk.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:kc(kk.prototype.writeRing),innerBoundaryIs:kc(kk.prototype.writeRing)}},kk.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:kc(kk.prototype.writePointMember)}},kk.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:kc(kk.prototype.writeSurfaceOrPolygonMember),polygonMember:kc(kk.prototype.writeSurfaceOrPolygonMember)}},kk.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:kc(Mk),upperCorner:kc(Mk)}};var Ak=kk,Ck=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Pk={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Nk=function(t){function n(n){var r=this,i=n||{};return(r=t.call(this,i)||this).hy=void 0!==i.surface&&i.surface,r.ly=void 0!==i.curve&&i.curve,r.vy=void 0===i.multiCurve||i.multiCurve,r.py=void 0===i.multiSurface||i.multiSurface,r.schemaLocation=i.schemaLocation?i.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",r.hasZ=void 0!==i.hasZ&&i.hasZ,r}return Ck(n,t),n.prototype.readMultiCurve=function(t,n){var r=Rc([],this.MULTICURVE_PARSERS,t,n,this);return r?new tj(r):void 0},n.prototype.readFlatCurveRing=function(t,n){for(var r=Rc([],this.MULTICURVE_PARSERS,t,n,this),i=[],e=0,o=r.length;e<o;++e)b(i,r[e].getFlatCoordinates());return i},n.prototype.readMultiSurface=function(t,n){var r=Rc([],this.MULTISURFACE_PARSERS,t,n,this);if(r)return new ij(r)},n.prototype.curveMemberParser=function(t,n){Lc(this.CURVEMEMBER_PARSERS,t,n,this)},n.prototype.surfaceMemberParser=function(t,n){Lc(this.SURFACEMEMBER_PARSERS,t,n,this)},n.prototype.readPatch=function(t,n){return Rc([null],this.PATCHES_PARSERS,t,n,this)},n.prototype.readSegment=function(t,n){return Rc([],this.SEGMENTS_PARSERS,t,n,this)},n.prototype.readPolygonPatch=function(t,n){return Rc([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)},n.prototype.readLineStringSegment=function(t,n){return Rc([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.interiorParser=function(t,n){var r=Rc(void 0,this.RING_PARSERS,t,n,this);r&&n[n.length-1].push(r)},n.prototype.exteriorParser=function(t,n){var r=Rc(void 0,this.RING_PARSERS,t,n,this);r&&(n[n.length-1][0]=r)},n.prototype.readSurface=function(t,n){var r=Rc([null],this.SURFACE_PARSERS,t,n,this);if(r&&r[0]){var i,e=r[0],o=[e.length],u=void 0;for(u=1,i=r.length;u<i;++u)b(e,r[u]),o.push(e.length);return new Ke(e,kt,o)}},n.prototype.readCurve=function(t,n){var r=Rc([null],this.CURVE_PARSERS,t,n,this);return r?new J_(r,kt):void 0},n.prototype.readEnvelope=function(t,n){var r=Rc([null],this.ENVELOPE_PARSERS,t,n,this);return An(r[1][0],r[1][1],r[2][0],r[2][1])},n.prototype.readFlatPos=function(t,n){for(var r,i=bc(t,!1),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=e.exec(i);)o.push(parseFloat(r[1])),i=i.substr(r[0].length);if(""===i){var u=n[0].srsName,s="enu";if(u)s=gi(u).getAxisOrientation();if("neu"===s){var a,f=void 0;for(f=0,a=o.length;f<a;f+=3){var h=o[f],c=o[f+1];o[f]=c,o[f+1]=h}}var l=o.length;if(2==l&&o.push(0),0!==l)return o}},n.prototype.readFlatPosList=function(t,n){var r=bc(t,!1).replace(/^\s*|\s*$/g,""),i=n[0],e=i.srsName,o=i.srsDimension,u="enu";e&&(u=gi(e).getAxisOrientation());var s,a,f,h=r.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=bk(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=bk(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=bk(t.parentNode.getAttribute("srsDimension")):o&&(c=bk(o));for(var l=[],v=0,d=h.length;v<d;v+=c)s=parseFloat(h[v]),a=parseFloat(h[v+1]),f=3===c?parseFloat(h[v+2]):0,"en"===u.substr(0,2)?l.push(s,a,f):l.push(a,s,f);return l},n.prototype.yy=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);var u=i.srsName,s="enu";u&&(s=gi(u).getAxisOrientation());var a,f=n.getCoordinates();(a="en"===s.substr(0,2)?f[0]+" "+f[1]:f[1]+" "+f[0],e)&&(a+=" "+(f[2]||0));Mk(t,a)},n.prototype.oy=function(t,n,r){var i="enu";n&&(i=gi(n).getAxisOrientation());var e="en"===i.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];r&&(e+=" "+(t[2]||0));return e},n.prototype.wy=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);for(var u,s=i.srsName,a=n.getCoordinates(),f=a.length,h=new Array(f),c=0;c<f;++c)u=a[c],h[c]=this.oy(u,s,e);Mk(t,h.join(" "))},n.prototype.writePoint=function(t,n,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var e=mc(t.namespaceURI,"pos");t.appendChild(e),this.yy(e,n,r)},n.prototype.writeEnvelope=function(t,n,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];zc({node:t},this.ENVELOPE_SERIALIZERS,Pc,e,r,["lowerCorner","upperCorner"],this)},n.prototype.writeLinearRing=function(t,n,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var e=mc(t.namespaceURI,"posList");t.appendChild(e),this.wy(e,n,r)},n.prototype.uy=function(t,n,r){var i=n[n.length-1],e=i.node,o=i.exteriorWritten;return void 0===o&&(i.exteriorWritten=!0),mc(e.namespaceURI,void 0!==o?"interior":"exterior")},n.prototype.writeSurfaceOrPolygon=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=i.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var u=n.getLinearRings();zc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.uy,u,r,void 0,this)}else if("Surface"===t.nodeName){var s=mc(t.namespaceURI,"patches");t.appendChild(s),this.sy(s,n,r)}},n.prototype.writeCurveOrLineString=function(t,n,r){var i=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=mc(t.namespaceURI,"posList");t.appendChild(e),this.wy(e,n,r)}else if("Curve"===t.nodeName){var o=mc(t.namespaceURI,"segments");t.appendChild(o),this.iy(o,n,r)}},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=i.srsName,u=i.surface;o&&t.setAttribute("srsName",o);var s=n.getPolygons();zc({node:t,hasZ:e,srsName:o,surface:u},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.ey,s,r,void 0,this)},n.prototype.writeMultiPoint=function(t,n,r){var i=r[r.length-1],e=i.srsName,o=i.hasZ;e&&t.setAttribute("srsName",e);var u=n.getPoints();zc({node:t,hasZ:o,srsName:e},this.POINTMEMBER_SERIALIZERS,Cc("pointMember"),u,r,void 0,this)},n.prototype.writeMultiCurveOrLineString=function(t,n,r){var i=r[r.length-1],e=i.hasZ,o=i.srsName,u=i.curve;o&&t.setAttribute("srsName",o);var s=n.getLineStrings();zc({node:t,hasZ:e,srsName:o,curve:u},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.ey,s,r,void 0,this)},n.prototype.writeRing=function(t,n,r){var i=mc(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,n,r)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,r){var i=this.Qp(n,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))},n.prototype.writePointMember=function(t,n,r){var i=mc(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,n,r)},n.prototype.writeLineStringOrCurveMember=function(t,n,r){var i=this.Qp(n,r);i&&(t.appendChild(i),this.writeCurveOrLineString(i,n,r))},n.prototype.sy=function(t,n,r){var i=mc(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)},n.prototype.iy=function(t,n,r){var i=mc(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,n,r)},n.prototype.writeGeometryElement=function(t,n,r){var i,e=r[r.length-1],o=k({},e);o.node=t,i=Array.isArray(n)?Sj(n,e):Oj(n,!0,e),zc(o,this.GEOMETRY_SERIALIZERS,this.Qp,[i],r,void 0,this)},n.prototype.writeFeatureElement=function(t,n,r){var i=n.getId();i&&t.setAttribute("fid",i);var e=r[r.length-1],o=e.featureNS,u=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var s=[],a=[];if(n.hasProperties()){var f=n.getProperties();for(var h in f){var c=f[h];null!==c&&(s.push(h),a.push(c),h==u||"function"==typeof c.getSimplifiedGeometry?h in e.serializers[o]||(e.serializers[o][h]=kc(this.writeGeometryElement,this)):h in e.serializers[o]||(e.serializers[o][h]=kc(Mk)))}}var l=k({},e);l.node=t,zc(l,e.serializers,Cc(void 0,o),a,r,s)},n.prototype.my=function(t,n,r){var i=r[r.length-1],e=i.featureType,o=i.featureNS,u={};u[o]={},u[o][e]=kc(this.writeFeatureElement,this);var s=k({},i);s.node=t,zc(s,u,Cc(e,o),n,r)},n.prototype.ey=function(t,n,r){var i=n[n.length-1].node;return mc(this.namespace,Pk[i.nodeName])},n.prototype.Qp=function(t,n,r){var i,e=n[n.length-1],o=e.multiSurface,u=e.surface,s=e.curve,a=e.multiCurve;return Array.isArray(t)?i="Envelope":"MultiPolygon"===(i=t.getType())&&!0===o?i="MultiSurface":"Polygon"===i&&!0===u?i="Surface":"LineString"===i&&!0===s?i="Curve":"MultiLineString"===i&&!0===a&&(i="MultiCurve"),mc(this.namespace,i)},n.prototype.writeGeometryNode=function(t,n){n=this.adaptOptions(n);var r=mc(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.ly,surface:this.hy,multiSurface:this.py,multiCurve:this.vy};return n&&k(i,n),this.writeGeometryElement(r,t,[i]),r},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var r=mc(this.namespace,"featureMembers");r.setAttributeNS(wc,"xsi:schemaLocation",this.schemaLocation);var i={srsName:this.srsName,hasZ:this.hasZ,curve:this.ly,surface:this.hy,multiSurface:this.py,multiCurve:this.vy,featureNS:this.featureNS,featureType:this.featureType};return n&&k(i,n),this.my(r,t,[i]),r},n}(lk);Nk.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Mc(Nk.prototype.readFlatPos),posList:Mc(Nk.prototype.readFlatPosList),coordinates:Mc(Ak.prototype.readFlatCoordinates)}},Nk.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Nk.prototype.interiorParser,exterior:Nk.prototype.exteriorParser}},Nk.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Mc(lk.prototype.readPoint),MultiPoint:Mc(lk.prototype.readMultiPoint),LineString:Mc(lk.prototype.readLineString),MultiLineString:Mc(lk.prototype.readMultiLineString),LinearRing:Mc(lk.prototype.readLinearRing),Polygon:Mc(lk.prototype.readPolygon),MultiPolygon:Mc(lk.prototype.readMultiPolygon),Surface:Mc(Nk.prototype.readSurface),MultiSurface:Mc(Nk.prototype.readMultiSurface),Curve:Mc(Nk.prototype.readCurve),MultiCurve:Mc(Nk.prototype.readMultiCurve),Envelope:Mc(Nk.prototype.readEnvelope)}},Nk.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Sc(Nk.prototype.curveMemberParser),curveMembers:Sc(Nk.prototype.curveMemberParser)}},Nk.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Sc(Nk.prototype.surfaceMemberParser),surfaceMembers:Sc(Nk.prototype.surfaceMemberParser)}},Nk.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Sc(lk.prototype.readLineString),Curve:Sc(Nk.prototype.readCurve)}},Nk.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Sc(lk.prototype.readPolygon),Surface:Sc(Nk.prototype.readSurface)}},Nk.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Mc(Nk.prototype.readPatch)}},Nk.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Mc(Nk.prototype.readSegment)}},Nk.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Sc(Nk.prototype.readFlatPosList),upperCorner:Sc(Nk.prototype.readFlatPosList)}},Nk.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Mc(Nk.prototype.readPolygonPatch)}},Nk.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:Oc(Nk.prototype.readLineStringSegment)}},lk.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Mc(lk.prototype.readFlatLinearRing),Ring:Mc(Nk.prototype.readFlatCurveRing)}},Nk.prototype.writeFeatures,Nk.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:kc(Nk.prototype.writeRing),interior:kc(Nk.prototype.writeRing)}},Nk.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:kc(Mk),upperCorner:kc(Mk)}},Nk.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:kc(Nk.prototype.writeSurfaceOrPolygonMember),polygonMember:kc(Nk.prototype.writeSurfaceOrPolygonMember)}},Nk.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:kc(Nk.prototype.writePointMember)}},Nk.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:kc(Nk.prototype.writeLineStringOrCurveMember),curveMember:kc(Nk.prototype.writeLineStringOrCurveMember)}},Nk.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:kc(Nk.prototype.writeCurveOrLineString),MultiCurve:kc(Nk.prototype.writeMultiCurveOrLineString),Point:kc(Nk.prototype.writePoint),MultiPoint:kc(Nk.prototype.writeMultiPoint),LineString:kc(Nk.prototype.writeCurveOrLineString),MultiLineString:kc(Nk.prototype.writeMultiCurveOrLineString),LinearRing:kc(Nk.prototype.writeLinearRing),Polygon:kc(Nk.prototype.writeSurfaceOrPolygon),MultiPolygon:kc(Nk.prototype.writeMultiSurfaceOrPolygon),Surface:kc(Nk.prototype.writeSurfaceOrPolygon),MultiSurface:kc(Nk.prototype.writeMultiSurfaceOrPolygon),Envelope:kc(Nk.prototype.writeEnvelope)}};var Ik=Nk,Lk=Ik;Lk.prototype.writeFeatures,Lk.prototype.writeFeaturesNode;var Rk=Lk,Gk=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),zk=function(t){function n(n){var r=this,i=n||{};return(r=t.call(this,i)||this).schemaLocation=i.schemaLocation?i.schemaLocation:r.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",r}return Gk(n,t),n}(Ik);zk.prototype.namespace="http://www.opengis.net/gml/3.2",zk.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Mc(Ik.prototype.readFlatPos),posList:Mc(Ik.prototype.readFlatPosList),coordinates:Mc(Ak.prototype.readFlatCoordinates)}},zk.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:Ik.prototype.interiorParser,exterior:Ik.prototype.exteriorParser}},zk.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Mc(lk.prototype.readPoint),MultiPoint:Mc(lk.prototype.readMultiPoint),LineString:Mc(lk.prototype.readLineString),MultiLineString:Mc(lk.prototype.readMultiLineString),LinearRing:Mc(lk.prototype.readLinearRing),Polygon:Mc(lk.prototype.readPolygon),MultiPolygon:Mc(lk.prototype.readMultiPolygon),Surface:Mc(zk.prototype.readSurface),MultiSurface:Mc(Ik.prototype.readMultiSurface),Curve:Mc(zk.prototype.readCurve),MultiCurve:Mc(Ik.prototype.readMultiCurve),Envelope:Mc(zk.prototype.readEnvelope)}},zk.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Sc(Ik.prototype.curveMemberParser),curveMembers:Sc(Ik.prototype.curveMemberParser)}},zk.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Sc(Ik.prototype.surfaceMemberParser),surfaceMembers:Sc(Ik.prototype.surfaceMemberParser)}},zk.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Sc(lk.prototype.readLineString),Curve:Sc(Ik.prototype.readCurve)}},zk.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Sc(lk.prototype.readPolygon),Surface:Sc(Ik.prototype.readSurface)}},zk.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Mc(Ik.prototype.readPatch)}},zk.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Mc(Ik.prototype.readSegment)}},zk.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Sc(Ik.prototype.readFlatPosList),upperCorner:Sc(Ik.prototype.readFlatPosList)}},zk.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Mc(Ik.prototype.readPolygonPatch)}},zk.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:Oc(Ik.prototype.readLineStringSegment)}},zk.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Sc(lk.prototype.pointMemberParser),pointMembers:Sc(lk.prototype.pointMemberParser)}},zk.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Sc(lk.prototype.lineStringMemberParser),lineStringMembers:Sc(lk.prototype.lineStringMemberParser)}},zk.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Sc(lk.prototype.polygonMemberParser),polygonMembers:Sc(lk.prototype.polygonMemberParser)}},zk.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Sc(lk.prototype.readFlatCoordinatesFromNode)}},zk.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Sc(lk.prototype.readLineString)}},zk.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Sc(lk.prototype.readPolygon)}},zk.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Mc(lk.prototype.readFlatLinearRing),Ring:Mc(zk.prototype.readFlatCurveRing)}},zk.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:kc(Ik.prototype.writeRing),interior:kc(Ik.prototype.writeRing)}},zk.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:kc(Mk),upperCorner:kc(Mk)}},zk.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:kc(Ik.prototype.writeSurfaceOrPolygonMember),polygonMember:kc(Ik.prototype.writeSurfaceOrPolygonMember)}},zk.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:kc(Ik.prototype.writePointMember)}},zk.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:kc(Ik.prototype.writeLineStringOrCurveMember),curveMember:kc(Ik.prototype.writeLineStringOrCurveMember)}},zk.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:kc(Ik.prototype.writeCurveOrLineString),MultiCurve:kc(Ik.prototype.writeMultiCurveOrLineString),Point:kc(zk.prototype.writePoint),MultiPoint:kc(Ik.prototype.writeMultiPoint),LineString:kc(Ik.prototype.writeCurveOrLineString),MultiLineString:kc(Ik.prototype.writeMultiCurveOrLineString),LinearRing:kc(Ik.prototype.writeLinearRing),Polygon:kc(Ik.prototype.writeSurfaceOrPolygon),MultiPolygon:kc(Ik.prototype.writeMultiSurfaceOrPolygon),Surface:kc(Ik.prototype.writeSurfaceOrPolygon),MultiSurface:kc(Ik.prototype.writeMultiSurfaceOrPolygon),Envelope:kc(Ik.prototype.writeEnvelope)}};var Fk=zk,Dk=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Uk=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],qk={rte:yA,trk:wA,wpt:mA},Bk=Ic(Uk,{rte:Sc(yA),trk:Sc(wA),wpt:Sc(mA)}),Xk=Ic(Uk,{text:Tc(gk,"linkText"),type:Tc(gk,"linkType")}),Vk=Ic(Uk,{rte:kc((function(t,n,r){var i=r[0],e=n.getProperties(),o={node:t};o.properties=e;var u=n.getGeometry();if(u.getType()==Pt.LINE_STRING){var s=Oj(u,!0,i);o.geometryLayout=s.getLayout(),e.rtept=s.getCoordinates()}var a=r[r.length-1].node,f=nA[a.namespaceURI],h=Nc(e,f);zc(o,rA,Pc,h,r,f)})),trk:kc((function(t,n,r){var i=r[0],e=n.getProperties(),o={node:t};o.properties=e;var u=n.getGeometry();if(u.getType()==Pt.MULTI_LINE_STRING){var s=Oj(u,!0,i);e.trkseg=s.getLineStrings()}var a=r[r.length-1].node,f=eA[a.namespaceURI],h=Nc(e,f);zc(o,oA,Pc,h,r,f)})),wpt:kc((function(t,n,r){var i=r[0],e=r[r.length-1];e.properties=n.getProperties();var o=n.getGeometry();if(o.getType()==Pt.POINT){var u=Oj(o,!0,i);e.geometryLayout=u.getLayout(),gA(t,u.getCoordinates(),r)}}))}),Yk=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.dataProjection=gi("EPSG:4326"),r.gy=i.readExtensions,r}return Dk(n,t),n.prototype.xy=function(t){t||(t=[]);for(var n=0,r=t.length;n<r;++n){var i=t[n];if(this.gy){var e=i.get("extensionsNode_")||null;this.gy(i,e)}i.set("extensionsNode_",void 0)}},n.prototype.readFeatureFromNode=function(t,n){if(!y(Uk,t.namespaceURI))return null;var r=qk[t.localName];if(!r)return null;var i=r(t,[this.getReadOptions(t,n)]);return i?(this.xy([i]),i):null},n.prototype.readFeaturesFromNode=function(t,n){if(!y(Uk,t.namespaceURI))return[];if("gpx"==t.localName){var r=Rc([],Bk,t,[this.getReadOptions(t,n)]);return r?(this.xy(r),r):[]}return[]},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var r=mc("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",wc),r.setAttributeNS(wc,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),zc({node:r},Vk,cA,t,[n]),r},n}(sk),Wk=Ic(Uk,{name:Tc(gk),cmt:Tc(gk),desc:Tc(gk),src:Tc(gk),link:dA,number:Tc(mk),extensions:pA,type:Tc(gk),rtept:function(t,n){var r=Rc({},Zk,t,n);if(r){var i=n[n.length-1],e=i.flatCoordinates,o=i.layoutOptions;lA(e,o,t,r)}}}),Zk=Ic(Uk,{ele:Tc(yk),time:Tc(pk)}),Hk=Ic(Uk,{name:Tc(gk),cmt:Tc(gk),desc:Tc(gk),src:Tc(gk),link:dA,number:Tc(mk),type:Tc(gk),extensions:pA,trkseg:function(t,n){var r=n[n.length-1];Lc(Kk,t,n);var i=r.flatCoordinates;r.ends.push(i.length)}}),Kk=Ic(Uk,{trkpt:function(t,n){var r=Rc({},$k,t,n);if(r){var i=n[n.length-1],e=i.flatCoordinates,o=i.layoutOptions;lA(e,o,t,r)}}}),$k=Ic(Uk,{ele:Tc(yk),time:Tc(pk)}),Jk=Ic(Uk,{ele:Tc(yk),time:Tc(pk),magvar:Tc(yk),geoidheight:Tc(yk),name:Tc(gk),cmt:Tc(gk),desc:Tc(gk),src:Tc(gk),link:dA,sym:Tc(gk),type:Tc(gk),fix:Tc(gk),sat:Tc(mk),hdop:Tc(yk),vdop:Tc(yk),pdop:Tc(yk),ageofdgpsdata:Tc(yk),dgpsid:Tc(mk),extensions:pA}),Qk=["text","type"],tA=Ic(Uk,{text:kc(Mk),type:kc(Mk)}),nA=Ic(Uk,["name","cmt","desc","src","link","number","type","rtept"]),rA=Ic(Uk,{name:kc(Mk),cmt:kc(Mk),desc:kc(Mk),src:kc(Mk),link:kc(bA),number:kc(Sk),type:kc(Mk),rtept:Ac(kc(gA))}),iA=Ic(Uk,["ele","time"]),eA=Ic(Uk,["name","cmt","desc","src","link","number","type","trkseg"]),oA=Ic(Uk,{name:kc(Mk),cmt:kc(Mk),desc:kc(Mk),src:kc(Mk),link:kc(bA),number:kc(Sk),type:kc(Mk),trkseg:Ac(kc((function(t,n,r){var i={node:t};i.geometryLayout=n.getLayout(),i.properties={},zc(i,sA,uA,n.getCoordinates(),r)})))}),uA=Cc("trkpt"),sA=Ic(Uk,{trkpt:kc(gA)}),aA=Ic(Uk,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),fA=Ic(Uk,{ele:kc(Ok),time:kc(jk),magvar:kc(Ok),geoidheight:kc(Ok),name:kc(Mk),cmt:kc(Mk),desc:kc(Mk),src:kc(Mk),link:kc(bA),sym:kc(Mk),type:kc(Mk),fix:kc(Mk),sat:kc(Sk),hdop:kc(Ok),vdop:kc(Ok),pdop:kc(Ok),ageofdgpsdata:kc(Ok),dgpsid:kc(Sk)}),hA={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function cA(t,n,r){var i=t.getGeometry();if(i){var e=hA[i.getType()];if(e)return mc(n[n.length-1].node.namespaceURI,e)}}function lA(t,n,r,i){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in i?(t.push(i.ele),delete i.ele,n.hasZ=!0):t.push(0),"time"in i?(t.push(i.time),delete i.time,n.hasM=!0):t.push(0),t}function vA(t,n,r){var i=Tt,e=2;if(t.hasZ&&t.hasM?(i=Ct,e=4):t.hasZ?(i=kt,e=3):t.hasM&&(i=At,e=3),4!==e){for(var o=0,u=n.length/4;o<u;o++)n[o*e]=n[4*o],n[o*e+1]=n[4*o+1],t.hasZ&&(n[o*e+2]=n[4*o+2]),t.hasM&&(n[o*e+2]=n[4*o+3]);if(n.length=n.length/4*e,r)for(o=0,u=r.length;o<u;o++)r[o]=r[o]/4*e}return i}function dA(t,n){var r=n[n.length-1],i=t.getAttribute("href");null!==i&&(r.link=i),Lc(Xk,t,n)}function pA(t,n){n[n.length-1]._y=t}function yA(t,n){var r=n[0],i=Rc({flatCoordinates:[],layoutOptions:{}},Wk,t,n);if(i){var e=i.flatCoordinates;delete i.flatCoordinates;var o=i.layoutOptions;delete i.layoutOptions;var u=vA(o,e),s=new J_(e,u);Oj(s,!1,r);var a=new Et(s);return a.setProperties(i,!0),a}}function wA(t,n){var r=n[0],i=Rc({flatCoordinates:[],ends:[],layoutOptions:{}},Hk,t,n);if(i){var e=i.flatCoordinates;delete i.flatCoordinates;var o=i.ends;delete i.ends;var u=i.layoutOptions;delete i.layoutOptions;var s=vA(u,e,o),a=new tj(e,s,o);Oj(a,!1,r);var f=new Et(a);return f.setProperties(i,!0),f}}function mA(t,n){var r=n[0],i=Rc({},Jk,t,n);if(i){var e={},o=lA([],e,t,i),u=vA(e,o),s=new Te(o,u);Oj(s,!1,r);var a=new Et(s);return a.setProperties(i,!0),a}}function bA(t,n,r){t.setAttribute("href",n);var i=r[r.length-1].properties,e=[i.linkText,i.linkType];zc({node:t},tA,Pc,e,r,Qk)}function gA(t,n,r){var i=r[r.length-1],e=i.node.namespaceURI,o=i.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),i.geometryLayout){case Ct:0!==n[3]&&(o.time=n[3]);case kt:0!==n[2]&&(o.ele=n[2]);break;case At:0!==n[2]&&(o.time=n[2])}var u="rtept"==t.nodeName?iA[e]:aA[e],s=Nc(o,u);zc({node:t,properties:o},fA,Pc,s,r,u)}var xA=Yk,_A=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function jA(t){return"string"==typeof t?t:""}var OA=function(t){function n(){return t.call(this)||this}return _A(n,t),n.prototype.getType=function(){return ch},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(jA(t),this.adaptOptions(n))},n.prototype.readFeatureFromText=function(t,n){return i()},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(jA(t),this.adaptOptions(n))},n.prototype.readFeaturesFromText=function(t,n){return i()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(jA(t),this.adaptOptions(n))},n.prototype.readGeometryFromText=function(t,n){return i()},n.prototype.readProjection=function(t){return this.readProjectionFromText(jA(t))},n.prototype.readProjectionFromText=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){return i()},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))},n.prototype.writeFeaturesText=function(t,n){return i()},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n))},n.prototype.writeGeometryText=function(t,n){return i()},n}(jj),SA=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),MA="barometric",EA="gps",TA="none",kA=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,AA=/^H.([A-Z]{3}).*?:(.*)/,CA=/^HFDTE(\d{2})(\d{2})(\d{2})/,PA=/\r\n|\r|\n/,NA=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.dataProjection=gi("EPSG:4326"),r.jy=i.altitudeMode?i.altitudeMode:TA,r}return SA(n,t),n.prototype.readFeatureFromText=function(t,n){var r,i,e=this.jy,o=t.split(PA),u={},s=[],a=2e3,f=0,h=1,c=-1;for(r=0,i=o.length;r<i;++r){var l=o[r],v=void 0;if("B"==l.charAt(0)){if(v=kA.exec(l)){var d=parseInt(v[1],10),p=parseInt(v[2],10),y=parseInt(v[3],10),w=parseInt(v[4],10)+parseInt(v[5],10)/6e4;"S"==v[6]&&(w=-w);var m=parseInt(v[7],10)+parseInt(v[8],10)/6e4;if("W"==v[9]&&(m=-m),s.push(m,w),e!=TA){var b=void 0;b=e==EA?parseInt(v[11],10):e==MA?parseInt(v[12],10):0,s.push(b)}var g=Date.UTC(a,f,h,d,p,y);g<c&&(g=Date.UTC(a,f,h+1,d,p,y)),s.push(g/1e3),c=g}}else"H"==l.charAt(0)&&((v=CA.exec(l))?(h=parseInt(v[1],10),f=parseInt(v[2],10)-1,a=2e3+parseInt(v[3],10)):(v=AA.exec(l))&&(u[v[1]]=v[2].trim()))}if(0===s.length)return null;var x=new J_(s,e==TA?At:Ct),_=new Et(Oj(x,!1,n));return _.setProperties(u,!0),_},n.prototype.readFeaturesFromText=function(t,n){var r=this.readFeatureFromText(t,n);return r?[r]:[]},n}(OA);function IA(t){return(IA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var LA,RA,GA,zA,FA,DA,UA=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),qA=["http://www.google.com/kml/ext/2.2"],BA=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],XA={fraction:Pv,pixels:Nv,insetPixels:Nv},VA=Ic(BA,{ExtendedData:qC,Region:BC,MultiGeometry:Tc(NC,"geometry"),LineString:Tc(AC,"geometry"),LinearRing:Tc(CC,"geometry"),Point:Tc(IC,"geometry"),Polygon:Tc(RC,"geometry"),Style:Tc(zC),StyleMap:function(t,n){var r=yC.call(this,t,n);if(!r)return;var i=n[n.length-1];Array.isArray(r)?i.Style=r:"string"==typeof r?i.styleUrl=r:Ot(!1,38)},address:Tc(gk),description:Tc(gk),name:Tc(gk),open:Tc(vk),phoneNumber:Tc(gk),styleUrl:Tc(vC),visibility:Tc(vk)},Ic(qA,{MultiTrack:Tc((function(t,n){var r=Rc([],jC,t,n);if(!r)return;return new tj(r)}),"geometry"),Track:Tc(SC,"geometry")})),YA=Ic(BA,{ExtendedData:qC,Region:BC,Link:function(t,n){Lc(WA,t,n)},address:Tc(gk),description:Tc(gk),name:Tc(gk),open:Tc(vk),phoneNumber:Tc(gk),visibility:Tc(vk)}),WA=Ic(BA,{href:Tc(lC)}),ZA=Ic(BA,{LatLonAltBox:function(t,n){var r=Rc({},YC,t,n);if(!r)return;var i=n[n.length-1],e=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];i.extent=e,i.altitudeMode=r.altitudeMode,i.minAltitude=parseFloat(r.minAltitude),i.maxAltitude=parseFloat(r.maxAltitude)},Lod:function(t,n){var r=Rc({},WC,t,n);if(!r)return;var i=n[n.length-1];i.minLodPixels=parseFloat(r.minLodPixels),i.maxLodPixels=parseFloat(r.maxLodPixels),i.minFadeExtent=parseFloat(r.minFadeExtent),i.maxFadeExtent=parseFloat(r.maxFadeExtent)}}),HA=Ic(BA,["Document","Placemark"]),KA=Ic(BA,{Document:kc((function(t,n,r){zc({node:t},JC,QC,n,r,void 0,this)})),Placemark:kc(jP)}),$A=null;var JA,QA=null;var tC,nC=null;var rC=null;var iC=null;var eC,oC=null;function uC(t){return 32/Math.min(t[0],t[1])}function sC(t){return t}var aC=function(t){function n(n){var r=t.call(this)||this,i=n||{};return oC||($A=new Cv({color:LA=[255,255,255,1]}),DA="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",QA=new Xv({anchor:RA=[20,2],anchorOrigin:Iv,anchorXUnits:GA=Nv,anchorYUnits:zA=Nv,crossOrigin:"anonymous",rotation:0,scale:uC(FA=[64,64]),size:FA,src:DA}),JA="NO_IMAGE",nC=new Vv({color:LA,width:1}),tC=new Vv({color:[51,51,51,1],width:2}),rC=new rd({font:"bold 16px Helvetica",fill:$A,stroke:tC,scale:.8}),iC=new Qv({fill:$A,image:QA,text:rC,stroke:nC,zIndex:0}),oC=[iC]),r.dataProjection=gi("EPSG:4326"),r.Oy=i.defaultStyle?i.defaultStyle:oC,r.Sy=void 0===i.extractStyles||i.extractStyles,r.My=void 0===i.writeStyles||i.writeStyles,r.Ey={},r.Ty=void 0===i.showPointNames||i.showPointNames,r.Bt=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",r.ky=i.iconUrlFunction?i.iconUrlFunction:sC,r.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],r}return UA(n,t),n.prototype.Ay=function(t,n){var r=Rc([],Ic(BA,{Document:Oc(this.Ay,this),Folder:Oc(this.Ay,this),Placemark:Sc(this.Cy,this),Style:this.Py.bind(this),StyleMap:this.Ny.bind(this)}),t,n,this);return r||void 0},n.prototype.Cy=function(t,n){var r=Rc({geometry:null},VA,t,n,this);if(r){var i=new Et,e=t.getAttribute("id");null!==e&&i.setId(e);var o=n[0],u=r.geometry;if(u&&Oj(u,!1,o),i.setGeometry(u),delete r.geometry,this.Sy){var s=function(t,n,r,i,e){return function(o,u){var s=e,a="",f=[];if(s){var h=o.getGeometry();if(h)if(h instanceof Gj)s=(f=h.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.POINT||n===Pt.MULTI_POINT}))).length>0;else{var c=h.getType();s=c===Pt.POINT||c===Pt.MULTI_POINT}}s&&(a=o.get("name"),(s=s&&!!a)&&a.search(/&[^&]+;/)>-1&&(eC||(eC=document.createElement("textarea")),eC.innerHTML=a,a=eC.value));var l=r;if(t?l=t:n&&(l=fC(n,r,i)),s){var v=function(t,n){var r=[0,0],i="start",e=t.getImage();if(e){var o=e.getSize();if(o&&2==o.length){var u=e.getScaleArray(),s=e.getAnchor();r[0]=u[0]*(o[0]-s[0]),r[1]=u[1]*(o[1]/2-s[1]),i="left"}}var a=t.getText();a?((a=a.clone()).setFont(a.getFont()||rC.getFont()),a.setScale(a.getScale()||rC.getScale()),a.setFill(a.getFill()||rC.getFill()),a.setStroke(a.getStroke()||tC)):a=rC.clone();return a.setText(n),a.setOffsetX(r[0]),a.setOffsetY(r[1]),a.setTextAlign(i),new Qv({image:e,text:a})}(l[0],a);return f.length>0?(v.setGeometry(new Gj(f)),[v,new Qv({geometry:l[0].getGeometry(),image:null,fill:l[0].getFill(),stroke:l[0].getStroke(),text:null})].concat(l.slice(1))):v}return l}}(r.Style,r.styleUrl,this.Oy,this.Ey,this.Ty);i.setStyle(s)}return delete r.Style,i.setProperties(r,!0),i}},n.prototype.Py=function(t,n){var r=t.getAttribute("id");if(null!==r){var i=zC.call(this,t,n);if(i){var e=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+r,o).href;else e="#"+r;this.Ey[e]=i}}},n.prototype.Ny=function(t,n){var r=t.getAttribute("id");if(null!==r){var i=yC.call(this,t,n);if(i){var e,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+r,o).href;else e="#"+r;this.Ey[e]=i}}},n.prototype.readFeatureFromNode=function(t,n){if(!y(BA,t.namespaceURI))return null;var r=this.Cy(t,[this.getReadOptions(t,n)]);return r||null},n.prototype.readFeaturesFromNode=function(t,n){if(!y(BA,t.namespaceURI))return[];var r,i=t.localName;if("Document"==i||"Folder"==i)return(r=this.Ay(t,[this.getReadOptions(t,n)]))||[];if("Placemark"==i){var e=this.Cy(t,[this.getReadOptions(t,n)]);return e?[e]:[]}if("kml"==i){r=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var u=this.readFeaturesFromNode(o,n);u&&b(r,u)}return r}return[]},n.prototype.readName=function(t){if(t){if("string"==typeof t){var n=jc(t);return this.readNameFromDocument(n)}return xc(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},n.prototype.readNameFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(n);if(r)return r}},n.prototype.readNameFromNode=function(t){for(var n=t.firstElementChild;n;n=n.nextElementSibling)if(y(BA,n.namespaceURI)&&"name"==n.localName)return gk(n);for(n=t.firstElementChild;n;n=n.nextElementSibling){var r=n.localName;if(y(BA,n.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var i=this.readNameFromNode(n);if(i)return i}}},n.prototype.readNetworkLinks=function(t){var n=[];if("string"==typeof t){var r=jc(t);b(n,this.readNetworkLinksFromDocument(r))}else xc(t)?b(n,this.readNetworkLinksFromDocument(t)):b(n,this.readNetworkLinksFromNode(t));return n},n.prototype.readNetworkLinksFromDocument=function(t){for(var n=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&b(n,this.readNetworkLinksFromNode(r));return n},n.prototype.readNetworkLinksFromNode=function(t){for(var n=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(y(BA,r.namespaceURI)&&"NetworkLink"==r.localName){var i=Rc({},YA,r,[]);n.push(i)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var e=r.localName;!y(BA,r.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||b(n,this.readNetworkLinksFromNode(r))}return n},n.prototype.readRegion=function(t){var n=[];if("string"==typeof t){var r=jc(t);b(n,this.readRegionFromDocument(r))}else xc(t)?b(n,this.readRegionFromDocument(t)):b(n,this.readRegionFromNode(t));return n},n.prototype.readRegionFromDocument=function(t){for(var n=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&b(n,this.readRegionFromNode(r));return n},n.prototype.readRegionFromNode=function(t){for(var n=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(y(BA,r.namespaceURI)&&"Region"==r.localName){var i=Rc({},ZA,r,[]);n.push(i)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var e=r.localName;!y(BA,r.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||b(n,this.readRegionFromNode(r))}return n},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var r=mc(BA[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",qA[0]),r.setAttributeNS(i,"xmlns:xsi",wc),r.setAttributeNS(wc,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var e={node:r},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var u=HA[r.namespaceURI],s=Nc(o,u);return zc(e,KA,Pc,s,[n],u,this),r},n}(sk);function fC(t,n,r){return Array.isArray(t)?t:"string"==typeof t?fC(r[t],n,r):n}function hC(t){var n=bc(t,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(n);if(r){var i=r[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}}function cC(t){var n=bc(t,!1),r=[];n=n.replace(/\s*,\s*/g,",");for(var i,e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;i=e.exec(n);){var o=parseFloat(i[1]),u=parseFloat(i[2]),s=i[3]?parseFloat(i[3]):0;r.push(o,u,s),n=n.substr(i[0].length)}if(""===n)return r}function lC(t){var n=bc(t,!1).trim(),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(n,r).href:n}function vC(t){var n=bc(t,!1).trim().replace(/^(?!.*#)/,"#"),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(n,r).href:n}function dC(t){return yk(t)}var pC=Ic(BA,{Pair:function(t,n){var r=Rc({},XC,t,n,this);if(!r)return;var i=r.key;if(i&&"normal"==i){var e=r.styleUrl;e&&(n[n.length-1]=e);var o=r.Style;o&&(n[n.length-1]=o)}}});function yC(t,n){return Rc(void 0,pC,t,n,this)}var wC=Ic(BA,{Icon:Tc((function(t,n){var r=Rc({},MC,t,n);return r||null})),color:Tc(hC),heading:Tc(yk),hotSpot:Tc((function(t){var n,r=t.getAttribute("xunits"),i=t.getAttribute("yunits");return n="insetPixels"!==r?"insetPixels"!==i?Iv:Rv:"insetPixels"!==i?Lv:Gv,{x:parseFloat(t.getAttribute("x")),xunits:XA[r],y:parseFloat(t.getAttribute("y")),yunits:XA[i],origin:n}})),scale:Tc(dC)});var mC=Ic(BA,{color:Tc(hC),scale:Tc(dC)});var bC=Ic(BA,{color:Tc(hC),width:Tc(yk)});var gC=Ic(BA,{color:Tc(hC),fill:Tc(vk),outline:Tc(vk)});var xC=Ic(BA,{coordinates:Mc(cC)});function _C(t,n){return Rc(null,xC,t,n)}var jC=Ic(qA,{Track:Sc(SC)});var OC=Ic(BA,{when:function(t,n){var r=n[n.length-1].whens,i=bc(t,!1),e=Date.parse(i);r.push(isNaN(e)?0:e)}},Ic(qA,{coord:function(t,n){var r=n[n.length-1].coordinates,i=bc(t,!1),e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(e){var o=parseFloat(e[1]),u=parseFloat(e[2]),s=parseFloat(e[3]);r.push([o,u,s])}else r.push([])}}));function SC(t,n){var r=Rc({coordinates:[],whens:[]},OC,t,n);if(r){for(var i=[],e=r.coordinates,o=r.whens,u=0,s=Math.min(e.length,o.length);u<s;++u)3==e[u].length&&i.push(e[u][0],e[u][1],e[u][2],o[u]);return new J_(i,Ct)}}var MC=Ic(BA,{href:Tc(lC)},Ic(qA,{x:Tc(yk),y:Tc(yk),w:Tc(yk),h:Tc(yk)}));var EC=Ic(BA,{coordinates:Mc(cC)});function TC(t,n){return Rc(null,EC,t,n)}var kC=Ic(BA,{extrude:Tc(vk),tessellate:Tc(vk),altitudeMode:Tc(gk)});function AC(t,n){var r=Rc({},kC,t,n),i=TC(t,n);if(i){var e=new J_(i,kt);return e.setProperties(r,!0),e}}function CC(t,n){var r=Rc({},kC,t,n),i=TC(t,n);if(i){var e=new Ke(i,kt,[i.length]);return e.setProperties(r,!0),e}}var PC=Ic(BA,{LineString:Sc(AC),LinearRing:Sc(CC),MultiGeometry:Sc(NC),Point:Sc(IC),Polygon:Sc(RC)});function NC(t,n){var r,i=Rc([],PC,t,n);if(!i)return null;if(0===i.length)return new Gj(i);for(var e=!0,o=i[0].getType(),u=1,s=i.length;u<s;++u)if(i[u].getType()!=o){e=!1;break}if(e){var a=void 0,f=void 0;if(o==Pt.POINT){var h=i[0];a=h.getLayout(),f=h.getFlatCoordinates();for(u=1,s=i.length;u<s;++u)b(f,i[u].getFlatCoordinates());FC(r=new W_(f,a),i)}else o==Pt.LINE_STRING?FC(r=new tj(i),i):o==Pt.POLYGON?FC(r=new ij(i),i):o==Pt.GEOMETRY_COLLECTION?r=new Gj(i):Ot(!1,37)}else r=new Gj(i);return r}function IC(t,n){var r=Rc({},kC,t,n),i=TC(t,n);if(i){var e=new Te(i,kt);return e.setProperties(r,!0),e}}var LC=Ic(BA,{innerBoundaryIs:function(t,n){var r=Rc([],ZC,t,n);if(r.length>0){var i=n[n.length-1];i.push.apply(i,r)}},outerBoundaryIs:function(t,n){var r=Rc(void 0,HC,t,n);if(r){n[n.length-1][0]=r}}});function RC(t,n){var r=Rc({},kC,t,n),i=Rc([null],LC,t,n);if(i&&i[0]){for(var e=i[0],o=[e.length],u=1,s=i.length;u<s;++u)b(e,i[u]),o.push(e.length);var a=new Ke(e,kt,o);return a.setProperties(r,!0),a}}var GC=Ic(BA,{IconStyle:function(t,n){var r=Rc({},wC,t,n);if(r){var i,e,o,u,s=n[n.length-1],a="Icon"in r?r.Icon:{},f=!("Icon"in r)||Object.keys(a).length>0,h=a.href;h?i=h:f&&(i=DA);var c,l=Iv,v=r.hotSpot;v?(e=[v.x,v.y],o=v.xunits,u=v.yunits,l=v.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(i)&&(/pushpin/.test(i)?(e=RA,o=GA,u=zA):/arrow-reverse/.test(i)?(e=[54,42],o=GA,u=zA):/paddle/.test(i)&&(e=[32,1],o=GA,u=zA));var d,p=a.x,y=a.y;void 0!==p&&void 0!==y&&(c=[p,y]);var w,m=a.w,b=a.h;void 0!==m&&void 0!==b&&(d=[m,b]);var g=r.heading;void 0!==g&&(w=yr(g));var x=r.scale,_=r.color;if(f){i==DA&&(d=FA);var j=new Xv({anchor:e,anchorOrigin:l,anchorXUnits:o,anchorYUnits:u,crossOrigin:this.Bt,offset:c,offsetOrigin:Iv,rotation:w,scale:x,size:d,src:this.ky(i),color:_}),O=j.getScaleArray()[0],S=j.getSize();if(null===S){var M=j.getImageState();if(M===wo||M===mo){j.listenImageChange((function t(){var n=j.getImageState();if(n!==wo&&n!==mo){var r=j.getSize();if(r&&2==r.length){var i=uC(r);j.setScale(O*i)}j.unlistenImageChange(t)}})),M===wo&&j.load()}}else if(2==S.length){var E=uC(S);j.setScale(O*E)}s.imageStyle=j}else s.imageStyle=JA}},LabelStyle:function(t,n){var r=Rc({},mC,t,n);if(r){var i=n[n.length-1],e=new rd({fill:new Cv({color:"color"in r?r.color:LA}),scale:r.scale});i.textStyle=e}},LineStyle:function(t,n){var r=Rc({},bC,t,n);if(r){var i=n[n.length-1],e=new Vv({color:"color"in r?r.color:LA,width:"width"in r?r.width:1});i.strokeStyle=e}},PolyStyle:function(t,n){var r=Rc({},gC,t,n);if(r){var i=n[n.length-1],e=new Cv({color:"color"in r?r.color:LA});i.fillStyle=e;var o=r.fill;void 0!==o&&(i.fill=o);var u=r.outline;void 0!==u&&(i.outline=u)}}});function zC(t,n){var r=Rc({},GC,t,n,this);if(!r)return null;var i,e="fillStyle"in r?r.fillStyle:$A,o=r.fill;void 0===o||o||(e=null),"imageStyle"in r?r.imageStyle!=JA&&(i=r.imageStyle):i=QA;var u="textStyle"in r?r.textStyle:rC,s="strokeStyle"in r?r.strokeStyle:nC,a=r.outline;return void 0===a||a?[new Qv({fill:e,image:i,stroke:s,text:u,zIndex:void 0})]:[new Qv({geometry:function(t){var n=t.getGeometry(),r=n.getType();return r===Pt.GEOMETRY_COLLECTION?new Gj(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n!==Pt.POLYGON&&n!==Pt.MULTI_POLYGON}))):r!==Pt.POLYGON&&r!==Pt.MULTI_POLYGON?n:void 0},fill:e,image:i,stroke:s,text:u,zIndex:void 0}),new Qv({geometry:function(t){var n=t.getGeometry(),r=n.getType();return r===Pt.GEOMETRY_COLLECTION?new Gj(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.POLYGON||n===Pt.MULTI_POLYGON}))):r===Pt.POLYGON||r===Pt.MULTI_POLYGON?n:void 0},fill:e,stroke:null,zIndex:void 0})]}function FC(t,n){var r,i,e,o=n.length,u=new Array(n.length),s=new Array(n.length),a=new Array(n.length);r=!1,i=!1,e=!1;for(var f=0;f<o;++f){var h=n[f];u[f]=h.get("extrude"),s[f]=h.get("tessellate"),a[f]=h.get("altitudeMode"),r=r||void 0!==u[f],i=i||void 0!==s[f],e=e||a[f]}r&&t.set("extrude",u),i&&t.set("tessellate",s),e&&t.set("altitudeMode",a)}var DC=Ic(BA,{displayName:Tc(gk),value:Tc(gk)});var UC=Ic(BA,{Data:function(t,n){var r=t.getAttribute("name");Lc(DC,t,n);var i=n[n.length-1];r&&i.displayName?i[r]={value:i.value,displayName:i.displayName,toString:function(){return i.value}}:null!==r?i[r]=i.value:null!==i.displayName&&(i[i.displayName]=i.value),delete i.value},SchemaData:function(t,n){Lc(VC,t,n)}});function qC(t,n){Lc(UC,t,n)}function BC(t,n){Lc(ZA,t,n)}var XC=Ic(BA,{Style:Tc(zC),key:Tc(gk),styleUrl:Tc(vC)});var VC=Ic(BA,{SimpleData:function(t,n){var r=t.getAttribute("name");if(null!==r){var i=gk(t);n[n.length-1][r]=i}}});var YC=Ic(BA,{altitudeMode:Tc(gk),minAltitude:Tc(yk),maxAltitude:Tc(yk),north:Tc(yk),south:Tc(yk),east:Tc(yk),west:Tc(yk)});var WC=Ic(BA,{minLodPixels:Tc(yk),maxLodPixels:Tc(yk),minFadeExtent:Tc(yk),maxFadeExtent:Tc(yk)});var ZC=Ic(BA,{LinearRing:Sc(_C)});var HC=Ic(BA,{LinearRing:Mc(_C)});function KC(t,n){for(var r=qo(n),i=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],e=0;e<4;++e){var o=Math.floor(i[e]).toString(16);i[e]=1==o.length?"0"+o:o}Mk(t,i.join(""))}var $C=Ic(BA,{Data:kc((function(t,n,r){t.setAttribute("name",n.name);var i={node:t},e=n.value;"object"==IA(e)?(null!==e&&e.displayName&&zc(i,$C,Pc,[e.displayName],r,["displayName"]),null!==e&&e.value&&zc(i,$C,Pc,[e.value],r,["value"])):zc(i,$C,Pc,[e],r,["value"])})),value:kc((function(t,n){Mk(t,n)})),displayName:kc((function(t,n){_k(t,n)}))});var JC=Ic(BA,{Placemark:kc(jP)}),QC=function(t,n,r){return mc(n[n.length-1].node.namespaceURI,"Placemark")};var tP=Cc("Data");var nP=Ic(BA,["href"],Ic(qA,["x","y","w","h"])),rP=Ic(BA,{href:kc(Mk)},Ic(qA,{x:kc(Ok),y:kc(Ok),w:kc(Ok),h:kc(Ok)})),iP=function(t,n,r){return mc(qA[0],"gx:"+r)};var eP=Ic(BA,["scale","heading","Icon","color","hotSpot"]),oP=Ic(BA,{Icon:kc((function(t,n,r){var i={node:t},e=r[r.length-1].node,o=nP[e.namespaceURI],u=Nc(n,o);zc(i,rP,Pc,u,r,o),u=Nc(n,o=nP[qA[0]]),zc(i,rP,iP,u,r,o)})),color:kc(KC),heading:kc(Ok),hotSpot:kc((function(t,n){t.setAttribute("x",String(n.x)),t.setAttribute("y",String(n.y)),t.setAttribute("xunits",n.xunits),t.setAttribute("yunits",n.yunits)})),scale:kc(NP)});var uP=Ic(BA,["color","scale"]),sP=Ic(BA,{color:kc(KC),scale:kc(NP)});var aP=Ic(BA,["color","width"]),fP=Ic(BA,{color:kc(KC),width:kc(Ok)});var hP={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},cP=function(t,n,r){if(t)return mc(n[n.length-1].node.namespaceURI,hP[t.getType()])},lP=Cc("Point"),vP=Cc("LineString"),dP=Cc("LinearRing"),pP=Cc("Polygon"),yP=Ic(BA,{LineString:kc(MP),Point:kc(MP),Polygon:kc(CP),GeometryCollection:kc(wP)});function wP(t,n,r){var i,e={node:t},o=n.getType(),u=[];o===Pt.GEOMETRY_COLLECTION?(n.getGeometriesArrayRecursive().forEach((function(t){var n=t.getType();n===Pt.MULTI_POINT?u=u.concat(t.getPoints()):n===Pt.MULTI_LINE_STRING?u=u.concat(t.getLineStrings()):n===Pt.MULTI_POLYGON?u=u.concat(t.getPolygons()):n===Pt.POINT||n===Pt.LINE_STRING||n===Pt.POLYGON?u.push(t):Ot(!1,39)})),i=cP):o===Pt.MULTI_POINT?(u=n.getPoints(),i=lP):o===Pt.MULTI_LINE_STRING?(u=n.getLineStrings(),i=vP):o===Pt.MULTI_POLYGON?(u=n.getPolygons(),i=pP):Ot(!1,39),zc(e,yP,i,u,r)}var mP=Ic(BA,{LinearRing:kc(MP)});function bP(t,n,r){zc({node:t},mP,dP,[n],r)}var gP=Ic(BA,{ExtendedData:kc((function(t,n,r){for(var i={node:t},e=n.names,o=n.values,u=e.length,s=0;s<u;s++)zc(i,$C,tP,[{name:e[s],value:o[s]}],r)})),MultiGeometry:kc(wP),LineString:kc(MP),LinearRing:kc(MP),Point:kc(MP),Polygon:kc(CP),Style:kc((function(t,n,r){var i={node:t},e={};if(n.pointStyles.length){var o=n.pointStyles[0].getText();o&&(e.LabelStyle=o);var u=n.pointStyles[0].getImage();u&&"function"==typeof u.getSrc&&(e.IconStyle=u)}if(n.lineStyles.length){(s=n.lineStyles[0].getStroke())&&(e.LineStyle=s)}if(n.polyStyles.length){var s;(s=n.polyStyles[0].getStroke())&&!e.LineStyle&&(e.LineStyle=s),e.PolyStyle=n.polyStyles[0]}var a=r[r.length-1].node,f=IP[a.namespaceURI],h=Nc(e,f);zc(i,LP,Pc,h,r,f)})),address:kc(Mk),description:kc(Mk),name:kc(Mk),open:kc(xk),phoneNumber:kc(Mk),styleUrl:kc(Mk),visibility:kc(xk)}),xP=Ic(BA,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),_P=Cc("ExtendedData");function jP(t,n,r){var i={node:t};n.getId()&&t.setAttribute("id",n.getId());var e=n.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[n.getGeometryName()]=1;var u=Object.keys(e||{}).sort().filter((function(t){return!o[t]})),s=n.getStyleFunction();if(s){var a=s(n,0);if(a){var f=Array.isArray(a)?a:[a],h=f;if(n.getGeometry()&&(h=f.filter((function(t){var r=t.getGeometryFunction()(n);if(r){var i=r.getType();return i===Pt.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.POINT||n===Pt.MULTI_POINT})).length:i===Pt.POINT||i===Pt.MULTI_POINT}}))),this.My){var c=f,l=f;n.getGeometry()&&(c=f.filter((function(t){var r=t.getGeometryFunction()(n);if(r){var i=r.getType();return i===Pt.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.LINE_STRING||n===Pt.MULTI_LINE_STRING})).length:i===Pt.LINE_STRING||i===Pt.MULTI_LINE_STRING}})),l=f.filter((function(t){var r=t.getGeometryFunction()(n);if(r){var i=r.getType();return i===Pt.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return n===Pt.POLYGON||n===Pt.MULTI_POLYGON})).length:i===Pt.POLYGON||i===Pt.MULTI_POLYGON}}))),e.Style={pointStyles:h,lineStyles:c,polyStyles:l}}if(h.length&&void 0===e.name){var v=h[0].getText();v&&(e.name=v.getText())}}}var d=r[r.length-1].node,p=xP[d.namespaceURI],y=Nc(e,p);if(zc(i,gP,Pc,y,r,p),u.length>0){var w=Nc(e,u);zc(i,gP,_P,[{names:u,values:w}],r)}var m=r[0],b=n.getGeometry();b&&(b=Oj(b,!0,m)),zc(i,gP,cP,[b],r)}var OP=Ic(BA,["extrude","tessellate","altitudeMode","coordinates"]),SP=Ic(BA,{extrude:kc(xk),tessellate:kc(xk),altitudeMode:kc(Mk),coordinates:kc((function(t,n,r){var i,e=r[r.length-1],o=e.layout,u=e.stride;o==Tt||o==At?i=2:o==kt||o==Ct?i=3:Ot(!1,34);var s=n.length,a="";if(s>0){a+=n[0];for(var f=1;f<i;++f)a+=","+n[f];for(var h=u;h<s;h+=u){a+=" "+n[h];for(f=1;f<i;++f)a+=","+n[h+f]}}Mk(t,a)}))});function MP(t,n,r){var i=n.getFlatCoordinates(),e={node:t};e.layout=n.getLayout(),e.stride=n.getStride();var o=n.getProperties();o.coordinates=i;var u=r[r.length-1].node,s=OP[u.namespaceURI],a=Nc(o,s);zc(e,SP,Pc,a,r,s)}var EP=Ic(BA,["color","fill","outline"]),TP=Ic(BA,{outerBoundaryIs:kc(bP),innerBoundaryIs:kc(bP)}),kP=Cc("innerBoundaryIs"),AP=Cc("outerBoundaryIs");function CP(t,n,r){var i=n.getLinearRings(),e=i.shift(),o={node:t};zc(o,TP,kP,i,r),zc(o,TP,AP,[e],r)}var PP=Ic(BA,{color:kc(KC),fill:kc(xk),outline:kc(xk)});function NP(t,n){Ok(t,Math.round(1e6*n)/1e6)}var IP=Ic(BA,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),LP=Ic(BA,{IconStyle:kc((function(t,n,r){var i={node:t},e={},o=n.getSrc(),u=n.getSize(),s=n.getImageSize(),a={href:o};if(u){a.w=u[0],a.h=u[1];var f=n.getAnchor(),h=n.getOrigin();if(h&&s&&0!==h[0]&&h[1]!==u[1]&&(a.x=h[0],a.y=s[1]-(h[1]+u[1])),f&&(f[0]!==u[0]/2||f[1]!==u[1]/2)){var c={x:f[0],xunits:Nv,y:u[1]-f[1],yunits:Nv};e.hotSpot=c}}e.Icon=a;var l=n.getScaleArray()[0],v=u;null===v&&(v=FA),2==v.length&&(l/=uC(v)),1!==l&&(e.scale=l);var d=n.getRotation();0!==d&&(e.heading=d);var p=n.getColor();p&&(e.color=p);var y=r[r.length-1].node,w=eP[y.namespaceURI],m=Nc(e,w);zc(i,oP,Pc,m,r,w)})),LabelStyle:kc((function(t,n,r){var i={node:t},e={},o=n.getFill();o&&(e.color=o.getColor());var u=n.getScale();u&&1!==u&&(e.scale=u);var s=r[r.length-1].node,a=uP[s.namespaceURI],f=Nc(e,a);zc(i,sP,Pc,f,r,a)})),LineStyle:kc((function(t,n,r){var i={node:t},e={color:n.getColor(),width:Number(n.getWidth())||1},o=r[r.length-1].node,u=aP[o.namespaceURI],s=Nc(e,u);zc(i,fP,Pc,s,r,u)})),PolyStyle:kc((function(t,n,r){var i={node:t},e=n.getFill(),o=n.getStroke(),u={color:e?e.getColor():void 0,fill:!!e&&void 0,outline:!!o&&void 0},s=r[r.length-1].node,a=EP[s.namespaceURI],f=Nc(u,a);zc(i,PP,Pc,f,r,a)}))});var RP=aC,GP=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),zP=[null],FP=Ic(zP,{nd:function(t,n){n[n.length-1].ndrefs.push(t.getAttribute("ref"))},tag:BP}),DP=Ic(zP,{node:function(t,n){var r=n[0],i=n[n.length-1],e=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];i.nodes[e]=o;var u=Rc({tags:{}},qP,t,n);if(!P(u.tags)){var s=new Te(o);Oj(s,!1,r);var a=new Et(s);void 0!==e&&a.setId(e),a.setProperties(u.tags,!0),i.features.push(a)}},way:function(t,n){var r=Rc({id:t.getAttribute("id"),ndrefs:[],tags:{}},FP,t,n);n[n.length-1].ways.push(r)}}),UP=function(t){function n(){var n=t.call(this)||this;return n.dataProjection=gi("EPSG:4326"),n}return GP(n,t),n.prototype.readFeaturesFromNode=function(t,n){var r=this.getReadOptions(t,n);if("osm"==t.localName){for(var i=Rc({nodes:{},ways:[],features:[]},DP,t,[r]),e=0;e<i.ways.length;e++){for(var o=i.ways[e],u=[],s=0,a=o.ndrefs.length;s<a;s++){b(u,i.nodes[o.ndrefs[s]])}var f=void 0;Oj(f=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ke(u,Tt,[u.length]):new J_(u,Tt),!1,r);var h=new Et(f);void 0!==o.id&&h.setId(o.id),h.setProperties(o.tags,!0),i.features.push(h)}if(i.features)return i.features}return[]},n}(sk),qP=Ic(zP,{tag:BP});function BP(t,n){n[n.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var XP=UP,VP=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=jc(t);return this.readFromDocument(n)}return xc(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null},t.prototype.readFromNode=function(t){},t}();function YP(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var WP=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),ZP=[null,"http://www.opengis.net/ows/1.1"],HP=Ic(ZP,{ServiceIdentification:Tc((function(t,n){return Rc({},aN,t,n)})),ServiceProvider:Tc((function(t,n){return Rc({},fN,t,n)})),OperationsMetadata:Tc((function(t,n){return Rc({},eN,t,n)}))}),KP=function(t){function n(){return t.call(this)||this}return WP(n,t),n.prototype.readFromNode=function(t){var n=Rc({},HP,t,[]);return n||null},n}(VP),$P=Ic(ZP,{DeliveryPoint:Tc(gk),City:Tc(gk),AdministrativeArea:Tc(gk),PostalCode:Tc(gk),Country:Tc(gk),ElectronicMailAddress:Tc(gk)}),JP=Ic(ZP,{Value:Ec((function(t,n){return gk(t)}))}),QP=Ic(ZP,{AllowedValues:Tc((function(t,n){return Rc({},JP,t,n)}))}),tN=Ic(ZP,{Phone:Tc((function(t,n){return Rc({},oN,t,n)})),Address:Tc((function(t,n){return Rc({},$P,t,n)}))}),nN=Ic(ZP,{HTTP:Tc((function(t,n){return Rc({},rN,t,n)}))}),rN=Ic(ZP,{Get:Ec((function(t,n){var r=YP(t);if(!r)return;return Rc({href:r},uN,t,n)})),Post:void 0}),iN=Ic(ZP,{DCP:Tc((function(t,n){return Rc({},nN,t,n)}))}),eN=Ic(ZP,{Operation:function(t,n){var r=t.getAttribute("name"),i=Rc({},iN,t,n);if(!i)return;n[n.length-1][r]=i}}),oN=Ic(ZP,{Voice:Tc(gk),Facsimile:Tc(gk)}),uN=Ic(ZP,{Constraint:Ec((function(t,n){var r=t.getAttribute("name");if(!r)return;return Rc({name:r},QP,t,n)}))}),sN=Ic(ZP,{IndividualName:Tc(gk),PositionName:Tc(gk),ContactInfo:Tc((function(t,n){return Rc({},tN,t,n)}))}),aN=Ic(ZP,{Abstract:Tc(gk),AccessConstraints:Tc(gk),Fees:Tc(gk),Title:Tc(gk),ServiceTypeVersion:Tc(gk),ServiceType:Tc(gk)}),fN=Ic(ZP,{ProviderName:Tc(gk),ProviderSite:Tc(YP),ServiceContact:Tc((function(t,n){return Rc({},sN,t,n)}))});var hN=KP,cN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function lN(t,n,r){var i,e=r||1e5,o=new Array(n);for(i=0;i<n;++i)o[i]=0;for(var u=0,s=t.length;u<s;)for(i=0;i<n;++i,++u){var a=t[u],f=a-o[i];o[i]=a,t[u]=f}return dN(t,e)}function vN(t,n,r){var i,e=r||1e5,o=new Array(n);for(i=0;i<n;++i)o[i]=0;for(var u=pN(t,e),s=0,a=u.length;s<a;)for(i=0;i<n;++i,++s)o[i]+=u[s],u[s]=o[i];return u}function dN(t,n){for(var r=n||1e5,i=0,e=t.length;i<e;++i)t[i]=Math.round(t[i]*r);return yN(t)}function pN(t,n){for(var r=n||1e5,i=wN(t),e=0,o=i.length;e<o;++e)i[e]/=r;return i}function yN(t){for(var n=0,r=t.length;n<r;++n){var i=t[n];t[n]=i<0?~(i<<1):i<<1}return mN(t)}function wN(t){for(var n=bN(t),r=0,i=n.length;r<i;++r){var e=n[r];n[r]=1&e?~(e>>1):e>>1}return n}function mN(t){for(var n="",r=0,i=t.length;r<i;++r)n+=gN(t[r]);return n}function bN(t){for(var n=[],r=0,i=0,e=0,o=t.length;e<o;++e){var u=t.charCodeAt(e)-63;r|=(31&u)<<i,u<32?(n.push(r),r=0,i=0):i+=5}return n}function gN(t){for(var n,r="";t>=32;)n=63+(32|31&t),r+=String.fromCharCode(n),t>>=5;return n=t+63,r+=String.fromCharCode(n)}var xN=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.dataProjection=gi("EPSG:4326"),r.Iy=i.factor?i.factor:1e5,r.Fv=i.geometryLayout?i.geometryLayout:Tt,r}return cN(n,t),n.prototype.readFeatureFromText=function(t,n){var r=this.readGeometryFromText(t,n);return new Et(r)},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)]},n.prototype.readGeometryFromText=function(t,n){var r=Ji(this.Fv),i=vN(t,r,this.Iy);$T(i,0,i.length,r,i);var e=be(i,0,i.length,r);return Oj(new J_(e,this.Fv),!1,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){var r=t.getGeometry();return r?this.writeGeometryText(r,n):(Ot(!1,40),"")},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n)},n.prototype.writeGeometryText=function(t,n){var r=(t=Oj(t,!0,this.adaptOptions(n))).getFlatCoordinates(),i=t.getStride();return $T(r,0,r.length,i,r),lN(r,i,this.Iy)},n}(OA),_N=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),jN=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.tv=i.layerName,r.Bf=i.layers?i.layers:null,r.dataProjection=gi(i.dataProjection?i.dataProjection:"EPSG:4326"),r}return _N(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var r=t,i=void 0,e=null,o=null;r.transform&&(e=(i=r.transform).scale,o=i.translate);var u=r.arcs;i&&function(t,n,r){for(var i=0,e=t.length;i<e;++i)TN(t[i],n,r)}(u,e,o);var s=[],a=r.objects,f=this.tv,h=void 0;for(var c in a)this.Bf&&-1==this.Bf.indexOf(c)||("GeometryCollection"===a[c].type?(h=a[c],s.push.apply(s,MN(h,u,e,o,f,c,n))):(h=a[c],s.push(EN(h,u,e,o,f,c,n))));return s}return[]},n.prototype.readProjectionFromObject=function(t){return this.dataProjection},n}(Dj),ON={Point:function(t,n,r){var i=t.coordinates;n&&r&&kN(i,n,r);return new Te(i)},LineString:function(t,n){var r=SN(t.arcs,n);return new J_(r)},Polygon:function(t,n){for(var r=[],i=0,e=t.arcs.length;i<e;++i)r[i]=SN(t.arcs[i],n);return new Ke(r)},MultiPoint:function(t,n,r){var i=t.coordinates;if(n&&r)for(var e=0,o=i.length;e<o;++e)kN(i[e],n,r);return new W_(i)},MultiLineString:function(t,n){for(var r=[],i=0,e=t.arcs.length;i<e;++i)r[i]=SN(t.arcs[i],n);return new tj(r)},MultiPolygon:function(t,n){for(var r=[],i=0,e=t.arcs.length;i<e;++i){for(var o=t.arcs[i],u=[],s=0,a=o.length;s<a;++s)u[s]=SN(o[s],n);r[i]=u}return new ij(r)}};function SN(t,n){for(var r,i=[],e=0,o=t.length;e<o;++e)if(r=t[e],e>0&&i.pop(),r>=0)for(var u=0,s=(a=n[r]).length;u<s;++u)i.push(a[u].slice(0));else{var a;for(u=(a=n[~r]).length-1;u>=0;--u)i.push(a[u].slice(0))}return i}function MN(t,n,r,i,e,o,u){for(var s=t.geometries,a=[],f=0,h=s.length;f<h;++f)a[f]=EN(s[f],n,r,i,e,o,u);return a}function EN(t,n,r,i,e,o,u){var s=null,a=t.type;if(a){var f=ON[a];s=Oj(s="Point"===a||"MultiPoint"===a?f(t,r,i):f(t,n),!1,u)}var h=new Et({geometry:s});void 0!==t.id&&h.setId(t.id);var c=t.properties;return e&&(c||(c={}),c[e]=o),c&&h.setProperties(c,!0),h}function TN(t,n,r){for(var i=0,e=0,o=0,u=t.length;o<u;++o){var s=t[o];i+=s[0],e+=s[1],s[0]=i,s[1]=e,kN(s,n,r)}}function kN(t,n,r){t[0]=t[0]*n[0]+r[0],t[1]=t[1]*n[1]+r[1]}var AN=jN,CN=function(){function t(t){this.Ly=t}return t.prototype.getTagName=function(){return this.Ly},t}(),PN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),NN=function(t){function n(n,r){var i=t.call(this,n)||this;return i.conditions=r,Ot(i.conditions.length>=2,57),i}return PN(n,t),n}(CN),IN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),LN=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return IN(n,t),n}(NN),RN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),GN=function(t){function n(n,r,i){var e=t.call(this,"BBOX")||this;if(e.geometryName=n,e.extent=r,4!==r.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return e.srsName=i,e}return RN(n,t),n}(CN),zN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),FN=function(t){function n(n,r,i,e){var o=t.call(this,n)||this;return o.geometryName=r||"the_geom",o.geometry=i,o.srsName=e,o}return zN(n,t),n}(CN),DN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),UN=function(t){function n(n,r,i){return t.call(this,"Contains",n,r,i)||this}return DN(n,t),n}(FN),qN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BN=function(t){function n(n,r,i,e,o){var u=t.call(this,"DWithin",n,r,o)||this;return u.distance=i,u.unit=e,u}return qN(n,t),n}(FN),XN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),VN=function(t){function n(n,r,i){return t.call(this,"Disjoint",n,r,i)||this}return XN(n,t),n}(FN),YN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),WN=function(t){function n(n,r){var i=t.call(this,n)||this;return i.propertyName=r,i}return YN(n,t),n}(CN),ZN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),HN=function(t){function n(n,r,i){var e=t.call(this,"During",n)||this;return e.begin=r,e.end=i,e}return ZN(n,t),n}(WN),KN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$N=function(t){function n(n,r,i,e){var o=t.call(this,n,r)||this;return o.expression=i,o.matchCase=e,o}return KN(n,t),n}(WN),JN=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),QN=function(t){function n(n,r,i){return t.call(this,"PropertyIsEqualTo",n,r,i)||this}return JN(n,t),n}($N),tI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),nI=function(t){function n(n,r){return t.call(this,"PropertyIsGreaterThan",n,r)||this}return tI(n,t),n}($N),rI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),iI=function(t){function n(n,r){return t.call(this,"PropertyIsGreaterThanOrEqualTo",n,r)||this}return rI(n,t),n}($N),eI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),oI=function(t){function n(n,r,i){return t.call(this,"Intersects",n,r,i)||this}return eI(n,t),n}(FN),uI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),sI=function(t){function n(n,r,i){var e=t.call(this,"PropertyIsBetween",n)||this;return e.lowerBoundary=r,e.upperBoundary=i,e}return uI(n,t),n}(WN),aI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),fI=function(t){function n(n,r,i,e,o,u){var s=t.call(this,"PropertyIsLike",n)||this;return s.pattern=r,s.wildCard=void 0!==i?i:"*",s.singleChar=void 0!==e?e:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=u,s}return aI(n,t),n}(WN),hI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),cI=function(t){function n(n){return t.call(this,"PropertyIsNull",n)||this}return hI(n,t),n}(WN),lI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),vI=function(t){function n(n,r){return t.call(this,"PropertyIsLessThan",n,r)||this}return lI(n,t),n}($N),dI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),pI=function(t){function n(n,r){return t.call(this,"PropertyIsLessThanOrEqualTo",n,r)||this}return dI(n,t),n}($N),yI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),wI=function(t){function n(n){var r=t.call(this,"Not")||this;return r.condition=n,r}return yI(n,t),n}(CN),mI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),bI=function(t){function n(n,r,i){return t.call(this,"PropertyIsNotEqualTo",n,r,i)||this}return mI(n,t),n}($N),gI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),xI=function(t){function n(n){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return gI(n,t),n}(NN),_I=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),jI=function(t){function n(n){var r=t.call(this,"ResourceId")||this;return r.rid=n,r}return _I(n,t),n}(CN),OI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),SI=function(t){function n(n,r,i){return t.call(this,"Within",n,r,i)||this}return OI(n,t),n}(FN);function MI(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(LN,n))}function EI(t,n,r){return new GN(t,n,r)}var TI=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),kI={"http://www.opengis.net/gml":{boundedBy:Tc(lk.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:Sc(lk.prototype.readFeaturesInternal)}},AI={"http://www.opengis.net/wfs":{totalInserted:Tc(mk),totalUpdated:Tc(mk),totalDeleted:Tc(mk)},"http://www.opengis.net/wfs/2.0":{totalInserted:Tc(mk),totalUpdated:Tc(mk),totalDeleted:Tc(mk)}},CI={"http://www.opengis.net/wfs":{TransactionSummary:Tc(BI,"transactionSummary"),InsertResults:Tc(WI,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Tc(BI,"transactionSummary"),InsertResults:Tc(WI,"insertIds")}},PI={"http://www.opengis.net/wfs":{PropertyName:kc(Mk)},"http://www.opengis.net/wfs/2.0":{PropertyName:kc(Mk)}},NI={"http://www.opengis.net/wfs":{Insert:kc(ZI),Update:kc(JI),Delete:kc($I),Property:kc(QI),Native:kc(tL)},"http://www.opengis.net/wfs/2.0":{Insert:kc(ZI),Update:kc(JI),Delete:kc($I),Property:kc(QI),Native:kc(tL)}},II="feature",LI="http://www.w3.org/2000/xmlns/",RI={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},GI={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},zI={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},FI={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},DI={"2.0.0":Fk,"1.1.0":Ik,"1.0.0":Ak},UI=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.sh=i.version?i.version:"1.1.0",r.Ry=i.featureType,r.Gy=i.featureNS,r.zy=i.gmlFormat?i.gmlFormat:new DI[r.sh],r.Fy=i.schemaLocation?i.schemaLocation:FI[r.sh],r}return TI(n,t),n.prototype.getFeatureType=function(){return this.Ry},n.prototype.setFeatureType=function(t){this.Ry=t},n.prototype.readFeaturesFromNode=function(t,n){var r={node:t};k(r,{featureType:this.Ry,featureNS:this.Gy}),k(r,this.getReadOptions(t,n||{}));var i=[r],e=Rc([],"2.0.0"===this.sh?kI:this.zy.FEATURE_COLLECTION_PARSERS,t,i,this.zy);return e||(e=[]),e},n.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var n=jc(t);return this.readTransactionResponseFromDocument(n)}return xc(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},n.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var n=jc(t);return this.readFeatureCollectionMetadataFromDocument(n)}return xc(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},n.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)},n.prototype.readFeatureCollectionMetadataFromNode=function(t){var n={},r=bk(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=r,Rc(n,kI,t,[],this.zy)},n.prototype.readTransactionResponseFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)},n.prototype.readTransactionResponseFromNode=function(t){return Rc({},CI,t,[])},n.prototype.writeGetFeature=function(t){var n=this,r=mc(GI[this.sh],"GetFeature");r.setAttribute("service","WFS"),r.setAttribute("version",this.sh),t.handle&&r.setAttribute("handle",t.handle),t.outputFormat&&r.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&r.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&r.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&r.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&r.setAttribute("count",String(t.count)),void 0!==t.viewParams&&r.setAttribute("viewParams",t.viewParams),r.setAttributeNS(wc,"xsi:schemaLocation",this.Fy);var i={node:r};if(k(i,{version:this.sh,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.Gy,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Ot(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var e=t.filter;t.bbox&&(Ot(t.geometryName,12),e=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,e)),k(i,{geometryName:t.geometryName,filter:e}),mL(r,t.featureTypes,[i])}else t.featureTypes.forEach((function(e){var o=n.combineBboxAndFilter(e.geometryName,e.bbox,t.srsName,t.filter);k(i,{geometryName:e.geometryName,filter:o}),mL(r,[e.name],[i])}));return r},n.prototype.combineBboxAndFilter=function(t,n,r,i){var e=EI(t,n,r);return i?MI(i,e):e},n.prototype.writeTransaction=function(t,n,r,i){var e,o=[],u=i.version?i.version:this.sh,s=mc(GI[u],"Transaction");s.setAttribute("service","WFS"),s.setAttribute("version",u),i&&(e=i.gmlOptions?i.gmlOptions:{},i.handle&&s.setAttribute("handle",i.handle)),s.setAttributeNS(wc,"xsi:schemaLocation",FI[u]);var a=function(t,n,r,i){var e,o=i.featurePrefix?i.featurePrefix:II;"1.0.0"===r?e=2:"1.1.0"===r?e=3:"2.0.0"===r&&(e=3.2);return k({node:t},{version:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:o,gmlVersion:e,hasZ:i.hasZ,srsName:i.srsName},n)}(s,e,u,i);return t&&qI("Insert",t,o,a),n&&qI("Update",n,o,a),r&&qI("Delete",r,o,a),i.nativeElements&&qI("Native",i.nativeElements,o,a),s},n.prototype.readProjectionFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null},n.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var n=(t=t.firstElementChild.firstElementChild).firstElementChild;n;n=n.nextElementSibling)if(0!==n.childNodes.length&&(1!==n.childNodes.length||3!==n.firstChild.nodeType)){var r=[{}];return this.zy.readGeometryElement(n,r),gi(r.pop().srsName)}return null},n}(sk);function qI(t,n,r,i){zc(i,NI,Cc(t),n,r)}function BI(t,n){return Rc({},AI,t,n)}var XI={"http://www.opengis.net/ogc":{FeatureId:Sc((function(t,n){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:Sc((function(t,n){return t.getAttribute("fid")}))}};function VI(t,n){Lc(XI,t,n)}var YI={"http://www.opengis.net/wfs":{Feature:VI},"http://www.opengis.net/wfs/2.0":{Feature:VI}};function WI(t,n){return Rc([],YI,t,n)}function ZI(t,n,r){var i=r[r.length-1],e=i.featureType,o=i.featureNS,u=i.gmlVersion,s=mc(o,e);t.appendChild(s),2===u?Ak.prototype.writeFeatureElement(s,n,r):3===u?Ik.prototype.writeFeatureElement(s,n,r):Fk.prototype.writeFeatureElement(s,n,r)}function HI(t,n,r){var i=r[r.length-1].version,e=RI[i],o=mc(e,"Filter"),u=mc(e,"FeatureId");o.appendChild(u),u.setAttribute("fid",n),t.appendChild(o)}function KI(t,n){var r=(t=t||II)+":";return 0===n.indexOf(r)?n:r+n}function $I(t,n,r){var i=r[r.length-1];Ot(void 0!==n.getId(),26);var e=i.featureType,o=i.featurePrefix,u=i.featureNS,s=KI(o,e);t.setAttribute("typeName",s),t.setAttributeNS(LI,"xmlns:"+o,u);var a=n.getId();void 0!==a&&HI(t,a,r)}function JI(t,n,r){var i=r[r.length-1];Ot(void 0!==n.getId(),27);var e=i.version,o=i.featureType,u=i.featurePrefix,s=i.featureNS,a=KI(u,o),f=n.getGeometryName();t.setAttribute("typeName",a),t.setAttributeNS(LI,"xmlns:"+u,s);var h=n.getId();if(void 0!==h){for(var c=n.getKeys(),l=[],v=0,d=c.length;v<d;v++){var p=n.get(c[v]);if(void 0!==p){var y=c[v];p&&"function"==typeof p.getSimplifiedGeometry&&(y=f),l.push({name:y,value:p})}}zc({version:e,gmlVersion:i.gmlVersion,node:t,hasZ:i.hasZ,srsName:i.srsName},NI,Cc("Property"),l,r),HI(t,h,r)}}function QI(t,n,r){var i=r[r.length-1],e=i.version,o=GI[e],u=mc(o,"Name"),s=i.gmlVersion;if(t.appendChild(u),Mk(u,n.name),void 0!==n.value&&null!==n.value){var a=mc(o,"Value");t.appendChild(a),n.value&&"function"==typeof n.value.getSimplifiedGeometry?2===s?Ak.prototype.writeGeometryElement(a,n.value,r):3===s?Ik.prototype.writeGeometryElement(a,n.value,r):Fk.prototype.writeGeometryElement(a,n.value,r):Mk(a,n.value)}}function tL(t,n,r){n.vendorId&&t.setAttribute("vendorId",n.vendorId),void 0!==n.safeToIgnore&&t.setAttribute("safeToIgnore",String(n.safeToIgnore)),void 0!==n.value&&Mk(t,n.value)}var nL={"http://www.opengis.net/wfs":{Query:kc(rL)},"http://www.opengis.net/wfs/2.0":{Query:kc(rL)},"http://www.opengis.net/ogc":{During:kc(sL),And:kc(aL),Or:kc(aL),Not:kc(fL),BBOX:kc(eL),Contains:kc(oL),Intersects:kc(oL),Within:kc(oL),DWithin:kc(uL),PropertyIsEqualTo:kc(hL),PropertyIsNotEqualTo:kc(hL),PropertyIsLessThan:kc(hL),PropertyIsLessThanOrEqualTo:kc(hL),PropertyIsGreaterThan:kc(hL),PropertyIsGreaterThanOrEqualTo:kc(hL),PropertyIsNull:kc(cL),PropertyIsBetween:kc(lL),PropertyIsLike:kc(vL)},"http://www.opengis.net/fes/2.0":{During:kc(sL),And:kc(aL),Or:kc(aL),Not:kc(fL),BBOX:kc(eL),Contains:kc(oL),Disjoint:kc(oL),Intersects:kc(oL),ResourceId:kc((function(t,n,r){t.setAttribute("rid",n.rid)})),Within:kc(oL),DWithin:kc(uL),PropertyIsEqualTo:kc(hL),PropertyIsNotEqualTo:kc(hL),PropertyIsLessThan:kc(hL),PropertyIsLessThanOrEqualTo:kc(hL),PropertyIsGreaterThan:kc(hL),PropertyIsGreaterThanOrEqualTo:kc(hL),PropertyIsNull:kc(cL),PropertyIsBetween:kc(lL),PropertyIsLike:kc(vL)}};function rL(t,n,r){var i,e,o=r[r.length-1],u=o.version,s=o.featurePrefix,a=o.featureNS,f=o.propertyNames,h=o.srsName;i=s?KI(s,n):n,e="2.0.0"===u?"typeNames":"typeName",t.setAttribute(e,i),h&&t.setAttribute("srsName",h),a&&t.setAttributeNS(LI,"xmlns:"+s,a);var c=k({},o);c.node=t,zc(c,PI,Cc("PropertyName"),f,r);var l=o.filter;if(l){var v=mc(bL(u),"Filter");t.appendChild(v),iL(v,l,r)}}function iL(t,n,r){var i=r[r.length-1],e={node:t};k(e,{context:i}),zc(e,nL,Cc(n.getTagName()),[n],r)}function eL(t,n,r){var i=r[r.length-1],e=i.context.version;i.srsName=n.srsName;var o=DI[e];yL(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.extent,r)}function oL(t,n,r){var i=r[r.length-1],e=i.context.version;i.srsName=n.srsName;var o=DI[e];yL(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.geometry,r)}function uL(t,n,r){var i=r[r.length-1].context.version;oL(t,n,r);var e=mc(bL(i),"Distance");Mk(e,n.distance.toString()),"2.0.0"===i?e.setAttribute("uom",n.unit):e.setAttribute("units",n.unit),t.appendChild(e)}function sL(t,n,r){var i=r[r.length-1].context.version;dL(zI[i],"ValueReference",t,n.propertyName);var e=mc(fk,"TimePeriod");t.appendChild(e);var o=mc(fk,"begin");e.appendChild(o),wL(o,n.begin);var u=mc(fk,"end");e.appendChild(u),wL(u,n.end)}function aL(t,n,r){var i=r[r.length-1].context,e={node:t};k(e,{context:i});for(var o=n.conditions,u=0,s=o.length;u<s;++u){var a=o[u];zc(e,nL,Cc(a.getTagName()),[a],r)}}function fL(t,n,r){var i=r[r.length-1].context,e={node:t};k(e,{context:i});var o=n.condition;zc(e,nL,Cc(o.getTagName()),[o],r)}function hL(t,n,r){var i=r[r.length-1].context.version;void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),yL(i,t,n.propertyName),pL(i,t,""+n.expression)}function cL(t,n,r){yL(r[r.length-1].context.version,t,n.propertyName)}function lL(t,n,r){var i=r[r.length-1].context.version,e=bL(i);yL(i,t,n.propertyName);var o=mc(e,"LowerBoundary");t.appendChild(o),pL(i,o,""+n.lowerBoundary);var u=mc(e,"UpperBoundary");t.appendChild(u),pL(i,u,""+n.upperBoundary)}function vL(t,n,r){var i=r[r.length-1].context.version;t.setAttribute("wildCard",n.wildCard),t.setAttribute("singleChar",n.singleChar),t.setAttribute("escapeChar",n.escapeChar),void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),yL(i,t,n.propertyName),pL(i,t,""+n.pattern)}function dL(t,n,r,i){var e=mc(t,n);Mk(e,i),r.appendChild(e)}function pL(t,n,r){dL(bL(t),"Literal",n,r)}function yL(t,n,r){"2.0.0"===t?dL(zI[t],"ValueReference",n,r):dL(RI[t],"PropertyName",n,r)}function wL(t,n){var r=mc(fk,"TimeInstant");t.appendChild(r);var i=mc(fk,"timePosition");r.appendChild(i),Mk(i,n)}function mL(t,n,r){var i=r[r.length-1],e=k({},i);e.node=t,zc(e,nL,Cc("Query"),n,r)}function bL(t){return"2.0.0"===t?zI[t]:RI[t]}var gL=UI,xL=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),_L=1,jL=2,OL=3,SL=4,ML=5,EL=6,TL=7,kL=15,AL=16,CL=17,PL=function(){function t(t){this.Dy=t,this.Uy=0,this.qy=!1,this.By=!1,this.Xy=!1,this.Vy=!1,this.Yy=null,this.Wy=Tt}return t.prototype.readUint8=function(){return this.Dy.getUint8(this.Uy++)},t.prototype.readUint32=function(t){return this.Dy.getUint32((this.Uy+=4)-4,void 0!==t?t:this.By)},t.prototype.readDouble=function(t){return this.Dy.getFloat64((this.Uy+=8)-8,void 0!==t?t:this.By)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.Xy&&t.push(this.readDouble()),this.Vy&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),n=[],r=0;r<t;r++)n.push(this.readPoint());return n},t.prototype.readPolygon=function(){for(var t=this.readUint32(),n=[],r=0;r<t;r++)n.push(this.readLineString());return n},t.prototype.readWkbHeader=function(t){var n=this.readUint8()>0,r=this.readUint32(n),i=Math.floor((268435455&r)/1e3),e=Boolean(2147483648&r)||1===i||3===i,o=Boolean(1073741824&r)||2===i||3===i,u=Boolean(536870912&r),s=(268435455&r)%1e3,a=["XY",e?"Z":"",o?"M":""].join(""),f=u?this.readUint32(n):null;if(void 0!==t&&t!==s)throw new Error("Unexpected WKB geometry type "+s);if(this.qy){if(this.By!==n)throw new Error("Inconsistent endian");if(this.Wy!==a)throw new Error("Inconsistent geometry layout");if(f&&this.Yy!==f)throw new Error("Inconsistent coordinate system (SRID)")}else this.By=n,this.Xy=e,this.Vy=o,this.Wy=a,this.Yy=f,this.qy=!0;return s},t.prototype.readWkbPayload=function(t){switch(t){case _L:return this.readPoint();case jL:return this.readLineString();case OL:case CL:return this.readPolygon();case SL:return this.readMultiPoint();case ML:return this.readMultiLineString();case EL:case kL:case AL:return this.readMultiPolygon();case TL:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,n){for(var r=this.readUint32(),i=[],e=0;e<r;e++){var o=t.call(this,n);o&&i.push(o)}return i},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,_L)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,jL)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,OL)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case _L:return new Te(n,this.Wy);case jL:return new J_(n,this.Wy);case OL:case CL:return new Ke(n,this.Wy);case SL:return new W_(n,this.Wy);case ML:return new tj(n,this.Wy);case EL:case kL:case AL:return new ij(n,this.Wy);case TL:return new Gj(n);default:return null}},t.prototype.getSrid=function(){return this.Yy},t}(),NL=function(){function t(t){t=t||{},this.Wy=t.layout,this.By=!1!==t.littleEndian,this.Zy=!1!==t.ewkb,this.Hy=[],this.Ky=k({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.Hy.push([1,t])},t.prototype.writeUint32=function(t){this.Hy.push([4,t])},t.prototype.writeDouble=function(t){this.Hy.push([8,t])},t.prototype.writePoint=function(t,n){for(var r=k.apply(null,n.split("").map((function(n,r){var i;return(i={})[n]=t[r],i}))),i=0,e=this.Wy;i<e.length;i++){var o=e[i];this.writeDouble(o in r?r[o]:this.Ky[o])}},t.prototype.writeLineString=function(t,n){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writePoint(t[r],n)},t.prototype.writePolygon=function(t,n){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writeLineString(t[r],n)},t.prototype.writeWkbHeader=function(t,n){t%=1e3,this.Wy.indexOf("Z")>=0&&(t+=this.Zy?2147483648:1e3),this.Wy.indexOf("M")>=0&&(t+=this.Zy?1073741824:2e3),this.Zy&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.By?1:0),this.writeUint32(t),this.Zy&&Number.isInteger(n)&&this.writeUint32(n)},t.prototype.writeMultiPoint=function(t,n){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writeWkbHeader(1),this.writePoint(t[r],n)},t.prototype.writeMultiLineString=function(t,n){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writeWkbHeader(2),this.writeLineString(t[r],n)},t.prototype.writeMultiPolygon=function(t,n){this.writeUint32(t.length);for(var r=0;r<t.length;r++)this.writeWkbHeader(3),this.writePolygon(t[r],n)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeGeometry(t[n])},t.prototype.findMinimumLayout=function(t,n){void 0===n&&(n=Ct);var r,i;if(t instanceof te)return(r=t.getLayout())===(i=n)?r:r===Ct?i:i===Ct?r:Tt;if(t instanceof Gj)for(var e=t.getGeometriesArray(),o=0;o<e.length&&n!==Tt;o++)n=this.findMinimumLayout(e[o],n);return n},t.prototype.writeGeometry=function(t,n){var r,i,e=((r={})[Pt.POINT]=_L,r[Pt.LINE_STRING]=jL,r[Pt.POLYGON]=OL,r[Pt.MULTI_POINT]=SL,r[Pt.MULTI_LINE_STRING]=ML,r[Pt.MULTI_POLYGON]=EL,r[Pt.GEOMETRY_COLLECTION]=TL,r),o=t.getType(),u=e[o];if(!u)throw new Error("GeometryType "+o+" is not supported");(this.Wy||(this.Wy=this.findMinimumLayout(t)),this.writeWkbHeader(u,n),t instanceof te)?((i={})[Pt.POINT]=this.writePoint,i[Pt.LINE_STRING]=this.writeLineString,i[Pt.POLYGON]=this.writePolygon,i[Pt.MULTI_POINT]=this.writeMultiPoint,i[Pt.MULTI_LINE_STRING]=this.writeMultiLineString,i[Pt.MULTI_POLYGON]=this.writeMultiPolygon,i)[o].call(this,t.getCoordinates(),t.getLayout()):t instanceof Gj&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,n=this.Hy.reduce((function(t,n){return t+n[0]}),0),r=new ArrayBuffer(n),i=new DataView(r),e=0;return this.Hy.forEach((function(n){switch(n[0]){case 1:i.setUint8(e,n[1]);break;case 4:i.setUint32(e,n[1],t.By);break;case 8:i.setFloat64(e,n[1],t.By)}e+=n[0]})),r},t}();function IL(t){return"string"==typeof t?function(t){for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.substr(2*r,2),16);return new DataView(n.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var LL=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.splitCollection=Boolean(i.splitCollection),r.$y=null,r.Jy=!1!==i.hex,r.Qy=!1!==i.littleEndian,r.tw=!1!==i.ewkb,r.Wy=i.geometryLayout,r.nw=i.nodataZ||0,r.rw=i.nodataM||0,r.Yy=i.srid,r}return xL(n,t),n.prototype.getType=function(){return this.Jy?ch:fh},n.prototype.readFeature=function(t,n){return new Et({geometry:this.readGeometry(t,n)})},n.prototype.readFeatures=function(t,n){var r=this.readGeometry(t,n);return(this.splitCollection&&r instanceof Gj?r.getGeometriesArray():[r]).map((function(t){return new Et({geometry:t})}))},n.prototype.readGeometry=function(t,n){var r=IL(t);if(!r)return null;var i=new PL(r).readGeometry();this.$y=r;var e=this.getReadOptions(t,n);return this.$y=null,Oj(i,!1,e)},n.prototype.readProjection=function(t){var n=this.$y||IL(t);if(n){var r=new PL(n);return r.readWkbHeader(),r.getSrid()&&gi("EPSG:"+r.getSrid())||void 0}},n.prototype.writeFeature=function(t,n){return this.writeGeometry(t.getGeometry(),n)},n.prototype.writeFeatures=function(t,n){return this.writeGeometry(new Gj(t.map((function(t){return t.getGeometry()}))),n)},n.prototype.writeGeometry=function(t,n){var r=this.adaptOptions(n),i=new NL({layout:this.Wy,littleEndian:this.Qy,ewkb:this.tw,nodata:{Z:this.nw,M:this.rw}}),e=Number.isInteger(this.Yy)?Number(this.Yy):null;if(!1!==this.Yy&&!Number.isInteger(this.Yy)){var o=r.dataProjection&&gi(r.dataProjection);if(o){var u=o.getCode();0===u.indexOf("EPSG:")&&(e=Number(u.substring(5)))}}i.writeGeometry(Oj(t,!0,r),e);var s=i.getBuffer();return this.Jy?function(t){var n=new Uint8Array(t);return Array.from(n.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(s):s},n}(jj),RL=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),GL={POINT:Te,LINESTRING:J_,POLYGON:Ke,MULTIPOINT:W_,MULTILINESTRING:tj,MULTIPOLYGON:ij},zL="EMPTY",FL=0,DL=1,UL=2,qL=3,BL=4,XL=5,VL=6,YL={};for(var WL in Pt)YL[WL]=Pt[WL].toUpperCase();var ZL=function(){function t(t){this.wkt=t,this.iw=-1}return t.prototype.ew=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.ow=function(t,n){return t>="0"&&t<="9"||"."==t&&!(void 0!==n&&n)},t.prototype.uw=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.sw=function(){return this.wkt.charAt(++this.iw)},t.prototype.nextToken=function(){var t,n=this.sw(),r=this.iw,i=n;if("("==n)t=UL;else if(","==n)t=XL;else if(")"==n)t=qL;else if(this.ow(n)||"-"==n)t=BL,i=this.aw();else if(this.ew(n))t=DL,i=this.fw();else{if(this.uw(n))return this.nextToken();if(""!==n)throw new Error("Unexpected character: "+n);t=VL}return{position:r,value:i,type:t}},t.prototype.aw=function(){var t,n=this.iw,r=!1,i=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(i=!0),t=this.sw()}while(this.ow(t,r)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(n,this.iw--))},t.prototype.fw=function(){var t,n=this.iw;do{t=this.sw()}while(this.ew(t));return this.wkt.substring(n,this.iw--).toUpperCase()},t}(),HL=function(){function t(t){this.hw=t,this.cw={position:0,type:FL},this.Wy=Tt}return t.prototype.lw=function(){this.cw=this.hw.nextToken()},t.prototype.isTokenType=function(t){return this.cw.type==t},t.prototype.match=function(t){var n=this.isTokenType(t);return n&&this.lw(),n},t.prototype.parse=function(){return this.lw(),this.dw()},t.prototype.pw=function(){var t=Tt,n=this.cw;if(this.isTokenType(DL)){var r=n.value;"Z"===r?t=kt:"M"===r?t=At:"ZM"===r&&(t=Ct),t!==Tt&&this.lw()}return t},t.prototype.yw=function(){if(this.match(UL)){var t=[];do{t.push(this.dw())}while(this.match(XL));if(this.match(qL))return t}throw new Error(this.ww())},t.prototype.mw=function(){if(this.match(UL)){var t=this.bw();if(this.match(qL))return t}throw new Error(this.ww())},t.prototype.gw=function(){if(this.match(UL)){var t=this.xw();if(this.match(qL))return t}throw new Error(this.ww())},t.prototype._w=function(){if(this.match(UL)){var t=this.jw();if(this.match(qL))return t}throw new Error(this.ww())},t.prototype.Ow=function(){if(this.match(UL)){var t=void 0;if(t=this.cw.type==UL?this.Sw():this.xw(),this.match(qL))return t}throw new Error(this.ww())},t.prototype.Mw=function(){if(this.match(UL)){var t=this.jw();if(this.match(qL))return t}throw new Error(this.ww())},t.prototype.Ew=function(){if(this.match(UL)){var t=this.Tw();if(this.match(qL))return t}throw new Error(this.ww())},t.prototype.bw=function(){for(var t=[],n=this.Wy.length,r=0;r<n;++r){var i=this.cw;if(!this.match(BL))break;t.push(i.value)}if(t.length==n)return t;throw new Error(this.ww())},t.prototype.xw=function(){for(var t=[this.bw()];this.match(XL);)t.push(this.bw());return t},t.prototype.Sw=function(){for(var t=[this.mw()];this.match(XL);)t.push(this.mw());return t},t.prototype.jw=function(){for(var t=[this.gw()];this.match(XL);)t.push(this.gw());return t},t.prototype.Tw=function(){for(var t=[this._w()];this.match(XL);)t.push(this._w());return t},t.prototype.kw=function(){var t=this.isTokenType(DL)&&this.cw.value==zL;return t&&this.lw(),t},t.prototype.ww=function(){return"Unexpected `"+this.cw.value+"` at position "+this.cw.position+" in `"+this.hw.wkt+"`"},t.prototype.dw=function(){var t=this.cw;if(this.match(DL)){var n=t.value;this.Wy=this.pw();var r=this.kw();if("GEOMETRYCOLLECTION"==n){if(r)return new Gj([]);var i=this.yw();return new Gj(i)}var e=GL[n];if(!e)throw new Error("Invalid geometry type: "+n);var o=void 0;if(r)o="POINT"==n?[NaN,NaN]:[];else switch(n){case"POINT":o=this.mw();break;case"LINESTRING":o=this.gw();break;case"POLYGON":o=this._w();break;case"MULTIPOINT":o=this.Ow();break;case"MULTILINESTRING":o=this.Mw();break;case"MULTIPOLYGON":o=this.Ew()}return new e(o,this.Wy)}throw new Error(this.ww())},t}(),KL=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.Aw=void 0!==i.splitCollection&&i.splitCollection,r}return RL(n,t),n.prototype.Cw=function(t){var n=new ZL(t);return new HL(n).parse()},n.prototype.readFeatureFromText=function(t,n){var r=this.readGeometryFromText(t,n),i=new Et;return i.setGeometry(r),i},n.prototype.readFeaturesFromText=function(t,n){for(var r=[],i=this.readGeometryFromText(t,n),e=[],o=0,u=(r=this.Aw&&i.getType()==Pt.GEOMETRY_COLLECTION?i.getGeometriesArray():[i]).length;o<u;++o){var s=new Et;s.setGeometry(r[o]),e.push(s)}return e},n.prototype.readGeometryFromText=function(t,n){return Oj(this.Cw(t),!1,n)},n.prototype.writeFeatureText=function(t,n){var r=t.getGeometry();return r?this.writeGeometryText(r,n):""},n.prototype.writeFeaturesText=function(t,n){if(1==t.length)return this.writeFeatureText(t[0],n);for(var r=[],i=0,e=t.length;i<e;++i)r.push(t[i].getGeometry());var o=new Gj(r);return this.writeGeometryText(o,n)},n.prototype.writeGeometryText=function(t,n){return nR(Oj(t,!0,n))},n}(OA);function $L(t){var n=t.getCoordinates();return 0===n.length?"":n.join(" ")}function JL(t){for(var n=t.getCoordinates(),r=[],i=0,e=n.length;i<e;++i)r.push(n[i].join(" "));return r.join(",")}function QL(t){for(var n=[],r=t.getLinearRings(),i=0,e=r.length;i<e;++i)n.push("("+JL(r[i])+")");return n.join(",")}var tR={Point:$L,LineString:JL,Polygon:QL,MultiPoint:function(t){for(var n=[],r=t.getPoints(),i=0,e=r.length;i<e;++i)n.push("("+$L(r[i])+")");return n.join(",")},MultiLineString:function(t){for(var n=[],r=t.getLineStrings(),i=0,e=r.length;i<e;++i)n.push("("+JL(r[i])+")");return n.join(",")},MultiPolygon:function(t){for(var n=[],r=t.getPolygons(),i=0,e=r.length;i<e;++i)n.push("("+QL(r[i])+")");return n.join(",")},GeometryCollection:function(t){for(var n=[],r=t.getGeometries(),i=0,e=r.length;i<e;++i)n.push(nR(r[i]));return n.join(",")}};function nR(t){var n=t.getType(),r=(0,tR[n])(t);if(n=n.toUpperCase(),"function"==typeof t.getFlatCoordinates){var i=function(t){var n=t.getLayout(),r="";return n!==kt&&n!==Ct||(r+="Z"),n!==At&&n!==Ct||(r+="M"),r}(t);i.length>0&&(n+=" "+i)}return 0===r.length?n+" "+zL:n+"("+r+")"}var rR=KL,iR=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),eR=[null,"http://www.opengis.net/wms"],oR=Ic(eR,{Service:Tc((function(t,n){return Rc({},aR,t,n)})),Capability:Tc((function(t,n){return Rc({},uR,t,n)}))}),uR=Ic(eR,{Request:Tc((function(t,n){return Rc({},yR,t,n)})),Exception:Tc((function(t,n){return Rc([],lR,t,n)})),Layer:Tc((function(t,n){var r=Rc({},vR,t,n);if(void 0===r.Layer)return Object.assign(r,jR(t,n));return r}))}),sR=function(t){function n(){var n=t.call(this)||this;return n.version=void 0,n}return iR(n,t),n.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var n=Rc({version:this.version},oR,t,[]);return n||null},n}(VP),aR=Ic(eR,{Name:Tc(gk),Title:Tc(gk),Abstract:Tc(gk),KeywordList:Tc(ER),OnlineResource:Tc(YP),ContactInformation:Tc((function(t,n){return Rc({},fR,t,n)})),Fees:Tc(gk),AccessConstraints:Tc(gk),LayerLimit:Tc(mk),MaxWidth:Tc(mk),MaxHeight:Tc(mk)}),fR=Ic(eR,{ContactPersonPrimary:Tc((function(t,n){return Rc({},hR,t,n)})),ContactPosition:Tc(gk),ContactAddress:Tc((function(t,n){return Rc({},cR,t,n)})),ContactVoiceTelephone:Tc(gk),ContactFacsimileTelephone:Tc(gk),ContactElectronicMailAddress:Tc(gk)}),hR=Ic(eR,{ContactPerson:Tc(gk),ContactOrganization:Tc(gk)}),cR=Ic(eR,{AddressType:Tc(gk),Address:Tc(gk),City:Tc(gk),StateOrProvince:Tc(gk),PostCode:Tc(gk),Country:Tc(gk)}),lR=Ic(eR,{Format:Sc(gk)}),vR=Ic(eR,{Name:Tc(gk),Title:Tc(gk),Abstract:Tc(gk),KeywordList:Tc(ER),CRS:Ec(gk),EX_GeographicBoundingBox:Tc((function(t,n){var r=Rc({},pR,t,n);if(!r)return;var i=r.westBoundLongitude,e=r.southBoundLatitude,o=r.eastBoundLongitude,u=r.northBoundLatitude;if(void 0===i||void 0===e||void 0===o||void 0===u)return;return[i,e,o,u]})),BoundingBox:Ec((function(t,n){var r=[wk(t.getAttribute("minx")),wk(t.getAttribute("miny")),wk(t.getAttribute("maxx")),wk(t.getAttribute("maxy"))],i=[wk(t.getAttribute("resx")),wk(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:r,res:i}})),Dimension:Ec((function(t,n){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:dk(t.getAttribute("multipleValues")),nearestValue:dk(t.getAttribute("nearestValue")),current:dk(t.getAttribute("current")),values:gk(t)}})),Attribution:Tc((function(t,n){return Rc({},dR,t,n)})),AuthorityURL:Ec((function(t,n){var r=OR(t,n);if(r)return r.name=t.getAttribute("name"),r;return})),Identifier:Ec(gk),MetadataURL:Ec((function(t,n){var r=OR(t,n);if(r)return r.type=t.getAttribute("type"),r;return})),DataURL:Ec(OR),FeatureListURL:Ec(OR),Style:Ec((function(t,n){return Rc({},gR,t,n)})),MinScaleDenominator:Tc(yk),MaxScaleDenominator:Tc(yk),Layer:Ec(jR)}),dR=Ic(eR,{Title:Tc(gk),OnlineResource:Tc(YP),LogoURL:Tc(MR)}),pR=Ic(eR,{westBoundLongitude:Tc(yk),eastBoundLongitude:Tc(yk),southBoundLatitude:Tc(yk),northBoundLatitude:Tc(yk)}),yR=Ic(eR,{GetCapabilities:Tc(SR),GetMap:Tc(SR),GetFeatureInfo:Tc(SR)}),wR=Ic(eR,{Format:Ec(gk),DCPType:Ec((function(t,n){return Rc({},mR,t,n)}))}),mR=Ic(eR,{HTTP:Tc((function(t,n){return Rc({},bR,t,n)}))}),bR=Ic(eR,{Get:Tc(OR),Post:Tc(OR)}),gR=Ic(eR,{Name:Tc(gk),Title:Tc(gk),Abstract:Tc(gk),LegendURL:Ec(MR),StyleSheetURL:Tc(OR),StyleURL:Tc(OR)}),xR=Ic(eR,{Format:Tc(gk),OnlineResource:Tc(YP)}),_R=Ic(eR,{Keyword:Sc(gk)});function jR(t,n){var r=n[n.length-1],i=Rc({},vR,t,n);if(i){var e=dk(t.getAttribute("queryable"));void 0===e&&(e=r.queryable),i.queryable=void 0!==e&&e;var o=bk(t.getAttribute("cascaded"));void 0===o&&(o=r.cascaded),i.cascaded=o;var u=dk(t.getAttribute("opaque"));void 0===u&&(u=r.opaque),i.opaque=void 0!==u&&u;var s=dk(t.getAttribute("noSubsets"));void 0===s&&(s=r.noSubsets),i.noSubsets=void 0!==s&&s;var a=wk(t.getAttribute("fixedWidth"));a||(a=r.fixedWidth),i.fixedWidth=a;var f=wk(t.getAttribute("fixedHeight"));f||(f=r.fixedHeight),i.fixedHeight=f;["Style","CRS","AuthorityURL"].forEach((function(t){if(t in r){var n=i[t]||[];i[t]=n.concat(r[t])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in i)){var n=r[t];i[t]=n}})),i}}function OR(t,n){return Rc({},xR,t,n)}function SR(t,n){return Rc({},wR,t,n)}function MR(t,n){var r=OR(t,n);if(r){var i=[bk(t.getAttribute("width")),bk(t.getAttribute("height"))];return r.size=i,r}}function ER(t,n){return Rc([],_R,t,n)}var TR=sR,kR=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),AR=function(t){function n(n){var r=t.call(this)||this,i=n||{};return r.Gy="http://mapserver.gis.umn.edu/mapserver",r.zy=new Ak,r.Bf=i.layers?i.layers:null,r}return kR(n,t),n.prototype.getLayers=function(){return this.Bf},n.prototype.setLayers=function(t){this.Bf=t},n.prototype.Pw=function(t,n){t.setAttribute("namespaceURI",this.Gy);var r=t.localName,i=[];if(0===t.childNodes.length)return i;if("msGMLOutput"==r)for(var e=0,o=t.childNodes.length;e<o;e++){var u=t.childNodes[e];if(u.nodeType===Node.ELEMENT_NODE){var s=u,a=n[0],f=s.localName.replace("_layer","");if(!this.Bf||y(this.Bf,f)){var h=f+"_feature";a.featureType=h,a.featureNS=this.Gy;var c={};c[h]=Sc(this.zy.readFeatureElement,this.zy);var l=Ic([a.featureNS,null],c);s.setAttribute("namespaceURI",this.Gy);var v=Rc([],l,s,n,this.zy);v&&b(i,v)}}}if("FeatureCollection"==r){var d=Rc([],this.zy.FEATURE_COLLECTION_PARSERS,t,[{}],this.zy);d&&(i=d)}return i},n.prototype.readFeaturesFromNode=function(t,n){var r={};return n&&k(r,this.getReadOptions(t,n)),this.Pw(t,[r])},n}(sk),CR=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),PR=[null,"http://www.opengis.net/wmts/1.0"],NR=[null,"http://www.opengis.net/ows/1.1"],IR=Ic(PR,{Contents:Tc((function(t,n){return Rc({},RR,t,n)}))}),LR=function(t){function n(){var n=t.call(this)||this;return n.Nw=new hN,n}return CR(n,t),n.prototype.readFromNode=function(t){var n=t.getAttribute("version");n&&(n=n.trim());var r=this.Nw.readFromNode(t);return r?(r.version=n,(r=Rc(r,IR,t,[]))||null):null},n}(VP),RR=Ic(PR,{Layer:Ec((function(t,n){return Rc({},GR,t,n)})),TileMatrixSet:Ec((function(t,n){return Rc({},XR,t,n)}))}),GR=Ic(PR,{Style:Ec((function(t,n){var r=Rc({},zR,t,n);if(!r)return;var i="true"===t.getAttribute("isDefault");return r.isDefault=i,r})),Format:Ec(gk),TileMatrixSetLink:Ec((function(t,n){return Rc({},FR,t,n)})),Dimension:Ec((function(t,n){return Rc({},qR,t,n)})),ResourceURL:Ec((function(t,n){var r=t.getAttribute("format"),i=t.getAttribute("template"),e=t.getAttribute("resourceType"),o={};r&&(o.format=r);i&&(o.template=i);e&&(o.resourceType=e);return o}))},Ic(NR,{Title:Tc(gk),Abstract:Tc(gk),WGS84BoundingBox:Tc(YR),Identifier:Tc(gk)})),zR=Ic(PR,{LegendURL:Ec((function(t,n){var r={};return r.format=t.getAttribute("format"),r.href=YP(t),r}))},Ic(NR,{Title:Tc(gk),Identifier:Tc(gk)})),FR=Ic(PR,{TileMatrixSet:Tc(gk),TileMatrixSetLimits:Tc((function(t,n){return Rc([],DR,t,n)}))}),DR=Ic(PR,{TileMatrixLimits:Sc((function(t,n){return Rc({},UR,t,n)}))}),UR=Ic(PR,{TileMatrix:Tc(gk),MinTileRow:Tc(mk),MaxTileRow:Tc(mk),MinTileCol:Tc(mk),MaxTileCol:Tc(mk)}),qR=Ic(PR,{Default:Tc(gk),Value:Ec(gk)},Ic(NR,{Identifier:Tc(gk)})),BR=Ic(NR,{LowerCorner:Sc(WR),UpperCorner:Sc(WR)}),XR=Ic(PR,{WellKnownScaleSet:Tc(gk),TileMatrix:Ec((function(t,n){return Rc({},VR,t,n)}))},Ic(NR,{SupportedCRS:Tc(gk),Identifier:Tc(gk),BoundingBox:Tc(YR)})),VR=Ic(PR,{TopLeftCorner:Tc(WR),ScaleDenominator:Tc(yk),TileWidth:Tc(mk),TileHeight:Tc(mk),MatrixWidth:Tc(mk),MatrixHeight:Tc(mk)},Ic(NR,{Identifier:Tc(gk)}));function YR(t,n){var r=Rc([],BR,t,n);if(2==r.length)return xn(r)}function WR(t,n){var r=gk(t).split(/\s+/);if(r&&2==r.length){var i=+r[0],e=+r[1];if(!isNaN(i)&&!isNaN(e))return[i,e]}}var ZR=LR,HR=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),KR=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],$R="enterfullscreen",JR="leavefullscreen";function QR(t){var n=t.body;return!!(n.webkitRequestFullscreen||n.msRequestFullscreen&&t.msFullscreenEnabled||n.requestFullscreen&&t.fullscreenEnabled)}function tG(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function nG(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var rG=function(t){function n(n){var r=this,i=n||{};(r=t.call(this,{element:document.createElement("div"),target:i.target})||this).on,r.once,r.un,r.rh=void 0!==i.keys&&i.keys,r.xv=i.source,r.Iw=!1,r.Lw=r.Rw.bind(r),r.Gw=void 0!==i.className?i.className:"ol-full-screen",r.zw=[],r.Fw=void 0!==i.activeClassName?i.activeClassName.split(" "):[r.Gw+"-true"],r.Dw=void 0!==i.inactiveClassName?i.inactiveClassName.split(" "):[r.Gw+"-false"];var e=void 0!==i.label?i.label:"⤢";r.Uw="string"==typeof e?document.createTextNode(e):e;var o=void 0!==i.labelActive?i.labelActive:"×";r.qw="string"==typeof o?document.createTextNode(o):o;var u=i.tipLabel?i.tipLabel:"Toggle full-screen";return r.Bw=document.createElement("button"),r.Bw.title=u,r.Bw.setAttribute("type","button"),r.Bw.appendChild(r.Uw),r.Bw.addEventListener(z,r.Pi.bind(r),!1),r.Xw(r.Bw,r.Iw),r.element.className="".concat(r.Gw," ").concat(Tu," ").concat(Au),r.element.appendChild(r.Bw),r}return HR(n,t),n.prototype.Pi=function(t){t.preventDefault(),this.Vw()},n.prototype.Vw=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(QR(n))if(tG(n))!function(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(n);else{var r=void 0;r=this.xv?"string"==typeof this.xv?n.getElementById(this.xv):this.xv:t.getTargetElement(),this.rh?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():nG(t)}(r):nG(r)}}},n.prototype.Yw=function(){var t=this.getMap();if(t){var n=this.Iw;this.Iw=tG(t.getOwnerDocument()),n!==this.Iw&&(this.Xw(this.Bw,this.Iw),this.Iw?(Ao(this.qw,this.Uw),this.dispatchEvent($R)):(Ao(this.Uw,this.qw),this.dispatchEvent(JR)),t.updateSize())}},n.prototype.Xw=function(t,n){var r,i,e,o;n?((r=t.classList).remove.apply(r,this.Dw),(i=t.classList).add.apply(i,this.Fw)):((e=t.classList).remove.apply(e,this.Fw),(o=t.classList).add.apply(o,this.Dw))},n.prototype.setMap=function(n){var r=this.getMap();r&&r.removeChangeListener(ks,this.Lw),t.prototype.setMap.call(this,n),this.Rw(),n&&n.addChangeListener(ks,this.Lw)},n.prototype.Rw=function(){for(var t=this.zw,n=0,r=t.length;n<r;++n)$(t[n]);t.length=0;var i=this.getMap();if(i){var e=i.getOwnerDocument();QR(e)?this.element.classList.remove(ku):this.element.classList.add(ku);for(n=0,r=KR.length;n<r;++n)t.push(H(e,KR[n],this.Yw,this));this.Yw()}},n}(da),iG=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),eG="projection",oG="coordinateFormat",uG=function(t){function n(n){var r=this,i=n||{},e=document.createElement("div");e.className=void 0!==i.className?i.className:"ol-mouse-position",(r=t.call(this,{element:e,render:i.render,target:i.target})||this).on,r.once,r.un,r.addChangeListener(eG,r.Tt),i.coordinateFormat&&r.setCoordinateFormat(i.coordinateFormat),i.projection&&r.setProjection(i.projection);var o=!0,u="&#160;";return"undefinedHTML"in i?(void 0!==i.undefinedHTML&&(u=i.undefinedHTML),o=!!u):"placeholder"in i&&(!1===i.placeholder?o=!1:u=String(i.placeholder)),r.Ww=u,r.Zw=o,r.Hw=e.innerHTML,r.Kw=null,r.Mt=null,r}return iG(n,t),n.prototype.Tt=function(){this.Mt=null},n.prototype.getCoordinateFormat=function(){return this.get(oG)},n.prototype.getProjection=function(){return this.get(eG)},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.$w(n.getEventPixel(t))},n.prototype.handleMouseOut=function(t){this.$w(null)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var r=n.getViewport();this.listenerKeys.push(H(r,ys,this.handleMouseMove,this)),this.Zw&&this.listenerKeys.push(H(r,bs,this.handleMouseOut,this)),this.$w(null)}},n.prototype.setCoordinateFormat=function(t){this.set(oG,t)},n.prototype.setProjection=function(t){this.set(eG,gi(t))},n.prototype.$w=function(t){var n=this.Ww;if(t&&this.Kw){if(!this.Mt){var r=this.getProjection();this.Mt=r?ki(this.Kw,r):wi}var i=this.getMap().getCoordinateFromPixelInternal(t);if(i){var e=Li();e&&(this.Mt=ki(this.Kw,e)),this.Mt(i,i);var o=this.getCoordinateFormat();n=o?o(i):i.toString()}}this.Hw&&n===this.Hw||(this.element.innerHTML=n,this.Hw=n)},n.prototype.render=function(t){var n=t.frameState;n?this.Kw!=n.viewState.projection&&(this.Kw=n.viewState.projection,this.Mt=null):this.Kw=null},n}(da),sG=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),aG=.75,fG=.1,hG=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return sG(n,t),n.prototype.createRenderer=function(){return new us(this)},n}(la),cG=function(t){function n(n){var r=this,i=n||{};(r=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).Jw=r.Qw.bind(r),r.Si=void 0===i.collapsed||i.collapsed,r.Ti=void 0===i.collapsible||i.collapsible,r.Ti||(r.Si=!1),r.os=void 0!==i.rotateWithView&&i.rotateWithView,r.tm=void 0;var e=void 0!==i.className?i.className:"ol-overviewmap",o=void 0!==i.tipLabel?i.tipLabel:"Overview map",u=void 0!==i.collapseLabel?i.collapseLabel:"‹";"string"==typeof u?(r.ki=document.createElement("span"),r.ki.textContent=u):r.ki=u;var s=void 0!==i.label?i.label:"›";"string"==typeof s?(r.Ai=document.createElement("span"),r.Ai.textContent=s):r.Ai=s;var a=r.Ti&&!r.Si?r.ki:r.Ai,f=document.createElement("button");f.setAttribute("type","button"),f.title=o,f.appendChild(a),f.addEventListener(z,r.Pi.bind(r),!1),r.nm=document.createElement("div"),r.nm.className="ol-overviewmap-map",r.Dy=i.view,r.rm=new hG({view:i.view});var h=r.rm;i.layers&&i.layers.forEach((function(t){h.addLayer(t)}));var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",r.im=new Bf({position:[0,0],positioning:Cf,element:c}),r.rm.addOverlay(r.im);var l=e+" "+"ol-unselectable "+Au+(r.Si&&r.Ti?" ol-collapsed":"")+(r.Ti?"":" ol-uncollapsible"),v=r.element;v.className=l,v.appendChild(r.nm),v.appendChild(f);var d=r,p=r.im,y=r.im.getElement(),w=function(t){var n,r={clientX:(n=t).clientX,clientY:n.clientY},i=h.getEventCoordinateInternal(r);p.setPosition(i)},m=function t(n){var r=h.getEventCoordinateInternal(n);d.getMap().getView().setCenterInternal(r),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",t)};return y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",w),window.addEventListener("mouseup",m)})),r}return sG(n,t),n.prototype.setMap=function(n){var r=this.getMap();if(n!==r){if(r){var i=r.getView();i&&this.om(i),this.rm.setTarget(null)}if(t.prototype.setMap.call(this,n),n){this.rm.setTarget(this.nm),this.listenerKeys.push(H(n,l,this.um,this));var e=n.getView();e&&(this.sm(e),e.isDef()&&(this.rm.updateSize(),this.am())),this.rm.isRendered()||this.fm()}}},n.prototype.um=function(t){if(t.key===As){var n=t.oldValue;n&&this.om(n);var r=this.getMap().getView();this.sm(r)}else this.rm.isRendered()||t.key!==ks&&t.key!==Ts||this.rm.updateSize()},n.prototype.sm=function(t){if(!this.Dy){var n=new ea({projection:t.getProjection()});this.rm.setView(n)}t.addChangeListener(zs.ROTATION,this.Jw),this.Qw()},n.prototype.om=function(t){t.removeChangeListener(zs.ROTATION,this.Jw)},n.prototype.Qw=function(){this.os&&this.rm.getView().setRotation(this.getMap().getView().getRotation())},n.prototype.hm=function(){var t=this.getMap(),n=this.rm;if(t.isRendered()&&n.isRendered()){var r=t.getSize(),i=t.getView().calculateExtentInternal(r);if(!this.tm||!In(i,this.tm)){this.tm=i;var e=n.getSize(),o=n.getView().calculateExtentInternal(e),u=n.getPixelFromCoordinateInternal($n(i)),s=n.getPixelFromCoordinateInternal(Vn(i)),a=Math.abs(u[0]-s[0]),f=Math.abs(u[1]-s[1]),h=e[0],c=e[1];a<h*fG||f<c*fG||a>h*aG||f>c*aG?this.am():Mn(o,i)||this.lm()}}},n.prototype.am=function(){var t=this.getMap(),n=this.rm,r=t.getSize(),i=t.getView().calculateExtentInternal(r),e=n.getView(),o=Math.log(7.5)/Math.LN2;ir(i,1/(Math.pow(2,o/2)*fG)),e.fitInternal(Je(i))},n.prototype.lm=function(){var t=this.getMap(),n=this.rm,r=t.getView();n.getView().setCenterInternal(r.getCenterInternal())},n.prototype.vm=function(){var t=this.getMap(),n=this.rm;if(t.isRendered()&&n.isRendered()){var r=t.getSize(),i=t.getView(),e=n.getView(),o=this.os?0:-i.getRotation(),u=this.im,s=this.im.getElement(),a=i.getCenterInternal(),f=i.getResolution(),h=e.getResolution(),c=r[0]*f/h,l=r[1]*f/h;if(u.setPosition(a),s){s.style.width=c+"px",s.style.height=l+"px";var v="rotate("+o+"rad)";s.style.transform=v}}},n.prototype.fm=function(){this.dm||(this.dm=K(this.rm,_s,(function(t){delete this.dm,this.vm()}),this))},n.prototype.Pi=function(t){t.preventDefault(),this.Ri()},n.prototype.Ri=function(){this.element.classList.toggle(Cu),this.Si?Ao(this.ki,this.Ai):Ao(this.Ai,this.ki),this.Si=!this.Si;var t=this.rm;if(!this.Si){if(t.isRendered())return this.tm=void 0,void t.render();t.updateSize(),this.am(),this.fm()}},n.prototype.getCollapsible=function(){return this.Ti},n.prototype.setCollapsible=function(t){this.Ti!==t&&(this.Ti=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.Si&&this.Ri())},n.prototype.setCollapsed=function(t){this.Ti&&this.Si!==t&&this.Ri()},n.prototype.getCollapsed=function(){return this.Si},n.prototype.getRotateWithView=function(){return this.os},n.prototype.setRotateWithView=function(t){this.os!==t&&(this.os=t,0!==this.getMap().getView().getRotation()&&(this.os?this.Qw():this.rm.getView().setRotation(0),this.tm=void 0,this.hm(),this.vm()))},n.prototype.getOverviewMap=function(){return this.rm},n.prototype.render=function(t){this.hm(),this.vm()},n}(da),lG=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),vG="units",dG="degrees",pG="imperial",yG="nautical",wG="metric",mG="us",bG=[1,2,5],gG=25.4/.28,xG=function(t){function n(n){var r=this,i=n||{},e=void 0!==i.className?i.className:i.bar?"ol-scale-bar":"ol-scale-line";return(r=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).on,r.once,r.un,r.pm=document.createElement("div"),r.pm.className=e+"-inner",r.element.className=e+" "+Tu,r.element.appendChild(r.pm),r.ym=null,r.wm=void 0!==i.minWidth?i.minWidth:64,r.bm=i.maxWidth,r.wn=!1,r.gm=void 0,r.Hw="",r.addChangeListener(vG,r.xm),r.setUnits(i.units||wG),r._m=i.bar||!1,r.jm=i.steps||4,r.Om=i.text||!1,r.Sm=i.dpi||void 0,r}return lG(n,t),n.prototype.getUnits=function(){return this.get(vG)},n.prototype.xm=function(){this.Li()},n.prototype.setUnits=function(t){this.set(vG,t)},n.prototype.setDpi=function(t){this.Sm=t},n.prototype.Li=function(){var t=this.ym;if(t){var n=t.center,r=t.projection,i=this.getUnits(),e=i==dG?zt.DEGREES:zt.METERS,o=xi(r,t.resolution,n,e),u=this.wm*(this.Sm||gG)/gG,s=void 0!==this.bm?this.bm*(this.Sm||gG)/gG:void 0,a=u*o,f="";if(i==dG){var h=Rt[zt.DEGREES];(a*=h)<h/60?(f="″",o*=3600):a<h?(f="′",o*=60):f="°"}else i==pG?a<.9144?(f="in",o/=.0254):a<1609.344?(f="ft",o/=.3048):(f="mi",o/=1609.344):i==yG?(o/=1852,f="NM"):i==wG?a<.001?(f="μm",o*=1e6):a<1?(f="mm",o*=1e3):a<1e3?f="m":(f="km",o/=1e3):i==mG?a<.9144?(f="in",o*=39.37):a<1609.344?(f="ft",o/=.30480061):(f="mi",o/=1609.3472):Ot(!1,33);for(var c,l,v,d,p,y,w,m=3*Math.floor(Math.log(u*o)/Math.log(10));;){v=Math.floor(m/3);var b=Math.pow(10,v);if(c=bG[(m%3+3)%3]*b,l=Math.round(c/o),isNaN(l))return this.element.style.display="none",void(this.wn=!1);if(void 0!==s&&l>=s){c=d,l=p,v=y;break}if(l>=u)break;d=c,p=l,y=v,++m}w=this._m?this.createScaleBar(l,c,f):c.toFixed(v<0?-v:0)+" "+f,this.Hw!=w&&(this.pm.innerHTML=w,this.Hw=w),this.gm!=l&&(this.pm.style.width=l+"px",this.gm=l),this.wn||(this.element.style.display="",this.wn=!0)}else this.wn&&(this.element.style.display="none",this.wn=!1)},n.prototype.createScaleBar=function(t,n,r){for(var i="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),e=[],o=t/this.jm,u="#ffffff",s=0;s<this.jm;s++)0===s&&e.push(this.createMarker("absolute",s)),e.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+u+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.jm?this.createStepText(s,t,!1,n,r):"")+"</div>"),s===this.jm-1&&e.push(this.createStepText(s+1,t,!0,n,r)),u="#ffffff"===u?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.Om?'<div class="ol-scale-text" style="width: '+t+'px;">'+i+"</div>":"")+e.join("")+"</div>"},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},n.prototype.createStepText=function(t,n,r,i,e){var o=(0===t?0:Math.round(i/this.jm*t*100)/100)+(0===t?"":" "+e);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.jm*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.jm*2)+"px;left: "+(r?n+"px":"unset")+';">'+o+"</div>"},n.prototype.getScaleForResolution=function(){var t=xi(this.ym.projection,this.ym.resolution,this.ym.center,zt.METERS),n=this.Sm||gG;return parseFloat(t.toString())*(1e3/25.4)*n},n.prototype.render=function(t){var n=t.frameState;this.ym=n?n.viewState:null,this.Li()},n}(da),_G=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),jG=0,OG=1,SG=function(t){function n(n){var r=this,i=n||{};(r=t.call(this,{element:document.createElement("div"),render:i.render})||this).Pn=[],r.Mm=void 0,r.Em=jG,r.Cn,r.Tm=0,r.km=0,r.Am,r.Cm,r.Pm=null,r.Nm=!1,r.zi=void 0!==i.duration?i.duration:200;var e=void 0!==i.className?i.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=e+"-thumb "+Tu;var u=r.element;return u.className=e+" "+"ol-unselectable "+Au,u.appendChild(o),u.addEventListener(ws,r.Im.bind(r),!1),u.addEventListener(ys,r.Lm.bind(r),!1),u.addEventListener(ms,r.Rm.bind(r),!1),u.addEventListener(z,r.Gm.bind(r),!1),o.addEventListener(z,h,!1),r}return _G(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render()},n.prototype.zm=function(){var t=this.element,n=t.offsetWidth,r=t.offsetHeight;if(0===n&&0===r)return this.Nm=!1;var i=getComputedStyle(t);n-=parseFloat(i.paddingRight)+parseFloat(i.paddingLeft),r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);var e=t.firstElementChild,o=getComputedStyle(e),u=e.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),s=e.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.Pm=[u,s],n>r?(this.Em=OG,this.km=n-u):(this.Em=jG,this.Tm=r-s),this.Nm=!0},n.prototype.Gm=function(t){var n=this.getMap().getView(),r=this.Fm(t.offsetX-this.Pm[0]/2,t.offsetY-this.Pm[1]/2),i=this.Dm(r),e=n.getConstrainedZoom(n.getZoomForResolution(i));n.animateInternal({zoom:e,duration:this.zi,easing:wt})},n.prototype.Im=function(t){if(!this.Cn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.Am=t.clientX-parseFloat(n.style.left),this.Cm=t.clientY-parseFloat(n.style.top),this.Cn=!0,0===this.Pn.length){var r=this.Lm,i=this.Rm,e=this.getMap().getOwnerDocument();this.Pn.push(H(e,ys,r,this),H(e,ms,i,this))}}},n.prototype.Lm=function(t){if(this.Cn){var n=t.clientX-this.Am,r=t.clientY-this.Cm,i=this.Fm(n,r);this.Mm=this.Dm(i),this.getMap().getView().setResolution(this.Mm)}},n.prototype.Rm=function(t){this.Cn&&(this.getMap().getView().endInteraction(),this.Cn=!1,this.Am=void 0,this.Cm=void 0,this.Pn.forEach($),this.Pn.length=0)},n.prototype.Um=function(t){var n=this.qm(t),r=this.element.firstElementChild;this.Em==OG?r.style.left=this.km*n+"px":r.style.top=this.Tm*n+"px"},n.prototype.Fm=function(t,n){return fr(this.Em===OG?t/this.km:n/this.Tm,0,1)},n.prototype.Dm=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},n.prototype.qm=function(t){return fr(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},n.prototype.render=function(t){if(t.frameState&&(this.Nm||this.zm())){var n=t.frameState.viewState.resolution;this.Mm=n,this.Um(n)}},n}(da),MG=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),EG=function(t){function n(n){var r=this,i=n||{};(r=t.call(this,{element:document.createElement("div"),target:i.target})||this).extent=i.extent?i.extent:null;var e=void 0!==i.className?i.className:"ol-zoom-extent",o=void 0!==i.label?i.label:"E",u=void 0!==i.tipLabel?i.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=u,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(z,r.Pi.bind(r),!1);var a=e+" "+"ol-unselectable "+Au,f=r.element;return f.className=a,f.appendChild(s),r}return MG(n,t),n.prototype.Pi=function(t){t.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Je(n))},n}(da),TG={};TG.AssertionError=f,TG.Collection=ht,TG.Collection.CollectionEvent=ft,TG.DataTile=jt,TG.Disposable=v,TG.Feature=Et,TG.Feature.createStyleFunction=Mt,TG.Geolocation=vo,TG.Image=Oo,TG.Image.listenImage=jo,TG.ImageBase=yo,TG.ImageCanvas=Mo,TG.ImageTile=Lo,TG.Kinetic=Ro,TG.Map=Mf,TG.MapBrowserEvent=ds,TG.MapBrowserEventHandler=xs,TG.MapEvent=ls,TG.Object=et,TG.Object.ObjectEvent=it,TG.Observable=nt,TG.Observable.unByKey=tt,TG.Overlay=Bf,TG.PluggableMap=la,TG.Tile=xt,TG.TileCache=Qf,TG.TileQueue=Is,TG.TileQueue.getTilePriority=Ls,TG.TileRange=rh,TG.TileRange.createOrUpdate=nh,TG.VectorRenderTile=oh,TG.VectorTile=sh,TG.View=ea,TG.View.createCenterConstraint=Qs,TG.View.createResolutionConstraint=ta,TG.View.createRotationConstraint=na,TG.View.isNoopAnimation=ra,TG.array={},TG.array.binarySearch=d,TG.array.equals=x,TG.array.extend=b,TG.array.find=g,TG.array.findIndex=_,TG.array.includes=y,TG.array.isSorted=j,TG.array.linearFindNearest=w,TG.array.numberSafeCompareFunction=p,TG.array.remove=function(t,n){var r=t.indexOf(n),i=r>-1;return i&&t.splice(r,1),i},TG.array.reverseSubArray=m,TG.array.stableSort=function(t,n){var r,i=t.length,e=Array(t.length);for(r=0;r<i;r++)e[r]={index:r,value:t[r]};for(e.sort((function(t,r){return n(t.value,r.value)||t.index-r.index})),r=0;r<t.length;r++)t[r]=e[r].value},TG.asserts={},TG.asserts.assert=Ot,TG.centerconstraint={},TG.centerconstraint.createExtent=Ds,TG.centerconstraint.none=Us,TG.color={},TG.color.asArray=qo,TG.color.asString=Fo,TG.color.fromString=Uo,TG.color.isStringColor=Vo,TG.color.normalize=Bo,TG.color.toString=Xo,TG.colorlike={},TG.colorlike.asColorLike=ah,TG.control={},TG.control.Attribution=ya,TG.control.Control=da,TG.control.FullScreen=rG,TG.control.MousePosition=uG,TG.control.OverviewMap=cG,TG.control.Rotate=ma,TG.control.ScaleLine=xG,TG.control.Zoom=ga,TG.control.ZoomSlider=SG,TG.control.ZoomToExtent=EG,TG.control.defaults=xa,TG.coordinate={},TG.coordinate.add=Hr,TG.coordinate.closestOnCircle=Kr,TG.coordinate.closestOnSegment=$r,TG.coordinate.createStringXY=function(t){return function(n){return ui(n,t)}},TG.coordinate.degreesToStringHDMS=Jr,TG.coordinate.distance=ei,TG.coordinate.equals=ti,TG.coordinate.format=Qr,TG.coordinate.getWorldsAway=ai,TG.coordinate.rotate=ni,TG.coordinate.scale=ri,TG.coordinate.squaredDistance=ii,TG.coordinate.squaredDistanceToSegment=oi,TG.coordinate.toStringHDMS=function(t,n){return t?Jr("NS",t[1],n)+" "+Jr("EW",t[0],n):""},TG.coordinate.toStringXY=ui,TG.coordinate.wrapX=si,TG.css={},TG.css.CLASS_COLLAPSED=Cu,TG.css.CLASS_CONTROL=Au,TG.css.CLASS_HIDDEN=Mu,TG.css.CLASS_SELECTABLE=Eu,TG.css.CLASS_UNSELECTABLE=Tu,TG.css.CLASS_UNSUPPORTED=ku,TG.css.cssOpacity=Lu,TG.css.getFontParameters=Iu,TG.dom={},TG.dom.createCanvasContext2D=Eo,TG.dom.outerHeight=ko,TG.dom.outerWidth=To,TG.dom.removeChildren=Po,TG.dom.removeNode=Co,TG.dom.replaceChildren=No,TG.dom.replaceNode=Ao,TG.easing={},TG.easing.easeIn=yt,TG.easing.easeOut=wt,TG.easing.inAndOut=mt,TG.easing.linear=bt,TG.easing.upAndDown=function(t){return t<.5?mt(2*t):1-mt(2*(t-.5))},TG.events={},TG.events.Event=c,TG.events.Event.preventDefault=function(t){t.preventDefault()},TG.events.Event.stopPropagation=h,TG.events.Target=I,TG.events.condition={},TG.events.condition.all=Pa,TG.events.condition.altKeyOnly=Na,TG.events.condition.altShiftKeysOnly=Ia,TG.events.condition.always=Ga,TG.events.condition.click=function(t){return t.type==ps.CLICK},TG.events.condition.doubleClick=function(t){return t.type==ps.DBLCLICK},TG.events.condition.focus=La,TG.events.condition.focusWithTabindex=Ra,TG.events.condition.mouseActionButton=za,TG.events.condition.mouseOnly=Xa,TG.events.condition.never=Fa,TG.events.condition.noModifierKeys=Ua,TG.events.condition.penOnly=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"pen"===n.pointerType},TG.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&(Xt?n.metaKey:n.ctrlKey)&&!n.shiftKey},TG.events.condition.pointerMove=function(t){return"pointermove"==t.type},TG.events.condition.primaryAction=Va,TG.events.condition.shiftKeyOnly=qa,TG.events.condition.singleClick=Da,TG.events.condition.targetNotEditable=Ba,TG.events.condition.touchOnly=function(t){var n=t.originalEvent;return Ot(void 0!==n,56),"touch"===n.pointerType},TG.events.listen=H,TG.events.listenOnce=K,TG.events.unlistenByKey=$,TG.extent={},TG.extent.applyTransform=or,TG.extent.approximatelyEquals=Ln,TG.extent.boundingExtent=xn,TG.extent.buffer=_n,TG.extent.clone=jn,TG.extent.closestSquaredDistanceXY=On,TG.extent.containsCoordinate=Sn,TG.extent.containsExtent=Mn,TG.extent.containsXY=En,TG.extent.coordinateRelationship=Tn,TG.extent.createEmpty=kn,TG.extent.createOrUpdate=An,TG.extent.createOrUpdateEmpty=Cn,TG.extent.createOrUpdateFromCoordinate=Pn,TG.extent.createOrUpdateFromCoordinates=function(t,n){return zn(Cn(n),t)},TG.extent.createOrUpdateFromFlatCoordinates=Nn,TG.extent.createOrUpdateFromRings=function(t,n){return Dn(Cn(n),t)},TG.extent.equals=In,TG.extent.extend=Rn,TG.extent.extendCoordinate=Gn,TG.extent.extendCoordinates=zn,TG.extent.extendFlatCoordinates=Fn,TG.extent.extendRings=Dn,TG.extent.extendXY=Un,TG.extent.forEachCorner=qn,TG.extent.getArea=Bn,TG.extent.getBottomLeft=Xn,TG.extent.getBottomRight=Vn,TG.extent.getCenter=Yn,TG.extent.getCorner=Wn,TG.extent.getEnlargedArea=function(t,n){var r=Math.min(t[0],n[0]),i=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-r)*(Math.max(t[3],n[3])-i)},TG.extent.getForViewAndSize=Zn,TG.extent.getHeight=Hn,TG.extent.getIntersection=Kn,TG.extent.getIntersectionArea=function(t,n){return Bn(Kn(t,n))},TG.extent.getMargin=function(t){return Qn(t)+Hn(t)},TG.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},TG.extent.getTopLeft=$n,TG.extent.getTopRight=Jn,TG.extent.getWidth=Qn,TG.extent.intersects=tr,TG.extent.intersectsSegment=er,TG.extent.isEmpty=nr,TG.extent.returnOrUpdate=rr,TG.extent.scaleFromCenter=ir,TG.extent.wrapAndSliceX=sr,TG.extent.wrapX=ur,TG.featureloader={},TG.featureloader.loadFeaturesXhr=dh,TG.featureloader.setWithCredentials=function(t){vh=t},TG.featureloader.xhr=ph,TG.format={},TG.format.EsriJSON=ok,TG.format.Feature=jj,TG.format.Feature.transformExtentWithOptions=Sj,TG.format.Feature.transformGeometryWithOptions=Oj,TG.format.GML=Rk,TG.format.GML2=Ak,TG.format.GML3=Ik,TG.format.GML32=Fk,TG.format.GMLBase=lk,TG.format.GMLBase.GMLNS=fk,TG.format.GPX=xA,TG.format.GeoJSON=Xj,TG.format.IGC=NA,TG.format.IIIFInfo=Qb,TG.format.JSONFeature=Dj,TG.format.KML=RP,TG.format.KML.getDefaultFillStyle=function(){return $A},TG.format.KML.getDefaultImageStyle=function(){return QA},TG.format.KML.getDefaultStrokeStyle=function(){return nC},TG.format.KML.getDefaultStyle=function(){return iC},TG.format.KML.getDefaultStyleArray=function(){return oC},TG.format.KML.getDefaultTextStyle=function(){return rC},TG.format.KML.readFlatCoordinates=cC,TG.format.MVT=Pj,TG.format.OSMXML=XP,TG.format.OWS=hN,TG.format.Polyline=xN,TG.format.Polyline.decodeDeltas=vN,TG.format.Polyline.decodeFloats=pN,TG.format.Polyline.decodeSignedIntegers=wN,TG.format.Polyline.decodeUnsignedIntegers=bN,TG.format.Polyline.encodeDeltas=lN,TG.format.Polyline.encodeFloats=dN,TG.format.Polyline.encodeSignedIntegers=yN,TG.format.Polyline.encodeUnsignedInteger=gN,TG.format.Polyline.encodeUnsignedIntegers=mN,TG.format.TextFeature=OA,TG.format.TopoJSON=AN,TG.format.WFS=gL,TG.format.WFS.writeFilter=function(t,n){var r=n||"1.1.0",i=mc(bL(r),"Filter"),e={node:i};return k(e,{version:r,filter:t}),iL(i,t,[e]),i},TG.format.WKB=LL,TG.format.WKT=rR,TG.format.WMSCapabilities=TR,TG.format.WMSGetFeatureInfo=AR,TG.format.WMTSCapabilities=ZR,TG.format.XML=VP,TG.format.XMLFeature=sk,TG.format.filter={},TG.format.filter.And=LN,TG.format.filter.Bbox=GN,TG.format.filter.Comparison=WN,TG.format.filter.ComparisonBinary=$N,TG.format.filter.Contains=UN,TG.format.filter.DWithin=BN,TG.format.filter.Disjoint=VN,TG.format.filter.During=HN,TG.format.filter.EqualTo=QN,TG.format.filter.Filter=CN,TG.format.filter.GreaterThan=nI,TG.format.filter.GreaterThanOrEqualTo=iI,TG.format.filter.Intersects=oI,TG.format.filter.IsBetween=sI,TG.format.filter.IsLike=fI,TG.format.filter.IsNull=cI,TG.format.filter.LessThan=vI,TG.format.filter.LessThanOrEqualTo=pI,TG.format.filter.LogicalNary=NN,TG.format.filter.Not=wI,TG.format.filter.NotEqualTo=bI,TG.format.filter.Or=xI,TG.format.filter.ResourceId=jI,TG.format.filter.Spatial=FN,TG.format.filter.Within=SI,TG.format.filter.and=MI,TG.format.filter.bbox=EI,TG.format.filter.between=function(t,n,r){return new sI(t,n,r)},TG.format.filter.contains=function(t,n,r){return new UN(t,n,r)},TG.format.filter.disjoint=function(t,n,r){return new VN(t,n,r)},TG.format.filter.during=function(t,n,r){return new HN(t,n,r)},TG.format.filter.dwithin=function(t,n,r,i,e){return new BN(t,n,r,i,e)},TG.format.filter.equalTo=function(t,n,r){return new QN(t,n,r)},TG.format.filter.greaterThan=function(t,n){return new nI(t,n)},TG.format.filter.greaterThanOrEqualTo=function(t,n){return new iI(t,n)},TG.format.filter.intersects=function(t,n,r){return new oI(t,n,r)},TG.format.filter.isNull=function(t){return new cI(t)},TG.format.filter.lessThan=function(t,n){return new vI(t,n)},TG.format.filter.lessThanOrEqualTo=function(t,n){return new pI(t,n)},TG.format.filter.like=function(t,n,r,i,e,o){return new fI(t,n,r,i,e,o)},TG.format.filter.not=function(t){return new wI(t)},TG.format.filter.notEqualTo=function(t,n,r){return new bI(t,n,r)},TG.format.filter.or=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(xI,n))},TG.format.filter.resourceId=function(t){return new jI(t)},TG.format.filter.within=function(t,n,r){return new SI(t,n,r)},TG.format.xlink={},TG.format.xlink.readHref=YP,TG.format.xsd={},TG.format.xsd.readBoolean=vk,TG.format.xsd.readBooleanString=dk,TG.format.xsd.readDateTime=pk,TG.format.xsd.readDecimal=yk,TG.format.xsd.readDecimalString=wk,TG.format.xsd.readNonNegativeIntegerString=bk,TG.format.xsd.readPositiveInteger=mk,TG.format.xsd.readString=gk,TG.format.xsd.writeBooleanTextNode=xk,TG.format.xsd.writeCDATASection=_k,TG.format.xsd.writeDateTimeTextNode=jk,TG.format.xsd.writeDecimalTextNode=Ok,TG.format.xsd.writeNonNegativeIntegerTextNode=Sk,TG.format.xsd.writeStringTextNode=Mk,TG.functions={},TG.functions.FALSE=S,TG.functions.TRUE=O,TG.functions.VOID=M,TG.functions.memoizeOne=E,TG.functions.toPromise=T,TG.geom={},TG.geom.Circle=rT,TG.geom.Geometry=Ki,TG.geom.GeometryCollection=Gj,TG.geom.LineString=J_,TG.geom.LinearRing=Me,TG.geom.MultiLineString=tj,TG.geom.MultiPoint=W_,TG.geom.MultiPolygon=ij,TG.geom.Point=Te,TG.geom.Polygon=Ke,TG.geom.Polygon.circular=$e,TG.geom.Polygon.fromCircle=Qe,TG.geom.Polygon.fromExtent=Je,TG.geom.Polygon.makeRegular=to,TG.geom.SimpleGeometry=te,TG.geom.SimpleGeometry.getStrideForLayout=Ji,TG.geom.SimpleGeometry.transformGeom2D=Qi,TG.geom.flat={},TG.geom.flat.area={},TG.geom.flat.area.linearRing=_e,TG.geom.flat.area.linearRings=je,TG.geom.flat.area.linearRingss=Oe,TG.geom.flat.center={},TG.geom.flat.center.linearRingss=nj,TG.geom.flat.closest={},TG.geom.flat.closest.arrayMaxSquaredDelta=ie,TG.geom.flat.closest.assignClosestArrayPoint=ue,TG.geom.flat.closest.assignClosestMultiArrayPoint=se,TG.geom.flat.closest.assignClosestPoint=oe,TG.geom.flat.closest.maxSquaredDelta=re,TG.geom.flat.closest.multiArrayMaxSquaredDelta=ee,TG.geom.flat.contains={},TG.geom.flat.contains.linearRingContainsExtent=ke,TG.geom.flat.contains.linearRingContainsXY=Ae,TG.geom.flat.contains.linearRingsContainsXY=Ce,TG.geom.flat.contains.linearRingssContainsXY=Pe,TG.geom.flat.deflate={},TG.geom.flat.deflate.deflateCoordinate=ae,TG.geom.flat.deflate.deflateCoordinates=fe,TG.geom.flat.deflate.deflateCoordinatesArray=he,TG.geom.flat.deflate.deflateMultiCoordinatesArray=ce,TG.geom.flat.flip={},TG.geom.flat.flip.flipXY=$T,TG.geom.flat.geodesic={},TG.geom.flat.geodesic.greatCircleArc=function(t,n,r,i,e,o){var u=gi("EPSG:4326"),s=Math.cos(yr(n)),a=Math.sin(yr(n)),f=Math.cos(yr(i)),h=Math.sin(yr(i)),c=Math.cos(yr(r-t)),l=Math.sin(yr(r-t)),v=a*h+s*f*c;return hj((function(n){if(1<=v)return[r,i];var e=n*Math.acos(v),o=Math.cos(e),u=Math.sin(e),d=l*f,p=s*h-a*f*c,y=Math.atan2(d,p),w=Math.asin(a*o+s*u*Math.cos(y));return[pr(yr(t)+Math.atan2(Math.sin(y)*u*s,o-a*Math.sin(w))),pr(w)]}),Ai(u,e),o)},TG.geom.flat.geodesic.meridian=cj,TG.geom.flat.geodesic.parallel=lj,TG.geom.flat.inflate={},TG.geom.flat.inflate.inflateCoordinates=be,TG.geom.flat.inflate.inflateCoordinatesArray=ge,TG.geom.flat.inflate.inflateMultiCoordinatesArray=xe,TG.geom.flat.interiorpoint={},TG.geom.flat.interiorpoint.getInteriorPointOfArray=Ne,TG.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=Ie,TG.geom.flat.interpolate={},TG.geom.flat.interpolate.interpolatePoint=Z_,TG.geom.flat.interpolate.lineStringCoordinateAtM=H_,TG.geom.flat.interpolate.lineStringsCoordinateAtM=K_,TG.geom.flat.intersectsextent={},TG.geom.flat.intersectsextent.intersectsLineString=Re,TG.geom.flat.intersectsextent.intersectsLineStringArray=Ge,TG.geom.flat.intersectsextent.intersectsLinearRing=ze,TG.geom.flat.intersectsextent.intersectsLinearRingArray=Fe,TG.geom.flat.intersectsextent.intersectsLinearRingMultiArray=De,TG.geom.flat.length={},TG.geom.flat.length.lineStringLength=y_,TG.geom.flat.length.linearRingLength=function(t,n,r,i){var e=y_(t,n,r,i),o=t[r-i]-t[n],u=t[r-i+1]-t[n+1];return e+=Math.sqrt(o*o+u*u)},TG.geom.flat.orient={},TG.geom.flat.orient.inflateEnds=We,TG.geom.flat.orient.linearRingIsClockwise=qe,TG.geom.flat.orient.linearRingsAreOriented=Be,TG.geom.flat.orient.linearRingssAreOriented=Xe,TG.geom.flat.orient.orientLinearRings=Ve,TG.geom.flat.orient.orientLinearRingsArray=Ye,TG.geom.flat.reverse={},TG.geom.flat.reverse.coordinates=Ue,TG.geom.flat.segments={},TG.geom.flat.segments.forEach=Le,TG.geom.flat.simplify={},TG.geom.flat.simplify.douglasPeucker=le,TG.geom.flat.simplify.douglasPeuckerArray=ve,TG.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,r,i,e,o,u,s){for(var a=0,f=r.length;a<f;++a){var h=r[a],c=[];u=ve(t,n,h,i,e,o,u,c),s.push(c),n=h[h.length-1]}return u},TG.geom.flat.simplify.quantize=ye,TG.geom.flat.simplify.quantizeArray=we,TG.geom.flat.simplify.quantizeMultiArray=me,TG.geom.flat.simplify.radialDistance=de,TG.geom.flat.simplify.simplifyLineString=function(t,n,r,i,e,o,u){var s=void 0!==u?u:[];return o||(r=de(t,n,r,i,e,s,0),t=s,n=0,i=2),s.length=le(t,n,r,i,e,s,0),s},TG.geom.flat.simplify.snap=pe,TG.geom.flat.straightchunk={},TG.geom.flat.straightchunk.matchingChunk=f_,TG.geom.flat.textpath={},TG.geom.flat.textpath.drawTextOnPath=p_,TG.geom.flat.topology={},TG.geom.flat.topology.lineStringIsClosed=function(t,n,r,i){var e=r-i;return t[n]===t[e]&&t[n+1]===t[e+1]&&(r-n)/i>3&&!!_e(t,n,r,i)},TG.geom.flat.transform={},TG.geom.flat.transform.rotate=Vi,TG.geom.flat.transform.scale=Yi,TG.geom.flat.transform.transform2D=Xi,TG.geom.flat.transform.translate=Wi,TG.has={},TG.has.DEVICE_PIXEL_RATIO=Vt,TG.has.FIREFOX=Dt,TG.has.IMAGE_DECODE=Wt,TG.has.MAC=Xt,TG.has.PASSIVE_EVENT_LISTENERS=Zt,TG.has.SAFARI=Ut,TG.has.SAFARI_BUG_237906=qt,TG.has.WEBKIT=Bt,TG.has.WORKER_OFFSCREEN_CANVAS=Yt,TG.interaction={},TG.interaction.DoubleClickZoom=Ta,TG.interaction.DragAndDrop=$E,TG.interaction.DragAndDrop.DragAndDropEvent=KE,TG.interaction.DragBox=of,TG.interaction.DragBox.DragBoxEvent=ef,TG.interaction.DragPan=Wa,TG.interaction.DragRotate=Ha,TG.interaction.DragRotateAndZoom=QE,TG.interaction.DragZoom=sf,TG.interaction.Draw=lT,TG.interaction.Draw.DrawEvent=cT,TG.interaction.Draw.createBox=function(){return function(t,n,r){var i=xn([t[0],t[t.length-1]].map((function(t){return Gi(t,r)}))),e=[[Xn(i),Vn(i),Jn(i),$n(i),Xn(i)]],o=n;o?o.setCoordinates(e):o=new Ke(e);var u=Li();return u&&o.transform(r,u),o}},TG.interaction.Draw.createRegularPolygon=function(t,n){return function(r,i,e){var o=Gi(r[0],e),u=Gi(r[r.length-1],e),s=Math.sqrt(ii(o,u)),a=i||Qe(new rT(o),t),f=n;if(!n&&0!==n){var h=u[0]-o[0],c=u[1]-o[1];f=Math.atan2(c,h)}to(a,o,s,f);var l=Li();return l&&a.transform(e,l),a}},TG.interaction.Extent=bT,TG.interaction.Extent.ExtentEvent=pT,TG.interaction.Interaction=Ma,TG.interaction.Interaction.pan=Oa,TG.interaction.Interaction.zoomByDelta=Sa,TG.interaction.KeyboardPan=vf,TG.interaction.KeyboardZoom=pf,TG.interaction.Link=OT,TG.interaction.Modify=LT,TG.interaction.Modify.ModifyEvent=CT,TG.interaction.MouseWheelZoom=bf,TG.interaction.PinchRotate=xf,TG.interaction.PinchZoom=jf,TG.interaction.Pointer=Ca,TG.interaction.Pointer.centroid=Aa,TG.interaction.Select=DT,TG.interaction.Select.SelectEvent=zT,TG.interaction.Snap=XT,TG.interaction.Translate=KT,TG.interaction.Translate.TranslateEvent=HT,TG.interaction.defaults=Of,TG.layer={},TG.layer.Base=au,TG.layer.BaseImage=Vg,TG.layer.BaseTile=ix,TG.layer.BaseVector=Yx,TG.layer.Graticule=yj,TG.layer.Group=hs,TG.layer.Group.GroupEvent=as,TG.layer.Heatmap=_j,TG.layer.Image=Qg,TG.layer.Layer=gu,TG.layer.Layer.inView=bu,TG.layer.MapboxVector=FE,TG.layer.Tile=sx,TG.layer.Vector=fj,TG.layer.VectorImage=UE,TG.layer.VectorTile=Ij,TG.layer.WebGLPoints=BE,TG.layer.WebGLTile=WE,TG.loadingstrategy={},TG.loadingstrategy.all=yh,TG.loadingstrategy.bbox=function(t,n){return[t]},TG.loadingstrategy.tile=function(t){return function(n,r,i){var e=t.getZForResolution(Ui(r,i)),o=t.getTileRangeForExtentAndZ(Fi(n,i),e),u=[],s=[e,0,0];for(s[1]=o.minX;s[1]<=o.maxX;++s[1])for(s[2]=o.minY;s[2]<=o.maxY;++s[2])u.push(zi(t.getTileCoordExtent(s),i));return u}},TG.math={},TG.math.ceil=_r,TG.math.clamp=fr,TG.math.cosh=hr,TG.math.floor=xr,TG.math.lerp=mr,TG.math.log2=cr,TG.math.modulo=wr,TG.math.round=gr,TG.math.solveLinearSystem=dr,TG.math.squaredDistance=vr,TG.math.squaredSegmentDistance=lr,TG.math.toDegrees=pr,TG.math.toFixed=br,TG.math.toRadians=yr,TG.net={},TG.net.ClientError=xh,TG.net.ResponseError=gh,TG.net.getJSON=_h,TG.net.jsonp=mh,TG.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(bh=XMLHttpRequest),global.XMLHttpRequest=t},TG.net.resolveUrl=jh,TG.net.restoreXHR=function(){global.XMLHttpRequest=bh},TG.obj={},TG.obj.assign=k,TG.obj.clear=A,TG.obj.getValues=C,TG.obj.isEmpty=P,TG.proj={},TG.proj.Projection=ar,TG.proj.Units={},TG.proj.Units.METERS_PER_UNIT=Rt,TG.proj.Units.fromCode=Lt,TG.proj.addCommon=Bi,TG.proj.addCoordinateTransforms=Mi,TG.proj.addEquivalentProjections=_i,TG.proj.addEquivalentTransforms=ji,TG.proj.addProjection=mi,TG.proj.addProjections=bi,TG.proj.clearAllProjections=function(){Dr(),Xr()},TG.proj.clearUserProjection=function(){Ni=null},TG.proj.cloneTransform=yi,TG.proj.createProjection=Oi,TG.proj.createSafeCoordinateTransform=qi,TG.proj.createTransformFromCoordinateTransform=Si,TG.proj.disableCoordinateWarning=pi,TG.proj.epsg3857={},TG.proj.epsg3857.EXTENT=Mr,TG.proj.epsg3857.HALF_SIZE=Sr,TG.proj.epsg3857.MAX_SAFE_Y=Tr,TG.proj.epsg3857.PROJECTIONS=Ar,TG.proj.epsg3857.RADIUS=Or,TG.proj.epsg3857.WORLD_EXTENT=Er,TG.proj.epsg3857.fromEPSG4326=Cr,TG.proj.epsg3857.toEPSG4326=Pr,TG.proj.epsg4326={},TG.proj.epsg4326.EXTENT=Lr,TG.proj.epsg4326.METERS_PER_UNIT=Rr,TG.proj.epsg4326.PROJECTIONS=zr,TG.proj.epsg4326.RADIUS=Ir,TG.proj.equivalent=Ti,TG.proj.fromLonLat=Ei,TG.proj.fromUserCoordinate=Gi,TG.proj.fromUserExtent=Fi,TG.proj.fromUserResolution=Ui,TG.proj.get=gi,TG.proj.getPointResolution=xi,TG.proj.getTransform=Ai,TG.proj.getTransformFromProjections=ki,TG.proj.getUserProjection=Li,TG.proj.identityTransform=wi,TG.proj.proj4={},TG.proj.proj4.register=function(t){var n,r,i=Object.keys(t.defs),e=i.length;for(n=0;n<e;++n){var o=i[n];if(!gi(o)){var u=t.defs(o),s=u.units;s||"longlat"!==u.projName||(s=zt.DEGREES),mi(new ar({code:o,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:s}))}}for(n=0;n<e;++n){var a=i[n],f=gi(a);for(r=0;r<e;++r){var h=i[r],c=gi(h);if(!Yr(a,h))if(t.defs[a]===t.defs[h])_i([f,c]);else{var l=t(a,h);Mi(f,c,qi(f,c,l.forward),qi(c,f,l.inverse))}}}},TG.proj.projections={},TG.proj.projections.add=qr,TG.proj.projections.clear=Dr,TG.proj.projections.get=Ur,TG.proj.setUserProjection=Ii,TG.proj.toLonLat=function(t,n){var r=Ci(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),i=r[0];return(i<-180||i>180)&&(r[0]=wr(i+180,360)-180),r},TG.proj.toUserCoordinate=Ri,TG.proj.toUserExtent=zi,TG.proj.toUserResolution=Di,TG.proj.transform=Ci,TG.proj.transformExtent=Pi,TG.proj.transformWithProjections=function(t,n,r){return ki(n,r)(t)},TG.proj.transforms={},TG.proj.transforms.add=Vr,TG.proj.transforms.clear=Xr,TG.proj.transforms.get=Yr,TG.proj.transforms.remove=function(t,n){var r=t.getCode(),i=n.getCode(),e=Br[r][i];return delete Br[r][i],P(Br[r])&&delete Br[r],e},TG.proj.useGeographic=function(){Ii("EPSG:4326")},TG.render={},TG.render.Box=$a,TG.render.Event=Su,TG.render.Feature=sj,TG.render.Feature.toFeature=function(t,n){var r=t.getId(),i=uj(t),e=t.getProperties(),o=new Et;return void 0!==n&&o.setGeometryName(n),o.setGeometry(i),void 0!==r&&o.setId(r),o.setProperties(e,!0),o},TG.render.Feature.toGeometry=uj,TG.render.VectorContext=Oh,TG.render.canvas={},TG.render.canvas.Builder=r_,TG.render.canvas.BuilderGroup=d_,TG.render.canvas.Executor=M_,TG.render.canvas.ExecutorGroup=C_,TG.render.canvas.ExecutorGroup.getPixelIndexArray=A_,TG.render.canvas.ImageBuilder=e_,TG.render.canvas.Immediate=Mh,TG.render.canvas.Instruction={},TG.render.canvas.Instruction.beginPathInstruction=Jx,TG.render.canvas.Instruction.closePathInstruction=Qx,TG.render.canvas.Instruction.fillInstruction=Kx,TG.render.canvas.Instruction.strokeInstruction=$x,TG.render.canvas.LineStringBuilder=u_,TG.render.canvas.PolygonBuilder=a_,TG.render.canvas.TextBuilder=l_,TG.render.canvas.checkedFonts=Yu,TG.render.canvas.defaultFillStyle=Gu,TG.render.canvas.defaultFont=Ru,TG.render.canvas.defaultLineCap=zu,TG.render.canvas.defaultLineDash=Fu,TG.render.canvas.defaultLineDashOffset=0,TG.render.canvas.defaultLineJoin=Du,TG.render.canvas.defaultLineWidth=1,TG.render.canvas.defaultMiterLimit=Uu,TG.render.canvas.defaultPadding=Vu,TG.render.canvas.defaultStrokeStyle=qu,TG.render.canvas.defaultTextAlign=Bu,TG.render.canvas.defaultTextBaseline=Xu,TG.render.canvas.drawImageOrLabel=es,TG.render.canvas.getTextDimensions=is,TG.render.canvas.hitdetect={},TG.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=P_,TG.render.canvas.hitdetect.createHitDetectionImageData=N_,TG.render.canvas.hitdetect.hitDetect=I_,TG.render.canvas.labelCache=Wu,TG.render.canvas.measureAndCacheTextWidth=rs,TG.render.canvas.measureTextHeight=Qu,TG.render.canvas.measureTextWidth=ns,TG.render.canvas.registerFont=Ju,TG.render.canvas.rotateAtOffset=function(t,n,r,i){0!==n&&(t.translate(r,i),t.rotate(n),t.translate(-r,-i))},TG.render.canvas.textHeights=$u,TG.render.getRenderPixel=function(t,n){return nn(t.inversePixelTransform,n.slice(0))},TG.render.getVectorContext=Fh,TG.render.toContext=function(t,n){var r=t.canvas,i=n||{},e=i.pixelRatio||Vt,o=i.size;o&&(r.width=o[0]*e,r.height=o[1]*e,r.style.width=o[0]+"px",r.style.height=o[1]+"px");var u=[0,0,r.width,r.height],s=en([1,0,0,1,0,0],e,e);return new Mh(t,e,u,s,0)},TG.renderer={},TG.renderer.Composite=us,TG.renderer.Layer=Ol,TG.renderer.Map=ju,TG.renderer.canvas={},TG.renderer.canvas.ImageLayer=$g,TG.renderer.canvas.Layer=Hg,TG.renderer.canvas.TileLayer=ox,TG.renderer.canvas.VectorImageLayer=z_,TG.renderer.canvas.VectorLayer=R_,TG.renderer.canvas.VectorTileLayer=V_,TG.renderer.canvas.common={},TG.renderer.canvas.common.IMAGE_SMOOTHING_DISABLED=Uh,TG.renderer.canvas.common.IMAGE_SMOOTHING_ENABLED=qh,TG.renderer.vector={},TG.renderer.vector.defaultOrder=Ih,TG.renderer.vector.getSquaredTolerance=Lh,TG.renderer.vector.getTolerance=Rh,TG.renderer.vector.renderFeature=Gh,TG.renderer.webgl={},TG.renderer.webgl.Layer=Nl,TG.renderer.webgl.Layer.colorDecodeId=Pl,TG.renderer.webgl.Layer.colorEncodeId=Cl,TG.renderer.webgl.Layer.getBlankImageData=function(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=255,t.data[1]=255,t.data[2]=255,t.data[3]=255,t},TG.renderer.webgl.Layer.writePointFeatureToBuffers=function(t,n,r,i,e,o){var u=3+e,s=t[n+0],a=t[n+1],f=Tl;f.length=e;for(var h=0;h<f.length;h++)f[h]=t[n+2+h];var c=o?o.vertexPosition:0,l=o?o.indexPosition:0,v=c/u;return Al(r,c,s,a,0),f.length&&r.set(f,c+3),Al(r,c+=u,s,a,1),f.length&&r.set(f,c+3),Al(r,c+=u,s,a,2),f.length&&r.set(f,c+3),Al(r,c+=u,s,a,3),f.length&&r.set(f,c+3),c+=u,i[l++]=v,i[l++]=v+1,i[l++]=v+3,i[l++]=v+1,i[l++]=v+2,i[l++]=v+3,kl.vertexPosition=c,kl.indexPosition=l,kl},TG.renderer.webgl.PointsLayer=Zx,TG.renderer.webgl.TileLayer=Bl,TG.renderer.webgl.TileLayer.Attributes=Rl,TG.renderer.webgl.TileLayer.Uniforms=Ll,TG.reproj={},TG.reproj.Image=eg,TG.reproj.Tile=wl,TG.reproj.Triangulation=pl,TG.reproj.calculateSourceExtentResolution=Yh,TG.reproj.calculateSourceResolution=Vh,TG.reproj.common={},TG.reproj.common.ENABLE_RASTER_REPROJECTION=dl,TG.reproj.common.ERROR_THRESHOLD=.5,TG.reproj.render=Wh,TG.resolutionconstraint={},TG.resolutionconstraint.createMinMaxResolution=Ys,TG.resolutionconstraint.createSnapToPower=Vs,TG.resolutionconstraint.createSnapToResolutions=Xs,TG.rotationconstraint={},TG.rotationconstraint.createSnapToN=Hs,TG.rotationconstraint.createSnapToZero=Ks,TG.rotationconstraint.disable=Ws,TG.rotationconstraint.none=Zs,TG.size={},TG.size.buffer=oa,TG.size.hasArea=ua,TG.size.scale=sa,TG.size.toSize=aa,TG.source={},TG.source.BingMaps=jd,TG.source.BingMaps.quadKey=_d,TG.source.CartoDB=Ed,TG.source.Cluster=Fd,TG.source.DataTile=Ud,TG.source.GeoTIFF=zb,TG.source.IIIF=rg,TG.source.Image=cg,TG.source.Image.ImageSourceEvent=fg,TG.source.Image.defaultImageLoadFunction=hg,TG.source.ImageArcGISRest=vg,TG.source.ImageCanvas=pg,TG.source.ImageMapGuide=wg,TG.source.ImageStatic=bg,TG.source.ImageWMS=Eg,TG.source.OGCMapTile=Lg,TG.source.OGCVectorTile=Dg,TG.source.OSM=Bg,TG.source.OSM.ATTRIBUTION=qg,TG.source.Raster=jx,TG.source.Raster.Processor=vx,TG.source.Raster.RasterSourceEvent=mx,TG.source.Raster.newImageData=hx,TG.source.Source=cd,TG.source.Stamen=Tx,TG.source.Tile=pd,TG.source.Tile.TileSourceEvent=dd,TG.source.TileArcGISRest=Ax,TG.source.TileDebug=Px,TG.source.TileImage=gd,TG.source.TileJSON=Ix,TG.source.TileWMS=Rx,TG.source.UTFGrid=Fx,TG.source.UTFGrid.CustomTile=zx,TG.source.UrlTile=wd,TG.source.Vector=Gd,TG.source.Vector.VectorSourceEvent=Rd,TG.source.VectorTile=Gg,TG.source.VectorTile.defaultLoadFunction=zg,TG.source.WMTS=Bx,TG.source.WMTS.optionsFromCapabilities=function(t,n){var r=g(t.Contents.Layer,(function(t,r,i){return t.Identifier==n.layer}));if(null===r)return null;var i,e=t.Contents.TileMatrixSet;(i=r.TileMatrixSetLink.length>1?_(r.TileMatrixSetLink,"projection"in n?function(t,r,i){var o=g(e,(function(n){return n.Identifier==t.TileMatrixSet})).SupportedCRS,u=gi(o),s=gi(n.projection);return u&&s?Ti(u,s):o==n.projection}:function(t,r,i){return t.TileMatrixSet==n.matrixSet}):0)<0&&(i=0);var o=r.TileMatrixSetLink[i].TileMatrixSet,u=r.TileMatrixSetLink[i].TileMatrixSetLimits,s=r.Format[0];"format"in n&&(s=n.format),(i=_(r.Style,(function(t,r,i){return"style"in n?t.Title==n.style:t.isDefault})))<0&&(i=0);var a=r.Style[i].Identifier,f={};"Dimension"in r&&r.Dimension.forEach((function(t,n,r){var i=t.Identifier,e=t.Default;void 0===e&&(e=t.Value[0]),f[i]=e}));var h,c=g(t.Contents.TileMatrixSet,(function(t,n,r){return t.Identifier==o})),l=c.SupportedCRS;if(l&&(h=gi(l)),"projection"in n){var v=gi(n.projection);v&&(h&&!Ti(v,h)||(h=v))}var d=!1,p="ne"==h.getAxisOrientation().substr(0,2),w=c.TileMatrix[0],m={MinTileCol:0,MinTileRow:0,MaxTileCol:w.MatrixWidth-1,MaxTileRow:w.MatrixHeight-1};if(u){m=u[u.length-1];var b=g(c.TileMatrix,(function(t){return t.Identifier===m.TileMatrix||c.Identifier+":"+t.Identifier===m.TileMatrix}));b&&(w=b)}var x=28e-5*w.ScaleDenominator/h.getMetersPerUnit(),j=p?[w.TopLeftCorner[1],w.TopLeftCorner[0]]:w.TopLeftCorner,O=w.TileWidth*x,S=w.TileHeight*x,M=c.BoundingBox;M&&p&&(M=[M[1],M[0],M[3],M[2]]);var E=[j[0]+O*m.MinTileCol,j[1]-S*(1+m.MaxTileRow),j[0]+O*(1+m.MaxTileCol),j[1]-S*m.MinTileRow];if(void 0!==M&&!Mn(M,E)){var T=r.WGS84BoundingBox,k=gi("EPSG:4326").getExtent();if(E=M,T)d=T[0]===k[0]&&T[2]===k[2];else{var A=Pi(M,c.SupportedCRS,"EPSG:4326");d=A[0]-1e-10<=k[0]&&A[2]+1e-10>=k[2]}}var C=Sv(c,E,u),P=[],N=n.requestEncoding;if(N=void 0!==N?N:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var I=t.OperationsMetadata.GetTile.DCP.HTTP.Get,L=0,R=I.length;L<R;++L)if(I[L].Constraint){var G=g(I[L].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===N&&(N=G[0]),N!==Dx)break;y(G,Dx)&&P.push(I[L].href)}else I[L].href&&(N=Dx,P.push(I[L].href));return 0===P.length&&(N=Ux,r.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,P.push(t.template))}))),{urls:P,layer:n.layer,matrixSet:o,format:s,projection:h,requestEncoding:N,tileGrid:C,style:a,dimensions:f,wrapX:d,crossOrigin:n.crossOrigin}},TG.source.XYZ=Sd,TG.source.Zoomify=Bb,TG.source.Zoomify.CustomTile=qb,TG.source.common={},TG.source.common.DEFAULT_WMS_VERSION=gg,TG.source.ogcTileUtil={},TG.source.ogcTileUtil.getMapTileUrlTemplate=Ag,TG.source.ogcTileUtil.getTileSetInfo=Ng,TG.source.ogcTileUtil.getVectorTileUrlTemplate=Cg,TG.source.sourcesFromTileGrid=function(t,n){var r=new Xf(32),i=t.getExtent();return function(e,o){r.expireCache(),i&&(e=Kn(i,e));var u=t.getZForResolution(o),s=[];return t.forEachTileCoord(e,u,(function(t){var i=t.toString();if(!r.containsKey(i)){var e=n(t);r.set(i,e)}s.push(r.get(i))})),s}},TG.sphere={},TG.sphere.DEFAULT_RADIUS=fi,TG.sphere.getArea=function t(n,r){var i=r||{},e=i.radius||fi,o=i.projection||"EPSG:3857",u=n.getType();u!==Pt.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var s,a,f,h,c,l,v=0;switch(u){case Pt.POINT:case Pt.MULTI_POINT:case Pt.LINE_STRING:case Pt.MULTI_LINE_STRING:case Pt.LINEAR_RING:break;case Pt.POLYGON:for(s=n.getCoordinates(),v=Math.abs(li(s[0],e)),f=1,h=s.length;f<h;++f)v-=Math.abs(li(s[f],e));break;case Pt.MULTI_POLYGON:for(f=0,h=(s=n.getCoordinates()).length;f<h;++f)for(a=s[f],v+=Math.abs(li(a[0],e)),c=1,l=a.length;c<l;++c)v-=Math.abs(li(a[c],e));break;case Pt.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,h=d.length;f<h;++f)v+=t(d[f],r);break;default:throw new Error("Unsupported geometry type: "+u)}return v},TG.sphere.getDistance=hi,TG.sphere.getLength=function t(n,r){var i=r||{},e=i.radius||fi,o=i.projection||"EPSG:3857",u=n.getType();u!==Pt.GEOMETRY_COLLECTION&&(n=n.clone().transform(o,"EPSG:4326"));var s,a,f,h,c,l,v=0;switch(u){case Pt.POINT:case Pt.MULTI_POINT:break;case Pt.LINE_STRING:case Pt.LINEAR_RING:v=ci(s=n.getCoordinates(),e);break;case Pt.MULTI_LINE_STRING:case Pt.POLYGON:for(f=0,h=(s=n.getCoordinates()).length;f<h;++f)v+=ci(s[f],e);break;case Pt.MULTI_POLYGON:for(f=0,h=(s=n.getCoordinates()).length;f<h;++f)for(c=0,l=(a=s[f]).length;c<l;++c)v+=ci(a[c],e);break;case Pt.GEOMETRY_COLLECTION:var d=n.getGeometries();for(f=0,h=d.length;f<h;++f)v+=t(d[f],r);break;default:throw new Error("Unsupported geometry type: "+u)}return v},TG.sphere.offset=vi,TG.string={},TG.string.compareVersions=Zr,TG.string.padNumber=Wr,TG.structs={},TG.structs.LRUCache=Xf,TG.structs.LinkedList=id,TG.structs.PriorityQueue=Ps,TG.structs.PriorityQueue.DROP=Cs,TG.structs.RBush=od,TG.style={},TG.style.Circle=Av,TG.style.Fill=Cv,TG.style.Icon=Xv,TG.style.IconImage=qv,TG.style.IconImage.get=Uv,TG.style.IconImageCache=Zo,TG.style.IconImageCache.shared=Ho,TG.style.Image=Mv,TG.style.RegularShape=Tv,TG.style.Stroke=Vv,TG.style.Style=Qv,TG.style.Style.createDefaultStyle=Kv,TG.style.Style.createEditingStyle=$v,TG.style.Style.toFunction=Zv,TG.style.Text=rd,TG.style.expressions={},TG.style.expressions.Operators=$l,TG.style.expressions.PALETTE_TEXTURE_ARRAY=yv,TG.style.expressions.arrayToGlsl=nv,TG.style.expressions.colorToGlsl=rv,TG.style.expressions.expressionToGlsl=ov,TG.style.expressions.getStringNumberEquivalent=iv,TG.style.expressions.getValueType=Jl,TG.style.expressions.isTypeUnique=Ql,TG.style.expressions.numberToGlsl=tv,TG.style.expressions.stringToGlsl=ev,TG.style.expressions.uniformNameForVariable=pv,TG.tilecoord={},TG.tilecoord.createOrUpdate=Vf,TG.tilecoord.fromKey=Hf,TG.tilecoord.getCacheKeyForTileKey=Zf,TG.tilecoord.getKey=Wf,TG.tilecoord.getKeyZXY=Yf,TG.tilecoord.hash=Kf,TG.tilecoord.withinExtentAndZ=$f,TG.tilegrid={},TG.tilegrid.TileGrid=Hh,TG.tilegrid.WMTS=Ov,TG.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Sv,TG.tilegrid.common={},TG.tilegrid.common.DEFAULT_MAX_ZOOM=42,TG.tilegrid.common.DEFAULT_TILE_SIZE=Fs,TG.tilegrid.createForExtent=Jh,TG.tilegrid.createForProjection=nc,TG.tilegrid.createXYZ=Qh,TG.tilegrid.extentFromProjection=rc,TG.tilegrid.getForProjection=Kh,TG.tilegrid.wrapX=$h,TG.tileurlfunction={},TG.tileurlfunction.createFromTemplate=ic,TG.tileurlfunction.createFromTemplates=ec,TG.tileurlfunction.createFromTileUrlFunctions=oc,TG.tileurlfunction.expandUrl=sc,TG.tileurlfunction.nullTileUrlFunction=uc;TG.transform={},TG.transform.apply=nn,TG.transform.compose=sn,TG.transform.composeCssTransform=function(t,n,r,i,e,o,u){return hn(sn([1,0,0,1,0,0],t,n,r,i,e,o,u))},TG.transform.create=Kt,TG.transform.determinant=fn,TG.transform.invert=function(t){return an(t,t)},TG.transform.makeInverse=an,TG.transform.makeScale=on,TG.transform.multiply=Jt,TG.transform.reset=$t,TG.transform.rotate=rn,TG.transform.scale=en,TG.transform.set=Qt,TG.transform.setFromArray=tn,TG.transform.toString=hn,TG.transform.translate=un,TG.uri={},TG.uri.appendParams=ac,TG.util={},TG.util.VERSION=s,TG.util.abstract=i,TG.util.getUid=o,TG.vec={},TG.vec.mat4={},TG.vec.mat4.create=Hc,TG.vec.mat4.fromTransform=Kc,TG.webgl={},TG.webgl.ARRAY_BUFFER=hc,TG.webgl.Buffer=Vc,TG.webgl.Buffer.getArrayClassForType=Xc,TG.webgl.DYNAMIC_DRAW=vc,TG.webgl.ELEMENT_ARRAY_BUFFER=cc,TG.webgl.FLOAT=dc,TG.webgl.Helper=hl,TG.webgl.Helper.computeAttributesStride=al,TG.webgl.PaletteTexture=cl,TG.webgl.PostProcessingPass=Zc,TG.webgl.RenderTarget=vl,TG.webgl.STATIC_DRAW=lc,TG.webgl.STREAM_DRAW=35040,TG.webgl.ShaderBuilder={},TG.webgl.ShaderBuilder.ShaderBuilder=gv,TG.webgl.ShaderBuilder.parseLiteralStyle=xv,TG.webgl.TileTexture=_l,TG.webgl.UNSIGNED_BYTE=5121,TG.webgl.UNSIGNED_INT=5125,TG.webgl.UNSIGNED_SHORT=5123,TG.webgl.getContext=yc,TG.webgl.getSupportedExtensions=function(){if(!fc){var t=yc(document.createElement("canvas"));t&&(fc=t.getSupportedExtensions())}return fc},TG.xml={},TG.xml.OBJECT_PROPERTY_NODE_FACTORY=Pc,TG.xml.XML_SCHEMA_INSTANCE_URI=wc,TG.xml.createElementNS=mc,TG.xml.getAllTextContent=bc,TG.xml.Bm=gc,TG.xml.getAttributeNS=_c,TG.xml.getDocument=qc,TG.xml.getXMLSerializer=Dc,TG.xml.isDocument=xc,TG.xml.makeArrayExtender=Oc,TG.xml.makeArrayPusher=Sc,TG.xml.makeArraySerializer=Ac,TG.xml.makeChildAppender=kc,TG.xml.makeObjectPropertyPusher=Ec,TG.xml.makeObjectPropertySetter=Tc,TG.xml.makeReplacer=Mc,TG.xml.makeSequence=Nc,TG.xml.makeSimpleNodeFactory=Cc,TG.xml.makeStructureNS=Ic,TG.xml.parse=jc,TG.xml.parseNode=Lc,TG.xml.pushParseAndPop=Rc,TG.xml.pushSerializeAndPop=zc,TG.xml.registerDocument=function(t){Uc=t},TG.xml.registerXMLSerializer=function(t){Fc=t},TG.xml.serialize=Gc;var kG=TG},150:function(t,n,r){"use strict";r.d(n,{Ie:function(){return h},It:function(){return u},L:function(){return i},L5:function(){return l},P1:function(){return d},Qb:function(){return v},pd:function(){return c},sf:function(){return a}});var i={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},e={};for(var o in i)i.hasOwnProperty(o)&&(e[i[o]]=parseInt(o,10));var u=[e.BitsPerSample,e.ExtraSamples,e.SampleFormat,e.StripByteCounts,e.StripOffsets,e.StripRowCounts,e.TileByteCounts,e.TileOffsets,e.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={};for(var f in s)s.hasOwnProperty(f)&&(a[s[f]]=parseInt(f,10));var h={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},c={Unspecified:0,Assocalpha:1,Unassalpha:2},l={Version:0,AddCompression:1},v={None:0,Deflate:1},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},p={};for(var y in d)d.hasOwnProperty(y)&&(p[d[y]]=parseInt(y,10))}},r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={id:t,loaded:!1,exports:{}};return n[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=n,i.d=function(t,n){for(var r in n)i.o(n,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(n,r){return i.f[r](t,n),n}),[]))},i.u=function(t){return t+".ol.js"},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},t={},i.l=function(n,r,e,o){if(t[n])t[n].push(r);else{var u,s;if(void 0!==e)for(var a=document.getElementsByTagName("script"),f=0;f<a.length;f++){var h=a[f];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")=="ol:"+e){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.setAttribute("data-webpack","ol:"+e),u.src=n),t[n]=[r];var c=function(r,i){u.onerror=u.onload=null,clearTimeout(l);var e=t[n];if(delete t[n],u.parentNode&&u.parentNode.removeChild(u),e&&e.forEach((function(t){return t(i)})),r)return r(i)},l=setTimeout(c.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=c.bind(null,u.onerror),u.onload=c.bind(null,u.onload),s&&document.head.appendChild(u)}},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var t;i.g.importScripts&&(t=i.g.location+"");var n=i.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t}(),function(){var t={179:0};i.f.j=function(n,r){var e=i.o(t,n)?t[n]:void 0;if(0!==e)if(e)r.push(e[2]);else{var o=new Promise((function(r,i){e=t[n]=[r,i]}));r.push(e[2]=o);var u=i.p+i.u(n),s=new Error;i.l(u,(function(r){if(i.o(t,n)&&(0!==(e=t[n])&&(t[n]=void 0),e)){var o=r&&("load"===r.type?"missing":r.type),u=r&&r.target&&r.target.src;s.message="Loading chunk "+n+" failed.\n("+o+": "+u+")",s.name="ChunkLoadError",s.type=o,s.request=u,e[1](s)}}),"chunk-"+n,n)}};var n=function(n,r){var e,o,u=r[0],s=r[1],a=r[2],f=0;if(u.some((function(n){return 0!==t[n]}))){for(e in s)i.o(s,e)&&(i.m[e]=s[e]);if(a)a(i)}for(n&&n(r);f<u.length;f++)o=u[f],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=self.webpackChunkol=self.webpackChunkol||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}(),i(760);var e=i(484);return e=e.default}()}));
//# sourceMappingURL=ol.js.map