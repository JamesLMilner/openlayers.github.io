(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{395:function(e,t,i){"use strict";i.r(t);var r=i(2),o=i(3),n=i(6),a=i(135),c=i(194),s=i(15),l=i(81),u=i(23),p=i(30),h=i(1),f=i(56),g=i(87),v=i(92),m={DEFAULT:"default",TRUNCATED:"truncated"},y=function(e){function t(t,i,r,o,n,a,c){e.call(this,i,r,o,n,a,c),this.zoomifyImage_=null,this.tileSize_=Object(f.d)(t.getTileSize(i[0]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=e.prototype.getImage.call(this);if(this.state==s.a.LOADED){var i=this.tileSize_;if(t.width==i[0]&&t.height==i[1])return this.zoomifyImage_=t,t;var r=Object(p.a)(i[0],i[1]);return r.drawImage(t,0,0),this.zoomifyImage_=r.canvas,r.canvas}return t},t}(c.a),z=function(e){function t(t){var i=t||{},r=i.size,o=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:m.DEFAULT,n=r[0],c=r[1],s=i.extent||[0,-r[1],r[0],0],p=[],f=i.tileSize||a.b,g=f;switch(o){case m.DEFAULT:for(;n>g||c>g;)p.push([Math.ceil(n/g),Math.ceil(c/g)]),g+=g;break;case m.TRUNCATED:for(var z=n,d=c;z>g||d>g;)p.push([Math.ceil(z/g),Math.ceil(d/g)]),z>>=1,d>>=1;break;default:Object(u.a)(!1,53)}p.push([1,1]),p.reverse();for(var T=[1],b=[0],w=1,O=p.length;w<O;w++)T.push(1<<w),b.push(p[w-1][0]*p[w-1][1]+b[w-1]);T.reverse();var _=new v.a({tileSize:f,extent:s,origin:Object(h.C)(s),resolutions:T}),D=i.url;D&&-1==D.indexOf("{TileGroup}")&&-1==D.indexOf("{tileIndex}")&&(D+="{TileGroup}/{z}-{x}-{y}.jpg");var I=Object(l.c)(D);var j=Object(l.b)(I.map(function(e){return function(t,i,r){if(t){var o=t[0],n=t[1],a=t[2],c=n+a*p[o][0],s=_.getTileSize(o),l=Array.isArray(s)?s[0]:s,u={z:o,x:n,y:a,tileIndex:c,TileGroup:"TileGroup"+((c+b[o])/l|0)};return e.replace(/\{(\w+?)\}/g,function(e,t){return u[t]})}}})),S=y.bind(null,_);e.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,tilePixelRatio:i.tilePixelRatio,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:S,tileGrid:_,tileUrlFunction:j,transition:i.transition})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(g.a),d="http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?zoomify=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF/",T=new n.a({source:new z({url:d,size:[9911,6100],crossOrigin:"anonymous"})}),b=[0,-6100,9911,0];new r.a({layers:[T],target:"map",view:new o.a({resolutions:T.getSource().getTileGrid().getResolutions(),extent:b})}).getView().fit(b),document.getElementById("zoomifyProtocol").addEventListener("change",function(e){var t=e.currentTarget.value;"iip"===t?T.setSource(new z({url:"http://vips.vtech.fr/cgi-bin/iipsrv.fcgi?FIF=/mnt/MD1/AD00/plan_CHU-4HD-01/FOND.TIF&JTL={z},{tileIndex}",size:[9911,6100],crossOrigin:"anonymous"})):"zoomify"===t&&T.setSource(new z({url:d,size:[9911,6100],crossOrigin:"anonymous"}))})}},[[395,0]]]);
//# sourceMappingURL=zoomify.js.map