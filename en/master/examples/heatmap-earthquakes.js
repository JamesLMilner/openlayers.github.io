(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{401:function(t,e,n){"use strict";n.r(e);var r=n(2),o=n(3),a=n(103),i=n(7),u=n(34),s=n(30),d=n(21),l=n(12),c=n(211),f={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},g=["#00f","#0ff","#0f0","#ff0","#f00"];var p=function(t){function e(e){var n=e||{},r=Object(l.a)({},n);delete r.gradient,delete r.radius,delete r.blur,delete r.shadow,delete r.weight,t.call(this,r),this.gradient_=null,this.shadow_=void 0!==n.shadow?n.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(i.a)(this,Object(u.b)(f.GRADIENT),this.handleGradientChanged_,this),this.setGradient(n.gradient?n.gradient:g),this.setBlur(void 0!==n.blur?n.blur:15),this.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";this.weightFunction_="string"==typeof o?function(t){return t.get(o)}:o,this.setRenderOrder(null)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getBlur=function(){return this.get(f.BLUR)},e.prototype.getGradient=function(){return this.get(f.GRADIENT)},e.prototype.getRadius=function(){return this.get(f.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Object(s.a)(1,256),n=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),o=0,a=t.length;o<a;++o)n.addColorStop(o*r,t[o]);return e.fillStyle=n,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(f.BLUR,t)},e.prototype.setGradient=function(t){this.set(f.GRADIENT,t)},e.prototype.setRadius=function(t){this.set(f.RADIUS,t)},e.prototype.createRenderer=function(){return new c.a(this,{vertexShader:"\n        precision mediump float;\n        attribute vec2 a_position;\n        attribute vec2 a_texCoord;\n        attribute float a_rotateWithView;\n        attribute vec2 a_offsets;\n        attribute float a_opacity;\n        \n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform mat4 u_offsetRotateMatrix;\n        uniform float u_size;\n        \n        varying vec2 v_texCoord;\n        varying float v_opacity;\n        \n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          if (a_rotateWithView == 1.0) {\n            offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n          }\n          vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets * u_size;\n          v_texCoord = a_texCoord;\n          v_opacity = a_opacity;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_resolution;\n        uniform float u_blurSlope;\n        \n        varying vec2 v_texCoord;\n        varying float v_opacity;\n        \n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_opacity;\n          gl_FragColor = vec4(1.0, 1.0, 1.0, alpha);\n        }",uniforms:{u_size:function(){return 2*(this.get(f.RADIUS)+this.get(f.BLUR))}.bind(this),u_blurSlope:function(){return this.get(f.RADIUS)/Math.max(1,this.get(f.BLUR))}.bind(this),u_resolution:function(t){return t.viewState.resolution}},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n            varying vec2 v_screenCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:this.gradient_}}],opacityCallback:function(t){return this.weightFunction_(t)}.bind(this)})},e}(d.a),v=n(6),_=n(72),h=n(13),m=document.getElementById("blur"),y=document.getElementById("radius"),x=new p({source:new h.a({url:"data/kml/2012_Earthquakes_Mag5.kml",format:new a.a({extractStyles:!1})}),blur:parseInt(m.value,10),radius:parseInt(y.value,10)});x.getSource().on("addfeature",function(t){var e=t.feature.get("name"),n=parseFloat(e.substr(2));t.feature.set("weight",n-5)});var b=new v.a({source:new _.a({layer:"toner"})}),w=(new r.a({layers:[b,x],target:"map",view:new o.a({center:[0,0],zoom:2})}),function(){x.setBlur(parseInt(m.value,10))});m.addEventListener("input",w),m.addEventListener("change",w);var R=function(){x.setRadius(parseInt(y.value,10))};y.addEventListener("input",R),y.addEventListener("change",R)}},[[401,0]]]);
//# sourceMappingURL=heatmap-earthquakes.js.map