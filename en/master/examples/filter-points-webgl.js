(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{269:function(e,t,a){"use strict";a.r(t);var r=a(2),o=a(3),n=a(6),i=a(22),u=a(26),c=a(21),s=a(13),l=a(5),d=a(169),p=a(15),m=a(64),v=[],f=new s.a({features:[],attributions:"NASA"}),y=[180,140,140],g=[255,80,80],_=.001*Date.now(),w=document.getElementById("min-year"),x=document.getElementById("max-year");function C(){var e=document.getElementById("status");e.querySelector("span.min-year").textContent=w.value,e.querySelector("span.max-year").textContent=x.value}w.addEventListener("input",C),w.addEventListener("change",C),x.addEventListener("input",C),x.addEventListener("change",C),C();var b,h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createRenderer=function(){return new d.a(this,{colorCallback:function(e,t,a){if(3===a)return 1;var r=Object(p.a)((e.get("year")-1800)/213,0,1);return Object(p.c)(y[a],g[a],r)/255},sizeCallback:function(e){return 18*Object(p.a)(e.get("mass")/2e5,0,1)+8},fragmentShader:["precision mediump float;","uniform float u_time;","uniform float u_minYear;","uniform float u_maxYear;","varying vec2 v_texCoord;","varying float v_opacity;","varying vec4 v_color;","void main(void) {","  float impactYear = v_opacity;","  if (impactYear < u_minYear || v_opacity > u_maxYear) {","    discard;","  }","  vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);","  float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;","  float value = 2.0 * (1.0 - sqRadius);","  float alpha = smoothstep(0.0, 1.0, value);","  vec3 color = v_color.rgb;","  float period = 8.0;","  color.g *= 2.0 * (1.0 - sqrt(mod(u_time + impactYear * 0.025, period) / period));","  gl_FragColor = vec4(color, v_color.a);","  gl_FragColor.a *= alpha;","  gl_FragColor.rgb *= gl_FragColor.a;","}"].join(" "),opacityCallback:function(e){return e.get("year")},uniforms:{u_time:function(){return.001*Date.now()-_},u_minYear:function(){return parseInt(w.value)},u_maxYear:function(){return parseInt(x.value)}}})},t}(c.a);(b=new XMLHttpRequest).open("GET","data/csv/meteorite_landings.csv"),b.onload=function(){for(var e,t,a=b.responseText,r=0;(e=a.indexOf("\n",r))>0;)if(t=a.substr(r,e-r).split(","),0!==(r=e+1)){var o=Object(l.f)([parseFloat(t[4]),parseFloat(t[3])]);v.push(new i.a({mass:parseFloat(t[1])||0,year:parseInt(t[2])||0,geometry:new u.a(o)}))}f.addFeatures(v)},b.send();var E=new r.a({layers:[new n.a({source:new m.a({layer:"toner"})}),new h({source:f})],target:document.getElementById("map"),view:new o.a({center:[0,0],zoom:2})});!function e(){E.render(),window.requestAnimationFrame(e)}()}},[[269,0]]]);
//# sourceMappingURL=filter-points-webgl.js.map