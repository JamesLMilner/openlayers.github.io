"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7922],{74846:function(e,t,s){var o=s(38376),i=s(10135);class r extends o.A{constructor(e){const t=!!e.highDpi,s=!(!0===e.overlay);super({attributions:e.attributions||['Google Maps<a class="ol-attribution-google-tos" href="https://cloud.google.com/maps-platform/terms/" target="_blank">Terms of Use</a> and <a class="ol-attribution-google-tos" href="https://policies.google.com/privacy" target="_blank">Privacy Policy</a>'],cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:s,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const o={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(o.imageFormat=e.imageFormat),e.scale&&(o.scale=e.scale),t&&(o.highDpi=!0),e.layerTypes&&(o.layerTypes=e.layerTypes),e.styles&&(o.styles=e.styles),!0===e.overlay&&(o.overlay=!0),this.sessionTokenRequest_=o,this.sessionRefreshId_,this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e="https://tile.googleapis.com/v1/createSession?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},s=await this.fetchSessionToken(e,t);if(!s.ok){try{const e=await s.json();this.error_=new Error(e.error.message)}catch{this.error_=new Error("Error fetching session token")}return void this.setState("error")}const o=await s.json(),r=this.getTilePixelRatio(1),a=[o.tileWidth/r,o.tileHeight/r];this.tileGrid=(0,i.EN)({extent:(0,i.kZ)(this.getProjection()),maxZoom:22,tileSize:a});const n=o.session,l=this.apiKey_;this.tileUrlFunction=function(e,t,s){return`https://tile.googleapis.com/v1/2dtiles/${e[0]}/${e[1]}/${e[2]}?session=${n}&key=${l}`};const c=1e3*parseInt(o.expiry,10),h=Math.max(c-Date.now()-6e4,1);this.sessionRefreshId_=setTimeout((()=>this.createSession_()),h),this.setState("ready")}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}var a=r,n=s(96256),l=s(41564),c=s(87240);document.getElementById("key-form").addEventListener("submit",(e=>{!function(e){const t=new a({key:e,scale:"scaleFactor2x",highDpi:!0});t.on("change",(()=>{"error"===t.getState()&&alert(t.getError())})),new l.A({layers:[new n.A({source:t})],target:"map",view:new c.Ay({center:[0,0],zoom:2})})}(e.target.elements.key.value)}))}},function(e){var t;t=74846,e(e.s=t)}]);
//# sourceMappingURL=google.js.map