/*! For license information please see ol.js.LICENSE.txt */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ol=n():t.ol=n()}(self,(function(){return function(){var t,n={6:function(t){"use strict";function n(t,n,o){o=o||2;var s,u,a,c,l,p,d,y=n&&n.length,m=y?n[0]*o:t.length,w=i(t,0,m,o,!0),g=[];if(!w||w.next===w.prev)return g;if(y&&(w=function(t,n,e,o){var s,u,a,c=[];for(s=0,u=n.length;s<u;s++)(a=i(t,n[s]*o,s<u-1?n[s+1]*o:t.length,o,!1))===a.next&&(a.steiner=!0),c.push(v(a));for(c.sort(h),s=0;s<c.length;s++)e=r(e=f(c[s],e),e.next);return e}(t,n,w,o)),t.length>80*o){s=a=t[0],u=c=t[1];for(var b=o;b<m;b+=o)(l=t[b])<s&&(s=l),(p=t[b+1])<u&&(u=p),l>a&&(a=l),p>c&&(c=p);d=0!==(d=Math.max(a-s,c-u))?1/d:0}return e(w,g,o,s,u,d),g}function i(t,n,i,r,e){var o,s;if(e===j(t,n,i,r)>0)for(o=n;o<i;o+=r)s=M(o,t[o],t[o+1],s);else for(o=i-r;o>=n;o-=r)s=M(o,t[o],t[o+1],s);return s&&m(s,s.next)&&(S(s),s=s.next),s}function r(t,n){if(!t)return t;n||(n=t);var i,r=t;do{if(i=!1,r.steiner||!m(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(S(r),(r=n=r.prev)===r.next)break;i=!0}}while(i||r!==n);return n}function e(t,n,i,h,f,c,v){if(t){!v&&c&&function(t,n,i,r){var e=t;do{null===e.z&&(e.z=l(e.x,e.y,n,i,r)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next}while(e!==t);e.prevZ.nextZ=null,e.prevZ=null,function(t){var n,i,r,e,o,s,u,a,h=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,r=i,u=0,n=0;n<h&&(u++,r=r.nextZ);n++);for(a=h;u>0||a>0&&r;)0!==u&&(0===a||!r||i.z<=r.z)?(e=i,i=i.nextZ,u--):(e=r,r=r.nextZ,a--),o?o.nextZ=e:t=e,e.prevZ=o,o=e;i=r}o.nextZ=null,h*=2}while(s>1)}(e)}(t,h,f,c);for(var p,d,y=t;t.prev!==t.next;)if(p=t.prev,d=t.next,c?s(t,h,f,c):o(t))n.push(p.i/i),n.push(t.i/i),n.push(d.i/i),S(t),t=d.next,y=d.next;else if((t=d)===y){v?1===v?e(t=u(r(t),n,i),n,i,h,f,c,2):2===v&&a(t,n,i,h,f,c):e(r(t),n,i,h,f,c,1);break}}}function o(t){var n=t.prev,i=t,r=t.next;if(y(n,i,r)>=0)return!1;for(var e=t.next.next;e!==t.prev;){if(p(n.x,n.y,i.x,i.y,r.x,r.y,e.x,e.y)&&y(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function s(t,n,i,r){var e=t.prev,o=t,s=t.next;if(y(e,o,s)>=0)return!1;for(var u=e.x<o.x?e.x<s.x?e.x:s.x:o.x<s.x?o.x:s.x,a=e.y<o.y?e.y<s.y?e.y:s.y:o.y<s.y?o.y:s.y,h=e.x>o.x?e.x>s.x?e.x:s.x:o.x>s.x?o.x:s.x,f=e.y>o.y?e.y>s.y?e.y:s.y:o.y>s.y?o.y:s.y,c=l(u,a,n,i,r),v=l(h,f,n,i,r),d=t.prevZ,m=t.nextZ;d&&d.z>=c&&m&&m.z<=v;){if(d!==t.prev&&d!==t.next&&p(e.x,e.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,m!==t.prev&&m!==t.next&&p(e.x,e.y,o.x,o.y,s.x,s.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&p(e.x,e.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=v;){if(m!==t.prev&&m!==t.next&&p(e.x,e.y,o.x,o.y,s.x,s.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function u(t,n,i){var e=t;do{var o=e.prev,s=e.next.next;!m(o,s)&&w(o,e,e.next,s)&&x(o,s)&&x(s,o)&&(n.push(o.i/i),n.push(e.i/i),n.push(s.i/i),S(e),S(e.next),e=t=s),e=e.next}while(e!==t);return r(e)}function a(t,n,i,o,s,u){var a=t;do{for(var h=a.next.next;h!==a.prev;){if(a.i!==h.i&&d(a,h)){var f=_(a,h);return a=r(a,a.next),f=r(f,f.next),e(a,n,i,o,s,u),void e(f,n,i,o,s,u)}h=h.next}a=a.next}while(a!==t)}function h(t,n){return t.x-n.x}function f(t,n){var i=function(t,n){var i,r=n,e=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var u=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=e&&u>s){if(s=u,u===e){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!i)return null;if(e===s)return i;var a,h=i,f=i.x,l=i.y,v=1/0;r=i;do{e>=r.x&&r.x>=f&&e!==r.x&&p(o<l?e:s,o,f,l,o<l?s:e,o,r.x,r.y)&&(a=Math.abs(o-r.y)/(e-r.x),x(r,t)&&(a<v||a===v&&(r.x>i.x||r.x===i.x&&c(i,r)))&&(i=r,v=a)),r=r.next}while(r!==h);return i}(t,n);if(!i)return n;var e=_(i,t),o=r(i,i.next);return r(e,e.next),n===i?o:n}function c(t,n){return y(t.prev,t,n.prev)<0&&y(n.next,t,t.next)<0}function l(t,n,i,r,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*e)|t<<8))|t<<4))|t<<2))|t<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*e)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function v(t){var n=t,i=t;do{(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next}while(n!==t);return i}function p(t,n,i,r,e,o,s,u){return(e-s)*(n-u)-(t-s)*(o-u)>=0&&(t-s)*(r-u)-(i-s)*(n-u)>=0&&(i-s)*(o-u)-(e-s)*(r-u)>=0}function d(t,n){return t.next.i!==n.i&&t.prev.i!==n.i&&!function(t,n){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==n.i&&i.next.i!==n.i&&w(i,i.next,t,n))return!0;i=i.next}while(i!==t);return!1}(t,n)&&(x(t,n)&&x(n,t)&&function(t,n){var i=t,r=!1,e=(t.x+n.x)/2,o=(t.y+n.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&e<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,n)&&(y(t.prev,t,n.prev)||y(t,n.prev,n))||m(t,n)&&y(t.prev,t,t.next)>0&&y(n.prev,n,n.next)>0)}function y(t,n,i){return(n.y-t.y)*(i.x-n.x)-(n.x-t.x)*(i.y-n.y)}function m(t,n){return t.x===n.x&&t.y===n.y}function w(t,n,i,r){var e=b(y(t,n,i)),o=b(y(t,n,r)),s=b(y(i,r,t)),u=b(y(i,r,n));return e!==o&&s!==u||(!(0!==e||!g(t,i,n))||(!(0!==o||!g(t,r,n))||(!(0!==s||!g(i,t,r))||!(0!==u||!g(i,n,r)))))}function g(t,n,i){return n.x<=Math.max(t.x,i.x)&&n.x>=Math.min(t.x,i.x)&&n.y<=Math.max(t.y,i.y)&&n.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,n){return y(t.prev,t,t.next)<0?y(t,n,t.next)>=0&&y(t,t.prev,n)>=0:y(t,n,t.prev)<0||y(t,t.next,n)<0}function _(t,n){var i=new O(t.i,t.x,t.y),r=new O(n.i,n.x,n.y),e=t.next,o=n.prev;return t.next=n,n.prev=t,i.next=e,e.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function M(t,n,i,r){var e=new O(t,n,i);return r?(e.next=r.next,e.prev=r,r.next.prev=e,r.next=e):(e.prev=e,e.next=e),e}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,n,i){this.i=t,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function j(t,n,i,r){for(var e=0,o=n,s=i-r;o<i;o+=r)e+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return e}t.exports=n,t.exports.default=n,n.deviation=function(t,n,i,r){var e=n&&n.length,o=e?n[0]*i:t.length,s=Math.abs(j(t,0,o,i));if(e)for(var u=0,a=n.length;u<a;u++){var h=n[u]*i,f=u<a-1?n[u+1]*i:t.length;s-=Math.abs(j(t,h,f,i))}var c=0;for(u=0;u<r.length;u+=3){var l=r[u]*i,v=r[u+1]*i,p=r[u+2]*i;c+=Math.abs((t[l]-t[p])*(t[v+1]-t[l+1])-(t[l]-t[v])*(t[p+1]-t[l+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var n=t[0][0].length,i={vertices:[],holes:[],dimensions:n},r=0,e=0;e<t.length;e++){for(var o=0;o<t[e].length;o++)for(var s=0;s<n;s++)i.vertices.push(t[e][o][s]);e>0&&(r+=t[e-1].length,i.holes.push(r))}return i}},226:function(t,n){n.read=function(t,n,i,r,e){var o,s,u=8*e-r-1,a=(1<<u)-1,h=a>>1,f=-7,c=i?e-1:0,l=i?-1:1,v=t[n+c];for(c+=l,o=v&(1<<-f)-1,v>>=-f,f+=u;f>0;o=256*o+t[n+c],c+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[n+c],c+=l,f-=8);if(0===o)o=1-h;else{if(o===a)return s?NaN:1/0*(v?-1:1);s+=Math.pow(2,r),o-=h}return(v?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,n,i,r,e,o){var s,u,a,h=8*o-e-1,f=(1<<h)-1,c=f>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:o-1,p=r?1:-1,d=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,s=f):(s=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-s))<1&&(s--,a*=2),(n+=s+c>=1?l/a:l*Math.pow(2,1-c))*a>=2&&(s++,a/=2),s+c>=f?(u=0,s=f):s+c>=1?(u=(n*a-1)*Math.pow(2,e),s+=c):(u=n*Math.pow(2,c-1)*Math.pow(2,e),s=0));e>=8;t[i+v]=255&u,v+=p,u/=256,e-=8);for(s=s<<e|u,h+=e;h>0;t[i+v]=255&s,v+=p,s/=256,h-=8);t[i+v-p]|=128*d}},875:function(t,n,i){"use strict";const r=i(692),e=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),u=Symbol("allowStale"),a=Symbol("maxAge"),h=Symbol("dispose"),f=Symbol("noDisposeOnSet"),c=Symbol("lruList"),l=Symbol("cache"),v=Symbol("updateAgeOnGet"),p=()=>1;const d=(t,n,i)=>{const r=t[l].get(n);if(r){const n=r.value;if(y(t,n)){if(w(t,r),!t[u])return}else i&&(t[v]&&(r.value.now=Date.now()),t[c].unshiftNode(r));return n.value}},y=(t,n)=>{if(!n||!n.maxAge&&!t[a])return!1;const i=Date.now()-n.now;return n.maxAge?i>n.maxAge:t[a]&&i>t[a]},m=t=>{if(t[o]>t[e])for(let n=t[c].tail;t[o]>t[e]&&null!==n;){const i=n.prev;w(t,n),n=i}},w=(t,n)=>{if(n){const i=n.value;t[h]&&t[h](i.key,i.value),t[o]-=i.length,t[l].delete(i.key),t[c].removeNode(n)}};class g{constructor(t,n,i,r,e){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=e||0}}const b=(t,n,i,r)=>{let e=i.value;y(t,e)&&(w(t,i),t[u]||(e=void 0)),e&&n.call(r,e.value,e.key,t)};t.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[e]=t.max||1/0;const n=t.length||p;if(this[s]="function"!=typeof n?p:n,this[u]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[a]=t.maxAge||0,this[h]=t.dispose,this[f]=t.noDisposeOnSet||!1,this[v]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[e]=t||1/0,m(this)}get max(){return this[e]}set allowStale(t){this[u]=!!t}get allowStale(){return this[u]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[a]=t,m(this)}get maxAge(){return this[a]}set lengthCalculator(t){"function"!=typeof t&&(t=p),t!==this[s]&&(this[s]=t,this[o]=0,this[c].forEach((t=>{t.length=this[s](t.value,t.key),this[o]+=t.length}))),m(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[c].length}rforEach(t,n){n=n||this;for(let i=this[c].tail;null!==i;){const r=i.prev;b(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(let i=this[c].head;null!==i;){const r=i.next;b(this,t,i,n),i=r}}keys(){return this[c].toArray().map((t=>t.key))}values(){return this[c].toArray().map((t=>t.value))}reset(){this[h]&&this[c]&&this[c].length&&this[c].forEach((t=>this[h](t.key,t.value))),this[l]=new Map,this[c]=new r,this[o]=0}dump(){return this[c].map((t=>!y(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[c]}set(t,n,i){if((i=i||this[a])&&"number"!=typeof i)throw new TypeError("maxAge must be a number");const r=i?Date.now():0,u=this[s](n,t);if(this[l].has(t)){if(u>this[e])return w(this,this[l].get(t)),!1;const s=this[l].get(t).value;return this[h]&&(this[f]||this[h](t,s.value)),s.now=r,s.maxAge=i,s.value=n,this[o]+=u-s.length,s.length=u,this.get(t),m(this),!0}const v=new g(t,n,u,r,i);return v.length>this[e]?(this[h]&&this[h](t,n),!1):(this[o]+=v.length,this[c].unshift(v),this[l].set(t,this[c].head),m(this),!0)}has(t){if(!this[l].has(t))return!1;const n=this[l].get(t).value;return!y(this,n)}get(t){return d(this,t,!0)}peek(t){return d(this,t,!1)}pop(){const t=this[c].tail;return t?(w(this,t),t.value):null}del(t){w(this,this[l].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],e=r.e||0;if(0===e)this.set(r.k,r.v);else{const t=e-n;t>0&&this.set(r.k,r.v,t)}}}prune(){this[l].forEach(((t,n)=>d(this,n,!1)))}}},98:function(t,n,i){"use strict";t.exports=e;var r=i(226);function e(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var o=4294967296,s=1/o,u="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===e.Bytes?t.readVarint()+t.pos:t.pos+1}function h(t,n,i){return i?4294967296*n+(t>>>0):4294967296*(n>>>0)+(t>>>0)}function f(t,n,i){var r=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(r);for(var e=i.pos-1;e>=t;e--)i.buf[e+r]=i.buf[e]}function c(t,n){for(var i=0;i<t.length;i++)n.writeVarint(t[i])}function l(t,n){for(var i=0;i<t.length;i++)n.writeSVarint(t[i])}function v(t,n){for(var i=0;i<t.length;i++)n.writeFloat(t[i])}function p(t,n){for(var i=0;i<t.length;i++)n.writeDouble(t[i])}function d(t,n){for(var i=0;i<t.length;i++)n.writeBoolean(t[i])}function y(t,n){for(var i=0;i<t.length;i++)n.writeFixed32(t[i])}function m(t,n){for(var i=0;i<t.length;i++)n.writeSFixed32(t[i])}function w(t,n){for(var i=0;i<t.length;i++)n.writeFixed64(t[i])}function g(t,n){for(var i=0;i<t.length;i++)n.writeSFixed64(t[i])}function b(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+16777216*t[n+3]}function x(t,n,i){t[i]=n,t[i+1]=n>>>8,t[i+2]=n>>>16,t[i+3]=n>>>24}function _(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16)+(t[n+3]<<24)}e.prototype={destroy:function(){this.buf=null},readFields:function(t,n,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),e=r>>3,o=this.pos;this.type=7&r,t(e,n,this),this.pos===o&&this.skip(r)}return n},readMessage:function(t,n){return this.readFields(t,n,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+_(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var n,i,r=this.buf;return n=127&(i=r[this.pos++]),i<128?n:(n|=(127&(i=r[this.pos++]))<<7,i<128?n:(n|=(127&(i=r[this.pos++]))<<14,i<128?n:(n|=(127&(i=r[this.pos++]))<<21,i<128?n:function(t,n,i){var r,e,o=i.buf;if(e=o[i.pos++],r=(112&e)>>4,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(127&e)<<3,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(127&e)<<10,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(127&e)<<17,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(127&e)<<24,e<128)return h(t,r,n);if(e=o[i.pos++],r|=(1&e)<<31,e<128)return h(t,r,n);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,n=this.pos;return this.pos=t,t-n>=12&&u?function(t,n,i){return u.decode(t.subarray(n,i))}(this.buf,n,t):function(t,n,i){var r="",e=n;for(;e<i;){var o,s,u,a=t[e],h=null,f=a>239?4:a>223?3:a>191?2:1;if(e+f>i)break;1===f?a<128&&(h=a):2===f?128==(192&(o=t[e+1]))&&(h=(31&a)<<6|63&o)<=127&&(h=null):3===f?(o=t[e+1],s=t[e+2],128==(192&o)&&128==(192&s)&&((h=(15&a)<<12|(63&o)<<6|63&s)<=2047||h>=55296&&h<=57343)&&(h=null)):4===f&&(o=t[e+1],s=t[e+2],u=t[e+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&((h=(15&a)<<18|(63&o)<<12|(63&s)<<6|63&u)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,f=1):h>65535&&(h-=65536,r+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),r+=String.fromCharCode(h),e+=f}return r}(this.buf,n,t)},readBytes:function(){var t=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,t);return this.pos=t,n},readPackedVarint:function(t,n){if(this.type!==e.Bytes)return t.push(this.readVarint(n));var i=a(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(n));return t},readPackedSVarint:function(t){if(this.type!==e.Bytes)return t.push(this.readSVarint());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==e.Bytes)return t.push(this.readBoolean());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==e.Bytes)return t.push(this.readFloat());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==e.Bytes)return t.push(this.readDouble());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed32());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed32());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readFixed64());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==e.Bytes)return t.push(this.readSFixed64());var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readSFixed64());return t},skip:function(t){var n=7&t;if(n===e.Varint)for(;this.buf[this.pos++]>127;);else if(n===e.Bytes)this.pos=this.readVarint()+this.pos;else if(n===e.Fixed32)this.pos+=4;else{if(n!==e.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(t,n){this.writeVarint(t<<3|n)},realloc:function(t){for(var n=this.length||16;n<this.pos+t;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,n){var i,r;t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(t,n,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,n),function(t,n){var i=(7&t)<<4;if(n.buf[n.pos++]|=i|((t>>>=3)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(n.buf[n.pos++]=127&t|((t>>>=7)?128:0),!t)return;n.buf[n.pos++]=127&t}(r,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var n=this.pos;this.pos=function(t,n,i){for(var r,e,o=0;o<n.length;o++){if((r=n.charCodeAt(o))>55295&&r<57344){if(!e){r>56319||o+1===n.length?(t[i++]=239,t[i++]=191,t[i++]=189):e=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,e=r;continue}r=e-55296<<10|r-56320|65536,e=null}else e&&(t[i++]=239,t[i++]=191,t[i++]=189,e=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-n;i>=128&&f(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var n=t.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,n){this.pos++;var i=this.pos;t(n,this);var r=this.pos-i;r>=128&&f(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,n,i){this.writeTag(t,e.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(t,n){n.length&&this.writeMessage(t,c,n)},writePackedSVarint:function(t,n){n.length&&this.writeMessage(t,l,n)},writePackedBoolean:function(t,n){n.length&&this.writeMessage(t,d,n)},writePackedFloat:function(t,n){n.length&&this.writeMessage(t,v,n)},writePackedDouble:function(t,n){n.length&&this.writeMessage(t,p,n)},writePackedFixed32:function(t,n){n.length&&this.writeMessage(t,y,n)},writePackedSFixed32:function(t,n){n.length&&this.writeMessage(t,m,n)},writePackedFixed64:function(t,n){n.length&&this.writeMessage(t,w,n)},writePackedSFixed64:function(t,n){n.length&&this.writeMessage(t,g,n)},writeBytesField:function(t,n){this.writeTag(t,e.Bytes),this.writeBytes(n)},writeFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(t,n){this.writeTag(t,e.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(t,n){this.writeTag(t,e.Fixed64),this.writeSFixed64(n)},writeVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeVarint(n)},writeSVarintField:function(t,n){this.writeTag(t,e.Varint),this.writeSVarint(n)},writeStringField:function(t,n){this.writeTag(t,e.Bytes),this.writeString(n)},writeFloatField:function(t,n){this.writeTag(t,e.Fixed32),this.writeFloat(n)},writeDoubleField:function(t,n){this.writeTag(t,e.Fixed64),this.writeDouble(n)},writeBooleanField:function(t,n){this.writeVarintField(t,Boolean(n))}}},72:function(t){t.exports=function(){"use strict";function t(t,r,e,o,s){!function t(i,r,e,o,s){for(;o>e;){if(o-e>600){var u=o-e+1,a=r-e+1,h=Math.log(u),f=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*f*(u-f)/u)*(a-u/2<0?-1:1);t(i,r,Math.max(e,Math.floor(r-a*f/u+c)),Math.min(o,Math.floor(r+(u-a)*f/u+c)),s)}var l=i[r],v=e,p=o;for(n(i,e,r),s(i[o],l)>0&&n(i,e,o);v<p;){for(n(i,v,p),v++,p--;s(i[v],l)<0;)v++;for(;s(i[p],l)>0;)p--}0===s(i[e],l)?n(i,e,p):n(i,++p,o),p<=r&&(e=p+1),r<=p&&(o=p-1)}}(t,r,e||0,o||t.length-1,s||i)}function n(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function i(t,n){return t<n?-1:t>n?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,n,i){if(!i)return n.indexOf(t);for(var r=0;r<n.length;r++)if(i(t,n[r]))return r;return-1}function o(t,n){s(t,0,t.children.length,n,t)}function s(t,n,i,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o=n;o<i;o++){var s=t.children[o];u(e,t.leaf?r(s):s)}return e}function u(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function a(t,n){return t.minX-n.minX}function h(t,n){return t.minY-n.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function l(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function v(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(n,i,r,e,o){for(var s=[i,r];s.length;)if(!((r=s.pop())-(i=s.pop())<=e)){var u=i+Math.ceil((r-i)/e/2)*e;t(n,u,i,r,o),s.push(i,u,u,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var n=this.data,i=[];if(!v(t,n))return i;for(var r=this.toBBox,e=[];n;){for(var o=0;o<n.children.length;o++){var s=n.children[o],u=n.leaf?r(s):s;v(t,u)&&(n.leaf?i.push(s):l(t,u)?this._all(s,i):e.push(s))}n=e.pop()}return i},r.prototype.collides=function(t){var n=this.data;if(!v(t,n))return!1;for(var i=[];n;){for(var r=0;r<n.children.length;r++){var e=n.children[r],o=n.leaf?this.toBBox(e):e;if(v(t,o)){if(n.leaf||l(t,o))return!0;i.push(e)}}n=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0;n<t.length;n++)this.insert(t[n]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,n){if(!t)return this;for(var i,r,o,s=this.data,u=this.toBBox(t),a=[],h=[];s||a.length;){if(s||(s=a.pop(),r=a[a.length-1],i=h.pop(),o=!0),s.leaf){var f=e(t,s.children,n);if(-1!==f)return s.children.splice(f,1),a.push(s),this._condense(a),this}o||s.leaf||!l(s,u)?r?(i++,s=r.children[i],o=!1):s=null:(a.push(s),h.push(i),i=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,n){return t.minX-n.minX},r.prototype.compareMinY=function(t,n){return t.minY-n.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},r.prototype._build=function(t,n,i,r){var e,s=i-n+1,u=this._maxEntries;if(s<=u)return o(e=p(t.slice(n,i+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(s)/Math.log(u)),u=Math.ceil(s/Math.pow(u,r-1))),(e=p([])).leaf=!1,e.height=r;var a=Math.ceil(s/u),h=a*Math.ceil(Math.sqrt(u));d(t,n,i,h,this.compareMinX);for(var f=n;f<=i;f+=h){var c=Math.min(f+h-1,i);d(t,f,c,a,this.compareMinY);for(var l=f;l<=c;l+=a){var v=Math.min(l+a-1,c);e.children.push(this._build(t,l,v,r-1))}}return o(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,n,i,r){for(;r.push(n),!n.leaf&&r.length-1!==i;){for(var e=1/0,o=1/0,s=void 0,u=0;u<n.children.length;u++){var a=n.children[u],h=f(a),c=(l=t,v=a,(Math.max(v.maxX,l.maxX)-Math.min(v.minX,l.minX))*(Math.max(v.maxY,l.maxY)-Math.min(v.minY,l.minY))-h);c<o?(o=c,e=h<e?h:e,s=a):c===o&&h<e&&(e=h,s=a)}n=s||n.children[0]}var l,v;return n},r.prototype._insert=function(t,n,i){var r=i?t:this.toBBox(t),e=[],o=this._chooseSubtree(r,this.data,n,e);for(o.children.push(t),u(o,r);n>=0&&e[n].children.length>this._maxEntries;)this._split(e,n),n--;this._adjustParentBBoxes(r,e,n)},r.prototype._split=function(t,n){var i=t[n],r=i.children.length,e=this._minEntries;this._chooseSplitAxis(i,e,r);var s=this._chooseSplitIndex(i,e,r),u=p(i.children.splice(s,i.children.length-s));u.height=i.height,u.leaf=i.leaf,o(i,this.toBBox),o(u,this.toBBox),n?t[n-1].children.push(u):this._splitRoot(i,u)},r.prototype._splitRoot=function(t,n){this.data=p([t,n]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,n,i){for(var r,e,o,u,a,h,c,l=1/0,v=1/0,p=n;p<=i-n;p++){var d=s(t,0,p,this.toBBox),y=s(t,p,i,this.toBBox),m=(e=d,o=y,u=void 0,a=void 0,h=void 0,c=void 0,u=Math.max(e.minX,o.minX),a=Math.max(e.minY,o.minY),h=Math.min(e.maxX,o.maxX),c=Math.min(e.maxY,o.maxY),Math.max(0,h-u)*Math.max(0,c-a)),w=f(d)+f(y);m<l?(l=m,r=p,v=w<v?w:v):m===l&&w<v&&(v=w,r=p)}return r||i-n},r.prototype._chooseSplitAxis=function(t,n,i){var r=t.leaf?this.compareMinX:a,e=t.leaf?this.compareMinY:h;this._allDistMargin(t,n,i,r)<this._allDistMargin(t,n,i,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,n,i,r){t.children.sort(r);for(var e=this.toBBox,o=s(t,0,n,e),a=s(t,i-n,i,e),h=c(o)+c(a),f=n;f<i-n;f++){var l=t.children[f];u(o,t.leaf?e(l):l),h+=c(o)}for(var v=i-n-1;v>=n;v--){var p=t.children[v];u(a,t.leaf?e(p):p),h+=c(a)}return h},r.prototype._adjustParentBBoxes=function(t,n,i){for(var r=i;r>=0;r--)u(n[r],t)},r.prototype._condense=function(t){for(var n=t.length-1,i=void 0;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},r}()},760:function(t){var n=function(t){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",s=e.asyncIterator||"@@asyncIterator",u=e.toStringTag||"@@toStringTag";function a(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{a({},"")}catch(t){a=function(t,n,i){return t[n]=i}}function h(t,n,i,r){var e=n&&n.prototype instanceof y?n:y,o=Object.create(e.prototype),s=new T(r||[]);return o._invoke=function(t,n,i){var r=c;return function(e,o){if(r===v)throw new Error("Generator is already running");if(r===p){if("throw"===e)throw o;return A()}for(i.method=e,i.arg=o;;){var s=i.delegate;if(s){var u=O(s,i);if(u){if(u===d)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===c)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=v;var a=f(t,n,i);if("normal"===a.type){if(r=i.done?p:l,a.arg===d)continue;return{value:a.arg,done:i.done}}"throw"===a.type&&(r=p,i.method="throw",i.arg=a.arg)}}}(t,i,s),o}function f(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var c="suspendedStart",l="suspendedYield",v="executing",p="completed",d={};function y(){}function m(){}function w(){}var g={};a(g,o,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(P([])));x&&x!==i&&r.call(x,o)&&(g=x);var _=w.prototype=y.prototype=Object.create(g);function M(t){["next","throw","return"].forEach((function(n){a(t,n,(function(t){return this._invoke(n,t)}))}))}function S(t,n){function i(e,o,s,u){var a=f(t[e],t,o);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==typeof c&&r.call(c,"__await")?n.resolve(c.__await).then((function(t){i("next",t,s,u)}),(function(t){i("throw",t,s,u)})):n.resolve(c).then((function(t){h.value=t,s(h)}),(function(t){return i("throw",t,s,u)}))}u(a.arg)}var e;this._invoke=function(t,r){function o(){return new n((function(n,e){i(t,r,n,e)}))}return e=e?e.then(o,o):o()}}function O(t,i){var r=t.iterator[i.method];if(r===n){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=n,O(t,i),"throw"===i.method))return d;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var e=f(r,t.iterator,i.arg);if("throw"===e.type)return i.method="throw",i.arg=e.arg,i.delegate=null,d;var o=e.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,d):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,d)}function j(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function E(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,s=function i(){for(;++e<t.length;)if(r.call(t,e))return i.value=t[e],i.done=!1,i;return i.value=n,i.done=!0,i};return s.next=s}}return{next:A}}function A(){return{value:n,done:!0}}return m.prototype=w,a(_,"constructor",w),a(w,"constructor",m),m.displayName=a(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,a(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},M(S.prototype),a(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(n,i,r,e,o){void 0===o&&(o=Promise);var s=new S(h(n,i,r,e),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},M(_),a(_,u,"Generator"),a(_,o,(function(){return this})),a(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var n=[];for(var i in t)n.push(i);return n.reverse(),function i(){for(;n.length;){var r=n.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=P,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function e(r,e){return u.type="throw",u.arg=t,i.next=r,e&&(i.method="next",i.arg=n),!!e}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return e("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),h=r.call(s,"finallyLoc");if(a&&h){if(this.prev<s.catchLoc)return e(s.catchLoc,!0);if(this.prev<s.finallyLoc)return e(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return e(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return e(s.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc<=this.prev&&r.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),d},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),d}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var e=r.arg;E(i)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:P(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=n),d}},t}(t.exports);try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},617:function(t,n,i){const r=i(279);t.exports=function(t,n,i){const e=i&&i.debug||!1,o=i&&i.startIndex||0;e&&console.log("starting findTagByName with",n," and ",i);const s=r(t,`<${n}[ >]`,o);if(e&&console.log("start:",s),-1===s)return;const u=t.slice(s+n.length);let a=r(u,"[ /]"+n+">",0);const h=-1===a;h&&(a=r(u,"[ /]>",0));const f=s+n.length+a+1+(h?0:n.length)+1;if(e&&console.log("end:",f),-1===f)return;const c=t.slice(s,f);let l;return l=h?null:c.slice(c.indexOf(">")+1,c.lastIndexOf("<")),{inner:l,outer:c,start:s,end:f}}},51:function(t,n,i){const r=i(617);t.exports=function(t,n,i){const e=[],o=i&&i.debug||!1;let s,u=i&&i.startIndex||0;for(;s=r(t,n,{debug:o,startIndex:u});)u=s.end,e.push(s);return o&&console.log("findTagsByName found",e.length,"tags"),e}},802:function(t){t.exports=function(t,n,i){const r=i&&i.debug||!1;r&&console.log("getting "+n+" in "+t);const e="object"==typeof t?t.outer:t,o=`${n}\\="([^"]*)"`;r&&console.log("pattern:",o);const s=new RegExp(o).exec(e);if(r&&console.log("match:",s),s)return s[1]}},279:function(t){t.exports=function(t,n,i){const r=new RegExp(n).exec(t.slice(i));return r?i+r.index:-1}},518:function(t){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},692:function(t,n,i){"use strict";function r(t){var n=this;if(n instanceof r||(n=new r),n.tail=null,n.head=null,n.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){n.push(t)}));else if(arguments.length>0)for(var i=0,e=arguments.length;i<e;i++)n.push(arguments[i]);return n}function e(t,n,i){var r=n===t.head?new u(i,null,n,t):new u(i,n,n.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function o(t,n){t.tail=new u(n,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function s(t,n){t.head=new u(n,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function u(t,n,i,r){if(!(this instanceof u))return new u(t,n,i,r);this.list=r,this.value=t,n?(n.next=this,this.prev=n):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}t.exports=r,r.Node=u,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var n=t.next,i=t.prev;return n&&(n.prev=i),i&&(i.next=n),t===this.head&&(this.head=n),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null,n},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var n=this.head;t.list=this,t.next=n,n&&(n.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var n=this.tail;t.list=this,t.prev=n,n&&(n.next=t),this.tail=t,this.head||(this.head=t),this.length++}},r.prototype.push=function(){for(var t=0,n=arguments.length;t<n;t++)o(this,arguments[t]);return this.length},r.prototype.unshift=function(){for(var t=0,n=arguments.length;t<n;t++)s(this,arguments[t]);return this.length},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},r.prototype.forEach=function(t,n){n=n||this;for(var i=this.head,r=0;null!==i;r++)t.call(n,i.value,r,this),i=i.next},r.prototype.forEachReverse=function(t,n){n=n||this;for(var i=this.tail,r=this.length-1;null!==i;r--)t.call(n,i.value,r,this),i=i.prev},r.prototype.get=function(t){for(var n=0,i=this.head;null!==i&&n<t;n++)i=i.next;if(n===t&&null!==i)return i.value},r.prototype.getReverse=function(t){for(var n=0,i=this.tail;null!==i&&n<t;n++)i=i.prev;if(n===t&&null!==i)return i.value},r.prototype.map=function(t,n){n=n||this;for(var i=new r,e=this.head;null!==e;)i.push(t.call(n,e.value,this)),e=e.next;return i},r.prototype.mapReverse=function(t,n){n=n||this;for(var i=new r,e=this.tail;null!==e;)i.push(t.call(n,e.value,this)),e=e.prev;return i},r.prototype.reduce=function(t,n){var i,r=this.head;if(arguments.length>1)i=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,i=this.head.value}for(var e=0;null!==r;e++)i=t(i,r.value,e),r=r.next;return i},r.prototype.reduceReverse=function(t,n){var i,r=this.tail;if(arguments.length>1)i=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,i=this.tail.value}for(var e=this.length-1;null!==r;e--)i=t(i,r.value,e),r=r.prev;return i},r.prototype.toArray=function(){for(var t=new Array(this.length),n=0,i=this.head;null!==i;n++)t[n]=i.value,i=i.next;return t},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),n=0,i=this.tail;null!==i;n++)t[n]=i.value,i=i.prev;return t},r.prototype.slice=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var i=new r;if(n<t||n<0)return i;t<0&&(t=0),n>this.length&&(n=this.length);for(var e=0,o=this.head;null!==o&&e<t;e++)o=o.next;for(;null!==o&&e<n;e++,o=o.next)i.push(o.value);return i},r.prototype.sliceReverse=function(t,n){(n=n||this.length)<0&&(n+=this.length),(t=t||0)<0&&(t+=this.length);var i=new r;if(n<t||n<0)return i;t<0&&(t=0),n>this.length&&(n=this.length);for(var e=this.length,o=this.tail;null!==o&&e>n;e--)o=o.prev;for(;null!==o&&e>t;e--,o=o.prev)i.push(o.value);return i},r.prototype.splice=function(t,n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;var o=[];for(i=0;r&&i<n;i++)o.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(i=0;i<(arguments.length<=2?0:arguments.length-2);i++)r=e(this,r,i+2<2||arguments.length<=i+2?void 0:arguments[i+2]);return o},r.prototype.reverse=function(){for(var t=this.head,n=this.tail,i=t;null!==i;i=i.prev){var r=i.prev;i.prev=i.next,i.next=r}return this.head=n,this.tail=t,this};try{i(518)(r)}catch(t){}},752:function(){},640:function(){},630:function(){},341:function(t,n,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}i.d(n,{default:function(){return Az}});var e=0;function o(t){return t.ol_uid||(t.ol_uid=String(++e))}var s,u="7.0.0-dev",a=(s=function(t,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},s(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),h=function(t){function n(n){var i=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+u.split("-")[0])+"/doc/errors/#"+n+" for details.";return(i=t.call(this,r)||this).code=n,i.name="AssertionError",i.message=r,i}return a(n,t),n}(Error);function f(t){t.stopPropagation()}var c=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),l="propertychange",v=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function p(t,n,i){for(var r,e,o=i||d,s=0,u=t.length,a=!1;s<u;)(e=+o(t[r=s+(u-s>>1)],n))<0?s=r+1:(u=r,a=!e);return a?s:~s}function d(t,n){return t>n?1:t<n?-1:0}function y(t,n){return t.indexOf(n)>=0}function m(t,n,i){var r=t.length;if(t[0]<=n)return 0;if(n<=t[r-1])return r-1;var e=void 0;if(i>0){for(e=1;e<r;++e)if(t[e]<n)return e-1}else if(i<0){for(e=1;e<r;++e)if(t[e]<=n)return e}else for(e=1;e<r;++e){if(t[e]==n)return e;if(t[e]<n)return"function"==typeof i?i(n,t[e-1],t[e])>0?e-1:e:t[e-1]-n<n-t[e]?e-1:e}return r-1}function w(t,n,i){for(;n<i;){var r=t[n];t[n]=t[i],t[i]=r,++n,--i}}function g(t,n){for(var i=Array.isArray(n)?n:[n],r=i.length,e=0;e<r;e++)t[t.length]=i[e]}function b(t,n){for(var i,r=t.length>>>0,e=0;e<r;e++)if(n(i=t[e],e,t))return i;return null}function x(t,n){var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(t[r]!==n[r])return!1;return!0}function _(t,n){var i;return!t.every((function(r,e){return i=e,!n(r,e,t)}))?i:-1}function M(t,n,i){var r=n||d;return t.every((function(n,e){if(0===e)return!0;var o=r(t[e-1],n);return!(o>0||i&&0===o)}))}function S(){return!0}function O(){return!1}function j(){}function E(t){var n,i,r,e=!1;return function(){var o=Array.prototype.slice.call(arguments);return e&&this===r&&x(o,i)||(e=!0,r=this,i=o,n=t.apply(this,arguments)),n}}function T(t){return function(){var n;try{n=t()}catch(t){return Promise.reject(t)}return n instanceof Promise?n:Promise.resolve(n)}()}var P="function"==typeof Object.assign?Object.assign:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,e=arguments.length;r<e;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])}return i};function A(t){for(var n in t)delete t[n]}var C="function"==typeof Object.values?Object.values:function(t){var n=[];for(var i in t)n.push(t[i]);return n};function k(t){var n;for(n in t)return!1;return!n}var I=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),N=function(t){function n(n){var i=t.call(this)||this;return i.t=n,i._=null,i.S=null,i.O=null,i}return I(n,t),n.prototype.addEventListener=function(t,n){if(t&&n){var i=this.O||(this.O={}),r=i[t]||(i[t]=[]);-1===r.indexOf(n)&&r.push(n)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t,i=n?t:t.type,r=this.O&&this.O[i];if(r){var e=n?new c(t):t;e.target||(e.target=this.t||this);var o,s=this.S||(this.S={}),u=this._||(this._={});i in s||(s[i]=0,u[i]=0),++s[i];for(var a=0,h=r.length;a<h;++a)if(!1===(o="handleEvent"in r[a]?r[a].handleEvent(e):r[a].call(this,e))||e.propagationStopped){o=!1;break}if(0==--s[i]){var f=u[i];for(delete u[i];f--;)this.removeEventListener(i,j);delete s[i]}return o}},n.prototype.disposeInternal=function(){this.O&&A(this.O)},n.prototype.getListeners=function(t){return this.O&&this.O[t]||void 0},n.prototype.hasListener=function(t){return!!this.O&&(t?t in this.O:Object.keys(this.O).length>0)},n.prototype.removeEventListener=function(t,n){var i=this.O&&this.O[t];if(i){var r=i.indexOf(n);-1!==r&&(this._&&t in this._?(i[r]=j,++this._[t]):(i.splice(r,1),0===i.length&&delete this.O[t]))}},n}(v),z="change",L="error",R="contextmenu",F="click",G="dblclick",D="dragenter",U="dragover",q="drop",B="keydown",X="keypress",Y="load",Z="resize",V="touchmove",W="wheel";function $(t,n,i,r,e){if(r&&r!==t&&(i=i.bind(r)),e){var o=i;i=function(){t.removeEventListener(n,i),o.apply(this,arguments)}}var s={target:t,type:n,listener:i};return t.addEventListener(n,i),s}function K(t,n,i,r){return $(t,n,i,r,!0)}function H(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),A(t))}var J=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Q=function(t){function n(){var n=t.call(this)||this;return n.on=n.onInternal,n.once=n.onceInternal,n.un=n.unInternal,n.T=0,n}return J(n,t),n.prototype.changed=function(){++this.T,this.dispatchEvent(z)},n.prototype.getRevision=function(){return this.T},n.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),e=0;e<i;++e)r[e]=$(this,t[e],n);return r}return $(this,t,n)},n.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var r=t.length;i=new Array(r);for(var e=0;e<r;++e)i[e]=K(this,t[e],n)}else i=K(this,t,n);return n.ol_key=i,i},n.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)tt(i);else if(Array.isArray(t))for(var r=0,e=t.length;r<e;++r)this.removeEventListener(t[r],n);else this.removeEventListener(t,n)},n}(N);function tt(t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)H(t[n]);else H(t)}Q.prototype.on,Q.prototype.once,Q.prototype.un;var nt=Q,it=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rt=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.key=i,e.oldValue=r,e}return it(n,t),n}(c),et=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,o(i),i.P=null,void 0!==n&&i.setProperties(n),i}return it(n,t),n.prototype.get=function(t){var n;return this.P&&this.P.hasOwnProperty(t)&&(n=this.P[t]),n},n.prototype.getKeys=function(){return this.P&&Object.keys(this.P)||[]},n.prototype.getProperties=function(){return this.P&&P({},this.P)||{}},n.prototype.hasProperties=function(){return!!this.P},n.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n)),i=l,this.hasListener(i)&&this.dispatchEvent(new rt(i,t,n))},n.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},n.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},n.prototype.set=function(t,n,i){var r=this.P||(this.P={});if(i)r[t]=n;else{var e=r[t];r[t]=n,e!==n&&this.notify(t,e)}},n.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},n.prototype.applyProperties=function(t){t.P&&P(this.P||(this.P={}),t.P)},n.prototype.unset=function(t,n){if(this.P&&t in this.P){var i=this.P[t];delete this.P[t],k(this.P)&&(this.P=null),n||this.notify(t,i)}},n}(nt),ot="add",st="remove",ut=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),at="length",ht=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.element=i,e.index=r,e}return ut(n,t),n}(c),ft=function(t){function n(n,i){var r=t.call(this)||this;r.on,r.once,r.un;var e=i||{};if(r.A=!!e.unique,r.C=n||[],r.A)for(var o=0,s=r.C.length;o<s;++o)r.R(r.C[o],o);return r.G(),r}return ut(n,t),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},n.prototype.forEach=function(t){for(var n=this.C,i=0,r=n.length;i<r;++i)t(n[i],i,n)},n.prototype.getArray=function(){return this.C},n.prototype.item=function(t){return this.C[t]},n.prototype.getLength=function(){return this.get(at)},n.prototype.insertAt=function(t,n){this.A&&this.R(n),this.C.splice(t,0,n),this.G(),this.dispatchEvent(new ht(ot,n,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.A&&this.R(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},n.prototype.remove=function(t){for(var n=this.C,i=0,r=n.length;i<r;++i)if(n[i]===t)return this.removeAt(i)},n.prototype.removeAt=function(t){var n=this.C[t];return this.C.splice(t,1),this.G(),this.dispatchEvent(new ht(st,n,t)),n},n.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.A&&this.R(n,t);var r=this.C[t];this.C[t]=n,this.dispatchEvent(new ht(st,r,t)),this.dispatchEvent(new ht(ot,n,t))}else{for(var e=i;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,n)}},n.prototype.G=function(){this.set(at,this.C.length)},n.prototype.R=function(t,n){for(var i=0,r=this.C.length;i<r;++i)if(this.C[i]===t&&i!==n)throw new h(58)},n}(et),ct=ft,lt=0,vt=1,pt=2,dt=3,yt=4;function mt(t){return Math.pow(t,3)}function wt(t){return 1-mt(1-t)}function gt(t){return 3*t*t-2*t*t*t}function bt(t){return t}var xt=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_t=function(t){function n(n,i,r){var e=t.call(this)||this,o=r||{};return e.tileCoord=n,e.state=i,e.interimTile=null,e.key="",e.D=void 0===o.transition?250:o.transition,e.U={},e.interpolate=!!o.interpolate,e}return xt(n,t),n.prototype.changed=function(){this.dispatchEvent(z)},n.prototype.release=function(){this.state===dt&&this.setState(yt)},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==pt)return this.D=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==pt){t.interimTile=null;break}t.getState()==vt?n=t:t.getState()==lt?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(this.state!==dt&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){r()},n.prototype.getAlpha=function(t,n){if(!this.D)return 1;var i=this.U[t];if(i){if(-1===i)return 1}else i=n,this.U[t]=i;var r=n-i+1e3/60;return r>=this.D?1:mt(r/this.D)},n.prototype.inTransition=function(t){return!!this.D&&-1!==this.U[t]},n.prototype.endTransition=function(t){this.D&&(this.U[t]=-1)},n}(N),Mt=_t,St=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ot=function(t){function n(n){var i=this,r=lt;return(i=t.call(this,n.tileCoord,r,{transition:n.transition,interpolate:n.interpolate})||this).q=n.loader,i.B=null,i.V=null,i.W=n.size||[256,256],i}return St(n,t),n.prototype.getSize=function(){return this.W},n.prototype.getData=function(){return this.B},n.prototype.getError=function(){return this.V},n.prototype.load=function(){if(this.state===lt||this.state===dt){this.state=vt,this.changed();var t=this;this.q().then((function(n){t.B=n,t.state=pt,t.changed()})).catch((function(n){t.V=n,t.state=dt,t.changed()}))}},n}(Mt),jt=Ot;function Et(t,n){if(!t)throw new h(n)}var Tt=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pt=function(t){function n(n){var i=t.call(this)||this;if(i.on,i.once,i.un,i.$=void 0,i.K="geometry",i.H=null,i.tt=void 0,i.nt=null,i.addChangeListener(i.K,i.it),n)if("function"==typeof n.getSimplifiedGeometry){var r=n;i.setGeometry(r)}else{var e=n;i.setProperties(e)}return i}return Tt(n,t),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},n.prototype.getGeometry=function(){return this.get(this.K)},n.prototype.getId=function(){return this.$},n.prototype.getGeometryName=function(){return this.K},n.prototype.getStyle=function(){return this.H},n.prototype.getStyleFunction=function(){return this.tt},n.prototype.rt=function(){this.changed()},n.prototype.it=function(){this.nt&&(H(this.nt),this.nt=null);var t=this.getGeometry();t&&(this.nt=$(t,z,this.rt,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.K,t)},n.prototype.setStyle=function(t){this.H=t,this.tt=t?At(t):void 0,this.changed()},n.prototype.setId=function(t){this.$=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.K,this.it),this.K=t,this.addChangeListener(this.K,this.it),this.it()},n}(et);function At(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:(Et("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var Ct=Pt,kt={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},It={9001:kt.METERS,9002:kt.FEET,9003:kt.USFEET,9101:kt.RADIANS,9102:kt.DEGREES};function Nt(t){return It[t]}var zt={};zt[kt.RADIANS]=6370997/(2*Math.PI),zt[kt.DEGREES]=2*Math.PI*6370997/360,zt[kt.FEET]=.3048,zt[kt.METERS]=1,zt[kt.USFEET]=1200/3937;var Lt,Rt=kt,Ft="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Gt=-1!==Ft.indexOf("firefox"),Dt=-1!==Ft.indexOf("safari")&&-1==Ft.indexOf("chrom"),Ut=Dt&&!!(Ft.indexOf("version/15.4")>=0||Ft.match(/cpu (os|iphone os) 15_4 like mac os x/)),qt=-1!==Ft.indexOf("webkit")&&-1==Ft.indexOf("edge"),Bt=-1!==Ft.indexOf("macintosh"),Xt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Yt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Zt="undefined"!=typeof Image&&Image.prototype.decode,Vt=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(t){}return t}(),Wt=new Array(6);function $t(){return[1,0,0,1,0,0]}function Kt(t){return Jt(t,1,0,0,1,0,0)}function Ht(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],s=t[4],u=t[5],a=n[0],h=n[1],f=n[2],c=n[3],l=n[4],v=n[5];return t[0]=i*a+e*h,t[1]=r*a+o*h,t[2]=i*f+e*c,t[3]=r*f+o*c,t[4]=i*l+e*v+s,t[5]=r*l+o*v+u,t}function Jt(t,n,i,r,e,o,s){return t[0]=n,t[1]=i,t[2]=r,t[3]=e,t[4]=o,t[5]=s,t}function Qt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function tn(t,n){var i=n[0],r=n[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function nn(t,n){var i=Math.cos(n),r=Math.sin(n);return Ht(t,Jt(Wt,i,r,-r,i,0,0))}function rn(t,n,i){return Ht(t,Jt(Wt,n,0,0,i,0,0))}function en(t,n,i){return Jt(t,n,0,0,i,0,0)}function on(t,n,i){return Ht(t,Jt(Wt,1,0,0,1,n,i))}function sn(t,n,i,r,e,o,s,u){var a=Math.sin(o),h=Math.cos(o);return t[0]=r*h,t[1]=e*a,t[2]=-r*a,t[3]=e*h,t[4]=s*r*h-u*r*a+n,t[5]=s*e*a+u*e*h+i,t}function un(t,n){var i=an(n);Et(0!==i,32);var r=n[0],e=n[1],o=n[2],s=n[3],u=n[4],a=n[5];return t[0]=s/i,t[1]=-e/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*a-s*u)/i,t[5]=-(r*a-e*u)/i,t}function an(t){return t[0]*t[3]-t[1]*t[2]}function hn(t){var n="matrix("+t.join(", ")+")";if(Yt)return n;var i=Lt||(Lt=document.createElement("div"));return i.style.transform=n,i.style.transform}var fn=0,cn=1,ln=2,vn=4,pn=8,dn=16;function yn(t){for(var n=Sn(),i=0,r=t.length;i<r;++i)kn(n,t[i]);return n}function mn(t,n,i){return i?(i[0]=t[0]-n,i[1]=t[1]-n,i[2]=t[2]+n,i[3]=t[3]+n,i):[t[0]-n,t[1]-n,t[2]+n,t[3]+n]}function wn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t.slice()}function gn(t,n,i){var r,e;return(r=n<t[0]?t[0]-n:t[2]<n?n-t[2]:0)*r+(e=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*e}function bn(t,n){return _n(t,n[0],n[1])}function xn(t,n){return t[0]<=n[0]&&n[2]<=t[2]&&t[1]<=n[1]&&n[3]<=t[3]}function _n(t,n,i){return t[0]<=n&&n<=t[2]&&t[1]<=i&&i<=t[3]}function Mn(t,n){var i=t[0],r=t[1],e=t[2],o=t[3],s=n[0],u=n[1],a=fn;return s<i?a|=dn:s>e&&(a|=vn),u<r?a|=pn:u>o&&(a|=ln),a===fn&&(a=cn),a}function Sn(){return[1/0,1/0,-1/0,-1/0]}function On(t,n,i,r,e){return e?(e[0]=t,e[1]=n,e[2]=i,e[3]=r,e):[t,n,i,r]}function jn(t){return On(1/0,1/0,-1/0,-1/0,t)}function En(t,n){var i=t[0],r=t[1];return On(i,r,i,r,n)}function Tn(t,n,i,r,e){return Nn(jn(e),t,n,i,r)}function Pn(t,n){return t[0]==n[0]&&t[2]==n[2]&&t[1]==n[1]&&t[3]==n[3]}function An(t,n,i){return Math.abs(t[0]-n[0])<i&&Math.abs(t[2]-n[2])<i&&Math.abs(t[1]-n[1])<i&&Math.abs(t[3]-n[3])<i}function Cn(t,n){return n[0]<t[0]&&(t[0]=n[0]),n[2]>t[2]&&(t[2]=n[2]),n[1]<t[1]&&(t[1]=n[1]),n[3]>t[3]&&(t[3]=n[3]),t}function kn(t,n){n[0]<t[0]&&(t[0]=n[0]),n[0]>t[2]&&(t[2]=n[0]),n[1]<t[1]&&(t[1]=n[1]),n[1]>t[3]&&(t[3]=n[1])}function In(t,n){for(var i=0,r=n.length;i<r;++i)kn(t,n[i]);return t}function Nn(t,n,i,r,e){for(;i<r;i+=e)Ln(t,n[i],n[i+1]);return t}function zn(t,n){for(var i=0,r=n.length;i<r;++i)In(t,n[i]);return t}function Ln(t,n,i){t[0]=Math.min(t[0],n),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],n),t[3]=Math.max(t[3],i)}function Rn(t,n){var i;return(i=n(Gn(t)))||(i=n(Dn(t)))||(i=n(Wn(t)))?i:(i=n(Vn(t)))||!1}function Fn(t){var n=0;return Hn(t)||(n=$n(t)*Yn(t)),n}function Gn(t){return[t[0],t[1]]}function Dn(t){return[t[2],t[1]]}function Un(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function qn(t,n){var i;return"bottom-left"===n?i=Gn(t):"bottom-right"===n?i=Dn(t):"top-left"===n?i=Vn(t):"top-right"===n?i=Wn(t):Et(!1,13),i}function Bn(t,n,i,r,e){var o=Xn(t,n,i,r),s=o[0],u=o[1],a=o[2],h=o[3],f=o[4],c=o[5],l=o[6],v=o[7];return On(Math.min(s,a,f,l),Math.min(u,h,c,v),Math.max(s,a,f,l),Math.max(u,h,c,v),e)}function Xn(t,n,i,r){var e=n*r[0]/2,o=n*r[1]/2,s=Math.cos(i),u=Math.sin(i),a=e*s,h=e*u,f=o*s,c=o*u,l=t[0],v=t[1];return[l-a+c,v-h-f,l-a-c,v-h+f,l+a-c,v+h+f,l+a+c,v+h-f,l-a+c,v-h-f]}function Yn(t){return t[3]-t[1]}function Zn(t,n,i){var r=i||[1/0,1/0,-1/0,-1/0];return Kn(t,n)?(t[0]>n[0]?r[0]=t[0]:r[0]=n[0],t[1]>n[1]?r[1]=t[1]:r[1]=n[1],t[2]<n[2]?r[2]=t[2]:r[2]=n[2],t[3]<n[3]?r[3]=t[3]:r[3]=n[3]):jn(r),r}function Vn(t){return[t[0],t[3]]}function Wn(t){return[t[2],t[3]]}function $n(t){return t[2]-t[0]}function Kn(t,n){return t[0]<=n[2]&&t[2]>=n[0]&&t[1]<=n[3]&&t[3]>=n[1]}function Hn(t){return t[2]<t[0]||t[3]<t[1]}function Jn(t,n){return n?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n):t}function Qn(t,n){var i=(t[2]-t[0])/2*(n-1),r=(t[3]-t[1])/2*(n-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function ti(t,n,i){var r=!1,e=Mn(t,n),o=Mn(t,i);if(e===cn||o===cn)r=!0;else{var s=t[0],u=t[1],a=t[2],h=t[3],f=n[0],c=n[1],l=i[0],v=i[1],p=(v-c)/(l-f),d=void 0,y=void 0;o&ln&&!(e&ln)&&(r=(d=l-(v-h)/p)>=s&&d<=a),r||!(o&vn)||e&vn||(r=(y=v-(l-a)*p)>=u&&y<=h),r||!(o&pn)||e&pn||(r=(d=l-(v-u)/p)>=s&&d<=a),r||!(o&dn)||e&dn||(r=(y=v-(l-s)*p)>=u&&y<=h)}return r}function ni(t,n,i,r){var e=[];if(r>1)for(var o=t[2]-t[0],s=t[3]-t[1],u=0;u<r;++u)e.push(t[0]+o*u/r,t[1],t[2],t[1]+s*u/r,t[2]-o*u/r,t[3],t[0],t[3]-s*u/r);else e=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];n(e,e,2);for(var a=[],h=[],f=(u=0,e.length);u<f;u+=2)a.push(e[u]),h.push(e[u+1]);return function(t,n,i){return On(Math.min.apply(null,t),Math.min.apply(null,n),Math.max.apply(null,t),Math.max.apply(null,n),i)}(a,h,i)}function ii(t,n){var i=n.getExtent(),r=Un(t);if(n.canWrapX()&&(r[0]<i[0]||r[0]>=i[2])){var e=$n(i),o=Math.floor((r[0]-i[0])/e)*e;t[0]-=o,t[2]-=o}return t}function ri(t,n){if(n.canWrapX()){var i=n.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];ii(t,n);var r=$n(i);if($n(t)>r)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}var ei=function(){function t(t){this.et=t.code,this.ot=t.units,this.st=void 0!==t.extent?t.extent:null,this.ut=void 0!==t.worldExtent?t.worldExtent:null,this.ht=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.ft=void 0!==t.global&&t.global,this.ct=!(!this.ft||!this.st),this.lt=t.getPointResolution,this.vt=null,this.dt=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.ct},t.prototype.getCode=function(){return this.et},t.prototype.getExtent=function(){return this.st},t.prototype.getUnits=function(){return this.ot},t.prototype.getMetersPerUnit=function(){return this.dt||zt[this.ot]},t.prototype.getWorldExtent=function(){return this.ut},t.prototype.getAxisOrientation=function(){return this.ht},t.prototype.isGlobal=function(){return this.ft},t.prototype.setGlobal=function(t){this.ft=t,this.ct=!(!t||!this.st)},t.prototype.getDefaultTileGrid=function(){return this.vt},t.prototype.setDefaultTileGrid=function(t){this.vt=t},t.prototype.setExtent=function(t){this.st=t,this.ct=!(!this.ft||!t)},t.prototype.setWorldExtent=function(t){this.ut=t},t.prototype.setGetPointResolution=function(t){this.lt=t},t.prototype.getPointResolutionFunc=function(){return this.lt},t}();function oi(t,n,i){return Math.min(Math.max(t,n),i)}var si="cosh"in Math?Math.cosh:function(t){var n=Math.exp(t);return(n+1/n)/2},ui="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function ai(t,n,i,r,e,o){var s=e-i,u=o-r;if(0!==s||0!==u){var a=((t-i)*s+(n-r)*u)/(s*s+u*u);a>1?(i=e,r=o):a>0&&(i+=s*a,r+=u*a)}return hi(t,n,i,r)}function hi(t,n,i,r){var e=i-t,o=r-n;return e*e+o*o}function fi(t){for(var n=t.length,i=0;i<n;i++){for(var r=i,e=Math.abs(t[i][i]),o=i+1;o<n;o++){var s=Math.abs(t[o][i]);s>e&&(e=s,r=o)}if(0===e)return null;var u=t[r];t[r]=t[i],t[i]=u;for(var a=i+1;a<n;a++)for(var h=-t[a][i]/t[i][i],f=i;f<n+1;f++)i==f?t[a][f]=0:t[a][f]+=h*t[i][f]}for(var c=new Array(n),l=n-1;l>=0;l--){c[l]=t[l][n]/t[l][l];for(var v=l-1;v>=0;v--)t[v][n]-=t[v][l]*c[l]}return c}function ci(t){return 180*t/Math.PI}function li(t){return t*Math.PI/180}function vi(t,n){var i=t%n;return i*n<0?i+n:i}function pi(t,n,i){return t+i*(n-t)}function di(t,n){var i=Math.pow(10,n);return Math.round(t*i)/i}function yi(t,n){return Math.round(di(t,n))}function mi(t,n){return Math.floor(di(t,n))}function wi(t,n){return Math.ceil(di(t,n))}var gi=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bi=6378137,xi=Math.PI*bi,_i=[-xi,-xi,xi,xi],Mi=[-180,-85,180,85],Si=bi*Math.log(Math.tan(Math.PI/2)),Oi=function(t){function n(n){return t.call(this,{code:n,units:Rt.METERS,extent:_i,global:!0,worldExtent:Mi,getPointResolution:function(t,n){return t/si(n[1]/bi)}})||this}return gi(n,t),n}(ei),ji=[new Oi("EPSG:3857"),new Oi("EPSG:102100"),new Oi("EPSG:102113"),new Oi("EPSG:900913"),new Oi("http://www.opengis.net/def/crs/EPSG/0/3857"),new Oi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ei(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var s=0;s<r;s+=e){o[s]=xi*t[s]/180;var u=bi*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>Si?u=Si:u<-Si&&(u=-Si),o[s+1]=u}return o}function Ti(t,n,i){var r=t.length,e=i>1?i:2,o=n;void 0===o&&(o=e>2?t.slice():new Array(r));for(var s=0;s<r;s+=e)o[s]=180*t[s]/xi,o[s+1]=360*Math.atan(Math.exp(t[s+1]/bi))/Math.PI-90;return o}var Pi=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ai=6378137,Ci=[-180,-90,180,90],ki=Math.PI*Ai/180,Ii=function(t){function n(n,i){return t.call(this,{code:n,units:Rt.DEGREES,extent:Ci,axisOrientation:i,global:!0,metersPerUnit:ki,worldExtent:Ci})||this}return Pi(n,t),n}(ei),Ni=[new Ii("CRS:84"),new Ii("EPSG:4326","neu"),new Ii("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ii("urn:ogc:def:crs:OGC:2:84"),new Ii("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ii("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ii("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],zi={};function Li(){zi={}}function Ri(t){return zi[t]||zi[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Fi(t,n){zi[t]=n}var Gi={};function Di(){Gi={}}function Ui(t,n,i){var r=t.getCode(),e=n.getCode();r in Gi||(Gi[r]={}),Gi[r][e]=i}function qi(t,n){var i;return t in Gi&&n in Gi[t]&&(i=Gi[t][n]),i}function Bi(t,n,i){var r=void 0!==i?t.toFixed(i):""+t,e=r.indexOf(".");return(e=-1===e?r.length:e)>n?r:new Array(1+n-e).join("0")+r}function Xi(t,n){for(var i=(""+t).split("."),r=(""+n).split("."),e=0;e<Math.max(i.length,r.length);e++){var o=parseInt(i[e]||"0",10),s=parseInt(r[e]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function Yi(t,n){return t[0]+=+n[0],t[1]+=+n[1],t}function Zi(t,n){var i=n.getRadius(),r=n.getCenter(),e=r[0],o=r[1],s=t[0]-e,u=t[1]-o;0===s&&0===u&&(s=1);var a=Math.sqrt(s*s+u*u);return[e+i*s/a,o+i*u/a]}function Vi(t,n){var i,r,e=t[0],o=t[1],s=n[0],u=n[1],a=s[0],h=s[1],f=u[0],c=u[1],l=f-a,v=c-h,p=0===l&&0===v?0:(l*(e-a)+v*(o-h))/(l*l+v*v||0);return p<=0?(i=a,r=h):p>=1?(i=f,r=c):(i=a+p*l,r=h+p*v),[i,r]}function Wi(t,n,i){var r=vi(n+180,360)-180,e=Math.abs(3600*r),o=i||0,s=Math.pow(10,o),u=Math.floor(e/3600),a=Math.floor((e-3600*u)/60),h=e-3600*u-60*a;return(h=Math.ceil(h*s)/s)>=60&&(h=0,a+=1),a>=60&&(a=0,u+=1),u+"° "+Bi(a,2)+"′ "+Bi(h,2,o)+"″"+(0==r?"":" "+t.charAt(r<0?1:0))}function $i(t,n,i){return t?n.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Ki(t,n){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=n[r]){i=!1;break}return i}function Hi(t,n){var i=Math.cos(n),r=Math.sin(n),e=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=e,t[1]=o,t}function Ji(t,n){return t[0]*=n,t[1]*=n,t}function Qi(t,n){var i=t[0]-n[0],r=t[1]-n[1];return i*i+r*r}function tr(t,n){return Math.sqrt(Qi(t,n))}function nr(t,n){return Qi(t,Vi(t,n))}function ir(t,n){return $i(t,"{x}, {y}",n)}function rr(t,n){if(n.canWrapX()){var i=$n(n.getExtent()),r=er(t,n,i);r&&(t[0]-=r*i)}return t}function er(t,n,i){var r=n.getExtent(),e=0;if(n.canWrapX()&&(t[0]<r[0]||t[0]>r[2])){var o=i||$n(r);e=Math.floor((t[0]-r[0])/o)}return e}var or=6371008.8;function sr(t,n,i){var r=i||or,e=li(t[1]),o=li(n[1]),s=(o-e)/2,u=li(n[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(u)*Math.sin(u)*Math.cos(e)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function ur(t,n){for(var i=0,r=0,e=t.length;r<e-1;++r)i+=sr(t[r],t[r+1],n);return i}function ar(t,n){for(var i=0,r=t.length,e=t[r-1][0],o=t[r-1][1],s=0;s<r;s++){var u=t[s][0],a=t[s][1];i+=li(u-e)*(2+Math.sin(li(o))+Math.sin(li(a))),e=u,o=a}return i*n*n/2}function hr(t,n,i,r){var e=r||or,o=li(t[1]),s=li(t[0]),u=n/e,a=Math.asin(Math.sin(o)*Math.cos(u)+Math.cos(o)*Math.sin(u)*Math.cos(i));return[ci(s+Math.atan2(Math.sin(i)*Math.sin(u)*Math.cos(o),Math.cos(u)-Math.sin(o)*Math.sin(a))),ci(a)]}var fr=!0;function cr(t){fr=!(void 0===t||t)}function lr(t,n,i){var r;if(void 0!==n){for(var e=0,o=t.length;e<o;++e)n[e]=t[e];r=n}else r=t.slice();return r}function vr(t,n,i){if(void 0!==n&&t!==n){for(var r=0,e=t.length;r<e;++r)n[r]=t[r];t=n}return t}function pr(t){Fi(t.getCode(),t),Ui(t,t,lr)}function dr(t){t.forEach(pr)}function yr(t){return"string"==typeof t?Ri(t):t||null}function mr(t,n,i,r){var e,o=(t=yr(t)).getPointResolutionFunc();if(o){if(e=o(n,i),r&&r!==t.getUnits())(u=t.getMetersPerUnit())&&(e=e*u/zt[r])}else{var s=t.getUnits();if(s==Rt.DEGREES&&!r||r==Rt.DEGREES)e=n;else{var u,a=Or(t,yr("EPSG:4326"));if(a===vr&&s!==Rt.DEGREES)e=n*t.getMetersPerUnit();else{var h=[i[0]-n/2,i[1],i[0]+n/2,i[1],i[0],i[1]-n/2,i[0],i[1]+n/2];e=(sr((h=a(h,h,2)).slice(0,2),h.slice(2,4))+sr(h.slice(4,6),h.slice(6,8)))/2}void 0!==(u=r?zt[r]:t.getMetersPerUnit())&&(e/=u)}}return e}function wr(t){dr(t),t.forEach((function(n){t.forEach((function(t){n!==t&&Ui(n,t,lr)}))}))}function gr(t,n,i,r){t.forEach((function(t){n.forEach((function(n){Ui(t,n,i),Ui(n,t,r)}))}))}function br(t,n){return t?"string"==typeof t?yr(t):t:yr(n)}function xr(t){return function(n,i,r){for(var e=n.length,o=void 0!==r?r:2,s=void 0!==i?i:new Array(e),u=0;u<e;u+=o)for(var a=t(n.slice(u,u+o)),h=a.length,f=0,c=o;f<c;++f)s[u+f]=f>=h?n[u+f]:a[f];return s}}function _r(t,n,i,r){var e=yr(t),o=yr(n);Ui(e,o,xr(i)),Ui(o,e,xr(r))}function Mr(t,n){return cr(),Er(t,"EPSG:4326",void 0!==n?n:"EPSG:3857")}function Sr(t,n){if(t===n)return!0;var i=t.getUnits()===n.getUnits();return(t.getCode()===n.getCode()||Or(t,n)===lr)&&i}function Or(t,n){var i=qi(t.getCode(),n.getCode());return i||(i=vr),i}function jr(t,n){return Or(yr(t),yr(n))}function Er(t,n,i){return jr(n,i)(t,void 0,t.length)}function Tr(t,n,i,r){return ni(t,jr(n,i),void 0,r)}var Pr=null;function Ar(t){Pr=yr(t)}function Cr(){return Pr}function kr(t,n){return Pr?Er(t,n,Pr):t}function Ir(t,n){return Pr?Er(t,Pr,n):(fr&&!Ki(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(fr=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Nr(t,n){return Pr?Tr(t,n,Pr):t}function zr(t,n){return Pr?Tr(t,Pr,n):t}function Lr(t,n){if(!Pr)return t;var i=yr(n).getUnits(),r=Pr.getUnits();return i&&r?t*zt[i]/zt[r]:t}function Rr(t,n){if(!Pr)return t;var i=yr(n).getUnits(),r=Pr.getUnits();return i&&r?t*zt[r]/zt[i]:t}function Fr(t,n,i){return function(r){var e,o;if(t.canWrapX()){var s=t.getExtent(),u=$n(s);(o=er(r=r.slice(0),t,u))&&(r[0]=r[0]-o*u),r[0]=oi(r[0],s[0],s[2]),r[1]=oi(r[1],s[1],s[3]),e=i(r)}else e=i(r);return o&&n.canWrapX()&&(e[0]+=o*$n(n.getExtent())),e}}function Gr(){wr(ji),wr(Ni),gr(Ni,ji,Ei,Ti)}function Dr(t,n,i,r,e,o){for(var s=o||[],u=0,a=n;a<i;a+=r){var h=t[a],f=t[a+1];s[u++]=e[0]*h+e[2]*f+e[4],s[u++]=e[1]*h+e[3]*f+e[5]}return o&&s.length!=u&&(s.length=u),s}function Ur(t,n,i,r,e,o,s){for(var u=s||[],a=Math.cos(e),h=Math.sin(e),f=o[0],c=o[1],l=0,v=n;v<i;v+=r){var p=t[v]-f,d=t[v+1]-c;u[l++]=f+p*a-d*h,u[l++]=c+p*h+d*a;for(var y=v+2;y<v+r;++y)u[l++]=t[y]}return s&&u.length!=l&&(u.length=l),u}function qr(t,n,i,r,e,o,s,u){for(var a=u||[],h=s[0],f=s[1],c=0,l=n;l<i;l+=r){var v=t[l]-h,p=t[l+1]-f;a[c++]=h+e*v,a[c++]=f+o*p;for(var d=l+2;d<l+r;++d)a[c++]=t[d]}return u&&a.length!=c&&(a.length=c),a}function Br(t,n,i,r,e,o,s){for(var u=s||[],a=0,h=n;h<i;h+=r){u[a++]=t[h]+e,u[a++]=t[h+1]+o;for(var f=h+2;f<h+r;++f)u[a++]=t[f]}return s&&u.length!=a&&(u.length=a),u}Gr();var Xr=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yr=[1,0,0,1,0,0],Zr=function(t){function n(){var n=t.call(this)||this;return n.st=[1/0,1/0,-1/0,-1/0],n.yt=-1,n.simplifiedGeometryMaxMinSquaredTolerance=0,n.simplifiedGeometryRevision=0,n.simplifyTransformedInternal=E((function(t,n,i){if(!i)return this.getSimplifiedGeometry(n);var r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})),n}return Xr(n,t),n.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},n.prototype.clone=function(){return r()},n.prototype.closestPointXY=function(t,n,i,e){return r()},n.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},n.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return r()},n.prototype.getExtent=function(t){if(this.yt!=this.getRevision()){var n=this.computeExtent(this.st);(isNaN(n[0])||isNaN(n[1]))&&jn(n),this.yt=this.getRevision()}return Jn(this.st,t)},n.prototype.rotate=function(t,n){r()},n.prototype.scale=function(t,n,i){r()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return r()},n.prototype.getType=function(){return r()},n.prototype.applyTransform=function(t){r()},n.prototype.intersectsExtent=function(t){return r()},n.prototype.translate=function(t,n){r()},n.prototype.transform=function(t,n){var i=yr(t),r=i.getUnits()==Rt.TILE_PIXELS?function(t,r,e){var o=i.getExtent(),s=i.getWorldExtent(),u=Yn(s)/Yn(o);return sn(Yr,s[0],s[3],u,-u,0,0,0),Dr(t,0,t.length,e,Yr,r),jr(i,n)(t,r,e)}:jr(i,n);return this.applyTransform(r),this},n}(et),Vr=Zr,Wr=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$r=function(t){function n(){var n=t.call(this)||this;return n.layout="XY",n.stride=2,n.flatCoordinates=null,n}return Wr(n,t),n.prototype.computeExtent=function(t){return Tn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return r()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,n){this.stride=Kr(t),this.layout=t,this.flatCoordinates=n},n.prototype.setCoordinates=function(t,n){r()},n.prototype.setLayout=function(t,n,i){var r;if(t)r=Kr(t);else{for(var e=0;e<i;++e){if(0===n.length)return this.layout="XY",void(this.stride=2);n=n[0]}t=function(t){var n;2==t?n="XY":3==t?n="XYZ":4==t&&(n="XYZM");return n}(r=n.length)}this.layout=t,this.stride=r},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Ur(i,0,i.length,r,t,n,i),this.changed()}},n.prototype.scale=function(t,n,i){var r=n;void 0===r&&(r=t);var e=i;e||(e=Un(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();qr(o,0,o.length,s,t,r,e,o),this.changed()}},n.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Br(i,0,i.length,r,t,n,i),this.changed()}},n}(Vr);function Kr(t){var n;return"XY"==t?n=2:"XYZ"==t||"XYM"==t?n=3:"XYZM"==t&&(n=4),n}function Hr(t,n,i){var r=t.getFlatCoordinates();if(r){var e=t.getStride();return Dr(r,0,r.length,e,n,i)}return null}var Jr=$r;function Qr(t,n,i,r,e,o,s){var u,a=t[n],h=t[n+1],f=t[i]-a,c=t[i+1]-h;if(0===f&&0===c)u=n;else{var l=((e-a)*f+(o-h)*c)/(f*f+c*c);if(l>1)u=i;else{if(l>0){for(var v=0;v<r;++v)s[v]=pi(t[n+v],t[i+v],l);return void(s.length=r)}u=n}}for(v=0;v<r;++v)s[v]=t[u+v];s.length=r}function te(t,n,i,r,e){var o=t[n],s=t[n+1];for(n+=r;n<i;n+=r){var u=t[n],a=t[n+1],h=hi(o,s,u,a);h>e&&(e=h),o=u,s=a}return e}function ne(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];e=te(t,n,u,r,e),n=u}return e}function ie(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];e=ne(t,n,u,r,e),n=u[u.length-1]}return e}function re(t,n,i,r,e,o,s,u,a,h,f){if(n==i)return h;var c,l;if(0===e){if((l=hi(s,u,t[n],t[n+1]))<h){for(c=0;c<r;++c)a[c]=t[n+c];return a.length=r,l}return h}for(var v=f||[NaN,NaN],p=n+r;p<i;)if(Qr(t,p-r,p,r,s,u,v),(l=hi(s,u,v[0],v[1]))<h){for(h=l,c=0;c<r;++c)a[c]=v[c];a.length=r,p+=r}else p+=r*Math.max((Math.sqrt(l)-Math.sqrt(h))/e|0,1);if(o&&(Qr(t,i-r,n,r,s,u,v),(l=hi(s,u,v[0],v[1]))<h)){for(h=l,c=0;c<r;++c)a[c]=v[c];a.length=r}return h}function ee(t,n,i,r,e,o,s,u,a,h,f){for(var c=f||[NaN,NaN],l=0,v=i.length;l<v;++l){var p=i[l];h=re(t,n,p,r,e,o,s,u,a,h,c),n=p}return h}function oe(t,n,i,r,e,o,s,u,a,h,f){for(var c=f||[NaN,NaN],l=0,v=i.length;l<v;++l){var p=i[l];h=ee(t,n,p,r,e,o,s,u,a,h,c),n=p[p.length-1]}return h}function se(t,n,i,r){for(var e=0,o=i.length;e<o;++e)t[n++]=i[e];return n}function ue(t,n,i,r){for(var e=0,o=i.length;e<o;++e)for(var s=i[e],u=0;u<r;++u)t[n++]=s[u];return n}function ae(t,n,i,r,e){for(var o=e||[],s=0,u=0,a=i.length;u<a;++u){var h=ue(t,n,i[u],r);o[s++]=h,n=h}return o.length=s,o}function he(t,n,i,r,e){for(var o=e||[],s=0,u=0,a=i.length;u<a;++u){var h=ae(t,n,i[u],r,o[s]);0===h.length&&(h[0]=n),o[s++]=h,n=h[h.length-1]}return o.length=s,o}function fe(t,n,i,r,e,o,s){var u=(i-n)/r;if(u<3){for(;n<i;n+=r)o[s++]=t[n],o[s++]=t[n+1];return s}var a=new Array(u);a[0]=1,a[u-1]=1;for(var h=[n,i-r],f=0;h.length>0;){for(var c=h.pop(),l=h.pop(),v=0,p=t[l],d=t[l+1],y=t[c],m=t[c+1],w=l+r;w<c;w+=r){var g=ai(t[w],t[w+1],p,d,y,m);g>v&&(f=w,v=g)}v>e&&(a[(f-n)/r]=1,l+r<f&&h.push(l,f),f+r<c&&h.push(f,c))}for(w=0;w<u;++w)a[w]&&(o[s++]=t[n+w*r],o[s++]=t[n+w*r+1]);return s}function ce(t,n,i,r,e,o,s,u){for(var a=0,h=i.length;a<h;++a){var f=i[a];s=fe(t,n,f,r,e,o,s),u.push(s),n=f}return s}function le(t,n,i,r,e,o,s){if(i<=n+r){for(;n<i;n+=r)o[s++]=t[n],o[s++]=t[n+1];return s}var u=t[n],a=t[n+1];o[s++]=u,o[s++]=a;var h=u,f=a;for(n+=r;n<i;n+=r)hi(u,a,h=t[n],f=t[n+1])>e&&(o[s++]=h,o[s++]=f,u=h,a=f);return h==u&&f==a||(o[s++]=h,o[s++]=f),s}function ve(t,n){return n*Math.round(t/n)}function pe(t,n,i,r,e,o,s){if(n==i)return s;var u,a,h=ve(t[n],e),f=ve(t[n+1],e);n+=r,o[s++]=h,o[s++]=f;do{if(u=ve(t[n],e),a=ve(t[n+1],e),(n+=r)==i)return o[s++]=u,o[s++]=a,s}while(u==h&&a==f);for(;n<i;){var c=ve(t[n],e),l=ve(t[n+1],e);if(n+=r,c!=u||l!=a){var v=u-h,p=a-f,d=c-h,y=l-f;v*y==p*d&&(v<0&&d<v||v==d||v>0&&d>v)&&(p<0&&y<p||p==y||p>0&&y>p)?(u=c,a=l):(o[s++]=u,o[s++]=a,h=u,f=a,u=c,a=l)}}return o[s++]=u,o[s++]=a,s}function de(t,n,i,r,e,o,s,u){for(var a=0,h=i.length;a<h;++a){var f=i[a];s=pe(t,n,f,r,e,o,s),u.push(s),n=f}return s}function ye(t,n,i,r,e,o,s,u){for(var a=0,h=i.length;a<h;++a){var f=i[a],c=[];s=de(t,n,f,r,e,o,s,c),u.push(c),n=f[f.length-1]}return s}function me(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=n;u<i;u+=r)o[s++]=t.slice(u,u+r);return o.length=s,o}function we(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=0,a=i.length;u<a;++u){var h=i[u];o[s++]=me(t,n,h,r,o[s]),n=h}return o.length=s,o}function ge(t,n,i,r,e){for(var o=void 0!==e?e:[],s=0,u=0,a=i.length;u<a;++u){var h=i[u];o[s++]=1===h.length&&h[0]===n?[]:we(t,n,h,r,o[s]),n=h[h.length-1]}return o.length=s,o}function be(t,n,i,r){for(var e=0,o=t[i-r],s=t[i-r+1];n<i;n+=r){var u=t[n],a=t[n+1];e+=s*u-o*a,o=u,s=a}return e/2}function xe(t,n,i,r){for(var e=0,o=0,s=i.length;o<s;++o){var u=i[o];e+=be(t,n,u,r),n=u}return e}function _e(t,n,i,r){for(var e=0,o=0,s=i.length;o<s;++o){var u=i[o];e+=xe(t,n,u,r),n=u[u.length-1]}return e}var Me=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Se=function(t){function n(n,i){var r=t.call(this)||this;return r.wt=-1,r.gt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return Me(n,t),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,n,i,r){return r<gn(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(te(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.gt=this.getRevision()),re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.wt,!0,t,n,i,r))},n.prototype.getArea=function(){return be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,"XY")},n.prototype.getType=function(){return"LinearRing"},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ue(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Jr),Oe=Se,je=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ee=function(t){function n(n,i){var r=t.call(this)||this;return r.setCoordinates(n,i),r}return je(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=hi(t,n,e[0],e[1]);if(o<r){for(var s=this.stride,u=0;u<s;++u)i[u]=e[u];return i.length=s,o}return r},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return En(this.flatCoordinates,t)},n.prototype.getType=function(){return"Point"},n.prototype.intersectsExtent=function(t){return _n(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=se(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Jr),Te=Ee;function Pe(t,n,i,r,e){return!Rn(e,(function(e){return!Ae(t,n,i,r,e[0],e[1])}))}function Ae(t,n,i,r,e,o){for(var s=0,u=t[i-r],a=t[i-r+1];n<i;n+=r){var h=t[n],f=t[n+1];a<=o?f>o&&(h-u)*(o-a)-(e-u)*(f-a)>0&&s++:f<=o&&(h-u)*(o-a)-(e-u)*(f-a)<0&&s--,u=h,a=f}return 0!==s}function Ce(t,n,i,r,e,o){if(0===i.length)return!1;if(!Ae(t,n,i[0],r,e,o))return!1;for(var s=1,u=i.length;s<u;++s)if(Ae(t,i[s-1],i[s],r,e,o))return!1;return!0}function ke(t,n,i,r,e,o){if(0===i.length)return!1;for(var s=0,u=i.length;s<u;++s){var a=i[s];if(Ce(t,n,a,r,e,o))return!0;n=a[a.length-1]}return!1}function Ie(t,n,i,r,e,o,s){for(var u,a,h,f,c,l,v,p=e[o+1],y=[],m=0,w=i.length;m<w;++m){var g=i[m];for(f=t[g-r],l=t[g-r+1],u=n;u<g;u+=r)c=t[u],v=t[u+1],(p<=l&&v<=p||l<=p&&p<=v)&&(h=(p-l)/(v-l)*(c-f)+f,y.push(h)),f=c,l=v}var b=NaN,x=-1/0;for(y.sort(d),f=y[0],u=1,a=y.length;u<a;++u){c=y[u];var _=Math.abs(c-f);_>x&&Ce(t,n,i,r,h=(f+c)/2,p)&&(b=h,x=_),f=c}return isNaN(b)&&(b=e[o]),s?(s.push(b,p,x),s):[b,p,x]}function Ne(t,n,i,r,e){for(var o=[],s=0,u=i.length;s<u;++s){var a=i[s];o=Ie(t,n,a,r,e,2*s,o),n=a[a.length-1]}return o}function ze(t,n,i,r,e){var o;for(n+=r;n<i;n+=r)if(o=e(t.slice(n-r,n),t.slice(n,n+r)))return o;return!1}function Le(t,n,i,r,e){var o=Nn([1/0,1/0,-1/0,-1/0],t,n,i,r);return!!Kn(e,o)&&(!!xn(e,o)||(o[0]>=e[0]&&o[2]<=e[2]||(o[1]>=e[1]&&o[3]<=e[3]||ze(t,n,i,r,(function(t,n){return ti(e,t,n)})))))}function Re(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){if(Le(t,n,i[o],r,e))return!0;n=i[o]}return!1}function Fe(t,n,i,r,e){return!!Le(t,n,i,r,e)||(!!Ae(t,n,i,r,e[0],e[1])||(!!Ae(t,n,i,r,e[0],e[3])||(!!Ae(t,n,i,r,e[2],e[1])||!!Ae(t,n,i,r,e[2],e[3]))))}function Ge(t,n,i,r,e){if(!Fe(t,n,i[0],r,e))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o)if(Pe(t,i[o-1],i[o],r,e)&&!Le(t,i[o-1],i[o],r,e))return!1;return!0}function De(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];if(Ge(t,n,u,r,e))return!0;n=u[u.length-1]}return!1}function Ue(t,n,i,r){for(;n<i-r;){for(var e=0;e<r;++e){var o=t[n+e];t[n+e]=t[i-r+e],t[i-r+e]=o}n+=r,i-=r}}function qe(t,n,i,r){for(var e=0,o=t[i-r],s=t[i-r+1];n<i;n+=r){var u=t[n],a=t[n+1];e+=(u-o)*(a+s),o=u,s=a}return 0===e?void 0:e>0}function Be(t,n,i,r,e){for(var o=void 0!==e&&e,s=0,u=i.length;s<u;++s){var a=i[s],h=qe(t,n,a,r);if(0===s){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;n=a}return!0}function Xe(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o];if(!Be(t,n,u,r,e))return!1;u.length&&(n=u[u.length-1])}return!0}function Ye(t,n,i,r,e){for(var o=void 0!==e&&e,s=0,u=i.length;s<u;++s){var a=i[s],h=qe(t,n,a,r);(0===s?o&&h||!o&&!h:o&&!h||!o&&h)&&Ue(t,n,a,r),n=a}return n}function Ze(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o)n=Ye(t,n,i[o],r,e);return n}function Ve(t,n){for(var i=[],r=0,e=0,o=0,s=n.length;o<s;++o){var u=n[o];if(qe(t,r,u,2)){if(0===i.length)continue;i[i.length-1].push(n[e])}else i.push(n.slice(e,o+1));e=o+1,r=u}return i}var We=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$e=function(t){function n(n,i,r){var e=t.call(this)||this;return e.bt=[],e.xt=-1,e._t=null,e.wt=-1,e.gt=-1,e.Mt=-1,e.St=null,void 0!==i&&r?(e.setFlatCoordinates(i,n),e.bt=r):e.setCoordinates(n,i),e}return We(n,t),n.prototype.appendLinearRing=function(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.bt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.bt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<gn(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(ne(this.flatCoordinates,0,this.bt,this.stride,0)),this.gt=this.getRevision()),ee(this.flatCoordinates,0,this.bt,this.stride,this.wt,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return Ce(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t,n)},n.prototype.getArea=function(){return xe(this.getOrientedFlatCoordinates(),0,this.bt,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ye(n=this.getOrientedFlatCoordinates().slice(),0,this.bt,this.stride,t):n=this.flatCoordinates,we(n,0,this.bt,this.stride)},n.prototype.getEnds=function(){return this.bt},n.prototype.getFlatInteriorPoint=function(){if(this.xt!=this.getRevision()){var t=Un(this.getExtent());this._t=Ie(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t,0),this.xt=this.getRevision()}return this._t},n.prototype.getInteriorPoint=function(){return new Te(this.getFlatInteriorPoint(),"XYM")},n.prototype.getLinearRingCount=function(){return this.bt.length},n.prototype.getLinearRing=function(t){return t<0||this.bt.length<=t?null:new Oe(this.flatCoordinates.slice(0===t?0:this.bt[t-1],this.bt[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.bt,r=[],e=0,o=0,s=i.length;o<s;++o){var u=i[o],a=new Oe(n.slice(e,u),t);r.push(a),e=u}return r},n.prototype.getOrientedFlatCoordinates=function(){if(this.Mt!=this.getRevision()){var t=this.flatCoordinates;Be(t,0,this.bt,this.stride)?this.St=t:(this.St=t.slice(),this.St.length=Ye(this.St,0,this.bt,this.stride)),this.Mt=this.getRevision()}return this.St},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=de(this.flatCoordinates,0,this.bt,this.stride,Math.sqrt(t),i,0,r),new n(i,"XY",r)},n.prototype.getType=function(){return"Polygon"},n.prototype.intersectsExtent=function(t){return Ge(this.getOrientedFlatCoordinates(),0,this.bt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ae(this.flatCoordinates,0,t,this.stride,this.bt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Jr),Ke=$e;function He(t,n,i,r){for(var e=i||32,o=[],s=0;s<e;++s)g(o,hr(t,n,2*Math.PI*s/e,r));return o.push(o[0],o[1]),new $e(o,"XY",[o.length])}function Je(t){var n=t[0],i=t[1],r=t[2],e=t[3],o=[n,i,n,e,r,e,r,i,n,i];return new $e(o,"XY",[o.length])}function Qe(t,n,i){for(var r=n||32,e=t.getStride(),o=t.getLayout(),s=t.getCenter(),u=e*(r+1),a=new Array(u),h=0;h<u;h+=e){a[h]=0,a[h+1]=0;for(var f=2;f<e;f++)a[h+f]=s[f]}var c=[a.length],l=new $e(a,o,c);return to(l,s,t.getRadius(),i),l}function to(t,n,i,r){for(var e=t.getFlatCoordinates(),o=t.getStride(),s=e.length/o-1,u=r||0,a=0;a<=s;++a){var h=a*o,f=u+2*vi(a,s)*Math.PI/s;e[h]=n[0]+i*Math.cos(f),e[h+1]=n[1]+i*Math.sin(f)}t.changed()}var no=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),io="accuracy",ro="accuracyGeometry",eo="altitude",oo="altitudeAccuracy",so="heading",uo="position",ao="projection",ho="speed",fo="tracking",co="trackingOptions",lo=function(t){function n(n){var i=t.call(this,L)||this;return i.code=n.code,i.message=n.message,i}return no(n,t),n}(c),vo=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.Ot=null,i.jt=vr,i.Et=void 0,i.addChangeListener(ao,i.Tt),i.addChangeListener(fo,i.Pt),void 0!==r.projection&&i.setProjection(r.projection),void 0!==r.trackingOptions&&i.setTrackingOptions(r.trackingOptions),i.setTracking(void 0!==r.tracking&&r.tracking),i}return no(n,t),n.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},n.prototype.Tt=function(){var t=this.getProjection();t&&(this.jt=Or(yr("EPSG:4326"),t),this.Ot&&this.set(uo,this.jt(this.Ot)))},n.prototype.Pt=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.Et?this.Et=navigator.geolocation.watchPosition(this.At.bind(this),this.Ct.bind(this),this.getTrackingOptions()):t||void 0===this.Et||(navigator.geolocation.clearWatch(this.Et),this.Et=void 0)}},n.prototype.At=function(t){var n=t.coords;this.set(io,n.accuracy),this.set(eo,null===n.altitude?void 0:n.altitude),this.set(oo,null===n.altitudeAccuracy?void 0:n.altitudeAccuracy),this.set(so,null===n.heading?void 0:li(n.heading)),this.Ot?(this.Ot[0]=n.longitude,this.Ot[1]=n.latitude):this.Ot=[n.longitude,n.latitude];var i=this.jt(this.Ot);this.set(uo,i),this.set(ho,null===n.speed?void 0:n.speed);var r=He(this.Ot,n.accuracy);r.applyTransform(this.jt),this.set(ro,r),this.changed()},n.prototype.Ct=function(t){this.dispatchEvent(new lo(t))},n.prototype.getAccuracy=function(){return this.get(io)},n.prototype.getAccuracyGeometry=function(){return this.get(ro)||null},n.prototype.getAltitude=function(){return this.get(eo)},n.prototype.getAltitudeAccuracy=function(){return this.get(oo)},n.prototype.getHeading=function(){return this.get(so)},n.prototype.getPosition=function(){return this.get(uo)},n.prototype.getProjection=function(){return this.get(ao)},n.prototype.getSpeed=function(){return this.get(ho)},n.prototype.getTracking=function(){return this.get(fo)},n.prototype.getTrackingOptions=function(){return this.get(co)},n.prototype.setProjection=function(t){this.set(ao,yr(t))},n.prototype.setTracking=function(t){this.set(fo,t)},n.prototype.setTrackingOptions=function(t){this.set(co,t)},n}(et),po=vo,yo=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mo=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.extent=n,o.kt=r,o.resolution=i,o.state=e,o}return yo(n,t),n.prototype.changed=function(){this.dispatchEvent(z)},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return r()},n.prototype.getPixelRatio=function(){return this.kt},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){r()},n}(N),wo=0,go=1,bo=2,xo=3,_o=4,Mo=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function So(t,n,i){var r=t,e=!0,o=!1,s=!1,u=[K(r,Y,(function(){s=!0,o||n()}))];return r.src&&Zt?(o=!0,r.decode().then((function(){e&&n()})).catch((function(t){e&&(s?n():i())}))):u.push(K(r,L,i)),function(){e=!1,u.forEach(H)}}var Oo=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,r,wo)||this;return u.Nt=e,u.zt=new Image,null!==o&&(u.zt.crossOrigin=o),u.Lt=null,u.state=wo,u.Rt=s,u}return Mo(n,t),n.prototype.getImage=function(){return this.zt},n.prototype.Ft=function(){this.state=xo,this.Gt(),this.changed()},n.prototype.Dt=function(){void 0===this.resolution&&(this.resolution=Yn(this.extent)/this.zt.height),this.state=bo,this.Gt(),this.changed()},n.prototype.load=function(){this.state!=wo&&this.state!=xo||(this.state=go,this.changed(),this.Rt(this,this.Nt),this.Lt=So(this.zt,this.Dt.bind(this),this.Ft.bind(this)))},n.prototype.setImage=function(t){this.zt=t,this.resolution=Yn(this.extent)/this.zt.height},n.prototype.Gt=function(){this.Lt&&(this.Lt(),this.Lt=null)},n}(mo),jo=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Eo=function(t){function n(n,i,r,e,o){var s=this,u=void 0!==o?wo:bo;return(s=t.call(this,n,i,r,u)||this).q=void 0!==o?o:null,s.Ut=e,s.V=null,s}return jo(n,t),n.prototype.getError=function(){return this.V},n.prototype.qt=function(t){t?(this.V=t,this.state=xo):this.state=bo,this.changed()},n.prototype.load=function(){this.state==wo&&(this.state=go,this.changed(),this.q(this.qt.bind(this)))},n.prototype.getImage=function(){return this.Ut},n}(mo);function To(t,n,i,r){var e;return e=i&&i.length?i.shift():Yt?new OffscreenCanvas(t||300,n||300):document.createElement("canvas"),t&&(e.width=t),n&&(e.height=n),e.getContext("2d",r)}function Po(t){var n=t.canvas;n.width=1,n.height=1,t.clearRect(0,0,1,1)}function Ao(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function Co(t){var n=t.offsetHeight,i=getComputedStyle(t);return n+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function ko(t,n){var i=n.parentNode;i&&i.replaceChild(t,n)}function Io(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function No(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function zo(t,n){for(var i=t.childNodes,r=0;;++r){var e=i[r],o=n[r];if(!e&&!o)break;e!==o&&(e?o?t.insertBefore(o,e):(t.removeChild(e),--r):t.appendChild(o))}}var Lo=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();var Ro=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,s)||this;return u.Bt=e,u.Nt=r,u.key=r,u.zt=new Image,null!==e&&(u.zt.crossOrigin=e),u.Lt=null,u.Xt=o,u}return Lo(n,t),n.prototype.getImage=function(){return this.zt},n.prototype.setImage=function(t){this.zt=t,this.state=pt,this.Gt(),this.changed()},n.prototype.Ft=function(){var t;this.state=dt,this.Gt(),this.zt=((t=To(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},n.prototype.Dt=function(){var t=this.zt;t.naturalWidth&&t.naturalHeight?this.state=pt:this.state=yt,this.Gt(),this.changed()},n.prototype.load=function(){this.state==dt&&(this.state=lt,this.zt=new Image,null!==this.Bt&&(this.zt.crossOrigin=this.Bt)),this.state==lt&&(this.state=vt,this.changed(),this.Xt(this,this.Nt),this.Lt=So(this.zt,this.Dt.bind(this),this.Ft.bind(this)))},n.prototype.Gt=function(){this.Lt&&(this.Lt(),this.Lt=null)},n}(Mt),Fo=function(){function t(t,n,i){this.Yt=t,this.Zt=n,this.Vt=i,this.Wt=[],this.$t=0,this.Kt=0}return t.prototype.begin=function(){this.Wt.length=0,this.$t=0,this.Kt=0},t.prototype.update=function(t,n){this.Wt.push(t,n,Date.now())},t.prototype.end=function(){if(this.Wt.length<6)return!1;var t=Date.now()-this.Vt,n=this.Wt.length-3;if(this.Wt[n+2]<t)return!1;for(var i=n-3;i>0&&this.Wt[i+2]>t;)i-=3;var r=this.Wt[n+2]-this.Wt[i+2];if(r<1e3/60)return!1;var e=this.Wt[n]-this.Wt[i],o=this.Wt[n+1]-this.Wt[i+1];return this.$t=Math.atan2(o,e),this.Kt=Math.sqrt(e*e+o*o)/r,this.Kt>this.Zt},t.prototype.getDistance=function(){return(this.Zt-this.Kt)/this.Yt},t.prototype.getAngle=function(){return this.$t},t}(),Go=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Do=/^([a-z]*)$|^hsla?\(.*\)$/i;function Uo(t){return"string"==typeof t?t:Zo(t)}function qo(t){var n=document.createElement("div");if(n.style.color=t,""!==n.style.color){document.body.appendChild(n);var i=getComputedStyle(n).color;return document.body.removeChild(n),i}return""}var Bo=function(){var t={},n=0;return function(i){var r;if(t.hasOwnProperty(i))r=t[i];else{if(n>=1024){var e=0;for(var o in t)0==(3&e++)&&(delete t[o],--n)}r=function(t){var n,i,r,e,o;Do.exec(t)&&(t=qo(t));if(Go.exec(t)){var s=t.length-1,u=void 0;u=s<=4?1:2;var a=4===s||8===s;n=parseInt(t.substr(1+0*u,u),16),i=parseInt(t.substr(1+1*u,u),16),r=parseInt(t.substr(1+2*u,u),16),e=a?parseInt(t.substr(1+3*u,u),16):255,1==u&&(n=(n<<4)+n,i=(i<<4)+i,r=(r<<4)+r,a&&(e=(e<<4)+e)),o=[n,i,r,e/255]}else 0==t.indexOf("rgba(")?Yo(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Yo(o)):Et(!1,14);return o}(i),t[i]=r,++n}return r}}();function Xo(t){return Array.isArray(t)?t:Bo(t)}function Yo(t){return t[0]=oi(t[0]+.5|0,0,255),t[1]=oi(t[1]+.5|0,0,255),t[2]=oi(t[2]+.5|0,0,255),t[3]=oi(t[3],0,1),t}function Zo(t){var n=t[0];n!=(0|n)&&(n=n+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+n+","+i+","+r+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function Vo(t){return Do.test(t)&&(t=qo(t)),Go.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}var Wo=function(){function t(){this.Ht={},this.Jt=0,this.Qt=32}return t.prototype.clear=function(){this.Ht={},this.Jt=0},t.prototype.canExpireCache=function(){return this.Jt>this.Qt},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var n in this.Ht){var i=this.Ht[n];0!=(3&t++)||i.hasListener()||(delete this.Ht[n],--this.Jt)}}},t.prototype.get=function(t,n,i){var r=$o(t,n,i);return r in this.Ht?this.Ht[r]:null},t.prototype.set=function(t,n,i,r){var e=$o(t,n,i);this.Ht[e]=r,++this.Jt},t.prototype.setSize=function(t){this.Qt=t,this.expire()},t}();function $o(t,n,i){return n+":"+t+":"+(i?Uo(i):"null")}var Ko=Wo,Ho=new Wo,Jo="opacity",Qo="visible",ts="extent",ns="zIndex",is="maxResolution",rs="minResolution",es="maxZoom",os="minZoom",ss="source",us="map",as=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hs=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un,i.tn=n.background;var r=P({},n);return"object"==typeof n.properties&&(delete r.properties,P(r,n.properties)),r[Jo]=void 0!==n.opacity?n.opacity:1,Et("number"==typeof r[Jo],64),r[Qo]=void 0===n.visible||n.visible,r[ns]=n.zIndex,r[is]=void 0!==n.maxResolution?n.maxResolution:1/0,r[rs]=void 0!==n.minResolution?n.minResolution:0,r[os]=void 0!==n.minZoom?n.minZoom:-1/0,r[es]=void 0!==n.maxZoom?n.maxZoom:1/0,i.nn=void 0!==r.className?r.className:"ol-layer",delete r.className,i.setProperties(r),i.rn=null,i}return as(n,t),n.prototype.getBackground=function(){return this.tn},n.prototype.getClassName=function(){return this.nn},n.prototype.getLayerState=function(t){var n=this.rn||{layer:this,managed:void 0===t||t},i=this.getZIndex();return n.opacity=oi(Math.round(100*this.getOpacity())/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==i||n.managed?i:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.rn=n,n},n.prototype.getLayersArray=function(t){return r()},n.prototype.getLayerStatesArray=function(t){return r()},n.prototype.getExtent=function(){return this.get(ts)},n.prototype.getMaxResolution=function(){return this.get(is)},n.prototype.getMinResolution=function(){return this.get(rs)},n.prototype.getMinZoom=function(){return this.get(os)},n.prototype.getMaxZoom=function(){return this.get(es)},n.prototype.getOpacity=function(){return this.get(Jo)},n.prototype.getSourceState=function(){return r()},n.prototype.getVisible=function(){return this.get(Qo)},n.prototype.getZIndex=function(){return this.get(ns)},n.prototype.setBackground=function(t){this.tn=t,this.changed()},n.prototype.setExtent=function(t){this.set(ts,t)},n.prototype.setMaxResolution=function(t){this.set(is,t)},n.prototype.setMinResolution=function(t){this.set(rs,t)},n.prototype.setMaxZoom=function(t){this.set(es,t)},n.prototype.setMinZoom=function(t){this.set(os,t)},n.prototype.setOpacity=function(t){Et("number"==typeof t,64),this.set(Jo,t)},n.prototype.setVisible=function(t){this.set(Qo,t)},n.prototype.setZIndex=function(t){this.set(ns,t)},n.prototype.disposeInternal=function(){this.rn&&(this.rn.layer=null,this.rn=null),t.prototype.disposeInternal.call(this)},n}(et),fs="prerender",cs="postrender",ls="precompose",vs="postcompose",ps="rendercomplete",ds=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ys=function(t){function n(n){var i=this,r=P({},n);delete r.source,(i=t.call(this,r)||this).on,i.once,i.un,i.en=null,i.sn=null,i.an=null,i.hn=null,i.rendered=!1,n.render&&(i.render=n.render),n.map&&i.setMap(n.map),i.addChangeListener(ss,i.fn);var e=n.source?n.source:null;return i.setSource(e),i}return ds(n,t),n.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},n.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},n.prototype.getSource=function(){return this.get(ss)||null},n.prototype.getRenderSource=function(){return this.getSource()},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},n.prototype.cn=function(){this.changed()},n.prototype.fn=function(){this.an&&(H(this.an),this.an=null);var t=this.getSource();t&&(this.an=$(t,z,this.cn,this)),this.changed()},n.prototype.getFeatures=function(t){return this.hn?this.hn.getFeatures(t):new Promise((function(t){return t([])}))},n.prototype.getData=function(t){return this.hn&&this.rendered?this.hn.getData(t):null},n.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n)},n.prototype.unrender=function(){this.rendered=!1},n.prototype.setMapInternal=function(t){t||this.unrender(),this.set(us,t)},n.prototype.getMapInternal=function(){return this.get(us)},n.prototype.setMap=function(t){this.en&&(H(this.en),this.en=null),t||this.changed(),this.sn&&(H(this.sn),this.sn=null),t&&(this.en=$(t,ls,(function(t){var n=t.frameState.layerStatesArray,i=this.getLayerState(!1);Et(!n.some((function(t){return t.layer===i.layer})),67),n.push(i)}),this),this.sn=$(this,z,t.render,t),this.changed())},n.prototype.setSource=function(t){this.set(ss,t)},n.prototype.getRenderer=function(){return this.hn||(this.hn=this.createRenderer()),this.hn},n.prototype.hasRenderer=function(){return!!this.hn},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.hn&&(this.hn.dispose(),delete this.hn),this.setSource(null),t.prototype.disposeInternal.call(this)},n}(hs);function ms(t,n){if(!t.visible)return!1;var i=n.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;var r=n.zoom;return r>t.minZoom&&r<=t.maxZoom}var ws=ys,gs=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),bs=function(t){function n(n){var i=t.call(this)||this;return i.vn=n,i}return gs(n,t),n.prototype.dispatchRenderEvent=function(t,n){r()},n.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;sn(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),un(r,i)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o,s,u){var a,h=n.viewState;function f(t,n,i,r){return e.call(o,n,t?i:null,r)}var c=h.projection,l=rr(t.slice(),c),v=[[0,0]];if(c.canWrapX()&&r){var p=$n(c.getExtent());v.push([-p,0],[p,0])}for(var d=n.layerStatesArray,y=d.length,m=[],w=[],g=0;g<v.length;g++)for(var b=y-1;b>=0;--b){var x=d[b],_=x.layer;if(_.hasRenderer()&&ms(x,h)&&s.call(u,_)){var M=_.getRenderer(),S=_.getSource();if(M&&S){var O=S.getWrapX()?l:t,j=f.bind(null,x.managed);w[0]=O[0]+v[g][0],w[1]=O[1]+v[g][1],a=M.forEachFeatureAtCoordinate(w,n,i,j,m)}if(a)return a}}if(0!==m.length){var E=1/m.length;return m.forEach((function(t,n){return t.distanceSq+=n*E})),m.sort((function(t,n){return t.distanceSq-n.distanceSq})),m.some((function(t){return a=t.callback(t.feature,t.layer,t.geometry)})),a}},n.prototype.forEachLayerAtPixel=function(t,n,i,e,o){return r()},n.prototype.hasFeatureAtCoordinate=function(t,n,i,r,e,o){return void 0!==this.forEachFeatureAtCoordinate(t,n,i,r,S,this,e,o)},n.prototype.getMap=function(){return this.vn},n.prototype.renderFrame=function(t){r()},n.prototype.scheduleExpireIconCache=function(t){Ho.canExpireCache()&&t.postRenderFunctions.push(xs)},n}(v);function xs(t,n){Ho.expire()}var _s,Ms,Ss=bs,Os=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),js=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=e,o}return Os(n,t),n}(c),Es="ol-hidden",Ts="ol-selectable",Ps="ol-unselectable",As="ol-unsupported",Cs="ol-control",ks="ol-collapsed",Is=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ns=["style","variant","weight","size","lineHeight","family"],zs=function(t){var n=t.match(Is);if(!n)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,e=Ns.length;r<e;++r){var o=n[r+1];void 0!==o&&(i[Ns[r]]=o)}return i.families=i.family.split(/,\s?/),i},Ls="10px sans-serif",Rs="#000",Fs="round",Gs=[],Ds="round",Us=10,qs="#000",Bs="center",Xs="middle",Ys=[0,0,0,0],Zs=new et,Vs=null,Ws={},$s=function(){var t,n,i="32px ",r=["monospace","serif"],e=r.length,o="wmytzilWMYTZIL@#/&?$%10";function s(t,s,u){for(var a=!0,h=0;h<e;++h){var f=r[h];if(n=Js(t+" "+s+" "+i+f,o),u!=f){var c=Js(t+" "+s+" "+i+u+","+f,o);a=a&&c!=n}}return!!a}function u(){for(var n=!0,i=Zs.getKeys(),r=0,e=i.length;r<e;++r){var o=i[r];Zs.get(o)<100&&(s.apply(this,o.split("\n"))?(A(Ws),Vs=null,_s=void 0,Zs.set(o,100)):(Zs.set(o,Zs.get(o)+1,!0),n=!1))}n&&(clearInterval(t),t=void 0)}return function(n){var i=zs(n);if(i)for(var r=i.families,e=0,o=r.length;e<o;++e){var a=r[e],h=i.style+"\n"+i.weight+"\n"+a;void 0===Zs.get(h)&&(Zs.set(h,100,!0),s(i.style,i.weight,a)||(Zs.set(h,0,!0),void 0===t&&(t=setInterval(u,32))))}}}(),Ks=function(t){var n=Ws[t];if(null==n){if(Yt){var i=zs(t),r=Hs(t,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else Ms||((Ms=document.createElement("div")).innerHTML="M",Ms.style.minHeight="0",Ms.style.maxHeight="none",Ms.style.height="auto",Ms.style.padding="0",Ms.style.border="none",Ms.style.position="absolute",Ms.style.display="block",Ms.style.left="-99999px"),Ms.style.font=t,document.body.appendChild(Ms),n=Ms.offsetHeight,document.body.removeChild(Ms);Ws[t]=n}return n};function Hs(t,n){return Vs||(Vs=To(1,1)),t!=_s&&(Vs.font=t,_s=Vs.font),Vs.measureText(n)}function Js(t,n){return Hs(t,n).width}function Qs(t,n,i){if(n in i)return i[n];var r=n.split("\n").reduce((function(n,i){return Math.max(n,Js(t,i))}),0);return i[n]=r,r}function tu(t,n){for(var i=[],r=[],e=[],o=0,s=0,u=0,a=0,h=0,f=n.length;h<=f;h+=2){var c=n[h];if("\n"!==c&&h!==f){var l=n[h+1]||t.font,v=Js(l,c);i.push(v),s+=v;var p=Ks(l);r.push(p),a=Math.max(a,p)}else o=Math.max(o,s),e.push(s),s=0,u+=a}return{width:o,height:u,widths:i,heights:r,lineWidths:e}}function nu(t,n,i,r,e,o,s,u,a,h,f){t.save(),1!==i&&(t.globalAlpha*=i),n&&t.setTransform.apply(t,n),r.contextInstructions?(t.translate(a,h),t.scale(f[0],f[1]),function(t,n){for(var i=t.contextInstructions,r=0,e=i.length;r<e;r+=2)Array.isArray(i[r+1])?n[i[r]].apply(n,i[r+1]):n[i[r]]=i[r+1]}(r,t)):f[0]<0||f[1]<0?(t.translate(a,h),t.scale(f[0],f[1]),t.drawImage(r,e,o,s,u,0,0,s,u)):t.drawImage(r,e,o,s,u,a,h,s*f[0],u*f[1]),t.restore()}var iu=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ru=function(t){function n(n){var i=t.call(this,n)||this;i.pn=$(Zs,l,n.redrawText.bind(n)),i.dn=document.createElement("div");var r=i.dn.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.dn.className="ol-unselectable ol-layers";var e=n.getViewport();return e.insertBefore(i.dn,e.firstChild||null),i.yn=[],i.mn=!0,i}return iu(n,t),n.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var r=new js(t,void 0,n);i.dispatchEvent(r)}},n.prototype.disposeInternal=function(){H(this.pn),this.dn.parentNode.removeChild(this.dn),t.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(ls,t);var n=t.layerStatesArray.sort((function(t,n){return t.zIndex-n.zIndex})),i=t.viewState;this.yn.length=0;for(var r=[],e=null,o=0,s=n.length;o<s;++o){var u=n[o];t.layerIndex=o;var a=u.layer,h=a.getSourceState();if(!ms(u,i)||"ready"!=h&&"undefined"!=h)a.unrender();else{var f=a.render(t,e);f&&(f!==e&&(this.yn.push(f),e=f),"getDeclutter"in a&&r.push(a))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);zo(this.dn,this.yn),this.dispatchRenderEvent(vs,t),this.mn||(this.dn.style.display="",this.mn=!0),this.scheduleExpireIconCache(t)}else this.mn&&(this.dn.style.display="none",this.mn=!1)},n.prototype.forEachLayerAtPixel=function(t,n,i,r,e){for(var o=n.viewState,s=n.layerStatesArray,u=s.length-1;u>=0;--u){var a=s[u],h=a.layer;if(h.hasRenderer()&&ms(a,o)&&e(h)){var f=h.getRenderer().getDataAtPixel(t,n,i);if(f){var c=r(h,f);if(c)return c}}}},n}(Ss),eu=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ou=function(t){function n(n,i){var r=t.call(this,n)||this;return r.layer=i,r}return eu(n,t),n}(c),su="layers",uu=function(t){function n(n){var i=this,r=n||{},e=P({},r);delete e.layers;var o=r.layers;return(i=t.call(this,e)||this).on,i.once,i.un,i.wn=[],i.gn={},i.addChangeListener(su,i.bn),o?Array.isArray(o)?o=new ct(o.slice(),{unique:!0}):Et("function"==typeof o.getArray,43):o=new ct(void 0,{unique:!0}),i.setLayers(o),i}return eu(n,t),n.prototype.xn=function(){this.changed()},n.prototype.bn=function(){this.wn.forEach(H),this.wn.length=0;var t=this.getLayers();for(var n in this.wn.push($(t,ot,this._n,this),$(t,st,this.Mn,this)),this.gn)this.gn[n].forEach(H);A(this.gn);for(var i=t.getArray(),r=0,e=i.length;r<e;r++){var o=i[r];this.Sn(o),this.dispatchEvent(new ou("addlayer",o))}this.changed()},n.prototype.Sn=function(t){var i=[$(t,l,this.xn,this),$(t,z,this.xn,this)];t instanceof n&&i.push($(t,"addlayer",this.On,this),$(t,"removelayer",this.jn,this)),this.gn[o(t)]=i},n.prototype.On=function(t){this.dispatchEvent(new ou("addlayer",t.layer))},n.prototype.jn=function(t){this.dispatchEvent(new ou("removelayer",t.layer))},n.prototype._n=function(t){var n=t.element;this.Sn(n),this.dispatchEvent(new ou("addlayer",n)),this.changed()},n.prototype.Mn=function(t){var n=t.element,i=o(n);this.gn[i].forEach(H),delete this.gn[i],this.dispatchEvent(new ou("removelayer",n)),this.changed()},n.prototype.getLayers=function(){return this.get(su)},n.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),r=0,e=i.length;r<e;++r)this.dispatchEvent(new ou("removelayer",i[r]));this.set(su,t)},n.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(n)})),n},n.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],i=n.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(n)}));var r=this.getLayerState(),e=r.zIndex;t||void 0!==r.zIndex||(e=0);for(var o=i,s=n.length;o<s;o++){var u=n[o];u.opacity*=r.opacity,u.visible=u.visible&&r.visible,u.maxResolution=Math.min(u.maxResolution,r.maxResolution),u.minResolution=Math.max(u.minResolution,r.minResolution),u.minZoom=Math.max(u.minZoom,r.minZoom),u.maxZoom=Math.min(u.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==u.extent?u.extent=Zn(u.extent,r.extent):u.extent=r.extent),void 0===u.zIndex&&(u.zIndex=e)}return n},n.prototype.getSourceState=function(){return"ready"},n}(hs),au=uu,hu=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fu=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.map=i,e.frameState=void 0!==r?r:null,e}return hu(n,t),n}(c),cu=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lu=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,o)||this;return u.originalEvent=r,u.En=null,u.Tn=null,u.dragging=void 0!==e&&e,u.activePointers=s,u}return cu(n,t),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.En||(this.En=this.map.getEventPixel(this.originalEvent)),this.En},set:function(t){this.En=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.Tn||(this.Tn=this.map.getCoordinateFromPixel(this.pixel)),this.Tn},set:function(t){this.Tn=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(fu),vu={SINGLECLICK:"singleclick",CLICK:F,DBLCLICK:G,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},pu="pointermove",du="pointerdown",yu="pointerup",mu="pointerout",wu=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gu=function(t){function n(n,i){var r=t.call(this,n)||this;r.vn=n,r.Pn,r.An=!1,r.Cn=!1,r.kn=[],r.In=void 0===i?1:i,r.Nn=null;var e=r.vn.getViewport();return r.zn=[],r.Ln={},r.dn=e,r.Rn=$(e,du,r.Fn,r),r.Gn,r.Dn=$(e,pu,r.Un,r),r.qn=r.Bn.bind(r),r.dn.addEventListener(V,r.qn,!!Vt&&{passive:!1}),r}return wu(n,t),n.prototype.Xn=function(t){var n=new lu(vu.CLICK,this.vn,t);this.dispatchEvent(n),void 0!==this.Pn?(clearTimeout(this.Pn),this.Pn=void 0,n=new lu(vu.DBLCLICK,this.vn,t),this.dispatchEvent(n)):this.Pn=setTimeout(function(){this.Pn=void 0;var n=new lu(vu.SINGLECLICK,this.vn,t);this.dispatchEvent(n)}.bind(this),250)},n.prototype.Yn=function(t){var n=t,i=n.pointerId;if(n.type==vu.POINTERUP||n.type==vu.POINTERCANCEL){for(var r in delete this.Ln[i],this.Ln)if(this.Ln[r].target!==n.target){delete this.Ln[r];break}}else n.type!=vu.POINTERDOWN&&n.type!=vu.POINTERMOVE||(this.Ln[i]=n);this.zn=C(this.Ln)},n.prototype.Zn=function(t){this.Yn(t);var n=new lu(vu.POINTERUP,this.vn,t,void 0,void 0,this.zn);this.dispatchEvent(n),this.An&&!n.defaultPrevented&&!this.Cn&&this.Vn(t)&&this.Xn(this.Nn),0===this.zn.length&&(this.kn.forEach(H),this.kn.length=0,this.Cn=!1,this.Nn=null)},n.prototype.Vn=function(t){return 0===t.button},n.prototype.Fn=function(t){this.An=0===this.zn.length,this.Yn(t);var n=new lu(vu.POINTERDOWN,this.vn,t,void 0,void 0,this.zn);for(var i in this.dispatchEvent(n),this.Nn={},t){var r=t[i];this.Nn[i]="function"==typeof r?j:r}if(0===this.kn.length){var e=this.vn.getOwnerDocument();this.kn.push($(e,vu.POINTERMOVE,this.Wn,this),$(e,vu.POINTERUP,this.Zn,this),$(this.dn,vu.POINTERCANCEL,this.Zn,this)),this.dn.getRootNode&&this.dn.getRootNode()!==e&&this.kn.push($(this.dn.getRootNode(),vu.POINTERUP,this.Zn,this))}},n.prototype.Wn=function(t){if(this.$n(t)){this.Yn(t),this.Cn=!0;var n=new lu(vu.POINTERDRAG,this.vn,t,this.Cn,void 0,this.zn);this.dispatchEvent(n)}},n.prototype.Un=function(t){this.Gn=t;var n=!(!this.Nn||!this.$n(t));this.dispatchEvent(new lu(vu.POINTERMOVE,this.vn,t,n))},n.prototype.Bn=function(t){var n=this.Gn;n&&!n.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},n.prototype.$n=function(t){return this.Cn||Math.abs(t.clientX-this.Nn.clientX)>this.In||Math.abs(t.clientY-this.Nn.clientY)>this.In},n.prototype.disposeInternal=function(){this.Dn&&(H(this.Dn),this.Dn=null),this.dn.removeEventListener(V,this.qn),this.Rn&&(H(this.Rn),this.Rn=null),this.kn.forEach(H),this.kn.length=0,this.dn=null,t.prototype.disposeInternal.call(this)},n}(N),bu="postrender",xu="movestart",_u="moveend",Mu="loadstart",Su="loadend",Ou="layergroup",ju="size",Eu="target",Tu="view",Pu=1/0,Au=function(){function t(t,n){this.Kn=t,this.Hn=n,this.Jn=[],this.Qn=[],this.ti={}}return t.prototype.clear=function(){this.Jn.length=0,this.Qn.length=0,A(this.ti)},t.prototype.dequeue=function(){var t=this.Jn,n=this.Qn,i=t[0];1==t.length?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.ni(0));var r=this.Hn(i);return delete this.ti[r],i},t.prototype.enqueue=function(t){Et(!(this.Hn(t)in this.ti),31);var n=this.Kn(t);return n!=Pu&&(this.Jn.push(t),this.Qn.push(n),this.ti[this.Hn(t)]=!0,this.ii(0,this.Jn.length-1),!0)},t.prototype.getCount=function(){return this.Jn.length},t.prototype.ri=function(t){return 2*t+1},t.prototype.ei=function(t){return 2*t+2},t.prototype.oi=function(t){return t-1>>1},t.prototype.si=function(){var t;for(t=(this.Jn.length>>1)-1;t>=0;t--)this.ni(t)},t.prototype.isEmpty=function(){return 0===this.Jn.length},t.prototype.isKeyQueued=function(t){return t in this.ti},t.prototype.isQueued=function(t){return this.isKeyQueued(this.Hn(t))},t.prototype.ni=function(t){for(var n=this.Jn,i=this.Qn,r=n.length,e=n[t],o=i[t],s=t;t<r>>1;){var u=this.ri(t),a=this.ei(t),h=a<r&&i[a]<i[u]?a:u;n[t]=n[h],i[t]=i[h],t=h}n[t]=e,i[t]=o,this.ii(s,t)},t.prototype.ii=function(t,n){for(var i=this.Jn,r=this.Qn,e=i[n],o=r[n];n>t;){var s=this.oi(n);if(!(r[s]>o))break;i[n]=i[s],r[n]=r[s],n=s}i[n]=e,r[n]=o},t.prototype.reprioritize=function(){var t,n,i,r=this.Kn,e=this.Jn,o=this.Qn,s=0,u=e.length;for(n=0;n<u;++n)(i=r(t=e[n]))==Pu?delete this.ti[this.Hn(t)]:(o[s]=i,e[s++]=t);e.length=s,o.length=s,this.si()},t}(),Cu=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ku=function(t){function n(n,i){var r=t.call(this,(function(t){return n.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.ui=r.handleTileChange.bind(r),r.ai=i,r.hi=0,r.fi={},r}return Cu(n,t),n.prototype.enqueue=function(n){var i=t.prototype.enqueue.call(this,n);i&&n[0].addEventListener(z,this.ui);return i},n.prototype.getTilesLoading=function(){return this.hi},n.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===pt||i===dt||i===yt){i!==dt&&n.removeEventListener(z,this.ui);var r=n.getKey();r in this.fi&&(delete this.fi[r],--this.hi),this.ai()}},n.prototype.loadMoreTiles=function(t,n){for(var i,r,e=0;this.hi<t&&e<n&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==lt||r in this.fi||(this.fi[r]=!0,++this.hi,++e,i.load())},n}(Au),Iu=ku;function Nu(t,n,i,r,e){if(!t||!(i in t.wantedTiles))return Pu;if(!t.wantedTiles[i][n.getKey()])return Pu;var o=t.viewState.center,s=r[0]-o[0],u=r[1]-o[1];return 65536*Math.log(e)+Math.sqrt(s*s+u*u)/e}var zu=0,Lu=1,Ru={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Fu=256;function Gu(t,n,i){return function(r,e,o,s,u){if(r){if(!e&&!n)return r;var a=n?0:o[0]*e,h=n?0:o[1]*e,f=u?u[0]:0,c=u?u[1]:0,l=t[0]+a/2+f,v=t[2]-a/2+f,p=t[1]+h/2+c,d=t[3]-h/2+c;l>v&&(v=l=(v+l)/2),p>d&&(d=p=(d+p)/2);var y=oi(r[0],l,v),m=oi(r[1],p,d);if(s&&i&&e){var w=30*e;y+=-w*Math.log(1+Math.max(0,l-r[0])/w)+w*Math.log(1+Math.max(0,r[0]-v)/w),m+=-w*Math.log(1+Math.max(0,p-r[1])/w)+w*Math.log(1+Math.max(0,r[1]-d)/w)}return[y,m]}}}function Du(t){return t}function Uu(t,n,i,r){var e=$n(n)/i[0],o=Yn(n)/i[1];return r?Math.min(t,Math.max(e,o)):Math.min(t,Math.min(e,o))}function qu(t,n,i){var r=Math.min(t,n);return r*=Math.log(1+50*Math.max(0,t/n-1))/50+1,i&&(r=Math.max(r,i),r/=Math.log(1+50*Math.max(0,i/t-1))/50+1),oi(r,i/2,2*n)}function Bu(t,n,i,r){return function(e,o,s,u){if(void 0!==e){var a=t[0],h=t[t.length-1],f=i?Uu(a,i,s,r):a;if(u)return void 0===n||n?qu(e,f,h):oi(e,h,f);var c=Math.min(f,e),l=Math.floor(m(t,c,o));return t[l]>f&&l<t.length-1?t[l+1]:t[l]}}}function Xu(t,n,i,r,e,o){return function(s,u,a,h){if(void 0!==s){var f=e?Uu(n,e,a,o):n,c=void 0!==i?i:0;if(h)return void 0===r||r?qu(s,f,c):oi(s,c,f);var l=Math.ceil(Math.log(n/f)/Math.log(t)-1e-9),v=-u*(.5-1e-9)+.5,p=Math.min(f,s),d=Math.floor(Math.log(n/p)/Math.log(t)+v),y=Math.max(l,d);return oi(n/Math.pow(t,y),c,f)}}}function Yu(t,n,i,r,e){return function(o,s,u,a){if(void 0!==o){var h=r?Uu(t,r,u,e):t;return(void 0===i||i)&&a?qu(o,h,n):oi(o,n,h)}}}function Zu(t){return void 0!==t?0:void 0}function Vu(t){return void 0!==t?t:void 0}function Wu(t){var n=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}function $u(t){var n=t||li(5);return function(t,i){return i?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}var Ku=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hu=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=P({},n);return i.ci=[0,0],i.li=[],i.vi,i.di=br(r.projection,"EPSG:3857"),i.yi=[100,100],i.mi=null,i.wi,i.gi,i.bi=null,i.xi,i._i,i.Mi=void 0,r.projection&&cr(),r.center&&(r.center=Ir(r.center,i.di)),r.extent&&(r.extent=zr(r.extent,i.di)),i.Si(r),i}return Ku(n,t),n.prototype.Si=function(t){var n=P({},t);for(var i in Ru)delete n[i];this.setProperties(n,!0);var r=ta(t);this.Oi=r.maxResolution,this.ji=r.minResolution,this.Ei=r.zoomFactor,this.Ti=t.resolutions,this.Pi=t.padding,this.Ai=r.minZoom;var e=Qu(t),o=r.constraint,s=na(t);this.Ci={center:e,resolution:o,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(n.prototype,"padding",{get:function(){return this.Pi},set:function(t){var n=this.Pi;this.Pi=t;var i=this.getCenter();if(i){var r=t||[0,0,0,0];n=n||[0,0,0,0];var e=this.getResolution(),o=e/2*(r[3]-n[3]+n[1]-r[1]),s=e/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-s])}},enumerable:!1,configurable:!0}),n.prototype.ki=function(t){var n=this.getProperties();return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),P({},n,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var r=arguments[i];r.center&&((r=P({},r)).center=Ir(r.center,this.getProjection())),r.anchor&&((r=P({},r)).anchor=Ir(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)},n.prototype.animateInternal=function(t){var n,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(n=arguments[i-1],--i);for(var r=0;r<i&&!this.isDef();++r){var e=arguments[r];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation)}if(r!==i){for(var o=Date.now(),s=this.mi.slice(),u=this.wi,a=this.gi,h=[];r<i;++r){var f=arguments[r],c={start:o,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||gt,callback:n};if(f.center&&(c.sourceCenter=s,c.targetCenter=f.center.slice(),s=c.targetCenter),void 0!==f.zoom?(c.sourceResolution=u,c.targetResolution=this.getResolutionForZoom(f.zoom),u=c.targetResolution):f.resolution&&(c.sourceResolution=u,c.targetResolution=f.resolution,u=c.targetResolution),void 0!==f.rotation){c.sourceRotation=a;var l=vi(f.rotation-a+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=a+l,a=c.targetRotation}ia(c)?c.complete=!0:o+=c.duration,h.push(c)}this.li.push(h),this.setHint(zu,1),this.Ii()}else n&&Ju(n,!0)},n.prototype.getAnimating=function(){return this.ci[zu]>0},n.prototype.getInteracting=function(){return this.ci[Lu]>0},n.prototype.cancelAnimations=function(){var t;this.setHint(zu,-this.ci[zu]);for(var n=0,i=this.li.length;n<i;++n){var r=this.li[n];if(r[0].callback&&Ju(r[0].callback,!1),!t)for(var e=0,o=r.length;e<o;++e){var s=r[e];if(!s.complete){t=s.anchor;break}}}this.li.length=0,this.Mi=t,this.bi=null,this.xi=NaN,this._i=NaN},n.prototype.Ii=function(){if(void 0!==this.vi&&(cancelAnimationFrame(this.vi),this.vi=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,i=this.li.length-1;i>=0;--i){for(var r=this.li[i],e=!0,o=0,s=r.length;o<s;++o){var u=r[o];if(!u.complete){var a=t-u.start,h=u.duration>0?a/u.duration:1;h>=1?(u.complete=!0,h=1):e=!1;var f=u.easing(h);if(u.sourceCenter){var c=u.sourceCenter[0],l=u.sourceCenter[1],v=u.targetCenter[0],p=u.targetCenter[1];this.bi=u.targetCenter;var d=c+f*(v-c),y=l+f*(p-l);this.mi=[d,y]}if(u.sourceResolution&&u.targetResolution){var m=1===f?u.targetResolution:u.sourceResolution+f*(u.targetResolution-u.sourceResolution);if(u.anchor){var w=this.Ni(this.getRotation()),g=this.Ci.resolution(m,0,w,!0);this.mi=this.calculateCenterZoom(g,u.anchor)}this.xi=u.targetResolution,this.wi=m,this.zi(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var b=1===f?vi(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+f*(u.targetRotation-u.sourceRotation);if(u.anchor){var x=this.Ci.rotation(b,!0);this.mi=this.calculateCenterRotate(x,u.anchor)}this._i=u.targetRotation,this.gi=b}if(this.zi(!0),n=!0,!u.complete)break}}if(e){this.li[i]=null,this.setHint(zu,-1),this.bi=null,this.xi=NaN,this._i=NaN;var _=r[0].callback;_&&Ju(_,!0)}}this.li=this.li.filter(Boolean),n&&void 0===this.vi&&(this.vi=requestAnimationFrame(this.Ii.bind(this)))}},n.prototype.calculateCenterRotate=function(t,n){var i,r=this.getCenterInternal();return void 0!==r&&(Hi(i=[r[0]-n[0],r[1]-n[1]],t-this.getRotation()),Yi(i,n)),i},n.prototype.calculateCenterZoom=function(t,n){var i,r=this.getCenterInternal(),e=this.getResolution();void 0!==r&&void 0!==e&&(i=[n[0]-t*(n[0]-r[0])/e,n[1]-t*(n[1]-r[1])/e]);return i},n.prototype.Ni=function(t){var n=this.yi;if(t){var i=n[0],r=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return n},n.prototype.setViewportSize=function(t){this.yi=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t?kr(t,this.getProjection()):t},n.prototype.getCenterInternal=function(){return this.get(Ru.CENTER)},n.prototype.getConstraints=function(){return this.Ci},n.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.ci[0],t[1]=this.ci[1],t):this.ci.slice()},n.prototype.calculateExtent=function(t){return Nr(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var n=t||this.Li(),i=this.getCenterInternal();Et(i,1);var r=this.getResolution();Et(void 0!==r,2);var e=this.getRotation();return Et(void 0!==e,3),Bn(i,r,e,n)},n.prototype.getMaxResolution=function(){return this.Oi},n.prototype.getMinResolution=function(){return this.ji},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.ji)},n.prototype.setMaxZoom=function(t){this.Si(this.ki({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.Oi)},n.prototype.setMinZoom=function(t){this.Si(this.ki({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.Si(this.ki({constrainResolution:t}))},n.prototype.getProjection=function(){return this.di},n.prototype.getResolution=function(){return this.get(Ru.RESOLUTION)},n.prototype.getResolutions=function(){return this.Ti},n.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(zr(t,this.getProjection()),n)},n.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.Li(),r=$n(t)/i[0],e=Yn(t)/i[1];return Math.max(r,e)},n.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.Oi),r=this.ji,e=Math.log(i/r)/Math.log(n);return function(t){return i/Math.pow(n,t*e)}},n.prototype.getRotation=function(){return this.get(Ru.ROTATION)},n.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.Oi),r=this.ji,e=Math.log(i/r)/n;return function(t){return Math.log(i/t)/n/e}},n.prototype.Li=function(t){var n=this.Ni(t),i=this.Pi;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},n.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),e=this.Pi;if(e){var o=this.Li();r=ra(r,this.Ni(),[o[0]/2+e[3],o[1]/2+e[0]],n,i)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.bi,nextResolution:this.xi,nextRotation:this._i,rotation:i,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},n.prototype.getZoomForResolution=function(t){var n,i,r=this.Ai||0;if(this.Ti){var e=m(this.Ti,t,1);r=e,n=this.Ti[e],i=e==this.Ti.length-1?2:n/this.Ti[e+1]}else n=this.Oi,i=this.Ei;return r+Math.log(n/t)/Math.log(i)},n.prototype.getResolutionForZoom=function(t){if(this.Ti){if(this.Ti.length<=1)return 0;var n=oi(Math.floor(t),0,this.Ti.length-2),i=this.Ti[n]/this.Ti[n+1];return this.Ti[n]/Math.pow(i,oi(t-n,0,1))}return this.Oi/Math.pow(this.Ei,t-this.Ai)},n.prototype.fit=function(t,n){var i;if(Et(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Et(!Hn(t),25),i=Je(r=zr(t,this.getProjection()));else if("Circle"===t.getType()){var r;(i=Je(r=zr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Un(r))}else{var e=Cr();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,n)},n.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),e=t.getFlatCoordinates(),o=t.getStride(),s=1/0,u=1/0,a=-1/0,h=-1/0,f=0,c=e.length;f<c;f+=o){var l=e[f]*i-e[f+1]*r,v=e[f]*r+e[f+1]*i;s=Math.min(s,l),u=Math.min(u,v),a=Math.max(a,l),h=Math.max(h,v)}return[s,u,a,h]},n.prototype.fitInternal=function(t,n){var i=n||{},r=i.size;r||(r=this.Li());var e,o=void 0!==i.padding?i.padding:[0,0,0,0],s=void 0!==i.nearest&&i.nearest;e=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var u=this.rotatedExtentForGeometry(t),a=this.getResolutionForExtentInternal(u,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);a=isNaN(a)?e:Math.max(a,e),a=this.getConstrainedResolution(a,s?0:1);var h=this.getRotation(),f=Math.sin(h),c=Math.cos(h),l=Un(u);l[0]+=(o[1]-o[3])/2*a,l[1]+=(o[0]-o[2])/2*a;var v=l[0]*c-l[1]*f,p=l[1]*c+l[0]*f,d=this.getConstrainedCenter([v,p],a),y=i.callback?i.callback:j;void 0!==i.duration?this.animateInternal({resolution:a,center:d,duration:i.duration,easing:i.easing},y):(this.wi=a,this.mi=d,this.zi(!1,!0),Ju(y,!0))},n.prototype.centerOn=function(t,n,i){this.centerOnInternal(Ir(t,this.getProjection()),n,i)},n.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(ra(t,n,i,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,n,i,r){var e,o=this.Pi;if(o&&t){var s=this.Li(-i),u=ra(t,r,[s[0]/2+o[3],s[1]/2+o[0]],n,i);e=[t[0]-u[0],t[1]-u[1]]}return e},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var n=kr(this.mi,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var n=this.mi;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},n.prototype.adjustResolution=function(t,n){var i=n&&Ir(n,this.getProjection());this.adjustResolutionInternal(t,i)},n.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.Ni(this.getRotation()),e=this.Ci.resolution(this.wi*t,0,r,i);n&&(this.mi=this.calculateCenterZoom(e,n)),this.wi*=t,this.zi()},n.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.Ei,-t),n)},n.prototype.adjustRotation=function(t,n){n&&(n=Ir(n,this.getProjection())),this.adjustRotationInternal(t,n)},n.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),r=this.Ci.rotation(this.gi+t,i);n&&(this.mi=this.calculateCenterRotate(r,n)),this.gi+=t,this.zi()},n.prototype.setCenter=function(t){this.setCenterInternal(t?Ir(t,this.getProjection()):t)},n.prototype.setCenterInternal=function(t){this.mi=t,this.zi()},n.prototype.setHint=function(t,n){return this.ci[t]+=n,this.changed(),this.ci[t]},n.prototype.setResolution=function(t){this.wi=t,this.zi()},n.prototype.setRotation=function(t){this.gi=t,this.zi()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.zi=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,r=this.Ci.rotation(this.gi,i),e=this.Ni(r),o=this.Ci.resolution(this.wi,0,e,i),s=this.Ci.center(this.mi,o,e,i,this.calculateCenterShift(this.mi,o,r,e));this.get(Ru.ROTATION)!==r&&this.set(Ru.ROTATION,r),this.get(Ru.RESOLUTION)!==o&&(this.set(Ru.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),s&&this.get(Ru.CENTER)&&Ki(this.get(Ru.CENTER),s)||this.set(Ru.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.Mi=void 0},n.prototype.resolveConstraints=function(t,n,i){var r=void 0!==t?t:200,e=n||0,o=this.Ci.rotation(this.gi),s=this.Ni(o),u=this.Ci.resolution(this.wi,e,s),a=this.Ci.center(this.mi,u,s,!1,this.calculateCenterShift(this.mi,u,o,s));if(0===r&&!this.Mi)return this.wi=u,this.gi=o,this.mi=a,void this.zi();var h=i||(0===r?this.Mi:void 0);this.Mi=void 0,this.getResolution()===u&&this.getRotation()===o&&this.getCenterInternal()&&Ki(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:a,resolution:u,duration:r,easing:wt,anchor:h}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Lu,1)},n.prototype.endInteraction=function(t,n,i){var r=i&&Ir(i,this.getProjection());this.endInteractionInternal(t,n,r)},n.prototype.endInteractionInternal=function(t,n,i){this.setHint(Lu,-1),this.resolveConstraints(t,n,i)},n.prototype.getConstrainedCenter=function(t,n){var i=this.Ni(this.getRotation());return this.Ci.center(t,n||this.getResolution(),i)},n.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},n.prototype.getConstrainedResolution=function(t,n){var i=n||0,r=this.Ni(this.getRotation());return this.Ci.resolution(t,i,r)},n}(et);function Ju(t,n){setTimeout((function(){t(n)}),0)}function Qu(t){if(void 0!==t.extent){var n=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Gu(t.extent,t.constrainOnlyCenter,n)}var i=br(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){var r=i.getExtent().slice();return r[0]=-1/0,r[2]=1/0,Gu(r,!1,!1)}return Du}function ta(t){var n,i,r,e=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,a=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,f=br(t.projection,"EPSG:3857"),c=f.getExtent(),l=t.constrainOnlyCenter,v=t.extent;if(u||v||!f.isGlobal()||(l=!1,v=c),void 0!==t.resolutions){var p=t.resolutions;i=p[e],r=void 0!==p[o]?p[o]:p[p.length-1],n=t.constrainResolution?Bu(p,a,!l&&v,h):Yu(i,r,a,!l&&v,h)}else{var d=(c?Math.max($n(c),Yn(c)):360*zt[Rt.DEGREES]/f.getMetersPerUnit())/Fu/Math.pow(2,0),y=d/Math.pow(2,28);void 0!==(i=t.maxResolution)?e=0:i=d/Math.pow(s,e),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,o):d/Math.pow(s,o):y),o=e+Math.floor(Math.log(i/r)/Math.log(s)),r=i/Math.pow(s,o-e),n=t.constrainResolution?Xu(s,i,r,a,!l&&v,h):Yu(i,r,a,!l&&v,h)}return{constraint:n,maxResolution:i,minResolution:r,minZoom:e,zoomFactor:s}}function na(t){if(void 0===t.enableRotation||t.enableRotation){var n=t.constrainRotation;return void 0===n||!0===n?$u():!1===n?Vu:"number"==typeof n?Wu(n):Vu}return Zu}function ia(t){return!(t.sourceCenter&&t.targetCenter&&!Ki(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function ra(t,n,i,r,e){var o=Math.cos(-e),s=Math.sin(-e),u=t[0]*o-t[1]*s,a=t[1]*o+t[0]*s;return[(u+=(n[0]/2-i[0])*r)*o-(a+=(i[1]-n[1]/2)*r)*(s=-s),a*o+u*s]}var ea=Hu;function oa(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*n,i[1]=t[1]+2*n,i}function sa(t){return t[0]>0&&t[1]>0}function ua(t,n,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*n+.5|0,i[1]=t[1]*n+.5|0,i}function aa(t,n){return Array.isArray(t)?t:(void 0===n?n=[t,t]:(n[0]=t,n[1]=t),n)}var ha=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function fa(t){t instanceof ws?t.setMapInternal(null):t instanceof au&&t.getLayers().forEach(fa)}function ca(t,n){if(t instanceof ws)t.setMapInternal(n);else if(t instanceof au)for(var i=t.getLayers().getArray(),r=0,e=i.length;r<e;++r)ca(i[r],n)}var la=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=function(t){var n=null;void 0!==t.keyboardEventTarget&&(n="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,e,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new au({layers:t.layers});o[Ou]=s,o[Eu]=t.target,o[Tu]=t.view instanceof ea?t.view:new ea,void 0!==t.controls&&(Array.isArray(t.controls)?i=new ct(t.controls.slice()):(Et("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new ct(t.interactions.slice()):(Et("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?e=new ct(t.overlays.slice()):(Et("function"==typeof t.overlays.getArray,49),e=t.overlays):e=new ct;return{controls:i,interactions:r,keyboardEventTarget:n,overlays:e,values:o}}(n);i.Ri,i.Fi=!0,i.Gi=i.handleBrowserEvent.bind(i),i.Di=void 0!==n.maxTilesLoading?n.maxTilesLoading:16,i.kt=void 0!==n.pixelRatio?n.pixelRatio:Xt,i.Ui,i.qi,i.Bi=function(){this.qi=void 0,this.Xi(Date.now())}.bind(i),i.Yi=[1,0,0,1,0,0],i.Zi=[1,0,0,1,0,0],i.Vi=0,i.Wi=null,i.$i=null,i.Ki=null,i.Hi=null,i.Ji=null,i.Qi=document.createElement("div"),i.Qi.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.Qi.style.position="relative",i.Qi.style.overflow="hidden",i.Qi.style.width="100%",i.Qi.style.height="100%",i.tr=document.createElement("div"),i.tr.style.position="absolute",i.tr.style.zIndex="0",i.tr.style.width="100%",i.tr.style.height="100%",i.tr.style.pointerEvents="none",i.tr.className="ol-overlaycontainer",i.Qi.appendChild(i.tr),i.nr=document.createElement("div"),i.nr.style.position="absolute",i.nr.style.zIndex="0",i.nr.style.width="100%",i.nr.style.height="100%",i.nr.style.pointerEvents="none",i.nr.className="ol-overlaycontainer-stopevent",i.Qi.appendChild(i.nr),i.ir=null,i.In=n.moveTolerance,i.rr=r.keyboardEventTarget,i.er=null,i.controls=r.controls||new ct,i.interactions=r.interactions||new ct,i.sr=r.overlays,i.ur={},i.hn=null,i.ar=[],i.hr=new Iu(i.getTilePriority.bind(i),i.cr.bind(i)),i.addChangeListener(Ou,i.lr),i.addChangeListener(Tu,i.vr),i.addChangeListener(ju,i.pr),i.addChangeListener(Eu,i.dr),i.setProperties(r.values);var e=i;return!n.view||n.view instanceof ea||n.view.then((function(t){e.setView(new ea(t))})),i.controls.addEventListener(ot,function(t){t.element.setMap(this)}.bind(i)),i.controls.addEventListener(st,function(t){t.element.setMap(null)}.bind(i)),i.interactions.addEventListener(ot,function(t){t.element.setMap(this)}.bind(i)),i.interactions.addEventListener(st,function(t){t.element.setMap(null)}.bind(i)),i.sr.addEventListener(ot,function(t){this.yr(t.element)}.bind(i)),i.sr.addEventListener(st,function(t){var n=t.element.getId();void 0!==n&&delete this.ur[n.toString()],t.element.setMap(null)}.bind(i)),i.controls.forEach(function(t){t.setMap(this)}.bind(i)),i.interactions.forEach(function(t){t.setMap(this)}.bind(i)),i.sr.forEach(i.yr.bind(i)),i}return ha(n,t),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.mr=function(t){ca(t.layer,this)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.yr=function(t){var n=t.getId();void 0!==n&&(this.ur[n.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.sr.clear(),this.setTarget(null),t.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,n,i){if(this.Wi&&this.hn){var r=this.getCoordinateFromPixelInternal(t),e=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:S,s=!1!==i.checkWrapped;return this.hn.forEachFeatureAtCoordinate(r,this.Wi,e,s,n,null,o,null)}},n.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),n),i},n.prototype.getAllLayers=function(){var t=[];return function n(i){i.forEach((function(i){i instanceof au?n(i.getLayers()):t.push(i)}))}(this.getLayers()),t},n.prototype.forEachLayerAtPixel=function(t,n,i){if(this.Wi&&this.hn){var r=i||{},e=void 0!==r.hitTolerance?r.hitTolerance:0,o=r.layerFilter||S;return this.hn.forEachLayerAtPixel(t,this.Wi,e,n,o)}},n.prototype.hasFeatureAtPixel=function(t,n){if(!this.Wi||!this.hn)return!1;var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).layerFilter?n.layerFilter:S,e=void 0!==n.hitTolerance?n.hitTolerance:0,o=!1!==n.checkWrapped;return this.hn.hasFeatureAtCoordinate(i,this.Wi,e,o,r,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var n=this.Qi.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},n.prototype.getTarget=function(){return this.get(Eu)},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return kr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var n=this.Wi;return n?tn(n.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.sr},n.prototype.getOverlayById=function(t){var n=this.ur[t.toString()];return void 0!==n?n:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get(Ou)},n.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof ct)n.setLayers(t);else{var i=n.getLayers();i.clear(),i.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n];if(r.visible){var e=r.layer.getRenderer();if(e&&!e.ready)return!0;var o=r.layer.getSource();if(o&&o.loading)return!0}}return!1},n.prototype.getPixelFromCoordinate=function(t){var n=Ir(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},n.prototype.getPixelFromCoordinateInternal=function(t){var n=this.Wi;return n?tn(n.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.hn},n.prototype.getSize=function(){return this.get(ju)},n.prototype.getView=function(){return this.get(Tu)},n.prototype.getViewport=function(){return this.Qi},n.prototype.getOverlayContainer=function(){return this.tr},n.prototype.getOverlayContainerStopEvent=function(){return this.nr},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,n,i,r){return Nu(this.Wi,t,n,i,r)},n.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,r=new lu(i,this,t);this.handleMapBrowserEvent(r)},n.prototype.handleMapBrowserEvent=function(t){if(this.Wi){var n=t.originalEvent,i=n.type;if(i===du||i===W||i===B){var r=this.getOwnerDocument(),e=this.Qi.getRootNode?this.Qi.getRootNode():r,o=n.target;if(this.nr.contains(o)||!(e===r?r.documentElement:e).contains(o))return}if(t.frameState=this.Wi,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),u=s.length-1;u>=0;u--){var a=s[u];if(a.getMap()===this&&a.getActive()&&this.getTargetElement())if(!a.handleEvent(t)||t.propagationStopped)break}}},n.prototype.handlePostRender=function(){var t=this.Wi,n=this.hr;if(!n.isEmpty()){var i=this.Di,r=i;if(t){var e=t.viewHints;if(e[zu]||e[Lu]){var o=Date.now()-t.time>8;i=o?0:8,r=o?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,r))}t&&this.hn&&!t.animate&&(!0===this.Ri?(this.hasListener(ps)&&this.hn.dispatchRenderEvent(ps,t),!1===this.Fi&&(this.Fi=!0,this.dispatchEvent(new fu(Su,this,t)))):!0===this.Fi&&(this.Fi=!1,this.dispatchEvent(new fu(Mu,this,t))));for(var s=this.ar,u=0,a=s.length;u<a;++u)s[u](this,t);s.length=0},n.prototype.pr=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.dr=function(){if(this.ir){for(var t=0,n=this.er.length;t<n;++t)H(this.er[t]);this.er=null,this.Qi.removeEventListener(R,this.Gi),this.Qi.removeEventListener(W,this.Gi),this.ir.dispose(),this.ir=null,Io(this.Qi)}var i=this.getTargetElement();if(i){for(var r in i.appendChild(this.Qi),this.hn||(this.hn=this.createRenderer()),this.ir=new gu(this,this.In),vu)this.ir.addEventListener(vu[r],this.handleMapBrowserEvent.bind(this));this.Qi.addEventListener(R,this.Gi,!1),this.Qi.addEventListener(W,this.Gi,!!Vt&&{passive:!1});var e=this.getOwnerDocument().defaultView,o=this.rr?this.rr:i;this.er=[$(o,B,this.handleBrowserEvent,this),$(o,X,this.handleBrowserEvent,this),$(e,Z,this.updateSize,this)]}else this.hn&&(clearTimeout(this.Ui),this.Ui=void 0,this.ar.length=0,this.hn.dispose(),this.hn=null),this.qi&&(cancelAnimationFrame(this.qi),this.qi=void 0);this.updateSize()},n.prototype.cr=function(){this.render()},n.prototype.wr=function(){this.render()},n.prototype.vr=function(){this.Ki&&(H(this.Ki),this.Ki=null),this.Hi&&(H(this.Hi),this.Hi=null);var t=this.getView();t&&(this.gr(),this.Ki=$(t,l,this.wr,this),this.Hi=$(t,z,this.wr,this),t.resolveConstraints(0)),this.render()},n.prototype.lr=function(){this.Ji&&(this.Ji.forEach(H),this.Ji=null);var t=this.getLayerGroup();t&&(this.mr(new ou("addlayer",t)),this.Ji=[$(t,l,this.render,this),$(t,z,this.render,this),$(t,"addlayer",this.mr,this),$(t,"removelayer",this.br,this)]),this.render()},n.prototype.isRendered=function(){return!!this.Wi},n.prototype.renderSync=function(){this.qi&&cancelAnimationFrame(this.qi),this.Bi()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var r=t[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.hn&&void 0===this.qi&&(this.qi=requestAnimationFrame(this.Bi))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.br=function(t){fa(t.layer)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.Xi=function(t){var n=this,i=this.getSize(),r=this.getView(),e=this.Wi,s=null;if(void 0!==i&&sa(i)&&r&&r.isDef()){var u=r.getHints(this.Wi?this.Wi.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.Yi,declutterTree:null,extent:Bn(a.center,a.resolution,a.rotation,i),index:this.Vi++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.kt,pixelToCoordinateTransform:this.Zi,postRenderFunctions:[],size:i,tileQueue:this.hr,time:t,usedTiles:{},viewState:a,viewHints:u,wantedTiles:{},mapId:o(this),renderTargets:{}},a.nextCenter&&a.nextResolution){var h=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=Bn(a.nextCenter,a.nextResolution,h,i)}}if(this.Wi=s,this.hn.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.ar,s.postRenderFunctions),e)(!this.$i||!Hn(this.$i)&&!Pn(s.extent,this.$i))&&(this.dispatchEvent(new fu(xu,this,e)),this.$i=jn(this.$i));this.$i&&!s.viewHints[zu]&&!s.viewHints[Lu]&&!Pn(s.extent,this.$i)&&(this.dispatchEvent(new fu(_u,this,s)),wn(s.extent,this.$i))}this.dispatchEvent(new fu(bu,this,s)),this.Ri=this.hasListener(Mu)||this.hasListener(Su)||this.hasListener(ps)?!this.hr.getTilesLoading()&&!this.hr.getCount()&&!this.getLoadingOrNotReady():void 0,this.Ui||(this.Ui=setTimeout((function(){n.Ui=void 0,n.handlePostRender()}),0))},n.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.br(new ou("removelayer",n)),this.set(Ou,t)},n.prototype.setSize=function(t){this.set(ju,t)},n.prototype.setTarget=function(t){this.set(Eu,t)},n.prototype.setView=function(t){if(!t||t instanceof ea)this.set(Tu,t);else{this.set(Tu,new ea);var n=this;t.then((function(t){n.setView(new ea(t))}))}},n.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),r=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),e=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(r)||isNaN(e)||!sa(n=[r,e])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.gr()},n.prototype.gr=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.Qi);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},n}(et);var va=la,pa=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),da=function(t){function n(n){var i=t.call(this)||this,r=n.element;return!r||n.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),i.element=r||null,i._r=null,i.vn=null,i.listenerKeys=[],n.render&&(i.render=n.render),n.target&&i.setTarget(n.target),i}return pa(n,t),n.prototype.disposeInternal=function(){Io(this.element),t.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.vn},n.prototype.setMap=function(t){this.vn&&Io(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)H(this.listenerKeys[n]);(this.listenerKeys.length=0,this.vn=t,t)&&((this._r?this._r:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==j&&this.listenerKeys.push($(t,bu,this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this._r="string"==typeof t?document.getElementById(t):t},n}(et),ya=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ma=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Mr=document.createElement("ul"),i.Sr=void 0===r.collapsed||r.collapsed,i.jr=i.Sr,i.Er=void 0!==r.collapsible,i.Tr=void 0===r.collapsible||r.collapsible,i.Tr||(i.Sr=!1);var e=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",s=void 0!==r.expandClassName?r.expandClassName:e+"-expand",u=void 0!==r.collapseLabel?r.collapseLabel:"›",a=void 0!==r.collapseClassName?r.collapseClassName:e+"-collapse";"string"==typeof u?(i.Pr=document.createElement("span"),i.Pr.textContent=u,i.Pr.className=a):i.Pr=u;var h=void 0!==r.label?r.label:"i";"string"==typeof h?(i.Ar=document.createElement("span"),i.Ar.textContent=h,i.Ar.className=s):i.Ar=h;var f=i.Tr&&!i.Sr?i.Pr:i.Ar;i.Cr=document.createElement("button"),i.Cr.setAttribute("type","button"),i.Cr.setAttribute("aria-expanded",String(!i.Sr)),i.Cr.title=o,i.Cr.appendChild(f),i.Cr.addEventListener(F,i.kr.bind(i),!1);var c=e+" "+"ol-unselectable "+Cs+(i.Sr&&i.Tr?" ol-collapsed":"")+(i.Tr?"":" ol-uncollapsible"),l=i.element;return l.className=c,l.appendChild(i.Cr),l.appendChild(i.Mr),i.Ir=[],i.mn=!0,i}return ya(n,t),n.prototype.Nr=function(t){for(var n={},i=[],r=!0,e=t.layerStatesArray,o=0,s=e.length;o<s;++o){var u=e[o];if(ms(u,t.viewState)){var a=u.layer.getSource();if(a){var h=a.getAttributions();if(h){var f=h(t);if(f)if(r=r&&!1!==a.getAttributionsCollapsible(),Array.isArray(f))for(var c=0,l=f.length;c<l;++c)f[c]in n||(i.push(f[c]),n[f[c]]=!0);else f in n||(i.push(f),n[f]=!0)}}}}return this.Er||this.setCollapsible(r),i},n.prototype.zr=function(t){if(t){var n=this.Nr(t),i=n.length>0;if(this.mn!=i&&(this.element.style.display=i?"":"none",this.mn=i),!x(n,this.Ir)){No(this.Mr);for(var r=0,e=n.length;r<e;++r){var o=document.createElement("li");o.innerHTML=n[r],this.Mr.appendChild(o)}this.Ir=n}}else this.mn&&(this.element.style.display="none",this.mn=!1)},n.prototype.kr=function(t){t.preventDefault(),this.Lr(),this.jr=this.Sr},n.prototype.Lr=function(){this.element.classList.toggle(ks),this.Sr?ko(this.Pr,this.Ar):ko(this.Ar,this.Pr),this.Sr=!this.Sr,this.Cr.setAttribute("aria-expanded",String(!this.Sr))},n.prototype.getCollapsible=function(){return this.Tr},n.prototype.setCollapsible=function(t){this.Tr!==t&&(this.Tr=t,this.element.classList.toggle("ol-uncollapsible"),this.jr&&this.Lr())},n.prototype.setCollapsed=function(t){this.jr=t,this.Tr&&this.Sr!==t&&this.Lr()},n.prototype.getCollapsed=function(){return this.Sr},n.prototype.render=function(t){this.zr(t.frameState)},n}(da),wa=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ga=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var e=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",s=void 0!==r.compassClassName?r.compassClassName:"ol-compass";i.Ar=null,"string"==typeof o?(i.Ar=document.createElement("span"),i.Ar.className=s,i.Ar.textContent=o):(i.Ar=o,i.Ar.classList.add(s));var u=r.tipLabel?r.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=u,a.appendChild(i.Ar),a.addEventListener(F,i.kr.bind(i),!1);var h=e+" "+"ol-unselectable "+Cs,f=i.element;return f.className=h,f.appendChild(a),i.Rr=r.resetNorth?r.resetNorth:void 0,i.Fr=void 0!==r.duration?r.duration:250,i.Gr=void 0===r.autoHide||r.autoHide,i.Dr=void 0,i.Gr&&i.element.classList.add(Es),i}return wa(n,t),n.prototype.kr=function(t){t.preventDefault(),void 0!==this.Rr?this.Rr():this.Ur()},n.prototype.Ur=function(){var t=this.getMap().getView();if(t){var n=t.getRotation();void 0!==n&&(this.Fr>0&&n%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.Fr,easing:wt}):t.setRotation(0))}},n.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.Dr){var r="rotate("+i+"rad)";if(this.Gr){var e=this.element.classList.contains(Es);e||0!==i?e&&0!==i&&this.element.classList.remove(Es):this.element.classList.add(Es)}this.Ar.style.transform=r}this.Dr=i}},n}(da),ba=ga,xa=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_a=function(t){function n(n){var i=this,r=n||{};i=t.call(this,{element:document.createElement("div"),target:r.target})||this;var e=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,s=void 0!==r.zoomInClassName?r.zoomInClassName:e+"-in",u=void 0!==r.zoomOutClassName?r.zoomOutClassName:e+"-out",a=void 0!==r.zoomInLabel?r.zoomInLabel:"+",h=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",f=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",c=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=s,l.setAttribute("type","button"),l.title=f,l.appendChild("string"==typeof a?document.createTextNode(a):a),l.addEventListener(F,i.kr.bind(i,o),!1);var v=document.createElement("button");v.className=u,v.setAttribute("type","button"),v.title=c,v.appendChild("string"==typeof h?document.createTextNode(h):h),v.addEventListener(F,i.kr.bind(i,-o),!1);var p=e+" "+"ol-unselectable "+Cs,d=i.element;return d.className=p,d.appendChild(l),d.appendChild(v),i.Fr=void 0!==r.duration?r.duration:250,i}return xa(n,t),n.prototype.kr=function(t,n){n.preventDefault(),this.qr(t)},n.prototype.qr=function(t){var n=this.getMap().getView();if(n){var i=n.getZoom();if(void 0!==i){var r=n.getConstrainedZoom(i+t);this.Fr>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.Fr,easing:wt})):n.setZoom(r)}}},n}(da);function Ma(t){var n=t||{},i=new ct;return(void 0===n.zoom||n.zoom)&&i.push(new _a(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&i.push(new ba(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&i.push(new ma(n.attributionOptions)),i}var Sa="active",Oa=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ja(t,n,i){var r=t.getCenterInternal();if(r){var e=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==i?i:250,easing:bt,center:t.getConstrainedCenter(e)})}}function Ea(t,n,i,r){var e=t.getZoom();if(void 0!==e){var o=t.getConstrainedZoom(e+n),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:void 0!==r?r:250,easing:wt})}}var Ta=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,n&&n.handleEvent&&(i.handleEvent=n.handleEvent),i.vn=null,i.setActive(!0),i}return Oa(n,t),n.prototype.getActive=function(){return this.get(Sa)},n.prototype.getMap=function(){return this.vn},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set(Sa,t)},n.prototype.setMap=function(t){this.vn=t},n}(et),Pa=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Aa=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Br=r.delta?r.delta:1,i.Fr=void 0!==r.duration?r.duration:250,i}return Pa(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==vu.DBLCLICK){var i=t.originalEvent,r=t.map,e=t.coordinate,o=i.shiftKey?-this.Br:this.Br;Ea(r.getView(),o,e,this.Fr),i.preventDefault(),n=!0}return!n},n}(Ta),Ca=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function ka(t){for(var n=t.length,i=0,r=0,e=0;e<n;e++)i+=t[e].clientX,r+=t[e].clientY;return[i/n,r/n]}var Ia=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.targetPointers=[],i}return Ca(n,t),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.Xr(t),this.handlingDownUpSequence){if(t.type==vu.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==vu.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==vu.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r)}else t.type==vu.POINTERMOVE&&this.handleMoveEvent(t);return!n},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.Xr=function(t){t.activePointers&&(this.targetPointers=t.activePointers)},n}(Ta);function Na(t){var n=arguments;return function(t){for(var i=!0,r=0,e=n.length;r<e&&(i=i&&n[r](t));++r);return i}}var za=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},La=function(t){var n=t.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Ra=function(t){var n=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return n.contains(i)},Fa=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||Ra(t)},Ga=S,Da=function(t){var n=t.originalEvent;return 0==n.button&&!(qt&&Bt&&n.ctrlKey)},Ua=O,qa=function(t){return t.type==vu.SINGLECLICK},Ba=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},Xa=function(t){var n=t.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Ya=function(t){var n=t.originalEvent,i=n.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!n.target.isContentEditable},Za=function(t){var n=t.originalEvent;return Et(void 0!==n,56),"mouse"==n.pointerType},Va=function(t){var n=t.originalEvent;return Et(void 0!==n,56),n.isPrimary&&0===n.button},Wa=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$a=function(t){function n(n){var i=t.call(this,{stopDown:O})||this,r=n||{};i.Yr=r.kinetic,i.lastCentroid=null,i.Zr,i.Vr=!1;var e=r.condition?r.condition:Na(Ba,Va);return i.Wr=r.onFocusOnly?Na(Fa,e):e,i.$r=!1,i}return Wa(n,t),n.prototype.handleDragEvent=function(t){this.Vr||(this.Vr=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=ka(n);if(n.length==this.Zr){if(this.Yr&&this.Yr.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],e=t.map.getView();Ji(r,e.getResolution()),Hi(r,e.getRotation()),e.adjustCenterInternal(r)}}else this.Yr&&this.Yr.begin();this.lastCentroid=i,this.Zr=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.$r&&this.Yr&&this.Yr.end()){var r=this.Yr.getDistance(),e=this.Yr.getAngle(),o=i.getCenterInternal(),s=n.getPixelFromCoordinateInternal(o),u=n.getCoordinateFromPixelInternal([s[0]-r*Math.cos(e),s[1]-r*Math.sin(e)]);i.animateInternal({center:i.getConstrainedCenter(u),duration:500,easing:wt})}return this.Vr&&(this.Vr=!1,i.endInteraction()),!1}return this.Yr&&this.Yr.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.Wr(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.Yr&&this.Yr.begin(),this.$r=this.targetPointers.length>1,!0}return!1},n}(Ia),Ka=$a,Ha=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ja=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,{stopDown:O})||this).Wr=r.condition?r.condition:La,i.Kr=void 0,i.Fr=void 0!==r.duration?r.duration:250,i}return Ha(n,t),n.prototype.handleDragEvent=function(t){if(Za(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==Zu){var r=n.getSize(),e=t.pixel,o=Math.atan2(r[1]/2-e[1],e[0]-r[0]/2);if(void 0!==this.Kr){var s=o-this.Kr;i.adjustRotationInternal(-s)}this.Kr=o}}},n.prototype.handleUpEvent=function(t){return!Za(t)||(t.map.getView().endInteraction(this.Fr),!1)},n.prototype.handleDownEvent=function(t){return!!Za(t)&&(!(!Da(t)||!this.Wr(t))&&(t.map.getView().beginInteraction(),this.Kr=void 0,!0))},n}(Ia),Qa=Ja,th=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nh=function(t){function n(n){var i=t.call(this)||this;return i.Hr=null,i.dn=document.createElement("div"),i.dn.style.position="absolute",i.dn.style.pointerEvents="auto",i.dn.className="ol-box "+n,i.vn=null,i.Jr=null,i.Qr=null,i}return th(n,t),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.te=function(){var t=this.Jr,n=this.Qr,i="px",r=this.dn.style;r.left=Math.min(t[0],n[0])+i,r.top=Math.min(t[1],n[1])+i,r.width=Math.abs(n[0]-t[0])+i,r.height=Math.abs(n[1]-t[1])+i},n.prototype.setMap=function(t){if(this.vn){this.vn.getOverlayContainer().removeChild(this.dn);var n=this.dn.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.vn=t,this.vn&&this.vn.getOverlayContainer().appendChild(this.dn)},n.prototype.setPixels=function(t,n){this.Jr=t,this.Qr=n,this.createOrUpdateGeometry(),this.te()},n.prototype.createOrUpdateGeometry=function(){var t=this.Jr,n=this.Qr,i=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.vn.getCoordinateFromPixelInternal,this.vn);i[4]=i[0].slice(),this.Hr?this.Hr.setCoordinates([i]):this.Hr=new Ke([i])},n.prototype.getGeometry=function(){return this.Hr},n}(v),ih=nh,rh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),eh="boxstart",oh="boxdrag",sh="boxend",uh="boxcancel",ah=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.coordinate=i,e.mapBrowserEvent=r,e}return rh(n,t),n}(c),hh=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r=n||{};return i.ne=new ih(r.className||"ol-dragbox"),i.ie=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.Jr=null,i.Wr=r.condition?r.condition:Da,i.re=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return rh(n,t),n.prototype.defaultBoxEndCondition=function(t,n,i){var r=i[0]-n[0],e=i[1]-n[1];return r*r+e*e>=this.ie},n.prototype.getGeometry=function(){return this.ne.getGeometry()},n.prototype.handleDragEvent=function(t){this.ne.setPixels(this.Jr,t.pixel),this.dispatchEvent(new ah(oh,t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.ne.setMap(null);var n=this.re(t,this.Jr,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new ah(n?sh:uh,t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.Wr(t)&&(this.Jr=t.pixel,this.ne.setMap(t.map),this.ne.setPixels(this.Jr,this.Jr),this.dispatchEvent(new ah(eh,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(Ia),fh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ch=function(t){function n(n){var i=this,r=n||{},e=r.condition?r.condition:Xa;return(i=t.call(this,{condition:e,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).Fr=void 0!==r.duration?r.duration:200,i.ee=void 0!==r.out&&r.out,i}return fh(n,t),n.prototype.onBoxEnd=function(t){var n=this.getMap().getView(),i=this.getGeometry();if(this.ee){var r=n.rotatedExtentForGeometry(i),e=n.getResolutionForExtentInternal(r),o=n.getResolution()/e;(i=i.clone()).scale(o*o)}n.fitInternal(i,{duration:this.Fr,easing:wt})},n}(hh),lh=37,vh=38,ph=39,dh=40,yh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.oe=function(t){return Ba(t)&&Ya(t)},i.Wr=void 0!==r.condition?r.condition:i.oe,i.Fr=void 0!==r.duration?r.duration:100,i.se=void 0!==r.pixelDelta?r.pixelDelta:128,i}return yh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B){var i=t.originalEvent,r=i.keyCode;if(this.Wr(t)&&(r==dh||r==lh||r==ph||r==vh)){var e=t.map.getView(),o=e.getResolution()*this.se,s=0,u=0;r==dh?u=-o:r==lh?s=-o:r==ph?s=o:u=o;var a=[s,u];Hi(a,e.getRotation()),ja(e,a,this.Fr),i.preventDefault(),n=!0}}return!n},n}(Ta),wh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gh=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Wr=r.condition?r.condition:Ya,i.Br=r.delta?r.delta:1,i.Fr=void 0!==r.duration?r.duration:100,i}return wh(n,t),n.prototype.handleEvent=function(t){var n=!1;if(t.type==B||t.type==X){var i=t.originalEvent,r=i.charCode;if(this.Wr(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var e=t.map,o=r=="+".charCodeAt(0)?this.Br:-this.Br;Ea(e.getView(),o,void 0,this.Fr),i.preventDefault(),n=!0}}return!n},n}(Ta),bh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xh="trackpad",_h="wheel",Mh=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,r)||this).ue=0,i.ae=0,i.wt=void 0!==r.maxDelta?r.maxDelta:1,i.Fr=void 0!==r.duration?r.duration:250,i.he=void 0!==r.timeout?r.timeout:80,i.fe=void 0===r.useAnchor||r.useAnchor,i.ce=void 0!==r.constrainResolution&&r.constrainResolution;var e=r.condition?r.condition:Ga;return i.Wr=r.onFocusOnly?Na(Fa,e):e,i.le=null,i.ve=void 0,i.pe,i.de=void 0,i.ye=400,i.me,i.we=300,i}return bh(n,t),n.prototype.ge=function(){this.me=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.ae?this.ae>0?1:-1:0,this.le)},n.prototype.handleEvent=function(t){if(!this.Wr(t))return!0;if(t.type!==W)return!0;var n,i=t.map,r=t.originalEvent;if(r.preventDefault(),this.fe&&(this.le=t.coordinate),t.type==W&&(n=r.deltaY,Gt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Xt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.ae=n;var e=Date.now();void 0===this.ve&&(this.ve=e),(!this.de||e-this.ve>this.ye)&&(this.de=Math.abs(n)<4?xh:_h);var o=i.getView();if(this.de===xh&&!o.getConstrainResolution()&&!this.ce)return this.me?clearTimeout(this.me):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.me=setTimeout(this.ge.bind(this),this.he),o.adjustZoom(-n/this.we,this.le),this.ve=e,!1;this.ue+=n;var s=Math.max(this.he-(e-this.ve),0);return clearTimeout(this.pe),this.pe=setTimeout(this.be.bind(this,i),s),!1},n.prototype.be=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-oi(this.ue,-this.wt*this.we,this.wt*this.we)/this.we;(n.getConstrainResolution()||this.ce)&&(i=i?i>0?1:-1:0),Ea(n,i,this.le,this.Fr),this.de=void 0,this.ue=0,this.le=null,this.ve=void 0,this.pe=void 0},n.prototype.setMouseAnchor=function(t){this.fe=t,t||(this.le=null)},n}(Ta),Sh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Oh=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this).xe=null,i.Kr=void 0,i._e=!1,i.Me=0,i.Se=void 0!==r.threshold?r.threshold:.3,i.Fr=void 0!==r.duration?r.duration:250,i}return Sh(n,t),n.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],r=this.targetPointers[1],e=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.Kr){var o=e-this.Kr;this.Me+=o,!this._e&&Math.abs(this.Me)>this.Se&&(this._e=!0),n=o}this.Kr=e;var s=t.map,u=s.getView();if(u.getConstraints().rotation!==Zu){var a=s.getViewport().getBoundingClientRect(),h=ka(this.targetPointers);h[0]-=a.left,h[1]-=a.top,this.xe=s.getCoordinateFromPixelInternal(h),this._e&&(s.render(),u.adjustRotationInternal(n,this.xe))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.Fr),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.xe=null,this.Kr=void 0,this._e=!1,this.Me=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Ia),jh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Eh=function(t){function n(n){var i=this,r=n||{},e=r;return e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this).xe=null,i.Fr=void 0!==r.duration?r.duration:400,i.Oe=void 0,i.je=1,i}return jh(n,t),n.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],r=this.targetPointers[1],e=i.clientX-r.clientX,o=i.clientY-r.clientY,s=Math.sqrt(e*e+o*o);void 0!==this.Oe&&(n=this.Oe/s),this.Oe=s;var u=t.map,a=u.getView();1!=n&&(this.je=n);var h=u.getViewport().getBoundingClientRect(),f=ka(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.xe=u.getCoordinateFromPixelInternal(f),u.render(),a.adjustResolutionInternal(n,this.xe)},n.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map.getView(),i=this.je>1?1:-1;return n.endInteraction(this.Fr,i),!1}return!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.xe=null,this.Oe=void 0,this.je=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Ia),Th=Eh;function Ph(t){var n=t||{},i=new ct,r=new Fo(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&i.push(new Qa),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&i.push(new Aa({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&i.push(new Ka({onFocusOnly:n.onFocusOnly,kinetic:r})),(void 0===n.pinchRotate||n.pinchRotate)&&i.push(new Oh),(void 0===n.pinchZoom||n.pinchZoom)&&i.push(new Th({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(i.push(new mh),i.push(new gh({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&i.push(new Mh({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&i.push(new ch({duration:n.zoomDuration})),i}var Ah=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ch=function(t){function n(n){return(n=P({},n)).controls||(n.controls=Ma()),n.interactions||(n.interactions=Ph({onFocusOnly:!0})),t.call(this,n)||this}return Ah(n,t),n.prototype.createRenderer=function(){return new ru(this)},n}(va),kh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ih="element",Nh="map",zh="offset",Lh="position",Rh="positioning",Fh=function(t){function n(n){var i=t.call(this)||this;return i.on,i.once,i.un,i.options=n,i.id=n.id,i.insertFirst=void 0===n.insertFirst||n.insertFirst,i.stopEvent=void 0===n.stopEvent||n.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==n.className?n.className:"ol-overlay-container ol-selectable",i.element.style.position="absolute",i.element.style.pointerEvents="auto",i.autoPan=!0===n.autoPan?{}:n.autoPan||void 0,i.rendered={jt:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(Ih,i.handleElementChanged),i.addChangeListener(Nh,i.handleMapChanged),i.addChangeListener(zh,i.handleOffsetChanged),i.addChangeListener(Lh,i.handlePositionChanged),i.addChangeListener(Rh,i.handlePositioningChanged),void 0!==n.element&&i.setElement(n.element),i.setOffset(void 0!==n.offset?n.offset:[0,0]),i.setPositioning(n.positioning||"top-left"),void 0!==n.position&&i.setPosition(n.position),i}return kh(n,t),n.prototype.getElement=function(){return this.get(Ih)},n.prototype.getId=function(){return this.id},n.prototype.getMap=function(){return this.get(Nh)||null},n.prototype.getOffset=function(){return this.get(zh)},n.prototype.getPosition=function(){return this.get(Lh)},n.prototype.getPositioning=function(){return this.get(Rh)},n.prototype.handleElementChanged=function(){No(this.element);var t=this.getElement();t&&this.element.appendChild(t)},n.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Io(this.element),H(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=$(t,bu,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},n.prototype.render=function(){this.updatePixelPosition()},n.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},n.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},n.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},n.prototype.setElement=function(t){this.set(Ih,t)},n.prototype.setMap=function(t){this.set(Nh,t)},n.prototype.setOffset=function(t){this.set(zh,t)},n.prototype.setPosition=function(t){this.set(Lh,t)},n.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},n.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get(Lh)){var i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),e=this.getRect(r,[Ao(r),Co(r)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!xn(i,e)){var u=e[0]-i[0],a=i[2]-e[2],h=e[1]-i[1],f=i[3]-e[3],c=[0,0];if(u<0?c[0]=u-s:a<0&&(c[0]=Math.abs(a)+s),h<0?c[1]=h-s:f<0&&(c[1]=Math.abs(f)+s),0!==c[0]||0!==c[1]){var l=n.getView().getCenterInternal(),v=n.getPixelFromCoordinateInternal(l);if(!v)return;var p=[v[0]+c[0],v[1]+c[1]],d=o.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(p),duration:d.duration,easing:d.easing})}}}},n.prototype.getRect=function(t,n){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,e=i.top+window.pageYOffset;return[r,e,r+n[0],e+n[1]]},n.prototype.setPositioning=function(t){this.set(Rh,t)},n.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},n.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var i=t.getPixelFromCoordinate(n),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},n.prototype.updateRenderedPosition=function(t,n){var i=this.element.style,r=this.getOffset(),e=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+r[0])+"px",s=Math.round(t[1]+r[1])+"px",u="0%",a="0%";"bottom-right"==e||"center-right"==e||"top-right"==e?u="-100%":"bottom-center"!=e&&"center-center"!=e&&"top-center"!=e||(u="-50%"),"bottom-left"==e||"bottom-center"==e||"bottom-right"==e?a="-100%":"center-left"!=e&&"center-center"!=e&&"center-right"!=e||(a="-50%");var h="translate(".concat(u,", ").concat(a,") translate(").concat(o,", ").concat(s,")");this.rendered.jt!=h&&(this.rendered.jt=h,i.transform=h)},n.prototype.getOptions=function(){return this.options},n}(et),Gh=Fh,Dh=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.Ee=0,this.Te={},this.Pe=null,this.Ae=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.Ee=0,this.Te={},this.Pe=null,this.Ae=null},t.prototype.containsKey=function(t){return this.Te.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var n=this.Pe;n;)t(n.Ce,n.ke,this),n=n.newer},t.prototype.get=function(t,n){var i=this.Te[t];return Et(void 0!==i,15),i===this.Ae||(i===this.Pe?(this.Pe=this.Pe.newer,this.Pe.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.Ae,this.Ae.newer=i,this.Ae=i),i.Ce},t.prototype.remove=function(t){var n=this.Te[t];return Et(void 0!==n,15),n===this.Ae?(this.Ae=n.older,this.Ae&&(this.Ae.newer=null)):n===this.Pe?(this.Pe=n.newer,this.Pe&&(this.Pe.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.Te[t],--this.Ee,n.Ce},t.prototype.getCount=function(){return this.Ee},t.prototype.getKeys=function(){var t,n=new Array(this.Ee),i=0;for(t=this.Ae;t;t=t.older)n[i++]=t.ke;return n},t.prototype.getValues=function(){var t,n=new Array(this.Ee),i=0;for(t=this.Ae;t;t=t.older)n[i++]=t.Ce;return n},t.prototype.peekLast=function(){return this.Pe.Ce},t.prototype.peekLastKey=function(){return this.Pe.ke},t.prototype.peekFirstKey=function(){return this.Ae.ke},t.prototype.peek=function(t){if(this.containsKey(t))return this.Te[t].Ce},t.prototype.pop=function(){var t=this.Pe;return delete this.Te[t.ke],t.newer&&(t.newer.older=null),this.Pe=t.newer,this.Pe||(this.Ae=null),--this.Ee,t.Ce},t.prototype.replace=function(t,n){this.get(t),this.Te[t].Ce=n},t.prototype.set=function(t,n){Et(!(t in this.Te),16);var i={ke:t,newer:null,older:this.Ae,Ce:n};this.Ae?this.Ae.newer=i:this.Pe=i,this.Ae=i,this.Te[t]=i,++this.Ee},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Uh(t,n,i,r){return void 0!==r?(r[0]=t,r[1]=n,r[2]=i,r):[t,n,i]}function qh(t,n,i){return t+"/"+n+"/"+i}function Bh(t){return qh(t[0],t[1],t[2])}function Xh(t){var n=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return qh(n[0],n[1],n[2])}function Yh(t){return t.split("/").map(Number)}function Zh(t){return(t[1]<<t[0])+t[2]}function Vh(t,n){var i=t[0],r=t[1],e=t[2];if(n.getMinZoom()>i||i>n.getMaxZoom())return!1;var o=n.getFullTileRange(i);return!o||o.containsXY(r,e)}var Wh=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Wh(n,t),n.prototype.clear=function(){for(;this.getCount()>0;)this.pop().release();t.prototype.clear.call(this)},n.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Yh(this.peekFirstKey())[0];this.forEach(function(n){n.tileCoord[0]!==t&&(this.remove(Bh(n.tileCoord)),n.release())}.bind(this))}},n}(Dh),Kh=$h,Hh=function(){function t(t,n,i,r){this.minX=t,this.maxX=n,this.minY=i,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function Jh(t,n,i,r,e){return void 0!==e?(e.minX=t,e.maxX=n,e.minY=i,e.maxY=r,e):new Hh(t,n,i,r)}var Qh=Hh,tf=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),nf=[],rf=function(t){function n(n,i,r,e){var o=t.call(this,n,i,{transition:0})||this;return o.Ne={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.ze={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=e.bind(void 0,o),o.wrappedTileCoord=r,o}return tf(n,t),n.prototype.getContext=function(t){var n=o(t);return n in this.Ne||(this.Ne[n]=To(1,1,nf)),this.Ne[n]},n.prototype.hasContext=function(t){return o(t)in this.Ne},n.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},n.prototype.getReplayState=function(t){var n=o(t);return n in this.ze||(this.ze[n]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.ze[n]},n.prototype.load=function(){this.getSourceTiles()},n.prototype.release=function(){for(var n in this.Ne){var i=this.Ne[n];Po(i),nf.push(i.canvas),delete this.Ne[n]}t.prototype.release.call(this)},n}(Mt),ef=rf,of=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sf=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i,s)||this;return u.extent=null,u.Le=e,u.Re=null,u.q,u.projection=null,u.resolution,u.Xt=o,u.Fe=r,u.key=r,u}return of(n,t),n.prototype.getFormat=function(){return this.Le},n.prototype.getFeatures=function(){return this.Re},n.prototype.load=function(){this.state==lt&&(this.setState(vt),this.Xt(this,this.Fe),this.q&&this.q(this.extent,this.resolution,this.projection))},n.prototype.onLoad=function(t,n){this.setFeatures(t)},n.prototype.onError=function(){this.setState(dt)},n.prototype.setFeatures=function(t){this.Re=t,this.setState(pt)},n.prototype.setLoader=function(t){this.q=t},n}(Mt),uf=sf;function af(t){return Array.isArray(t)?Zo(t):t}var hf=!1;function ff(t,n,i,r,e,o,s){var u=new XMLHttpRequest;u.open("GET","function"==typeof t?t(i,r,e):t,!0),"arraybuffer"==n.getType()&&(u.responseType="arraybuffer"),u.withCredentials=hf,u.onload=function(t){if(!u.status||u.status>=200&&u.status<300){var r=n.getType(),a=void 0;"json"==r||"text"==r?a=u.responseText:"xml"==r?(a=u.responseXML)||(a=(new DOMParser).parseFromString(u.responseText,"application/xml")):"arraybuffer"==r&&(a=u.response),a?o(n.readFeatures(a,{extent:i,featureProjection:e}),n.readProjection(a)):s()}else s()},u.onerror=s,u.send()}function cf(t,n){return function(i,r,e,o,s){var u=this;ff(t,n,i,r,e,(function(t,n){u.addFeatures(t),void 0!==o&&o(t)}),s||j)}}function lf(t,n){return[[-1/0,-1/0,1/0,1/0]]}var vf=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function pf(t,n,i,r){var e=document.createElement("script"),s="olc_"+o(n);function u(){delete window[s],e.parentNode.removeChild(e)}e.async=!0,e.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+s;var a=setTimeout((function(){u(),i&&i()}),1e4);window[s]=function(t){clearTimeout(a),u(),n(t)},document.head.appendChild(e)}var df,yf=function(t){function n(n){var i=this,r="Unexpected response status: "+n.status;return(i=t.call(this,r)||this).name="ResponseError",i.response=n,i}return vf(n,t),n}(Error),mf=function(t){function n(n){var i=t.call(this,"Failed to issue request")||this;return i.name="ClientError",i.client=n,i}return vf(n,t),n}(Error);function wf(t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var e=void 0;try{e=JSON.parse(r.responseText)}catch(t){var o="Error parsing response text as JSON: "+t.message;return void i(new Error(o))}n(e)}else i(new yf(r))})),r.addEventListener("error",(function(t){i(new mf(t.target))})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))}function gf(t,n){return n.indexOf("://")>=0?n:new URL(n,t).href}var bf=function(){function t(){}return t.prototype.drawCustom=function(t,n,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,n){},t.prototype.drawFeature=function(t,n){},t.prototype.drawGeometryCollection=function(t,n){},t.prototype.drawLineString=function(t,n){},t.prototype.drawMultiLineString=function(t,n){},t.prototype.drawMultiPoint=function(t,n){},t.prototype.drawMultiPolygon=function(t,n){},t.prototype.drawPoint=function(t,n){},t.prototype.drawPolygon=function(t,n){},t.prototype.drawText=function(t,n){},t.prototype.setFillStrokeStyle=function(t,n){},t.prototype.setImageStyle=function(t,n){},t.prototype.setTextStyle=function(t,n){},t}(),xf=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_f=function(t){function n(n,i,r,e,o,s,u){var a=t.call(this)||this;return a.Ne=n,a.kt=i,a.st=r,a.jt=e,a.Ge=o,a.De=s,a.Ue=u,a.qe=null,a.Be=null,a.Xe=null,a.Ye=null,a.Ze=null,a.zt=null,a.Ve=0,a.We=0,a.$e=0,a.Ke=0,a.He=0,a.Je=0,a.Qe=!1,a.no=0,a.io=[0,0],a.ro=0,a.eo="",a.oo=0,a.so=0,a.uo=!1,a.ao=0,a.ho=[0,0],a.fo=null,a.co=null,a.lo=null,a.vo=[],a.po=[1,0,0,1,0,0],a}return xf(n,t),n.prototype.do=function(t,n,i,r){if(this.zt){var e=Dr(t,n,i,r,this.jt,this.vo),o=this.Ne,s=this.po,u=o.globalAlpha;1!=this.Ke&&(o.globalAlpha=u*this.Ke);var a=this.no;this.Qe&&(a+=this.Ge);for(var h=0,f=e.length;h<f;h+=2){var c=e[h]-this.Ve,l=e[h+1]-this.We;if(0!==a||1!=this.io[0]||1!=this.io[1]){var v=c+this.Ve,p=l+this.We;sn(s,v,p,1,1,a,-v,-p),o.setTransform.apply(o,s),o.translate(v,p),o.scale(this.io[0],this.io[1]),o.drawImage(this.zt,this.He,this.Je,this.ro,this.$e,-this.Ve,-this.We,this.ro,this.$e),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.zt,this.He,this.Je,this.ro,this.$e,c,l,this.ro,this.$e)}1!=this.Ke&&(o.globalAlpha=u)}},n.prototype.yo=function(t,n,i,r){if(this.lo&&""!==this.eo){this.fo&&this.mo(this.fo),this.co&&this.wo(this.co),this.bo(this.lo);var e=Dr(t,n,i,r,this.jt,this.vo),o=this.Ne,s=this.ao;for(this.uo&&(s+=this.Ge);n<i;n+=r){var u=e[n]+this.oo,a=e[n+1]+this.so;if(0!==s||1!=this.ho[0]||1!=this.ho[1]){var h=sn(this.po,u,a,1,1,s,-u,-a);o.setTransform.apply(o,h),o.translate(u,a),o.scale(this.ho[0],this.ho[1]),this.co&&o.strokeText(this.eo,0,0),this.fo&&o.fillText(this.eo,0,0),o.setTransform(1,0,0,1,0,0)}else this.co&&o.strokeText(this.eo,u,a),this.fo&&o.fillText(this.eo,u,a)}}},n.prototype.xo=function(t,n,i,r,e){var o=this.Ne,s=Dr(t,n,i,r,this.jt,this.vo);o.moveTo(s[0],s[1]);var u=s.length;e&&(u-=2);for(var a=2;a<u;a+=2)o.lineTo(s[a],s[a+1]);return e&&o.closePath(),i},n.prototype._o=function(t,n,i,r){for(var e=0,o=i.length;e<o;++e)n=this.xo(t,n,i[e],r,!0);return n},n.prototype.drawCircle=function(t){if(Kn(this.st,t.getExtent())){if(this.Ye||this.Ze){this.Ye&&this.mo(this.Ye),this.Ze&&this.wo(this.Ze);var n=Hr(t,this.jt,this.vo),i=n[2]-n[0],r=n[3]-n[1],e=Math.sqrt(i*i+r*r),o=this.Ne;o.beginPath(),o.arc(n[0],n[1],e,0,2*Math.PI),this.Ye&&o.fill(),this.Ze&&o.stroke()}""!==this.eo&&this.yo(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.jt=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},n.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);i&&Kn(this.st,i.getExtent())&&(this.setStyle(n),this.drawGeometry(i))},n.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},n.prototype.drawPoint=function(t){this.De&&(t=t.simplifyTransformed(this.De,this.Ue));var n=t.getFlatCoordinates(),i=t.getStride();this.zt&&this.do(n,0,n.length,i),""!==this.eo&&this.yo(n,0,n.length,i)},n.prototype.drawMultiPoint=function(t){this.De&&(t=t.simplifyTransformed(this.De,this.Ue));var n=t.getFlatCoordinates(),i=t.getStride();this.zt&&this.do(n,0,n.length,i),""!==this.eo&&this.yo(n,0,n.length,i)},n.prototype.drawLineString=function(t){if(this.De&&(t=t.simplifyTransformed(this.De,this.Ue)),Kn(this.st,t.getExtent())){if(this.Ze){this.wo(this.Ze);var n=this.Ne,i=t.getFlatCoordinates();n.beginPath(),this.xo(i,0,i.length,t.getStride(),!1),n.stroke()}if(""!==this.eo){var r=t.getFlatMidpoint();this.yo(r,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.De&&(t=t.simplifyTransformed(this.De,this.Ue));var n=t.getExtent();if(Kn(this.st,n)){if(this.Ze){this.wo(this.Ze);var i=this.Ne,r=t.getFlatCoordinates(),e=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var u=0,a=o.length;u<a;++u)e=this.xo(r,e,o[u],s,!1);i.stroke()}if(""!==this.eo){var h=t.getFlatMidpoints();this.yo(h,0,h.length,2)}}},n.prototype.drawPolygon=function(t){if(this.De&&(t=t.simplifyTransformed(this.De,this.Ue)),Kn(this.st,t.getExtent())){if(this.Ze||this.Ye){this.Ye&&this.mo(this.Ye),this.Ze&&this.wo(this.Ze);var n=this.Ne;n.beginPath(),this._o(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.Ye&&n.fill(),this.Ze&&n.stroke()}if(""!==this.eo){var i=t.getFlatInteriorPoint();this.yo(i,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.De&&(t=t.simplifyTransformed(this.De,this.Ue)),Kn(this.st,t.getExtent())){if(this.Ze||this.Ye){this.Ye&&this.mo(this.Ye),this.Ze&&this.wo(this.Ze);var n=this.Ne,i=t.getOrientedFlatCoordinates(),r=0,e=t.getEndss(),o=t.getStride();n.beginPath();for(var s=0,u=e.length;s<u;++s){var a=e[s];r=this._o(i,r,a,o)}this.Ye&&n.fill(),this.Ze&&n.stroke()}if(""!==this.eo){var h=t.getFlatInteriorPoints();this.yo(h,0,h.length,2)}}},n.prototype.mo=function(t){var n=this.Ne,i=this.qe;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.qe={fillStyle:t.fillStyle})},n.prototype.wo=function(t){var n=this.Ne,i=this.Be;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(x(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.Be={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.bo=function(t){var n=this.Ne,i=this.Xe,r=t.textAlign?t.textAlign:Bs;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=r,n.textBaseline=t.textBaseline,this.Xe={font:t.font,textAlign:r,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,n){var i=this;if(t){var r=t.getColor();this.Ye={fillStyle:af(r||Rs)}}else this.Ye=null;if(n){var e=n.getColor(),o=n.getLineCap(),s=n.getLineDash(),u=n.getLineDashOffset(),a=n.getLineJoin(),h=n.getWidth(),f=n.getMiterLimit(),c=s||Gs;this.Ze={lineCap:void 0!==o?o:Fs,lineDash:1===this.kt?c:c.map((function(t){return t*i.kt})),lineDashOffset:(u||0)*this.kt,lineJoin:void 0!==a?a:Ds,lineWidth:(void 0!==h?h:1)*this.kt,miterLimit:void 0!==f?f:Us,strokeStyle:af(e||qs)}}else this.Ze=null},n.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this.zt=t.getImage(this.kt),this.Ve=i[0]*this.kt,this.We=i[1]*this.kt,this.$e=n[1]*this.kt,this.Ke=t.getOpacity(),this.He=r[0],this.Je=r[1],this.Qe=t.getRotateWithView(),this.no=t.getRotation(),this.io=t.getScaleArray(),this.ro=n[0]*this.kt}else this.zt=null},n.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var i=n.getColor();this.fo={fillStyle:af(i||Rs)}}else this.fo=null;var r=t.getStroke();if(r){var e=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),u=r.getLineDashOffset(),a=r.getLineJoin(),h=r.getWidth(),f=r.getMiterLimit();this.co={lineCap:void 0!==o?o:Fs,lineDash:s||Gs,lineDashOffset:u||0,lineJoin:void 0!==a?a:Ds,lineWidth:void 0!==h?h:1,miterLimit:void 0!==f?f:Us,strokeStyle:af(e||qs)}}else this.co=null;var c=t.getFont(),l=t.getOffsetX(),v=t.getOffsetY(),p=t.getRotateWithView(),d=t.getRotation(),y=t.getScaleArray(),m=t.getText(),w=t.getTextAlign(),g=t.getTextBaseline();this.lo={font:void 0!==c?c:Ls,textAlign:void 0!==w?w:Bs,textBaseline:void 0!==g?g:Xs},this.eo=void 0!==m?Array.isArray(m)?m.reduce((function(t,n,i){return t+(i%2?" ":n)}),""):m:"",this.oo=void 0!==l?this.kt*l:0,this.so=void 0!==v?this.kt*v:0,this.uo=void 0!==p&&p,this.ao=void 0!==d?d:0,this.ho=[this.kt*y[0],this.kt*y[1]]}else this.eo=""},n}(bf),Mf=_f,Sf={Point:function(t,n,i,r,e){var o,s=i.getImage(),u=i.getText();if(s){if(s.getImageState()!=bo)return;var a=t;if(e){var h=s.getDeclutterMode();if("none"!==h)if(a=e,"obstacle"===h){var f=t.getBuilder(i.getZIndex(),"Image");f.setImageStyle(s,o),f.drawPoint(n,r)}else u&&u.getText()&&(o={})}var c=a.getBuilder(i.getZIndex(),"Image");c.setImageStyle(s,o),c.drawPoint(n,r)}if(u&&u.getText()){var l=t;e&&(l=e);var v=l.getBuilder(i.getZIndex(),"Text");v.setTextStyle(u,o),v.drawText(n,r)}},LineString:function(t,n,i,r,e){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(n,r)}var u=i.getText();if(u&&u.getText()){var a=(e||t).getBuilder(i.getZIndex(),"Text");a.setTextStyle(u),a.drawText(n,r)}},Polygon:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(o||s){var u=t.getBuilder(i.getZIndex(),"Polygon");u.setFillStrokeStyle(o,s),u.drawPolygon(n,r)}var a=i.getText();if(a&&a.getText()){var h=(e||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(a),h.drawText(n,r)}},MultiPoint:function(t,n,i,r,e){var o,s=i.getImage(),u=i.getText();if(s){if(s.getImageState()!=bo)return;var a=t;if(e){var h=s.getDeclutterMode();if("none"!==h)if(a=e,"obstacle"===h){var f=t.getBuilder(i.getZIndex(),"Image");f.setImageStyle(s,o),f.drawMultiPoint(n,r)}else u&&u.getText()&&(o={})}var c=a.getBuilder(i.getZIndex(),"Image");c.setImageStyle(s,o),c.drawMultiPoint(n,r)}if(u&&u.getText()){var l=t;e&&(l=e);var v=l.getBuilder(i.getZIndex(),"Text");v.setTextStyle(u,o),v.drawText(n,r)}},MultiLineString:function(t,n,i,r,e){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(n,r)}var u=i.getText();if(u&&u.getText()){var a=(e||t).getBuilder(i.getZIndex(),"Text");a.setTextStyle(u),a.drawText(n,r)}},MultiPolygon:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(s||o){var u=t.getBuilder(i.getZIndex(),"Polygon");u.setFillStrokeStyle(o,s),u.drawMultiPolygon(n,r)}var a=i.getText();if(a&&a.getText()){var h=(e||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(a),h.drawText(n,r)}},GeometryCollection:function(t,n,i,r,e){var o,s,u=n.getGeometriesArray();for(o=0,s=u.length;o<s;++o){(0,Sf[u[o].getType()])(t,u[o],i,r,e)}},Circle:function(t,n,i,r,e){var o=i.getFill(),s=i.getStroke();if(o||s){var u=t.getBuilder(i.getZIndex(),"Circle");u.setFillStrokeStyle(o,s),u.drawCircle(n,r)}var a=i.getText();if(a&&a.getText()){var h=(e||t).getBuilder(i.getZIndex(),"Text");h.setTextStyle(a),h.drawText(n,r)}}};function Of(t,n){return parseInt(o(t),10)-parseInt(o(n),10)}function jf(t,n){var i=Ef(t,n);return i*i}function Ef(t,n){return.5*t/n}function Tf(t,n,i,r,e,o,s){var u=!1,a=i.getImage();if(a){var h=a.getImageState();h==bo||h==xo?a.unlistenImageChange(e):(h==wo&&a.load(),a.listenImageChange(e),u=!0)}return function(t,n,i,r,e,o){var s=i.getGeometryFunction()(n);if(!s)return;var u=s.simplifyTransformed(r,e);if(i.getRenderer())Pf(t,u,i,n);else{(0,Sf[u.getType()])(t,u,i,n,o)}}(t,n,i,r,o,s),u}function Pf(t,n,i,r){if("GeometryCollection"!=n.getType())t.getBuilder(i.getZIndex(),"Default").drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer());else for(var e=n.getGeometries(),o=0,s=e.length;o<s;++o)Pf(t,e[o],i,r)}function Af(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var n,i=t.inversePixelTransform[0],r=t.frameState,e=Ht(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=jf(r.viewState.resolution,i),s=Cr();return s&&(n=Or(s,r.viewState.projection)),new Mf(t.context,i,r.extent,e,r.viewState.rotation,o,n)}var Cf,kf={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},If={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},Nf=[];function zf(t,n,i,r,e){t.beginPath(),t.moveTo(0,0),t.lineTo(n,i),t.lineTo(r,e),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(n,r)+1,Math.max(i,e)),t.restore()}function Lf(t,n){return Math.abs(t[4*n]-210)>2||Math.abs(t[4*n+3]-191.25)>2}function Rf(t,n,i,r){var e=Er(i,n,t),o=mr(n,r,i),s=n.getMetersPerUnit();void 0!==s&&(o*=s);var u=t.getMetersPerUnit();void 0!==u&&(o/=u);var a=t.getExtent();if(!a||bn(a,e)){var h=mr(t,o,e)/o;isFinite(h)&&h>0&&(o/=h)}return o}function Ff(t,n,i,r){var e=Un(i),o=Rf(t,n,e,r);return(!isFinite(o)||o<=0)&&Rn(i,(function(i){return o=Rf(t,n,i,r),isFinite(o)&&o>0})),o}function Gf(t,n,i,r,e,o,s,u,a,h,f,c){var l=To(Math.round(i*t),Math.round(i*n),Nf);if(c||P(l,kf),0===a.length)return l.canvas;function v(t){return Math.round(t*i)/i}l.scale(i,i),l.globalCompositeOperation="lighter";var p=[1/0,1/0,-1/0,-1/0];a.forEach((function(t,n,i){Cn(p,t.extent)}));var d=$n(p),y=Yn(p),m=To(Math.round(i*d/r),Math.round(i*y/r));c||P(m,kf);var w=i/r;a.forEach((function(t,n,i){var r=t.extent[0]-p[0],e=-(t.extent[3]-p[3]),o=$n(t.extent),s=Yn(t.extent);t.image.width>0&&t.image.height>0&&m.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,r*w,e*w,o*w,s*w)}));var g=Vn(s);return u.getTriangles().forEach((function(t,n,e){var s=t.source,u=t.target,a=s[0][0],h=s[0][1],f=s[1][0],d=s[1][1],y=s[2][0],w=s[2][1],b=v((u[0][0]-g[0])/o),x=v(-(u[0][1]-g[1])/o),_=v((u[1][0]-g[0])/o),M=v(-(u[1][1]-g[1])/o),S=v((u[2][0]-g[0])/o),O=v(-(u[2][1]-g[1])/o),j=a,E=h;a=0,h=0;var T=fi([[f-=j,d-=E,0,0,_-b],[y-=j,w-=E,0,0,S-b],[0,0,f,d,M-x],[0,0,y,w,O-x]]);if(T){if(l.save(),l.beginPath(),function(){if(void 0===Cf){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",zf(t,4,5,4,0),zf(t,4,5,0,5);var n=t.getImageData(0,0,3,3).data;Cf=Lf(n,0)||Lf(n,4)||Lf(n,8)}return Cf}()||!c){l.moveTo(_,M);for(var P=b-_,A=x-M,C=0;C<4;C++)l.lineTo(_+v((C+1)*P/4),M+v(C*A/3)),3!=C&&l.lineTo(_+v((C+1)*P/4),M+v((C+1)*A/3));l.lineTo(S,O)}else l.moveTo(_,M),l.lineTo(b,x),l.lineTo(S,O);l.clip(),l.transform(T[0],T[2],T[1],T[3],b,x),l.translate(p[0]-j,p[3]-E),l.scale(r/i,-r/i),l.drawImage(m.canvas,0,0),l.restore()}})),f&&(l.save(),l.globalCompositeOperation="source-over",l.strokeStyle="black",l.lineWidth=1,u.getTriangles().forEach((function(t,n,i){var r=t.target,e=(r[0][0]-g[0])/o,s=-(r[0][1]-g[1])/o,u=(r[1][0]-g[0])/o,a=-(r[1][1]-g[1])/o,h=(r[2][0]-g[0])/o,f=-(r[2][1]-g[1])/o;l.beginPath(),l.moveTo(u,a),l.lineTo(e,s),l.lineTo(h,f),l.closePath(),l.stroke()})),l.restore()),l.canvas}var Df=[0,0,0],Uf=function(){function t(t){var n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.Ti=t.resolutions,Et(M(this.Ti,(function(t,n){return n-t}),!0),17),!t.origins)for(var i=0,r=this.Ti.length-1;i<r;++i)if(n){if(this.Ti[i]/this.Ti[i+1]!==n){n=void 0;break}}else n=this.Ti[i]/this.Ti[i+1];this.Ei=n,this.maxZoom=this.Ti.length-1,this.Mo=void 0!==t.origin?t.origin:null,this.So=null,void 0!==t.origins&&(this.So=t.origins,Et(this.So.length==this.Ti.length,20));var e=t.extent;void 0===e||this.Mo||this.So||(this.Mo=Vn(e)),Et(!this.Mo&&this.So||this.Mo&&!this.So,18),this.Oo=null,void 0!==t.tileSizes&&(this.Oo=t.tileSizes,Et(this.Oo.length==this.Ti.length,19)),this.jo=void 0!==t.tileSize?t.tileSize:this.Oo?null:Fu,Et(!this.jo&&this.Oo||this.jo&&!this.Oo,22),this.st=void 0!==e?e:null,this.Eo=null,this.To=[0,0],this.Po=[0,0,0,0],void 0!==t.sizes?this.Eo=t.sizes.map((function(t,n){var i=new Qh(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(e){var r=this.getTileRangeForExtentAndZ(e,n);i.minX=Math.max(r.minX,i.minX),i.maxX=Math.min(r.maxX,i.maxX),i.minY=Math.max(r.minY,i.minY),i.maxY=Math.min(r.maxY,i.maxY)}return i}),this):e&&this.Ao(e)}return t.prototype.forEachTileCoord=function(t,n,i){for(var r=this.getTileRangeForExtentAndZ(t,n),e=r.minX,o=r.maxX;e<=o;++e)for(var s=r.minY,u=r.maxY;s<=u;++s)i([n,e,s])},t.prototype.forEachTileCoordParentTileRange=function(t,n,i,r){var e,o,s=null,u=t[0]-1;for(2===this.Ei?(e=t[1],o=t[2]):s=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(n(u,2===this.Ei?Jh(e=Math.floor(e/2),e,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(s,u,i)))return!0;--u}return!1},t.prototype.getExtent=function(){return this.st},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.Mo?this.Mo:this.So[t]},t.prototype.getResolution=function(t){return this.Ti[t]},t.prototype.getResolutions=function(){return this.Ti},t.prototype.getTileCoordChildTileRange=function(t,n,i){if(t[0]<this.maxZoom){if(2===this.Ei){var r=2*t[1],e=2*t[2];return Jh(r,r+1,e,e+1,n)}var o=this.getTileCoordExtent(t,i||this.Po);return this.getTileRangeForExtentAndZ(o,t[0]+1,n)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;var r=t[0],e=t[1],o=t[2];if(n===r)return Jh(e,o,e,o,i);if(this.Ei){var s=Math.pow(this.Ei,n-r),u=Math.floor(e*s),a=Math.floor(o*s);return n<r?Jh(u,u,a,a,i):Jh(u,Math.floor(s*(e+1))-1,a,Math.floor(s*(o+1))-1,i)}var h=this.getTileCoordExtent(t,this.Po);return this.getTileRangeForExtentAndZ(h,n,i)},t.prototype.getTileRangeExtent=function(t,n,i){var r=this.getOrigin(t),e=this.getResolution(t),o=aa(this.getTileSize(t),this.To),s=r[0]+n.minX*o[0]*e,u=r[0]+(n.maxX+1)*o[0]*e;return On(s,r[1]+n.minY*o[1]*e,u,r[1]+(n.maxY+1)*o[1]*e,i)},t.prototype.getTileRangeForExtentAndZ=function(t,n,i){var r=Df;this.Co(t[0],t[3],n,!1,r);var e=r[1],o=r[2];return this.Co(t[2],t[1],n,!0,r),Jh(e,r[1],o,r[2],i)},t.prototype.getTileCoordCenter=function(t){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=aa(this.getTileSize(t[0]),this.To);return[n[0]+(t[1]+.5)*r[0]*i,n[1]-(t[2]+.5)*r[1]*i]},t.prototype.getTileCoordExtent=function(t,n){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),e=aa(this.getTileSize(t[0]),this.To),o=i[0]+t[1]*e[0]*r,s=i[1]-(t[2]+1)*e[1]*r;return On(o,s,o+e[0]*r,s+e[1]*r,n)},t.prototype.getTileCoordForCoordAndResolution=function(t,n,i){return this.ko(t[0],t[1],n,!1,i)},t.prototype.ko=function(t,n,i,r,e){var o=this.getZForResolution(i),s=i/this.getResolution(o),u=this.getOrigin(o),a=aa(this.getTileSize(o),this.To),h=s*(t-u[0])/i/a[0],f=s*(u[1]-n)/i/a[1];return r?(h=wi(h,5)-1,f=wi(f,5)-1):(h=mi(h,5),f=mi(f,5)),Uh(o,h,f,e)},t.prototype.Co=function(t,n,i,r,e){var o=this.getOrigin(i),s=this.getResolution(i),u=aa(this.getTileSize(i),this.To),a=(t-o[0])/s/u[0],h=(o[1]-n)/s/u[1];return r?(a=wi(a,5)-1,h=wi(h,5)-1):(a=mi(a,5),h=mi(h,5)),Uh(i,a,h,e)},t.prototype.getTileCoordForCoordAndZ=function(t,n,i){return this.Co(t[0],t[1],n,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.Ti[t[0]]},t.prototype.getTileSize=function(t){return this.jo?this.jo:this.Oo[t]},t.prototype.getFullTileRange=function(t){return this.Eo?this.Eo[t]:this.st?this.getTileRangeForExtentAndZ(this.st,t):null},t.prototype.getZForResolution=function(t,n){return oi(m(this.Ti,t,n||0),this.minZoom,this.maxZoom)},t.prototype.tileCoordIntersectsViewport=function(t,n){return Fe(n,0,n.length,2,this.getTileCoordExtent(t))},t.prototype.Ao=function(t){for(var n=this.Ti.length,i=new Array(n),r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.Eo=i},t}(),qf=Uf;function Bf(t){var n=t.getDefaultTileGrid();return n||(n=Wf(t),t.setDefaultTileGrid(n)),n}function Xf(t,n,i){var r=n[0],e=t.getTileCoordCenter(n),o=$f(i);if(bn(o,e))return n;var s=$n(o),u=Math.ceil((o[0]-e[0])/s);return e[0]+=s*u,t.getTileCoordForCoordAndZ(e,r)}function Yf(t,n,i,r){var e=void 0!==r?r:"top-left",o=Vf(t,n,i);return new qf({extent:t,origin:qn(t,e),resolutions:o,tileSize:i})}function Zf(t){var n=t||{},i=n.extent||yr("EPSG:3857").getExtent(),r={extent:i,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:Vf(i,n.maxZoom,n.tileSize,n.maxResolution)};return new qf(r)}function Vf(t,n,i,r){for(var e=void 0!==n?n:42,o=Yn(t),s=$n(t),u=aa(void 0!==i?i:Fu),a=r>0?r:Math.max(s/u[0],o/u[1]),h=e+1,f=new Array(h),c=0;c<h;++c)f[c]=a/Math.pow(2,c);return f}function Wf(t,n,i,r){return Yf($f(t),n,i,r)}function $f(t){var n=(t=yr(t)).getExtent();if(!n){var i=180*zt[Rt.DEGREES]/t.getMetersPerUnit();n=On(-i,-i,i,i)}return n}function Kf(t,n){var i=/\{z\}/g,r=/\{x\}/g,e=/\{y\}/g,o=/\{-y\}/g;return function(s,u,a){return s?t.replace(i,s[0].toString()).replace(r,s[1].toString()).replace(e,s[2].toString()).replace(o,(function(){var t=s[0],i=n.getFullTileRange(t);return Et(i,55),(i.getHeight()-s[2]-1).toString()})):void 0}}function Hf(t,n){for(var i=t.length,r=new Array(i),e=0;e<i;++e)r[e]=Kf(t[e],n);return Jf(r)}function Jf(t){return 1===t.length?t[0]:function(n,i,r){if(n){var e=vi(Zh(n),t.length);return t[e](n,i,r)}}}function Qf(t,n,i){}function tc(t){var n=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r=i[1].charCodeAt(0),e=i[2].charCodeAt(0),o=void 0;for(o=r;o<=e;++o)n.push(t.replace(i[0],String.fromCharCode(o)));return n}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),u=parseInt(i[1],10);u<=s;u++)n.push(t.replace(i[0],u.toString()));return n}return n.push(t),n}function nc(t,n){var i=[];Object.keys(n).forEach((function(t){null!==n[t]&&void 0!==n[t]&&i.push(t+"="+encodeURIComponent(n[t]))}));var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var ic,rc=34962,ec=34963,oc=35044,sc=35048,uc=5126,ac=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function hc(t,n){for(var i=P({preserveDrawingBuffer:!0,antialias:!Ut},n),r=ac.length,e=0;e<r;++e)try{var o=t.getContext(ac[e],i);if(o)return o}catch(t){}return null}var fc="http://www.w3.org/2001/XMLSchema-instance";function cc(t,n){return zc().createElementNS(t,n)}function lc(t,n){return vc(t,n,[]).join("")}function vc(t,n,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)vc(r,n,i)}return i}function pc(t){return"documentElement"in t}function dc(t,n,i){return t.getAttributeNS(n,i)||""}function yc(t){return(new DOMParser).parseFromString(t,"application/xml")}function mc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&g(r[r.length-1],e)}}function wc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&r[r.length-1].push(e)}}function gc(t,n){return function(i,r){var e=t.call(void 0!==n?n:this,i,r);void 0!==e&&(r[r.length-1]=e)}}function bc(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);if(void 0!==o){var s=e[e.length-1],u=void 0!==n?n:r.localName,a=void 0;u in s?a=s[u]:(a=[],s[u]=a),a.push(o)}}}function xc(t,n,i){return function(r,e){var o=t.call(void 0!==i?i:this,r,e);void 0!==o&&(e[e.length-1][void 0!==n?n:r.localName]=o)}}function _c(t,n){return function(i,r,e){t.call(void 0!==n?n:this,i,r,e),e[e.length-1].node.appendChild(i)}}function Mc(t,n){var i,r;return function(n,e,o){if(void 0===i){i={};var s={};s[n.localName]=t,i[n.namespaceURI]=s,r=Sc(n.localName)}Ac(i,r,e,o)}}function Sc(t,n){var i=t;return function(t,r,e){var o=r[r.length-1].node,s=i;return void 0===s&&(s=e),cc(void 0!==n?n:o.namespaceURI,s)}}var Oc=Sc();function jc(t,n){for(var i=n.length,r=new Array(i),e=0;e<i;++e)r[e]=t[n[e]];return r}function Ec(t,n,i){var r,e,o=void 0!==i?i:{};for(r=0,e=t.length;r<e;++r)o[t[r]]=n;return o}function Tc(t,n,i,r){var e;for(e=n.firstElementChild;e;e=e.nextElementSibling){var o=t[e.namespaceURI];if(void 0!==o){var s=o[e.localName];void 0!==s&&s.call(r,e,i)}}}function Pc(t,n,i,r,e){return r.push(t),Tc(n,i,r,e),r.pop()}function Ac(t,n,i,r,e,o){for(var s,u,a=(void 0!==e?e:i).length,h=0;h<a;++h)void 0!==(s=i[h])&&void 0!==(u=n.call(void 0!==o?o:this,s,r,void 0!==e?e[h]:void 0))&&t[u.namespaceURI][u.localName].call(o,u,s,r)}function Cc(t,n,i,r,e,o,s){return e.push(t),Ac(n,i,r,e,o,s),e.pop()}var kc=void 0;function Ic(){return void 0===kc&&"undefined"!=typeof XMLSerializer&&(kc=new XMLSerializer),kc}var Nc=void 0;function zc(){return void 0===Nc&&"undefined"!=typeof document&&(Nc=document.implementation.createDocument("","",null)),Nc}var Lc=oc,Rc=function(){function t(t,n){this.array=null,this.type=t,Et(t===rc||t===ec,62),this.usage=void 0!==n?n:Lc}return t.prototype.ofSize=function(t){this.array=new(Fc(this.type))(t)},t.prototype.fromArray=function(t){var n=Fc(this.type);this.array=n.from?n.from(t):new n(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(Fc(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}();function Fc(t){switch(t){case rc:return Float32Array;case ec:return Uint32Array;default:return Float32Array}}var Gc=Rc,Dc="webglcontextlost",Uc="webglcontextrestored",qc=function(){function t(t){this.Io=t.webGlContext;var n=this.Io;this.No=t.scaleRatio||1,this.zo=n.createTexture(),this.Lo=null,this.Ro=n.createFramebuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),n.compileShader(r),this.Fo=n.createProgram(),n.attachShader(this.Fo,i),n.attachShader(this.Fo,r),n.linkProgram(this.Fo),this.Go=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.Go),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.Do=n.getAttribLocation(this.Fo,"a_position"),this.Uo=n.getUniformLocation(this.Fo,"u_screenSize"),this.qo=n.getUniformLocation(this.Fo,"u_opacity"),this.Bo=n.getUniformLocation(this.Fo,"u_image"),this.Xo=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(i){this.Xo.push({value:t.uniforms[i],location:n.getUniformLocation(this.Fo,i)})}.bind(this))}return t.prototype.getGL=function(){return this.Io},t.prototype.init=function(t){var n=this.getGL(),i=[n.drawingBufferWidth*this.No,n.drawingBufferHeight*this.No];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.viewport(0,0,i[0],i[1]),!this.Lo||this.Lo[0]!==i[0]||this.Lo[1]!==i[1]){this.Lo=i;var r=n.RGBA,e=n.RGBA,o=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,this.zo),n.texImage2D(n.TEXTURE_2D,0,r,i[0],i[1],0,e,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.zo,0)}},t.prototype.apply=function(t,n,i,r){var e=this.getGL(),s=t.size;if(e.bindFramebuffer(e.FRAMEBUFFER,n?n.getFrameBuffer():null),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.zo),!n){var u=o(e.canvas);if(!t.renderTargets[u]){var a=e.getContextAttributes();a&&a.preserveDrawingBuffer&&(e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.renderTargets[u]=!0}}e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.bindBuffer(e.ARRAY_BUFFER,this.Go),e.useProgram(this.Fo),e.enableVertexAttribArray(this.Do),e.vertexAttribPointer(this.Do,2,e.FLOAT,!1,0,0),e.uniform2f(this.Uo,s[0],s[1]),e.uniform1i(this.Bo,0);var h=t.layerStatesArray[t.layerIndex].opacity;e.uniform1f(this.qo,h),this.applyUniforms(t),i&&i(e,t),e.drawArrays(e.TRIANGLES,0,6),r&&r(e,t)},t.prototype.getFrameBuffer=function(){return this.Ro},t.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=1;this.Xo.forEach((function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof ImageData)e.texture||(e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,n.width,n.height,0,i.UNSIGNED_BYTE,new Uint8Array(n.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.uniform1i(e.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void i.uniform2f(e.location,n[0],n[1]);case 3:return void i.uniform3f(e.location,n[0],n[1],n[2]);case 4:return void i.uniform4f(e.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(e.location,n)}))},t}(),Bc=qc;function Xc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Yc(t,n){return t[0]=n[0],t[1]=n[1],t[4]=n[2],t[5]=n[3],t[12]=n[4],t[13]=n[5],t}var Zc=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vc="u_projectionMatrix",Wc="u_offsetScaleMatrix",$c="u_offsetRotateMatrix",Kc="u_time",Hc="u_zoom",Jc="u_resolution",Qc="u_sizePx",tl="u_pixelRatio",nl={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:uc},il={};function rl(t){return"shared/"+t}var el=0;var ol=function(t){function n(n){var i,r=t.call(this)||this,e=n||{};r.Yo=r.handleWebGLContextLost.bind(r),r.Zo=r.handleWebGLContextRestored.bind(r),r.Vo=e.canvasCacheKey?rl(e.canvasCacheKey):(i="unique/"+el,el+=1,i),r.Ut=function(t){var n=il[t];if(!n){var i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",n={users:0,canvas:i},il[t]=n}return n.users+=1,n.canvas}(r.Vo),r.Io=hc(r.Ut),r.Wo={},r.$o={},r.Ko=null,r.Ut.addEventListener(Dc,r.Yo),r.Ut.addEventListener(Uc,r.Zo),r.Ho=[1,0,0,1,0,0],r.Jo=[1,0,0,1,0,0],r.Qo=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.ts={},r.ns={},r.Xo=[],e.uniforms&&r.setUniforms(e.uniforms);var o=r.getGL();return r.rs=e.postProcesses?e.postProcesses.map((function(t){return new Bc({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new Bc({webGlContext:o})],r.es=null,r.ve=Date.now(),r}return Zc(n,t),n.prototype.setUniforms=function(t){for(var n in this.Xo=[],t)this.Xo.push({name:n,value:t[n]});this.ts={}},n.prototype.canvasCacheKeyMatches=function(t){return this.Vo===rl(t)},n.prototype.getExtension=function(t){if(t in this.$o)return this.$o[t];var n=this.Io.getExtension(t);return this.$o[t]=n,n},n.prototype.bindBuffer=function(t){var n=this.getGL(),i=o(t),r=this.Wo[i];r||(r={buffer:t,webGlBuffer:n.createBuffer()},this.Wo[i]=r);n.bindBuffer(t.getType(),r.webGlBuffer)},n.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},n.prototype.deleteBuffer=function(t){var n=this.getGL(),i=o(t),r=this.Wo[i];r&&!n.isContextLost()&&n.deleteBuffer(r.webGlBuffer),delete this.Wo[i]},n.prototype.disposeInternal=function(){this.Ut.removeEventListener(Dc,this.Yo),this.Ut.removeEventListener(Uc,this.Zo),function(t){var n=il[t];if(n&&(n.users-=1,!(n.users>0))){var i=hc(n.canvas).getExtension("WEBGL_lose_context");i&&i.loseContext(),delete il[t]}}(this.Vo),delete this.Io,delete this.Ut},n.prototype.prepareDraw=function(t,n){var i=this.getGL(),r=this.getCanvas(),e=t.size,o=t.pixelRatio;r.width=e[0]*o,r.height=e[1]*o,r.style.width=e[0]+"px",r.style.height=e[1]+"px";for(var s=this.rs.length-1;s>=0;s--)this.rs[s].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA)},n.prototype.prepareDrawToRenderTarget=function(t,n,i){var r=this.getGL(),e=n.getSize();r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.viewport(0,0,e[0],e[1]),r.bindTexture(r.TEXTURE_2D,n.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA)},n.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var r=i.UNSIGNED_INT,e=n-t,o=4*t;i.drawElements(i.TRIANGLES,e,r,o)},n.prototype.finalizeDraw=function(t,n,i){for(var r=0,e=this.rs.length;r<e;r++)r===e-1?this.rs[r].apply(t,null,n,i):this.rs[r].apply(t,this.rs[r+1])},n.prototype.getCanvas=function(){return this.Ut},n.prototype.getGL=function(){return this.Io},n.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,r=t.pixelRatio,e=Kt(this.Jo);rn(e,2/n[0],2/n[1]);var o=Kt(this.Ho);0!==i&&nn(o,-i),this.setUniformMatrixValue(Wc,Yc(this.Qo,e)),this.setUniformMatrixValue($c,Yc(this.Qo,o)),this.setUniformFloatValue(Kc,.001*(Date.now()-this.ve)),this.setUniformFloatValue(Hc,t.viewState.zoom),this.setUniformFloatValue(Jc,t.viewState.resolution),this.setUniformFloatValue(tl,r),this.setUniformFloatVec2(Qc,[n[0],n[1]])},n.prototype.applyUniforms=function(t){var n,i=this.getGL(),r=0;this.Xo.forEach(function(e){if((n="function"==typeof e.value?e.value(t):e.value)instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData)e.texture||(e.prevValue=void 0,e.texture=i.createTexture()),i.activeTexture(i["TEXTURE".concat(r)]),i.bindTexture(i.TEXTURE_2D,e.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(!(n instanceof HTMLImageElement)||n.complete)&&e.prevValue!==n&&(e.prevValue=n,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)),i.uniform1i(this.getUniformLocation(e.name),r++);else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(e.name,Yc(this.Qo,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void i.uniform2f(this.getUniformLocation(e.name),n[0],n[1]);case 3:return void i.uniform3f(this.getUniformLocation(e.name),n[0],n[1],n[2]);case 4:return void i.uniform4f(this.getUniformLocation(e.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&i.uniform1f(this.getUniformLocation(e.name),n)}.bind(this))},n.prototype.useProgram=function(t,n){this.getGL().useProgram(t),this.Ko=t,this.ts={},this.ns={},this.applyFrameState(n),this.applyUniforms(n)},n.prototype.compileShader=function(t,n){var i=this.getGL(),r=i.createShader(n);return i.shaderSource(r,t),i.compileShader(r),r},n.prototype.getProgram=function(t,n){var i=this.getGL(),r=this.compileShader(t,i.FRAGMENT_SHADER),e=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,e),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){var s="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(r));throw new Error(s)}if(i.deleteShader(r),!i.getShaderParameter(e,i.COMPILE_STATUS)){s="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(e));throw new Error(s)}if(i.deleteShader(e),!i.getProgramParameter(o,i.LINK_STATUS)){s="GL program linking failed: ".concat(i.getShaderInfoLog(e));throw new Error(s)}return o},n.prototype.getUniformLocation=function(t){return void 0===this.ts[t]&&(this.ts[t]=this.getGL().getUniformLocation(this.Ko,t)),this.ts[t]},n.prototype.getAttributeLocation=function(t){return void 0===this.ns[t]&&(this.ns[t]=this.getGL().getAttribLocation(this.Ko,t)),this.ns[t]},n.prototype.makeProjectionTransform=function(t,n){var i=t.size,r=t.viewState.rotation,e=t.viewState.resolution,o=t.viewState.center;return Kt(n),sn(n,0,0,2/(e*i[0]),2/(e*i[1]),-r,-o[0],-o[1]),n},n.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},n.prototype.setUniformFloatVec2=function(t,n){this.getGL().uniform2fv(this.getUniformLocation(t),n)},n.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n)},n.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},n.prototype.os=function(t,n,i,r,e){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,n,i,!1,r,e))},n.prototype.enableAttributes=function(t){for(var n=sl(t),i=0,r=0;r<t.length;r++){var e=t[r];this.os(e.name,e.size,e.type||uc,n,i),i+=e.size*ul(e.type)}},n.prototype.handleWebGLContextLost=function(){A(this.Wo),this.Ko=null},n.prototype.handleWebGLContextRestored=function(){},n.prototype.createTexture=function(t,n,i){var r=this.getGL(),e=i||r.createTexture(),o=r.RGBA,s=r.RGBA,u=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,e),n?r.texImage2D(r.TEXTURE_2D,0,o,s,u,n):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,s,u,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e},n}(v);function sl(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];n+=r.size*ul(r.type)}return n}function ul(t){switch(t){case nl.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case nl.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case nl.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case nl.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var al=ol,hl=function(){function t(t,n){this.name=t,this.data=n,this.ss=null}return t.prototype.getTexture=function(t){if(!this.ss){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.ss=n}return this.ss},t}(),fl=new Uint8Array(4),cl=function(){function t(t,n){this.us=t;var i=t.getGL();this.ss=i.createTexture(),this.hs=i.createFramebuffer(),this.W=n||[1,1],this.B=new Uint8Array(0),this.fs=!0,this.cs()}return t.prototype.setSize=function(t){x(t,this.W)||(this.W[0]=t[0],this.W[1]=t[1],this.cs())},t.prototype.getSize=function(){return this.W},t.prototype.clearCachedData=function(){this.fs=!0},t.prototype.readAll=function(){if(this.fs){var t=this.W,n=this.us.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.hs),n.readPixels(0,0,t[0],t[1],n.RGBA,n.UNSIGNED_BYTE,this.B),this.fs=!1}return this.B},t.prototype.readPixel=function(t,n){if(t<0||n<0||t>this.W[0]||n>=this.W[1])return fl[0]=0,fl[1]=0,fl[2]=0,fl[3]=0,fl;this.readAll();var i=Math.floor(t)+(this.W[1]-Math.floor(n)-1)*this.W[0];return fl[0]=this.B[4*i],fl[1]=this.B[4*i+1],fl[2]=this.B[4*i+2],fl[3]=this.B[4*i+3],fl},t.prototype.getTexture=function(){return this.ss},t.prototype.getFramebuffer=function(){return this.hs},t.prototype.cs=function(){var t=this.W,n=this.us.getGL();this.ss=this.us.createTexture(t,null,this.ss),n.bindFramebuffer(n.FRAMEBUFFER,this.hs),n.viewport(0,0,t[0],t[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.ss,0),this.B=new Uint8Array(t[0]*t[1]*4)},t}(),ll=!0,vl=function(){function t(t,n,i,r,e,o){this.ls=t,this.vs=n;var s={},u=jr(this.vs,this.ls);this.ps=function(t){var n=t[0]+"/"+t[1];return s[n]||(s[n]=u(t)),s[n]},this.ds=r,this.ys=e*e,this.ws=[],this.gs=!1,this.bs=this.ls.canWrapX()&&!!r&&!!this.ls.getExtent()&&$n(r)==$n(this.ls.getExtent()),this.xs=this.ls.getExtent()?$n(this.ls.getExtent()):null,this._s=this.vs.getExtent()?$n(this.vs.getExtent()):null;var a=Vn(i),h=Wn(i),f=Dn(i),c=Gn(i),l=this.ps(a),v=this.ps(h),p=this.ps(f),d=this.ps(c),y=10+(o?Math.max(0,Math.ceil(ui(Fn(i)/(o*o*256*256)))):0);if(this.Ms(a,h,f,c,l,v,p,d,y),this.gs){var m=1/0;this.ws.forEach((function(t,n,i){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])})),this.ws.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.xs/2){var n=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];n[0][0]-m>this.xs/2&&(n[0][0]-=this.xs),n[1][0]-m>this.xs/2&&(n[1][0]-=this.xs),n[2][0]-m>this.xs/2&&(n[2][0]-=this.xs);var i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.xs/2&&(t.source=n)}}.bind(this))}s={}}return t.prototype.Ss=function(t,n,i,r,e,o){this.ws.push({source:[r,e,o],target:[t,n,i]})},t.prototype.Ms=function(t,n,i,r,e,o,s,u,a){var h=yn([e,o,s,u]),f=this.xs?$n(h)/this.xs:null,c=this.xs,l=this.ls.canWrapX()&&f>.5&&f<1,v=!1;if(a>0){if(this.vs.isGlobal()&&this._s)v=$n(yn([t,n,i,r]))/this._s>.25||v;!l&&this.ls.isGlobal()&&f&&(v=f>.25||v)}if(!(!v&&this.ds&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3]))||Kn(h,this.ds)){var p=0;if(!(v||isFinite(e[0])&&isFinite(e[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(u[0])&&isFinite(u[1])))if(a>0)v=!0;else if(1!=(p=(isFinite(e[0])&&isFinite(e[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=p&&4!=p&&8!=p)return;if(a>0){if(!v){var d=[(t[0]+i[0])/2,(t[1]+i[1])/2],y=this.ps(d),m=void 0;if(l)m=(vi(e[0],c)+vi(s[0],c))/2-vi(y[0],c);else m=(e[0]+s[0])/2-y[0];var w=(e[1]+s[1])/2-y[1];v=m*m+w*w>this.ys}if(v){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var g=[(n[0]+i[0])/2,(n[1]+i[1])/2],b=this.ps(g),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],_=this.ps(x);this.Ms(t,n,g,x,e,o,b,_,a-1),this.Ms(x,g,i,r,_,b,s,u,a-1)}else{var M=[(t[0]+n[0])/2,(t[1]+n[1])/2],S=this.ps(M),O=[(i[0]+r[0])/2,(i[1]+r[1])/2],j=this.ps(O);this.Ms(t,M,O,r,e,S,j,u,a-1),this.Ms(M,n,i,O,S,o,s,j,a-1)}return}}if(l){if(!this.bs)return;this.gs=!0}0==(11&p)&&this.Ss(t,i,r,e,s,u),0==(14&p)&&this.Ss(t,i,n,e,s,o),p&&(0==(13&p)&&this.Ss(n,r,t,o,u,e),0==(7&p)&&this.Ss(n,r,i,o,u,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.ws.forEach((function(n,i,r){var e=n.source;kn(t,e[0]),kn(t,e[1]),kn(t,e[2])})),t},t.prototype.getTriangles=function(){return this.ws},t}(),pl=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dl=function(t){function n(n,i,r,e,o,s,u,a,h,f,c,l){var v=t.call(this,o,lt,{interpolate:!!l})||this;v.Os=void 0!==c&&c,v.kt=u,v.js=a,v.Ut=null,v.Es=i,v.Ts=e,v.Ps=s||o,v.As=[],v.Cs=null,v.ks=0;var p=e.getTileCoordExtent(v.Ps),d=v.Ts.getExtent(),y=v.Es.getExtent(),m=d?Zn(p,d):p;if(0===Fn(m))return v.state=yt,v;var w=n.getExtent();w&&(y=y?Zn(y,w):w);var g=e.getResolution(v.Ps[0]),b=Ff(n,r,m,g);if(!isFinite(b)||b<=0)return v.state=yt,v;var x=void 0!==f?f:.5;if(v.Is=new vl(n,r,m,y,b*x,g),0===v.Is.getTriangles().length)return v.state=yt,v;v.ks=i.getZForResolution(b);var _=v.Is.calculateSourceExtent();if(y&&(n.canWrapX()?(_[1]=oi(_[1],y[1],y[3]),_[3]=oi(_[3],y[1],y[3])):_=Zn(_,y)),Fn(_)){for(var M=i.getTileRangeForExtentAndZ(_,v.ks),S=M.minX;S<=M.maxX;S++)for(var O=M.minY;O<=M.maxY;O++){var j=h(v.ks,S,O,u);j&&v.As.push(j)}0===v.As.length&&(v.state=yt)}else v.state=yt;return v}return pl(n,t),n.prototype.getImage=function(){return this.Ut},n.prototype.Ns=function(){var t=[];if(this.As.forEach(function(n,i,r){n&&n.getState()==pt&&t.push({extent:this.Es.getTileCoordExtent(n.tileCoord),image:n.getImage()})}.bind(this)),this.As.length=0,0===t.length)this.state=dt;else{var n=this.Ps[0],i=this.Ts.getTileSize(n),r="number"==typeof i?i:i[0],e="number"==typeof i?i:i[1],o=this.Ts.getResolution(n),s=this.Es.getResolution(this.ks),u=this.Ts.getTileCoordExtent(this.Ps);this.Ut=Gf(r,e,this.kt,s,this.Es.getExtent(),o,u,this.Is,t,this.js,this.Os,this.interpolate),this.state=pt}this.changed()},n.prototype.load=function(){if(this.state==lt){this.state=vt,this.changed();var t=0;this.Cs=[],this.As.forEach(function(n,i,r){var e=n.getState();if(e==lt||e==vt){t++;var o=$(n,z,(function(i){var r=n.getState();r!=pt&&r!=dt&&r!=yt||(H(o),0===--t&&(this.zs(),this.Ns()))}),this);this.Cs.push(o)}}.bind(this)),0===t?setTimeout(this.Ns.bind(this),0):this.As.forEach((function(t,n,i){t.getState()==lt&&t.load()}))}},n.prototype.zs=function(){this.Cs.forEach(H),this.Cs=null},n.prototype.release=function(){this.Ut&&(Po(this.Ut.getContext("2d")),Nf.push(this.Ut),this.Ut=null),t.prototype.release.call(this)},n}(Mt),yl=dl,ml=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function wl(t,n,i){var r=i?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function gl(t,n,i,r,e,o){var s,u,a=t.getGL();i instanceof Float32Array?(s=a.FLOAT,t.getExtension("OES_texture_float"),u=null!==t.getExtension("OES_texture_float_linear")):(s=a.UNSIGNED_BYTE,u=!0);wl(a,n,o&&u);var h,f=i.byteLength/r[1],c=1;switch(f%8==0?c=8:f%4==0?c=4:f%2==0&&(c=2),e){case 1:h=a.LUMINANCE;break;case 2:h=a.LUMINANCE_ALPHA;break;case 3:h=a.RGB;break;case 4:h=a.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(e))}var l=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,c),a.texImage2D(a.TEXTURE_2D,0,h,r[0],r[1],0,h,s,i),a.pixelStorei(a.UNPACK_ALIGNMENT,l)}var bl=null;var xl=function(t){function n(n){var i=t.call(this)||this;i.tile,i.textures=[],i.cr=i.cr.bind(i),i.Ls=aa(n.grid.getTileSize(n.tile.tileCoord[0])),i.js=n.gutter||0,i.bandCount=NaN,i.us=n.helper;var r=new Gc(rc,oc);return r.fromArray([0,1,1,1,1,0,0,0]),i.us.flushBufferData(r),i.coords=r,i.setTile(n.tile),i}return ml(n,t),n.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(z,this.cr),this.tile=t,this.textures.length=0,this.loaded=t.getState()===pt,this.loaded)this.Rs();else{if(t instanceof Ro){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(z,this.cr)}},n.prototype.Rs=function(){var t=this.us,n=t.getGL(),i=this.tile;if(i instanceof Ro||i instanceof yl){var r=n.createTexture();return this.textures.push(r),this.bandCount=4,void function(t,n,i,r){wl(t,n,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(n,r,i.getImage(),i.interpolate)}var e=i.getSize(),o=[e[0]+2*this.js,e[1]+2*this.js],s=i.getData(),u=s instanceof Float32Array,a=o[0]*o[1],h=u?Float32Array:Uint8Array,f=h.BYTES_PER_ELEMENT,c=s.byteLength/o[1];this.bandCount=Math.floor(c/f/o[0]);var l=Math.ceil(this.bandCount/4);if(1===l){r=n.createTexture();return this.textures.push(r),void gl(t,r,s,o,this.bandCount,i.interpolate)}for(var v=new Array(l),p=0;p<l;++p){r=n.createTexture();this.textures.push(r);var d=p<l-1?4:this.bandCount%4;v[p]=new h(a*d)}for(var y=0,m=0,w=o[0]*this.bandCount,g=0;g<o[1];++g){for(var b=0;b<w;++b){var x=s[m+b],_=Math.floor(y/this.bandCount),M=b%this.bandCount;(S=v[p=Math.floor(M/4)])[_*(d=S.length/a)+M%4]=x,++y}m+=c/f}for(p=0;p<l;++p){var S;gl(t,r=this.textures[p],S=v[p],o,d=S.length/a,i.interpolate)}},n.prototype.cr=function(){this.tile.getState()===pt&&(this.loaded=!0,this.Rs(),this.dispatchEvent(z))},n.prototype.disposeInternal=function(){var t=this.us.getGL();this.us.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(z,this.cr)},n.prototype.getPixelData=function(t,n){if(!this.loaded)return null;var i,r=this.Ls[0],e=this.Ls[1],o=this.js;if(this.tile instanceof jt){var s=this.tile.getSize(),u=s[0],a=s[1],h=u+2*o,f=a+2*o,c=o+Math.floor(u*(t/r)),l=o+Math.floor(a*(n/e)),v=this.tile.getData();if(v instanceof DataView){var p=v.byteLength/(h*f),d=p*(l*h+c),y=v.buffer.slice(d,d+p);return new DataView(y)}var m=this.bandCount*(l*h+c);return v.slice(m,m+this.bandCount)}bl||((i=document.createElement("canvas")).width=1,i.height=1,bl=i.getContext("2d")),bl.clearRect(0,0,1,1);var w,g=this.tile.getImage(),b=g.width-2*o,x=g.height-2*o,_=o+Math.floor(b*(t/r)),M=o+Math.floor(x*(n/e));try{bl.drawImage(g,_,M,1,1,0,0,1,1),w=bl.getImageData(0,0,1,1).data}catch(t){return bl=null,null}return w},n}(N),_l=xl,Ml=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sl=function(t){function n(n){var i=t.call(this)||this;return i.ready=!0,i.Fs=i.Gs.bind(i),i.Ds=n,i.declutterExecutorGroup=null,i}return Ml(n,t),n.prototype.getFeatures=function(t){return r()},n.prototype.getData=function(t){return null},n.prototype.prepareFrame=function(t){return r()},n.prototype.renderFrame=function(t,n){return r()},n.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},n.prototype.createLoadedTileFinder=function(t,n,i){return function(r,e){var o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(n,r,e,o)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){},n.prototype.getDataAtPixel=function(t,n,i){return null},n.prototype.getLayer=function(){return this.Ds},n.prototype.handleFontsChanged=function(){},n.prototype.Gs=function(t){t.target.getState()===bo&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var n=t.getState();return n!=bo&&n!=xo&&t.addEventListener(z,this.Fs),n==wo&&(t.load(),n=t.getState()),n==bo},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()},n.prototype.disposeInternal=function(){delete this.Ds,t.prototype.disposeInternal.call(this)},n}(nt),Ol=Sl,jl=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),El=function(t){function n(n,i){var r=t.call(this,n)||this,e=i||{};return r.Us=[1,0,0,1,0,0],r.qs=null,r.Bs=e.postProcesses,r.Xo=e.uniforms,r.helper,n.addChangeListener(us,r.removeHelper.bind(r)),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(r),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(r),r}return jl(n,t),n.prototype.dispatchPreComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(ls)){var r=new js(ls,void 0,n,t);i.dispatchEvent(r)}},n.prototype.dispatchPostComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(vs)){var r=new js(vs,void 0,n,t);i.dispatchEvent(r)}},n.prototype.reset=function(t){this.Xo=t.uniforms,this.helper&&this.helper.setUniforms(this.Xo)},n.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},n.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var i=!0,r=-1,e=void 0,o=0,s=t.layerStatesArray.length;o<s;o++){var u=t.layerStatesArray[o].layer,a=u.getRenderer();if(a instanceof n){var h=u.getClassName();if((i||h!==e)&&(r+=1,i=!1),e=h,a===this)break}else i=!0}var f="map/"+t.mapId+"/group/"+r;this.helper&&this.helper.canvasCacheKeyMatches(f)||(this.removeHelper(),this.helper=new al({postProcesses:this.Bs,uniforms:this.Xo,canvasCacheKey:f}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)},n.prototype.afterHelperCreated=function(){},n.prototype.prepareFrameInternal=function(t){return!0},n.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},n.prototype.Xs=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){sn(this.Us,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var e=new js(t,this.Us,i,n);r.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.Xs(fs,t,n)},n.prototype.postRender=function(t,n){this.Xs(cs,t,n)},n.prototype.getDataAtPixel=function(t,n,i){var r=tn([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),e=this.helper.getGL();if(!e)return null;var o=this.getLayer().getExtent();if(o&&!bn(o,tn(n.pixelToCoordinateTransform,t.slice())))return null;var s=e.getContextAttributes();if(!s||!s.preserveDrawingBuffer)return new Uint8Array;var u,a=Math.round(r[0]),h=Math.round(r[1]),f=this.qs;if(!f){var c=document.createElement("canvas");c.width=1,c.height=1,f=c.getContext("2d"),this.qs=f}f.clearRect(0,0,1,1);try{f.drawImage(e.canvas,a,h,1,1,0,0,1,1),u=f.getImageData(0,0,1,1).data}catch(t){return u}return 0===u[3]?null:u},n}(Ol),Tl=El,Pl=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Al={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},Cl={TEXTURE_COORD:"a_textureCoord"},kl=[{name:Cl.TEXTURE_COORD,size:2,type:nl.FLOAT}],Il={};function Nl(t){return 2*(1-1/(t+1))-1}function zl(t,n,i){i in t||(t[i]=[]),t[i].push(n)}function Ll(t,n){var i=t.layerStatesArray[t.layerIndex];i.extent&&(n=Zn(n,zr(i.extent,t.viewState.projection)));var r=i.layer.getRenderSource();if(!r.getWrapX()){var e=r.getTileGridForProjection(t.viewState.projection).getExtent();e&&(n=Zn(n,e))}return n}function Rl(t,n){return"".concat(t.getKey(),",").concat(Bh(n))}var Fl=function(t){function n(n,i){var r=t.call(this,n,{uniforms:i.uniforms})||this;r.renderComplete=!1,r.Ys=[1,0,0,1,0,0],r.Zs=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.Vs=new Qh(0,0,0,0),r.Ws=Uh(0,0,0),r.$s=[0,0],r.Ks,r.Hs=i.vertexShader,r.Js=i.fragmentShader,r.Qs=new Gc(ec,oc),r.Qs.fromArray([0,1,3,1,2,3]);var e=void 0!==i.cacheSize?i.cacheSize:512;return r.tu=new Dh(e),r.nu=i.paletteTextures||[],r.Wi=null,r}return Pl(n,t),n.prototype.reset=function(n){t.prototype.reset.call(this,{uniforms:n.uniforms}),this.Hs=n.vertexShader,this.Js=n.fragmentShader,this.nu=n.paletteTextures||[],this.helper&&(this.Ks=this.helper.getProgram(this.Js,this.Hs))},n.prototype.afterHelperCreated=function(){this.Ks=this.helper.getProgram(this.Js,this.Hs),this.helper.flushBufferData(this.Qs)},n.prototype.iu=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==pt||i==yt||i==dt&&!r},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer().getRenderSource();return!!n&&(!Hn(Ll(t,t.extent))&&"ready"===n.getState())},n.prototype.enqueueTiles=function(t,n,i,r){var e=t.viewState,s=this.getLayer(),u=s.getRenderSource(),a=u.getTileGridForProjection(e.projection),h=u.getGutterForProjection(e.projection),f=o(u);f in t.wantedTiles||(t.wantedTiles[f]={});for(var c=t.wantedTiles[f],l=this.tu,v=Math.max(i-s.getPreload(),a.getMinZoom(),s.getMinZoom()),p=i;p>=v;--p)for(var d=a.getTileRangeForExtentAndZ(n,p,this.Vs),y=a.getResolution(p),m=d.minX;m<=d.maxX;++m)for(var w=d.minY;w<=d.maxY;++w){var g=Uh(p,m,w,this.Ws),b=Rl(u,g),x=void 0,_=void 0;if(l.containsKey(b)&&(_=(x=l.get(b)).tile),!x||x.tile.key!==u.getKey())if(_=u.getTile(p,m,w,t.pixelRatio,e.projection),x)if(this.iu(_))x.setTile(_);else{var M=_.getInterimTile();x.setTile(M)}else x=new _l({tile:_,grid:a,helper:this.helper,gutter:h}),l.set(b,x);zl(r,x,p);var S=_.getKey();c[S]=!0,_.getState()===lt&&(t.tileQueue.isKeyQueued(S)||t.tileQueue.enqueue([_,f,a.getTileCoordCenter(g),y]))}},n.prototype.renderFrame=function(t){this.Wi=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState,r=this.getLayer().getRenderSource(),e=r.getTileGridForProjection(i.projection),s=r.getGutterForProjection(i.projection),u=Ll(t,t.extent),a=e.getZForResolution(i.resolution,r.zDirection),h={};if(t.nextExtent){var f=e.getZForResolution(i.nextResolution,r.zDirection),c=Ll(t,t.nextExtent);this.enqueueTiles(t,c,f,h)}this.enqueueTiles(t,u,a,h);for(var l={},v=o(this),p=t.time,y=!1,m=h[a],w=0,g=m.length;w<g;++w){var b=(D=(tt=m[w]).tile).tileCoord;if(tt.loaded){if(1===(U=D.getAlpha(v,p))){D.endTransition(v);continue}y=!0,l[q=Bh(b)]=U}if(this.renderComplete=!1,!this.ru(e,b,a+1,h))for(var x=e.getMinZoom(),_=a-1;_>=x;--_){if(this.ru(e,b,_,h))break}}this.helper.useProgram(this.Ks,t),this.helper.prepareDraw(t,!y);for(var M=Object.keys(h).map(Number).sort(d),S=i.center[0],O=i.center[1],j=0,E=M.length;j<E;++j){var T=M[j],P=e.getResolution(T),A=aa(e.getTileSize(T),this.$s),C=e.getOrigin(T),k=A[0]+2*s,I=A[1]+2*s,N=k/I,z=(S-C[0])/(A[0]*P),L=(C[1]-O)/(A[1]*P),R=i.resolution/P,F=Nl(T),G=h[T];for(w=0,g=G.length;w<g;++w){if((tt=G[w]).loaded){var D,U,q=Bh(b=(D=tt.tile).tileCoord),B=b[1],X=b[2];Kt(this.Ys),rn(this.Ys,2/(t.size[0]*R/k),-2/(t.size[1]*R/k)),nn(this.Ys,i.rotation),rn(this.Ys,1,1/N),on(this.Ys,(A[0]*(B-z)-s)/k,(A[1]*(X-L)-s)/I),this.helper.setUniformMatrixValue(Al.TILE_TRANSFORM,Yc(this.Zs,this.Ys)),this.helper.bindBuffer(tt.coords),this.helper.bindBuffer(this.Qs),this.helper.enableAttributes(kl);for(var Y=0;Y<tt.textures.length;){var Z="TEXTURE"+Y,V="".concat(Al.TILE_TEXTURE_ARRAY,"[").concat(Y,"]");n.activeTexture(n[Z]),n.bindTexture(n.TEXTURE_2D,tt.textures[Y]),n.uniform1i(this.helper.getUniformLocation(V),Y),++Y}for(var W=0;W<this.nu.length;++W){var $=this.nu[W];n.activeTexture(n["TEXTURE"+Y]);var K=$.getTexture(n);n.bindTexture(n.TEXTURE_2D,K),n.uniform1i(this.helper.getUniformLocation($.name),Y),++Y}(U=q in l?l[q]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(Al.TRANSITION_ALPHA,U),this.helper.setUniformFloatValue(Al.DEPTH,F),this.helper.setUniformFloatValue(Al.TEXTURE_PIXEL_WIDTH,k),this.helper.setUniformFloatValue(Al.TEXTURE_PIXEL_HEIGHT,I),this.helper.setUniformFloatValue(Al.TEXTURE_RESOLUTION,P),this.helper.setUniformFloatValue(Al.TEXTURE_ORIGIN_X,C[0]+B*A[0]*P-s*P),this.helper.setUniformFloatValue(Al.TEXTURE_ORIGIN_Y,C[1]-X*A[1]*P+s*P);var H=u;s>0&&Zn(H=e.getTileCoordExtent(b),u,H),this.helper.setUniformFloatVec4(Al.RENDER_EXTENT,H),this.helper.setUniformFloatValue(Al.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Al.ZOOM,i.zoom),this.helper.drawElements(0,this.Qs.getSize())}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var J=this.helper.getCanvas(),Q=this.tu;Q.canExpireCache();){var tt;(tt=Q.pop()).dispose()}return t.postRenderFunctions.push((function(t,n){r.expireCache(n.viewState.projection,Il)})),this.postRender(n,t),J},n.prototype.getData=function(t){if(!this.helper.getGL())return null;var n=this.Wi;if(!n)return null;var i=this.getLayer(),r=tn(n.pixelToCoordinateTransform,t.slice()),e=n.viewState,o=i.getExtent();if(o&&!bn(zr(o,e.projection),r))return null;var s,u,a,h=i.getSources(yn([r]),e.resolution);for(s=h.length-1;s>=0;--s)if("ready"===(u=h[s]).getState()){if(a=u.getTileGridForProjection(e.projection),u.getWrapX())break;var f=a.getExtent();if(!f||bn(f,r))break}if(s<0)return null;for(var c=this.tu,l=a.getZForResolution(e.resolution);l>=a.getMinZoom();--l){var v=a.getTileCoordForCoordAndZ(r,l),p=Rl(u,v);if(c.containsKey(p)){var d=c.get(p);if(d.loaded){var y=a.getOrigin(l),m=aa(a.getTileSize(l)),w=a.getResolution(l),g=(r[0]-y[0])/w-v[1]*m[0],b=(y[1]-r[1])/w-v[2]*m[1];return d.getPixelData(g,b)}}}return null},n.prototype.ru=function(t,n,i,r){var e=t.getTileRangeForTileCoordAndZ(n,i,this.Vs);if(!e)return!1;for(var o=!0,s=this.tu,u=this.getLayer().getRenderSource(),a=e.minX;a<=e.maxX;++a)for(var h=e.minY;h<=e.maxY;++h){var f=Rl(u,[i,a,h]),c=!1;if(s.containsKey(f)){var l=s.get(f);l.loaded&&(zl(r,l,i),c=!0)}c||(o=!1)}return o},n.prototype.removeHelper=function(){if(this.helper){var n=this.tu;n.forEach((function(t){return t.dispose()})),n.clear()}t.prototype.removeHelper.call(this)},n.prototype.disposeInternal=function(){var n=this.helper;n&&(n.getGL().deleteProgram(this.Ks),delete this.Ks,n.deleteBuffer(this.Qs));t.prototype.disposeInternal.call(this),delete this.Qs,delete this.tu,delete this.Wi},n}(Tl),Gl=Fl,Dl=1,Ul=2,ql=4,Bl=8,Xl=16,Yl=31,Zl=0,Vl={};function Wl(t){if("number"==typeof t)return Dl;if("boolean"==typeof t)return Bl;if("string"==typeof t)return Vo(t)?ql|Ul:Ul;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var n=t;if(n.every((function(t){return"number"==typeof t})))return 3===n.length||4===n.length?ql|Xl:Xl;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(n)));var i=Vl[n[0]];if(void 0===i)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return i.getReturnType(n.slice(1))}function $l(t){return ui(t)%1==0}function Kl(t){var n=t.toString();return-1===n.indexOf(".")?n+".0":n}function Hl(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(Kl).join(", "),")")}function Jl(t){var n=Xo(t).slice();return n.length<4&&n.push(1),Hl(n.map((function(t,n){return n<3?t/255:t})))}function Ql(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function tv(t,n){return Kl(Ql(t,n))}function nv(t,n,i){if(Array.isArray(n)&&"string"==typeof n[0]){var r=Vl[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return r.toGlsl(t,n.slice(1),i)}var e=Wl(n);if((e&Dl)>0)return Kl(n);if((e&Bl)>0)return n.toString();if((e&Ul)>0&&(void 0===i||i==Ul))return tv(t,n.toString());if((e&ql)>0&&(void 0===i||i==ql))return Jl(n);if((e&Xl)>0)return Hl(n);throw new Error("Unexpected expression ".concat(n," (expected type ").concat(i,")"))}function iv(t){if(!(Wl(t)&Dl))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function rv(t){for(var n=0;n<t.length;n++)iv(t[n])}function ev(t){if(!(Wl(t)&Ul))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function ov(t){if(!(Wl(t)&Bl))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function sv(t,n){if(t.length!==n)throw new Error("Exactly ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function uv(t,n){if(t.length<n)throw new Error("At least ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function av(t,n){if(t.length>n)throw new Error("At most ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function hv(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function fv(t,n){if(!$l(n))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}function cv(t){return"u_var_"+t}Vl.get={getReturnType:function(t){return Yl},toGlsl:function(t,n){sv(n,1),ev(n[0]);var i=n[0].toString();return-1===t.attributes.indexOf(i)&&t.attributes.push(i),(t.inFragmentShader?"v_":"a_")+i}},Vl.var={getReturnType:function(t){return Yl},toGlsl:function(t,n){sv(n,1),ev(n[0]);var i=n[0].toString();return-1===t.variables.indexOf(i)&&t.variables.push(i),cv(i)}};var lv="u_paletteTextures";Vl.palette={getReturnType:function(t){return ql},toGlsl:function(t,n){sv(n,2),iv(n[0]);var i=nv(t,n[0]),r=n[1];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");for(var e=r.length,o=new Uint8Array(4*e),s=0;s<e;s++){var u=r[s],a=void 0;if("string"==typeof u)a=Bo(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var h=u.length;if(4===h)a=u;else{if(3!==h)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(h));a=[u[0],u[1],u[2],1]}}var f=4*s;o[f]=a[0],o[f+1]=a[1],o[f+2]=a[2],o[f+3]=255*a[3]}t.paletteTextures||(t.paletteTextures=[]);var c="".concat(lv,"[").concat(t.paletteTextures.length,"]"),l=new hl(c,o);return t.paletteTextures.push(l),"texture2D(".concat(c,", vec2((").concat(i," + 0.5) / ").concat(e,".0, 0.5))")}};var vv="getBandValue";function pv(t){return{getReturnType:function(t){return Bl},toGlsl:function(n,i){sv(i,2);for(var r=Yl,e=0;e<i.length;e++)r&=Wl(i[e]);if(r===Zl)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(i)," instead"));return r&=~ql,"(".concat(nv(n,i[0],r)," ").concat(t," ").concat(nv(n,i[1],r),")")}}}function dv(t){return{getReturnType:function(t){return Bl},toGlsl:function(n,i){uv(i,2);for(var r=0;r<i.length;r++)ov(i[r]);var e="";return e=i.map((function(t){return nv(n,t)})).join(" ".concat(t," ")),e="(".concat(e,")")}}}Vl.band={getReturnType:function(t){return Dl},toGlsl:function(t,n){uv(n,1),av(n,3);var i=n[0];if(!(vv in t.functions)){for(var r="",e=t.bandCount||1,o=0;o<e;o++){var s=Math.floor(o/4),u=o%4;u===e-1&&1===u&&(u=3);var a="".concat(Al.TILE_TEXTURE_ARRAY,"[").concat(s,"]");r+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(a,", v_textureCoord + vec2(dx, dy))[").concat(u,"];\n          }\n        ")}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(Al.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(Al.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(r,"\n        }\n      ")}var h=nv(t,i),f=nv(t,n[1]||0),c=nv(t,n[2]||0);return"".concat(vv,"(").concat(h,", ").concat(f,", ").concat(c,")")}},Vl.time={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,0),"u_time"}},Vl.zoom={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,0),"u_zoom"}},Vl.resolution={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,0),"u_resolution"}},Vl["*"]={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,2),rv(n),"(".concat(nv(t,n[0])," * ").concat(nv(t,n[1]),")")}},Vl["/"]={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,2),rv(n),"(".concat(nv(t,n[0])," / ").concat(nv(t,n[1]),")")}},Vl["+"]={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,2),rv(n),"(".concat(nv(t,n[0])," + ").concat(nv(t,n[1]),")")}},Vl["-"]={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,2),rv(n),"(".concat(nv(t,n[0])," - ").concat(nv(t,n[1]),")")}},Vl.clamp={getReturnType:function(t){return Dl},toGlsl:function(t,n){sv(n,3),rv(n);var i=nv(t,n[1]),r=nv(t,n[2]);return"clamp(".concat(nv(t,n[0]),", ").concat(i,", ").concat(r,")")}},Vl["%"]={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,2),rv(n),"mod(".concat(nv(t,n[0]),", ").concat(nv(t,n[1]),")")}},Vl["^"]={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,2),rv(n),"pow(".concat(nv(t,n[0]),", ").concat(nv(t,n[1]),")")}},Vl.abs={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,1),rv(n),"abs(".concat(nv(t,n[0]),")")}},Vl.floor={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,1),rv(n),"floor(".concat(nv(t,n[0]),")")}},Vl.round={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,1),rv(n),"floor(".concat(nv(t,n[0])," + 0.5)")}},Vl.ceil={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,1),rv(n),"ceil(".concat(nv(t,n[0]),")")}},Vl.sin={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,1),rv(n),"sin(".concat(nv(t,n[0]),")")}},Vl.cos={getReturnType:function(t){return Dl},toGlsl:function(t,n){return sv(n,1),rv(n),"cos(".concat(nv(t,n[0]),")")}},Vl.atan={getReturnType:function(t){return Dl},toGlsl:function(t,n){return uv(n,1),av(n,2),rv(n),2===n.length?"atan(".concat(nv(t,n[0]),", ").concat(nv(t,n[1]),")"):"atan(".concat(nv(t,n[0]),")")}},Vl[">"]={getReturnType:function(t){return Bl},toGlsl:function(t,n){return sv(n,2),rv(n),"(".concat(nv(t,n[0])," > ").concat(nv(t,n[1]),")")}},Vl[">="]={getReturnType:function(t){return Bl},toGlsl:function(t,n){return sv(n,2),rv(n),"(".concat(nv(t,n[0])," >= ").concat(nv(t,n[1]),")")}},Vl["<"]={getReturnType:function(t){return Bl},toGlsl:function(t,n){return sv(n,2),rv(n),"(".concat(nv(t,n[0])," < ").concat(nv(t,n[1]),")")}},Vl["<="]={getReturnType:function(t){return Bl},toGlsl:function(t,n){return sv(n,2),rv(n),"(".concat(nv(t,n[0])," <= ").concat(nv(t,n[1]),")")}},Vl["=="]=pv("=="),Vl["!="]=pv("!="),Vl["!"]={getReturnType:function(t){return Bl},toGlsl:function(t,n){return sv(n,1),ov(n[0]),"(!".concat(nv(t,n[0]),")")}},Vl.all=dv("&&"),Vl.any=dv("||"),Vl.between={getReturnType:function(t){return Bl},toGlsl:function(t,n){sv(n,3),rv(n);var i=nv(t,n[1]),r=nv(t,n[2]),e=nv(t,n[0]);return"(".concat(e," >= ").concat(i," && ").concat(e," <= ").concat(r,")")}},Vl.array={getReturnType:function(t){return Xl},toGlsl:function(t,n){uv(n,2),av(n,4),rv(n);var i=n.map((function(n){return nv(t,n,Dl)}));return"vec".concat(n.length,"(").concat(i.join(", "),")")}},Vl.color={getReturnType:function(t){return ql},toGlsl:function(t,n){uv(n,3),av(n,4),rv(n);var i=n;3===n.length&&i.push(1);var r=n.map((function(n,i){return nv(t,n,Dl)+(i<3?" / 255.0":"")}));return"vec".concat(n.length,"(").concat(r.join(", "),")")}},Vl.interpolate={getReturnType:function(t){for(var n=ql|Dl,i=3;i<t.length;i+=2)n&=Wl(t[i]);return n},toGlsl:function(t,n,i){hv(n),uv(n,6);var r,e=n[0];switch(e[0]){case"linear":r=1;break;case"exponential":r=e[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(e)));var o=void 0!==i?i:Yl,s=Vl.interpolate.getReturnType(n)&o;fv(n,s);for(var u=nv(t,n[1]),a=Kl(r),h="",f=2;f<n.length-2;f+=2){var c=nv(t,n[f]),l=h||nv(t,n[f+1],s),v=nv(t,n[f+2]),p=nv(t,n[f+3],s);h="mix(".concat(l,", ").concat(p,", pow(clamp((").concat(u," - ").concat(c,") / (").concat(v," - ").concat(c,"), 0.0, 1.0), ").concat(a,"))")}return h}},Vl.match={getReturnType:function(t){for(var n=Yl,i=2;i<t.length;i+=2)n&=Wl(t[i]);return n&=Wl(t[t.length-1])},toGlsl:function(t,n,i){hv(n),uv(n,4);var r=void 0!==i?i:Yl,e=Vl.match.getReturnType(n)&r;fv(n,e);for(var o=nv(t,n[0]),s=nv(t,n[n.length-1],e),u=null,a=n.length-3;a>=1;a-=2){var h=nv(t,n[a]),f=nv(t,n[a+1],e);u="(".concat(o," == ").concat(h," ? ").concat(f," : ").concat(u||s,")")}return u}},Vl.case={getReturnType:function(t){for(var n=Yl,i=1;i<t.length;i+=2)n&=Wl(t[i]);return n&=Wl(t[t.length-1])},toGlsl:function(t,n,i){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}(n),uv(n,3);var r=void 0!==i?i:Yl,e=Vl.case.getReturnType(n)&r;fv(n,e);for(var o=0;o<n.length-1;o+=2)ov(n[o]);var s=nv(t,n[n.length-1],e),u=null;for(o=n.length-3;o>=0;o-=2){var a=nv(t,n[o]),h=nv(t,n[o+1],e);u="(".concat(a," ? ").concat(h," : ").concat(u||s,")")}return u}};var yv=function(){function t(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return t.prototype.addUniform=function(t){return this.uniforms.push(t),this},t.prototype.addAttribute=function(t){return this.attributes.push(t),this},t.prototype.addVarying=function(t,n,i){return this.varyings.push({name:t,type:n,expression:i}),this},t.prototype.setSizeExpression=function(t){return this.sizeExpression=t,this},t.prototype.setRotationExpression=function(t){return this.rotationExpression=t,this},t.prototype.setSymbolOffsetExpression=function(t){return this.offsetExpression=t,this},t.prototype.setColorExpression=function(t){return this.colorExpression=t,this},t.prototype.setTextureCoordinateExpression=function(t){return this.texCoordExpression=t,this},t.prototype.setFragmentDiscardExpression=function(t){return this.discardExpression=t,this},t.prototype.setSymbolRotateWithView=function(t){return this.rotateWithView=t,this},t.prototype.getSizeExpression=function(){return this.sizeExpression},t.prototype.getOffsetExpression=function(){return this.offsetExpression},t.prototype.getColorExpression=function(){return this.colorExpression},t.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},t.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},t.prototype.getSymbolVertexShader=function(t){var n=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",i=this.attributes,r=this.varyings;return t&&(i=i.concat("vec4 a_hitColor"),r=r.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\n").concat(i.map((function(t){return"attribute "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(r.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  mat4 offsetMatrix = ").concat(n,";\n  vec2 halfSize = ").concat(this.sizeExpression," * 0.5;\n  vec2 offset = ").concat(this.offsetExpression,";\n  float angle = ").concat(this.rotationExpression,";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ").concat(this.texCoordExpression,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n").concat(r.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n"),"\n}")},t.prototype.getSymbolFragmentShader=function(t){var n=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",i=this.varyings;return t&&(i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(i.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  if (").concat(this.discardExpression,") { discard; }\n  gl_FragColor = ").concat(this.colorExpression,";\n  gl_FragColor.rgb *= gl_FragColor.a;\n").concat(n,"\n}")},t}();function mv(t){var n=t.symbol,i=void 0!==n.size?n.size:1,r=n.color||"white",e=n.textureCoord||[0,0,1,1],o=n.offset||[0,0],s=void 0!==n.opacity?n.opacity:1,u=void 0!==n.rotation?n.rotation:0,a={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{}},h=nv(a,i,Xl|Dl),f=nv(a,o,Xl),c=nv(a,e,Xl),l=nv(a,u,Dl),v={inFragmentShader:!0,variables:a.variables,attributes:[],stringLiteralsMap:a.stringLiteralsMap,functions:{}},p=nv(v,r,ql),d=nv(v,s,Dl),y="1.0",m="vec2(".concat(nv(v,i,Xl|Dl),").x");switch(n.symbolType){case"square":case"image":break;case"circle":y="(1.0-smoothstep(1.-4./".concat(m,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");break;case"triangle":var w="(v_quadCoord*2.-1.)",g="(atan(".concat(w,".x,").concat(w,".y))");y="(1.0-smoothstep(.5-3./".concat(m,",.5,cos(floor(.5+").concat(g,"/2.094395102)*2.094395102-").concat(g,")*length(").concat(w,")))");break;default:throw new Error("Unexpected symbol type: "+n.symbolType)}var b=(new yv).setSizeExpression("vec2(".concat(h,")")).setRotationExpression(l).setSymbolOffsetExpression(f).setTextureCoordinateExpression(c).setSymbolRotateWithView(!!n.rotateWithView).setColorExpression("vec4(".concat(p,".rgb, ").concat(p,".a * ").concat(d," * ").concat(y,")"));if(t.filter){var x=nv(v,t.filter,Bl);b.setFragmentDiscardExpression("!".concat(x))}var _={};if(v.variables.forEach((function(n){var i=cv(n);b.addUniform("float ".concat(i)),_[i]=function(){if(!t.variables||void 0===t.variables[n])throw new Error("The following variable is missing from the style: ".concat(n));var i=t.variables[n];return"string"==typeof i&&(i=Ql(a,i)),void 0!==i?i:-9999999}})),"image"===n.symbolType&&n.src){var M=new Image;M.crossOrigin=void 0===n.crossOrigin?"anonymous":n.crossOrigin,M.src=n.src,b.addUniform("sampler2D u_texture").setColorExpression(b.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),_.u_texture=M}return v.attributes.forEach((function(t){-1===a.attributes.indexOf(t)&&a.attributes.push(t),b.addVarying("v_".concat(t),"float","a_".concat(t))})),a.attributes.forEach((function(t){b.addAttribute("float a_".concat(t))})),{builder:b,attributes:a.attributes.map((function(t){return{name:t,callback:function(n,i){var r=i[t];return"string"==typeof r&&(r=Ql(a,r)),void 0!==r?r:-9999999}}})),uniforms:_}}var wv=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gv=function(t){function n(n){var i=t.call(this,{extent:n.extent,origin:n.origin,origins:n.origins,resolutions:n.resolutions,tileSize:n.tileSize,tileSizes:n.tileSizes,sizes:n.sizes})||this;return i.eu=n.matrixIds,i}return wv(n,t),n.prototype.getMatrixId=function(t){return this.eu[t]},n.prototype.getMatrixIds=function(){return this.eu},n}(qf),bv=gv;function xv(t,n,i){var r=[],e=[],o=[],s=[],u=[],a=void 0!==i?i:[],h=yr(t.SupportedCRS),f=h.getMetersPerUnit(),c="ne"==h.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,n){return n.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(n){if(!(a.length>0)||b(a,(function(i){return n.Identifier==i.TileMatrix||-1===n.Identifier.indexOf(":")&&t.Identifier+":"+n.Identifier===i.TileMatrix}))){e.push(n.Identifier);var i=28e-5*n.ScaleDenominator/f,h=n.TileWidth,l=n.TileHeight;c?o.push([n.TopLeftCorner[1],n.TopLeftCorner[0]]):o.push(n.TopLeftCorner),r.push(i),s.push(h==l?h:[h,l]),u.push([n.MatrixWidth,n.MatrixHeight])}})),new gv({extent:n,origins:o,resolutions:r,matrixIds:e,tileSizes:s,sizes:u})}var _v=function(){function t(t){this.ou=t.opacity,this.su=t.rotateWithView,this.Dr=t.rotation,this.uu=t.scale,this.au=aa(t.scale),this.hu=t.displacement,this.fu=t.declutterMode}return t.prototype.clone=function(){var n=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getOpacity=function(){return this.ou},t.prototype.getRotateWithView=function(){return this.su},t.prototype.getRotation=function(){return this.Dr},t.prototype.getScale=function(){return this.uu},t.prototype.getScaleArray=function(){return this.au},t.prototype.getDisplacement=function(){return this.hu},t.prototype.getDeclutterMode=function(){return this.fu},t.prototype.getAnchor=function(){return r()},t.prototype.getImage=function(t){return r()},t.prototype.getHitDetectionImage=function(){return r()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return r()},t.prototype.getImageSize=function(){return r()},t.prototype.getOrigin=function(){return r()},t.prototype.getSize=function(){return r()},t.prototype.setDisplacement=function(t){this.hu=t},t.prototype.setOpacity=function(t){this.ou=t},t.prototype.setRotateWithView=function(t){this.su=t},t.prototype.setRotation=function(t){this.Dr=t},t.prototype.setScale=function(t){this.uu=t,this.au=aa(t)},t.prototype.listenImageChange=function(t){r()},t.prototype.load=function(){r()},t.prototype.unlistenImageChange=function(t){r()},t}(),Mv=_v,Sv=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ov=function(t){function n(n){var i=this,r=void 0!==n.rotateWithView&&n.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==n.rotation?n.rotation:0,scale:void 0!==n.scale?n.scale:1,displacement:void 0!==n.displacement?n.displacement:[0,0],declutterMode:n.declutterMode})||this).Ut=void 0,i.cu=null,i.lu=void 0!==n.fill?n.fill:null,i.Mo=[0,0],i.Wt=n.points,i.vu=void 0!==n.radius?n.radius:n.radius1,i.pu=n.radius2,i.$t=void 0!==n.angle?n.angle:0,i.du=void 0!==n.stroke?n.stroke:null,i.W=null,i.yu=null,i.render(),i}return Sv(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i},n.prototype.getAnchor=function(){var t=this.W;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},n.prototype.getAngle=function(){return this.$t},n.prototype.getFill=function(){return this.lu},n.prototype.setFill=function(t){this.lu=t,this.render()},n.prototype.getHitDetectionImage=function(){return this.cu||this.mu(this.yu),this.cu},n.prototype.getImage=function(t){var n=this.Ut[t];if(!n){var i=this.yu,r=To(i.size*t,i.size*t);this.wu(i,r,t),n=r.canvas,this.Ut[t]=n}return n},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.W},n.prototype.getImageState=function(){return bo},n.prototype.getOrigin=function(){return this.Mo},n.prototype.getPoints=function(){return this.Wt},n.prototype.getRadius=function(){return this.vu},n.prototype.getRadius2=function(){return this.pu},n.prototype.getSize=function(){return this.W},n.prototype.getStroke=function(){return this.du},n.prototype.setStroke=function(t){this.du=t,this.render()},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.gu=function(t,n,i){if(0===n||this.Wt===1/0||"bevel"!==t&&"miter"!==t)return n;var r=this.vu,e=void 0===this.pu?r:this.pu;if(r<e){var o=r;r=e,e=o}var s=void 0===this.pu?this.Wt:2*this.Wt,u=2*Math.PI/s,a=e*Math.sin(u),h=r-Math.sqrt(e*e-a*a),f=Math.sqrt(a*a+h*h),c=f/a;if("miter"===t&&c<=i)return c*n;var l=n/2/c,v=n/2*(h/f),p=Math.sqrt((r+l)*(r+l)+v*v)-r;if(void 0===this.pu||"bevel"===t)return 2*p;var d=r*Math.sin(u),y=e-Math.sqrt(r*r-d*d),m=Math.sqrt(d*d+y*y)/d;if(m<=i){var w=m*n/2-e-r;return 2*Math.max(p,w)}return 2*p},n.prototype.createRenderOptions=function(){var t,n=Ds,i=0,r=null,e=0,o=0;this.du&&(null===(t=this.du.getColor())&&(t=qs),t=af(t),void 0===(o=this.du.getWidth())&&(o=1),r=this.du.getLineDash(),e=this.du.getLineDashOffset(),void 0===(n=this.du.getLineJoin())&&(n=Ds),void 0===(i=this.du.getMiterLimit())&&(i=Us));var s=this.gu(n,o,i),u=Math.max(this.vu,this.pu||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*u+s),lineDash:r,lineDashOffset:e,lineJoin:n,miterLimit:i}},n.prototype.render=function(){this.yu=this.createRenderOptions();var t=this.yu.size;this.Ut={},this.W=[t,t]},n.prototype.wu=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.bu(n),this.lu){var r=this.lu.getColor();null===r&&(r=Rs),n.fillStyle=af(r),n.fill()}this.du&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n.prototype.mu=function(t){if(this.lu){var n=this.lu.getColor(),i=0;if("string"==typeof n&&(n=Xo(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i){var r=To(t.size,t.size);this.cu=r.canvas,this.xu(t,r)}}this.cu||(this.cu=this.getImage(1))},n.prototype.bu=function(t){var n=this.Wt,i=this.vu;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.pu?i:this.pu;void 0!==this.pu&&(n*=2);for(var e=this.$t-Math.PI/2,o=2*Math.PI/n,s=0;s<n;s++){var u=e+s*o,a=s%2==0?i:r;t.lineTo(a*Math.cos(u),a*Math.sin(u))}t.closePath()}},n.prototype.xu=function(t,n){n.translate(t.size/2,t.size/2),this.bu(n),n.fillStyle=Rs,n.fill(),this.du&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},n}(Mv),jv=Ov,Ev=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tv=function(t){function n(n){var i=n||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0],declutterMode:i.declutterMode})||this}return Ev(n,t),n.prototype.clone=function(){var t=this.getScale(),i=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i},n.prototype.setRadius=function(t){this.vu=t,this.render()},n}(jv),Pv=Tv,Av=function(){function t(t){var n=t||{};this._u=void 0!==n.color?n.color:null}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0})},t.prototype.getColor=function(){return this._u},t.prototype.setColor=function(t){this._u=t},t}(),Cv=Av,kv=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Iv=null,Nv=function(t){function n(n,i,r,e,o,s){var u=t.call(this)||this;return u.Mu=null,u.zt=n||new Image,null!==e&&(u.zt.crossOrigin=e),u.Ut={},u._u=s,u.Lt=null,u.Su=o,u.W=r,u.Nt=i,u.Ou,u}return kv(n,t),n.prototype.ju=function(){if(void 0===this.Ou&&this.Su===bo){Iv||(Iv=To(1,1)),Iv.drawImage(this.zt,0,0);try{Iv.getImageData(0,0,1,1),this.Ou=!1}catch(t){Iv=null,this.Ou=!0}}return!0===this.Ou},n.prototype.Eu=function(){this.dispatchEvent(z)},n.prototype.Ft=function(){this.Su=xo,this.Gt(),this.Eu()},n.prototype.Dt=function(){this.Su=bo,this.W?(this.zt.width=this.W[0],this.zt.height=this.W[1]):this.W=[this.zt.width,this.zt.height],this.Gt(),this.Eu()},n.prototype.getImage=function(t){return this.Tu(t),this.Ut[t]?this.Ut[t]:this.zt},n.prototype.getPixelRatio=function(t){return this.Tu(t),this.Ut[t]?t:1},n.prototype.getImageState=function(){return this.Su},n.prototype.getHitDetectionImage=function(){if(!this.Mu)if(this.ju()){var t=this.W[0],n=this.W[1],i=To(t,n);i.fillRect(0,0,t,n),this.Mu=i.canvas}else this.Mu=this.zt;return this.Mu},n.prototype.getSize=function(){return this.W},n.prototype.getSrc=function(){return this.Nt},n.prototype.load=function(){if(this.Su==wo){this.Su=go;try{this.zt.src=this.Nt}catch(t){this.Ft()}this.Lt=So(this.zt,this.Dt.bind(this),this.Ft.bind(this))}},n.prototype.Tu=function(t){if(this._u&&!this.Ut[t]&&this.Su===bo){var n=document.createElement("canvas");this.Ut[t]=n,n.width=Math.ceil(this.zt.width*t),n.height=Math.ceil(this.zt.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.zt,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.ju())i.fillStyle=Uo(this._u),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.zt,0,0);else{for(var r=i.getImageData(0,0,n.width,n.height),e=r.data,o=this._u[0]/255,s=this._u[1]/255,u=this._u[2]/255,a=this._u[3],h=0,f=e.length;h<f;h+=4)e[h]*=o,e[h+1]*=s,e[h+2]*=u,e[h+3]*=a;i.putImageData(r,0,0)}}},n.prototype.Gt=function(){this.Lt&&(this.Lt(),this.Lt=null)},n}(N);function zv(t,n,i,r,e,o){var s=Ho.get(n,r,o);return s||(s=new Nv(t,n,i,r,e,o),Ho.set(n,r,o,s)),s}var Lv=Nv,Rv=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Fv=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.opacity?r.opacity:1,s=void 0!==r.rotation?r.rotation:0,u=void 0!==r.scale?r.scale:1,a=void 0!==r.rotateWithView&&r.rotateWithView;(i=t.call(this,{opacity:e,rotation:s,scale:u,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:a,declutterMode:r.declutterMode})||this).xe=void 0!==r.anchor?r.anchor:[.5,.5],i.Pu=null,i.Au=void 0!==r.anchorOrigin?r.anchorOrigin:"top-left",i.Cu=void 0!==r.anchorXUnits?r.anchorXUnits:"fraction",i.ku=void 0!==r.anchorYUnits?r.anchorYUnits:"fraction",i.Bt=void 0!==r.crossOrigin?r.crossOrigin:null;var h=void 0!==r.img?r.img:null;i.Iu=r.imgSize;var f=r.src;Et(!(void 0!==f&&h),4),Et(!h||h&&i.Iu,5),void 0!==f&&0!==f.length||!h||(f=h.src||o(h)),Et(void 0!==f&&f.length>0,6);var c=void 0!==r.src?wo:bo;return i._u=void 0!==r.color?Xo(r.color):null,i.Nu=zv(h,f,void 0!==i.Iu?i.Iu:null,i.Bt,c,i._u),i.zu=void 0!==r.offset?r.offset:[0,0],i.Lu=void 0!==r.offsetOrigin?r.offsetOrigin:"top-left",i.Mo=null,i.W=void 0!==r.size?r.size:null,i}return Rv(n,t),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.xe.slice(),anchorOrigin:this.Au,anchorXUnits:this.Cu,anchorYUnits:this.ku,color:this._u&&this._u.slice?this._u.slice():this._u||void 0,crossOrigin:this.Bt,imgSize:this.Iu,offset:this.zu.slice(),offsetOrigin:this.Lu,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.W?this.W.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},n.prototype.getAnchor=function(){var t=this.Pu;if(!t){t=this.xe;var n=this.getSize();if("fraction"==this.Cu||"fraction"==this.ku){if(!n)return null;t=this.xe.slice(),"fraction"==this.Cu&&(t[0]*=n[0]),"fraction"==this.ku&&(t[1]*=n[1])}if("top-left"!=this.Au){if(!n)return null;t===this.xe&&(t=this.xe.slice()),"top-right"!=this.Au&&"bottom-right"!=this.Au||(t[0]=-t[0]+n[0]),"bottom-left"!=this.Au&&"bottom-right"!=this.Au||(t[1]=-t[1]+n[1])}this.Pu=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},n.prototype.setAnchor=function(t){this.xe=t,this.Pu=null},n.prototype.getColor=function(){return this._u},n.prototype.getImage=function(t){return this.Nu.getImage(t)},n.prototype.getPixelRatio=function(t){return this.Nu.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.Nu.getSize()},n.prototype.getImageState=function(){return this.Nu.getImageState()},n.prototype.getHitDetectionImage=function(){return this.Nu.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.Mo)return this.Mo;var t=this.zu;if("top-left"!=this.Lu){var n=this.getSize(),i=this.Nu.getSize();if(!n||!i)return null;t=t.slice(),"top-right"!=this.Lu&&"bottom-right"!=this.Lu||(t[0]=i[0]-n[0]-t[0]),"bottom-left"!=this.Lu&&"bottom-right"!=this.Lu||(t[1]=i[1]-n[1]-t[1])}return this.Mo=t,this.Mo},n.prototype.getSrc=function(){return this.Nu.getSrc()},n.prototype.getSize=function(){return this.W?this.W:this.Nu.getSize()},n.prototype.listenImageChange=function(t){this.Nu.addEventListener(z,t)},n.prototype.load=function(){this.Nu.load()},n.prototype.unlistenImageChange=function(t){this.Nu.removeEventListener(z,t)},n}(Mv),Gv=Fv,Dv=function(){function t(t){var n=t||{};this._u=void 0!==n.color?n.color:null,this.Ru=n.lineCap,this.Fu=void 0!==n.lineDash?n.lineDash:null,this.Gu=n.lineDashOffset,this.Du=n.lineJoin,this.Uu=n.miterLimit,this.qu=n.width}return t.prototype.clone=function(){var n=this.getColor();return new t({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this._u},t.prototype.getLineCap=function(){return this.Ru},t.prototype.getLineDash=function(){return this.Fu},t.prototype.getLineDashOffset=function(){return this.Gu},t.prototype.getLineJoin=function(){return this.Du},t.prototype.getMiterLimit=function(){return this.Uu},t.prototype.getWidth=function(){return this.qu},t.prototype.setColor=function(t){this._u=t},t.prototype.setLineCap=function(t){this.Ru=t},t.prototype.setLineDash=function(t){this.Fu=t},t.prototype.setLineDashOffset=function(t){this.Gu=t},t.prototype.setLineJoin=function(t){this.Du=t},t.prototype.setMiterLimit=function(t){this.Uu=t},t.prototype.setWidth=function(t){this.qu=t},t}(),Uv=Dv,qv=function(){function t(t){var n=t||{};this.Hr=null,this.Bu=Vv,void 0!==n.geometry&&this.setGeometry(n.geometry),this.lu=void 0!==n.fill?n.fill:null,this.zt=void 0!==n.image?n.image:null,this.hn=void 0!==n.renderer?n.renderer:null,this.Xu=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.du=void 0!==n.stroke?n.stroke:null,this.eo=void 0!==n.text?n.text:null,this.Yu=n.zIndex}return t.prototype.clone=function(){var n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new t({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.hn},t.prototype.setRenderer=function(t){this.hn=t},t.prototype.setHitDetectionRenderer=function(t){this.Xu=t},t.prototype.getHitDetectionRenderer=function(){return this.Xu},t.prototype.getGeometry=function(){return this.Hr},t.prototype.getGeometryFunction=function(){return this.Bu},t.prototype.getFill=function(){return this.lu},t.prototype.setFill=function(t){this.lu=t},t.prototype.getImage=function(){return this.zt},t.prototype.setImage=function(t){this.zt=t},t.prototype.getStroke=function(){return this.du},t.prototype.setStroke=function(t){this.du=t},t.prototype.getText=function(){return this.eo},t.prototype.setText=function(t){this.eo=t},t.prototype.getZIndex=function(){return this.Yu},t.prototype.setGeometry=function(t){"function"==typeof t?this.Bu=t:"string"==typeof t?this.Bu=function(n){return n.get(t)}:t?void 0!==t&&(this.Bu=function(){return t}):this.Bu=Vv,this.Hr=t},t.prototype.setZIndex=function(t){this.Yu=t},t}();function Bv(t){var n;if("function"==typeof t)n=t;else{var i;if(Array.isArray(t))i=t;else Et("function"==typeof t.getZIndex,41),i=[t];n=function(){return i}}return n}var Xv=null;function Yv(t,n){if(!Xv){var i=new Cv({color:"rgba(255,255,255,0.4)"}),r=new Uv({color:"#3399CC",width:1.25});Xv=[new qv({image:new Pv({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return Xv}function Zv(){var t={},n=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new qv({fill:new Cv({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new qv({stroke:new Uv({color:n,width:5})}),new qv({stroke:new Uv({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new qv({image:new Pv({radius:6,fill:new Cv({color:i}),stroke:new Uv({color:n,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Vv(t){return t.getGeometry()}var Wv=qv,$v=function(){function t(t){var n=t||{};this.Zu=n.font,this.Dr=n.rotation,this.su=n.rotateWithView,this.uu=n.scale,this.au=aa(void 0!==n.scale?n.scale:1),this.eo=n.text,this.Vu=n.textAlign,this.Wu=n.justify,this.$u=n.textBaseline,this.lu=void 0!==n.fill?n.fill:new Cv({color:"#333"}),this.Ku=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.Hu=void 0!==n.placement?n.placement:"point",this.Ju=!!n.overflow,this.du=void 0!==n.stroke?n.stroke:null,this.Qu=void 0!==n.offsetX?n.offsetX:0,this.ta=void 0!==n.offsetY?n.offsetY:0,this.na=n.backgroundFill?n.backgroundFill:null,this.ia=n.backgroundStroke?n.backgroundStroke:null,this.Pi=void 0===n.padding?null:n.padding}return t.prototype.clone=function(){var n=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.Ju},t.prototype.getFont=function(){return this.Zu},t.prototype.getMaxAngle=function(){return this.Ku},t.prototype.getPlacement=function(){return this.Hu},t.prototype.getOffsetX=function(){return this.Qu},t.prototype.getOffsetY=function(){return this.ta},t.prototype.getFill=function(){return this.lu},t.prototype.getRotateWithView=function(){return this.su},t.prototype.getRotation=function(){return this.Dr},t.prototype.getScale=function(){return this.uu},t.prototype.getScaleArray=function(){return this.au},t.prototype.getStroke=function(){return this.du},t.prototype.getText=function(){return this.eo},t.prototype.getTextAlign=function(){return this.Vu},t.prototype.getJustify=function(){return this.Wu},t.prototype.getTextBaseline=function(){return this.$u},t.prototype.getBackgroundFill=function(){return this.na},t.prototype.getBackgroundStroke=function(){return this.ia},t.prototype.getPadding=function(){return this.Pi},t.prototype.setOverflow=function(t){this.Ju=t},t.prototype.setFont=function(t){this.Zu=t},t.prototype.setMaxAngle=function(t){this.Ku=t},t.prototype.setOffsetX=function(t){this.Qu=t},t.prototype.setOffsetY=function(t){this.ta=t},t.prototype.setPlacement=function(t){this.Hu=t},t.prototype.setRotateWithView=function(t){this.su=t},t.prototype.setFill=function(t){this.lu=t},t.prototype.setRotation=function(t){this.Dr=t},t.prototype.setScale=function(t){this.uu=t,this.au=aa(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.du=t},t.prototype.setText=function(t){this.eo=t},t.prototype.setTextAlign=function(t){this.Vu=t},t.prototype.setJustify=function(t){this.Wu=t},t.prototype.setTextBaseline=function(t){this.$u=t},t.prototype.setBackgroundFill=function(t){this.na=t},t.prototype.setBackgroundStroke=function(t){this.ia=t},t.prototype.setPadding=function(t){this.Pi=t},t}(),Kv=$v,Hv=function(){function t(t){this.ra,this.ea,this.oa,this.sa=void 0===t||t,this.ua=0}return t.prototype.insertItem=function(t){var n={prev:void 0,next:void 0,data:t},i=this.oa;if(i){var r=i.next;n.prev=i,n.next=r,i.next=n,r&&(r.prev=n),i===this.ea&&(this.ea=n)}else this.ra=n,this.ea=n,this.sa&&(n.next=n,n.prev=n);this.oa=n,this.ua++},t.prototype.removeItem=function(){var t=this.oa;if(t){var n=t.next,i=t.prev;n&&(n.prev=i),i&&(i.next=n),this.oa=n||i,this.ra===this.ea?(this.oa=void 0,this.ra=void 0,this.ea=void 0):this.ra===t?this.ra=this.oa:this.ea===t&&(this.ea=i?this.oa.prev:this.oa),this.ua--}},t.prototype.firstItem=function(){if(this.oa=this.ra,this.oa)return this.oa.data},t.prototype.lastItem=function(){if(this.oa=this.ea,this.oa)return this.oa.data},t.prototype.nextItem=function(){if(this.oa&&this.oa.next)return this.oa=this.oa.next,this.oa.data},t.prototype.getNextItem=function(){if(this.oa&&this.oa.next)return this.oa.next.data},t.prototype.prevItem=function(){if(this.oa&&this.oa.prev)return this.oa=this.oa.prev,this.oa.data},t.prototype.getPrevItem=function(){if(this.oa&&this.oa.prev)return this.oa.prev.data},t.prototype.getCurrItem=function(){if(this.oa)return this.oa.data},t.prototype.setFirstItem=function(){this.sa&&this.oa&&(this.ra=this.oa,this.ea=this.oa.prev)},t.prototype.concat=function(t){if(t.oa){if(this.oa){var n=this.oa.next;this.oa.next=t.ra,t.ra.prev=this.oa,n.prev=t.ea,t.ea.next=n,this.ua+=t.ua}else this.oa=t.oa,this.ra=t.ra,this.ea=t.ea,this.ua=t.ua;t.oa=void 0,t.ra=void 0,t.ea=void 0,t.ua=0}},t.prototype.getLength=function(){return this.ua},t}(),Jv=i(72),Qv=function(){function t(t){this.aa=new Jv(t),this.ha={}}return t.prototype.insert=function(t,n){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.aa.insert(i),this.ha[o(n)]=i},t.prototype.load=function(t,n){for(var i=new Array(n.length),r=0,e=n.length;r<e;r++){var s=t[r],u=n[r],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[r]=a,this.ha[o(u)]=a}this.aa.load(i)},t.prototype.remove=function(t){var n=o(t),i=this.ha[n];return delete this.ha[n],null!==this.aa.remove(i)},t.prototype.update=function(t,n){var i=this.ha[o(n)];Pn([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(n),this.insert(t,n))},t.prototype.getAll=function(){return this.aa.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.aa.search(n).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.fa(this.getAll(),t)},t.prototype.forEachInExtent=function(t,n){return this.fa(this.getInExtent(t),n)},t.prototype.fa=function(t,n){for(var i,r=0,e=t.length;r<e;r++)if(i=n(t[r]))return i;return i},t.prototype.isEmpty=function(){return k(this.ha)},t.prototype.clear=function(){this.aa.clear(),this.ha={}},t.prototype.getExtent=function(t){var n=this.aa.toJSON();return On(n.minX,n.minY,n.maxX,n.maxY,t)},t.prototype.concat=function(t){for(var n in this.aa.load(t.aa.all()),t.ha)this.ha[n]=t.ha[n]},t}(),tp=Qv,np="tileloadstart",ip="tileloadend",rp="tileloaderror",ep=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function op(t){return t?Array.isArray(t)?function(n){return t}:"function"==typeof t?t:function(n){return[t]}:null}var sp=function(t){function n(n){var i=t.call(this)||this;i.projection=yr(n.projection),i.ca=op(n.attributions),i.la=void 0===n.attributionsCollapsible||n.attributionsCollapsible,i.loading=!1,i.rn=void 0!==n.state?n.state:"ready",i.va=void 0!==n.wrapX&&n.wrapX,i.pa=!!n.interpolate,i.viewResolver=null,i.viewRejector=null;var r=i;return i.da=new Promise((function(t,n){r.viewResolver=t,r.viewRejector=n})),i}return ep(n,t),n.prototype.getAttributions=function(){return this.ca},n.prototype.getAttributionsCollapsible=function(){return this.la},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return r()},n.prototype.getView=function(){return this.da},n.prototype.getState=function(){return this.rn},n.prototype.getWrapX=function(){return this.va},n.prototype.getInterpolate=function(){return this.pa},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.ca=op(t),this.changed()},n.prototype.setState=function(t){this.rn=t,this.changed()},n}(et),up=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ap=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate})||this;i.on,i.once,i.un,i.ya=void 0!==n.opaque&&n.opaque,i.ma=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,i.tileGrid=void 0!==n.tileGrid?n.tileGrid:null;return i.tileGrid&&aa(i.tileGrid.getTileSize(i.tileGrid.getMinZoom()),[256,256]),i.tileCache=new Kh(n.cacheSize||0),i.tmpSize=[0,0],i.ke=n.key||"",i.tileOptions={transition:n.transition,interpolate:n.interpolate},i.zDirection=n.zDirection?n.zDirection:0,i}return up(n,t),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},n.prototype.forEachLoadedTile=function(t,n,i,r){var e=this.getTileCacheForProjection(t);if(!e)return!1;for(var o,s,u,a=!0,h=i.minX;h<=i.maxX;++h)for(var f=i.minY;f<=i.maxY;++f)s=qh(n,h,f),u=!1,e.containsKey(s)&&(u=(o=e.get(s)).getState()===pt)&&(u=!1!==r(o)),u||(a=!1);return a},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.ke},n.prototype.setKey=function(t){this.ke!==t&&(this.ke=t,this.changed())},n.prototype.getOpaque=function(t){return this.ya},n.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},n.prototype.getTile=function(t,n,i,e,o){return r()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Bf(t)},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();return Et(null===n||Sr(n,t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.ma},n.prototype.getTilePixelSize=function(t,n,i){var r=this.getTileGridForProjection(i),e=this.getTilePixelRatio(n),o=aa(r.getTileSize(t),this.tmpSize);return 1==e?o:ua(o,e,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=void 0!==n?n:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Xf(r,t,i)),Vh(t,r)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},n.prototype.useTile=function(t,n,i,r){},n}(sp),hp=function(t){function n(n,i){var r=t.call(this,n)||this;return r.tile=i,r}return up(n,t),n}(c),fp=ap,cp=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lp=function(t){function n(i){var r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tilePixelRatio:i.tilePixelRatio,wrapX:i.wrapX,transition:i.transition,interpolate:i.interpolate,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this;return r.wa=r.tileUrlFunction===n.prototype.tileUrlFunction,r.tileLoadFunction=i.tileLoadFunction,i.tileUrlFunction&&(r.tileUrlFunction=i.tileUrlFunction),r.urls=null,i.urls?r.setUrls(i.urls):i.url&&r.setUrl(i.url),r.ga={},r}return cp(n,t),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var n,i=t.target,r=o(i),e=i.getState();e==vt?(this.ga[r]=!0,n=np):r in this.ga&&(delete this.ga[r],n=e==dt?rp:e==pt?ip:void 0),null!=n&&this.dispatchEvent(new hp(n,i))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},n.prototype.setUrl=function(t){var n=tc(t);this.urls=n,this.setUrls(n)},n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.wa?this.setTileUrlFunction(Hf(t,this.tileGrid),n):this.setKey(n)},n.prototype.tileUrlFunction=function(t,n,i){},n.prototype.useTile=function(t,n,i){var r=qh(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(fp),vp=lp,pp=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dp=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:yp,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:r,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this).crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,i.tileClass=void 0!==n.tileClass?n.tileClass:Ro,i.tileCacheForProjection={},i.tileGridForProjection={},i.ba=n.reprojectionErrorThreshold,i.xa=!1,i}return pp(n,t),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?n:{}),this.tileCacheForProjection){var e=this.tileCacheForProjection[r];e.expireCache(e==i?n:{})}},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Sr(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){var n=t.prototype.getKey.call(this);return this.getInterpolate()||(n+=":disable-interpolation"),n},n.prototype.getOpaque=function(n){return!(this.getProjection()&&n&&!Sr(this.getProjection(),n))&&t.prototype.getOpaque.call(this,n)},n.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(!this.tileGrid||n&&!Sr(n,t)){var i=o(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Bf(t)),this.tileGridForProjection[i]}return this.tileGrid},n.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||Sr(n,t))return this.tileCache;var i=o(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Kh(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},n.prototype._a=function(t,n,i,r,e,o){var s=[t,n,i],u=this.getTileCoordForTileUrlFunction(s,e),a=u?this.tileUrlFunction(u,r,e):void 0,h=new this.tileClass(s,void 0!==a?lt:yt,void 0!==a?a:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(z,this.handleTileChange.bind(this)),h},n.prototype.getTile=function(t,n,i,r,e){var o=this.getProjection();if(o&&e&&!Sr(o,e)){var s=this.getTileCacheForProjection(e),u=[t,n,i],a=void 0,h=Bh(u);s.containsKey(h)&&(a=s.get(h));var f=this.getKey();if(a&&a.key==f)return a;var c=this.getTileGridForProjection(o),l=this.getTileGridForProjection(e),v=this.getTileCoordForTileUrlFunction(u,e),p=new yl(o,c,e,l,u,v,this.getTilePixelRatio(r),this.getGutter(),function(t,n,i,r){return this.getTileInternal(t,n,i,r,o)}.bind(this),this.ba,this.xa,this.getInterpolate());return p.key=f,a?(p.interimTile=a,p.refreshInterimChain(),s.replace(h,p)):s.set(h,p),p}return this.getTileInternal(t,n,i,r,o||e)},n.prototype.getTileInternal=function(t,n,i,r,e){var o=null,s=qh(t,n,i),u=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=u){var a=o;o=this._a(t,n,i,r,e,u),a.getState()==lt?o.interimTile=a.interimTile:o.interimTile=a,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this._a(t,n,i,r,e,u),this.tileCache.set(s,o);return o},n.prototype.setRenderReprojectionEdges=function(t){if(this.xa!=t){for(var n in this.xa=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,n){var i=yr(t);if(i){var r=o(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}},n}(vp);function yp(t,n){t.getImage().src=n}var mp=dp,wp=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function gp(t){var n,i,r=t[0],e=new Array(r),o=1<<r-1;for(n=0;n<r;++n)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),e[n]=String.fromCharCode(i),o>>=1;return e.join("")}var bp=function(t){function n(n){var i=this,r=void 0!==n.hidpi&&n.hidpi,e=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(e=n.interpolate),(i=t.call(this,{cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:e,opaque:!0,projection:yr("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).Ma=r,i.Sa=void 0!==n.culture?n.culture:"en-us",i.Oa=void 0!==n.maxZoom?n.maxZoom:-1,i.ja=n.key,i.Ea=n.imagerySet,pf("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+i.Ea+"?uriScheme=https&include=ImageryProviders&key="+i.ja+"&c="+i.Sa,i.handleImageryMetadataResponse.bind(i),void 0,"jsonp"),i}return wp(n,t),n.prototype.getApiKey=function(){return this.ja},n.prototype.getImagerySet=function(){return this.Ea},n.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var n=t.resourceSets[0].resources[0],i=-1==this.Oa?n.zoomMax:this.Oa,r=$f(this.getProjection()),e=this.Ma?2:1,o=n.imageWidth==n.imageHeight?n.imageWidth/e:[n.imageWidth/e,n.imageHeight/e],s=Zf({extent:r,minZoom:n.zoomMin,maxZoom:i,tileSize:o});this.tileGrid=s;var u=this.Sa,a=this.Ma;if(this.tileUrlFunction=Jf(n.imageUrlSubdomains.map((function(t){var i=[0,0,0],r=n.imageUrl.replace("{subdomain}",t).replace("{culture}",u);return function(t,n,e){if(t){Uh(t[0],t[1],t[2],i);var o=r;return a&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",gp(i))}}}))),n.imageryProviders){var h=Or(yr("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState,e=this.getTileGrid(),o=e.getZForResolution(r.resolution,this.zDirection),s=e.getTileCoordForCoordAndZ(r.center,o)[0];return n.imageryProviders.map((function(n){for(var r=!1,e=n.coverageAreas,o=0,u=e.length;o<u;++o){var a=e[o];if(s>=a.zoomMin&&s<=a.zoomMax){var f=a.bbox;if(Kn(ni([f[1],f[0],f[3],f[2]],h),t.extent)){r=!0;break}}}r&&i.push(n.attribution)})),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),i}.bind(this))}this.setState("ready")}else this.setState("error")},n}(mp),xp=bp,_p=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mp=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=void 0!==r.projection?r.projection:"EPSG:3857",s=void 0!==r.tileGrid?r.tileGrid:Zf({extent:$f(o),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:r.opaque,projection:o,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this).js=void 0!==r.gutter?r.gutter:0,i}return _p(n,t),n.prototype.getGutter=function(){return this.js},n}(mp),Sp=Mp,Op=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jp=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,maxZoom:void 0!==n.maxZoom?n.maxZoom:18,minZoom:n.minZoom,projection:n.projection,transition:n.transition,wrapX:n.wrapX,zDirection:n.zDirection})||this;return i.Ta=n.account,i.Pa=n.map||"",i.Aa=n.config||{},i.Ca={},i.ka(),i}return Op(n,t),n.prototype.getConfig=function(){return this.Aa},n.prototype.updateConfig=function(t){P(this.Aa,t),this.ka()},n.prototype.setConfig=function(t){this.Aa=t||{},this.ka()},n.prototype.ka=function(){var t=JSON.stringify(this.Aa);if(this.Ca[t])this.Ia(this.Ca[t]);else{var n="https://"+this.Ta+".carto.com/api/v1/map";this.Pa&&(n+="/named/"+this.Pa);var i=new XMLHttpRequest;i.addEventListener("load",this.Na.bind(this,t)),i.addEventListener("error",this.za.bind(this)),i.open("POST",n),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.Aa))}},n.prototype.Na=function(t,n){var i=n.target;if(!i.status||i.status>=200&&i.status<300){var r=void 0;try{r=JSON.parse(i.responseText)}catch(t){return void this.setState("error")}this.Ia(r),this.Ca[t]=r,this.setState("ready")}else this.setState("error")},n.prototype.za=function(t){this.setState("error")},n.prototype.Ia=function(t){var n="https://"+t.cdn_url.https+"/"+this.Ta+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n)},n}(Sp),Ep="addfeature",Tp="changefeature",Pp="clear",Ap="removefeature",Cp="featuresloadstart",kp="featuresloadend",Ip="featuresloaderror",Np=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zp=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.feature=i,e.features=r,e}return Np(n,t),n}(c),Lp=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===r.wrapX||r.wrapX})||this).on,i.once,i.un,i.q=j,i.Le=r.format,i.La=void 0===r.overlaps||r.overlaps,i.Fe=r.url,void 0!==r.loader?i.q=r.loader:void 0!==i.Fe&&(Et(i.Le,7),i.q=cf(i.Fe,i.Le)),i.Ra=void 0!==r.strategy?r.strategy:lf;var e,o,s=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.Fa=s?new tp:null,i.Ga=new tp,i.Da=0,i.Ua={},i.qa={},i.Ba={},i.Xa={},i.Ya=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(e=r.features).getArray()),s||void 0!==e||(e=new ct(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==e&&i.Za(e),i}return Np(n,t),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var n=o(t);if(this.Va(n,t)){this.Wa(n,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.Fa&&this.Fa.insert(r,t)}else this.Ua[n]=t;this.dispatchEvent(new zp(Ep,t))}else this.Ya&&this.Ya.remove(t)},n.prototype.Wa=function(t,n){this.Xa[t]=[$(n,z,this.$a,this),$(n,l,this.$a,this)]},n.prototype.Va=function(t,n){var i=!0,r=n.getId();return void 0!==r&&(r.toString()in this.qa?i=!1:this.qa[r.toString()]=n),i&&(Et(!(t in this.Ba),30),this.Ba[t]=n),i},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],r=[],e=0,s=t.length;e<s;e++){var u=o(h=t[e]);this.Va(u,h)&&i.push(h)}e=0;for(var a=i.length;e<a;e++){var h;u=o(h=i[e]);this.Wa(u,h);var f=h.getGeometry();if(f){var c=f.getExtent();n.push(c),r.push(h)}else this.Ua[u]=h}if(this.Fa&&this.Fa.load(n,r),this.hasListener(Ep)){e=0;for(var l=i.length;e<l;e++)this.dispatchEvent(new zp(Ep,i[e]))}},n.prototype.Za=function(t){var n=!1;this.addEventListener(Ep,(function(i){n||(n=!0,t.push(i.feature),n=!1)})),this.addEventListener(Ap,(function(i){n||(n=!0,t.remove(i.feature),n=!1)})),t.addEventListener(ot,function(t){n||(n=!0,this.addFeature(t.element),n=!1)}.bind(this)),t.addEventListener(st,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)}.bind(this)),this.Ya=t},n.prototype.clear=function(t){if(t){for(var n in this.Xa){this.Xa[n].forEach(H)}this.Ya||(this.Xa={},this.qa={},this.Ba={})}else if(this.Fa){var i=function(t){this.removeFeatureInternal(t)}.bind(this);for(var r in this.Fa.forEach(i),this.Ua)this.removeFeatureInternal(this.Ua[r])}this.Ya&&this.Ya.clear(),this.Fa&&this.Fa.clear(),this.Ua={};var e=new zp(Pp);this.dispatchEvent(e),this.changed()},n.prototype.forEachFeature=function(t){if(this.Fa)return this.Fa.forEach(t);this.Ya&&this.Ya.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?n(i):void 0}))},n.prototype.forEachFeatureInExtent=function(t,n){if(this.Fa)return this.Fa.forEachInExtent(t,n);this.Ya&&this.Ya.forEach(n)},n.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var r=n(i);if(r)return r}}))},n.prototype.getFeaturesCollection=function(){return this.Ya},n.prototype.getFeatures=function(){var t;return this.Ya?t=this.Ya.getArray().slice(0):this.Fa&&(t=this.Fa.getAll(),k(this.Ua)||g(t,C(this.Ua))),t},n.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){n.push(t)})),n},n.prototype.getFeaturesInExtent=function(t,n){var i=this;if(this.Fa){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.Fa.getInExtent(t);var r=ri(t,n);return[].concat.apply([],r.map((function(t){return i.Fa.getInExtent(t)})))}return this.Ya?this.Ya.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],r=t[1],e=null,o=[NaN,NaN],s=1/0,u=[-1/0,-1/0,1/0,1/0],a=n||S;return this.Fa.forEachInExtent(u,(function(t){if(a(t)){var n=t.getGeometry(),h=s;if((s=n.closestPointXY(i,r,o,s))<h){e=t;var f=Math.sqrt(s);u[0]=i-f,u[1]=r-f,u[2]=i+f,u[3]=r+f}}})),e},n.prototype.getExtent=function(t){return this.Fa.getExtent(t)},n.prototype.getFeatureById=function(t){var n=this.qa[t.toString()];return void 0!==n?n:null},n.prototype.getFeatureByUid=function(t){var n=this.Ba[t];return void 0!==n?n:null},n.prototype.getFormat=function(){return this.Le},n.prototype.getOverlaps=function(){return this.La},n.prototype.getUrl=function(){return this.Fe},n.prototype.$a=function(t){var n=t.target,i=o(n),r=n.getGeometry();if(r){var e=r.getExtent();i in this.Ua?(delete this.Ua[i],this.Fa&&this.Fa.insert(e,n)):this.Fa&&this.Fa.update(e,n)}else i in this.Ua||(this.Fa&&this.Fa.remove(n),this.Ua[i]=n);var s=n.getId();if(void 0!==s){var u=s.toString();this.qa[u]!==n&&(this.Ka(n),this.qa[u]=n)}else this.Ka(n),this.Ba[i]=n;this.changed(),this.dispatchEvent(new zp(Tp,n))},n.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.qa:o(t)in this.Ba},n.prototype.isEmpty=function(){return this.Fa?this.Fa.isEmpty()&&k(this.Ua):!this.Ya||0===this.Ya.getLength()},n.prototype.loadFeatures=function(t,n,i){for(var r=this.Ga,e=this.Ra(t,n,i),o=function(t,o){var u=e[t];r.forEachInExtent(u,(function(t){return xn(t.extent,u)}))||(++s.Da,s.dispatchEvent(new zp(Cp)),s.q.call(s,u,n,i,function(t){--this.Da,this.dispatchEvent(new zp(kp,void 0,t))}.bind(s),function(){--this.Da,this.dispatchEvent(new zp(Ip))}.bind(s)),r.insert(u,{extent:u.slice()}))},s=this,u=0,a=e.length;u<a;++u)o(u);this.loading=!(this.q.length<4)&&this.Da>0},n.prototype.refresh=function(){this.clear(!0),this.Ga.clear(),t.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var n,i=this.Ga;i.forEachInExtent(t,(function(i){if(Pn(i.extent,t))return n=i,!0})),n&&i.remove(n)},n.prototype.removeFeature=function(t){if(t){var n=o(t);n in this.Ua?delete this.Ua[n]:this.Fa&&this.Fa.remove(t),this.removeFeatureInternal(t)&&this.changed()}},n.prototype.removeFeatureInternal=function(t){var n=o(t),i=this.Xa[n];if(i){i.forEach(H),delete this.Xa[n];var r=t.getId();return void 0!==r&&delete this.qa[r.toString()],delete this.Ba[n],this.dispatchEvent(new zp(Ap,t)),t}},n.prototype.Ka=function(t){var n=!1;for(var i in this.qa)if(this.qa[i]===t){delete this.qa[i],n=!0;break}return n},n.prototype.setLoader=function(t){this.q=t},n.prototype.setUrl=function(t){Et(this.Le,7),this.Fe=t,this.setLoader(cf(t,this.Le))},n}(sp),Rp=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Fp=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,wrapX:n.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==n.distance?n.distance:20,i.minDistance=n.minDistance||0,i.interpolationRatio=0,i.features=[],i.geometryFunction=n.geometryFunction||function(t){var n=t.getGeometry();return Et("Point"==n.getType(),10),n},i.Ha=n.createCluster,i.source=null,i.Ja=i.refresh.bind(i),i.updateDistance(i.distance,i.minDistance),i.setSource(n.source||null),i}return Rp(n,t),n.prototype.clear=function(n){this.features.length=0,t.prototype.clear.call(this,n)},n.prototype.getDistance=function(){return this.distance},n.prototype.getSource=function(){return this.source},n.prototype.loadFeatures=function(t,n,i){this.source.loadFeatures(t,n,i),n!==this.resolution&&(this.resolution=n,this.refresh())},n.prototype.setDistance=function(t){this.updateDistance(t,this.minDistance)},n.prototype.setMinDistance=function(t){this.updateDistance(this.distance,t)},n.prototype.getMinDistance=function(){return this.minDistance},n.prototype.setSource=function(t){this.source&&this.source.removeEventListener(z,this.Ja),this.source=t,t&&t.addEventListener(z,this.Ja),this.refresh()},n.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},n.prototype.updateDistance=function(t,n){var i=0===t?0:Math.min(n,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=n,this.interpolationRatio=i,r&&this.refresh()},n.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],n=this.distance*this.resolution,i=this.source.getFeatures(),r={},e=0,s=i.length;e<s;e++){var u=i[e];if(!(o(u)in r)){var a=this.geometryFunction(u);if(a){En(a.getCoordinates(),t),mn(t,n,t);var h=this.source.getFeaturesInExtent(t).filter((function(t){var n=o(t);return!(n in r)&&(r[n]=!0,!0)}));this.features.push(this.createCluster(h,t))}}}},n.prototype.createCluster=function(t,n){for(var i=[0,0],r=t.length-1;r>=0;--r){var e=this.geometryFunction(t[r]);e?Yi(i,e.getCoordinates()):t.splice(r,1)}Ji(i,1/t.length);var o=Un(n),s=this.interpolationRatio,u=new Te([i[0]*(1-s)+o[0]*s,i[1]*(1-s)+o[1]*s]);return this.Ha?this.Ha(u,t):new Ct({geometry:u,features:t})},n}(Lp),Gp=Fp,Dp=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Up=function(t){function n(n){var i=this,r=void 0===n.projection?"EPSG:3857":n.projection,e=n.tileGrid;if(void 0===e&&r&&(e=Zf({extent:$f(r),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize})),(i=t.call(this,{cacheSize:.1,attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:r,tileGrid:e,opaque:n.opaque,state:n.state,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate})||this).js=void 0!==n.gutter?n.gutter:0,i.jo=n.tileSize?aa(n.tileSize):null,!i.jo&&n.tilePixelRatio&&e){var o=aa(e.getTileSize(0));i.jo=[o[0]*n.tilePixelRatio,o[1]*n.tilePixelRatio]}return i.Oo=null,i.ga={},i.q=n.loader,i.cr=i.cr.bind(i),i.bandCount=void 0===n.bandCount?4:n.bandCount,i}return Dp(n,t),n.prototype.setTileSizes=function(t){this.Oo=t},n.prototype.getTileSize=function(t){if(this.Oo)return this.Oo[t];if(this.jo)return this.jo;var n=this.getTileGrid();return n?aa(n.getTileSize(t)):[256,256]},n.prototype.getGutterForProjection=function(t){return this.js},n.prototype.setLoader=function(t){this.q=t},n.prototype.getTile=function(t,n,i,r,e){var o=this.getTileSize(t),s=qh(t,n,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);var u=this.q;var a=P({tileCoord:[t,n,i],loader:function(){return T((function(){return u(t,n,i)}))},size:o},this.tileOptions),h=new jt(a);return h.key=this.getKey(),h.addEventListener(z,this.cr),this.tileCache.set(s,h),h},n.prototype.cr=function(t){var n,i=t.target,r=o(i),e=i.getState();e==vt?(this.ga[r]=!0,n=np):r in this.ga&&(delete this.ga[r],n=e==dt?rp:e==pt?ip:void 0),n&&this.dispatchEvent(new hp(n,i))},n}(fp),qp=Up;const Bp=new ArrayBuffer(4),Xp=new Float32Array(Bp),Yp=new Uint32Array(Bp),Zp=new Uint32Array(512),Vp=new Uint32Array(512);for(let t=0;t<256;++t){const n=t-127;n<-27?(Zp[t]=0,Zp[256|t]=32768,Vp[t]=24,Vp[256|t]=24):n<-14?(Zp[t]=1024>>-n-14,Zp[256|t]=1024>>-n-14|32768,Vp[t]=-n-1,Vp[256|t]=-n-1):n<=15?(Zp[t]=n+15<<10,Zp[256|t]=n+15<<10|32768,Vp[t]=13,Vp[256|t]=13):n<128?(Zp[t]=31744,Zp[256|t]=64512,Vp[t]=24,Vp[256|t]=24):(Zp[t]=31744,Zp[256|t]=64512,Vp[t]=13,Vp[256|t]=13)}const Wp=new Uint32Array(2048),$p=new Uint32Array(64),Kp=new Uint32Array(64);Wp[0]=0;for(let t=1;t<1024;++t){let n=t<<13,i=0;for(;0==(8388608&n);)i-=8388608,n<<=1;n&=-8388609,i+=947912704,Wp[t]=n|i}for(let t=1024;t<2048;++t)Wp[t]=939524096+(t-1024<<13);$p[0]=0;for(let t=1;t<31;++t)$p[t]=t<<23;$p[31]=1199570944,$p[32]=2147483648;for(let t=33;t<63;++t)$p[t]=2147483648+(t-32<<23);$p[63]=3347054592,Kp[0]=0;for(let t=1;t<64;++t)Kp[t]=32===t?0:1024;function Hp(t){const n=t>>10;return Yp[0]=Wp[Kp[n]+(1023&t)]+$p[n],Xp[0]}const Jp=Reflect.getPrototypeOf(Uint8Array).prototype,Qp=Reflect.getOwnPropertyDescriptor(Jp,Symbol.toStringTag).get;function td(t){return void 0!==Qp.call(t)}const nd=Object.prototype.toString;function id(t){return!!ArrayBuffer.isView(t)&&(!td(t)&&"[object DataView]"===nd.call(t))}function rd(t,n){if(!id(t))throw new TypeError("First argument to getFloat16 function must be a DataView");for(var i=arguments.length,r=new Array(i>2?i-2:0),e=2;e<i;e++)r[e-2]=arguments[e];return Hp(t.getUint16(n,...r))}var ed=i(802),od=i(51),sd=i(150);const ud=new Map;function ad(t,n){Array.isArray(t)||(t=[t]),t.forEach((t=>ud.set(t,n)))}async function hd(t){const n=ud.get(t.Compression);if(!n)throw new Error(`Unknown compression method identifier: ${t.Compression}`);return new(await n())(t)}function fd(t,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(t).constructor)(n*i*r)}function cd(t,n,i,r,e){const o=n/r,s=i/e;return t.map((t=>{const u=fd(t,r,e);for(let a=0;a<e;++a){const e=Math.min(Math.round(s*a),i-1);for(let i=0;i<r;++i){const s=Math.min(Math.round(o*i),n-1),h=t[e*n+s];u[a*r+i]=h}}return u}))}function ld(t,n,i){return(1-i)*t+i*n}function vd(t,n,i,r,e){const o=n/r,s=i/e;return t.map((t=>{const u=fd(t,r,e);for(let a=0;a<e;++a){const e=s*a,h=Math.floor(e),f=Math.min(Math.ceil(e),i-1);for(let i=0;i<r;++i){const s=o*i,c=s%1,l=Math.floor(s),v=Math.min(Math.ceil(s),n-1),p=t[h*n+l],d=t[h*n+v],y=t[f*n+l],m=t[f*n+v],w=ld(ld(p,d,c),ld(y,m,c),e%1);u[a*r+i]=w}}return u}))}function pd(t,n,i,r,e,o){const s=n/r,u=i/e,a=fd(t,r,e,o);for(let h=0;h<e;++h){const e=Math.min(Math.round(u*h),i-1);for(let i=0;i<r;++i){const u=Math.min(Math.round(s*i),n-1);for(let s=0;s<o;++s){const f=t[e*n*o+u*o+s];a[h*r*o+i*o+s]=f}}}return a}function dd(t,n,i,r,e,o){const s=n/r,u=i/e,a=fd(t,r,e,o);for(let h=0;h<e;++h){const e=u*h,f=Math.floor(e),c=Math.min(Math.ceil(e),i-1);for(let i=0;i<r;++i){const u=s*i,l=u%1,v=Math.floor(u),p=Math.min(Math.ceil(u),n-1);for(let s=0;s<o;++s){const u=t[f*n*o+v*o+s],d=t[f*n*o+p*o+s],y=t[c*n*o+v*o+s],m=t[c*n*o+p*o+s],w=ld(ld(u,d,l),ld(y,m,l),e%1);a[h*r*o+i*o+s]=w}}}return a}function yd(t,n,i){let r=0;for(let e=n;e<i;++e)r+=t[e];return r}function md(t,n,i){switch(t){case 1:if(n<=8)return new Uint8Array(i);if(n<=16)return new Uint16Array(i);if(n<=32)return new Uint32Array(i);break;case 2:if(8===n)return new Int8Array(i);if(16===n)return new Int16Array(i);if(32===n)return new Int32Array(i);break;case 3:switch(n){case 16:case 32:return new Float32Array(i);case 64:return new Float64Array(i)}}throw Error("Unsupported data format/bitsPerSample")}ad([void 0,1],(()=>i.e(226).then(i.bind(i,966)).then((t=>t.default)))),ad(5,(()=>i.e(611).then(i.bind(i,611)).then((t=>t.default)))),ad(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),ad(7,(()=>i.e(382).then(i.bind(i,382)).then((t=>t.default)))),ad([8,32946],(()=>Promise.all([i.e(247),i.e(356)]).then(i.bind(i,356)).then((t=>t.default)))),ad(32773,(()=>i.e(395).then(i.bind(i,395)).then((t=>t.default)))),ad(34887,(()=>Promise.all([i.e(247),i.e(54)]).then(i.bind(i,54)).then((t=>t.default)))),ad(50001,(()=>i.e(629).then(i.bind(i,629)).then((t=>t.default))));var wd=class{constructor(t,n,i,r,e,o){this.fileDirectory=t,this.geoKeys=n,this.dataView=i,this.littleEndian=r,this.tiles=e?{}:null,this.isTiled=!t.StripOffsets;const s=t.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,i=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(t,n){return rd(this,t,n)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,n){return md(this.getSampleFormat(t),this.getBitsPerSample(t),n)}async getTileOrStrip(t,n,i,r,e){const o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight());let u;const{tiles:a}=this;let h,f;1===this.planarConfiguration?u=n*o+t:2===this.planarConfiguration&&(u=i*o*s+n*o+t),this.isTiled?(h=this.fileDirectory.TileOffsets[u],f=this.fileDirectory.TileByteCounts[u]):(h=this.fileDirectory.StripOffsets[u],f=this.fileDirectory.StripByteCounts[u]);const c=(await this.source.fetch([{offset:h,length:f}],e))[0];let l;return null!==a&&a[u]?l=a[u]:(l=(async()=>{let t=await r.decode(this.fileDirectory,c);const i=this.getSampleFormat(),e=this.getBitsPerSample();return function(t,n){return(1!==t&&2!==t||!(n<=32)||n%8!=0)&&(3!==t||16!==n&&32!==n&&64!==n)}(i,e)&&(t=function(t,n,i,r,e,o,s){const u=new DataView(t),a=2===i?1:r,h=md(n,e,2===i?s*o:s*o*r),f=parseInt("1".repeat(e),2);if(1===n){let t;t=1===i?r*e:e;let n=o*t;0!=(7&n)&&(n=n+7&-8);for(let t=0;t<s;++t){const i=t*n;for(let n=0;n<o;++n){const r=i+n*a*e;for(let i=0;i<a;++i){const s=r+i*e,c=(t*o+n)*a+i,l=Math.floor(s/8),v=s%8;if(v+e<=8)h[c]=u.getUint8(l)>>8-e-v&f;else if(v+e<=16)h[c]=u.getUint16(l)>>16-e-v&f;else if(v+e<=24){const t=u.getUint16(l)<<8|u.getUint8(l+2);h[c]=t>>24-e-v&f}else h[c]=u.getUint32(l)>>32-e-v&f}}}}return h.buffer}(t,i,this.planarConfiguration,this.getSamplesPerPixel(),e,this.getTileWidth(),this.getBlockHeight(n))),t})(),null!==a&&(a[u]=l)),{x:t,y:n,sample:i,data:await l}}async _readRaster(t,n,i,r,e,o,s,u,a){const h=this.getTileWidth(),f=this.getTileHeight(),c=this.getWidth(),l=this.getHeight(),v=Math.max(Math.floor(t[0]/h),0),p=Math.min(Math.ceil(t[2]/h),Math.ceil(c/h)),d=Math.max(Math.floor(t[1]/f),0),y=Math.min(Math.ceil(t[3]/f),Math.ceil(l/f)),m=t[2]-t[0];let w=this.getBytesPerPixel();const g=[],b=[];for(let t=0;t<n.length;++t)1===this.planarConfiguration?g.push(yd(this.fileDirectory.BitsPerSample,0,n[t])/8):g.push(0),b.push(this.getReaderForSample(n[t]));const x=[],{littleEndian:_}=this;for(let o=d;o<y;++o)for(let s=v;s<p;++s)for(let u=0;u<n.length;++u){const v=u,p=n[u];2===this.planarConfiguration&&(w=this.getSampleByteSize(u));const d=this.getTileOrStrip(s,o,p,e,a);x.push(d),d.then((e=>{const o=e.data,s=new DataView(o),u=this.getBlockHeight(e.y),a=e.y*f,p=e.x*h,d=a+u,y=(e.x+1)*h,x=b[v],M=Math.min(u,u-(d-t[3]),l-a),S=Math.min(h,h-(y-t[2]),c-p);for(let e=Math.max(0,t[1]-a);e<M;++e)for(let o=Math.max(0,t[0]-p);o<S;++o){const u=(e*h+o)*w,f=x.call(s,u+g[v],_);let c;r?(c=(e+a-t[1])*m*n.length+(o+p-t[0])*n.length+v,i[c]=f):(c=(e+a-t[1])*m+o+p-t[0],i[v][c]=f)}}))}if(await Promise.all(x),o&&t[2]-t[0]!==o||s&&t[3]-t[1]!==s){let e;return e=r?function(t,n,i,r,e,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(s.toLowerCase()){case"nearest":return pd(t,n,i,r,e,o);case"bilinear":case"linear":return dd(t,n,i,r,e,o);default:throw new Error(`Unsupported resampling method: '${s}'`)}}(i,t[2]-t[0],t[3]-t[1],o,s,n.length,u):function(t,n,i,r,e){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(o.toLowerCase()){case"nearest":return cd(t,n,i,r,e);case"bilinear":case"linear":return vd(t,n,i,r,e);default:throw new Error(`Unsupported resampling method: '${o}'`)}}(i,t[2]-t[0],t[3]-t[1],o,s,u),e.width=o,e.height=s,e}return i.width=o||t[2]-t[0],i.height=s||t[3]-t[1],i}async readRasters(){let{window:t,samples:n=[],interleave:i,pool:r=null,width:e,height:o,resampleMethod:s,fillValue:u,signal:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const f=(h[2]-h[0])*(h[3]-h[1]),c=this.getSamplesPerPixel();if(n&&n.length){for(let t=0;t<n.length;++t)if(n[t]>=c)return Promise.reject(new RangeError(`Invalid sample index '${n[t]}'.`))}else for(let t=0;t<c;++t)n.push(t);let l;if(i){l=md(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),f*n.length),u&&l.fill(u)}else{l=[];for(let t=0;t<n.length;++t){const i=this.getArrayForSample(n[t],f);Array.isArray(u)&&t<u.length?i.fill(u[t]):u&&!Array.isArray(u)&&i.fill(u),l.push(i)}}const v=r||await hd(this.fileDirectory);return await this._readRaster(h,n,l,i,v,e,o,s,a)}async readRGB(){let{window:t,interleave:n=!0,pool:i=null,width:r,height:e,resampleMethod:o,enableAlpha:s=!1,signal:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=t||[0,0,this.getWidth(),this.getHeight()];if(a[0]>a[2]||a[1]>a[3])throw new Error("Invalid subsets");const h=this.fileDirectory.PhotometricInterpretation;if(h===sd.Ie.RGB){let a=[0,1,2];if(this.fileDirectory.ExtraSamples!==sd.pd.Unspecified&&s){a=[];for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)a.push(t)}return this.readRasters({window:t,interleave:n,samples:a,pool:i,width:r,height:e,resampleMethod:o,signal:u})}let f;switch(h){case sd.Ie.WhiteIsZero:case sd.Ie.BlackIsZero:case sd.Ie.Palette:f=[0];break;case sd.Ie.CMYK:f=[0,1,2,3];break;case sd.Ie.YCbCr:case sd.Ie.CIELab:f=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const c={window:a,interleave:!0,samples:f,pool:i,width:r,height:e,resampleMethod:o,signal:u},{fileDirectory:l}=this,v=await this.readRasters(c),p=2**this.fileDirectory.BitsPerSample[0];let d;switch(h){case sd.Ie.WhiteIsZero:d=function(t,n){const{width:i,height:r}=t,e=new Uint8Array(i*r*3);let o;for(let i=0,r=0;i<t.length;++i,r+=3)o=256-t[i]/n*256,e[r]=o,e[r+1]=o,e[r+2]=o;return e}(v,p);break;case sd.Ie.BlackIsZero:d=function(t,n){const{width:i,height:r}=t,e=new Uint8Array(i*r*3);let o;for(let i=0,r=0;i<t.length;++i,r+=3)o=t[i]/n*256,e[r]=o,e[r+1]=o,e[r+2]=o;return e}(v,p);break;case sd.Ie.Palette:d=function(t,n){const{width:i,height:r}=t,e=new Uint8Array(i*r*3),o=n.length/3,s=n.length/3*2;for(let i=0,r=0;i<t.length;++i,r+=3){const u=t[i];e[r]=n[u]/65536*256,e[r+1]=n[u+o]/65536*256,e[r+2]=n[u+s]/65536*256}return e}(v,l.ColorMap);break;case sd.Ie.CMYK:d=function(t){const{width:n,height:i}=t,r=new Uint8Array(n*i*3);for(let n=0,i=0;n<t.length;n+=4,i+=3){const e=t[n],o=t[n+1],s=t[n+2],u=t[n+3];r[i]=(255-e)/256*255*((255-u)/256),r[i+1]=(255-o)/256*255*((255-u)/256),r[i+2]=(255-s)/256*255*((255-u)/256)}return r}(v);break;case sd.Ie.YCbCr:d=function(t){const{width:n,height:i}=t,r=new Uint8ClampedArray(n*i*3);for(let n=0,i=0;n<t.length;n+=3,i+=3){const e=t[n],o=t[n+1],s=t[n+2];r[i]=e+1.402*(s-128),r[i+1]=e-.34414*(o-128)-.71414*(s-128),r[i+2]=e+1.772*(o-128)}return r}(v);break;case sd.Ie.CIELab:d=function(t){const{width:n,height:i}=t,r=new Uint8Array(n*i*3);for(let n=0,i=0;n<t.length;n+=3,i+=3){let e,o,s,u=(t[n+0]+16)/116,a=(t[n+1]<<24>>24)/500+u,h=u-(t[n+2]<<24>>24)/200;a=.95047*(a*a*a>.008856?a*a*a:(a-16/116)/7.787),u=1*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),h=1.08883*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),e=3.2406*a+-1.5372*u+-.4986*h,o=-.9689*a+1.8758*u+.0415*h,s=.0557*a+-.204*u+1.057*h,e=e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,r[i]=255*Math.max(0,Math.min(1,e)),r[i+1]=255*Math.max(0,Math.min(1,o)),r[i+2]=255*Math.max(0,Math.min(1,s))}return r}(v);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const t=new Uint8Array(d.length/3),n=new Uint8Array(d.length/3),i=new Uint8Array(d.length/3);for(let r=0,e=0;r<d.length;r+=3,++e)t[e]=d[r],n[e]=d[r+1],i[e]=d[r+2];d=[t,n,i]}return d.width=v.width,d.height=v.height,d}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}getGDALMetadata(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const i=this.fileDirectory.GDAL_METADATA;let r=od(i,"Item");r=null===t?r.filter((t=>void 0===ed(t,"sample"))):r.filter((n=>Number(ed(n,"sample"))===t));for(let t=0;t<r.length;++t){const i=r[t];n[ed(i,"name")]=i.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(i)return[i[0],i[5],i[10]];if(t){const[n,i,r]=t.getResolution();return[n*t.getWidth()/this.getWidth(),i*t.getHeight()/this.getHeight(),r*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(){const t=this.getOrigin(),n=this.getResolution(),i=t[0],r=t[1],e=i+n[0]*this.getWidth(),o=r+n[1]*this.getHeight();return[Math.min(i,e),Math.min(r,o),Math.max(i,e),Math.max(r,o)]}};class gd{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,n){const i=this.getUint32(t,n),r=this.getUint32(t+4,n);let e;if(n){if(e=i+2**32*r,!Number.isSafeInteger(e))throw new Error(`${e} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return e}if(e=2**32*i+r,!Number.isSafeInteger(e))throw new Error(`${e} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return e}getInt64(t,n){let i=0;const r=(128&this._dataView.getUint8(t+(n?7:0)))>0;let e=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(n?o:7-o));r&&(e?0!==s&&(s=255&~(s-1),e=!1):s=255&~s),i+=s*256**o}return r&&(i=-i),i}getUint8(t,n){return this._dataView.getUint8(t,n)}getInt8(t,n){return this._dataView.getInt8(t,n)}getUint16(t,n){return this._dataView.getUint16(t,n)}getInt16(t,n){return this._dataView.getInt16(t,n)}getUint32(t,n){return this._dataView.getUint32(t,n)}getInt32(t,n){return this._dataView.getInt32(t,n)}getFloat16(t,n){return rd(this._dataView,t,n)}getFloat32(t,n){return this._dataView.getFloat32(t,n)}getFloat64(t,n){return this._dataView.getFloat64(t,n)}}class bd{constructor(t,n,i,r){this._dataView=new DataView(t),this._sliceOffset=n,this._littleEndian=i,this._bigTiff=r}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const n=this.readUint32(t),i=this.readUint32(t+4);let r;if(this._littleEndian){if(r=n+2**32*i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*n+i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}readInt64(t){let n=0;const i=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0;let r=!0;for(let e=0;e<8;e++){let o=this._dataView.getUint8(t+(this._littleEndian?e:7-e));i&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),n+=o*256**e}return i&&(n=-n),n}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const xd="\r\n\r\n";function _d(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);const n={};for(const[i,r]of t)n[i.toLowerCase()]=r;return n}function Md(t){const n=t.split("\r\n").map((t=>{const n=t.split(":").map((t=>t.trim()));return n[0]=n[0].toLowerCase(),n}));return _d(n)}function Sd(t){let n,i,r;return t&&([,n,i,r]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),n=parseInt(n,10),i=parseInt(i,10),r=parseInt(r,10)),{start:n,end:i,total:r}}class Od{async fetch(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Promise.all(t.map((t=>this.fetchSlice(t,n))))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}var jd=i(875);function Ed(t,n){const i=Array.isArray(t)?t:Array.from(t),r=Array.isArray(n)?n:Array.from(n);return i.map(((t,n)=>[t,r[n]]))}class Td extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,Td),this.name="AbortError"}}class Pd extends Error{constructor(t,n){super(n),this.errors=t,this.message=n,this.name="AggregateError"}}const Ad=Pd;class Cd{constructor(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.offset=t,this.length=n,this.data=i}get top(){return this.offset+this.length}}class kd{constructor(t,n,i){this.offset=t,this.length=n,this.blockIds=i}}class Id extends Od{constructor(t){let{blockSize:n=65536,cacheSize:i=100}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.source=t,this.blockSize=n,this.blockCache=new jd({max:i}),this.blockRequests=new Map,this.blockIdsToFetch=new Set}get fileSize(){return this.source.fileSize}async fetch(t,n){const i=new Map,r=new Map,e=new Set;for(const{offset:n,length:o}of t){let t=n+o;const{fileSize:s}=this;null!==s&&(t=Math.min(t,s));for(let o=Math.floor(n/this.blockSize)*this.blockSize;o<t;o+=this.blockSize){const t=Math.floor(o/this.blockSize);this.blockCache.has(t)?i.set(t,this.blockCache.get(t)):this.blockRequests.has(t)?r.set(t,this.blockRequests.get(t)):(this.blockIdsToFetch.has(t)||this.blockIdsToFetch.add(t),e.add(t))}}await async function(t){return new Promise((n=>setTimeout(n,t)))}(),this.fetchBlocks(n);for(const t of e){const n=this.blockRequests.get(t),e=this.blockCache.get(t);if(n)r.set(t,n);else{if(!e)throw new Error(`Block ${t} is not in the block requests`);i.set(t,e)}}let o=await Promise.allSettled(Array.from(r.values()));if(o.some((t=>"rejected"===t.status))){const t=new Set;for(const[i,e]of Ed(r.keys(),o)){const{rejected:r,reason:o}=e;r&&"AbortError"===o.name&&o.signal!==n&&(this.blockIdsToFetch.add(i),t.add(i))}if(this.blockIdsToFetch.length>0){this.fetchBlocks(n);for(const n of t){const t=this.blockRequests.get(n);if(!t)throw new Error(`Block ${n} is not in the block requests`);r.set(n,t)}o=await Promise.allSettled(Array.from(r.values()))}}if(o.some((t=>"rejected"===t.status))){if(n&&n.aborted)throw new Td("Request was aborted");throw new Ad(o.filter((t=>"rejected"===t.status)).map((t=>t.reason)),"Request failed")}const s=o.map((t=>t.value)),u=new Map(Ed(Array.from(r.keys()),s));for(const[t,n]of i)u.set(t,n);return this.readSliceData(t,u)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),i=this.source.fetch(n,t);for(let r=0;r<n.length;++r){const e=n[r];for(const n of e.blockIds){const e=(async()=>{try{const t=(await i)[r],e=n*this.blockSize,o=e-t.offset,s=Math.min(o+this.blockSize,t.data.byteLength),u=t.data.slice(o,s),a=new Cd(e,u.byteLength,u);return this.blockCache.set(n,a),a}catch(n){throw"AbortError"===n.name&&(n.signal=t),n}finally{this.blockRequests.delete(n)}})();this.blockRequests.set(n,e)}}this.blockIdsToFetch.clear()}}groupBlocks(t){const n=Array.from(t).sort(((t,n)=>t-n));if(0===n.length)return[];let i=[],r=null;const e=[];for(const t of n)null===r||r+1===t?(i.push(t),r=t):(e.push(new kd(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[t],r=t);return e.push(new kd(i[0]*this.blockSize,i.length*this.blockSize,i)),e}readSliceData(t,n){return t.map((t=>{const i=t.offset+t.length,r=Math.floor(t.offset/this.blockSize),e=Math.floor((t.offset+t.length)/this.blockSize),o=new ArrayBuffer(t.length),s=new Uint8Array(o);for(let o=r;o<=e;++o){const r=n.get(o),e=r.offset-t.offset,u=r.top-i;let a,h=0,f=0;e<0?h=-e:e>0&&(f=e),a=u<0?r.length-h:i-r.offset-h;const c=new Uint8Array(r.data,h,a);s.set(c,f)}return o}))}}class Nd{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class zd{constructor(t){this.url=t}async request(){let{headers:t,credentials:n,signal:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};throw new Error("request is not implemented")}}class Ld extends Nd{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Rd extends zd{constructor(t,n){super(t),this.credentials=n}async request(){let{headers:t,credentials:n,signal:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await fetch(this.url,{headers:t,credentials:n,signal:i});return new Ld(r)}}class Fd extends Nd{constructor(t,n){super(),this.xhr=t,this.data=n}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class Gd extends zd{constructRequest(t,n){return new Promise(((i,r)=>{const e=new XMLHttpRequest;e.open("GET",this.url),e.responseType="arraybuffer";for(const[n,i]of Object.entries(t))e.setRequestHeader(n,i);e.onload=()=>{const t=e.response;i(new Fd(e,t))},e.onerror=r,e.onabort=()=>r(new Td("Request aborted")),e.send(),n&&(n.aborted&&e.abort(),n.addEventListener("abort",(()=>e.abort())))}))}async request(){let{headers:t,signal:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.constructRequest(t,n)}}var Dd=i(752),Ud=i(640),qd=i(630);class Bd extends Nd{constructor(t,n){super(),this.response=t,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class Xd extends zd{constructor(t){super(t),this.parsedUrl=qd.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?Dd:Ud}constructRequest(t,n){return new Promise(((i,r)=>{const e=this.httpApi.get({...this.parsedUrl,headers:t},(t=>{const n=new Promise((n=>{const i=[];t.on("data",(t=>{i.push(t)})),t.on("end",(()=>{const t=Buffer.concat(i).buffer;n(t)})),t.on("error",r)}));i(new Bd(t,n))}));e.on("error",r),n&&(n.aborted&&e.destroy(new Td("Request aborted")),n.addEventListener("abort",(()=>e.destroy(new Td("Request aborted")))))}))}async request(){let{headers:t,signal:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.constructRequest(t,n)}}class Yd extends Od{constructor(t,n,i,r){super(),this.client=t,this.headers=n,this.maxRanges=i,this.allowFullFile=r,this._fileSize=null}async fetch(t,n){return this.maxRanges>=t.length?this.fetchSlices(t,n):(this.maxRanges>0&&t.length,Promise.all(t.map((t=>this.fetchSlice(t,n)))))}async fetchSlices(t,n){const i=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map((t=>{let{offset:n,length:i}=t;return`${n}-${n+i}`})).join(",")}`},signal:n});if(i.ok){if(206===i.status){const{type:r,params:e}=function(t){const[n,...i]=t.split(";").map((t=>t.trim()));return{type:n,params:_d(i.map((t=>t.split("="))))}}(i.getHeader("content-type"));if("multipart/byteranges"===r){const t=function(t,n){let i=null;const r=new TextDecoder("ascii"),e=[],o=`--${n}`,s=`${o}--`;for(let n=0;n<10;++n)r.decode(new Uint8Array(t,n,o.length))===o&&(i=n);if(null===i)throw new Error("Could not find initial boundary");for(;i<t.byteLength;){const n=r.decode(new Uint8Array(t,i,Math.min(o.length+1024,t.byteLength-i)));if(0===n.length||n.startsWith(s))break;if(!n.startsWith(o))throw new Error("Part does not start with boundary");const u=n.substr(o.length+2);if(0===u.length)break;const a=u.indexOf(xd),h=Md(u.substr(0,a)),{start:f,end:c,total:l}=Sd(h["content-range"]),v=i+o.length+a+xd.length,p=parseInt(c,10)+1-parseInt(f,10);e.push({headers:h,data:t.slice(v,v+p),offset:f,length:p,fileSize:l}),i=v+p+4}return e}(await i.getData(),e.boundary);return this._fileSize=t[0].fileSize||null,t}const o=await i.getData(),{start:s,end:u,total:a}=Sd(i.getHeader("content-range"));this._fileSize=a||null;const h=[{data:o,offset:s,length:u-s}];if(t.length>1){const i=await Promise.all(t.slice(1).map((t=>this.fetchSlice(t,n))));return h.concat(i)}return h}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await i.getData();return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(t,n){const{offset:i,length:r}=t,e=await this.client.request({headers:{...this.headers,Range:`bytes=${i}-${i+r}`},signal:n});if(e.ok){if(206===e.status){const t=await e.getData(),{total:n}=Sd(e.getHeader("content-range"));return this._fileSize=n||null,{data:t,offset:i,length:r}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await e.getData();return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Zd(t,n){let{blockSize:i,cacheSize:r}=n;return null===i?t:new Id(t,i,r)}function Vd(t){let{headers:n={},credentials:i,maxRanges:r=0,allowFullFile:e=!1,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new Rd(t,i),u=new Yd(s,n,r,e);return Zd(u,o)}function Wd(t){let{headers:n={},maxRanges:i=0,allowFullFile:r=!1,...e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=new Gd(t),s=new Yd(o,n,i,r);return Zd(s,e)}function $d(t){let{headers:n={},maxRanges:i=0,allowFullFile:r=!1,...e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=new Xd(t),s=new Yd(o,n,i,r);return Zd(s,e)}function Kd(t){let{forceXHR:n=!1,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"function"!=typeof fetch||n?"undefined"!=typeof XMLHttpRequest?Wd(t,i):$d(t,i):Vd(t,i)}class Hd extends Od{constructor(t){super(),this.file=t}async fetchSlice(t,n){return new Promise(((i,r)=>{const e=this.file.slice(t.offset,t.offset+t.length),o=new FileReader;o.onload=t=>i(t.target.result),o.onerror=r,o.onabort=r,o.readAsArrayBuffer(e),n&&n.addEventListener("abort",(()=>o.abort()))}))}}function Jd(t){switch(t){case sd.sf.BYTE:case sd.sf.ASCII:case sd.sf.SBYTE:case sd.sf.UNDEFINED:return 1;case sd.sf.SHORT:case sd.sf.SSHORT:return 2;case sd.sf.LONG:case sd.sf.SLONG:case sd.sf.FLOAT:case sd.sf.IFD:return 4;case sd.sf.RATIONAL:case sd.sf.SRATIONAL:case sd.sf.DOUBLE:case sd.sf.LONG8:case sd.sf.SLONG8:case sd.sf.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${t}`)}}function Qd(t,n,i,r){let e=null,o=null;const s=Jd(n);switch(n){case sd.sf.BYTE:case sd.sf.ASCII:case sd.sf.UNDEFINED:e=new Uint8Array(i),o=t.readUint8;break;case sd.sf.SBYTE:e=new Int8Array(i),o=t.readInt8;break;case sd.sf.SHORT:e=new Uint16Array(i),o=t.readUint16;break;case sd.sf.SSHORT:e=new Int16Array(i),o=t.readInt16;break;case sd.sf.LONG:case sd.sf.IFD:e=new Uint32Array(i),o=t.readUint32;break;case sd.sf.SLONG:e=new Int32Array(i),o=t.readInt32;break;case sd.sf.LONG8:case sd.sf.IFD8:e=new Array(i),o=t.readUint64;break;case sd.sf.SLONG8:e=new Array(i),o=t.readInt64;break;case sd.sf.RATIONAL:e=new Uint32Array(2*i),o=t.readUint32;break;case sd.sf.SRATIONAL:e=new Int32Array(2*i),o=t.readInt32;break;case sd.sf.FLOAT:e=new Float32Array(i),o=t.readFloat32;break;case sd.sf.DOUBLE:e=new Float64Array(i),o=t.readFloat64;break;default:throw new RangeError(`Invalid field type: ${n}`)}if(n!==sd.sf.RATIONAL&&n!==sd.sf.SRATIONAL)for(let n=0;n<i;++n)e[n]=o.call(t,r+n*s);else for(let n=0;n<i;n+=2)e[n]=o.call(t,r+n*s),e[n+1]=o.call(t,r+(n*s+4));return n===sd.sf.ASCII?new TextDecoder("utf-8").decode(e):e}class ty{constructor(t,n,i){this.fileDirectory=t,this.geoKeyDirectory=n,this.nextIFDByteOffset=i}}class ny extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class iy{async readRasters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{window:n,width:i,height:r}=t;let{resX:e,resY:o,bbox:s}=t;const u=await this.getImage();let a=u;const h=await this.getImageCount(),f=u.getBoundingBox();if(n&&s)throw new Error('Both "bbox" and "window" passed.');if(i||r){if(n){const[t,i]=u.getOrigin(),[r,e]=u.getResolution();s=[t+n[0]*r,i+n[1]*e,t+n[2]*r,i+n[3]*e]}const t=s||f;if(i){if(e)throw new Error("Both width and resX passed");e=(t[2]-t[0])/i}if(r){if(o)throw new Error("Both width and resY passed");o=(t[3]-t[1])/r}}if(e||o){const t=[];for(let n=0;n<h;++n){const i=await this.getImage(n),{SubfileType:r,NewSubfileType:e}=i.fileDirectory;(0===n||2===r||1&e)&&t.push(i)}t.sort(((t,n)=>t.getWidth()-n.getWidth()));for(let n=0;n<t.length;++n){const i=t[n],r=(f[2]-f[0])/i.getWidth(),s=(f[3]-f[1])/i.getHeight();if(a=i,e&&e>r||o&&o>s)break}}let c=n;if(s){const[t,n]=u.getOrigin(),[i,r]=a.getResolution(u);c=[Math.round((s[0]-t)/i),Math.round((s[1]-n)/r),Math.round((s[2]-t)/i),Math.round((s[3]-n)/r)],c=[Math.min(c[0],c[2]),Math.min(c[1],c[3]),Math.max(c[0],c[2]),Math.max(c[1],c[3])]}return a.readRasters({...t,window:c})}}class ry extends iy{constructor(t,n,i,r){let e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};super(),this.source=t,this.littleEndian=n,this.bigTiff=i,this.firstIFDOffset=r,this.cache=e.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,n){const i=this.bigTiff?4048:1024;return new bd((await this.source.fetch([{offset:t,length:void 0!==n?n:i}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const n=this.bigTiff?20:12,i=this.bigTiff?8:2;let r=await this.getSlice(t);const e=this.bigTiff?r.readUint64(t):r.readUint16(t),o=e*n+(this.bigTiff?16:6);r.covers(t,o)||(r=await this.getSlice(t,o));const s={};let u=t+(this.bigTiff?8:2);for(let t=0;t<e;u+=n,++t){const t=r.readUint16(u),n=r.readUint16(u+2),i=this.bigTiff?r.readUint64(u+4):r.readUint32(u+4);let e,o;const a=Jd(n),h=u+(this.bigTiff?12:8);if(a*i<=(this.bigTiff?8:4))e=Qd(r,n,i,h);else{const t=r.readOffset(h),o=Jd(n)*i;if(r.covers(t,o))e=Qd(r,n,i,t);else{e=Qd(await this.getSlice(t,o),n,i,t)}}o=1===i&&-1===sd.It.indexOf(t)&&n!==sd.sf.RATIONAL&&n!==sd.sf.SRATIONAL?e[0]:e,s[sd.L[t]]=o}const a=function(t){const n=t.GeoKeyDirectory;if(!n)return null;const i={};for(let r=4;r<=4*n[3];r+=4){const e=sd.P1[n[r]],o=n[r+1]?sd.L[n[r+1]]:null,s=n[r+2],u=n[r+3];let a=null;if(o){if(a=t[o],null==a)throw new Error(`Could not get value of geoKey '${e}'.`);"string"==typeof a?a=a.substring(u,u+s-1):a.subarray&&(a=a.subarray(u,u+s),1===s&&(a=a[0]))}else a=u;i[e]=a}return i}(s),h=r.readOffset(t+i+n*e);return new ty(s,a,h)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(n){if(n instanceof ny)throw new ny(t);throw n}return this.ifdRequests[t]=(async()=>{const n=await this.ifdRequests[t-1];if(0===n.nextIFDByteOffset)throw new ny(t);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const n=await this.requestIFD(t);return new wd(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,n=!0;for(;n;)try{await this.requestIFD(t),++t}catch(t){if(!(t instanceof ny))throw t;n=!1}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",i=n.length+100;let r=await this.getSlice(t,i);if(n===Qd(r,sd.sf.ASCII,n.length,t)){const n=Qd(r,sd.sf.ASCII,i,t).split("\n")[0],e=Number(n.split("=")[1].split(" ")[0])+n.length;e>i&&(r=await this.getSlice(t,e));const o=Qd(r,sd.sf.ASCII,e,t);this.ghostValues={},o.split("\n").filter((t=>t.length>0)).map((t=>t.split("="))).forEach((t=>{let[n,i]=t;this.ghostValues[n]=i}))}return this.ghostValues}static async fromSource(t,n,i){const r=(await t.fetch([{offset:0,length:1024}],i))[0],e=new gd(r),o=e.getUint16(0,0);let s;if(18761===o)s=!0;else{if(19789!==o)throw new TypeError("Invalid byte order value.");s=!1}const u=e.getUint16(2,s);let a;if(42===u)a=!1;else{if(43!==u)throw new TypeError("Invalid magic number.");a=!0;if(8!==e.getUint16(4,s))throw new Error("Unsupported offset byte-size.")}const h=a?e.getUint64(8,s):e.getUint32(4,s);return new ry(t,s,a,h,n)}close(){return"function"==typeof this.source.close&&this.source.close()}}class ey extends iy{constructor(t,n){super(),this.mainFile=t,this.overviewFiles=n,this.imageFiles=[t].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((t=>t.parseFileDirectoryAt(t.firstIFDOffset))));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,i=0;for(let r=0;r<this.imageFiles.length;r++){const e=this.imageFiles[r];for(let o=0;o<this.imageCounts[r];o++){if(t===n){const t=await e.requestIFD(i);return new wd(t.fileDirectory,t.geoKeyDirectory,e.dataView,e.littleEndian,e.cache,e.source)}n++,i++}i=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((t=>t.getImageCount())));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce(((t,n)=>t+n),0),this.imageCount}}async function oy(t,n){return ry.fromSource(new Hd(t),n)}const sy="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2;var uy,ay=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sy,n=arguments.length>1?arguments[1]:void 0;this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise((t=>{i.e(231).then(i.bind(i,231)).then((n=>{t(n.create)}))})),this._awaitingDecoder.then((n=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<t;i++)this.workers.push({worker:n(),idle:!0})})))}async decode(t,n){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?hd(t).then((i=>i.decode(t,n))):new Promise((i=>{const r=this.workers.find((t=>t.idle))||this.workers[Math.floor(Math.random()*this.size)];r.idle=!1;const e=this.messageId++,o=t=>{t.data.id===e&&(r.idle=!0,i(t.data.decoded),r.worker.removeEventListener("message",o))};r.worker.addEventListener("message",o),r.worker.postMessage({fileDirectory:t,buffer:n,id:e},[n])}))}destroy(){this.workers&&(this.workers.forEach((t=>{t.worker.terminate()})),this.workers=null)}},hy=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fy="STATISTICS_MAXIMUM",cy="STATISTICS_MINIMUM";function ly(t){try{return t.getBoundingBox()}catch(i){var n=t.fileDirectory;return[0,0,n.ImageWidth,n.ImageLength]}}function vy(t){try{return t.getOrigin().slice(0,2)}catch(n){return[0,t.fileDirectory.ImageLength]}}function py(t,n){try{return t.getResolution(n)}catch(i){return[n.fileDirectory.ImageWidth/t.fileDirectory.ImageWidth,n.fileDirectory.ImageHeight/t.fileDirectory.ImageHeight]}}function dy(t){var n=t.geoKeys;if(!n)return null;if(n.ProjectedCSTypeGeoKey){if(!(r=yr(i="EPSG:"+n.ProjectedCSTypeGeoKey)))(e=Nt(n.ProjLinearUnitsGeoKey))&&(r=new ei({code:i,units:e}));return r}if(n.GeographicTypeGeoKey){var i,r,e;if(!(r=yr(i="EPSG:"+n.GeographicTypeGeoKey)))(e=Nt(n.GeogAngularUnitsGeoKey))&&(r=new ei({code:i,units:e}));return r}return null}function yy(t){return t.getImageCount().then((function(n){for(var i=new Array(n),r=0;r<n;++r)i[r]=t.getImage(r);return Promise.all(i)}))}function my(t,n){var i;return i=t.blob?oy(t.blob):t.overviews?async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const e=await ry.fromSource(Kd(t,i),r),o=await Promise.all(n.map((t=>ry.fromSource(Kd(t,i)))));return new ey(e,o)}(t.url,t.overviews,n):async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return ry.fromSource(Kd(t,n),i)}(t.url,n),i.then(yy)}function wy(t,n,i,r,e){if(Array.isArray(t)){var o=t.length;if(!Array.isArray(n)||o!=n.length){var s=new Error(r);throw e(s),s}for(var u=0;u<o;++u)wy(t[u],n[u],i,r,e)}else if(Math.abs(t-n)>i*t)throw new Error(r)}function gy(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function by(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}var xy=function(t){function n(n){var i=t.call(this,{state:"loading",tileGrid:null,projection:null,opaque:n.opaque,transition:n.transition,interpolate:!1!==n.interpolate,wrapX:n.wrapX})||this;i.Qa=n.sources;var r=i.Qa.length;i.th=n.sourceOptions,i.nh=new Array(r),i.ih=new Array(r),i.rh,i.eh,i.oh,i.sh=!1!==n.normalize,i.uh=!1,i.V=null,i.ah=n.convertToRGB?"readRGB":"readRasters",i.setKey(i.Qa.map((function(t){return t.url})).join(","));for(var e=i,o=new Array(r),s=0;s<r;++s)o[s]=my(i.Qa[s],i.th);return Promise.all(o).then((function(t){e.hh(t)})).catch((function(t){console.error(t),e.V=t,e.setState("error")})),i}return hy(n,t),n.prototype.getError=function(){return this.V},n.prototype.hh=function(t){for(var n,i,r,e,o,s=new Array(t.length),u=new Array(t.length),a=new Array(t.length),h=0,f=t.length,c=function(f){var c=t[f],v=c.length,p=void 0,d=void 0,y=new Array(v),m=new Array(v),w=new Array(v);u[f]=new Array(v),a[f]=new Array(v);for(var g=0;g<v;++g){var b=c[g],x=b.getGDALNoData();a[f][g]=b.getGDALMetadata(0),u[f][g]=x;var _=l.Qa[f].bands;s[f]=_?_.length:b.getSamplesPerPixel();var M=v-(g+1);p||(p=ly(b)),d||(d=vy(b));var S=py(b,c[0]);w[M]=S[0];var O=[b.getTileWidth(),b.getTileHeight()];y[M]=O;var j=S[0]/Math.abs(S[1]);m[M]=[O[0],O[1]/j]}if(n?Zn(n,p,n):n=p,i){var E="Origin mismatch for source ".concat(f,", got [").concat(d,"] but expected [").concat(i,"]");wy(i,d,0,E,l.viewRejector)}else i=d;if(o){o.length-h>w.length&&(h=o.length-w.length);var T=o[o.length-1]/w[w.length-1];l.ih[f]=T;var P=w.map((function(t){return t*T}));E="Resolution mismatch for source ".concat(f,", got [").concat(P,"] but expected [").concat(o,"]");wy(o.slice(h,o.length),P,.02,E,l.viewRejector)}else o=w,l.ih[f]=1;r?wy(r.slice(h,r.length),m,.01,"Tile size mismatch for source ".concat(f),l.viewRejector):r=m,e?wy(e.slice(h,e.length),y,0,"Tile size mismatch for source ".concat(f),l.viewRejector):e=y,l.nh[f]=c.reverse()},l=this,v=0;v<f;++v)c(v);for(var p=0,d=this.nh.length;p<d;++p)for(var y=this.nh[p];y.length<o.length;)y.unshift(void 0);if(!this.getProjection()){var m=t[0];for(p=m.length-1;p>=0;--p){var w=dy(m[p]);if(w){this.projection=w;break}}}this.rh=s,this.eh=u,this.oh=a;t:for(v=0;v<f;++v){if(void 0!==this.Qa[v].nodata){this.uh=!0;break}var g=u[v],b=this.Qa[v].bands;if(b){for(p=0;p<b.length;++p)if(null!==g[b[p]-1]){this.uh=!0;break t}}else for(var x=0;x<g.length;++x)if(null!==g[x]){this.uh=!0;break t}}var _=this.uh?1:0;this.bandCount=s.reduce((function(t,n){return t+=n}),0)+_;var M=new qf({extent:n,minZoom:h,origin:i,resolutions:o,tileSizes:r});this.tileGrid=M,this.setTileSizes(e),this.setLoader(this.fh.bind(this)),this.setState("ready"),this.viewResolver({projection:this.projection,resolutions:o,center:kr(Un(n),this.projection),extent:Nr(n,this.projection),zoom:0})},n.prototype.fh=function(t,n,i){for(var r=this.getTileSize(t),e=this.nh.length,o=new Array(e),s=this.uh,u=this.bandCount,a=this.rh,h=this.eh,f=this.Qa,c=function(e){var s=f[e],u=l.ih[e],a=[Math.round(n*(r[0]*u)),Math.round(i*(r[1]*u)),Math.round((n+1)*(r[0]*u)),Math.round((i+1)*(r[1]*u))],c=l.nh[e][t],v=void 0;s.bands&&(v=s.bands.map((function(t){return t-1})));var p=void 0;p="nodata"in s&&null!==s.nodata?s.nodata:v?v.map((function(t){return h[e][t]})):h[e],o[e]=c[l.ah]({window:a,width:r[0],height:r[1],samples:v,fillValue:p,pool:(uy||(uy=new ay),uy),interleave:!1})},l=this,v=0;v<e;++v)c(v);var p=r[0]*r[1],d=p*u,y=this.sh,m=this.oh;return Promise.all(o).then((function(t){var n;n=y?new Uint8Array(d):new Float32Array(d);for(var i=0,r=0;r<p;++r){for(var o=s,u=0;u<e;++u){var c=f[u],l=c.min,v=c.max,w=void 0,g=void 0;if(y){var b=m[u][0];void 0===l&&(l=b&&cy in b?parseFloat(b.STATISTICS_MINIMUM):gy(t[u][0])),void 0===v&&(v=b&&fy in b?parseFloat(b.STATISTICS_MAXIMUM):by(t[u][0])),g=-l*(w=255/(v-l))}for(var x=0;x<a[u];++x){var _=t[u][x][r],M=void 0;if(M=y?oi(w*_+g,0,255):_,s){var S=c.nodata;if(void 0===S){var O=void 0;O=c.bands?c.bands[x]-1:x,S=h[u][O]}var j=isNaN(S);(!j&&_!==S||j&&!isNaN(_))&&(o=!1,n[i]=M)}else n[i]=M;i++}}s&&(o||(n[i]=255),i++)}return n})).catch((function(t){throw console.error(t),t}))},n}(qp);xy.prototype.getView;var _y=xy,My=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sy=function(t){function n(n,i,r,e,o,s,u){var a=t.call(this,i,r,e,o,s,u)||this;return a.lh=null,a.jo=n,a}return My(n,t),n.prototype.getImage=function(){if(this.lh)return this.lh;var n=t.prototype.getImage.call(this);if(this.state==pt){var i=this.jo;if(n.width==i[0]&&n.height==i[1])return this.lh=n,n;var r=To(i[0],i[1]);return r.drawImage(n,0,0),this.lh=r.canvas,r.canvas}return n},n}(Ro),Oy=function(t){function n(n){var i=this,r=n,e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.size,s=void 0!==r.tierSizeCalculation?r.tierSizeCalculation:"default",u=r.tilePixelRatio||1,a=o[0],h=o[1],f=[],c=r.tileSize||Fu,l=c*u;switch(s){case"default":for(;a>l||h>l;)f.push([Math.ceil(a/l),Math.ceil(h/l)]),l+=l;break;case"truncated":for(var v=a,p=h;v>l||p>l;)f.push([Math.ceil(v/l),Math.ceil(p/l)]),v>>=1,p>>=1;break;default:Et(!1,53)}f.push([1,1]),f.reverse();for(var d=[u],y=[0],m=1,w=f.length;m<w;m++)d.push(u<<m),y.push(f[m-1][0]*f[m-1][1]+y[m-1]);d.reverse();var g=new qf({tileSize:c,extent:r.extent||[0,-h,a,0],resolutions:d}),b=r.url;b&&-1==b.indexOf("{TileGroup}")&&-1==b.indexOf("{tileIndex}")&&(b+="{TileGroup}/{z}-{x}-{y}.jpg");var x=tc(b),_=c*u;var M=Jf(x.map((function(t){return function(n,i,r){if(n){var e=n[0],o=n[1],s=n[2],u=o+s*f[e][0],a={z:e,x:o,y:s,tileIndex:u,TileGroup:"TileGroup"+((u+y[e])/_|0)};return t.replace(/\{(\w+?)\}/g,(function(t,n){return a[n]}))}}}))),S=Sy.bind(null,aa(c*u));(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,tilePixelRatio:u,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:S,tileGrid:g,tileUrlFunction:M,transition:r.transition})||this).zDirection=r.zDirection;var O=M(g.getTileCoordForCoordAndResolution(Un(g.getExtent()),d[d.length-1]),1,null),j=new Image;return j.addEventListener("error",function(){_=c,this.changed()}.bind(i)),j.src=O,i}return My(n,t),n}(mp),jy=Oy,Ey=function(t,n,i){if(i||2===arguments.length)for(var r,e=0,o=n.length;e<o;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))},Ty="version1",Py="version2",Ay="version3",Cy={};Cy[Ty]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},Cy[Py]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},Cy[Ay]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},Cy.none={none:{supports:[],formats:[],qualities:[]}};var ky=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Iy=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,Ny=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;var zy={};zy[Ty]=function(t){var n=t.getComplianceLevelSupportedFeatures();return void 0===n&&(n=Cy[Ty].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:n.supports,formats:Ey(Ey([],n.formats,!0),[void 0===t.imageInfo.formats?[]:t.imageInfo.formats],!1),qualities:Ey(Ey([],n.qualities,!0),[void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],!1),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},zy[Py]=function(t){var n=t.getComplianceLevelSupportedFeatures(),i=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,r=i&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],e=i&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=i&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:Ey(Ey([],n.supports,!0),r,!0),formats:Ey(Ey([],n.formats,!0),e,!0),qualities:Ey(Ey([],n.qualities,!0),o,!0)}},zy[Ay]=function(t){var n=t.getComplianceLevelSupportedFeatures(),i=void 0===t.imageInfo.extraFormats?n.formats:Ey(Ey([],n.formats,!0),t.imageInfo.extraFormats,!0),r=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return y(["jpg","png","gif"],t)})).reduce((function(t,n){return void 0===t&&y(i,n)?n:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?n.supports:Ey(Ey([],n.supports,!0),t.imageInfo.extraFeatures,!0),formats:i,qualities:void 0===t.imageInfo.extraQualities?n.qualities:Ey(Ey([],n.qualities,!0),t.imageInfo.extraQualities,!0),preferredFormat:r}};var Ly=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)switch(t[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Ty;case"http://iiif.io/api/image/2/context.json":return Py;case"http://iiif.io/api/image/3/context.json":return Ay;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Ty)&&this.imageInfo.identifier)return Ty}Et(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case Ty:if(ky.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Ay:if(Ny.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Py:if("string"==typeof this.imageInfo.profile&&Iy.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&Iy.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var n=this.getComplianceLevelEntryFromProfile(t);if(void 0!==n){var i=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(i)?i[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(t);return void 0===n?Cy.none.none:Cy[t][n]}},t.prototype.getTileSourceOptions=function(t){var n=t||{},i=this.getImageApiVersion();if(void 0!==i){var r=void 0===i?void 0:zy[i](this);if(void 0!==r)return{url:r.url,version:i,size:[this.imageInfo.width,this.imageInfo.height],sizes:r.sizes,format:void 0!==n.format&&y(r.formats,n.format)?n.format:void 0!==r.preferredFormat?r.preferredFormat:"jpg",supports:r.supports,quality:n.quality&&y(r.qualities,n.quality)?n.quality:y(r.qualities,"native")?"native":"default",resolutions:Array.isArray(r.resolutions)?r.resolutions.sort((function(t,n){return n-t})):void 0,tileSize:r.tileSize}}},t}(),Ry=Ly,Fy=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Gy(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var Dy=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.url||"";o+=o.lastIndexOf("/")===o.length-1||""===o?"":"/";var s=r.version||Py,u=r.sizes||[],a=r.size;Et(null!=a&&Array.isArray(a)&&2==a.length&&!isNaN(a[0])&&a[0]>0&&!isNaN(a[1])&&a[1]>0,60);var h,f,c,l=a[0],v=a[1],p=r.tileSize,d=r.tilePixelRatio||1,m=r.format||"jpg",w=r.quality||(r.version==Ty?"native":"default"),g=r.resolutions||[],b=r.supports||[],x=r.extent||[0,-v,l,0],_=null!=u&&Array.isArray(u)&&u.length>0,M=void 0!==p&&("number"==typeof p&&Number.isInteger(p)&&p>0||Array.isArray(p)&&p.length>0),S=null!=b&&Array.isArray(b)&&(y(b,"regionByPx")||y(b,"regionByPct"))&&(y(b,"sizeByWh")||y(b,"sizeByH")||y(b,"sizeByW")||y(b,"sizeByPct"));if(g.sort((function(t,n){return n-t})),M||S)if(null!=p&&("number"==typeof p&&Number.isInteger(p)&&p>0?(h=p,f=p):Array.isArray(p)&&p.length>0&&((1==p.length||null==p[1]&&Number.isInteger(p[0]))&&(h=p[0],f=p[0]),2==p.length&&(Number.isInteger(p[0])&&Number.isInteger(p[1])?(h=p[0],f=p[1]):null==p[0]&&Number.isInteger(p[1])&&(h=p[1],f=p[1])))),void 0!==h&&void 0!==f||(h=Fu,f=Fu),0==g.length)for(var O=c=Math.max(Math.ceil(Math.log(l/h)/Math.LN2),Math.ceil(Math.log(v/f)/Math.LN2));O>=0;O--)g.push(Math.pow(2,O));else{var j=Math.max.apply(Math,g);c=Math.round(Math.log(j)/Math.LN2)}else if(h=l,f=v,g=[],_){u.sort((function(t,n){return t[0]-n[0]})),c=-1;var E=[];for(O=0;O<u.length;O++){var T=l/u[O][0];g.length>0&&g[g.length-1]==T?E.push(O):(g.push(T),c++)}if(E.length>0)for(O=0;O<E.length;O++)u.splice(E[O]-O,1)}else g.push(1),u.push([l,v]),c=0;var P=new qf({tileSize:[h,f],extent:x,origin:Vn(x),resolutions:g}),A=Sy.bind(null,aa(p||256).map((function(t){return t*d})));return i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:r.state,tileClass:A,tileGrid:P,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:function(t,n,i){var r,e,a=t[0];if(!(a>c)){var p=t[1],d=t[2],x=g[a];if(!(void 0===p||void 0===d||void 0===x||p<0||Math.ceil(l/x/h)<=p||d<0||Math.ceil(v/x/f)<=d)){if(S||M){var O=p*h*x,j=d*f*x,E=h*x,T=f*x,P=h,A=f;if(O+E>l&&(E=l-O),j+T>v&&(T=v-j),O+h*x>l&&(P=Math.floor((l-O+x-1)/x)),j+f*x>v&&(A=Math.floor((v-j+x-1)/x)),0==O&&E==l&&0==j&&T==v)r="full";else if(!S||y(b,"regionByPx"))r=O+","+j+","+E+","+T;else if(y(b,"regionByPct")){r="pct:"+Gy(O/l*100)+","+Gy(j/v*100)+","+Gy(E/l*100)+","+Gy(T/v*100)}s!=Ay||S&&!y(b,"sizeByWh")?!S||y(b,"sizeByW")?e=P+",":y(b,"sizeByH")?e=","+A:y(b,"sizeByWh")?e=P+","+A:y(b,"sizeByPct")&&(e="pct:"+Gy(100/x)):e=P+","+A}else if(r="full",_){var C=u[a][0],k=u[a][1];e=s==Ay?C==l&&k==v?"max":C+","+k:C==l?"full":C+","}else e=s==Ay?"max":"full";return o+r+"/"+e+"/0/"+w+"."+m}}},transition:r.transition})||this,i.zDirection=r.zDirection,i}return Fy(n,t),n}(mp),Uy=Dy,qy=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),By=function(t){function n(n,i,r,e,o,s,u){var a=this,h=n.getExtent(),f=i.getExtent(),c=f?Zn(r,f):r,l=Rf(n,i,Un(c),e),v=new vl(n,i,c,h,.5*l,e),p=s(v.calculateSourceExtent(),l,o),d=p?wo:_o,y=p?p.getPixelRatio():1;return(a=t.call(this,r,e,y,d)||this).vs=i,a.ds=h,a.Is=v,a.wi=e,a.ph=r,a.dh=p,a.yh=y,a.pa=u,a.Ut=null,a.mh=null,a}return qy(n,t),n.prototype.disposeInternal=function(){this.state==go&&this.wh(),t.prototype.disposeInternal.call(this)},n.prototype.getImage=function(){return this.Ut},n.prototype.getProjection=function(){return this.vs},n.prototype.Ns=function(){var t=this.dh.getState();if(t==bo){var n=$n(this.ph)/this.wi,i=Yn(this.ph)/this.wi;this.Ut=Gf(n,i,this.yh,this.dh.getResolution(),this.ds,this.wi,this.ph,this.Is,[{extent:this.dh.getExtent(),image:this.dh.getImage()}],0,void 0,this.pa)}this.state=t,this.changed()},n.prototype.load=function(){if(this.state==wo){this.state=go,this.changed();var t=this.dh.getState();t==bo||t==xo?this.Ns():(this.mh=$(this.dh,z,(function(t){var n=this.dh.getState();n!=bo&&n!=xo||(this.wh(),this.Ns())}),this),this.dh.load())}},n.prototype.wh=function(){H(this.mh),this.mh=null},n}(mo),Xy=By,Yy=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zy="imageloadstart",Vy="imageloadend",Wy="imageloaderror",$y=function(t){function n(n,i){var r=t.call(this,n)||this;return r.image=i,r}return Yy(n,t),n}(c),Ky=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,projection:n.projection,state:n.state,interpolate:r})||this).on,i.once,i.un,i.Ti=void 0!==n.resolutions?n.resolutions:null,i.gh=null,i.bh=0,i}return Yy(n,t),n.prototype.getResolutions=function(){return this.Ti},n.prototype.findNearestResolution=function(t){if(this.Ti){var n=m(this.Ti,t,0);t=this.Ti[n]}return t},n.prototype.getImage=function(t,n,i,r){var e=this.getProjection();if(e&&r&&!Sr(e,r)){if(this.gh){if(this.bh==this.getRevision()&&Sr(this.gh.getProjection(),r)&&this.gh.getResolution()==n&&Pn(this.gh.getExtent(),t))return this.gh;this.gh.dispose(),this.gh=null}return this.gh=new Xy(e,r,t,n,i,function(t,n,i){return this.getImageInternal(t,n,i,e)}.bind(this),this.getInterpolate()),this.bh=this.getRevision(),this.gh}return e&&(r=e),this.getImageInternal(t,n,i,r)},n.prototype.getImageInternal=function(t,n,i,e){return r()},n.prototype.handleImageChange=function(t){var n,i=t.target;switch(i.getState()){case go:this.loading=!0,n=Zy;break;case bo:this.loading=!1,n=Vy;break;case xo:this.loading=!1,n=Wy;break;default:return}this.hasListener(n)&&this.dispatchEvent(new $y(n,i))},n}(sp);function Hy(t,n){t.getImage().src=n}var Jy=Ky,Qy=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tm=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).Bt=void 0!==r.crossOrigin?r.crossOrigin:null,i.Ma=void 0===r.hidpi||r.hidpi,i.Fe=r.url,i.Rt=void 0!==r.imageLoadFunction?r.imageLoadFunction:Hy,i.xh=r.params||{},i.zt=null,i._h=[0,0],i.Mh=0,i.Sh=void 0!==r.ratio?r.ratio:1.5,i}return Qy(n,t),n.prototype.getParams=function(){return this.xh},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.Fe)return null;n=this.findNearestResolution(n),i=this.Ma?i:1;var e=this.zt;if(e&&this.Mh==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&xn(e.getExtent(),t))return e;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};P(o,this.xh);var s=((t=t.slice())[0]+t[2])/2,u=(t[1]+t[3])/2;if(1!=this.Sh){var a=this.Sh*$n(t)/2,h=this.Sh*Yn(t)/2;t[0]=s-a,t[1]=u-h,t[2]=s+a,t[3]=u+h}var f=n/i,c=Math.ceil($n(t)/f),l=Math.ceil(Yn(t)/f);t[0]=s-f*c/2,t[2]=s+f*c/2,t[1]=u-f*l/2,t[3]=u+f*l/2,this._h[0]=c,this._h[1]=l;var v=this.Oh(t,this._h,i,r,o);return this.zt=new Oo(t,n,i,v,this.Bt,this.Rt),this.Mh=this.getRevision(),this.zt.addEventListener(z,this.handleImageChange.bind(this)),this.zt},n.prototype.getImageLoadFunction=function(){return this.Rt},n.prototype.Oh=function(t,n,i,r,e){var o=r.getCode().split(/:(?=\d+$)/).pop();e.SIZE=n[0]+","+n[1],e.BBOX=t.join(","),e.BBOXSR=o,e.IMAGESR=o,e.DPI=Math.round(90*i);var s=this.Fe,u=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return u==s&&Et(!1,50),nc(u,e)},n.prototype.getUrl=function(){return this.Fe},n.prototype.setImageLoadFunction=function(t){this.zt=null,this.Rt=t,this.changed()},n.prototype.setUrl=function(t){t!=this.Fe&&(this.Fe=t,this.zt=null,this.changed())},n.prototype.updateParams=function(t){P(this.xh,t),this.zt=null,this.changed()},n}(Jy),nm=tm,im=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rm=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions,state:r.state})||this).jh=r.canvasFunction,i.Ut=null,i.Mh=0,i.Sh=void 0!==r.ratio?r.ratio:1.5,i}return im(n,t),n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n);var e=this.Ut;if(e&&this.Mh==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&xn(e.getExtent(),t))return e;Qn(t=t.slice(),this.Sh);var o=[$n(t)/n*i,Yn(t)/n*i],s=this.jh.call(this,t,n,i,o,r);return s&&(e=new Eo(t,n,i,s)),this.Ut=e,this.Mh=this.getRevision(),e},n}(Jy),em=rm,om=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sm=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{interpolate:r,projection:n.projection,resolutions:n.resolutions})||this).Bt=void 0!==n.crossOrigin?n.crossOrigin:null,i.Eh=void 0!==n.displayDpi?n.displayDpi:96,i.xh=n.params||{},i.Fe=n.url,i.Rt=void 0!==n.imageLoadFunction?n.imageLoadFunction:Hy,i.Ma=void 0===n.hidpi||n.hidpi,i.dt=void 0!==n.metersPerUnit?n.metersPerUnit:1,i.Sh=void 0!==n.ratio?n.ratio:1,i.Th=void 0!==n.useOverlay&&n.useOverlay,i.zt=null,i.Mh=0,i}return om(n,t),n.prototype.getParams=function(){return this.xh},n.prototype.getImageInternal=function(t,n,i,r){n=this.findNearestResolution(n),i=this.Ma?i:1;var e=this.zt;if(e&&this.Mh==this.getRevision()&&e.getResolution()==n&&e.getPixelRatio()==i&&xn(e.getExtent(),t))return e;1!=this.Sh&&Qn(t=t.slice(),this.Sh);var o=[$n(t)/n*i,Yn(t)/n*i];if(void 0!==this.Fe){var s=this.getUrl(this.Fe,this.xh,t,o,r);(e=new Oo(t,n,i,s,this.Bt,this.Rt)).addEventListener(z,this.handleImageChange.bind(this))}else e=null;return this.zt=e,this.Mh=this.getRevision(),e},n.prototype.getImageLoadFunction=function(){return this.Rt},n.prototype.updateParams=function(t){P(this.xh,t),this.changed()},n.prototype.getUrl=function(t,n,i,r,e){var o=function(t,n,i,r){var e=$n(t),o=Yn(t),s=n[0],u=n[1],a=.0254/r;return u*e>s*o?e*i/(s*a):o*i/(u*a)}(i,r,this.dt,this.Eh),s=Un(i),u={OPERATION:this.Th?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.Eh,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:s[0],SETVIEWCENTERY:s[1]};return P(u,n),nc(t,u)},n.prototype.setImageLoadFunction=function(t){this.zt=null,this.Rt=t,this.changed()},n}(Jy);var um=sm,am=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hm=function(t){function n(n){var i=this,r=void 0!==n.crossOrigin?n.crossOrigin:null,e=void 0!==n.imageLoadFunction?n.imageLoadFunction:Hy,o=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(o=n.interpolate),(i=t.call(this,{attributions:n.attributions,interpolate:o,projection:yr(n.projection)})||this).Fe=n.url,i.Ph=n.imageExtent,i.zt=new Oo(i.Ph,void 0,1,i.Fe,r,e),i._h=n.imageSize?n.imageSize:null,i.zt.addEventListener(z,i.handleImageChange.bind(i)),i}return am(n,t),n.prototype.getImageExtent=function(){return this.Ph},n.prototype.getImageInternal=function(t,n,i,r){return Kn(t,this.zt.getExtent())?this.zt:null},n.prototype.getUrl=function(){return this.Fe},n.prototype.handleImageChange=function(n){if(this.zt.getState()==bo){var i=this.zt.getExtent(),r=this.zt.getImage(),e=void 0,o=void 0;this._h?(e=this._h[0],o=this._h[1]):(e=r.width,o=r.height);var s=$n(i),u=Yn(i),a=s/e,h=u/o,f=e,c=o;if(a>h?f=Math.round(s/h):c=Math.round(u/a),f!==e||c!==o){var l=To(f,c);this.getInterpolate()||P(l,kf);var v=l.canvas;l.drawImage(r,0,0,e,o,0,0,v.width,v.height),this.zt.setImage(v)}}t.prototype.handleImageChange.call(this,n)},n}(Jy),fm=hm,cm="1.3.0",lm=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),vm=[101,101],pm=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,interpolate:e,projection:r.projection,resolutions:r.resolutions})||this).Bt=void 0!==r.crossOrigin?r.crossOrigin:null,i.Fe=r.url,i.Rt=void 0!==r.imageLoadFunction?r.imageLoadFunction:Hy,i.xh=r.params||{},i.Ah=!0,i.Ch(),i.kh=r.serverType,i.Ma=void 0===r.hidpi||r.hidpi,i.zt=null,i._h=[0,0],i.Mh=0,i.Sh=void 0!==r.ratio?r.ratio:1.5,i}return lm(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){if(void 0!==this.Fe){var e=yr(i),o=this.getProjection();o&&o!==e&&(n=Rf(o,e,t,n),t=Er(t,e,o));var s=Bn(t,n,0,vm),u={SERVICE:"WMS",VERSION:cm,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.xh.LAYERS};P(u,this.xh,r);var a=mi((t[0]-s[0])/n,4),h=mi((s[3]-t[1])/n,4);return u[this.Ah?"I":"X"]=a,u[this.Ah?"J":"Y"]=h,this.Oh(s,vm,1,o||e,u)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.Fe){var i={SERVICE:"WMS",VERSION:cm,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.xh.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return P(i,n),nc(this.Fe,i)}},n.prototype.getParams=function(){return this.xh},n.prototype.getImageInternal=function(t,n,i,r){if(void 0===this.Fe)return null;n=this.findNearestResolution(n),1==i||this.Ma&&void 0!==this.kh||(i=1);var e=n/i,o=Un(t),s=Bn(o,e,0,[wi($n(t)/e,4),wi(Yn(t)/e,4)]),u=Bn(o,e,0,[wi(this.Sh*$n(t)/e,4),wi(this.Sh*Yn(t)/e,4)]),a=this.zt;if(a&&this.Mh==this.getRevision()&&a.getResolution()==n&&a.getPixelRatio()==i&&xn(a.getExtent(),s))return a;var h={SERVICE:"WMS",VERSION:cm,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};P(h,this.xh),this._h[0]=yi($n(u)/e,4),this._h[1]=yi(Yn(u)/e,4);var f=this.Oh(u,this._h,i,r,h);return this.zt=new Oo(u,n,i,f,this.Bt,this.Rt),this.Mh=this.getRevision(),this.zt.addEventListener(z,this.handleImageChange.bind(this)),this.zt},n.prototype.getImageLoadFunction=function(){return this.Rt},n.prototype.Oh=function(t,n,i,r,e){if(Et(void 0!==this.Fe,9),e[this.Ah?"CRS":"SRS"]=r.getCode(),"STYLES"in this.xh||(e.STYLES=""),1!=i)switch(this.kh){case"geoserver":var o=90*i+.5|0;"FORMAT_OPTIONS"in e?e.FORMAT_OPTIONS+=";dpi:"+o:e.FORMAT_OPTIONS="dpi:"+o;break;case"mapserver":e.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":e.DPI=90*i;break;default:Et(!1,8)}e.WIDTH=n[0],e.HEIGHT=n[1];var s,u=r.getAxisOrientation();return s=this.Ah&&"ne"==u.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,e.BBOX=s.join(","),nc(this.Fe,e)},n.prototype.getUrl=function(){return this.Fe},n.prototype.setImageLoadFunction=function(t){this.zt=null,this.Rt=t,this.changed()},n.prototype.setUrl=function(t){t!=this.Fe&&(this.Fe=t,this.zt=null,this.changed())},n.prototype.updateParams=function(t){P(this.xh,t),this.Ch(),this.zt=null,this.changed()},n.prototype.Ch=function(){var t=this.xh.VERSION||cm;this.Ah=Xi(t,"1.3")>=0},n}(Jy),dm=pm,ym={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},mm={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function wm(t,n){for(var i,r,e=0;e<t.length;++e){var o=t[e];if("item"===o.rel){if(o.type===n){i=o.href;break}ym[o.type]?r=o.href:r||0!==o.type.indexOf("image/")||(r=o.href)}}if(!i){if(!r)throw new Error('Could not find "item" link');i=r}return i}function gm(t,n,i){for(var r,e,o={},s=0;s<t.length;++s){var u=t[s];if(o[u.type]=u.href,"item"===u.rel){if(u.type===n){r=u.href;break}mm[u.type]&&(e=u.href)}}if(!r&&i)for(s=0;s<i.length;++s){var a=i[s];if(o[a]){r=o[a];break}}if(!r){if(!e)throw new Error('Could not find "item" link');r=e}return r}function bm(t,n,i,r){var e=t.projection;if(!e&&!(e=yr(n.crs)))throw new Error("Unsupported CRS: ".concat(n.crs));for(var o="en"!==e.getAxisOrientation().substr(0,2),s=n.tileMatrices,u={},a=0;a<s.length;++a){var h=s[a];u[h.id]=h}var f={},c=[];if(r)for(a=0;a<r.length;++a){var l=(g=r[a]).tileMatrix;c.push(l),f[l]=g}else for(a=0;a<s.length;++a){l=s[a].id;c.push(l)}var v=c.length,p=new Array(v),d=new Array(v),y=new Array(v),m=new Array(v),w=[-1/0,-1/0,1/0,1/0];for(a=0;a<v;++a){l=c[a];var g,b=(h=u[l]).pointOfOrigin;if(p[a]=o?[b[1],b[0]]:b,d[a]=h.cellSize,y[a]=[h.matrixWidth,h.matrixHeight],m[a]=[h.tileWidth,h.tileHeight],g=f[l]){var x=h.cellSize*h.tileWidth,_=p[a][0]+g.minTileCol*x,M=p[a][0]+(g.maxTileCol+1)*x,S=h.cellSize*h.tileHeight,O=void 0,j=void 0;"bottomLeft"===h.cornerOfOrigin?(O=p[a][1]+g.minTileRow*S,j=p[a][1]+(g.maxTileRow+1)*S):(O=p[a][1]-(g.maxTileRow+1)*S,j=p[a][1]-g.minTileRow*S),Zn(w,[_,O,M,j],w)}}var E=new qf({origins:p,resolutions:d,sizes:y,tileSizes:m,extent:r?w:void 0}),T=t.context,A=t.url;return{grid:E,urlTemplate:i,urlFunction:function(t,n,e){if(t){var o=c[t[0]],s=u[o],a="bottomLeft"===s.cornerOfOrigin,h={tileMatrix:o,tileCol:t[1],tileRow:a?-t[2]-1:t[2]};if(r){var l=f[s.id];if(h.tileCol<l.minTileCol||h.tileCol>l.maxTileCol||h.tileRow<l.minTileRow||h.tileRow>l.maxTileRow)return}P(h,T);var v=i.replace(/\{(\w+?)\}/g,(function(t,n){return h[n]}));return gf(A,v)}}}}function xm(t){return wf(t.url).then((function(n){return function(t,n){var i,r=n.tileMatrixSetLimits;if("map"===n.dataType)i=wm(n.links,t.mediaType);else{if("vector"!==n.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');i=gm(n.links,t.mediaType,t.supportedMediaTypes)}if(n.tileMatrixSet)return bm(t,n.tileMatrixSet,i,r);var e=n.links.find((function(t){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel}));if(!e)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");var o=e.href;return wf(gf(t.url,o)).then((function(n){return bm(t,n,i,r)}))}(t,n)}))}var _m=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mm=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(r=n.interpolate),i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this,xm({url:n.url,projection:i.getProjection(),mediaType:n.mediaType,context:n.context||null}).then(i.Ih.bind(i)).catch(i.Nh.bind(i)),i}return _m(n,t),n.prototype.Ih=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")},n.prototype.Nh=function(t){console.error(t),this.setState("error")},n}(mp),Sm=Mm,Om=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jm=function(t){function n(n){var i=this,r=n.projection||"EPSG:3857",e=n.extent||$f(r),o=n.tileGrid||Zf({extent:e,maxResolution:n.maxResolution,maxZoom:void 0!==n.maxZoom?n.maxZoom:22,minZoom:n.minZoom,tileSize:n.tileSize||512});return(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,interpolate:!0,opaque:!1,projection:r,state:n.state,tileGrid:o,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:Tm,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:void 0===n.zDirection?1:n.zDirection})||this).Le=n.format?n.format:null,i.sourceTileCache=new Kh(i.tileCache.highWaterMark),i.La=null==n.overlaps||n.overlaps,i.tileClass=n.tileClass?n.tileClass:uf,i.zh={},i}return Om(n,t),n.prototype.getFeaturesInExtent=function(t){var n=[],i=this.tileCache;if(0===i.getCount())return n;var r=Yh(i.peekFirstKey())[0],e=this.tileGrid;return i.forEach((function(i){if(i.tileCoord[0]===r&&i.getState()===pt)for(var o=i.getSourceTiles(),s=0,u=o.length;s<u;++s){var a=o[s],h=a.tileCoord;if(Kn(t,e.getTileCoordExtent(h))){var f=a.getFeatures();if(f)for(var c=0,l=f.length;c<l;++c){var v=f[c],p=v.getGeometry();Kn(t,p.getExtent())&&n.push(v)}}}})),n},n.prototype.getOverlaps=function(){return this.La},n.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},n.prototype.expireCache=function(n,i){var r=this.getTileCacheForProjection(n),e=Object.keys(i).reduce((function(t,n){var i=Xh(n),e=r.peek(i);if(e)for(var o=e.sourceTiles,s=0,u=o.length;s<u;++s)t[o[s].getKey()]=!0;return t}),{});t.prototype.expireCache.call(this,n,i),this.sourceTileCache.expireCache(e)},n.prototype.getSourceTiles=function(t,n,i){var r=this;if(i.getState()===lt){i.setState(vt);var e=i.wrappedTileCoord,o=this.getTileGridForProjection(n),s=o.getTileCoordExtent(e),u=e[0],a=o.getResolution(u);mn(s,-a,s);var h=this.tileGrid,f=h.getExtent();f&&Zn(s,f,s);var c=h.getZForResolution(a,this.zDirection);h.forEachTileCoord(s,c,(function(e){var o=r.tileUrlFunction(e,t,n),s=r.sourceTileCache.containsKey(o)?r.sourceTileCache.get(o):new r.tileClass(e,o?lt:yt,o,r.Le,r.tileLoadFunction);i.sourceTiles.push(s);var u=s.getState();if(u<pt){var a=function(t){r.handleTileChange(t);var n=s.getState();if(n===pt||n===dt){var e=s.getKey();e in i.errorTileKeys?s.getState()===pt&&delete i.errorTileKeys[e]:i.loadingSourceTiles--,n===dt?i.errorTileKeys[e]=!0:s.removeEventListener(z,a),0===i.loadingSourceTiles&&i.setState(k(i.errorTileKeys)?pt:dt)}};s.addEventListener(z,a),i.loadingSourceTiles++}u===lt&&(s.extent=h.getTileCoordExtent(e),s.projection=n,s.resolution=h.getResolution(e[0]),r.sourceTileCache.set(o,s),s.load())})),i.loadingSourceTiles||i.setState(i.sourceTiles.some((function(t){return t.getState()===dt}))?dt:pt)}return i.sourceTiles},n.prototype.getTile=function(t,n,i,r,e){var o,s=qh(t,n,i),u=this.getKey();if(this.tileCache.containsKey(s)&&(o=this.tileCache.get(s)).key===u)return o;var a=[t,n,i],h=this.getTileCoordForTileUrlFunction(a,e),f=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(e);if(h&&f){var l=c.getTileCoordExtent(h);mn(l,-c.getResolution(t),l),Kn(f,l)||(h=null)}var v=!0;if(null!==h){var p=this.tileGrid,d=c.getResolution(t),y=p.getZForResolution(d,1),m=c.getTileCoordExtent(h);mn(m,-d,m),p.forEachTileCoord(m,y,function(t){v=v&&!this.tileUrlFunction(t,r,e)}.bind(this))}var w=new ef(a,v?yt:lt,h,this.getSourceTiles.bind(this,r,e));return w.key=u,o?(w.interimTile=o,w.refreshInterimChain(),this.tileCache.replace(s,w)):this.tileCache.set(s,w),w},n.prototype.getTileGridForProjection=function(t){var n=t.getCode(),i=this.zh[n];if(!i){for(var r=this.tileGrid,e=r.getResolutions().slice(),o=e.map((function(t,n){return r.getOrigin(n)})),s=e.map((function(t,n){return r.getTileSize(n)})),u=e.length;u<43;++u)e.push(e[u-1]/2),o.push(o[u-1]),s.push(s[u-1]);i=new qf({extent:r.getExtent(),origins:o,resolutions:e,tileSizes:s}),this.zh[n]=i}return i},n.prototype.getTilePixelRatio=function(t){return t},n.prototype.getTilePixelSize=function(t,n,i){var r=aa(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(r[0]*n),Math.round(r[1]*n)]},n.prototype.updateCacheSize=function(n,i){t.prototype.updateCacheSize.call(this,2*n,i),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(i).highWaterMark},n}(vp),Em=jm;function Tm(t,n){t.setLoader((function(i,r,e){ff(n,t.getFormat(),i,r,e,t.onLoad.bind(t),t.onError.bind(t))}))}var Pm=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Am=function(t){function n(n){var i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,format:n.format,overlaps:n.overlaps,projection:n.projection,tileClass:n.tileClass,transition:n.transition,wrapX:n.wrapX,zDirection:n.zDirection,state:"loading"})||this;return xm({url:n.url,projection:i.getProjection(),mediaType:n.mediaType,supportedMediaTypes:n.format.supportedMediaTypes,context:n.context||null}).then(i.Ih.bind(i)).catch(i.Nh.bind(i)),i}return Pm(n,t),n.prototype.Ih=function(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")},n.prototype.Nh=function(t){console.error(t),this.setState("error")},n}(Em),Cm=Am,km=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Im='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',Nm=function(t){function n(n){var i,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate),i=void 0!==r.attributions?r.attributions:[Im];var o=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",s=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:o,interpolate:e,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,opaque:void 0===r.opaque||r.opaque,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:s,wrapX:r.wrapX,zDirection:r.zDirection})||this}return km(n,t),n}(Sp),zm=Nm,Lm=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rm=function(t){function n(n){var i=n||{};return t.call(this,i)||this}return Lm(n,t),n}(ws),Fm=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gm=[],Dm=null;var Um,qm=function(t){function n(n){var i=t.call(this,n)||this;return i.container=null,i.renderedResolution,i.tempTransform=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i.qs=null,i.frameState=null,i}return Fm(n,t),n.prototype.getImageData=function(t,n,i){var r,e;Dm||((r=document.createElement("canvas")).width=1,r.height=1,Dm=r.getContext("2d")),Dm.clearRect(0,0,1,1);try{Dm.drawImage(t,n,i,1,1,0,0,1,1),e=Dm.getImageData(0,0,1,1).data}catch(t){return Dm=null,null}return e},n.prototype.getBackground=function(t){var n=this.getLayer().getBackground();return"function"==typeof n&&(n=n(t.viewState.resolution)),n||void 0},n.prototype.useContainer=function(t,n,i){var r,e,o=this.getLayer().getClassName();t&&t.className===o&&(!i||t&&t.style.backgroundColor&&x(Xo(t.style.backgroundColor),Xo(i)))&&((u=t.firstElementChild)instanceof HTMLCanvasElement&&(e=u.getContext("2d")));if(e&&e.canvas.style.transform===n?(this.container=t,this.context=e,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var s=r.style;s.position="absolute",s.width="100%",s.height="100%";var u=(e=To()).canvas;r.appendChild(u),(s=u.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=r,this.context=e}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)},n.prototype.clipUnrotated=function(t,n,i){var r=Vn(i),e=Wn(i),o=Dn(i),s=Gn(i);tn(n.coordinateToPixelTransform,r),tn(n.coordinateToPixelTransform,e),tn(n.coordinateToPixelTransform,o),tn(n.coordinateToPixelTransform,s);var u=this.inversePixelTransform;tn(u,r),tn(u,e),tn(u,o),tn(u,s),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(e[0]),Math.round(e[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},n.prototype.Xs=function(t,n,i){var r=this.getLayer();if(r.hasListener(t)){var e=new js(t,this.inversePixelTransform,i,n);r.dispatchEvent(e)}},n.prototype.preRender=function(t,n){this.frameState=n,this.Xs(fs,t,n)},n.prototype.postRender=function(t,n){this.Xs(cs,t,n)},n.prototype.getRenderTransform=function(t,n,i,r,e,o,s){var u=e/2,a=o/2,h=r/n,f=-h,c=-t[0]+s,l=-t[1];return sn(this.tempTransform,u,a,h,f,-i,c,l)},n.prototype.getDataAtPixel=function(t,n,i){var r=tn(this.inversePixelTransform,t.slice()),e=this.context,o=this.getLayer().getExtent();if(o&&!bn(o,tn(n.pixelToCoordinateTransform,t.slice())))return null;var s,u=Math.round(r[0]),a=Math.round(r[1]),h=this.qs;if(!h){var f=document.createElement("canvas");f.width=1,f.height=1,h=f.getContext("2d"),this.qs=h}h.clearRect(0,0,1,1);try{h.drawImage(e.canvas,u,a,1,1,0,0,1,1),s=h.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.qs=null,new Uint8Array):s}return 0===s[3]?null:s},n.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},n}(Ol),Bm=qm,Xm=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ym=function(t){function n(n){var i=t.call(this,n)||this;return i.zt=null,i}return Xm(n,t),n.prototype.getImage=function(){return this.zt?this.zt.getImage():null},n.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,e=r.resolution,o=this.getLayer().getSource(),s=t.viewHints,u=t.extent;if(void 0!==n.extent&&(u=Zn(u,zr(n.extent,r.projection))),!s[zu]&&!s[Lu]&&!Hn(u))if(o){var a=r.projection,h=o.getImage(u,e,i,a);h&&(this.loadImage(h)?this.zt=h:h.getState()===_o&&(this.zt=null))}else this.zt=null;return!!this.zt},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=tn(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!bn(e,r))return null;var o=this.zt.getExtent(),s=this.zt.getImage(),u=$n(o),a=Math.floor(s.width*((r[0]-o[0])/u));if(a<0||a>=s.width)return null;var h=Yn(o),f=Math.floor(s.height*((o[3]-r[1])/h));return f<0||f>=s.height?null:this.getImageData(s,a,f)},n.prototype.renderFrame=function(t,n){var i=this.zt,r=i.getExtent(),e=i.getResolution(),o=i.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],u=t.pixelRatio,a=t.viewState,h=a.center,f=u*e/(a.resolution*o),c=t.extent,l=a.resolution,v=a.rotation,p=Math.round($n(c)/l*u),d=Math.round(Yn(c)/l*u);sn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,v,-p/2,-d/2),un(this.inversePixelTransform,this.pixelTransform);var y=hn(this.pixelTransform);this.useContainer(n,y,this.getBackground(t));var m=this.context,w=m.canvas;w.width!=p||w.height!=d?(w.width=p,w.height=d):this.containerReused||m.clearRect(0,0,p,d);var g=!1,b=!0;if(s.extent){var x=zr(s.extent,a.projection);(g=(b=Kn(x,t.extent))&&!xn(x,t.extent))&&this.clipUnrotated(m,t,x)}var _=i.getImage(),M=sn(this.tempTransform,p/2,d/2,f,f,0,o*(r[0]-h[0])/e,o*(h[1]-r[3])/e);this.renderedResolution=e*u/o;var S=_.width*M[0],O=_.height*M[3];if(this.getLayer().getSource().getInterpolate()||P(m,kf),this.preRender(m,t),b&&S>=.5&&O>=.5){var j=M[4],E=M[5],T=s.opacity,A=void 0;1!==T&&(A=m.globalAlpha,m.globalAlpha=T),m.drawImage(_,0,0,+_.width,+_.height,j,E,S,O),1!==T&&(m.globalAlpha=A)}return this.postRender(m,t),g&&m.restore(),P(m,If),y!==w.style.transform&&(w.style.transform=y),this.container},n}(Bm),Zm=Ym,Vm=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wm=function(t){function n(n){return t.call(this,n)||this}return Vm(n,t),n.prototype.createRenderer=function(){return new Zm(this)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(Rm),$m="preload",Km="useInterimTilesOnError",Hm=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jm=function(t){function n(n){var i=this,r=n||{},e=P({},r);return delete e.preload,delete e.useInterimTilesOnError,(i=t.call(this,e)||this).on,i.once,i.un,i.setPreload(void 0!==r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i}return Hm(n,t),n.prototype.getPreload=function(){return this.get($m)},n.prototype.setPreload=function(t){this.set($m,t)},n.prototype.getUseInterimTilesOnError=function(){return this.get(Km)},n.prototype.setUseInterimTilesOnError=function(t){this.set(Km,t)},n.prototype.getData=function(n){return t.prototype.getData.call(this,n)},n}(ws),Qm=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tw=function(t){function n(n){var i=t.call(this,n)||this;return i.extentChanged=!0,i.Lh=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.Rh=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.Fh=new Qh(0,0,0,0),i}return Qm(n,t),n.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),r=n.getUseInterimTilesOnError();return i==pt||i==yt||i==dt&&!r},n.prototype.getTile=function(t,n,i,r){var e=r.pixelRatio,o=r.viewState.projection,s=this.getLayer(),u=s.getSource().getTile(t,n,i,e,o);return u.getState()==dt&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.Rh=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u},n.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),r=tn(n.pixelToCoordinateTransform,t.slice()),e=i.getExtent();if(e&&!bn(e,r))return null;for(var o=n.pixelRatio,s=n.viewState.projection,u=n.viewState,a=i.getRenderSource(),h=a.getTileGridForProjection(u.projection),f=a.getTilePixelRatio(n.pixelRatio),c=h.getZForResolution(u.resolution);c>=h.getMinZoom();--c){var l=h.getTileCoordForCoordAndZ(r,c),v=a.getTile(c,l[1],l[2],o,s);if(!(v instanceof Ro||v instanceof yl))return null;if(v.getState()===pt){var p=h.getOrigin(c),d=aa(h.getTileSize(c)),y=h.getResolution(c),m=Math.floor(f*((r[0]-p[0])/y-l[1]*d[0])),w=Math.floor(f*((p[1]-r[1])/y-l[2]*d[1])),g=Math.round(f*a.getGutterForProjection(u.projection));return this.getImageData(v.getImage(),m+g,w+g)}}return null},n.prototype.loadedTileCallback=function(n,i,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,n,i,r)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],r=t.viewState,e=r.projection,s=r.resolution,u=r.center,a=r.rotation,h=t.pixelRatio,f=this.getLayer(),c=f.getSource(),l=c.getRevision(),v=c.getTileGridForProjection(e),p=v.getZForResolution(s,c.zDirection),y=v.getResolution(p),m=t.extent,w=t.viewState.resolution,g=c.getTilePixelRatio(h),b=Math.round($n(m)/w*h),x=Math.round(Yn(m)/w*h),_=i.extent&&zr(i.extent,e);_&&(m=Zn(m,zr(i.extent,e)));var M=y*b/2/g,S=y*x/2/g,O=[u[0]-M,u[1]-S,u[0]+M,u[1]+S],j=v.getTileRangeForExtentAndZ(m,p),E={};E[p]={};var T=this.createLoadedTileFinder(c,e,E),A=this.tmpExtent,C=this.Fh;this.Rh=!1;for(var k=a?Xn(r.center,w,a,t.size):void 0,I=j.minX;I<=j.maxX;++I)for(var N=j.minY;N<=j.maxY;++N)if(!a||v.tileCoordIntersectsViewport([p,I,N],k)){var z=this.getTile(p,I,N,t);if(this.isDrawableTile(z)){var L=o(this);if(z.getState()==pt)E[p][z.tileCoord.toString()]=z,(ot=z.inTransition(L))&&1!==i.opacity&&(z.endTransition(L),ot=!1),this.Rh||!ot&&-1!==this.renderedTiles.indexOf(z)||(this.Rh=!0);if(1===z.getAlpha(L,t.time))continue}var R=v.getTileCoordChildTileRange(z.tileCoord,C,A),F=!1;R&&(F=T(p+1,R)),F||v.forEachTileCoordParentTileRange(z.tileCoord,T,C,A)}var G=y/s*h/g;sn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,a,-b/2,-x/2);var D=hn(this.pixelTransform);this.useContainer(n,D,this.getBackground(t));var U=this.context,q=U.canvas;un(this.inversePixelTransform,this.pixelTransform),sn(this.tempTransform,b/2,x/2,G,G,0,-b/2,-x/2),q.width!=b||q.height!=x?(q.width=b,q.height=x):this.containerReused||U.clearRect(0,0,b,x),_&&this.clipUnrotated(U,t,_),c.getInterpolate()||P(U,kf),this.preRender(U,t),this.renderedTiles.length=0;var B,X,Y,Z=Object.keys(E).map(Number);Z.sort(d),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(B=[],X=[]):Z=Z.reverse();for(var V=Z.length-1;V>=0;--V){var W=Z[V],$=c.getTilePixelSize(W,h,e),K=v.getResolution(W)/y,H=$[0]*K*G,J=$[1]*K*G,Q=v.getTileCoordForCoordAndZ(Vn(O),W),tt=v.getTileCoordExtent(Q),nt=tn(this.tempTransform,[g*(tt[0]-O[0])/y,g*(O[3]-tt[3])/y]),it=g*c.getGutterForProjection(e),rt=E[W];for(var et in rt){var ot,st=(z=rt[et]).tileCoord,ut=Q[1]-st[1],at=Math.round(nt[0]-(ut-1)*H),ht=Q[2]-st[2],ft=Math.round(nt[1]-(ht-1)*J),ct=at-(I=Math.round(nt[0]-ut*H)),lt=ft-(N=Math.round(nt[1]-ht*J)),vt=p===W,dt=!1;if(!(ot=vt&&1!==z.getAlpha(o(this),t.time)))if(B){Y=[I,N,I+ct,N,I+ct,N+lt,I,N+lt];for(var yt=0,mt=B.length;yt<mt;++yt)if(p!==W&&W<X[yt]){var wt=B[yt];Kn([I,N,I+ct,N+lt],[wt[0],wt[3],wt[4],wt[7]])&&(dt||(U.save(),dt=!0),U.beginPath(),U.moveTo(Y[0],Y[1]),U.lineTo(Y[2],Y[3]),U.lineTo(Y[4],Y[5]),U.lineTo(Y[6],Y[7]),U.moveTo(wt[6],wt[7]),U.lineTo(wt[4],wt[5]),U.lineTo(wt[2],wt[3]),U.lineTo(wt[0],wt[1]),U.clip())}B.push(Y),X.push(W)}else U.clearRect(I,N,ct,lt);this.drawTileImage(z,t,I,N,ct,lt,it,vt),B&&!ot?(dt&&U.restore(),this.renderedTiles.unshift(z)):this.renderedTiles.push(z),this.updateUsedTiles(t.usedTiles,c,z)}}return this.renderedRevision=l,this.renderedResolution=y,this.extentChanged=!this.Lh||!Pn(this.Lh,O),this.Lh=O,this.renderedPixelRatio=h,this.renderedProjection=e,this.manageTilePyramid(t,c,v,h,e,m,p,f.getPreload()),this.scheduleExpireCache(t,c),this.postRender(U,t),i.extent&&U.restore(),P(U,If),D!==q.style.transform&&(q.style.transform=D),this.container},n.prototype.drawTileImage=function(t,n,i,r,e,s,u,a){var h=this.getTileImage(t);if(h){var f=o(this),c=n.layerStatesArray[n.layerIndex],l=c.opacity*(a?t.getAlpha(f,n.time):1),v=l!==this.context.globalAlpha;v&&(this.context.save(),this.context.globalAlpha=l),this.context.drawImage(h,u,u,h.width-2*u,h.height-2*u,i,r,e,s),v&&this.context.restore(),l!==c.opacity?n.animate=!0:a&&t.endTransition(f)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(t,n,i){var r=o(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,n);t.postRenderFunctions.push(i)}},n.prototype.updateUsedTiles=function(t,n,i){var r=o(n);r in t||(t[r]={}),t[r][i.getKey()]=!0},n.prototype.manageTilePyramid=function(t,n,i,r,e,s,u,a,h){var f=o(n);f in t.wantedTiles||(t.wantedTiles[f]={});var c,l,v,p,d,y,m=t.wantedTiles[f],w=t.tileQueue,g=i.getMinZoom(),b=t.viewState.rotation,x=b?Xn(t.viewState.center,t.viewState.resolution,b,t.size):void 0,_=0;for(y=g;y<=u;++y)for(l=i.getTileRangeForExtentAndZ(s,y,l),v=i.getResolution(y),p=l.minX;p<=l.maxX;++p)for(d=l.minY;d<=l.maxY;++d)b&&!i.tileCoordIntersectsViewport([y,p,d],x)||(u-y<=a?(++_,(c=n.getTile(y,p,d,r,e)).getState()==lt&&(m[c.getKey()]=!0,w.isKeyQueued(c.getKey())||w.enqueue([c,f,i.getTileCoordCenter(c.tileCoord),v])),void 0!==h&&h(c)):n.useTile(y,p,d,e));n.updateCacheSize(_,e)},n}(Bm),nw=tw,iw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rw=function(t){function n(n){return t.call(this,n)||this}return iw(n,t),n.prototype.createRenderer=function(){return new nw(this)},n}(Jm),ew=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ow=!0;try{new ImageData(10,10)}catch(t){ow=!1}function sw(t,n,i){if(ow)return new ImageData(t,n,i);Um||(Um=document.createElement("canvas").getContext("2d"));var r=Um.createImageData(n,i);return r.data.set(t),r}function uw(t){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}function i(t,i,r){return n?new ImageData(t,i,r):{data:t,width:i,height:r}}return function(n){var r=n.buffers,e=n.meta,o=n.imageOps,s=n.width,u=n.height,a=r.length,h=r[0].byteLength;if(o){for(var f=new Array(a),c=0;c<a;++c)f[c]=i(new Uint8ClampedArray(r[c]),s,u);return t(f,e).data.buffer}var l=new Uint8ClampedArray(h),v=new Array(a),p=new Array(a);for(c=0;c<a;++c)v[c]=new Uint8ClampedArray(r[c]),p[c]=[0,0,0,0];for(var d=0;d<h;d+=4){for(var y=0;y<a;++y){var m=v[y];p[y][0]=m[d],p[y][1]=m[d+1],p[y][2]=m[d+2],p[y][3]=m[d+3]}var w=t(p,e);l[d]=w[0],l[d+1]=w[1],l[d+2]=w[2],l[d+3]=w[3]}return l.buffer}}function aw(t,n){var i=Object.keys(t.lib||{}).map((function(n){return"var "+n+" = "+t.lib[n].toString()+";"})).concat(["var __minion__ = ("+uw.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",n),r}var hw=function(t){function n(n){var i,r=t.call(this)||this;r._imageOps=!!n.imageOps,i=0===n.threads?0:r._imageOps?1:n.threads||1;var e=new Array(i);if(i)for(var o=0;o<i;++o)e[o]=aw(n,r._onWorkerMessage.bind(r,o));else e[0]=function(t,n){var i=uw(t.operation),r=!1;return{postMessage:function(t){setTimeout((function(){r||n({data:{buffer:i(t),meta:t.meta}})}),0)},terminate:function(){r=!0}}}(n,r._onWorkerMessage.bind(r,0));return r._workers=e,r._queue=[],r._maxQueueLength=n.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return ew(n,t),n.prototype.process=function(t,n,i){this._enqueue({inputs:t,meta:n,callback:i}),this._dispatch()},n.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},n.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var n=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map((function(t){return t.data.buffer})),e=this._workers.length;if(this._running=e,1!==e)for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/e),u=0;u<e;++u){for(var a=u*s,h=[],f=0,c=r.length;f<c;++f)h.push(r[f].slice(a,a+s));this._workers[u].postMessage({buffers:h,meta:t.meta,imageOps:this._imageOps,width:n,height:i},h)}else this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:n,height:i},r)}},n.prototype._onWorkerMessage=function(t,n){this.disposed||(this._dataLookup[t]=n.data,--this._running,0===this._running&&this._resolveJob())},n.prototype._resolveJob=function(){var t,n,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{var e=i.inputs[0].data.length;t=new Uint8ClampedArray(e),n=new Array(r);for(var o=4*Math.ceil(e/4/r),s=0;s<r;++s){var u=this._dataLookup[s].buffer,a=s*o;t.set(new Uint8ClampedArray(u),a),n[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},i.callback(null,sw(t,i.inputs[0].width,i.inputs[0].height),n),this._dispatch()},n.prototype.disposeInternal=function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0},n}(v),fw="beforeoperations",cw="afteroperations",lw="pixel",vw="image",pw=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.extent=i.extent,e.resolution=i.viewState.resolution/i.pixelRatio,e.data=r,e}return ew(n,t),n}(c),dw=function(t){function n(n){var i=t.call(this,{projection:null})||this;i.on,i.once,i.un,i.Gh=null,i.Dh=void 0!==n.operationType?n.operationType:lw,i.Uh=void 0!==n.threads?n.threads:1,i.qh=function(t){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=ww(t[r]);return i}(n.sources);for(var r,e=i.changed.bind(i),s=0,u=i.qh.length;s<u;++s)i.qh[s].addEventListener(z,e);return i.hr=new Iu((function(){return 1}),i.changed.bind(i)),i.Bh,i.Xh=null,i.Mh,i.Wi={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(r=i.qh,r.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:i.hr,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:o(i),renderTargets:{}},i.setAttributions((function(t){for(var i=[],r=0,e=n.sources.length;r<e;++r){var o=n.sources[r],s=(o instanceof sp?o:o.getSource()).getAttributions();if("function"==typeof s){var u=s(t);i.push.apply(i,u)}}return 0!==i.length?i:null})),void 0!==n.operation&&i.setOperation(n.operation,n.lib),i}return ew(n,t),n.prototype.setOperation=function(t,n){this.Gh&&this.Gh.dispose(),this.Gh=new hw({operation:t,imageOps:this.Dh===vw,queue:1,lib:n,threads:this.Uh}),this.changed()},n.prototype.Yh=function(t,n,i){var r=P({},this.Wi);r.viewState=P({},r.viewState);var e=Un(t);r.extent=t.slice(),r.size[0]=Math.round($n(t)/n),r.size[1]=Math.round(Yn(t)/n),r.time=Date.now();var o=r.viewState;return o.center=e,o.projection=i,o.resolution=n,r},n.prototype.Zh=function(){for(var t=!0,n=0,i=this.qh.length;n<i;++n)if("ready"!==this.qh[n].getSource().getState()){t=!1;break}return t},n.prototype.getImage=function(t,n,i,r){if(!this.Zh())return null;var e=this.Yh(t,n,r);if(this.Bh=e,this.Xh){var o=this.Xh.getResolution(),s=this.Xh.getExtent();n===o&&Pn(t,s)||(this.Xh=null)}return this.Xh&&this.getRevision()===this.Mh||this.Vh(),e.tileQueue.loadMoreTiles(16,16),e.animate&&requestAnimationFrame(this.changed.bind(this)),this.Xh},n.prototype.Vh=function(){for(var t=this.Bh,n=this.qh.length,i=new Array(n),r=0;r<n;++r){t.layerIndex=r;var e=mw(this.qh[r],t);if(!e)return;i[r]=e}var o={};this.dispatchEvent(new pw(fw,t,o)),this.Gh.process(i,o,this.Wh.bind(this,t))},n.prototype.Wh=function(t,n,i,r){if(!n&&i){var e=t.extent,o=t.viewState.resolution;if(o===this.Bh.viewState.resolution&&Pn(e,this.Bh.extent)){var s;if(this.Xh)s=this.Xh.getImage().getContext("2d");else s=To(Math.round($n(e)/o),Math.round(Yn(e)/o)),this.Xh=new Eo(e,o,1,s.canvas);s.putImageData(i,0,0),this.changed(),this.Mh=this.getRevision(),this.dispatchEvent(new pw(cw,t,r)),t.animate&&requestAnimationFrame(this.changed.bind(this))}}},n.prototype.disposeInternal=function(){this.Gh&&this.Gh.dispose(),t.prototype.disposeInternal.call(this)},n}(Jy);dw.prototype.dispose;var yw=null;function mw(t,n){var i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(n))return null;var r=n.size[0],e=n.size[1];if(0===r||0===e)return null;var o,s=i.renderFrame(n,null);if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===e)return o.getContext("2d").getImageData(0,0,r,e)}if(yw){var u=yw.canvas;u.width!==r||u.height!==e?yw=To(r,e):yw.clearRect(0,0,r,e)}else yw=To(r,e);return yw.drawImage(o,0,0,r,e),yw.getImageData(0,0,r,e)}function ww(t){var n;return t instanceof sp?t instanceof fp?n=new rw({source:t}):t instanceof Jy&&(n=new Wm({source:t})):n=t,n}var gw=dw,bw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xw=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Im],_w={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},Mw={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},Sw=function(t){function n(n){var i=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(i=n.interpolate);var r=n.layer.indexOf("-"),e=-1==r?n.layer:n.layer.slice(0,r),o=Mw[e],s=_w[n.layer],u=void 0!==n.url?n.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+n.layer+"/{z}/{x}/{y}."+s.extension;return t.call(this,{attributions:xw,cacheSize:n.cacheSize,crossOrigin:"anonymous",interpolate:i,maxZoom:null!=n.maxZoom?n.maxZoom:o.maxZoom,minZoom:null!=n.minZoom?n.minZoom:o.minZoom,opaque:s.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:u,wrapX:n.wrapX,zDirection:n.zDirection})||this}return bw(n,t),n}(Sp),Ow=Sw,jw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ew=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;return void 0!==r.interpolate&&(e=r.interpolate),(i=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).xh=r.params||{},i.Ma=void 0===r.hidpi||r.hidpi,i.Po=[1/0,1/0,-1/0,-1/0],i.setKey(i.$h()),i}return jw(n,t),n.prototype.$h=function(){var t=0,n=[];for(var i in this.xh)n[t++]=i+"-"+this.xh[i];return n.join("/")},n.prototype.getParams=function(){return this.xh},n.prototype.Oh=function(t,n,i,r,e,o){var s=this.urls;if(s){var u,a=e.getCode().split(/:(?=\d+$)/).pop();if(o.SIZE=n[0]+","+n[1],o.BBOX=i.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),1==s.length)u=s[0];else u=s[vi(Zh(t),s.length)];return nc(u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},n.prototype.getTilePixelRatio=function(t){return this.Ma?t:1},n.prototype.updateParams=function(t){P(this.xh,t),this.setKey(this.$h())},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.Ma||(n=1);var e=r.getTileCoordExtent(t,this.Po),o=aa(r.getTileSize(t[0]),this.tmpSize);1!=n&&(o=ua(o,n,this.tmpSize));var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return P(s,this.xh),this.Oh(t,o,e,n,i,s)}},n}(mp),Tw=Ew,Pw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Aw=function(t){function n(n){var i=this,r=n||{};return i=t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection,url:r.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,n){var r=t.getTileCoord()[0],e=aa(i.tileGrid.getTileSize(r)),o=To(e[0],e[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,e[0]+.5,e[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,e[0]/2,e[1]/2,e[0]),o.fillText(n,e[0]/2,e[1]/2,e[0]),t.setImage(o.canvas)}})||this,i}return Pw(n,t),n}(Sp),Cw=Aw,kw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Iw=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;if(void 0!==n.interpolate&&(r=n.interpolate),(i=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:yr("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).Kh=null,i.jo=n.tileSize,n.url)if(n.jsonp)pf(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var e=new XMLHttpRequest;e.addEventListener("load",i.Hh.bind(i)),e.addEventListener("error",i.Jh.bind(i)),e.open("GET",n.url),e.send()}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):Et(!1,51);return i}return kw(n,t),n.prototype.Hh=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},n.prototype.Jh=function(t){this.handleTileJSONError()},n.prototype.getTileJSON=function(){return this.Kh},n.prototype.handleTileJSONResponse=function(t){var n,i=yr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=Or(i,r);n=ni(t.bounds,e)}var o=$f(r),s=t.minzoom||0,u=Zf({extent:o,maxZoom:t.maxzoom||22,minZoom:s,tileSize:this.jo});if(this.tileGrid=u,this.tileUrlFunction=Hf(t.tiles,u),void 0!==t.attribution&&!this.getAttributions()){var a=void 0!==n?n:o;this.setAttributions((function(n){return Kn(a,n.extent)?[t.attribution]:null}))}this.Kh=t,this.setState("ready")},n.prototype.handleTileJSONError=function(){this.setState("error")},n}(mp),Nw=Iw,zw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Lw=function(t){function n(n){var i=this,r=n||{},e=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(e=r.interpolate);var o=r.params||{},s=!("TRANSPARENT"in o)||o.TRANSPARENT;return(i=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:e,opaque:!s,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).js=void 0!==r.gutter?r.gutter:0,i.xh=o,i.Ah=!0,i.kh=r.serverType,i.Ma=void 0===r.hidpi||r.hidpi,i.Po=[1/0,1/0,-1/0,-1/0],i.Ch(),i.setKey(i.$h()),i}return zw(n,t),n.prototype.getFeatureInfoUrl=function(t,n,i,r){var e=yr(i),o=this.getProjection(),s=this.getTileGrid();s||(s=this.getTileGridForProjection(e));var u=s.getZForResolution(n,this.zDirection),a=s.getTileCoordForCoordAndZ(t,u);if(!(s.getResolutions().length<=a[0])){var h=s.getResolution(a[0]),f=s.getTileCoordExtent(a,this.Po),c=aa(s.getTileSize(a[0]),this.tmpSize),l=this.js;0!==l&&(c=oa(c,l,this.tmpSize),f=mn(f,h*l,f)),o&&o!==e&&(h=Rf(o,e,t,h),f=Tr(f,e,o),t=Er(t,e,o));var v={SERVICE:"WMS",VERSION:cm,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.xh.LAYERS};P(v,this.xh,r);var p=Math.floor((t[0]-f[0])/h),d=Math.floor((f[3]-t[1])/h);return v[this.Ah?"I":"X"]=p,v[this.Ah?"J":"Y"]=d,this.Oh(a,c,f,1,o||e,v)}},n.prototype.getLegendUrl=function(t,n){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:cm,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var r=this.xh.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;i.LAYER=r}if(void 0!==t){var e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return P(i,n),nc(this.urls[0],i)}},n.prototype.getGutter=function(){return this.js},n.prototype.getParams=function(){return this.xh},n.prototype.Oh=function(t,n,i,r,e,o){var s=this.urls;if(s){if(o.WIDTH=n[0],o.HEIGHT=n[1],o[this.Ah?"CRS":"SRS"]=e.getCode(),"STYLES"in this.xh||(o.STYLES=""),1!=r)switch(this.kh){case"geoserver":var u=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+u:o.FORMAT_OPTIONS="dpi:"+u;break;case"mapserver":o.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":o.DPI=90*r;break;default:Et(!1,52)}var a,h=e.getAxisOrientation(),f=i;if(this.Ah&&"ne"==h.substr(0,2)){var c=void 0;c=i[0],f[0]=i[1],f[1]=c,c=i[2],f[2]=i[3],f[3]=c}if(o.BBOX=f.join(","),1==s.length)a=s[0];else a=s[vi(Zh(t),s.length)];return nc(a,o)}},n.prototype.getTilePixelRatio=function(t){return this.Ma&&void 0!==this.kh?t:1},n.prototype.$h=function(){var t=0,n=[];for(var i in this.xh)n[t++]=i+"-"+this.xh[i];return n.join("/")},n.prototype.updateParams=function(t){P(this.xh,t),this.Ch(),this.setKey(this.$h())},n.prototype.Ch=function(){var t=this.xh.VERSION||cm;this.Ah=Xi(t,"1.3")>=0},n.prototype.tileUrlFunction=function(t,n,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==n||this.Ma&&void 0!==this.kh||(n=1);var e=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.Po),s=aa(r.getTileSize(t[0]),this.tmpSize),u=this.js;0!==u&&(s=oa(s,u,this.tmpSize),o=mn(o,e*u,o)),1!=n&&(s=ua(s,n,this.tmpSize));var a={SERVICE:"WMS",VERSION:cm,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return P(a,this.xh),this.Oh(t,s,o,n,i,a)}},n}(mp),Rw=Lw,Fw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gw=function(t){function n(n,i,r,e,o,s){var u=t.call(this,n,i)||this;return u.Nt=r,u.st=e,u.Qh=o,u.tf=null,u.nf=null,u.B=null,u.if=s,u}return Fw(n,t),n.prototype.getImage=function(){return null},n.prototype.getData=function(t){if(!this.tf||!this.nf)return null;var n=(t[0]-this.st[0])/(this.st[2]-this.st[0]),i=(t[1]-this.st[1])/(this.st[3]-this.st[1]),r=this.tf[Math.floor((1-i)*this.tf.length)];if("string"!=typeof r)return null;var e=r.charCodeAt(Math.floor(n*r.length));e>=93&&e--,e>=35&&e--;var o=null;if((e-=32)in this.nf){var s=this.nf[e];o=this.B&&s in this.B?this.B[s]:s}return o},n.prototype.forDataAtCoordinate=function(t,n,i){this.state==yt&&!0===i?(this.state=lt,K(this,z,(function(i){n(this.getData(t))}),this),this.rf()):!0===i?setTimeout(function(){n(this.getData(t))}.bind(this),0):n(this.getData(t))},n.prototype.getKey=function(){return this.Nt},n.prototype.Nh=function(){this.state=dt,this.changed()},n.prototype.qt=function(t){this.tf=t.grid,this.nf=t.keys,this.B=t.data,this.state=pt,this.changed()},n.prototype.rf=function(){if(this.state==lt)if(this.state=vt,this.if)pf(this.Nt,this.qt.bind(this),this.Nh.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.Hh.bind(this)),t.addEventListener("error",this.Jh.bind(this)),t.open("GET",this.Nt),t.send()}},n.prototype.Hh=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.Nh()}this.qt(i)}else this.Nh()},n.prototype.Jh=function(t){this.Nh()},n.prototype.load=function(){this.Qh?this.rf():this.setState(yt)},n}(Mt),Dw=function(t){function n(n){var i=t.call(this,{projection:yr("EPSG:3857"),state:"loading",zDirection:n.zDirection})||this;if(i.Qh=void 0===n.preemptive||n.preemptive,i.ef=Qf,i.uf=void 0,i.if=n.jsonp||!1,n.url)if(i.if)pf(n.url,i.handleTileJSONResponse.bind(i),i.handleTileJSONError.bind(i));else{var r=new XMLHttpRequest;r.addEventListener("load",i.Hh.bind(i)),r.addEventListener("error",i.Jh.bind(i)),r.open("GET",n.url),r.send()}else n.tileJSON?i.handleTileJSONResponse(n.tileJSON):Et(!1,51);return i}return Fw(n,t),n.prototype.Hh=function(t){var n=t.target;if(!n.status||n.status>=200&&n.status<300){var i=void 0;try{i=JSON.parse(n.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},n.prototype.Jh=function(t){this.handleTileJSONError()},n.prototype.getTemplate=function(){return this.uf},n.prototype.forDataAtCoordinateAndResolution=function(t,n,i,r){if(this.tileGrid){var e=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,r)}else!0===r?setTimeout((function(){i(null)}),0):i(null)},n.prototype.handleTileJSONError=function(){this.setState("error")},n.prototype.handleTileJSONResponse=function(t){var n,i=yr("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var e=Or(i,r);n=ni(t.bounds,e)}var o=$f(r),s=t.minzoom||0,u=Zf({extent:o,maxZoom:t.maxzoom||22,minZoom:s});this.tileGrid=u,this.uf=t.template;var a=t.grids;if(a){if(this.ef=Hf(a,u),void 0!==t.attribution){var h=void 0!==n?n:o;this.setAttributions((function(n){return Kn(h,n.extent)?[t.attribution]:null}))}this.setState("ready")}else this.setState("error")},n.prototype.getTile=function(t,n,i,r,e){var o=qh(t,n,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,n,i],u=this.getTileCoordForTileUrlFunction(s,e),a=this.ef(u,r,e),h=new Gw(s,void 0!==a?lt:yt,void 0!==a?a:"",this.tileGrid.getTileCoordExtent(s),this.Qh,this.if);return this.tileCache.set(o,h),h},n.prototype.useTile=function(t,n,i){var r=qh(t,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},n}(fp),Uw=Dw,qw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bw=function(t){function n(n){var i=this,r=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(r=n.interpolate);var e=void 0!==n.requestEncoding?n.requestEncoding:"KVP",o=n.tileGrid,s=n.urls;return void 0===s&&void 0!==n.url&&(s=tc(n.url)),(i=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:r,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,urls:s,wrapX:void 0!==n.wrapX&&n.wrapX,transition:n.transition,zDirection:n.zDirection})||this).af=void 0!==n.version?n.version:"1.0.0",i.Le=void 0!==n.format?n.format:"image/jpeg",i.hf=void 0!==n.dimensions?n.dimensions:{},i.Ds=n.layer,i.ff=n.matrixSet,i.H=n.style,i.cf=e,i.setKey(i.lf()),s&&s.length>0&&(i.tileUrlFunction=Jf(s.map(i.createFromWMTSTemplate.bind(i)))),i}return qw(n,t),n.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.setTileUrlFunction(Jf(t.map(this.createFromWMTSTemplate.bind(this))),n)},n.prototype.getDimensions=function(){return this.hf},n.prototype.getFormat=function(){return this.Le},n.prototype.getLayer=function(){return this.Ds},n.prototype.getMatrixSet=function(){return this.ff},n.prototype.getRequestEncoding=function(){return this.cf},n.prototype.getStyle=function(){return this.H},n.prototype.getVersion=function(){return this.af},n.prototype.lf=function(){var t=0,n=[];for(var i in this.hf)n[t++]=i+"-"+this.hf[i];return n.join("/")},n.prototype.updateDimensions=function(t){P(this.hf,t),this.setKey(this.lf())},n.prototype.createFromWMTSTemplate=function(t){var n=this.cf,i={layer:this.Ds,style:this.H,tilematrixset:this.ff};"KVP"==n&&P(i,{Service:"WMTS",Request:"GetTile",Version:this.af,Format:this.Le}),t="KVP"==n?nc(t,i):t.replace(/\{(\w+?)\}/g,(function(t,n){return n.toLowerCase()in i?i[n.toLowerCase()]:t}));var r=this.tileGrid,e=this.hf;return function(i,o,s){if(i){var u={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};P(u,e);var a=t;return a="KVP"==n?nc(a,u):a.replace(/\{(\w+?)\}/g,(function(t,n){return u[n]}))}}},n}(mp),Xw=Bw;var Yw=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zw="renderOrder",Vw=function(t){function n(n){var i=this,r=n||{},e=P({},r);return delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,(i=t.call(this,e)||this).vf=void 0!==r.declutter&&r.declutter,i.pf=void 0!==r.renderBuffer?r.renderBuffer:100,i.H=null,i.tt=void 0,i.setStyle(r.style),i.df=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.yf=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return Yw(n,t),n.prototype.getDeclutter=function(){return this.vf},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderBuffer=function(){return this.pf},n.prototype.getRenderOrder=function(){return this.get(Zw)},n.prototype.getStyle=function(){return this.H},n.prototype.getStyleFunction=function(){return this.tt},n.prototype.getUpdateWhileAnimating=function(){return this.df},n.prototype.getUpdateWhileInteracting=function(){return this.yf},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new Jv(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set(Zw,t)},n.prototype.setStyle=function(t){this.H=void 0!==t?t:Yv,this.tt=null===t?void 0:Bv(this.H),this.changed()},n}(ws),Ww="GENERATE_POLYGON_BUFFERS",$w="GENERATE_POINT_BUFFERS",Kw="GENERATE_LINE_STRING_BUFFERS",Hw=i(6),Jw=function(t,n,i){if(i||2===arguments.length)for(var r,e=0,o=n.length;e<o;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))},Qw=[],tg={vertexPosition:0,indexPosition:0};function ng(t,n,i,r,e){t[n+0]=i,t[n+1]=r,t[n+2]=e}function ig(t,n){var i=n||[],r=256,e=255;return i[0]=Math.floor(t/r/r/r)/e,i[1]=Math.floor(t/r/r)%r/e,i[2]=Math.floor(t/r)%r/e,i[3]=t%r/e,i}function rg(t){var n=0,i=256,r=255;return n+=Math.round(t[0]*i*i*i*r),n+=Math.round(t[1]*i*i*r),n+=Math.round(t[2]*i*r),n+=Math.round(t[3]*r)}function eg(){var t='const e="GENERATE_POLYGON_BUFFERS",n="GENERATE_POINT_BUFFERS",t="GENERATE_LINE_STRING_BUFFERS",r="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1,n=arguments.length;e<n;++e){const n=arguments[e];if(null!=n)for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}return t},o="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";o.indexOf("firefox");-1!==o.indexOf("safari")&&-1==o.indexOf("chrom")&&(o.indexOf("version/15.4")>=0||o.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==o.indexOf("webkit")&&o.indexOf("edge"),o.indexOf("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),function(){let e=!1;try{const n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(e){}}();class x extends Error{constructor(e){const n="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+e+" for details.";super(n),this.code=e,this.name="AssertionError",this.message=n}}function i(e,n){const t=n[0],r=n[1];return n[0]=e[0]*t+e[2]*r+e[4],n[1]=e[1]*t+e[3]*r+e[5],n}function u(e,n){const t=(r=n)[0]*r[3]-r[1]*r[2];var r;!function(e,n){if(!e)throw new x(n)}(0!==t,32);const o=n[0],i=n[1],u=n[2],f=n[3],s=n[4],a=n[5];return e[0]=f/t,e[1]=-i/t,e[2]=-u/t,e[3]=o/t,e[4]=(u*a-f*s)/t,e[5]=-(o*a-i*s)/t,e}new Array(6);var f={exports:{}};function s(e,n,t){t=t||2;var r,o,x,i,u,f,s,v=n&&n.length,h=v?n[0]*t:e.length,y=a(e,0,h,t,!0),p=[];if(!y||y.next===y.prev)return p;if(v&&(y=function(e,n,t,r){var o,x,i,u=[];for(o=0,x=n.length;o<x;o++)(i=a(e,n[o]*r,o<x-1?n[o+1]*r:e.length,r,!1))===i.next&&(i.steiner=!0),u.push(Z(i));for(u.sort(d),o=0;o<u.length;o++)t=l(t=g(u[o],t),t.next);return t}(e,n,y,t)),e.length>80*t){r=x=e[0],o=i=e[1];for(var b=t;b<h;b+=t)(u=e[b])<r&&(r=u),(f=e[b+1])<o&&(o=f),u>x&&(x=u),f>i&&(i=f);s=0!==(s=Math.max(x-r,i-o))?1/s:0}return c(y,p,t,r,o,s),p}function a(e,n,t,r,o){var x,i;if(o===G(e,n,t,r)>0)for(x=n;x<t;x+=r)i=k(x,e[x],e[x+1],i);else for(x=t-r;x>=n;x-=r)i=k(x,e[x],e[x+1],i);return i&&E(i,i.next)&&(z(i),i=i.next),i}function l(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!E(r,r.next)&&0!==M(r.prev,r,r.next))r=r.next;else{if(z(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function c(e,n,t,r,o,x,i){if(e){!i&&x&&function(e,n,t,r){var o=e;do{null===o.z&&(o.z=w(o.x,o.y,n,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var n,t,r,o,x,i,u,f,s=1;do{for(t=e,e=null,x=null,i=0;t;){for(i++,r=t,u=0,n=0;n<s&&(u++,r=r.nextZ);n++);for(f=s;u>0||f>0&&r;)0!==u&&(0===f||!r||t.z<=r.z)?(o=t,t=t.nextZ,u--):(o=r,r=r.nextZ,f--),x?x.nextZ=o:e=o,o.prevZ=x,x=o;t=r}x.nextZ=null,s*=2}while(i>1)}(o)}(e,r,o,x);for(var u,f,s=e;e.prev!==e.next;)if(u=e.prev,f=e.next,x?h(e,r,o,x):v(e))n.push(u.i/t),n.push(e.i/t),n.push(f.i/t),z(e),e=f.next,s=f.next;else if((e=f)===s){i?1===i?c(e=y(l(e),n,t),n,t,r,o,x,2):2===i&&p(e,n,t,r,o,x):c(l(e),n,t,r,o,x,1);break}}}function v(e){var n=e.prev,t=e,r=e.next;if(M(n,t,r)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(m(n.x,n.y,t.x,t.y,r.x,r.y,o.x,o.y)&&M(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function h(e,n,t,r){var o=e.prev,x=e,i=e.next;if(M(o,x,i)>=0)return!1;for(var u=o.x<x.x?o.x<i.x?o.x:i.x:x.x<i.x?x.x:i.x,f=o.y<x.y?o.y<i.y?o.y:i.y:x.y<i.y?x.y:i.y,s=o.x>x.x?o.x>i.x?o.x:i.x:x.x>i.x?x.x:i.x,a=o.y>x.y?o.y>i.y?o.y:i.y:x.y>i.y?x.y:i.y,l=w(u,f,n,t,r),c=w(s,a,n,t,r),v=e.prevZ,h=e.nextZ;v&&v.z>=l&&h&&h.z<=c;){if(v!==e.prev&&v!==e.next&&m(o.x,o.y,x.x,x.y,i.x,i.y,v.x,v.y)&&M(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,h!==e.prev&&h!==e.next&&m(o.x,o.y,x.x,x.y,i.x,i.y,h.x,h.y)&&M(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;v&&v.z>=l;){if(v!==e.prev&&v!==e.next&&m(o.x,o.y,x.x,x.y,i.x,i.y,v.x,v.y)&&M(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;h&&h.z<=c;){if(h!==e.prev&&h!==e.next&&m(o.x,o.y,x.x,x.y,i.x,i.y,h.x,h.y)&&M(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function y(e,n,t){var r=e;do{var o=r.prev,x=r.next.next;!E(o,x)&&O(o,r,r.next,x)&&P(o,x)&&P(x,o)&&(n.push(o.i/t),n.push(r.i/t),n.push(x.i/t),z(r),z(r.next),r=e=x),r=r.next}while(r!==e);return l(r)}function p(e,n,t,r,o,x){var i=e;do{for(var u=i.next.next;u!==i.prev;){if(i.i!==u.i&&A(i,u)){var f=_(i,u);return i=l(i,i.next),f=l(f,f.next),c(i,n,t,r,o,x),void c(f,n,t,r,o,x)}u=u.next}i=i.next}while(i!==e)}function d(e,n){return e.x-n.x}function g(e,n){var t=function(e,n){var t,r=n,o=e.x,x=e.y,i=-1/0;do{if(x<=r.y&&x>=r.next.y&&r.next.y!==r.y){var u=r.x+(x-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=o&&u>i){if(i=u,u===o){if(x===r.y)return r;if(x===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(o===i)return t;var f,s=t,a=t.x,l=t.y,c=1/0;r=t;do{o>=r.x&&r.x>=a&&o!==r.x&&m(x<l?o:i,x,a,l,x<l?i:o,x,r.x,r.y)&&(f=Math.abs(x-r.y)/(o-r.x),P(r,e)&&(f<c||f===c&&(r.x>t.x||r.x===t.x&&b(t,r)))&&(t=r,c=f)),r=r.next}while(r!==s);return t}(e,n);if(!t)return n;var r=_(t,e),o=l(t,t.next);return l(r,r.next),n===t?o:n}function b(e,n){return M(e.prev,e,n.prev)<0&&M(n.next,e,e.next)<0}function w(e,n,t,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*o)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*o)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Z(e){var n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function m(e,n,t,r,o,x,i,u){return(o-i)*(n-u)-(e-i)*(x-u)>=0&&(e-i)*(r-u)-(t-i)*(n-u)>=0&&(t-i)*(x-u)-(o-i)*(r-u)>=0}function A(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!function(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&O(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}(e,n)&&(P(e,n)&&P(n,e)&&function(e,n){var t=e,r=!1,o=(e.x+n.x)/2,x=(e.y+n.y)/2;do{t.y>x!=t.next.y>x&&t.next.y!==t.y&&o<(t.next.x-t.x)*(x-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}(e,n)&&(M(e.prev,e,n.prev)||M(e,n.prev,n))||E(e,n)&&M(e.prev,e,e.next)>0&&M(n.prev,n,n.next)>0)}function M(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function E(e,n){return e.x===n.x&&e.y===n.y}function O(e,n,t,r){var o=I(M(e,n,t)),x=I(M(e,n,r)),i=I(M(t,r,e)),u=I(M(t,r,n));return o!==x&&i!==u||(!(0!==o||!F(e,t,n))||(!(0!==x||!F(e,r,n))||(!(0!==i||!F(t,e,r))||!(0!==u||!F(t,n,r)))))}function F(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function I(e){return e>0?1:e<0?-1:0}function P(e,n){return M(e.prev,e,e.next)<0?M(e,n,e.next)>=0&&M(e,e.prev,n)>=0:M(e,n,e.prev)<0||M(e,e.next,n)<0}function _(e,n){var t=new B(e.i,e.x,e.y),r=new B(n.i,n.x,n.y),o=e.next,x=n.prev;return e.next=n,n.prev=e,t.next=o,o.prev=t,r.next=t,t.prev=r,x.next=r,r.prev=x,r}function k(e,n,t,r){var o=new B(e,n,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function z(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function G(e,n,t,r){for(var o=0,x=n,i=t-r;x<t;x+=r)o+=(e[i]-e[x])*(e[x+1]+e[i+1]),i=x;return o}f.exports=s,f.exports.default=s,s.deviation=function(e,n,t,r){var o=n&&n.length,x=o?n[0]*t:e.length,i=Math.abs(G(e,0,x,t));if(o)for(var u=0,f=n.length;u<f;u++){var s=n[u]*t,a=u<f-1?n[u+1]*t:e.length;i-=Math.abs(G(e,s,a,t))}var l=0;for(u=0;u<r.length;u+=3){var c=r[u]*t,v=r[u+1]*t,h=r[u+2]*t;l+=Math.abs((e[c]-e[h])*(e[v+1]-e[c+1])-(e[c]-e[v])*(e[h+1]-e[c+1]))}return 0===i&&0===l?0:Math.abs((l-i)/i)},s.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,o=0;o<e.length;o++){for(var x=0;x<e[o].length;x++)for(var i=0;i<n;i++)t.vertices.push(e[o][x][i]);o>0&&(r+=e[o-1].length,t.holes.push(r))}return t};const N=[],R={vertexPosition:0,indexPosition:0};function S(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function T(e,n,t,r,o,x){const i=3+o,u=e[n+0],f=e[n+1],s=N;s.length=o;for(let t=0;t<s.length;t++)s[t]=e[n+2+t];let a=x?x.vertexPosition:0,l=x?x.indexPosition:0;const c=a/i;return S(t,a,u,f,0),s.length&&t.set(s,a+3),a+=i,S(t,a,u,f,1),s.length&&t.set(s,a+3),a+=i,S(t,a,u,f,2),s.length&&t.set(s,a+3),a+=i,S(t,a,u,f,3),s.length&&t.set(s,a+3),a+=i,r[l++]=c,r[l++]=c+1,r[l++]=c+3,r[l++]=c+1,r[l++]=c+2,r[l++]=c+3,R.vertexPosition=a,R.indexPosition=l,R}function C(e,n,t,r,o,x,u,f,s,a){const l=5+f.length,c=x.length/l,v=[e[n+0],e[n+1]],h=[e[t],e[t+1]],y=i(a,[...v]),p=i(a,[...h]);function d(e,n,t){const r=1e4;return Math.round(1500*n)+Math.round(1500*t)*r+e*r*r}function g(e,n,t){const r=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/r,(n[1]-e[1])/r],x=[-o[1],o[0]],i=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),u=[(t[0]-e[0])/i,(t[1]-e[1])/i],f=0===r||0===i?0:Math.acos((s=u[0]*o[0]+u[1]*o[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return u[0]*x[0]+u[1]*x[1]>0?f:2*Math.PI-f}const b=null!==o;let w=0,Z=0;if(null!==r){w=g(y,p,i(a,[...[e[r],e[r+1]]]))}if(b){Z=g(p,y,i(a,[...[e[o],e[o+1]]]))}x.push(v[0],v[1],h[0],h[1],d(0,w,Z)),x.push(...f),x.push(v[0],v[1],h[0],h[1],d(1,w,Z)),x.push(...f),x.push(v[0],v[1],h[0],h[1],d(2,w,Z)),x.push(...f),x.push(v[0],v[1],h[0],h[1],d(3,w,Z)),x.push(...f),u.push(c,c+1,c+2,c+1,c+3,c+2)}function U(e,n,t,r,o){const x=2+o;let i=n;const u=e.slice(i,i+o);i+=o;const s=e[i++];let a=0;const l=new Array(s-1);for(let n=0;n<s;n++)a+=e[i++],n<s-1&&(l[n]=a);const c=e.slice(i,i+2*a),v=f.exports(c,l,2);for(let e=0;e<v.length;e++)r.push(v[e]+t.length/x);for(let e=0;e<c.length;e+=2)t.push(c[e],c[e+1],...u);return i+2*a}const j=self;j.onmessage=o=>{const x=o.data;switch(x.type){case n:{const e=3,n=2,t=x.customAttributesCount,o=n+t,i=new Float32Array(x.renderInstructions),u=i.length/o,f=4*u*(t+e),s=new Uint32Array(6*u),a=new Float32Array(f);let l;for(let e=0;e<i.length;e+=o)l=T(i,e,a,s,t,l);const c=r({vertexBuffer:a.buffer,indexBuffer:s.buffer,renderInstructions:i.buffer},x);j.postMessage(c,[a.buffer,s.buffer,i.buffer]);break}case t:{const e=[],n=[],t=x.customAttributesCount,o=2,i=new Float32Array(x.renderInstructions);let f=0;const s=x.renderInstructionsTransform,a=[1,0,0,1,0,0];let l,c;for(u(a,s);f<i.length;){c=Array.from(i.slice(f,f+t)),f+=t,l=i[f++];for(let t=0;t<l-1;t++)C(i,f+t*o,f+(t+1)*o,t>0?f+(t-1)*o:null,t<l-2?f+(t+2)*o:null,e,n,c,0,a);f+=l*o}const v=Uint32Array.from(n),h=Float32Array.from(e),y=r({vertexBuffer:h.buffer,indexBuffer:v.buffer,renderInstructions:i.buffer},x);j.postMessage(y,[h.buffer,v.buffer,i.buffer]);break}case e:{const e=[],n=[],t=x.customAttributesCount,o=new Float32Array(x.renderInstructions);let i=0;for(;i<o.length;)i=U(o,i,e,n,t);const u=Uint32Array.from(n),f=Float32Array.from(e),s=r({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:o.buffer},x);j.postMessage(s,[f.buffer,u.buffer,o.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}var og=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sg=function(t){function n(n,i){var r=this,e=i.uniforms||{},s=[1,0,0,1,0,0];e[Vc]=s,(r=t.call(this,n,{uniforms:e,postProcesses:i.postProcesses})||this).ready=!1,r.mf=-1,r.wf=new Gc(rc,sc),r.gf=new Gc(rc,sc),r.bf=new Gc(ec,sc),r.Hs=i.vertexShader,r.Js=i.fragmentShader,r.Ks,r.xf=!(!i.hitFragmentShader||!i.hitVertexShader),r._f=i.hitVertexShader,r.Mf=i.hitFragmentShader,r.Sf;var u=i.attributes?i.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:nl.FLOAT}})):[];r.attributes=[{name:"a_position",size:2,type:nl.FLOAT},{name:"a_index",size:1,type:nl.FLOAT}].concat(u),r.hitDetectionAttributes=[{name:"a_position",size:2,type:nl.FLOAT},{name:"a_index",size:1,type:nl.FLOAT},{name:"a_hitColor",size:4,type:nl.FLOAT},{name:"a_featureUid",size:1,type:nl.FLOAT}].concat(u),r.customAttributes=i.attributes?i.attributes:[],r.$i=[1/0,1/0,-1/0,-1/0],r.Of=s,r.jf=[1,0,0,1,0,0],r.Ef=[1,0,0,1,0,0],r.Tf=new Float32Array(0),r.Pf=new Float32Array(0),r.Af,r.Cf=0,r.kf=eg(),r.kf.addEventListener("message",function(t){var n=t.data;if(n.type===$w){var i=n.projectionTransform;n.hitDetection?(this.gf.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.gf)):(this.wf.fromArrayBuffer(n.vertexBuffer),this.helper.flushBufferData(this.wf)),this.bf.fromArrayBuffer(n.indexBuffer),this.helper.flushBufferData(this.bf),this.jf=i,un(this.Ef,this.jf),n.hitDetection?this.Pf=new Float32Array(t.data.renderInstructions):(this.Tf=new Float32Array(t.data.renderInstructions),n.generateBuffersRun===this.Cf&&(this.ready=!0)),this.getLayer().changed()}}.bind(r)),r.If={},r.Nf=0;var a=r.getLayer().getSource();return r.zf=[$(a,Ep,r.Lf,r),$(a,Tp,r.Rf,r),$(a,Ap,r.Ff,r),$(a,Pp,r.Gf,r)],a.forEachFeature(function(t){this.If[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.Nf++}.bind(r)),r}return og(n,t),n.prototype.afterHelperCreated=function(){this.Ks=this.helper.getProgram(this.Js,this.Hs),this.xf&&(this.Sf=this.helper.getProgram(this.Mf,this._f),this.Af=new cl(this.helper))},n.prototype.Lf=function(t){var n=t.feature;this.If[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.Nf++},n.prototype.Rf=function(t){var n=t.feature;this.If[o(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}},n.prototype.Ff=function(t){var n=t.feature;delete this.If[o(n)],this.Nf--},n.prototype.Gf=function(){this.If={},this.Nf=0},n.prototype.renderFrame=function(t){var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState.projection,r=this.getLayer().getSource().getWrapX()&&i.canWrapX(),e=i.getExtent(),o=t.extent,s=r?$n(e):null,u=r?Math.ceil((o[2]-e[2])/s)+1:1,a=r?Math.floor((o[0]-e[0])/s):0,h=a,f=this.bf.getSize();do{this.helper.makeProjectionTransform(t,this.Of),on(this.Of,h*s,0),Ht(this.Of,this.Ef),this.helper.applyUniforms(t),this.helper.drawElements(0,f)}while(++h<u);this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var c=this.helper.getCanvas();return this.xf&&(this.renderHitDetection(t,a,u,s),this.Af.clearCachedData()),this.postRender(n,t),c},n.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),i=n.getSource(),r=t.viewState,e=!t.viewHints[zu]&&!t.viewHints[Lu],o=!Pn(this.$i,t.extent),s=this.mf<i.getRevision();if(s&&(this.mf=i.getRevision()),e&&(o||s)){var u=r.projection,a=r.resolution,h=n instanceof Vw?n.getRenderBuffer():0,f=mn(t.extent,h*a);i.loadFeatures(f,a,u),this.Df(t),this.$i=t.extent.slice()}return this.helper.useProgram(this.Ks,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.wf),this.helper.bindBuffer(this.bf),this.helper.enableAttributes(this.attributes),!0},n.prototype.Df=function(t){var n=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,n);var i,r,e=(2+this.customAttributes.length)*this.Nf;if(this.Tf&&this.Tf.length===e||(this.Tf=new Float32Array(e)),this.xf){var o=(7+this.customAttributes.length)*this.Nf;this.Pf&&this.Pf.length===o||(this.Pf=new Float32Array(o))}var s,u=[],a=[],h=0,f=0;for(var c in this.If)if((r=(i=this.If[c]).geometry)&&"Point"===r.getType()){u[0]=r.getFlatCoordinates()[0],u[1]=r.getFlatCoordinates()[1],tn(n,u),s=ig(f+6,a),this.Tf[h++]=u[0],this.Tf[h++]=u[1],this.xf&&(this.Pf[f++]=u[0],this.Pf[f++]=u[1],this.Pf[f++]=s[0],this.Pf[f++]=s[1],this.Pf[f++]=s[2],this.Pf[f++]=s[3],this.Pf[f++]=Number(c));for(var l=void 0,v=0;v<this.customAttributes.length;v++)l=this.customAttributes[v].callback(i.feature,i.properties),this.Tf[h++]=l,this.xf&&(this.Pf[f++]=l)}var p={id:0,type:$w,renderInstructions:this.Tf.buffer,customAttributesCount:this.customAttributes.length};if(p.projectionTransform=n,p.generateBuffersRun=++this.Cf,this.ready=!1,this.kf.postMessage(p,[this.Tf.buffer]),this.Tf=null,this.xf){var d={id:0,type:$w,renderInstructions:this.Pf.buffer,customAttributesCount:5+this.customAttributes.length};d.projectionTransform=n,d.hitDetection=!0,this.kf.postMessage(d,[this.Pf.buffer]),this.Pf=null}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){if(Et(this.xf,66),this.Pf){var o=tn(n.coordinateToPixelTransform,t.slice()),s=this.Af.readPixel(o[0]/2,o[1]/2),u=rg([s[0]/255,s[1]/255,s[2]/255,s[3]/255]),a=this.Pf[u],h=Math.floor(a).toString(),f=this.getLayer().getSource().getFeatureByUid(h);return f?r(f,this.getLayer(),null):void 0}},n.prototype.renderHitDetection=function(t,n,i,r){if(this.gf.getSize()){var e=n;this.Af.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.Sf,t),this.helper.prepareDrawToRenderTarget(t,this.Af,!0),this.helper.bindBuffer(this.gf),this.helper.bindBuffer(this.bf),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(t,this.Of),on(this.Of,e*r,0),Ht(this.Of,this.Ef),this.helper.applyUniforms(t);var o=this.bf.getSize();this.helper.drawElements(0,o)}while(++e<i)}},n.prototype.disposeInternal=function(){this.kf.terminate(),this.Ds=null,this.zf.forEach((function(t){H(t)})),this.zf=null,t.prototype.disposeInternal.call(this)},n}(Tl),ug=0,ag=function(){function t(t,n,i,r,e){this.us=t,this.kf=n,this.Ks=this.us.getProgram(r,i),this.attributes=[],this.customAttributes=e}return t.prototype.rebuild=function(t,n,i,r){t.renderInstructionsTransform=this.us.makeProjectionTransform(n,[1,0,0,1,0,0]),this.generateRenderInstructions(t),this.Uf(t,i,r)},t.prototype.render=function(t,n,i,r){this.us.makeProjectionTransform(i,n),on(n,r,0),Ht(n,t.invertVerticesBufferTransform),this.us.useProgram(this.Ks,i),this.us.bindBuffer(t.verticesBuffer),this.us.bindBuffer(t.indicesBuffer),this.us.enableAttributes(this.attributes);var e=t.indicesBuffer.getSize();this.us.drawElements(0,e)},t.prototype.generateRenderInstructions=function(t){r()},t.prototype.Uf=function(t,n,i){var r,e=ug++;switch(n){case"Polygon":r=Ww;break;case"Point":r=$w;break;case"LineString":r=Kw}var o={id:e,type:r,renderInstructions:t.renderInstructions.buffer,renderInstructionsTransform:t.renderInstructionsTransform,customAttributesCount:this.customAttributes.length};this.kf.postMessage(o,[t.renderInstructions.buffer]),t.renderInstructions=null;var s=function(n){var r=n.data;r.id===e&&(this.kf.removeEventListener("message",s),t.verticesBufferTransform=r.renderInstructionsTransform,un(t.invertVerticesBufferTransform,t.verticesBufferTransform),t.verticesBuffer.fromArrayBuffer(r.vertexBuffer),this.us.flushBufferData(t.verticesBuffer),t.indicesBuffer.fromArrayBuffer(r.indexBuffer),this.us.flushBufferData(t.indicesBuffer),t.renderInstructions=new Float32Array(r.renderInstructions),i())}.bind(this);this.kf.addEventListener("message",s)},t}(),hg=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fg={SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",PARAMETERS:"a_parameters"},cg=function(t){function n(n,i,r,e,o){var s=t.call(this,n,i,r,e,o)||this;return s.attributes=[{name:fg.SEGMENT_START,size:2,type:nl.FLOAT},{name:fg.SEGMENT_END,size:2,type:nl.FLOAT},{name:fg.PARAMETERS,size:1,type:nl.FLOAT}].concat(o.map((function(t){return{name:"a_"+t.name,size:1,type:nl.FLOAT}}))),s}return hg(n,t),n.prototype.generateRenderInstructions=function(t){var n,i=2*t.verticesCount+(1+this.customAttributes.length)*t.geometriesCount;t.renderInstructions&&t.renderInstructions.length===i||(t.renderInstructions=new Float32Array(i));var r,e=[],o=0;for(var s in t.entries)for(var u=0,a=(n=t.entries[s]).flatCoordss.length;u<a;u++){e.length=n.flatCoordss[u].length,Dr(n.flatCoordss[u],0,e.length,2,t.renderInstructionsTransform,e);for(var h=0,f=this.customAttributes.length;h<f;h++)r=this.customAttributes[h].callback(n.feature),t.renderInstructions[o++]=r;t.renderInstructions[o++]=e.length/2;for(var c=0,l=e.length;c<l;c+=2)t.renderInstructions[o++]=e[c],t.renderInstructions[o++]=e[c+1]}},n}(ag),lg=function(){function t(){this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0,renderInstructions:new Float32Array(0),verticesBuffer:new Gc(rc,sc),indicesBuffer:new Gc(ec,sc),renderInstructionsTransform:[1,0,0,1,0,0],verticesBufferTransform:[1,0,0,1,0,0],invertVerticesBufferTransform:[1,0,0,1,0,0]},this.pointBatch={entries:{},geometriesCount:0,renderInstructions:new Float32Array(0),verticesBuffer:new Gc(rc,sc),indicesBuffer:new Gc(ec,sc),renderInstructionsTransform:[1,0,0,1,0,0],verticesBufferTransform:[1,0,0,1,0,0],invertVerticesBufferTransform:[1,0,0,1,0,0]},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0,renderInstructions:new Float32Array(0),verticesBuffer:new Gc(rc,sc),indicesBuffer:new Gc(ec,sc),renderInstructionsTransform:[1,0,0,1,0,0],verticesBufferTransform:[1,0,0,1,0,0],invertVerticesBufferTransform:[1,0,0,1,0,0]}}return t.prototype.addFeatures=function(t){for(var n=0;n<t.length;n++)this.addFeature(t[n])},t.prototype.addFeature=function(t){var n=t.getGeometry();n&&this.qf(n,t)},t.prototype.Bf=function(t){var n=o(t);return n in this.pointBatch.entries||(this.pointBatch.entries[n]={feature:t,flatCoordss:[]}),this.pointBatch.entries[n]},t.prototype.Xf=function(t){var n=o(t);return n in this.lineStringBatch.entries||(this.lineStringBatch.entries[n]={feature:t,flatCoordss:[],verticesCount:0}),this.lineStringBatch.entries[n]},t.prototype.Yf=function(t){var n=o(t);return n in this.polygonBatch.entries||(this.polygonBatch.entries[n]={feature:t,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]}),this.polygonBatch.entries[n]},t.prototype.Zf=function(t){var n=this.pointBatch.entries[o(t)];n&&(this.pointBatch.geometriesCount-=n.flatCoordss.length,delete this.pointBatch.entries[o(t)])},t.prototype.Vf=function(t){var n=this.lineStringBatch.entries[o(t)];n&&(this.lineStringBatch.verticesCount-=n.verticesCount,this.lineStringBatch.geometriesCount-=n.flatCoordss.length,delete this.lineStringBatch.entries[o(t)])},t.prototype.Wf=function(t){var n=this.polygonBatch.entries[o(t)];n&&(this.polygonBatch.verticesCount-=n.verticesCount,this.polygonBatch.ringsCount-=n.ringsCount,this.polygonBatch.geometriesCount-=n.flatCoordss.length,delete this.polygonBatch.entries[o(t)])},t.prototype.qf=function(t,n){var i,r,e,o=this;switch(t.getType()){case"GeometryCollection":t.getGeometries().map((function(t){return o.qf(t,n)}));break;case"MultiPolygon":t.getPolygons().map((function(t){return o.qf(t,n)}));break;case"MultiLineString":t.getLineStrings().map((function(t){return o.qf(t,n)}));break;case"MultiPoint":t.getPoints().map((function(t){return o.qf(t,n)}));break;case"Polygon":var s=t;e=this.Yf(n),r=(i=s.getFlatCoordinates()).length/2;var u=s.getLinearRingCount(),a=s.getEnds().map((function(t,n,i){return n>0?(t-i[n-1])/2:t/2}));this.polygonBatch.verticesCount+=r,this.polygonBatch.ringsCount+=u,this.polygonBatch.geometriesCount++,e.flatCoordss.push(i),e.ringsVerticesCounts.push(a),e.verticesCount+=r,e.ringsCount+=u,s.getLinearRings().map((function(t){return o.qf(t,n)}));break;case"Point":var h=t;e=this.Bf(n),i=h.getFlatCoordinates(),this.pointBatch.geometriesCount++,e.flatCoordss.push(i);break;case"LineString":case"LinearRing":var f=t;e=this.Xf(n),r=(i=f.getFlatCoordinates()).length/2,this.lineStringBatch.verticesCount+=r,this.lineStringBatch.geometriesCount++,e.flatCoordss.push(i),e.verticesCount+=r}},t.prototype.changeFeature=function(t){this.Zf(t),this.Wf(t),this.Vf(t);var n=t.getGeometry();n&&this.qf(n,t)},t.prototype.removeFeature=function(t){this.Zf(t),this.Wf(t),this.Vf(t)},t.prototype.clear=function(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0},t}(),vg=lg,pg=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dg={POSITION:"a_position",INDEX:"a_index"},yg=function(t){function n(n,i,r,e,o){var s=t.call(this,n,i,r,e,o)||this;return s.attributes=[{name:dg.POSITION,size:2,type:nl.FLOAT},{name:dg.INDEX,size:1,type:nl.FLOAT}].concat(o.map((function(t){return{name:"a_"+t.name,size:1,type:nl.FLOAT}}))),s}return pg(n,t),n.prototype.generateRenderInstructions=function(t){var n,i=(2+this.customAttributes.length)*t.geometriesCount;t.renderInstructions&&t.renderInstructions.length===i||(t.renderInstructions=new Float32Array(i));var r,e=[],o=0;for(var s in t.entries)for(var u=0,a=(n=t.entries[s]).flatCoordss.length;u<a;u++){e[0]=n.flatCoordss[u][0],e[1]=n.flatCoordss[u][1],tn(t.renderInstructionsTransform,e),t.renderInstructions[o++]=e[0],t.renderInstructions[o++]=e[1];for(var h=0,f=this.customAttributes.length;h<f;h++)r=this.customAttributes[h].callback(n.feature),t.renderInstructions[o++]=r}},n}(ag),mg=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wg={POSITION:"a_position"},gg=function(t){function n(n,i,r,e,o){var s=t.call(this,n,i,r,e,o)||this;return s.attributes=[{name:wg.POSITION,size:2,type:nl.FLOAT}].concat(o.map((function(t){return{name:"a_"+t.name,size:1,type:nl.FLOAT}}))),s}return mg(n,t),n.prototype.generateRenderInstructions=function(t){var n,i=2*t.verticesCount+(1+this.customAttributes.length)*t.geometriesCount+t.ringsCount;t.renderInstructions&&t.renderInstructions.length===i||(t.renderInstructions=new Float32Array(i));var r,e=[],o=0;for(var s in t.entries)for(var u=0,a=(n=t.entries[s]).flatCoordss.length;u<a;u++){e.length=n.flatCoordss[u].length,Dr(n.flatCoordss[u],0,e.length,2,t.renderInstructionsTransform,e);for(var h=0,f=this.customAttributes.length;h<f;h++)r=this.customAttributes[h].callback(n.feature),t.renderInstructions[o++]=r;t.renderInstructions[o++]=n.ringsVerticesCounts[u].length;for(var c=0,l=n.ringsVerticesCounts[u].length;c<l;c++)t.renderInstructions[o++]=n.ringsVerticesCounts[u][c];for(c=0,l=e.length;c<l;c+=2)t.renderInstructions[o++]=e[c],t.renderInstructions[o++]=e[c+1]}},n}(ag);function bg(t){var n=Xo(t);return 256*n[0]*256+256*n[1]+n[2]}var xg="vec3(\n  fract(floor(a_color / 256.0 / 256.0) / 256.0),\n  fract(floor(a_color / 256.0) / 256.0),\n  fract(a_color / 256.0)\n);",_g="\n  precision mediump float;\n  uniform mat4 u_projectionMatrix;\n  attribute vec2 a_position;\n  attribute float a_color;\n  attribute float a_opacity;\n  varying vec3 v_color;\n  varying float v_opacity;\n\n  void main(void) {\n    gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n    v_color = ".concat(xg,"\n    v_opacity = a_opacity;\n  }"),Mg="\n  precision mediump float;\n  varying vec3 v_color;\n  varying float v_opacity;\n\n  void main(void) {\n    gl_FragColor = vec4(v_color, 1.0) * v_opacity;\n  }",Sg="\n  precision mediump float;\n  uniform mat4 u_projectionMatrix;\n  uniform vec2 u_sizePx;\n  attribute vec2 a_segmentStart;\n  attribute vec2 a_segmentEnd;\n  attribute float a_parameters;\n  attribute float a_color;\n  attribute float a_opacity;\n  attribute float a_width;\n  varying vec2 v_segmentStart;\n  varying vec2 v_segmentEnd;\n  varying float v_angleStart;\n  varying float v_angleEnd;\n  varying vec3 v_color;\n  varying float v_opacity;\n  varying float v_width;\n\n  vec2 worldToPx(vec2 worldPos) {\n    vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n    return (0.5 * screenPos.xy + 0.5) * u_sizePx;\n  }\n\n  vec4 pxToScreen(vec2 pxPos) {\n    vec2 screenPos = pxPos * 4.0 / u_sizePx;\n    return vec4(screenPos.xy, 0.0, 0.0);\n  }\n\n  vec2 getOffsetDirection(vec2 normalPx, vec2 tangentPx, float joinAngle) {\n    if (cos(joinAngle) > 0.93) return normalPx - tangentPx;\n    float halfAngle = joinAngle / 2.0;\n    vec2 angleBisectorNormal = vec2(\n      sin(halfAngle) * normalPx.x + cos(halfAngle) * normalPx.y,\n      -cos(halfAngle) * normalPx.x + sin(halfAngle) * normalPx.y\n    );\n    float length = 1.0 / sin(halfAngle);\n    return angleBisectorNormal * length;\n  }\n\n  void main(void) {\n    float anglePrecision = 1500.0;\n    float paramShift = 10000.0;\n    v_angleStart = fract(a_parameters / paramShift) * paramShift / anglePrecision;\n    v_angleEnd = fract(floor(a_parameters / paramShift + 0.5) / paramShift) * paramShift / anglePrecision;\n    float vertexNumber = floor(a_parameters / paramShift / paramShift + 0.0001);\n    vec2 tangentPx = worldToPx(a_segmentEnd) - worldToPx(a_segmentStart);\n    tangentPx = normalize(tangentPx);\n    vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n    float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n    float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n    float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n    vec2 offsetPx = getOffsetDirection(normalPx * normalDir, tangentDir * tangentPx, angle) * a_width * 0.5;\n    vec2 position =  vertexNumber < 1.5 ? a_segmentStart : a_segmentEnd;\n    gl_Position = u_projectionMatrix * vec4(position, 0.0, 1.0) + pxToScreen(offsetPx);\n    v_segmentStart = worldToPx(a_segmentStart);\n    v_segmentEnd = worldToPx(a_segmentEnd);\n    v_color = ".concat(xg,"\n    v_opacity = a_opacity;\n    v_width = a_width;\n  }"),Og="\n  precision mediump float;\n  uniform float u_pixelRatio;\n  varying vec2 v_segmentStart;\n  varying vec2 v_segmentEnd;\n  varying float v_angleStart;\n  varying float v_angleEnd;\n  varying vec3 v_color;\n  varying float v_opacity;\n  varying float v_width;\n\n  float segmentDistanceField(vec2 point, vec2 start, vec2 end, float radius) {\n    vec2 startToPoint = point - start;\n    vec2 startToEnd = end - start;\n    float ratio = clamp(dot(startToPoint, startToEnd) / dot(startToEnd, startToEnd), 0.0, 1.0);\n    float dist = length(startToPoint - ratio * startToEnd);\n    return 1.0 - smoothstep(radius - 1.0, radius, dist);\n  }\n\n  void main(void) {\n    vec2 v_currentPoint = gl_FragCoord.xy / u_pixelRatio;\n    gl_FragColor = vec4(v_color, 1.0) * v_opacity;\n    gl_FragColor *= segmentDistanceField(v_currentPoint, v_segmentStart, v_segmentEnd, v_width);\n  }",jg="\n  precision mediump float;\n  uniform mat4 u_projectionMatrix;\n  uniform mat4 u_offsetScaleMatrix;\n  attribute vec2 a_position;\n  attribute float a_index;\n  attribute float a_color;\n  attribute float a_opacity;\n  varying vec2 v_texCoord;\n  varying vec3 v_color;\n  varying float v_opacity;\n\n  void main(void) {\n    mat4 offsetMatrix = u_offsetScaleMatrix;\n    float size = 6.0;\n    float offsetX = a_index == 0.0 || a_index == 3.0 ? -size / 2.0 : size / 2.0;\n    float offsetY = a_index == 0.0 || a_index == 1.0 ? -size / 2.0 : size / 2.0;\n    vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n    gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n    float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n    float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n    v_texCoord = vec2(u, v);\n    v_color = ".concat(xg,"\n    v_opacity = a_opacity;\n  }"),Eg="\n  precision mediump float;\n  varying vec3 v_color;\n  varying float v_opacity;\n\n  void main(void) {\n      gl_FragColor = vec4(v_color, 1.0) * v_opacity;\n  }",Tg=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pg=function(){return Pg=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},Pg.apply(this,arguments)};function Ag(t){return Object.keys(t).map((function(n){return{name:n,callback:t[n]}}))}var Cg=function(t){function n(n,i){var r=this,e=i.uniforms||{},o=[1,0,0,1,0,0];e[Vc]=o,(r=t.call(this,n,{uniforms:e,postProcesses:i.postProcesses})||this).mf=-1,r.$i=[1/0,1/0,-1/0,-1/0],r.Of=o;var s=Pg({color:function(){return bg("#ddd")},opacity:function(){return 1}},i.fill&&i.fill.attributes),u=Pg({color:function(){return bg("#eee")},opacity:function(){return 1},width:function(){return 1.5}},i.stroke&&i.stroke.attributes),a=Pg({color:function(){return bg("#eee")},opacity:function(){return 1}},i.point&&i.point.attributes);r.$f=i.fill&&i.fill.vertexShader||_g,r.Kf=i.fill&&i.fill.fragmentShader||Mg,r.Hf=Ag(s),r.Jf=i.stroke&&i.stroke.vertexShader||Sg,r.Qf=i.stroke&&i.stroke.fragmentShader||Og,r.tc=Ag(u),r.ic=i.point&&i.point.vertexShader||jg,r.rc=i.point&&i.point.fragmentShader||Eg,r.ec=Ag(a),r.kf=eg(),r.oc=new vg;var h=r.getLayer().getSource();return r.oc.addFeatures(h.getFeatures()),r.zf=[$(h,Ep,r.Lf,r),$(h,Tp,r.Rf,r),$(h,Ap,r.Ff,r),$(h,Pp,r.Gf,r)],r}return Tg(n,t),n.prototype.afterHelperCreated=function(){this.sc=new gg(this.helper,this.kf,this.$f,this.Kf,this.Hf),this.uc=new yg(this.helper,this.kf,this.ic,this.rc,this.ec),this.ac=new cg(this.helper,this.kf,this.Jf,this.Qf,this.tc)},n.prototype.Lf=function(t){var n=t.feature;this.oc.addFeature(n)},n.prototype.Rf=function(t){var n=t.feature;this.oc.changeFeature(n)},n.prototype.Ff=function(t){var n=t.feature;this.oc.removeFeature(n)},n.prototype.Gf=function(){this.oc.clear()},n.prototype.renderFrame=function(t){var n=this.helper.getGL();this.preRender(n,t);var i=this.getLayer().getSource(),r=t.viewState.projection,e=i.getWrapX()&&r.canWrapX(),o=r.getExtent(),s=t.extent,u=e?$n(o):null,a=e?Math.ceil((s[2]-o[2])/u)+1:1,h=e?Math.floor((s[0]-o[0])/u):0;do{this.sc.render(this.oc.polygonBatch,this.Of,t,h*u),this.ac.render(this.oc.lineStringBatch,this.Of,t,h*u),this.uc.render(this.oc.pointBatch,this.Of,t,h*u)}while(++h<a);this.helper.finalizeDraw(t);var f=this.helper.getCanvas(),c=t.layerStatesArray[t.layerIndex].opacity;return c!==parseFloat(f.style.opacity)&&(f.style.opacity=String(c)),this.postRender(n,t),f},n.prototype.prepareFrameInternal=function(t){var n=this,i=this.getLayer(),r=i.getSource(),e=t.viewState,o=!t.viewHints[zu]&&!t.viewHints[Lu],s=!Pn(this.$i,t.extent),u=this.mf<r.getRevision();if(u&&(this.mf=r.getRevision()),o&&(s||u)){var a=e.projection,h=e.resolution,f=i instanceof Vw?i.getRenderBuffer():0,c=mn(t.extent,f*h);r.loadFeatures(c,h,a),this.ready=!1;var l=3,v=function(){l--,n.ready=l<=0,n.getLayer().changed()};this.sc.rebuild(this.oc.polygonBatch,t,"Polygon",v),this.ac.rebuild(this.oc.lineStringBatch,t,"LineString",v),this.uc.rebuild(this.oc.pointBatch,t,"Point",v),this.$i=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.Of),this.helper.prepareDraw(t),!0},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){},n.prototype.disposeInternal=function(){this.kf.terminate(),this.Ds=null,this.zf.forEach((function(t){H(t)})),this.zf=null,t.prototype.disposeInternal.call(this)},n}(Tl),kg={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ig=[kg.FILL],Ng=[kg.STROKE],zg=[kg.BEGIN_PATH],Lg=[kg.CLOSE_PATH],Rg=kg,Fg=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gg=function(t){function n(n,i,r,e){var o=t.call(this)||this;return o.tolerance=n,o.maxExtent=i,o.pixelRatio=e,o.maxLineWidth=0,o.resolution=r,o.hc=null,o.fc=null,o.cc=null,o.instructions=[],o.coordinates=[],o.lc=[],o.hitDetectionInstructions=[],o.state={},o}return Fg(n,t),n.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map((function(t){return t*n}))},n.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),r=this.lc,e=this.coordinates,o=e.length,s=0,u=t.length;s<u;s+=n)r[0]=t[s],r[1]=t[s+1],bn(i,r)&&(e[o++]=r[0],e[o++]=r[1]);return o},n.prototype.appendFlatLineCoordinates=function(t,n,i,r,e,o){var s=this.coordinates,u=s.length,a=this.getBufferedMaxExtent();o&&(n+=r);var h,f,c,l=t[n],v=t[n+1],p=this.lc,d=!0;for(h=n+r;h<i;h+=r)p[0]=t[h],p[1]=t[h+1],(c=Mn(a,p))!==f?(d&&(s[u++]=l,s[u++]=v,d=!1),s[u++]=p[0],s[u++]=p[1]):c===cn?(s[u++]=p[0],s[u++]=p[1],d=!1):d=!0,l=p[0],v=p[1],f=c;return(e&&d||h===n+r)&&(s[u++]=l,s[u++]=v),u},n.prototype.vc=function(t,n,i,r,e){for(var o=0,s=i.length;o<s;++o){var u=i[o],a=this.appendFlatLineCoordinates(t,n,u,r,!1,!1);e.push(a),n=u}return n},n.prototype.drawCustom=function(t,n,i,r){this.beginGeometry(t,n);var e,o,s,u,a,h=t.getType(),f=t.getStride(),c=this.coordinates.length;switch(h){case"MultiPolygon":e=t.getOrientedFlatCoordinates(),u=[];var l=t.getEndss();a=0;for(var v=0,p=l.length;v<p;++v){var d=[];a=this.vc(e,a,l[v],f,d),u.push(d)}this.instructions.push([Rg.CUSTOM,c,u,t,i,ge]),this.hitDetectionInstructions.push([Rg.CUSTOM,c,u,t,r||i,ge]);break;case"Polygon":case"MultiLineString":s=[],e="Polygon"==h?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.vc(e,0,t.getEnds(),f,s),this.instructions.push([Rg.CUSTOM,c,s,t,i,we]),this.hitDetectionInstructions.push([Rg.CUSTOM,c,s,t,r||i,we]);break;case"LineString":case"Circle":e=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(e,0,e.length,f,!1,!1),this.instructions.push([Rg.CUSTOM,c,o,t,i,me]),this.hitDetectionInstructions.push([Rg.CUSTOM,c,o,t,r||i,me]);break;case"MultiPoint":e=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(e,f))>c&&(this.instructions.push([Rg.CUSTOM,c,o,t,i,me]),this.hitDetectionInstructions.push([Rg.CUSTOM,c,o,t,r||i,me]));break;case"Point":e=t.getFlatCoordinates(),this.coordinates.push(e[0],e[1]),o=this.coordinates.length,this.instructions.push([Rg.CUSTOM,c,o,t,i]),this.hitDetectionInstructions.push([Rg.CUSTOM,c,o,t,r||i])}this.endGeometry(n)},n.prototype.beginGeometry=function(t,n){this.hc=[Rg.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.hc),this.fc=[Rg.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.fc)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t,n=this.hitDetectionInstructions;n.reverse();var i,r,e=n.length,o=-1;for(t=0;t<e;++t)(r=(i=n[t])[0])==Rg.END_GEOMETRY?o=t:r==Rg.BEGIN_GEOMETRY&&(i[2]=t,w(this.hitDetectionInstructions,o,t),o=-1)},n.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var r=t.getColor();i.fillStyle=af(r||Rs)}else i.fillStyle=void 0;if(n){var e=n.getColor();i.strokeStyle=af(e||qs);var o=n.getLineCap();i.lineCap=void 0!==o?o:Fs;var s=n.getLineDash();i.lineDash=s?s.slice():Gs;var u=n.getLineDashOffset();i.lineDashOffset=u||0;var a=n.getLineJoin();i.lineJoin=void 0!==a?a:Ds;var h=n.getWidth();i.lineWidth=void 0!==h?h:1;var f=n.getMiterLimit();i.miterLimit=void 0!==f?f:Us,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.cc=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},n.prototype.createFill=function(t){var n=t.fillStyle,i=[Rg.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[Rg.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},n.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,r=t.lineCap,e=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,u=t.lineWidth,a=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||e!=t.currentLineDash&&!x(t.currentLineDash,e)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=u||t.currentMiterLimit!=a)&&(void 0!==i&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=e,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=u,t.currentMiterLimit=a)},n.prototype.endGeometry=function(t){this.hc[2]=this.instructions.length,this.hc=null,this.fc[2]=this.hitDetectionInstructions.length,this.fc=null;var n=[Rg.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},n.prototype.getBufferedMaxExtent=function(){if(!this.cc&&(this.cc=wn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;mn(this.cc,t,this.cc)}return this.cc},n}(bf),Dg=Gg,Ug=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qg=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.Mu=null,o.zt=null,o.dc=void 0,o.yc=void 0,o.mc=void 0,o.wc=void 0,o.ou=void 0,o.gc=void 0,o.bc=void 0,o.su=void 0,o.Dr=void 0,o.uu=void 0,o.qu=void 0,o.fu=void 0,o.xc=void 0,o}return Ug(n,t),n.prototype.drawPoint=function(t,n){if(this.zt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Rg.DRAW_IMAGE,e,o,this.zt,this.yc*this.dc,this.mc*this.dc,Math.ceil(this.wc*this.dc),this.ou,this.gc*this.dc,this.bc*this.dc,this.su,this.Dr,[this.uu[0]*this.pixelRatio/this.dc,this.uu[1]*this.pixelRatio/this.dc],Math.ceil(this.qu*this.dc),this.fu,this.xc]),this.hitDetectionInstructions.push([Rg.DRAW_IMAGE,e,o,this.Mu,this.yc,this.mc,this.wc,this.ou,this.gc,this.bc,this.su,this.Dr,this.uu,this.qu,this.fu,this.xc]),this.endGeometry(n)}},n.prototype.drawMultiPoint=function(t,n){if(this.zt){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),r=t.getStride(),e=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Rg.DRAW_IMAGE,e,o,this.zt,this.yc*this.dc,this.mc*this.dc,Math.ceil(this.wc*this.dc),this.ou,this.gc*this.dc,this.bc*this.dc,this.su,this.Dr,[this.uu[0]*this.pixelRatio/this.dc,this.uu[1]*this.pixelRatio/this.dc],Math.ceil(this.qu*this.dc),this.fu,this.xc]),this.hitDetectionInstructions.push([Rg.DRAW_IMAGE,e,o,this.Mu,this.yc,this.mc,this.wc,this.ou,this.gc,this.bc,this.su,this.Dr,this.uu,this.qu,this.fu,this.xc]),this.endGeometry(n)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.yc=void 0,this.mc=void 0,this.Mu=null,this.zt=null,this.dc=void 0,this.wc=void 0,this.uu=void 0,this.ou=void 0,this.gc=void 0,this.bc=void 0,this.su=void 0,this.Dr=void 0,this.qu=void 0,t.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),r=t.getSize(),e=t.getOrigin();this.dc=t.getPixelRatio(this.pixelRatio),this.yc=i[0],this.mc=i[1],this.Mu=t.getHitDetectionImage(),this.zt=t.getImage(this.pixelRatio),this.wc=r[1],this.ou=t.getOpacity(),this.gc=e[0],this.bc=e[1],this.su=t.getRotateWithView(),this.Dr=t.getRotation(),this.uu=t.getScaleArray(),this.qu=r[0],this.fu=t.getDeclutterMode(),this.xc=n},n}(Dg),Bg=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xg=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this}return Bg(n,t),n.prototype._c=function(t,n,i,r){var e=this.coordinates.length,o=this.appendFlatLineCoordinates(t,n,i,r,!1,!1),s=[Rg.MOVE_TO_LINE_TO,e,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},n.prototype.drawLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Rg.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Gs,0],zg);var o=t.getFlatCoordinates(),s=t.getStride();this._c(o,0,o.length,s),this.hitDetectionInstructions.push(Ng),this.endGeometry(n)}},n.prototype.drawMultiLineString=function(t,n){var i=this.state,r=i.strokeStyle,e=i.lineWidth;if(void 0!==r&&void 0!==e){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Rg.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],zg);for(var o=t.getEnds(),s=t.getFlatCoordinates(),u=t.getStride(),a=0,h=0,f=o.length;h<f;++h)a=this._c(s,a,o[h],u);this.hitDetectionInstructions.push(Ng),this.endGeometry(n)}},n.prototype.finish=function(){var n=this.state;return null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&this.instructions.push(Ng),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},n.prototype.applyStroke=function(n){null!=n.lastStroke&&n.lastStroke!=this.coordinates.length&&(this.instructions.push(Ng),n.lastStroke=this.coordinates.length),n.lastStroke=0,t.prototype.applyStroke.call(this,n),this.instructions.push(zg)},n}(Dg),Yg=Xg,Zg=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vg=function(t){function n(n,i,r,e){return t.call(this,n,i,r,e)||this}return Zg(n,t),n.prototype.Mc=function(t,n,i,r){var e=this.state,o=void 0!==e.fillStyle,s=void 0!==e.strokeStyle,u=i.length;this.instructions.push(zg),this.hitDetectionInstructions.push(zg);for(var a=0;a<u;++a){var h=i[a],f=this.coordinates.length,c=this.appendFlatLineCoordinates(t,n,h,r,!0,!s),l=[Rg.MOVE_TO_LINE_TO,f,c];this.instructions.push(l),this.hitDetectionInstructions.push(l),s&&(this.instructions.push(Lg),this.hitDetectionInstructions.push(Lg)),n=h}return o&&(this.instructions.push(Ig),this.hitDetectionInstructions.push(Ig)),s&&(this.instructions.push(Ng),this.hitDetectionInstructions.push(Ng)),n},n.prototype.drawCircle=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.Sc(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Rg.SET_FILL_STYLE,Rs]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Rg.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);var a=[Rg.CIRCLE,u];this.instructions.push(zg,a),this.hitDetectionInstructions.push(zg,a),void 0!==i.fillStyle&&(this.instructions.push(Ig),this.hitDetectionInstructions.push(Ig)),void 0!==i.strokeStyle&&(this.instructions.push(Ng),this.hitDetectionInstructions.push(Ng)),this.endGeometry(n)}},n.prototype.drawPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.Sc(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Rg.SET_FILL_STYLE,Rs]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Rg.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),u=t.getStride();this.Mc(s,0,o,u),this.endGeometry(n)}},n.prototype.drawMultiPolygon=function(t,n){var i=this.state,r=i.fillStyle,e=i.strokeStyle;if(void 0!==r||void 0!==e){this.Sc(),this.beginGeometry(t,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Rg.SET_FILL_STYLE,Rs]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Rg.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),u=t.getStride(),a=0,h=0,f=o.length;h<f;++h)a=this.Mc(s,a,o[h],u);this.endGeometry(n)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var n=this.tolerance;if(0!==n)for(var i=this.coordinates,r=0,e=i.length;r<e;++r)i[r]=ve(i[r],n);return t.prototype.finish.call(this)},n.prototype.Sc=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(Dg),Wg=Vg;function $g(t,n,i,r,e){var o,s,u,a,h,f,c,l,v,p=i,d=i,y=0,m=0,w=i;for(o=i;o<r;o+=e){var g=n[o],b=n[o+1];void 0!==a&&(l=g-a,v=b-h,u=Math.sqrt(l*l+v*v),void 0!==f&&(m+=s,Math.acos((f*l+c*v)/(s*u))>t&&(m>y&&(y=m,p=w,d=o),m=0,w=o-e)),s=u,f=l,c=v),a=g,h=b}return(m+=u)>y?[w,o]:[p,d]}var Kg=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hg={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Jg=function(t){function n(n,i,r,e){var o=t.call(this,n,i,r,e)||this;return o.Oc=null,o.eo="",o.oo=0,o.so=0,o.uo=void 0,o.ao=0,o.fo=null,o.fillStates={},o.co=null,o.strokeStates={},o.lo={},o.textStates={},o.jc="",o.Ec="",o.Tc="",o.xc=void 0,o}return Kg(n,t),n.prototype.finish=function(){var n=t.prototype.finish.call(this);return n.textStates=this.textStates,n.fillStates=this.fillStates,n.strokeStates=this.strokeStates,n},n.prototype.drawText=function(t,n){var i=this.fo,r=this.co,e=this.lo;if(""!==this.eo&&e&&(i||r)){var o=this.coordinates,s=o.length,u=t.getType(),a=null,h=t.getStride();if("line"!==e.placement||"LineString"!=u&&"MultiLineString"!=u&&"Polygon"!=u&&"MultiPolygon"!=u){var f=e.overflow?null:[];switch(u){case"Point":case"MultiPoint":a=t.getFlatCoordinates();break;case"LineString":a=t.getFlatMidpoint();break;case"Circle":a=t.getCenter();break;case"MultiLineString":a=t.getFlatMidpoints(),h=2;break;case"Polygon":a=t.getFlatInteriorPoint(),e.overflow||f.push(a[2]/this.resolution),h=3;break;case"MultiPolygon":var c=t.getFlatInteriorPoints();a=[];for(_=0,M=c.length;_<M;_+=3)e.overflow||f.push(c[_+2]/this.resolution),a.push(c[_],c[_+1]);if(0===a.length)return;h=2}if((A=this.appendFlatPointCoordinates(a,h))===s)return;if(f&&(A-s)/2!=a.length/h){var l=s/2;f=f.filter((function(t,n){var i=o[2*(l+n)]===a[n*h]&&o[2*(l+n)+1]===a[n*h+1];return i||--l,i}))}this.Pc(),(e.backgroundFill||e.backgroundStroke)&&(this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke),e.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),e.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var v=e.padding;if(v!=Ys&&(e.scale[0]<0||e.scale[1]<0)){var p=e.padding[0],d=e.padding[1],y=e.padding[2],m=e.padding[3];e.scale[0]<0&&(d=-d,m=-m),e.scale[1]<0&&(p=-p,y=-y),v=[p,d,y,m]}var w=this.pixelRatio;this.instructions.push([Rg.DRAW_IMAGE,s,A,null,NaN,NaN,NaN,1,0,0,this.uo,this.ao,[1,1],NaN,void 0,this.xc,v==Ys?Ys:v.map((function(t){return t*w})),!!e.backgroundFill,!!e.backgroundStroke,this.eo,this.jc,this.Tc,this.Ec,this.oo,this.so,f]);var g=1/w;this.hitDetectionInstructions.push([Rg.DRAW_IMAGE,s,A,null,NaN,NaN,NaN,1,0,0,this.uo,this.ao,[g,g],NaN,void 0,this.xc,v,!!e.backgroundFill,!!e.backgroundStroke,this.eo,this.jc,this.Tc,this.Ec,this.oo,this.so,f]),this.endGeometry(n)}else{if(!Kn(this.getBufferedMaxExtent(),t.getExtent()))return;var b=void 0;if(a=t.getFlatCoordinates(),"LineString"==u)b=[a.length];else if("MultiLineString"==u)b=t.getEnds();else if("Polygon"==u)b=t.getEnds().slice(0,1);else if("MultiPolygon"==u){var x=t.getEndss();b=[];for(var _=0,M=x.length;_<M;++_)b.push(x[_][0])}this.beginGeometry(t,n);for(var S=e.textAlign,O=0,j=void 0,E=0,T=b.length;E<T;++E){if(null==S){var P=$g(e.maxAngle,a,O,b[E],h);O=P[0],j=P[1]}else j=b[E];for(var _=O;_<j;_+=h)o.push(a[_],a[_+1]);var A=o.length;O=b[E],this.Ac(s,A),s=A}this.endGeometry(n)}}},n.prototype.Pc=function(){var t=this.co,n=this.lo,i=this.fo,r=this.Tc;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var e=this.jc;e in this.textStates||(this.textStates[e]={font:n.font,textAlign:n.textAlign||Bs,justify:n.justify,textBaseline:n.textBaseline||Xs,scale:n.scale});var o=this.Ec;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},n.prototype.Ac=function(t,n){var i=this.co,r=this.lo,e=this.Tc,o=this.jc,s=this.Ec;this.Pc();var u=this.pixelRatio,a=Hg[r.textBaseline],h=this.so*u,f=this.eo,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Rg.DRAW_CHARS,t,n,a,r.overflow,s,r.maxAngle,u,h,e,c*u,f,o,1]),this.hitDetectionInstructions.push([Rg.DRAW_CHARS,t,n,a,r.overflow,s,r.maxAngle,1,h,e,c,f,o,1/u])},n.prototype.setTextStyle=function(t,n){var i,r,e;if(t){var s=t.getFill();s?((r=this.fo)||(r={},this.fo=r),r.fillStyle=af(s.getColor()||Rs)):(r=null,this.fo=r);var u=t.getStroke();if(u){(e=this.co)||(e={},this.co=e);var a=u.getLineDash(),h=u.getLineDashOffset(),f=u.getWidth(),c=u.getMiterLimit();e.lineCap=u.getLineCap()||Fs,e.lineDash=a?a.slice():Gs,e.lineDashOffset=void 0===h?0:h,e.lineJoin=u.getLineJoin()||Ds,e.lineWidth=void 0===f?1:f,e.miterLimit=void 0===c?Us:c,e.strokeStyle=af(u.getColor()||qs)}else e=null,this.co=e;i=this.lo;var l=t.getFont()||Ls;$s(l);var v=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Xs,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Ys,i.scale=void 0===v?[1,1]:v;var p=t.getOffsetX(),d=t.getOffsetY(),y=t.getRotateWithView(),m=t.getRotation();this.eo=t.getText()||"",this.oo=void 0===p?0:p,this.so=void 0===d?0:d,this.uo=void 0!==y&&y,this.ao=void 0===m?0:m,this.Tc=e?("string"==typeof e.strokeStyle?e.strokeStyle:o(e.strokeStyle))+e.lineCap+e.lineDashOffset+"|"+e.lineWidth+e.lineJoin+e.miterLimit+"["+e.lineDash.join()+"]":"",this.jc=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.Ec=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+o(r.fillStyle):""}else this.eo="";this.xc=n},n}(Dg),Qg=Jg,tb={Circle:Wg,Default:Dg,Image:qg,LineString:Yg,Polygon:Wg,Text:Qg},nb=function(){function t(t,n,i,r){this.Cc=t,this.kc=n,this.kt=r,this.Ic=i,this.Nc={}}return t.prototype.finish=function(){var t={};for(var n in this.Nc){t[n]=t[n]||{};var i=this.Nc[n];for(var r in i){var e=i[r].finish();t[n][r]=e}}return t},t.prototype.getBuilder=function(t,n){var i=void 0!==t?t.toString():"0",r=this.Nc[i];void 0===r&&(r={},this.Nc[i]=r);var e=r[n];void 0===e&&(e=new(0,tb[n])(this.Cc,this.kc,this.Ic,this.kt),r[n]=e);return e},t}();function ib(t,n,i,r,e,o,s,u,a,h,f,c){var l=t[n],v=t[n+1],p=0,d=0,y=0,m=0;function w(){p=l,d=v,l=t[n+=r],v=t[n+1],m+=y,y=Math.sqrt((l-p)*(l-p)+(v-d)*(v-d))}do{w()}while(n<i-r&&m+y<o);for(var g=0===y?0:(o-m)/y,b=pi(p,l,g),x=pi(d,v,g),_=n-r,M=m,S=o+u*a(h,e,f);n<i-r&&m+y<S;)w();var O,j=pi(p,l,g=0===y?0:(S-m)/y),E=pi(d,v,g);if(c){var T=[b,x,j,E];Ur(T,0,4,2,c,T,T),O=T[0]>T[2]}else O=b>j;var P,A=Math.PI,C=[],k=_+r===n;if(y=0,m=M,l=t[n=_],v=t[n+1],k){w(),P=Math.atan2(v-d,l-p),O&&(P+=P>0?-A:A);var I=(j+b)/2,N=(E+x)/2;return C[0]=[I,N,(S-o)/2,P,e],C}for(var z=0,L=(e=e.replace(/\n/g," ")).length;z<L;){w();var R=Math.atan2(v-d,l-p);if(O&&(R+=R>0?-A:A),void 0!==P){var F=R-P;if(F+=F>A?-2*A:F<-A?2*A:0,Math.abs(F)>s)return null}P=R;for(var G=z,D=0;z<L;++z){var U=u*a(h,e[O?L-z-1:z],f);if(n+r<i&&m+y<o+D+U/2)break;D+=U}if(z!==G){var q=O?e.substring(L-G,L-z):e.substring(G,z);I=pi(p,l,g=0===y?0:(o+D/2-m)/y),N=pi(d,v,g);C.push([I,N,D/2,R,q]),o+=D}}return C}function rb(t,n,i,r){for(var e=t[n],o=t[n+1],s=0,u=n+r;u<i;u+=r){var a=t[u],h=t[u+1];s+=Math.sqrt((a-e)*(a-e)+(h-o)*(h-o)),e=a,o=h}return s}var eb=[1/0,1/0,-1/0,-1/0],ob=[],sb=[],ub=[],ab=[];function hb(t){return t[3].declutterBox}var fb=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function cb(t,n){return"start"!==n&&"end"!==n||fb.test(t)||(n="start"===n?"left":"right"),Hg[n]}function lb(t,n,i){return i>0&&t.push("\n",""),t.push(n,""),t}var vb=function(){function t(t,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=t,this.zc,this.instructions=r.instructions,this.coordinates=r.coordinates,this.Lc={},this.Rc=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.vo=null,this.Ge=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.Fc={},this.Oc={}}return t.prototype.createLabel=function(t,n,i,r){var e=t+n+i+r;if(this.Oc[e])return this.Oc[e];var o=r?this.strokeStates[r]:null,s=i?this.fillStates[i]:null,u=this.textStates[n],a=this.pixelRatio,h=[u.scale[0]*a,u.scale[1]*a],f=Array.isArray(t),c=u.justify?Hg[u.justify]:cb(Array.isArray(t)?t[0]:t,u.textAlign||Bs),l=r&&o.lineWidth?o.lineWidth:0,v=f?t:t.split("\n").reduce(lb,[]),p=tu(u,v),d=p.width,y=p.height,m=p.widths,w=p.heights,g=p.lineWidths,b=d+l,x=[],_=(b+2)*h[0],M=(y+l)*h[1],S={width:_<0?Math.floor(_):Math.ceil(_),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:x};(1==h[0]&&1==h[1]||x.push("scale",h),r)&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",l),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),(Yt?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)));i&&x.push("fillStyle",s.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");for(var O,j=.5-c,E=c*b+j*l,T=[],P=[],A=0,C=0,k=0,I=0,N=0,z=v.length;N<z;N+=2){var L=v[N];if("\n"!==L){var R=v[N+1]||u.font;R!==O&&(r&&T.push("font",R),i&&P.push("font",R),O=R),A=Math.max(A,w[k]);var F=[L,E+j*m[k]+c*(m[k]-g[I]),.5*(l+A)+C];E+=m[k],r&&T.push("strokeText",F),i&&P.push("fillText",F),++k}else C+=A,A=0,E=c*b+j*l,++I}return Array.prototype.push.apply(x,T),Array.prototype.push.apply(x,P),this.Oc[e]=S,S},t.prototype.Gc=function(t,n,i,r,e,o,s){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),t.lineTo.apply(t,n),o&&(this.zc=o[2],this.lu(t)),s&&(this.Dc(t,s),t.stroke())},t.prototype.Uc=function(t,n,i,r,e,o,s,u,a,h,f,c,l,v,p,d){var y,m=i-(s*=c[0]),w=r-(u*=c[1]),g=e+a>t?t-a:e,b=o+h>n?n-h:o,x=v[3]+g*c[0]+v[1],_=v[0]+b*c[1]+v[2],M=m-v[3],S=w-v[0];return(p||0!==f)&&(ob[0]=M,ab[0]=M,ob[1]=S,sb[1]=S,sb[0]=M+x,ub[0]=sb[0],ub[1]=S+_,ab[1]=ub[1]),0!==f?(tn(y=sn([1,0,0,1,0,0],i,r,1,1,f,-i,-r),ob),tn(y,sb),tn(y,ub),tn(y,ab),On(Math.min(ob[0],sb[0],ub[0],ab[0]),Math.min(ob[1],sb[1],ub[1],ab[1]),Math.max(ob[0],sb[0],ub[0],ab[0]),Math.max(ob[1],sb[1],ub[1],ab[1]),eb)):On(Math.min(M,M+x),Math.min(S,S+_),Math.max(M,M+x),Math.max(S,S+_),eb),l&&(m=Math.round(m),w=Math.round(w)),{drawImageX:m,drawImageY:w,drawImageW:g,drawImageH:b,originX:a,originY:h,declutterBox:{minX:eb[0],minY:eb[1],maxX:eb[2],maxY:eb[3],value:d},canvasTransform:y,scale:c}},t.prototype.qc=function(t,n,i,r,e,o,s){var u=!(!o&&!s),a=r.declutterBox,h=t.canvas,f=s?s[2]*r.scale[0]/2:0;return a.minX-f<=h.width/n&&a.maxX+f>=0&&a.minY-f<=h.height/n&&a.maxY+f>=0&&(u&&this.Gc(t,ob,sb,ub,ab,o,s),nu(t,r.canvasTransform,e,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.lu=function(t){if(this.zc){var n=tn(this.Rc,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),t.rotate(this.Ge)}t.fill(),this.zc&&t.restore()},t.prototype.Dc=function(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.setLineDash&&(t.lineDashOffset=n[7],t.setLineDash(n[6]))},t.prototype.Bc=function(t,n,i,r){var e=this.textStates[n],o=this.createLabel(t,n,r,i),s=this.strokeStates[i],u=this.pixelRatio,a=cb(Array.isArray(t)?t[0]:t,e.textAlign||Bs),h=Hg[e.textBaseline||Xs],f=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:a*(o.width/u-2*e.scale[0])+2*(.5-a)*f,anchorY:h*o.height/u+2*(.5-h)*f}},t.prototype.Xc=function(t,n,i,r,e,o,s,u){var a;this.vo&&x(i,this.Rc)?a=this.vo:(this.vo||(this.vo=[]),a=Dr(this.coordinates,0,this.coordinates.length,2,i,this.vo),Qt(this.Rc,i));for(var h,f,c,l,v,p,d,y,m,w,g,b,_,M,S,O,j=0,E=r.length,T=0,P=0,A=0,C=null,k=null,I=this.Lc,N=this.Ge,z=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,L={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},R=this.instructions!=r||this.overlaps?0:200;j<E;){var F=r[j];switch(F[0]){case Rg.BEGIN_GEOMETRY:_=F[1],O=F[3],_.getGeometry()?void 0===s||Kn(s,O.getExtent())?++j:j=F[2]+1:j=F[2];break;case Rg.BEGIN_PATH:P>R&&(this.lu(t),P=0),A>R&&(t.stroke(),A=0),P||A||(t.beginPath(),l=NaN,v=NaN),++j;break;case Rg.CIRCLE:var G=a[T=F[1]],D=a[T+1],U=a[T+2]-G,q=a[T+3]-D,B=Math.sqrt(U*U+q*q);t.moveTo(G+B,D),t.arc(G,D,B,0,2*Math.PI,!0),++j;break;case Rg.CLOSE_PATH:t.closePath(),++j;break;case Rg.CUSTOM:T=F[1],h=F[2];var X=F[3],Y=F[4],Z=6==F.length?F[5]:void 0;L.geometry=X,L.feature=_,j in I||(I[j]=[]);var V=I[j];Z?Z(a,T,h,2,V):(V[0]=a[T],V[1]=a[T+1],V.length=2),Y(V,L),++j;break;case Rg.DRAW_IMAGE:T=F[1],h=F[2],y=F[3],f=F[4],c=F[5];var W=F[6],$=F[7],K=F[8],H=F[9],J=F[10],Q=F[11],tt=F[12],nt=F[13],it=F[14],rt=F[15];if(!y&&F.length>=20){m=F[19],w=F[20],g=F[21],b=F[22];var et=this.Bc(m,w,g,b);y=et.label,F[3]=y;var ot=F[23];f=(et.anchorX-ot)*this.pixelRatio,F[4]=f;var st=F[24];c=(et.anchorY-st)*this.pixelRatio,F[5]=c,W=y.height,F[6]=W,nt=y.width,F[13]=nt}var ut=void 0;F.length>25&&(ut=F[25]);var at=void 0,ht=void 0,ft=void 0;F.length>17?(at=F[16],ht=F[17],ft=F[18]):(at=Ys,ht=!1,ft=!1),J&&z?Q+=N:J||z||(Q-=N);for(var ct=0;T<h;T+=2)if(!(ut&&ut[ct++]<nt/this.pixelRatio)){var lt=[t,n,y,Gt=this.Uc(y.width,y.height,a[T],a[T+1],nt,W,f,c,K,H,Q,tt,e,at,ht||ft,_),$,ht?C:null,ft?k:null];if(u){if("none"===it)continue;if("obstacle"===it){u.insert(Gt.declutterBox);continue}var vt=void 0,pt=void 0;if(rt){var dt=h-T;if(!rt[dt]){rt[dt]=lt;continue}if(vt=rt[dt],delete rt[dt],pt=hb(vt),u.collides(pt))continue}if(u.collides(Gt.declutterBox))continue;vt&&(u.insert(pt),this.qc.apply(this,vt)),u.insert(Gt.declutterBox)}this.qc.apply(this,lt)}++j;break;case Rg.DRAW_CHARS:var yt=F[1],mt=F[2],wt=F[3],gt=F[4];b=F[5];var bt=F[6],xt=F[7],_t=F[8];g=F[9];var Mt=F[10];m=F[11],w=F[12];var St=[F[13],F[13]],Ot=this.textStates[w],jt=Ot.font,Et=[Ot.scale[0]*xt,Ot.scale[1]*xt],Tt=void 0;jt in this.Fc?Tt=this.Fc[jt]:(Tt={},this.Fc[jt]=Tt);var Pt=rb(a,yt,mt,2),At=Math.abs(Et[0])*Qs(jt,m,Tt);if(gt||At<=Pt){var Ct=this.textStates[w].textAlign,kt=ib(a,yt,mt,2,m,(Pt-At)*Hg[Ct],bt,Math.abs(Et[0]),Qs,jt,Tt,z?0:this.Ge);t:if(kt){var It=[],Nt=void 0,zt=void 0,Lt=void 0,Rt=void 0,Ft=void 0;if(g)for(Nt=0,zt=kt.length;Nt<zt;++Nt){Lt=(Ft=kt[Nt])[4],Rt=this.createLabel(Lt,w,"",g),f=Ft[2]+(Et[0]<0?-Mt:Mt),c=wt*Rt.height+2*(.5-wt)*Mt*Et[1]/Et[0]-_t;var Gt=this.Uc(Rt.width,Rt.height,Ft[0],Ft[1],Rt.width,Rt.height,f,c,0,0,Ft[3],St,!1,Ys,!1,_);if(u&&u.collides(Gt.declutterBox))break t;It.push([t,n,Rt,Gt,1,null,null])}if(b)for(Nt=0,zt=kt.length;Nt<zt;++Nt){Lt=(Ft=kt[Nt])[4],Rt=this.createLabel(Lt,w,b,""),f=Ft[2],c=wt*Rt.height-_t;Gt=this.Uc(Rt.width,Rt.height,Ft[0],Ft[1],Rt.width,Rt.height,f,c,0,0,Ft[3],St,!1,Ys,!1,_);if(u&&u.collides(Gt.declutterBox))break t;It.push([t,n,Rt,Gt,1,null,null])}u&&u.load(It.map(hb));for(var Dt=0,Ut=It.length;Dt<Ut;++Dt)this.qc.apply(this,It[Dt])}}++j;break;case Rg.END_GEOMETRY:if(void 0!==o){var qt=o(_=F[1],O);if(qt)return qt}++j;break;case Rg.FILL:R?P++:this.lu(t),++j;break;case Rg.MOVE_TO_LINE_TO:for(T=F[1],h=F[2],M=a[T],d=(S=a[T+1])+.5|0,(p=M+.5|0)===l&&d===v||(t.moveTo(M,S),l=p,v=d),T+=2;T<h;T+=2)p=(M=a[T])+.5|0,d=(S=a[T+1])+.5|0,T!=h-2&&p===l&&d===v||(t.lineTo(M,S),l=p,v=d);++j;break;case Rg.SET_FILL_STYLE:C=F,this.zc=F[2],P&&(this.lu(t),P=0,A&&(t.stroke(),A=0)),t.fillStyle=F[1],++j;break;case Rg.SET_STROKE_STYLE:k=F,A&&(t.stroke(),A=0),this.Dc(t,F),++j;break;case Rg.STROKE:R?A++:t.stroke(),++j;break;default:++j}}P&&this.lu(t),A&&t.stroke()},t.prototype.execute=function(t,n,i,r,e,o){this.Ge=r,this.Xc(t,n,i,this.instructions,e,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,n,i,r,e){return this.Ge=i,this.Xc(t,1,n,this.hitDetectionInstructions,!0,r,e)},t}(),pb=vb,db=["Polygon","Circle","LineString","Image","Text","Default"],yb=function(){function t(t,n,i,r,e,o){this.kc=t,this.La=r,this.kt=i,this.Ic=n,this.pf=o,this.Yc={},this.Zc=null,this.Vc=[1,0,0,1,0,0],this.Wc(e)}return t.prototype.clip=function(t,n){var i=this.getClipCoords(n);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.Wc=function(t){for(var n in t){var i=this.Yc[n];void 0===i&&(i={},this.Yc[n]=i);var r=t[n];for(var e in r){var o=r[e];i[e]=new pb(this.Ic,this.kt,this.La,o)}}},t.prototype.hasExecutors=function(t){for(var n in this.Yc)for(var i=this.Yc[n],r=0,e=t.length;r<e;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e,o){var s=2*(r=Math.round(r))+1,u=sn(this.Vc,r+.5,r+.5,1/n,-1/n,-i,-t[0],-t[1]),a=!this.Zc;a&&(this.Zc=To(s,s));var h,f=this.Zc;f.canvas.width!==s||f.canvas.height!==s?(f.canvas.width=s,f.canvas.height=s):a||f.clearRect(0,0,s,s),void 0!==this.pf&&(kn(h=[1/0,1/0,-1/0,-1/0],t),mn(h,n*(this.pf+r),h));var c,l=wb(r);function v(t,n){for(var i=f.getImageData(0,0,s,s).data,u=0,a=l.length;u<a;u++)if(i[l[u]]>0){if(!o||"Image"!==c&&"Text"!==c||-1!==o.indexOf(t)){var h=(l[u]-3)/4,v=r-h%s,p=r-(h/s|0),d=e(t,n,v*v+p*p);if(d)return d}f.clearRect(0,0,s,s);break}}var p,y,m,w,g,b=Object.keys(this.Yc).map(Number);for(b.sort(d),p=b.length-1;p>=0;--p){var x=b[p].toString();for(m=this.Yc[x],y=db.length-1;y>=0;--y)if(void 0!==(w=m[c=db[y]])&&(g=w.executeHitDetection(f,u,i,v,h)))return g}},t.prototype.getClipCoords=function(t){var n=this.kc;if(!n)return null;var i=n[0],r=n[1],e=n[2],o=n[3],s=[i,r,i,o,e,o,e,r];return Dr(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return k(this.Yc)},t.prototype.execute=function(t,n,i,r,e,o,s){var u=Object.keys(this.Yc).map(Number);u.sort(d),this.kc&&(t.save(),this.clip(t,i));var a,h,f,c,l,v,p=o||db;for(s&&u.reverse(),a=0,h=u.length;a<h;++a){var y=u[a].toString();for(l=this.Yc[y],f=0,c=p.length;f<c;++f){void 0!==(v=l[p[f]])&&v.execute(t,n,i,r,e,s)}}this.kc&&t.restore()},t}(),mb={};function wb(t){if(void 0!==mb[t])return mb[t];for(var n=2*t+1,i=t*t,r=new Array(i+1),e=0;e<=t;++e)for(var o=0;o<=t;++o){var s=e*e+o*o;if(s>i)break;var u=r[s];u||(u=[],r[s]=u),u.push(4*((t+e)*n+(t+o))+3),e>0&&u.push(4*((t-e)*n+(t+o))+3),o>0&&(u.push(4*((t+e)*n+(t-o))+3),e>0&&u.push(4*((t-e)*n+(t-o))+3))}for(var a=[],h=(e=0,r.length);e<h;++e)r[e]&&a.push.apply(a,r[e]);return mb[t]=a,a}var gb=yb,bb=.5;function xb(t,n,i,r,e,o,s){var u=To(t[0]*bb,t[1]*bb);u.imageSmoothingEnabled=!1;for(var a=u.canvas,h=new Mf(u,bb,e,null,s),f=i.length,c=Math.floor(16777215/f),l={},v=1;v<=f;++v){var p=i[v-1],y=p.getStyleFunction()||r;if(r){var m=y(p,o);if(m){Array.isArray(m)||(m=[m]);for(var w="#"+("000000"+(v*c).toString(16)).slice(-6),g=0,b=m.length;g<b;++g){var x=m[g],_=x.getGeometryFunction()(p);if(_&&Kn(e,_.getExtent())){var M=x.clone(),S=M.getFill();S&&S.setColor(w);var O=M.getStroke();O&&(O.setColor(w),O.setLineDash(null)),M.setText(void 0);var j=x.getImage();if(j&&0!==j.getOpacity()){var E=j.getImageSize();if(!E)continue;var T=To(E[0],E[1],void 0,{alpha:!1}),P=T.canvas;T.fillStyle=w,T.fillRect(0,0,P.width,P.height),M.setImage(new Gv({img:P,imgSize:E,anchor:j.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:j.getOrigin(),opacity:1,size:j.getSize(),scale:j.getScale(),rotation:j.getRotation(),rotateWithView:j.getRotateWithView()}))}var A=M.getZIndex()||0;(I=l[A])||(I={},l[A]=I,I.Polygon=[],I.Circle=[],I.LineString=[],I.Point=[]),I[_.getType().replace("Multi","")].push(_,M)}}}}}for(var C=Object.keys(l).map(Number).sort(d),k=(v=0,C.length);v<k;++v){var I=l[C[v]];for(var N in I){var z=I[N];for(g=0,b=z.length;g<b;g+=2){h.setStyle(z[g+1]);for(var L=0,R=n.length;L<R;++L)h.setTransform(n[L]),h.drawGeometry(z[g])}}}return u.getImageData(0,0,a.width,a.height)}function _b(t,n,i){var r=[];if(i){var e=Math.floor(Math.round(t[0])*bb),o=Math.floor(Math.round(t[1])*bb),s=4*(oi(e,0,i.width-1)+oi(o,0,i.height-1)*i.width),u=i.data[s],a=i.data[s+1],h=i.data[s+2]+256*(a+256*u),f=Math.floor(16777215/n.length);h&&h%f==0&&r.push(n[h/f-1])}return r}var Mb=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sb=function(t){function n(n){var i=t.call(this,n)||this;return i.$c=i.Kc.bind(i),i.Hc,i.Jc=null,i.Qc=null,i.Mh=-1,i.tl=NaN,i.Lh=[1/0,1/0,-1/0,-1/0],i.nl=[1/0,1/0,-1/0,-1/0],i.il,i.rl=null,i.el=null,i.sl=null,i.ul=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i.al=null,i.ou=1,i}return Mb(n,t),n.prototype.renderWorlds=function(t,n,i){var r=n.extent,e=n.viewState,o=e.center,s=e.resolution,u=e.projection,a=e.rotation,h=u.getExtent(),f=this.getLayer().getSource(),c=n.pixelRatio,l=n.viewHints,v=!(l[zu]||l[Lu]),p=this.al,d=Math.round(n.size[0]*c),y=Math.round(n.size[1]*c),m=f.getWrapX()&&u.canWrapX(),w=m?$n(h):null,g=m?Math.ceil((r[2]-h[2])/w)+1:1,b=m?Math.floor((r[0]-h[0])/w):0;do{var x=this.getRenderTransform(o,s,a,c,d,y,b*w);t.execute(p,1,x,a,v,void 0,i)}while(++b<g)},n.prototype.hl=function(){if(1!==this.ou){var t=To(this.context.canvas.width,this.context.canvas.height,Gm);this.al=t}else this.al=this.context},n.prototype.fl=function(){if(1!==this.ou){var t=this.context.globalAlpha;this.context.globalAlpha=this.ou,this.context.drawImage(this.al.canvas,0,0),this.context.globalAlpha=t,Po(this.al),Gm.push(this.al.canvas),this.al=null}},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.hl(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.fl())},n.prototype.renderFrame=function(t,n){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];en(this.pixelTransform,1/i,1/i),un(this.inversePixelTransform,this.pixelTransform);var e=hn(this.pixelTransform);this.useContainer(n,e,this.getBackground(t));var o=this.context,s=o.canvas,u=this.ul,a=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!a||a.isEmpty()))return null;var h=Math.round(t.size[0]*i),f=Math.round(t.size[1]*i);s.width!=h||s.height!=f?(s.width=h,s.height=f,s.style.transform!==e&&(s.style.transform=e)):this.containerReused||o.clearRect(0,0,h,f),this.preRender(o,t);var c=t.viewState,l=c.projection;this.ou=r.opacity,this.hl();var v=!1,p=!0;if(r.extent&&this.clipping){var d=zr(r.extent,l);(v=(p=Kn(d,t.extent))&&!xn(d,t.extent))&&this.clipUnrotated(this.al,t,d)}return p&&this.renderWorlds(u,t),v&&this.al.restore(),this.fl(),this.postRender(o,t),this.il!==c.rotation&&(this.il=c.rotation,this.Jc=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.Jc&&!this.Hc){var i=[this.context.canvas.width,this.context.canvas.height];tn(this.pixelTransform,i);var r=this.rl,e=this.tl,o=this.il,s=this.el,u=this.nl,a=this.getLayer(),h=[],f=i[0]*bb,c=i[1]*bb;h.push(this.getRenderTransform(r,e,o,bb,f,c,0).slice());var l=a.getSource(),v=s.getExtent();if(l.getWrapX()&&s.canWrapX()&&!xn(v,u)){for(var p=u[0],d=$n(v),y=0,m=void 0;p<v[0];)m=d*--y,h.push(this.getRenderTransform(r,e,o,bb,f,c,m).slice()),p+=d;for(y=0,p=u[2];p>v[2];)m=d*++y,h.push(this.getRenderTransform(r,e,o,bb,f,c,m).slice()),p-=d}this.Jc=xb(i,h,this.Qc,a.getStyleFunction(),u,e,o)}n(_b(t,this.Qc,this.Jc))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){var s=this;if(this.ul){var u,a=n.viewState.resolution,h=n.viewState.rotation,f=this.getLayer(),c={},l=function(t,n,i){var s=o(t),u=c[s];if(u){if(!0!==u&&i<u.distanceSq){if(0===i)return c[s]=!0,e.splice(e.lastIndexOf(u),1),r(t,f,n);u.geometry=n,u.distanceSq=i}}else{if(0===i)return c[s]=!0,r(t,f,n);e.push(c[s]={feature:t,layer:f,geometry:n,distanceSq:i,callback:r})}},v=[this.ul];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some((function(r){return u=r.forEachFeatureAtCoordinate(t,a,h,i,l,r===s.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map((function(t){return t.value})):null)})),u}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.ul&&t.changed()},n.prototype.Kc=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var r=t.viewHints[zu],e=t.viewHints[Lu],o=n.getUpdateWhileAnimating(),s=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!s&&e)return this.Hc=!0,!0;this.Hc=!1;var u=t.extent,a=t.viewState,h=a.projection,f=a.resolution,c=t.pixelRatio,l=n.getRevision(),v=n.getRenderBuffer(),p=n.getRenderOrder();void 0===p&&(p=Of);var d=a.center.slice(),y=mn(u,v*f),m=y.slice(),w=[y.slice()],g=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!xn(g,t.extent)){var b=$n(g),_=Math.max($n(y)/2,b);y[0]=g[0]-_,y[2]=g[2]+_,rr(d,h);var M=ii(w[0],h);M[0]<g[0]&&M[2]<g[2]?w.push([M[0]+b,M[1],M[2]+b,M[3]]):M[0]>g[0]&&M[2]>g[2]&&w.push([M[0]-b,M[1],M[2]-b,M[3]])}if(this.ready&&this.tl==f&&this.Mh==l&&this.sl==p&&xn(this.nl,y))return x(this.Lh,m)||(this.Jc=null,this.Lh=m),this.rl=d,this.replayGroupChanged=!1,!0;this.ul=null;var S,O=new nb(Ef(f,c),y,f,c);this.getLayer().getDeclutter()&&(S=new nb(Ef(f,c),y,f,c));var j,E=Cr();if(E){for(var T=0,P=w.length;T<P;++T){var A=Nr(w[T],h);i.loadFeatures(A,Lr(f,h),E)}j=Or(E,h)}else for(T=0,P=w.length;T<P;++T)i.loadFeatures(w[T],f,h);var C=jf(f,c),k=!0,I=function(t){var i,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(i=r(t,f)),i){var e=this.renderFeature(t,C,i,O,j,S);k=k&&!e}}.bind(this),N=Nr(y,h),z=i.getFeaturesInExtent(N);p&&z.sort(p);for(T=0,P=z.length;T<P;++T)I(z[T]);this.Qc=z,this.ready=k;var L=O.finish(),R=new gb(y,f,c,i.getOverlaps(),L,n.getRenderBuffer());return S&&(this.declutterExecutorGroup=new gb(y,f,c,i.getOverlaps(),S.finish(),n.getRenderBuffer())),this.tl=f,this.Mh=l,this.sl=p,this.Lh=m,this.nl=y,this.rl=d,this.el=h,this.ul=R,this.Jc=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,n,i,r,e,o){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var u=0,a=i.length;u<a;++u)s=Tf(r,t,i[u],n,this.$c,e,o)||s;else s=Tf(r,t,i,n,this.$c,e,o);return s},n}(Bm),Ob=Sb,jb=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Eb=function(t){function n(n){var i=t.call(this,n)||this;return i.cl=new Ob(n),i.ll=n.getImageRatio(),i.vl=[1,0,0,1,0,0],i.pl=null,i}return jb(n,t),n.prototype.disposeInternal=function(){this.cl.dispose(),t.prototype.disposeInternal.call(this)},n.prototype.getFeatures=function(t){if(!this.cl)return new Promise((function(t){return t([])}));var n=tn(this.vl,tn(this.pl,t.slice()));return this.cl.getFeatures(n)},n.prototype.handleFontsChanged=function(){this.cl.handleFontsChanged()},n.prototype.prepareFrame=function(t){var n=t.pixelRatio,i=t.viewState,r=i.resolution,e=t.viewHints,o=this.cl,s=t.extent;1!==this.ll&&Qn(s=s.slice(0),this.ll);var u=$n(s)/r,a=Yn(s)/r;if(!e[zu]&&!e[Lu]&&!Hn(s)){o.useContainer(null,null);var h=o.context,f=t.layerStatesArray[t.layerIndex];h.globalAlpha=f.opacity;var c=P({},f,{opacity:1}),l=P({},t,{declutterTree:new Jv(9),extent:s,size:[u,a],viewState:P({},t.viewState,{rotation:0}),layerStatesArray:[c],layerIndex:0}),v=!0,p=new Eo(s,r,n,h.canvas,(function(t){o.prepareFrame(l)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(l,null)&&(o.renderDeclutter(l),v=!1),t())}));p.addEventListener(z,function(){if(p.getState()===bo){this.zt=v?null:p;var t=p.getResolution(),r=p.getPixelRatio(),e=t*n/r;this.renderedResolution=e,this.vl=sn(this.vl,u/2,a/2,1/e,-1/e,0,-i.center[0],-i.center[1])}}.bind(this)),p.load()}return this.zt&&(this.pl=t.pixelToCoordinateTransform.slice()),!!this.zt},n.prototype.preRender=function(){},n.prototype.postRender=function(){},n.prototype.renderDeclutter=function(){},n.prototype.forEachFeatureAtCoordinate=function(n,i,r,e,o){return this.cl?this.cl.forEachFeatureAtCoordinate(n,i,r,e,o):t.prototype.forEachFeatureAtCoordinate.call(this,n,i,r,e,o)},n}(Zm),Tb=Eb,Pb="image",Ab="hybrid",Cb="vector",kb=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ib={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Nb={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},zb=function(t){function n(n){var i=t.call(this,n)||this;return i.$c=i.Kc.bind(i),i.dl,i.pl=null,i.il,i.yl=[1,0,0,1,0,0],i}return kb(n,t),n.prototype.prepareTile=function(t,n,i){var r,e=t.getState();return e!==pt&&e!==dt||(this.ml(t,n,i),this.wl(t)&&(r=!0)),r},n.prototype.getTile=function(n,i,r,e){var o=e.pixelRatio,s=e.viewState,u=s.resolution,a=s.projection,h=this.getLayer(),f=h.getSource().getTile(n,i,r,o,a),c=e.viewHints,l=!(c[zu]||c[Lu]);return!l&&f.wantedResolution||(f.wantedResolution=u),this.prepareTile(f,o,a)&&(l||Date.now()-e.time<8)&&h.getRenderMode()!==Cb&&this.gl(f,e),t.prototype.getTile.call(this,n,i,r,e)},n.prototype.isDrawableTile=function(n){var i=this.getLayer();return t.prototype.isDrawableTile.call(this,n)&&(i.getRenderMode()===Cb?o(i)in n.executorGroups:n.hasContext(i))},n.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},n.prototype.prepareFrame=function(n){var i=this.getLayer().getRevision();return this.dl!==i&&(this.dl=i,this.renderedTiles.length=0),t.prototype.prepareFrame.call(this,n)},n.prototype.ml=function(t,n,i){var r=this.getLayer(),e=r.getRevision(),s=r.getRenderOrder()||null,u=t.wantedResolution,a=t.getReplayState(r);if(a.dirty||a.renderedResolution!==u||a.renderedRevision!=e||a.renderedRenderOrder!=s){var h=r.getSource(),f=r.getDeclutter(),c=h.getTileGrid(),l=h.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),v=h.getSourceTiles(n,i,t),p=o(r);delete t.hitDetectionImageData[p],t.executorGroups[p]=[],f&&(t.declutterExecutorGroups[p]=[]),a.dirty=!1;for(var d=function(i,e){var o=v[i];if(o.getState()!=pt)return"continue";var d=o.tileCoord,m=c.getTileCoordExtent(d),w=Zn(l,m),g=mn(w,r.getRenderBuffer()*u,y.tmpExtent),b=Pn(m,w)?null:g,x=new nb(0,g,u,n),_=f?new nb(0,w,u,n):void 0,M=jf(u,n),S=function(t){var n,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(n=i(t,u)),n){var e=this.renderFeature(t,M,n,x,_);a.dirty=a.dirty||e}},O=o.getFeatures();s&&s!==a.renderedRenderOrder&&O.sort(s);for(var j=0,E=O.length;j<E;++j){var T=O[j];b&&!Kn(b,T.getGeometry().getExtent())||S.call(y,T)}var P=x.finish(),A=r.getRenderMode()!==Cb&&f&&1===v.length?null:w,C=new gb(A,u,n,h.getOverlaps(),P,r.getRenderBuffer());if(t.executorGroups[p].push(C),_){var k=new gb(null,u,n,h.getOverlaps(),_.finish(),r.getRenderBuffer());t.declutterExecutorGroups[p].push(k)}},y=this,m=0,w=v.length;m<w;++m)d(m);a.renderedRevision=e,a.renderedRenderOrder=s,a.renderedResolution=u}},n.prototype.forEachFeatureAtCoordinate=function(t,n,i,r,e){var s=n.viewState.resolution,u=n.viewState.rotation;i=null==i?0:i;var a=this.getLayer(),h=a.getSource().getTileGridForProjection(n.viewState.projection),f=yn([t]);mn(f,s*i,f);for(var c,l={},v=function(t,n,i){var s=t.getId();void 0===s&&(s=o(t));var u=l[s];if(u){if(!0!==u&&i<u.distanceSq){if(0===i)return l[s]=!0,e.splice(e.lastIndexOf(u),1),r(t,a,n);u.geometry=n,u.distanceSq=i}}else{if(0===i)return l[s]=!0,r(t,a,n);e.push(l[s]={feature:t,layer:a,geometry:n,distanceSq:i,callback:r})}},p=this.renderedTiles,d=function(r,e){var l=p[r];if(!Kn(h.getTileCoordExtent(l.wrappedTileCoord),f))return"continue";var d=o(a),y=[l.executorGroups[d]],m=l.declutterExecutorGroups[d];m&&y.push(m),y.some((function(r){for(var e=r===m?n.declutterTree.all().map((function(t){return t.value})):null,o=0,a=r.length;o<a;++o){var h=r[o];if(c=h.forEachFeatureAtCoordinate(t,s,u,i,v,e))return!0}}))},y=0,m=p.length;!c&&y<m;++y)d(y);return c},n.prototype.getFeatures=function(t){return new Promise(function(n,i){for(var r,e=this.getLayer(),s=o(e),u=e.getSource(),a=this.renderedProjection,h=a.getExtent(),f=this.renderedResolution,c=u.getTileGridForProjection(a),l=tn(this.pl,t.slice()),v=c.getTileCoordForCoordAndResolution(l,f),p=0,d=this.renderedTiles.length;p<d;++p)if(v.toString()===this.renderedTiles[p].tileCoord.toString()){if((r=this.renderedTiles[p]).getState()===pt){var y=c.getTileCoordExtent(r.tileCoord);u.getWrapX()&&a.canWrapX()&&!xn(h,y)&&rr(l,a);break}r=void 0}if(!r||r.loadingSourceTiles>0)n([]);else{var m=Vn(c.getTileCoordExtent(r.wrappedTileCoord)),w=[(l[0]-m[0])/f,(m[1]-l[1])/f],g=r.getSourceTiles().reduce((function(t,n){return t.concat(n.getFeatures())}),[]),b=r.hitDetectionImageData[s];if(!b&&!this.Hc){var x=aa(c.getTileSize(c.getZForResolution(f,u.zDirection))),_=this.il;b=xb(x,[this.getRenderTransform(c.getTileCoordCenter(r.wrappedTileCoord),f,0,bb,x[0]*bb,x[1]*bb,0)],g,e.getStyleFunction(),c.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(e).renderedResolution,_),r.hitDetectionImageData[s]=b}n(_b(w,g,b))}}.bind(this))},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.dl&&t.changed()},n.prototype.Kc=function(t){this.renderIfReadyAndVisible()},n.prototype.renderDeclutter=function(t){var n=this.context,i=n.globalAlpha;n.globalAlpha=this.getLayer().getOpacity();for(var r=t.viewHints,e=!(r[zu]||r[Lu]),s=this.renderedTiles,u=0,a=s.length;u<a;++u){var h=s[u],f=h.declutterExecutorGroups[o(this.getLayer())];if(f)for(var c=f.length-1;c>=0;--c)f[c].execute(this.context,1,this.getTileRenderTransform(h,t),t.viewState.rotation,e,void 0,t.declutterTree)}n.globalAlpha=i},n.prototype.getTileRenderTransform=function(t,n){var i=n.pixelRatio,r=n.viewState,e=r.center,o=r.resolution,s=r.rotation,u=n.size,a=Math.round(u[0]*i),h=Math.round(u[1]*i),f=this.getLayer().getSource().getTileGridForProjection(n.viewState.projection),c=t.tileCoord,l=f.getTileCoordExtent(t.wrappedTileCoord),v=f.getTileCoordExtent(c,this.tmpExtent)[0]-l[0];return Ht(rn(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(e,o,s,i,a,h,v))},n.prototype.renderFrame=function(n,i){var r=n.viewHints,e=!(r[zu]||r[Lu]);t.prototype.renderFrame.call(this,n,i),this.pl=n.pixelToCoordinateTransform.slice(),this.il=n.viewState.rotation;var s=this.getLayer(),u=s.getRenderMode(),a=this.context,h=a.globalAlpha;a.globalAlpha=s.getOpacity();for(var f=Nb[u],c=n.viewState,l=c.rotation,v=s.getSource(),p=v.getTileGridForProjection(c.projection).getZForResolution(c.resolution,v.zDirection),d=this.renderedTiles,y=[],m=[],w=!0,g=d.length-1;g>=0;--g){var b=d[g];w=w&&!b.getReplayState(s).dirty;var x=b.executorGroups[o(s)].filter((function(t){return t.hasExecutors(f)}));if(0!==x.length){var _=this.getTileRenderTransform(b,n),M=b.tileCoord[0],S=!1,O=x[0].getClipCoords(_);if(O){for(var j=0,E=y.length;j<E;++j)if(p!==M&&M<m[j]){var T=y[j];Kn([O[0],O[3],O[4],O[7]],[T[0],T[3],T[4],T[7]])&&(S||(a.save(),S=!0),a.beginPath(),a.moveTo(O[0],O[1]),a.lineTo(O[2],O[3]),a.lineTo(O[4],O[5]),a.lineTo(O[6],O[7]),a.moveTo(T[6],T[7]),a.lineTo(T[4],T[5]),a.lineTo(T[2],T[3]),a.lineTo(T[0],T[1]),a.clip())}y.push(O),m.push(M)}for(var P=0,A=x.length;P<A;++P){x[P].execute(a,1,_,l,e,f)}S&&a.restore()}}return a.globalAlpha=h,this.ready=w,this.container},n.prototype.renderFeature=function(t,n,i,r,e){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,u=i.length;s<u;++s)o=Tf(r,t,i[s],n,this.$c,void 0,e)||o;else o=Tf(r,t,i,n,this.$c,void 0,e);return o},n.prototype.wl=function(t){var n=this.getLayer();if(n.getRenderMode()===Cb)return!1;var i=t.getReplayState(n),r=n.getRevision(),e=t.wantedResolution;return i.renderedTileResolution!==e||i.renderedTileRevision!==r},n.prototype.gl=function(t,n){var i=this.getLayer(),r=t.getReplayState(i),e=i.getRevision(),s=t.executorGroups[o(i)];r.renderedTileRevision=e;var u=t.wrappedTileCoord,a=u[0],h=i.getSource(),f=n.pixelRatio,c=n.viewState.projection,l=h.getTileGridForProjection(c),v=l.getResolution(t.tileCoord[0]),p=n.pixelRatio/t.wantedResolution*v,d=l.getResolution(a),y=t.getContext(i);f=Math.round(Math.max(f,p/f));var m=h.getTilePixelSize(a,f,c);y.canvas.width=m[0],y.canvas.height=m[1];var w=f/p;if(1!==w){var g=Kt(this.yl);rn(g,w,w),y.setTransform.apply(y,g)}var b=l.getTileCoordExtent(u,this.tmpExtent),x=p/d,_=Kt(this.yl);rn(_,x,-x),on(_,-b[0],-b[3]);for(var M=0,S=s.length;M<S;++M){s[M].execute(y,w,_,0,!0,Ib[i.getRenderMode()])}r.renderedTileResolution=t.wantedResolution},n}(nw),Lb=zb,Rb=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Fb=function(t){function n(n,i){var r=t.call(this)||this;return i&&!Array.isArray(n[0])?r.setFlatCoordinates(i,n):r.setCoordinates(n,i),r}return Rb(n,t),n.prototype.appendPoint=function(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<gn(this.getExtent(),t,n))return r;for(var e=this.flatCoordinates,o=this.stride,s=0,u=e.length;s<u;s+=o){var a=hi(t,n,e[s],e[s+1]);if(a<r){r=a;for(var h=0;h<o;++h)i[h]=e[s+h];i.length=o}}return r},n.prototype.getCoordinates=function(){return me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Te(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},n.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,r=[],e=0,o=t.length;e<o;e+=i){var s=new Te(t.slice(e,e+i),n);r.push(s)}return r},n.prototype.getType=function(){return"MultiPoint"},n.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,r=0,e=n.length;r<e;r+=i){if(_n(t,n[r],n[r+1]))return!0}return!1},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ue(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Jr),Gb=Fb;function Db(t,n,i,r,e,o,s){var u,a,h=(i-n)/r;if(1===h)u=n;else if(2===h)u=n,a=e;else if(0!==h){for(var f=t[n],c=t[n+1],l=0,v=[0],d=n+r;d<i;d+=r){var y=t[d],m=t[d+1];l+=Math.sqrt((y-f)*(y-f)+(m-c)*(m-c)),v.push(l),f=y,c=m}var w=e*l,g=p(v,w);g<0?(a=(w-v[-g-2])/(v[-g-1]-v[-g-2]),u=n+(-g-2)*r):u=n+g*r}var b=s>1?s:2,x=o||new Array(b);for(d=0;d<b;++d)x[d]=void 0===u?NaN:void 0===a?t[u+d]:pi(t[u+d],t[u+r+d],a);return x}function Ub(t,n,i,r,e,o){if(i==n)return null;var s;if(e<t[n+r-1])return o?((s=t.slice(n,n+r))[r-1]=e,s):null;if(t[i-1]<e)return o?((s=t.slice(i-r,i))[r-1]=e,s):null;if(e==t[n+r-1])return t.slice(n,n+r);for(var u=n/r,a=i/r;u<a;){var h=u+a>>1;e<t[(h+1)*r-1]?a=h:u=h+1}var f=t[u*r-1];if(e==f)return t.slice((u-1)*r,(u-1)*r+r);var c=(e-f)/(t[(u+1)*r-1]-f);s=[];for(var l=0;l<r-1;++l)s.push(pi(t[(u-1)*r+l],t[u*r+l],c));return s.push(e),s}function qb(t,n,i,r,e,o,s){if(s)return Ub(t,n,i[i.length-1],r,e,o);var u;if(e<t[r-1])return o?((u=t.slice(0,r))[r-1]=e,u):null;if(t[t.length-1]<e)return o?((u=t.slice(t.length-r))[r-1]=e,u):null;for(var a=0,h=i.length;a<h;++a){var f=i[a];if(n!=f){if(e<t[n+r-1])return null;if(e<=t[f-1])return Ub(t,n,f,r,e,!1);n=f}}return null}var Bb=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xb=function(t){function n(n,i){var r=t.call(this)||this;return r.bl=null,r.xl=-1,r.wt=-1,r.gt=-1,void 0===i||Array.isArray(n[0])?r.setCoordinates(n,i):r.setFlatCoordinates(i,n),r}return Bb(n,t),n.prototype.appendCoordinate=function(t){this.flatCoordinates?g(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<gn(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(te(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.gt=this.getRevision()),re(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.wt,!1,t,n,i,r))},n.prototype.forEachSegment=function(t){return ze(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinateAtM=function(t,n){if("XYM"!=this.layout&&"XYZM"!=this.layout)return null;var i=void 0!==n&&n;return Ub(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},n.prototype.getCoordinates=function(){return me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinateAt=function(t,n){return Db(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},n.prototype.getLength=function(){return rb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getFlatMidpoint=function(){return this.xl!=this.getRevision()&&(this.bl=this.getCoordinateAt(.5,this.bl),this.xl=this.getRevision()),this.bl},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new n(i,"XY")},n.prototype.getType=function(){return"LineString"},n.prototype.intersectsExtent=function(t){return Le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ue(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Jr),Yb=Xb,Zb=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vb=function(t){function n(n,i,r){var e=t.call(this)||this;if(e.bt=[],e.wt=-1,e.gt=-1,Array.isArray(n[0]))e.setCoordinates(n,i);else if(void 0!==i&&r)e.setFlatCoordinates(i,n),e.bt=r;else{for(var o=e.getLayout(),s=n,u=[],a=[],h=0,f=s.length;h<f;++h){var c=s[h];0===h&&(o=c.getLayout()),g(u,c.getFlatCoordinates()),a.push(u.length)}e.setFlatCoordinates(o,u),e.bt=a}return e}return Zb(n,t),n.prototype.appendLineString=function(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.bt.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.bt.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){return r<gn(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(ne(this.flatCoordinates,0,this.bt,this.stride,0)),this.gt=this.getRevision()),ee(this.flatCoordinates,0,this.bt,this.stride,this.wt,!1,t,n,i,r))},n.prototype.getCoordinateAtM=function(t,n,i){if("XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length)return null;var r=void 0!==n&&n,e=void 0!==i&&i;return qb(this.flatCoordinates,0,this.bt,this.stride,t,r,e)},n.prototype.getCoordinates=function(){return we(this.flatCoordinates,0,this.bt,this.stride)},n.prototype.getEnds=function(){return this.bt},n.prototype.getLineString=function(t){return t<0||this.bt.length<=t?null:new Yb(this.flatCoordinates.slice(0===t?0:this.bt[t-1],this.bt[t]),this.layout)},n.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.bt,i=this.layout,r=[],e=0,o=0,s=n.length;o<s;++o){var u=n[o],a=new Yb(t.slice(e,u),i);r.push(a),e=u}return r},n.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,r=this.bt,e=this.stride,o=0,s=r.length;o<s;++o){var u=r[o];g(t,Db(n,i,u,e,.5)),i=u}return t},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ce(this.flatCoordinates,0,this.bt,this.stride,t,i,0,r),new n(i,"XY",r)},n.prototype.getType=function(){return"MultiLineString"},n.prototype.intersectsExtent=function(t){return Re(this.flatCoordinates,0,this.bt,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=ae(this.flatCoordinates,0,t,this.stride,this.bt);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},n}(Jr),Wb=Vb;function $b(t,n,i,r){for(var e=[],o=[1/0,1/0,-1/0,-1/0],s=0,u=i.length;s<u;++s){var a=i[s];o=Tn(t,n,a[0],r),e.push((o[0]+o[2])/2,(o[1]+o[3])/2),n=a[a.length-1]}return e}var Kb=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hb=function(t){function n(n,i,r){var e=t.call(this)||this;if(e._l=[],e.Ml=-1,e.Sl=null,e.wt=-1,e.gt=-1,e.Mt=-1,e.St=null,!r&&!Array.isArray(n[0])){for(var o=e.getLayout(),s=n,u=[],a=[],h=0,f=s.length;h<f;++h){var c=s[h];0===h&&(o=c.getLayout());for(var l=u.length,v=c.getEnds(),p=0,d=v.length;p<d;++p)v[p]+=l;g(u,c.getFlatCoordinates()),a.push(v)}i=o,n=u,r=a}return void 0!==i&&r?(e.setFlatCoordinates(i,n),e._l=r):e.setCoordinates(n,i),e}return Kb(n,t),n.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var i=this.flatCoordinates.length;g(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,e=(n=t.getEnds().slice()).length;r<e;++r)n[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this._l.push();this._l.push(n),this.changed()},n.prototype.clone=function(){for(var t=this._l.length,i=new Array(t),r=0;r<t;++r)i[r]=this._l[r].slice();var e=new n(this.flatCoordinates.slice(),this.layout,i);return e.applyProperties(this),e},n.prototype.closestPointXY=function(t,n,i,r){return r<gn(this.getExtent(),t,n)?r:(this.gt!=this.getRevision()&&(this.wt=Math.sqrt(ie(this.flatCoordinates,0,this._l,this.stride,0)),this.gt=this.getRevision()),oe(this.getOrientedFlatCoordinates(),0,this._l,this.stride,this.wt,!0,t,n,i,r))},n.prototype.containsXY=function(t,n){return ke(this.getOrientedFlatCoordinates(),0,this._l,this.stride,t,n)},n.prototype.getArea=function(){return _e(this.getOrientedFlatCoordinates(),0,this._l,this.stride)},n.prototype.getCoordinates=function(t){var n;return void 0!==t?Ze(n=this.getOrientedFlatCoordinates().slice(),0,this._l,this.stride,t):n=this.flatCoordinates,ge(n,0,this._l,this.stride)},n.prototype.getEndss=function(){return this._l},n.prototype.getFlatInteriorPoints=function(){if(this.Ml!=this.getRevision()){var t=$b(this.flatCoordinates,0,this._l,this.stride);this.Sl=Ne(this.getOrientedFlatCoordinates(),0,this._l,this.stride,t),this.Ml=this.getRevision()}return this.Sl},n.prototype.getInteriorPoints=function(){return new Gb(this.getFlatInteriorPoints().slice(),"XYM")},n.prototype.getOrientedFlatCoordinates=function(){if(this.Mt!=this.getRevision()){var t=this.flatCoordinates;Xe(t,0,this._l,this.stride)?this.St=t:(this.St=t.slice(),this.St.length=Ze(this.St,0,this._l,this.stride)),this.Mt=this.getRevision()}return this.St},n.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ye(this.flatCoordinates,0,this._l,this.stride,Math.sqrt(t),i,0,r),new n(i,"XY",r)},n.prototype.getPolygon=function(t){if(t<0||this._l.length<=t)return null;var n;if(0===t)n=0;else{var i=this._l[t-1];n=i[i.length-1]}var r=this._l[t].slice(),e=r[r.length-1];if(0!==n)for(var o=0,s=r.length;o<s;++o)r[o]-=n;return new Ke(this.flatCoordinates.slice(n,e),this.layout,r)},n.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this._l,r=[],e=0,o=0,s=i.length;o<s;++o){var u=i[o].slice(),a=u[u.length-1];if(0!==e)for(var h=0,f=u.length;h<f;++h)u[h]-=e;var c=new Ke(n.slice(e,a),t,u);r.push(c),e=a}return r},n.prototype.getType=function(){return"MultiPolygon"},n.prototype.intersectsExtent=function(t){return De(this.getOrientedFlatCoordinates(),0,this._l,this.stride,t)},n.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=he(this.flatCoordinates,0,t,this.stride,this._l);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},n}(Jr),Jb=Hb,Qb=[1,0,0,1,0,0],tx=function(){function t(t,n,i,r,e){this.styleFunction,this.st,this.$=e,this.Ol=t,this.jl=n,this.Sl=null,this.El=null,this.bt=i,this.Tl=r}return t.prototype.get=function(t){return this.Tl[t]},t.prototype.getExtent=function(){return this.st||(this.st="Point"===this.Ol?En(this.jl):Tn(this.jl,0,this.jl.length,2)),this.st},t.prototype.getFlatInteriorPoint=function(){if(!this.Sl){var t=Un(this.getExtent());this.Sl=Ie(this.jl,0,this.bt,2,t,0)}return this.Sl},t.prototype.getFlatInteriorPoints=function(){if(!this.Sl){var t=$b(this.jl,0,this.bt,2);this.Sl=Ne(this.jl,0,this.bt,2,t)}return this.Sl},t.prototype.getFlatMidpoint=function(){return this.El||(this.El=Db(this.jl,0,this.jl.length,2,.5)),this.El},t.prototype.getFlatMidpoints=function(){if(!this.El){this.El=[];for(var t=this.jl,n=0,i=this.bt,r=0,e=i.length;r<e;++r){var o=i[r],s=Db(t,n,o,2,.5);g(this.El,s),n=o}}return this.El},t.prototype.getId=function(){return this.$},t.prototype.getOrientedFlatCoordinates=function(){return this.jl},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,n){return this},t.prototype.getProperties=function(){return this.Tl},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){return this.styleFunction},t.prototype.getType=function(){return this.Ol},t.prototype.transform=function(t){var n=(t=yr(t)).getExtent(),i=t.getWorldExtent();if(n&&i){var r=Yn(i)/Yn(n);sn(Qb,i[0],i[3],r,-r,0,0,0),Dr(this.jl,0,this.jl.length,2,Qb,this.jl)}},t.prototype.getEnds=function(){return this.bt},t}();function nx(t){var n=t.getType();switch(n){case"Point":return new Te(t.getFlatCoordinates());case"MultiPoint":return new Gb(t.getFlatCoordinates(),"XY");case"LineString":return new Yb(t.getFlatCoordinates(),"XY");case"MultiLineString":return new Wb(t.getFlatCoordinates(),"XY",t.getEnds());case"Polygon":var i=t.getFlatCoordinates(),r=t.getEnds(),e=Ve(i,r);return e.length>1?new Jb(i,"XY",e):new Ke(i,"XY",r);default:throw new Error("Invalid geometry type:"+n)}}tx.prototype.getEndss=tx.prototype.getEnds,tx.prototype.getFlatCoordinates=tx.prototype.getOrientedFlatCoordinates;var ix=tx;var rx=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ex=function(t){function n(n){return t.call(this,n)||this}return rx(n,t),n.prototype.createRenderer=function(){return new Ob(this)},n}(Vw);function ox(t,n,i){for(var r,e,o,s,u,a,h=[],f=t(0),c=t(1),l=n(f),v=n(c),p=[c,f],d=[v,l],y=[1,0],m={},w=1e5;--w>0&&y.length>0;)o=y.pop(),f=p.pop(),l=d.pop(),(a=o.toString())in m||(h.push(l[0],l[1]),m[a]=!0),s=y.pop(),c=p.pop(),v=d.pop(),ai((e=n(r=t(u=(o+s)/2)))[0],e[1],l[0],l[1],v[0],v[1])<i?(h.push(v[0],v[1]),m[a=s.toString()]=!0):(y.push(s,u,u,o),d.push(v,e,e,l),p.push(c,r,r,f));return h}function sx(t,n,i,r,e){return ox((function(r){return[t,n+(i-n)*r]}),jr(yr("EPSG:4326"),r),e)}function ux(t,n,i,r,e){return ox((function(r){return[n+(i-n)*r,t]}),jr(yr("EPSG:4326"),r),e)}var ax=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hx=new Uv({color:"rgba(0,0,0,0.2)"}),fx=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],cx=function(t){function n(n){var i=this,r=n||{},e=P({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},r);return delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,(i=t.call(this,e)||this).di=null,i.Pl=1/0,i.Al=1/0,i.Cl=-1/0,i.kl=-1/0,i.Il=1/0,i.Nl=1/0,i.zl=-1/0,i.Ll=-1/0,i.Rl=void 0!==r.targetSize?r.targetSize:100,i.Fl=void 0!==r.maxLines?r.maxLines:100,i.Gl=[],i.Dl=[],i.Ul=void 0!==r.strokeStyle?r.strokeStyle:hx,i.ql=void 0,i.Bl=void 0,i.Xl=null,i.Yl=null,i.Zl=null,i.Vl=null,i.Wl=null,i.$l=null,i.Kl=null,r.showLabels&&(i.Hl=null==r.lonLabelFormatter?Wi.bind(i,"EW"):r.lonLabelFormatter,i.Jl=null==r.latLabelFormatter?Wi.bind(i,"NS"):r.latLabelFormatter,i.Ql=null==r.lonLabelPosition?0:r.lonLabelPosition,i.tv=null==r.latLabelPosition?1:r.latLabelPosition,i.nv=new Wv({text:void 0!==r.lonLabelStyle?r.lonLabelStyle.clone():new Kv({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Cv({color:"rgba(0,0,0,1)"}),stroke:new Uv({color:"rgba(255,255,255,1)",width:3})})}),i.iv=function(t){var n=t.get("graticule_label");return this.nv.getText().setText(n),this.nv}.bind(i),i.rv=new Wv({text:void 0!==r.latLabelStyle?r.latLabelStyle.clone():new Kv({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Cv({color:"rgba(0,0,0,1)"}),stroke:new Uv({color:"rgba(255,255,255,1)",width:3})})}),i.ev=function(t){var n=t.get("graticule_label");return this.rv.getText().setText(n),this.rv}.bind(i),i.$l=[],i.Kl=[],i.addEventListener(cs,i.ov.bind(i))),i.sv=void 0!==r.intervals?r.intervals:fx,i.setSource(new Lp({loader:i.loaderFunction.bind(i),strategy:i.strategyFunction.bind(i),features:new ct,overlaps:!1,useSpatialIndex:!1,wrapX:r.wrapX})),i.uv=[],i.av=new Wv({stroke:i.Ul}),i.hv=null,i.Lh=null,i.tl=null,i.setRenderOrder(null),i}return ax(n,t),n.prototype.strategyFunction=function(t,n){var i=t.slice();return this.di&&this.getSource().getWrapX()&&ii(i,this.di),this.hv&&(An(this.hv,i,n)?i=this.hv.slice():this.getSource().removeLoadedExtent(this.hv)),[i]},n.prototype.loaderFunction=function(t,n,i){this.hv=t;var r=this.getSource(),e=Zn(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.Lh&&Pn(this.Lh,e)&&this.tl===n||(this.Lh=e,this.tl=n,Hn(e)))){var o=Un(e),s=n*n/4;(!this.di||!Sr(this.di,i))&&this.fv(i),this.cv(e,o,n,s);var u,a=this.Gl.length+this.Dl.length;for(this.$l&&(a+=this.Gl.length),this.Kl&&(a+=this.Dl.length);a>this.uv.length;)u=new Ct,this.uv.push(u);var h=r.getFeaturesCollection();h.clear();var f,c,l=0;for(f=0,c=this.Gl.length;f<c;++f)(u=this.uv[l++]).setGeometry(this.Gl[f]),u.setStyle(this.av),h.push(u);for(f=0,c=this.Dl.length;f<c;++f)(u=this.uv[l++]).setGeometry(this.Dl[f]),u.setStyle(this.av),h.push(u)}},n.prototype.lv=function(t,n,i,r,e,o){var s=this.vv(t,n,i,r,o);if(Kn(s.getExtent(),e)){if(this.$l){var u=this.Hl(t);o in this.$l?this.$l[o].text=u:this.$l[o]={geom:new Te([]),text:u}}this.Gl[o++]=s}return o},n.prototype.pv=function(t,n,i,r,e,o){var s=this.dv(t,n,i,r,o);if(Kn(s.getExtent(),e)){if(this.Kl){var u=this.Jl(t);o in this.Kl?this.Kl[o].text=u:this.Kl[o]={geom:new Te([]),text:u}}this.Dl[o++]=s}return o},n.prototype.ov=function(t){var n=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,r=t.frameState.size,e=t.frameState.extent,o=Un(e),s=e;if(n){var u=r[0]*i,a=r[1]*i;s=[o[0]-u/2,o[1]-a/2,o[0]+u/2,o[1]+a/2]}var h=0,f=0,c=this.tv<.5,l=this.di.getExtent(),v=$n(l);this.getSource().getWrapX()&&this.di.canWrapX()&&!xn(l,e)&&(h=Math.floor((e[0]-l[0])/v),f=Math.ceil((e[2]-l[2])/v),c=c!==Math.abs(n)>Math.PI/2);for(var p=Af(t),d=h;d<=f;++d){var y=this.Gl.length+this.Dl.length,m=void 0,w=void 0,g=void 0,b=void 0;if(this.$l)for(w=0,g=this.$l.length;w<g;++w){var x=this.Gl[w];if(n||0!==d)(_=x.clone()).translate(d*v,0),_.rotate(-n,o),(b=this.yv(_,s,w)).rotate(n,o);else b=this.yv(x,e,w);(m=this.uv[y++]).setGeometry(b),m.set("graticule_label",this.$l[w].text),p.drawFeature(m,this.iv(m))}if(this.Kl&&(d===h&&c||d===f&&!c))for(w=0,g=this.Dl.length;w<g;++w){var _;x=this.Dl[w];if(n||0!==d)(_=x.clone()).translate(d*v,0),_.rotate(-n,o),(b=this.mv(_,s,w)).rotate(n,o);else b=this.mv(x,e,w);(m=this.uv[y++]).setGeometry(b),m.set("graticule_label",this.Kl[w].text),p.drawFeature(m,this.ev(m))}}},n.prototype.cv=function(t,n,i,r){var e=this.wv(i);if(-1==e)return this.Gl.length=0,this.Dl.length=0,this.$l&&(this.$l.length=0),void(this.Kl&&(this.Kl.length=0));var o=!1,s=this.di.getExtent(),u=$n(s);this.getSource().getWrapX()&&this.di.canWrapX()&&!xn(s,t)&&($n(t)>=u?(t[0]=s[0],t[2]=s[2]):o=!0);var a=[oi(n[0],this.zl,this.Il),oi(n[1],this.Ll,this.Nl)],h=this.Bl(a);isNaN(h[1])&&(h[1]=Math.abs(this.Pl)>=Math.abs(this.Cl)?this.Pl:this.Cl);var f,c,l,v,p=oi(h[0],this.kl,this.Al),d=oi(h[1],this.Cl,this.Pl),y=this.Fl,m=t;o||(m=[oi(t[0],this.zl,this.Il),oi(t[1],this.Ll,this.Nl),oi(t[2],this.zl,this.Il),oi(t[3],this.Ll,this.Nl)]);var w=ni(m,this.Bl,void 0,8),g=w[3],b=w[2],x=w[1],_=w[0];if(o||(bn(m,this.Yl)&&(_=this.kl,x=this.Cl),bn(m,this.Zl)&&(b=this.Al,x=this.Cl),bn(m,this.Vl)&&(_=this.kl,g=this.Pl),bn(m,this.Wl)&&(b=this.Al,g=this.Pl),g=oi(g,d,this.Pl),b=oi(b,p,this.Al),x=oi(x,this.Cl,d),_=oi(_,this.kl,p)),v=oi(p=Math.floor(p/e)*e,this.kl,this.Al),c=this.lv(v,x,g,r,t,0),f=0,o)for(;(v-=e)>=_&&f++<y;)c=this.lv(v,x,g,r,t,c);else for(;v!=this.kl&&f++<y;)v=Math.max(v-e,this.kl),c=this.lv(v,x,g,r,t,c);if(v=oi(p,this.kl,this.Al),f=0,o)for(;(v+=e)<=b&&f++<y;)c=this.lv(v,x,g,r,t,c);else for(;v!=this.Al&&f++<y;)v=Math.min(v+e,this.Al),c=this.lv(v,x,g,r,t,c);for(this.Gl.length=c,this.$l&&(this.$l.length=c),l=oi(d=Math.floor(d/e)*e,this.Cl,this.Pl),c=this.pv(l,_,b,r,t,0),f=0;l!=this.Cl&&f++<y;)l=Math.max(l-e,this.Cl),c=this.pv(l,_,b,r,t,c);for(l=oi(d,this.Cl,this.Pl),f=0;l!=this.Pl&&f++<y;)l=Math.min(l+e,this.Pl),c=this.pv(l,_,b,r,t,c);this.Dl.length=c,this.Kl&&(this.Kl.length=c)},n.prototype.wv=function(t){for(var n=this.Xl[0],i=this.Xl[1],r=-1,e=Math.pow(this.Rl*t,2),o=[],s=[],u=0,a=this.sv.length;u<a;++u){var h=oi(this.sv[u]/2,0,90),f=oi(i,-90+h,90-h);if(o[0]=n-h,o[1]=f-h,s[0]=n+h,s[1]=f+h,this.ql(o,o),this.ql(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=e)break;r=this.sv[u]}return r},n.prototype.vv=function(t,n,i,r,e){var o=sx(t,n,i,this.di,r),s=this.Gl[e];return s?(s.setFlatCoordinates("XY",o),s.changed()):(s=new Yb(o,"XY"),this.Gl[e]=s),s},n.prototype.yv=function(t,n,i){var r=t.getFlatCoordinates(),e=1,o=r.length-1;r[e]>r[o]&&(e=o,o=1);var s=Math.max(n[1],r[e]),u=Math.min(n[3],r[o]),a=oi(n[1]+Math.abs(n[1]-n[3])*this.Ql,s,u),h=[r[e-1]+(r[o-1]-r[e-1])*(a-r[e])/(r[o]-r[e]),a],f=this.$l[i].geom;return f.setCoordinates(h),f},n.prototype.getMeridians=function(){return this.Gl},n.prototype.dv=function(t,n,i,r,e){var o=ux(t,n,i,this.di,r),s=this.Dl[e];return s?(s.setFlatCoordinates("XY",o),s.changed()):s=new Yb(o,"XY"),s},n.prototype.mv=function(t,n,i){var r=t.getFlatCoordinates(),e=0,o=r.length-2;r[e]>r[o]&&(e=o,o=0);var s=Math.max(n[0],r[e]),u=Math.min(n[2],r[o]),a=oi(n[0]+Math.abs(n[0]-n[2])*this.tv,s,u),h=[a,r[e+1]+(r[o+1]-r[e+1])*(a-r[e])/(r[o]-r[e])],f=this.Kl[i].geom;return f.setCoordinates(h),f},n.prototype.getParallels=function(){return this.Dl},n.prototype.fv=function(t){var n=yr("EPSG:4326"),i=t.getWorldExtent();this.Pl=i[3],this.Al=i[2],this.Cl=i[1],this.kl=i[0];var r=jr(t,n);if(this.kl<this.Al)this.Bl=r;else{var e=this.kl+this.Al/2;this.Al+=360,this.Bl=function(t,n,i){for(var o=i||2,s=r(t,n,o),u=0,a=s.length;u<a;u+=o)s[u]<e&&(s[u]+=360);return s}}this.ql=jr(n,t);var o=ni([this.kl,this.Cl,this.Al,this.Pl],this.ql,void 0,8);this.zl=o[0],this.Il=o[2],this.Ll=o[1],this.Nl=o[3],this.Yl=this.ql([this.kl,this.Cl]),this.Zl=this.ql([this.Al,this.Cl]),this.Vl=this.ql([this.kl,this.Pl]),this.Wl=this.ql([this.Al,this.Pl]),this.Xl=this.Bl(Un(t.getExtent())),isNaN(this.Xl[1])&&(this.Xl[1]=Math.abs(this.Pl)>=Math.abs(this.Cl)?this.Pl:this.Cl),this.di=t},n}(ex),lx=cx,vx=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),px="blur",dx="gradient",yx="radius",mx=["#00f","#0ff","#0f0","#ff0","#f00"],wx=function(t){function n(n){var i=this,r=n||{},e=P({},r);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,(i=t.call(this,e)||this).gv=null,i.addChangeListener(dx,i.bv),i.setGradient(r.gradient?r.gradient:mx),i.setBlur(void 0!==r.blur?r.blur:15),i.setRadius(void 0!==r.radius?r.radius:8);var o=r.weight?r.weight:"weight";return i.xv="string"==typeof o?function(t){return t.get(o)}:o,i.setRenderOrder(null),i}return vx(n,t),n.prototype.getBlur=function(){return this.get(px)},n.prototype.getGradient=function(){return this.get(dx)},n.prototype.getRadius=function(){return this.get(yx)},n.prototype.bv=function(){this.gv=function(t){for(var n=1,i=256,r=To(n,i),e=r.createLinearGradient(0,0,n,i),o=1/(t.length-1),s=0,u=t.length;s<u;++s)e.addColorStop(s*o,t[s]);return r.fillStyle=e,r.fillRect(0,0,n,i),r.canvas}(this.getGradient())},n.prototype.setBlur=function(t){this.set(px,t)},n.prototype.setGradient=function(t){this.set(dx,t)},n.prototype.setRadius=function(t){this.set(yx,t)},n.prototype.createRenderer=function(){return new sg(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var n=this.xv(t);return void 0!==n?oi(n,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(yx)+this.get(px))}.bind(this),u_blurSlope:function(){return this.get(yx)/Math.max(1,this.get(px))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gv}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},n.prototype.renderDeclutter=function(){},n}(Vw);var gx=wx,bx=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,n){var i;if(n){var r=n.dataProjection?yr(n.dataProjection):this.readProjection(t);n.extent&&r&&r.getUnits()===Rt.TILE_PIXELS&&(r=yr(r)).setWorldExtent(n.extent),i={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return P({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return r()},t.prototype.readFeature=function(t,n){return r()},t.prototype.readFeatures=function(t,n){return r()},t.prototype.readGeometry=function(t,n){return r()},t.prototype.readProjection=function(t){return r()},t.prototype.writeFeature=function(t,n){return r()},t.prototype.writeFeatures=function(t,n){return r()},t.prototype.writeGeometry=function(t,n){return r()},t}();function xx(t,n,i){var r,e=i?yr(i.featureProjection):null,o=i?yr(i.dataProjection):null;if(r=e&&o&&!Sr(e,o)?(n?t.clone():t).transform(n?e:o,n?o:e):t,n&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*s)/s;return t}))}return r}function _x(t,n){var i=n?yr(n.featureProjection):null,r=n?yr(n.dataProjection):null;return i&&r&&!Sr(i,r)?Tr(t,r,i):t}var Mx=i(98),Sx=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Ox(t,n,i){if(3===t){var r={keys:[],values:[],features:[]},e=i.readVarint()+i.pos;i.readFields(jx,r,e),r.length=r.features.length,r.length&&(n[r.name]=r)}}function jx(t,n,i){if(15===t)n.version=i.readVarint();else if(1===t)n.name=i.readString();else if(5===t)n.extent=i.readVarint();else if(2===t)n.features.push(i.pos);else if(3===t)n.keys.push(i.readString());else if(4===t){for(var r=null,e=i.readVarint()+i.pos;i.pos<e;)r=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;n.values.push(r)}}function Ex(t,n,i){if(1==t)n.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var e=n.layer.keys[i.readVarint()],o=n.layer.values[i.readVarint()];n.properties[e]=o}else 3==t?n.type=i.readVarint():4==t&&(n.geometry=i.pos)}function Tx(t,n,i){t.pos=n.features[i];var r=t.readVarint()+t.pos,e={layer:n,type:0,properties:{}};return t.readFields(Ex,e,r),e}var Px=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=new ei({code:"",units:Rt.TILE_PIXELS}),i._v=r.featureClass?r.featureClass:ix,i.K=r.geometryName,i.Mv=r.layerName?r.layerName:"layer",i.qh=r.layers?r.layers:null,i.Sv=r.idProperty,i.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],i}return Sx(n,t),n.prototype.Ov=function(t,n,i,r){t.pos=n.geometry;for(var e=t.readVarint()+t.pos,o=1,s=0,u=0,a=0,h=0,f=0;t.pos<e;){if(!s){var c=t.readVarint();o=7&c,s=c>>3}s--,1===o||2===o?(u+=t.readSVarint(),a+=t.readSVarint(),1===o&&h>f&&(r.push(h),f=h),i.push(u,a),h+=2):7===o?h>f&&(i.push(i[f],i[f+1]),h+=2):Et(!1,59)}h>f&&(r.push(h),f=h)},n.prototype.jv=function(t,n,i){var r,e=n.type;if(0===e)return null;var o,s=n.properties;this.Sv?(o=s[this.Sv],delete s[this.Sv]):o=n.id,s[this.Mv]=n.layer.name;var u=[],a=[];this.Ov(t,n,u,a);var h=function(t,n){var i;1===t?i=1===n?"Point":"MultiPoint":2===t?i=1===n?"LineString":"MultiLineString":3===t&&(i="Polygon");return i}(e,a.length);if(this._v===ix)(r=new this._v(h,u,a,s,o)).transform(i.dataProjection);else{var f=void 0;if("Polygon"==h){var c=Ve(u,a);f=c.length>1?new Jb(u,"XY",c):new Ke(u,"XY",a)}else f="Point"===h?new Te(u,"XY"):"LineString"===h?new Yb(u,"XY"):"MultiPoint"===h?new Gb(u,"XY"):"MultiLineString"===h?new Wb(u,"XY",a):null;r=new(0,this._v),this.K&&r.setGeometryName(this.K);var l=xx(f,!1,i);r.setGeometry(l),void 0!==o&&r.setId(o),r.setProperties(s,!0)}return r},n.prototype.getType=function(){return"arraybuffer"},n.prototype.readFeatures=function(t,n){var i=this.qh,r=this.adaptOptions(n),e=yr(r.dataProjection);e.setWorldExtent(r.extent),r.dataProjection=e;var o=new Mx(t),s=o.readFields(Ox,{}),u=[];for(var a in s)if(!i||-1!=i.indexOf(a)){var h=s[a],f=h?[0,0,h.extent,h.extent]:null;e.setExtent(f);for(var c=0,l=h.length;c<l;++c){var v=Tx(o,h,c),p=this.jv(o,v,r);null!==p&&u.push(p)}}return u},n.prototype.readProjection=function(t){return this.dataProjection},n.prototype.setLayers=function(t){this.qh=t},n}(bx),Ax=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cx=function(t){function n(n){var i=this,r=n||{},e=P({},r);delete e.preload,delete e.useInterimTilesOnError,(i=t.call(this,e)||this).on,i.once,i.un,r.renderMode===Pb&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),r.renderMode=void 0);var o=r.renderMode||Ab;return Et(o==Ab||o==Cb,28),i.Ev=o,i.setPreload(r.preload?r.preload:0),i.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),i.getBackground,i.setBackground,i}return Ax(n,t),n.prototype.createRenderer=function(){return new Lb(this)},n.prototype.getFeatures=function(n){return t.prototype.getFeatures.call(this,n)},n.prototype.getRenderMode=function(){return this.Ev},n.prototype.getPreload=function(){return this.get($m)},n.prototype.getUseInterimTilesOnError=function(){return this.get(Km)},n.prototype.setPreload=function(t){this.set($m,t)},n.prototype.setUseInterimTilesOnError=function(t){this.set(Km,t)},n}(Vw),kx=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Ix(t){for(var n=[],i=0,r=t.length;i<r;++i)n.push(t[i].clone());return n}var Nx=function(t){function n(n){var i=t.call(this)||this;return i.Tv=n||null,i.Pv=[],i.Av(),i}return kx(n,t),n.prototype.Cv=function(){this.Pv.forEach(H),this.Pv.length=0},n.prototype.Av=function(){if(this.Tv)for(var t=0,n=this.Tv.length;t<n;++t)this.Pv.push($(this.Tv[t],z,this.changed,this))},n.prototype.clone=function(){var t=new n(null);return t.setGeometries(this.Tv),t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){if(r<gn(this.getExtent(),t,n))return r;for(var e=this.Tv,o=0,s=e.length;o<s;++o)r=e[o].closestPointXY(t,n,i,r);return r},n.prototype.containsXY=function(t,n){for(var i=this.Tv,r=0,e=i.length;r<e;++r)if(i[r].containsXY(t,n))return!0;return!1},n.prototype.computeExtent=function(t){jn(t);for(var n=this.Tv,i=0,r=n.length;i<r;++i)Cn(t,n[i].getExtent());return t},n.prototype.getGeometries=function(){return Ix(this.Tv)},n.prototype.getGeometriesArray=function(){return this.Tv},n.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.Tv,i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.Tv,e=!1,o=0,s=r.length;o<s;++o){var u=r[o],a=u.getSimplifiedGeometry(t);i.push(a),a!==u&&(e=!0)}if(e){var h=new n(null);return h.setGeometriesArray(i),h}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},n.prototype.getType=function(){return"GeometryCollection"},n.prototype.intersectsExtent=function(t){for(var n=this.Tv,i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(t))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.Tv.length},n.prototype.rotate=function(t,n){for(var i=this.Tv,r=0,e=i.length;r<e;++r)i[r].rotate(t,n);this.changed()},n.prototype.scale=function(t,n,i){var r=i;r||(r=Un(this.getExtent()));for(var e=this.Tv,o=0,s=e.length;o<s;++o)e[o].scale(t,n,r);this.changed()},n.prototype.setGeometries=function(t){this.setGeometriesArray(Ix(t))},n.prototype.setGeometriesArray=function(t){this.Cv(),this.Tv=t,this.Av(),this.changed()},n.prototype.applyTransform=function(t){for(var n=this.Tv,i=0,r=n.length;i<r;++i)n[i].applyTransform(t);this.changed()},n.prototype.translate=function(t,n){for(var i=this.Tv,r=0,e=i.length;r<e;++r)i[r].translate(t,n);this.changed()},n.prototype.disposeInternal=function(){this.Cv(),t.prototype.disposeInternal.call(this)},n}(Vr),zx=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Lx(t){if("string"==typeof t){var n=JSON.parse(t);return n||null}return null!==t?t:null}var Rx=function(t){function n(){return t.call(this)||this}return zx(n,t),n.prototype.getType=function(){return"json"},n.prototype.readFeature=function(t,n){return this.readFeatureFromObject(Lx(t),this.getReadOptions(t,n))},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(Lx(t),this.getReadOptions(t,n))},n.prototype.readFeatureFromObject=function(t,n){return r()},n.prototype.readFeaturesFromObject=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(Lx(t),this.getReadOptions(t,n))},n.prototype.readGeometryFromObject=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromObject(Lx(t))},n.prototype.readProjectionFromObject=function(t){return r()},n.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},n.prototype.writeFeatureObject=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},n.prototype.writeFeaturesObject=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},n.prototype.writeGeometryObject=function(t,n){return r()},n}(bx),Fx=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Gx(t,n){if(!t)return null;var i;switch(t.type){case"Point":i=function(t){return new Te(t.coordinates)}(t);break;case"LineString":i=function(t){return new Yb(t.coordinates)}(t);break;case"Polygon":i=function(t){return new Ke(t.coordinates)}(t);break;case"MultiPoint":i=function(t){return new Gb(t.coordinates)}(t);break;case"MultiLineString":i=function(t){return new Wb(t.coordinates)}(t);break;case"MultiPolygon":i=function(t){return new Jb(t.coordinates)}(t);break;case"GeometryCollection":i=function(t,n){var i=t.geometries.map((function(t){return Gx(t,n)}));return new Nx(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return xx(i,!1,n)}function Dx(t,n){var i,r=(t=xx(t,!0,n)).getType();switch(r){case"Point":i=function(t,n){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":i=function(t,n){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,n);break;case"MultiPoint":i=function(t,n){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":i=function(t,n){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":i=function(t,n){var i;n&&(i=n.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,n);break;case"GeometryCollection":i=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=P({},n);return delete i.featureProjection,Dx(t,i)}))}}(t,n);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}var Ux,qx=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).dataProjection=yr(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=yr(r.featureProjection)),i.K=r.geometryName,i.kv=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return Fx(n,t),n.prototype.readFeatureFromObject=function(t,n){var i=null,r=Gx((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),e=new Ct;return this.K?e.setGeometryName(this.K):this.kv&&"geometry_name"in i!==void 0&&e.setGeometryName(i.geometry_name),e.setGeometry(r),"id"in i&&e.setId(i.id),i.properties&&e.setProperties(i.properties,!0),e},n.prototype.readFeaturesFromObject=function(t,n){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,e=0,o=r.length;e<o;++e)i.push(this.readFeatureFromObject(r[e],n))}else i=[this.readFeatureFromObject(t,n)];return i},n.prototype.readGeometryFromObject=function(t,n){return Gx(t,n)},n.prototype.readProjectionFromObject=function(t){var n,i=t.crs;return i?"name"==i.type?n=yr(i.properties.name):"EPSG"===i.type?n=yr("EPSG:"+i.properties.code):Et(!1,36):n=this.dataProjection,n},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;var e=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=Dx(o,n),delete e[t.getGeometryName()]),k(e)||(i.properties=e),i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(this.writeFeatureObject(t[r],n));return{type:"FeatureCollection",features:i}},n.prototype.writeGeometryObject=function(t,n){return Dx(t,this.adaptOptions(n))},n}(Rx),Bx={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Xx(t){return(t=Math.round(t))<0?0:t>255?255:t}function Yx(t){return t<0?0:t>1?1:t}function Zx(t){return"%"===t[t.length-1]?Xx(parseFloat(t)/100*255):Xx(parseInt(t))}function Vx(t){return"%"===t[t.length-1]?Yx(parseFloat(t)/100):Yx(parseFloat(t))}function Wx(t,n,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(n-t)*i*6:2*i<1?n:3*i<2?t+(n-t)*(2/3-i)*6:t}try{Ux={}.parseCSSColor=function(t){var n,i=t.replace(/ /g,"").toLowerCase();if(i in Bx)return Bx[i].slice();if("#"===i[0])return 4===i.length?(n=parseInt(i.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===i.length&&(n=parseInt(i.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var r=i.indexOf("("),e=i.indexOf(")");if(-1!==r&&e+1===i.length){var o=i.substr(0,r),s=i.substr(r+1,e-(r+1)).split(","),u=1;switch(o){case"rgba":if(4!==s.length)return null;u=Vx(s.pop());case"rgb":return 3!==s.length?null:[Zx(s[0]),Zx(s[1]),Zx(s[2]),u];case"hsla":if(4!==s.length)return null;u=Vx(s.pop());case"hsl":if(3!==s.length)return null;var a=(parseFloat(s[0])%360+360)%360/360,h=Vx(s[1]),f=Vx(s[2]),c=f<=.5?f*(h+1):f+h-f*h,l=2*f-c;return[Xx(255*Wx(l,c,a+1/3)),Xx(255*Wx(l,c,a)),Xx(255*Wx(l,c,a-1/3)),u];default:return null}}return null}}catch(t){}var $x=function(t,n,i,r){void 0===r&&(r=1),this.r=t,this.g=n,this.b=i,this.a=r};function Kx(t){return"object"==typeof t?["literal",t]:t}function Hx(t,n){var i=t.stops;if(!i)return function(t,n){var i=["get",t.property];if(void 0===t.default)return"string"===n.type?["string",i]:i;if("enum"===n.type)return["match",i,Object.keys(n.values),i,t.default];var r=["color"===n.type?"to-color":n.type,i,Kx(t.default)];return"array"===n.type&&r.splice(1,0,n.value,n.length||null),r}(t,n);var r=i&&"object"==typeof i[0][0],e=r||void 0!==t.property,o=r||!e;return i=i.map((function(t){return!e&&n.tokens&&"string"==typeof t[1]?[t[0],e_(t[1])]:[t[0],Kx(t[1])]})),r?function(t,n,i){for(var r={},e={},o=[],s=0;s<i.length;s++){var u=i[s],a=u[0].zoom;void 0===r[a]&&(r[a]={zoom:a,type:t.type,property:t.property,default:t.default},e[a]=[],o.push(a)),e[a].push([u[0].value,u[1]])}if("exponential"===r_({},n)){for(var h=[Jx(t),["linear"],["zoom"]],f=0,c=o;f<c.length;f+=1){var l=c[f];i_(h,l,t_(r[l],n,e[l]),!1)}return h}for(var v=["step",["zoom"]],p=0,d=o;p<d.length;p+=1){var y=d[p];i_(v,y,t_(r[y],n,e[y]),!0)}return n_(v),v}(t,n,i):o?function(t,n,i,r){void 0===r&&(r=["zoom"]);var e,o=r_(t,n),s=!1;if("interval"===o)e=["step",r],s=!0;else{if("exponential"!==o)throw new Error('Unknown zoom function type "'+o+'"');var u=void 0!==t.base?t.base:1;e=[Jx(t),1===u?["linear"]:["exponential",u],r]}for(var a=0,h=i;a<h.length;a+=1){var f=h[a];i_(e,f[0],f[1],s)}return n_(e),e}(t,n,i):t_(t,n,i)}function Jx(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Qx(t,n){var i,r,e=Kx((i=t.default,r=n.default,void 0!==i?i:void 0!==r?r:void 0));return void 0===e&&"resolvedImage"===n.type?"":e}function t_(t,n,i){var r=r_(t,n),e=["get",t.property];if("categorical"===r&&"boolean"==typeof i[0][0]){for(var o=["case"],s=0,u=i;s<u.length;s+=1){var a=u[s];o.push(["==",e,a[0]],a[1])}return o.push(Qx(t,n)),o}if("categorical"===r){for(var h=["match",e],f=0,c=i;f<c.length;f+=1){var l=c[f];i_(h,l[0],l[1],!1)}return h.push(Qx(t,n)),h}if("interval"===r){for(var v=["step",["number",e]],p=0,d=i;p<d.length;p+=1){var y=d[p];i_(v,y[0],y[1],!0)}return n_(v),void 0===t.default?v:["case",["==",["typeof",e],"number"],v,Kx(t.default)]}if("exponential"===r){for(var m=void 0!==t.base?t.base:1,w=[Jx(t),1===m?["linear"]:["exponential",m],["number",e]],g=0,b=i;g<b.length;g+=1){var x=b[g];i_(w,x[0],x[1],!1)}return void 0===t.default?w:["case",["==",["typeof",e],"number"],w,Kx(t.default)]}throw new Error("Unknown property function type "+r)}function n_(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function i_(t,n,i,r){t.length>3&&n===t[t.length-2]||(r&&2===t.length||t.push(n),t.push(i))}function r_(t,n){return t.type?t.type:n.expression.interpolated?"exponential":"interval"}function e_(t){for(var n=["concat"],i=/{([^{}]+)}/g,r=0,e=i.exec(t);null!==e;e=i.exec(t)){var o=t.slice(r,i.lastIndex-e[0].length);r=i.lastIndex,o.length>0&&n.push(o),n.push(["get",e[1]])}if(1===n.length)return t;if(r<t.length)n.push(t.slice(r));else if(2===n.length)return["to-string",n[1]];return n}$x.parse=function(t){if(t){if(t instanceof $x)return t;if("string"==typeof t){var n=Ux(t);if(n)return new $x(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}}},$x.prototype.toString=function(){var t=this.toArray(),n=t[0],i=t[1],r=t[2],e=t[3];return"rgba("+Math.round(n)+","+Math.round(i)+","+Math.round(r)+","+e+")"},$x.prototype.toArray=function(){var t=this,n=t.r,i=t.g,r=t.b,e=t.a;return 0===e?[0,0,0,0]:[255*n/e,255*i/e,255*r/e,e]},$x.black=new $x(0,0,0,1),$x.white=new $x(1,1,1,1),$x.transparent=new $x(0,0,0,0),$x.red=new $x(1,0,0,1),$x.blue=new $x(0,0,1,1);var o_=function(t){function n(n,i){t.call(this,i),this.message=i,this.key=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(Error),s_=function(t,n){void 0===n&&(n=[]),this.parent=t,this.bindings={};for(var i=0,r=n;i<r.length;i+=1){var e=r[i],o=e[0],s=e[1];this.bindings[o]=s}};s_.prototype.concat=function(t){return new s_(this,t)},s_.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},s_.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var u_={kind:"null"},a_={kind:"number"},h_={kind:"string"},f_={kind:"boolean"},c_={kind:"color"},l_={kind:"object"},v_={kind:"value"},p_={kind:"collator"},d_={kind:"formatted"},y_={kind:"resolvedImage"};function m_(t,n){return{kind:"array",itemType:t,N:n}}function w_(t){if("array"===t.kind){var n=w_(t.itemType);return"number"==typeof t.N?"array<"+n+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+n+">"}return t.kind}var g_=[u_,a_,h_,f_,c_,d_,l_,m_(v_),y_];function b_(t,n){if("error"===n.kind)return null;if("array"===t.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!b_(t.itemType,n.itemType))&&("number"!=typeof t.N||t.N===n.N))return null}else{if(t.kind===n.kind)return null;if("value"===t.kind)for(var i=0,r=g_;i<r.length;i+=1){if(!b_(r[i],n))return null}}return"Expected "+w_(t)+" but found "+w_(n)+" instead."}function x_(t,n){return n.some((function(n){return n.kind===t.kind}))}function __(t,n){return n.some((function(n){return"null"===n?null===t:"array"===n?Array.isArray(t):"object"===n?t&&!Array.isArray(t)&&"object"==typeof t:n===typeof t}))}var M_=function(t,n,i){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};M_.prototype.compare=function(t,n){return this.collator.compare(t,n)},M_.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var S_=function(t,n,i,r,e){this.text=t.normalize?t.normalize():t,this.image=n,this.scale=i,this.fontStack=r,this.textColor=e},O_=function(t){this.sections=t};O_.fromString=function(t){return new O_([new S_(t,null,null,null,null)])},O_.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},O_.factory=function(t){return t instanceof O_?t:O_.fromString(t)},O_.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},O_.prototype.serialize=function(){for(var t=["format"],n=0,i=this.sections;n<i.length;n+=1){var r=i[n];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var e={};r.fontStack&&(e["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(e["font-scale"]=r.scale),r.textColor&&(e["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(e)}}return t};var j_=function(t){this.name=t.name,this.available=t.available};function E_(t,n,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,n,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,n,i,r]:[t,n,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function T_(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof $x)return!0;if(t instanceof M_)return!0;if(t instanceof O_)return!0;if(t instanceof j_)return!0;if(Array.isArray(t)){for(var n=0,i=t;n<i.length;n+=1){if(!T_(i[n]))return!1}return!0}if("object"==typeof t){for(var r in t)if(!T_(t[r]))return!1;return!0}return!1}function P_(t){if(null===t)return u_;if("string"==typeof t)return h_;if("boolean"==typeof t)return f_;if("number"==typeof t)return a_;if(t instanceof $x)return c_;if(t instanceof M_)return p_;if(t instanceof O_)return d_;if(t instanceof j_)return y_;if(Array.isArray(t)){for(var n,i=t.length,r=0,e=t;r<e.length;r+=1){var o=P_(e[r]);if(n){if(n===o)continue;n=v_;break}n=o}return m_(n||v_,i)}return l_}function A_(t){var n=typeof t;return null===t?"":"string"===n||"number"===n||"boolean"===n?String(t):t instanceof $x||t instanceof O_||t instanceof j_?t.toString():JSON.stringify(t)}j_.prototype.toString=function(){return this.name},j_.fromString=function(t){return t?new j_({name:t,available:!1}):null},j_.prototype.serialize=function(){return["image",this.name]};var C_=function(t,n){this.type=t,this.value=n};C_.parse=function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!T_(t[1]))return n.error("invalid value");var i=t[1],r=P_(i),e=n.expectedType;return"array"!==r.kind||0!==r.N||!e||"array"!==e.kind||"number"==typeof e.N&&0!==e.N||(r=e),new C_(r,i)},C_.prototype.evaluate=function(){return this.value},C_.prototype.eachChild=function(){},C_.prototype.outputDefined=function(){return!0},C_.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof $x?["rgba"].concat(this.value.toArray()):this.value instanceof O_?this.value.serialize():this.value};var k_=function(t){this.name="ExpressionEvaluationError",this.message=t};k_.prototype.toJSON=function(){return this.message};var I_={string:h_,number:a_,boolean:f_,object:l_},N_=function(t,n){this.type=t,this.args=n};N_.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i,r=1,e=t[0];if("array"===e){var o,s;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in I_)||"object"===u)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=I_[u],r++}else o=v_;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],r++}i=m_(o,s)}else i=I_[e];for(var a=[];r<t.length;r++){var h=n.parse(t[r],r,v_);if(!h)return null;a.push(h)}return new N_(i,a)},N_.prototype.evaluate=function(t){for(var n=0;n<this.args.length;n++){var i=this.args[n].evaluate(t);if(!b_(this.type,P_(i)))return i;if(n===this.args.length-1)throw new k_("Expected value to be of type "+w_(this.type)+", but found "+w_(P_(i))+" instead.")}return null},N_.prototype.eachChild=function(t){this.args.forEach(t)},N_.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},N_.prototype.serialize=function(){var t=this.type,n=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){n.push(i.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&n.push(r)}}return n.concat(this.args.map((function(t){return t.serialize()})))};var z_=function(t){this.type=d_,this.sections=t};z_.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return n.error("First argument must be an image or text section.");for(var r=[],e=!1,o=1;o<=t.length-1;++o){var s=t[o];if(e&&"object"==typeof s&&!Array.isArray(s)){e=!1;var u=null;if(s["font-scale"]&&!(u=n.parse(s["font-scale"],1,a_)))return null;var a=null;if(s["text-font"]&&!(a=n.parse(s["text-font"],1,m_(h_))))return null;var h=null;if(s["text-color"]&&!(h=n.parse(s["text-color"],1,c_)))return null;var f=r[r.length-1];f.scale=u,f.font=a,f.textColor=h}else{var c=n.parse(t[o],1,v_);if(!c)return null;var l=c.type.kind;if("string"!==l&&"value"!==l&&"null"!==l&&"resolvedImage"!==l)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");e=!0,r.push({content:c,scale:null,font:null,textColor:null})}}return new z_(r)},z_.prototype.evaluate=function(t){return new O_(this.sections.map((function(n){var i=n.content.evaluate(t);return P_(i)===y_?new S_("",i,null,null,null):new S_(A_(i),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)})))},z_.prototype.eachChild=function(t){for(var n=0,i=this.sections;n<i.length;n+=1){var r=i[n];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},z_.prototype.outputDefined=function(){return!1},z_.prototype.serialize=function(){for(var t=["format"],n=0,i=this.sections;n<i.length;n+=1){var r=i[n];t.push(r.content.serialize());var e={};r.scale&&(e["font-scale"]=r.scale.serialize()),r.font&&(e["text-font"]=r.font.serialize()),r.textColor&&(e["text-color"]=r.textColor.serialize()),t.push(e)}return t};var L_=function(t){this.type=y_,this.input=t};L_.parse=function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,h_);return i?new L_(i):n.error("No image name provided.")},L_.prototype.evaluate=function(t){var n=this.input.evaluate(t),i=j_.fromString(n);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(n)>-1),i},L_.prototype.eachChild=function(t){t(this.input)},L_.prototype.outputDefined=function(){return!1},L_.prototype.serialize=function(){return["image",this.input.serialize()]};var R_={"to-boolean":f_,"to-color":c_,"to-number":a_,"to-string":h_},F_=function(t,n){this.type=t,this.args=n};F_.parse=function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return n.error("Expected one argument.");for(var r=R_[i],e=[],o=1;o<t.length;o++){var s=n.parse(t[o],o,v_);if(!s)return null;e.push(s)}return new F_(r,e)},F_.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var n,i,r=0,e=this.args;r<e.length;r+=1){if(i=null,(n=e[r].evaluate(t))instanceof $x)return n;if("string"==typeof n){var o=t.parseColor(n);if(o)return o}else if(Array.isArray(n)&&!(i=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":E_(n[0],n[1],n[2],n[3])))return new $x(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new k_(i||"Could not parse color from value '"+("string"==typeof n?n:String(JSON.stringify(n)))+"'")}if("number"===this.type.kind){for(var s=null,u=0,a=this.args;u<a.length;u+=1){if(null===(s=a[u].evaluate(t)))return 0;var h=Number(s);if(!isNaN(h))return h}throw new k_("Could not convert "+JSON.stringify(s)+" to number.")}return"formatted"===this.type.kind?O_.fromString(A_(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?j_.fromString(A_(this.args[0].evaluate(t))):A_(this.args[0].evaluate(t))},F_.prototype.eachChild=function(t){this.args.forEach(t)},F_.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},F_.prototype.serialize=function(){if("formatted"===this.type.kind)return new z_([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new L_(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(n){t.push(n.serialize())})),t};var G_=["Unknown","Point","LineString","Polygon"],D_=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};D_.prototype.id=function(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null},D_.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?G_[this.feature.type]:this.feature.type:null},D_.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},D_.prototype.canonicalID=function(){return this.canonical},D_.prototype.properties=function(){return this.feature&&this.feature.properties||{}},D_.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,n=this.featureDistanceData.scale,i=this.featureTileCoord,r=i.x,e=i.y,o=r*n-t[0],s=e*n-t[1];return this.featureDistanceData.bearing[0]*o+this.featureDistanceData.bearing[1]*s}return 0},D_.prototype.parseColor=function(t){var n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=$x.parse(t)),n};var U_=function(t,n,i,r){this.name=t,this.type=n,this._evaluate=i,this.args=r};U_.prototype.evaluate=function(t){return this._evaluate(t,this.args)},U_.prototype.eachChild=function(t){this.args.forEach(t)},U_.prototype.outputDefined=function(){return!1},U_.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},U_.parse=function(t,n){var i,r=t[0],e=U_.definitions[r];if(!e)return n.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(e)?e[0]:e.type,s=Array.isArray(e)?[[e[1],e[2]]]:e.overloads,u=s.filter((function(n){var i=n[0];return!Array.isArray(i)||i.length===t.length-1})),a=null,h=0,f=u;h<f.length;h+=1){var c=f[h],l=c[0],v=c[1];a=new cM(n.registry,n.path,null,n.scope);for(var p=[],d=!1,y=1;y<t.length;y++){var m=t[y],w=Array.isArray(l)?l[y-1]:l.type,g=a.parse(m,1+p.length,w);if(!g){d=!0;break}p.push(g)}if(!d)if(Array.isArray(l)&&l.length!==p.length)a.error("Expected "+l.length+" arguments, but found "+p.length+" instead.");else{for(var b=0;b<p.length;b++){var x=Array.isArray(l)?l[b]:l.type,_=p[b];a.concat(b+1).checkSubtype(x,_.type)}if(0===a.errors.length)return new U_(r,o,v,p)}}if(1===u.length)(i=n.errors).push.apply(i,a.errors);else{for(var M=(u.length?u:s).map((function(t){var n,i=t[0];return n=i,Array.isArray(n)?"("+n.map(w_).join(", ")+")":"("+w_(n.type)+"...)"})).join(" | "),S=[],O=1;O<t.length;O++){var j=n.parse(t[O],1+S.length);if(!j)return null;S.push(w_(j.type))}n.error("Expected arguments of type "+M+", but found ("+S.join(", ")+") instead.")}return null},U_.register=function(t,n){for(var i in U_.definitions=n,n)t[i]=U_};var q_=function(t,n,i){this.type=p_,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=n};q_.parse=function(t,n){if(2!==t.length)return n.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return n.error("Collator options argument must be an object.");var r=n.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,f_);if(!r)return null;var e=n.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,f_);if(!e)return null;var o=null;return i.locale&&!(o=n.parse(i.locale,1,h_))?null:new q_(r,e,o)},q_.prototype.evaluate=function(t){return new M_(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},q_.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},q_.prototype.outputDefined=function(){return!1},q_.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var B_=8192;function X_(t,n){t[0]=Math.min(t[0],n[0]),t[1]=Math.min(t[1],n[1]),t[2]=Math.max(t[2],n[0]),t[3]=Math.max(t[3],n[1])}function Y_(t,n){return!(t[0]<=n[0])&&(!(t[2]>=n[2])&&(!(t[1]<=n[1])&&!(t[3]>=n[3])))}function Z_(t,n){var i,r=(180+t[0])/360,e=(i=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360),o=Math.pow(2,n.z);return[Math.round(r*o*B_),Math.round(e*o*B_)]}function V_(t,n,i){var r=t[0]-n[0],e=t[1]-n[1],o=t[0]-i[0],s=t[1]-i[1];return r*s-o*e==0&&r*o<=0&&e*s<=0}function W_(t,n,i){return n[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-n[0])*(t[1]-n[1])/(i[1]-n[1])+n[0]}function $_(t,n){for(var i=!1,r=0,e=n.length;r<e;r++)for(var o=n[r],s=0,u=o.length;s<u-1;s++){if(V_(t,o[s],o[s+1]))return!1;W_(t,o[s],o[s+1])&&(i=!i)}return i}function K_(t,n){for(var i=0;i<n.length;i++)if($_(t,n[i]))return!0;return!1}function H_(t,n,i,r){var e=t[0]-i[0],o=t[1]-i[1],s=n[0]-i[0],u=n[1]-i[1],a=r[0]-i[0],h=r[1]-i[1],f=e*h-a*o,c=s*h-a*u;return f>0&&c<0||f<0&&c>0}function J_(t,n,i){for(var r=0,e=i;r<e.length;r+=1)for(var o=e[r],s=0;s<o.length-1;++s)if(u=t,a=n,h=o[s],f=o[s+1],c=void 0,l=void 0,v=void 0,p=void 0,v=[a[0]-u[0],a[1]-u[1]],p=[f[0]-h[0],f[1]-h[1]],0!=(c=p)[0]*(l=v)[1]-c[1]*l[0]&&H_(u,a,h,f)&&H_(h,f,u,a))return!0;var u,a,h,f,c,l,v,p;return!1}function Q_(t,n){for(var i=0;i<t.length;++i)if(!$_(t[i],n))return!1;for(var r=0;r<t.length-1;++r)if(J_(t[r],t[r+1],n))return!1;return!0}function tM(t,n){for(var i=0;i<n.length;i++)if(Q_(t,n[i]))return!0;return!1}function nM(t,n,i){for(var r=[],e=0;e<t.length;e++){for(var o=[],s=0;s<t[e].length;s++){var u=Z_(t[e][s],i);X_(n,u),o.push(u)}r.push(o)}return r}function iM(t,n,i){for(var r=[],e=0;e<t.length;e++){var o=nM(t[e],n,i);r.push(o)}return r}function rM(t,n,i,r){if(t[0]<i[0]||t[0]>i[2]){var e=.5*r,o=t[0]-i[0]>e?-r:i[0]-t[0]>e?r:0;0===o&&(o=t[0]-i[2]>e?-r:i[2]-t[0]>e?r:0),t[0]+=o}X_(n,t)}function eM(t,n,i,r){var e=Math.pow(2,r.z)*B_,o=[r.x*B_,r.y*B_],s=[];if(!t)return s;for(var u=0,a=t;u<a.length;u+=1)for(var h=0,f=a[u];h<f.length;h+=1){var c=f[h],l=[c.x+o[0],c.y+o[1]];rM(l,n,i,e),s.push(l)}return s}function oM(t,n,i,r){var e=Math.pow(2,r.z)*B_,o=[r.x*B_,r.y*B_],s=[];if(!t)return s;for(var u=0,a=t;u<a.length;u+=1){for(var h=[],f=0,c=a[u];f<c.length;f+=1){var l=c[f],v=[l.x+o[0],l.y+o[1]];X_(n,v),h.push(v)}s.push(h)}if(n[2]-n[0]<=e/2){!function(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}(n);for(var p=0,d=s;p<d.length;p+=1)for(var y=0,m=d[p];y<m.length;y+=1){rM(m[y],n,i,e)}}return s}var sM=function(t,n){this.type=f_,this.geojson=t,this.geometries=n};function uM(t){if(t instanceof U_){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof sM)return!1;var n=!0;return t.eachChild((function(t){n&&!uM(t)&&(n=!1)})),n}function aM(t){if(t instanceof U_&&"feature-state"===t.name)return!1;var n=!0;return t.eachChild((function(t){n&&!aM(t)&&(n=!1)})),n}function hM(t,n){if(t instanceof U_&&n.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!hM(t,n)&&(i=!1)})),i}sM.parse=function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(T_(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var e=i.features[r].geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new sM(i,i.features[r].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new sM(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new sM(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")},sM.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,n){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],e=t.canonicalID();if(!e)return!1;if("Polygon"===n.type){var o=nM(n.coordinates,r,e),s=eM(t.geometry(),i,r,e);if(!Y_(i,r))return!1;for(var u=0,a=s;u<a.length;u+=1)if(!$_(a[u],o))return!1}if("MultiPolygon"===n.type){var h=iM(n.coordinates,r,e),f=eM(t.geometry(),i,r,e);if(!Y_(i,r))return!1;for(var c=0,l=f;c<l.length;c+=1)if(!K_(l[c],h))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,n){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],e=t.canonicalID();if(!e)return!1;if("Polygon"===n.type){var o=nM(n.coordinates,r,e),s=oM(t.geometry(),i,r,e);if(!Y_(i,r))return!1;for(var u=0,a=s;u<a.length;u+=1)if(!Q_(a[u],o))return!1}if("MultiPolygon"===n.type){var h=iM(n.coordinates,r,e),f=oM(t.geometry(),i,r,e);if(!Y_(i,r))return!1;for(var c=0,l=f;c<l.length;c+=1)if(!tM(l[c],h))return!1}return!0}(t,this.geometries)}return!1},sM.prototype.eachChild=function(){},sM.prototype.outputDefined=function(){return!0},sM.prototype.serialize=function(){return["within",this.geojson]};var fM=function(t,n){this.type=n.type,this.name=t,this.boundExpression=n};fM.parse=function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var i=t[1];return n.scope.has(i)?new fM(i,n.scope.get(i)):n.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},fM.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},fM.prototype.eachChild=function(){},fM.prototype.outputDefined=function(){return!1},fM.prototype.serialize=function(){return["var",this.name]};var cM=function(t,n,i,r,e){void 0===n&&(n=[]),void 0===r&&(r=new s_),void 0===e&&(e=[]),this.registry=t,this.path=n,this.key=n.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=e,this.expectedType=i};function lM(t){if(t instanceof fM)return lM(t.boundExpression);if(t instanceof U_&&"error"===t.name)return!1;if(t instanceof q_)return!1;if(t instanceof sM)return!1;var n=t instanceof F_||t instanceof N_,i=!0;return t.eachChild((function(t){i=n?i&&lM(t):i&&t instanceof C_})),!!i&&(uM(t)&&hM(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}function vM(t,n){for(var i,r,e=t.length-1,o=0,s=e,u=0;o<=s;)if(i=t[u=Math.floor((o+s)/2)],r=t[u+1],i<=n){if(u===e||n<r)return u;o=u+1}else{if(!(i>n))throw new k_("Input is not a number.");s=u-1}return 0}cM.prototype.parse=function(t,n,i,r,e){return void 0===e&&(e={}),n?this.concat(n,i,r)._parse(t,e):this._parse(t,e)},cM.prototype._parse=function(t,n){function i(t,n,i){return"assert"===i?new N_(n,[t]):"coerce"===i?new F_(n,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var e=this.registry[r];if(e){var o=e.parse(t,this);if(!o)return null;if(this.expectedType){var s=this.expectedType,u=o.type;if("string"!==s.kind&&"number"!==s.kind&&"boolean"!==s.kind&&"object"!==s.kind&&"array"!==s.kind||"value"!==u.kind)if("color"!==s.kind&&"formatted"!==s.kind&&"resolvedImage"!==s.kind||"value"!==u.kind&&"string"!==u.kind){if(this.checkSubtype(s,u))return null}else o=i(o,s,n.typeAnnotation||"coerce");else o=i(o,s,n.typeAnnotation||"assert")}if(!(o instanceof C_)&&"resolvedImage"!==o.type.kind&&lM(o)){var a=new D_;try{o=new C_(o.type,o.evaluate(a))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},cM.prototype.concat=function(t,n,i){var r="number"==typeof t?this.path.concat(t):this.path,e=i?this.scope.concat(i):this.scope;return new cM(this.registry,r,n||null,e,this.errors)},cM.prototype.error=function(t){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var r=""+this.key+n.map((function(t){return"["+t+"]"})).join("");this.errors.push(new o_(r,t))},cM.prototype.checkSubtype=function(t,n){var i=b_(t,n);return i&&this.error(i),i};var pM=function(t,n,i){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(var r=0,e=i;r<e.length;r+=1){var o=e[r],s=o[0],u=o[1];this.labels.push(s),this.outputs.push(u)}};pM.parse=function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var i=n.parse(t[1],1,a_);if(!i)return null;var r=[],e=null;n.expectedType&&"value"!==n.expectedType.kind&&(e=n.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],u=t[o+1],a=o,h=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);var f=n.parse(u,h,e);if(!f)return null;e=e||f.type,r.push([s,f])}return new pM(e,i,r)},pM.prototype.evaluate=function(t){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=n[0])return i[0].evaluate(t);var e=n.length;return r>=n[e-1]?i[e-1].evaluate(t):i[vM(n,r)].evaluate(t)},pM.prototype.eachChild=function(t){t(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1){t(i[n])}},pM.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},pM.prototype.serialize=function(){for(var t=["step",this.input.serialize()],n=0;n<this.labels.length;n++)n>0&&t.push(this.labels[n]),t.push(this.outputs[n].serialize());return t};var dM=yM;function yM(t,n,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(r-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}function mM(t,n,i){return t*(1-i)+n*i}yM.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},yM.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},yM.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},yM.prototype.solveCurveX=function(t,n){var i,r,e,o,s;for(void 0===n&&(n=1e-6),e=t,s=0;s<8;s++){if(o=this.sampleCurveX(e)-t,Math.abs(o)<n)return e;var u=this.sampleCurveDerivativeX(e);if(Math.abs(u)<1e-6)break;e-=o/u}if((e=t)<(i=0))return i;if(e>(r=1))return r;for(;i<r;){if(o=this.sampleCurveX(e),Math.abs(o-t)<n)return e;t>o?i=e:r=e,e=.5*(r-i)+i}return e},yM.prototype.solve=function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))};var wM=Object.freeze({__proto__:null,number:mM,color:function(t,n,i){return new $x(mM(t.r,n.r,i),mM(t.g,n.g,i),mM(t.b,n.b,i),mM(t.a,n.a,i))},array:function(t,n,i){return t.map((function(t,r){return mM(t,n[r],i)}))}}),gM=.95047,bM=1.08883,xM=4/29,_M=6/29,MM=3*_M*_M,SM=Math.PI/180,OM=180/Math.PI;function jM(t){return t>.008856451679035631?Math.pow(t,1/3):t/MM+xM}function EM(t){return t>_M?t*t*t:MM*(t-xM)}function TM(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function PM(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function AM(t){var n=PM(t.r),i=PM(t.g),r=PM(t.b),e=jM((.4124564*n+.3575761*i+.1804375*r)/gM),o=jM((.2126729*n+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(e-o),b:200*(o-jM((.0193339*n+.119192*i+.9503041*r)/bM)),alpha:t.a}}function CM(t){var n=(t.l+16)/116,i=isNaN(t.a)?n:n+t.a/500,r=isNaN(t.b)?n:n-t.b/200;return n=1*EM(n),i=gM*EM(i),r=bM*EM(r),new $x(TM(3.2404542*i-1.5371385*n-.4985314*r),TM(-.969266*i+1.8760108*n+.041556*r),TM(.0556434*i-.2040259*n+1.0572252*r),t.alpha)}function kM(t,n,i){var r=n-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}var IM={forward:AM,reverse:CM,interpolate:function(t,n,i){return{l:mM(t.l,n.l,i),a:mM(t.a,n.a,i),b:mM(t.b,n.b,i),alpha:mM(t.alpha,n.alpha,i)}}},NM={forward:function(t){var n=AM(t),i=n.l,r=n.a,e=n.b,o=Math.atan2(e,r)*OM;return{h:o<0?o+360:o,c:Math.sqrt(r*r+e*e),l:i,alpha:t.a}},reverse:function(t){var n=t.h*SM,i=t.c;return CM({l:t.l,a:Math.cos(n)*i,b:Math.sin(n)*i,alpha:t.alpha})},interpolate:function(t,n,i){return{h:kM(t.h,n.h,i),c:mM(t.c,n.c,i),l:mM(t.l,n.l,i),alpha:mM(t.alpha,n.alpha,i)}}},zM=function(t,n,i,r,e){this.type=t,this.operator=n,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var o=0,s=e;o<s.length;o+=1){var u=s[o],a=u[0],h=u[1];this.labels.push(a),this.outputs.push(h)}};function LM(t,n,i,r){var e=r-i,o=t-i;return 0===e?0:1===n?o/e:(Math.pow(n,o)-1)/(Math.pow(n,e)-1)}zM.interpolationFactor=function(t,n,i,r){var e=0;if("exponential"===t.name)e=LM(n,t.base,i,r);else if("linear"===t.name)e=LM(n,1,i,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;e=new dM(o[0],o[1],o[2],o[3]).solve(LM(n,1,i,r))}return e},zM.parse=function(t,n){var i=t[0],r=t[1],e=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return n.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var s=r[1];if("number"!=typeof s)return n.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:s}}else{if("cubic-bezier"!==r[0])return n.error("Unknown interpolation type "+String(r[0]),1,0);var u=r.slice(1);if(4!==u.length||u.some((function(t){return"number"!=typeof t||t<0||t>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(e=n.parse(e,2,a_)))return null;var a=[],h=null;"interpolate-hcl"===i||"interpolate-lab"===i?h=c_:n.expectedType&&"value"!==n.expectedType.kind&&(h=n.expectedType);for(var f=0;f<o.length;f+=2){var c=o[f],l=o[f+1],v=f+3,p=f+4;if("number"!=typeof c)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(a.length&&a[a.length-1][0]>=c)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var d=n.parse(l,p,h);if(!d)return null;h=h||d.type,a.push([c,d])}return"number"===h.kind||"color"===h.kind||"array"===h.kind&&"number"===h.itemType.kind&&"number"==typeof h.N?new zM(h,i,r,e,a):n.error("Type "+w_(h)+" is not interpolatable.")},zM.prototype.evaluate=function(t){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=n[0])return i[0].evaluate(t);var e=n.length;if(r>=n[e-1])return i[e-1].evaluate(t);var o=vM(n,r),s=n[o],u=n[o+1],a=zM.interpolationFactor(this.interpolation,r,s,u),h=i[o].evaluate(t),f=i[o+1].evaluate(t);return"interpolate"===this.operator?wM[this.type.kind.toLowerCase()](h,f,a):"interpolate-hcl"===this.operator?NM.reverse(NM.interpolate(NM.forward(h),NM.forward(f),a)):IM.reverse(IM.interpolate(IM.forward(h),IM.forward(f),a))},zM.prototype.eachChild=function(t){t(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1){t(i[n])}},zM.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},zM.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var n=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)n.push(this.labels[i],this.outputs[i].serialize());return n};var RM=function(t,n){this.type=t,this.args=n};RM.parse=function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var i=null,r=n.expectedType;r&&"value"!==r.kind&&(i=r);for(var e=[],o=0,s=t.slice(1);o<s.length;o+=1){var u=s[o],a=n.parse(u,1+e.length,i,void 0,{typeAnnotation:"omit"});if(!a)return null;i=i||a.type,e.push(a)}var h=r&&e.some((function(t){return b_(r,t.type)}));return new RM(h?v_:i,e)},RM.prototype.evaluate=function(t){for(var n,i=null,r=0,e=0,o=this.args;e<o.length;e+=1){if(r++,(i=o[e].evaluate(t))&&i instanceof j_&&!i.available&&(n||(n=i),i=null,r===this.args.length))return n;if(null!==i)break}return i},RM.prototype.eachChild=function(t){this.args.forEach(t)},RM.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},RM.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(n){t.push(n.serialize())})),t};var FM=function(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n};FM.prototype.evaluate=function(t){return this.result.evaluate(t)},FM.prototype.eachChild=function(t){for(var n=0,i=this.bindings;n<i.length;n+=1){t(i[n][1])}t(this.result)},FM.parse=function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var e=t[r];if("string"!=typeof e)return n.error("Expected string, but found "+typeof e+" instead.",r);if(/[^a-zA-Z0-9_]/.test(e))return n.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=n.parse(t[r+1],r+1);if(!o)return null;i.push([e,o])}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,i);return s?new FM(i,s):null},FM.prototype.outputDefined=function(){return this.result.outputDefined()},FM.prototype.serialize=function(){for(var t=["let"],n=0,i=this.bindings;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];t.push(e,o.serialize())}return t.push(this.result.serialize()),t};var GM=function(t,n,i){this.type=t,this.index=n,this.input=i};GM.parse=function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,a_),r=n.parse(t[2],2,m_(n.expectedType||v_));if(!i||!r)return null;var e=r.type;return new GM(e.itemType,i,r)},GM.prototype.evaluate=function(t){var n=this.index.evaluate(t),i=this.input.evaluate(t);if(n<0)throw new k_("Array index out of bounds: "+n+" < 0.");if(n>=i.length)throw new k_("Array index out of bounds: "+n+" > "+(i.length-1)+".");if(n!==Math.floor(n))throw new k_("Array index must be an integer, but found "+n+" instead.");return i[n]},GM.prototype.eachChild=function(t){t(this.index),t(this.input)},GM.prototype.outputDefined=function(){return!1},GM.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var DM=function(t,n){this.type=f_,this.needle=t,this.haystack=n};DM.parse=function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,v_),r=n.parse(t[2],2,v_);return i&&r?x_(i.type,[f_,h_,a_,u_,v_])?new DM(i,r):n.error("Expected first argument to be of type boolean, string, number or null, but found "+w_(i.type)+" instead"):null},DM.prototype.evaluate=function(t){var n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(null==i)return!1;if(!__(n,["boolean","string","number","null"]))throw new k_("Expected first argument to be of type boolean, string, number or null, but found "+w_(P_(n))+" instead.");if(!__(i,["string","array"]))throw new k_("Expected second argument to be of type array or string, but found "+w_(P_(i))+" instead.");return i.indexOf(n)>=0},DM.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},DM.prototype.outputDefined=function(){return!0},DM.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var UM=function(t,n,i){this.type=a_,this.needle=t,this.haystack=n,this.fromIndex=i};UM.parse=function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,v_),r=n.parse(t[2],2,v_);if(!i||!r)return null;if(!x_(i.type,[f_,h_,a_,u_,v_]))return n.error("Expected first argument to be of type boolean, string, number or null, but found "+w_(i.type)+" instead");if(4===t.length){var e=n.parse(t[3],3,a_);return e?new UM(i,r,e):null}return new UM(i,r)},UM.prototype.evaluate=function(t){var n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!__(n,["boolean","string","number","null"]))throw new k_("Expected first argument to be of type boolean, string, number or null, but found "+w_(P_(n))+" instead.");if(!__(i,["string","array"]))throw new k_("Expected second argument to be of type array or string, but found "+w_(P_(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(n,r)}return i.indexOf(n)},UM.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},UM.prototype.outputDefined=function(){return!1},UM.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var qM=function(t,n,i,r,e,o){this.inputType=t,this.type=n,this.input=i,this.cases=r,this.outputs=e,this.otherwise=o};qM.parse=function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return n.error("Expected an even number of arguments.");var i,r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var e={},o=[],s=2;s<t.length-1;s+=2){var u=t[s],a=t[s+1];Array.isArray(u)||(u=[u]);var h=n.concat(s);if(0===u.length)return h.error("Expected at least one branch label.");for(var f=0,c=u;f<c.length;f+=1){var l=c[f];if("number"!=typeof l&&"string"!=typeof l)return h.error("Branch labels must be numbers or strings.");if("number"==typeof l&&Math.abs(l)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof l&&Math.floor(l)!==l)return h.error("Numeric branch labels must be integer values.");if(i){if(h.checkSubtype(i,P_(l)))return null}else i=P_(l);if(void 0!==e[String(l)])return h.error("Branch labels must be unique.");e[String(l)]=o.length}var v=n.parse(a,s,r);if(!v)return null;r=r||v.type,o.push(v)}var p=n.parse(t[1],1,v_);if(!p)return null;var d=n.parse(t[t.length-1],t.length-1,r);return d?"value"!==p.type.kind&&n.concat(1).checkSubtype(i,p.type)?null:new qM(i,r,p,e,o,d):null},qM.prototype.evaluate=function(t){var n=this.input.evaluate(t);return(P_(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)},qM.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},qM.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},qM.prototype.serialize=function(){for(var t=this,n=["match",this.input.serialize()],i=[],r={},e=0,o=Object.keys(this.cases).sort();e<o.length;e+=1){var s=o[e];void 0===(c=r[this.cases[s]])?(r[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[c][1].push(s)}for(var u=function(n){return"number"===t.inputType.kind?Number(n):n},a=0,h=i;a<h.length;a+=1){var f=h[a],c=f[0],l=f[1];1===l.length?n.push(u(l[0])):n.push(l.map(u)),n.push(this.outputs[outputIndex$1].serialize())}return n.push(this.otherwise.serialize()),n};var BM=function(t,n,i){this.type=t,this.branches=n,this.otherwise=i};BM.parse=function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var r=[],e=1;e<t.length-1;e+=2){var o=n.parse(t[e],e,f_);if(!o)return null;var s=n.parse(t[e+1],e+1,i);if(!s)return null;r.push([o,s]),i=i||s.type}var u=n.parse(t[t.length-1],t.length-1,i);return u?new BM(i,r,u):null},BM.prototype.evaluate=function(t){for(var n=0,i=this.branches;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];if(e.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},BM.prototype.eachChild=function(t){for(var n=0,i=this.branches;n<i.length;n+=1){var r=i[n],e=r[0],o=r[1];t(e),t(o)}t(this.otherwise)},BM.prototype.outputDefined=function(){return this.branches.every((function(t){return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()},BM.prototype.serialize=function(){var t=["case"];return this.eachChild((function(n){t.push(n.serialize())})),t};var XM=function(t,n,i,r){this.type=t,this.input=n,this.beginIndex=i,this.endIndex=r};function YM(t,n){return"=="===t||"!="===t?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function ZM(t,n,i,r){return 0===r.compare(n,i)}function VM(t,n,i){var r="=="!==t&&"!="!==t;return function(){function e(t,n,i){this.type=f_,this.lhs=t,this.rhs=n,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===n.type.kind}return e.parse=function(t,n){if(3!==t.length&&4!==t.length)return n.error("Expected two or three arguments.");var i=t[0],o=n.parse(t[1],1,v_);if(!o)return null;if(!YM(i,o.type))return n.concat(1).error('"'+i+"\" comparisons are not supported for type '"+w_(o.type)+"'.");var s=n.parse(t[2],2,v_);if(!s)return null;if(!YM(i,s.type))return n.concat(2).error('"'+i+"\" comparisons are not supported for type '"+w_(s.type)+"'.");if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return n.error("Cannot compare types '"+w_(o.type)+"' and '"+w_(s.type)+"'.");r&&("value"===o.type.kind&&"value"!==s.type.kind?o=new N_(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new N_(o.type,[s])));var u=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return n.error("Cannot use collator to compare non-string types.");if(!(u=n.parse(t[3],3,p_)))return null}return new e(o,s,u)},e.prototype.evaluate=function(e){var o=this.lhs.evaluate(e),s=this.rhs.evaluate(e);if(r&&this.hasUntypedArgument){var u=P_(o),a=P_(s);if(u.kind!==a.kind||"string"!==u.kind&&"number"!==u.kind)throw new k_('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+u.kind+", "+a.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var h=P_(o),f=P_(s);if("string"!==h.kind||"string"!==f.kind)return n(e,o,s)}return this.collator?i(e,o,s,this.collator.evaluate(e)):n(e,o,s)},e.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},e.prototype.outputDefined=function(){return!0},e.prototype.serialize=function(){var n=[t];return this.eachChild((function(t){n.push(t.serialize())})),n},e}()}XM.parse=function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1,v_),r=n.parse(t[2],2,a_);if(!i||!r)return null;if(!x_(i.type,[m_(v_),h_,v_]))return n.error("Expected first argument to be of type array or string, but found "+w_(i.type)+" instead");if(4===t.length){var e=n.parse(t[3],3,a_);return e?new XM(i.type,i,r,e):null}return new XM(i.type,i,r)},XM.prototype.evaluate=function(t){var n=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!__(n,["string","array"]))throw new k_("Expected first argument to be of type array or string, but found "+w_(P_(n))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return n.slice(i,r)}return n.slice(i)},XM.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},XM.prototype.outputDefined=function(){return!1},XM.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var WM=VM("==",(function(t,n,i){return n===i}),ZM),$M=VM("!=",(function(t,n,i){return n!==i}),(function(t,n,i,r){return!ZM(0,n,i,r)})),KM=VM("<",(function(t,n,i){return n<i}),(function(t,n,i,r){return r.compare(n,i)<0})),HM=VM(">",(function(t,n,i){return n>i}),(function(t,n,i,r){return r.compare(n,i)>0})),JM=VM("<=",(function(t,n,i){return n<=i}),(function(t,n,i,r){return r.compare(n,i)<=0})),QM=VM(">=",(function(t,n,i){return n>=i}),(function(t,n,i,r){return r.compare(n,i)>=0})),tS=function(t,n,i,r,e){this.type=h_,this.number=t,this.locale=n,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=e};tS.parse=function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,a_);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return n.error("NumberFormat options argument must be an object.");var e=null;if(r.locale&&!(e=n.parse(r.locale,1,h_)))return null;var o=null;if(r.currency&&!(o=n.parse(r.currency,1,h_)))return null;var s=null;if(r["min-fraction-digits"]&&!(s=n.parse(r["min-fraction-digits"],1,a_)))return null;var u=null;return r["max-fraction-digits"]&&!(u=n.parse(r["max-fraction-digits"],1,a_))?null:new tS(i,e,o,s,u)},tS.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},tS.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},tS.prototype.outputDefined=function(){return!1},tS.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var nS=function(t){this.type=a_,this.input=t};nS.parse=function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=n.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?n.error("Expected argument of type string or array, but found "+w_(i.type)+" instead."):new nS(i):null},nS.prototype.evaluate=function(t){var n=this.input.evaluate(t);if("string"==typeof n)return n.length;if(Array.isArray(n))return n.length;throw new k_("Expected value to be of type string or array, but found "+w_(P_(n))+" instead.")},nS.prototype.eachChild=function(t){t(this.input)},nS.prototype.outputDefined=function(){return!1},nS.prototype.serialize=function(){var t=["length"];return this.eachChild((function(n){t.push(n.serialize())})),t};var iS={"==":WM,"!=":$M,">":HM,"<":KM,">=":QM,"<=":JM,array:N_,at:GM,boolean:N_,case:BM,coalesce:RM,collator:q_,format:z_,image:L_,in:DM,"index-of":UM,interpolate:zM,"interpolate-hcl":zM,"interpolate-lab":zM,length:nS,let:FM,literal:C_,match:qM,number:N_,"number-format":tS,object:N_,slice:XM,step:pM,string:N_,"to-boolean":F_,"to-color":F_,"to-number":F_,"to-string":F_,var:fM,within:sM};function rS(t,n){var i=n[0],r=n[1],e=n[2],o=n[3];i=i.evaluate(t),r=r.evaluate(t),e=e.evaluate(t);var s=o?o.evaluate(t):1,u=E_(i,r,e,s);if(u)throw new k_(u);return new $x(i/255*s,r/255*s,e/255*s,s)}function eS(t,n){return t in n}function oS(t,n){var i=n[t];return void 0===i?null:i}function sS(t){return{type:t}}function uS(t){return{result:"success",value:t}}function aS(t){return{result:"error",value:t}}function hS(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}U_.register(iS,{error:[{kind:"error"},[h_],function(t,n){var i=n[0];throw new k_(i.evaluate(t))}],typeof:[h_,[v_],function(t,n){return w_(P_(n[0].evaluate(t)))}],"to-rgba":[m_(a_,4),[c_],function(t,n){return n[0].evaluate(t).toArray()}],rgb:[c_,[a_,a_,a_],rS],rgba:[c_,[a_,a_,a_,a_],rS],has:{type:f_,overloads:[[[h_],function(t,n){return eS(n[0].evaluate(t),t.properties())}],[[h_,l_],function(t,n){var i=n[0],r=n[1];return eS(i.evaluate(t),r.evaluate(t))}]]},get:{type:v_,overloads:[[[h_],function(t,n){return oS(n[0].evaluate(t),t.properties())}],[[h_,l_],function(t,n){var i=n[0],r=n[1];return oS(i.evaluate(t),r.evaluate(t))}]]},"feature-state":[v_,[h_],function(t,n){return oS(n[0].evaluate(t),t.featureState||{})}],properties:[l_,[],function(t){return t.properties()}],"geometry-type":[h_,[],function(t){return t.geometryType()}],id:[v_,[],function(t){return t.id()}],zoom:[a_,[],function(t){return t.globals.zoom}],pitch:[a_,[],function(t){return t.globals.pitch||0}],"distance-from-center":[a_,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[a_,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[a_,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[a_,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[v_,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[a_,sS(a_),function(t,n){for(var i=0,r=0,e=n;r<e.length;r+=1){i+=e[r].evaluate(t)}return i}],"*":[a_,sS(a_),function(t,n){for(var i=1,r=0,e=n;r<e.length;r+=1){i*=e[r].evaluate(t)}return i}],"-":{type:a_,overloads:[[[a_,a_],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)-r.evaluate(t)}],[[a_],function(t,n){return-n[0].evaluate(t)}]]},"/":[a_,[a_,a_],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)/r.evaluate(t)}],"%":[a_,[a_,a_],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)%r.evaluate(t)}],ln2:[a_,[],function(){return Math.LN2}],pi:[a_,[],function(){return Math.PI}],e:[a_,[],function(){return Math.E}],"^":[a_,[a_,a_],function(t,n){var i=n[0],r=n[1];return Math.pow(i.evaluate(t),r.evaluate(t))}],sqrt:[a_,[a_],function(t,n){var i=n[0];return Math.sqrt(i.evaluate(t))}],log10:[a_,[a_],function(t,n){var i=n[0];return Math.log(i.evaluate(t))/Math.LN10}],ln:[a_,[a_],function(t,n){var i=n[0];return Math.log(i.evaluate(t))}],log2:[a_,[a_],function(t,n){var i=n[0];return Math.log(i.evaluate(t))/Math.LN2}],sin:[a_,[a_],function(t,n){var i=n[0];return Math.sin(i.evaluate(t))}],cos:[a_,[a_],function(t,n){var i=n[0];return Math.cos(i.evaluate(t))}],tan:[a_,[a_],function(t,n){var i=n[0];return Math.tan(i.evaluate(t))}],asin:[a_,[a_],function(t,n){var i=n[0];return Math.asin(i.evaluate(t))}],acos:[a_,[a_],function(t,n){var i=n[0];return Math.acos(i.evaluate(t))}],atan:[a_,[a_],function(t,n){var i=n[0];return Math.atan(i.evaluate(t))}],min:[a_,sS(a_),function(t,n){return Math.min.apply(Math,n.map((function(n){return n.evaluate(t)})))}],max:[a_,sS(a_),function(t,n){return Math.max.apply(Math,n.map((function(n){return n.evaluate(t)})))}],abs:[a_,[a_],function(t,n){var i=n[0];return Math.abs(i.evaluate(t))}],round:[a_,[a_],function(t,n){var i=n[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[a_,[a_],function(t,n){var i=n[0];return Math.floor(i.evaluate(t))}],ceil:[a_,[a_],function(t,n){var i=n[0];return Math.ceil(i.evaluate(t))}],"filter-==":[f_,[h_,v_],function(t,n){var i=n[0],r=n[1];return t.properties()[i.value]===r.value}],"filter-id-==":[f_,[v_],function(t,n){var i=n[0];return t.id()===i.value}],"filter-type-==":[f_,[h_],function(t,n){var i=n[0];return t.geometryType()===i.value}],"filter-<":[f_,[h_,v_],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return typeof e==typeof o&&e<o}],"filter-id-<":[f_,[v_],function(t,n){var i=n[0],r=t.id(),e=i.value;return typeof r==typeof e&&r<e}],"filter->":[f_,[h_,v_],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return typeof e==typeof o&&e>o}],"filter-id->":[f_,[v_],function(t,n){var i=n[0],r=t.id(),e=i.value;return typeof r==typeof e&&r>e}],"filter-<=":[f_,[h_,v_],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return typeof e==typeof o&&e<=o}],"filter-id-<=":[f_,[v_],function(t,n){var i=n[0],r=t.id(),e=i.value;return typeof r==typeof e&&r<=e}],"filter->=":[f_,[h_,v_],function(t,n){var i=n[0],r=n[1],e=t.properties()[i.value],o=r.value;return typeof e==typeof o&&e>=o}],"filter-id->=":[f_,[v_],function(t,n){var i=n[0],r=t.id(),e=i.value;return typeof r==typeof e&&r>=e}],"filter-has":[f_,[v_],function(t,n){return n[0].value in t.properties()}],"filter-has-id":[f_,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[f_,[m_(h_)],function(t,n){return n[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[f_,[m_(v_)],function(t,n){return n[0].value.indexOf(t.id())>=0}],"filter-in-small":[f_,[h_,m_(v_)],function(t,n){var i=n[0];return n[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[f_,[h_,m_(v_)],function(t,n){var i=n[0],r=n[1];return function(t,n,i,r){for(;i<=r;){var e=i+r>>1;if(n[e]===t)return!0;n[e]>t?r=e-1:i=e+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:f_,overloads:[[[f_,f_],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)&&r.evaluate(t)}],[sS(f_),function(t,n){for(var i=0,r=n;i<r.length;i+=1){if(!r[i].evaluate(t))return!1}return!0}]]},any:{type:f_,overloads:[[[f_,f_],function(t,n){var i=n[0],r=n[1];return i.evaluate(t)||r.evaluate(t)}],[sS(f_),function(t,n){for(var i=0,r=n;i<r.length;i+=1){if(r[i].evaluate(t))return!0}return!1}]]},"!":[f_,[f_],function(t,n){return!n[0].evaluate(t)}],"is-supported-script":[f_,[h_],function(t,n){var i=n[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(i.evaluate(t))}],upcase:[h_,[h_],function(t,n){return n[0].evaluate(t).toUpperCase()}],downcase:[h_,[h_],function(t,n){return n[0].evaluate(t).toLowerCase()}],concat:[h_,sS(v_),function(t,n){return n.map((function(n){return A_(n.evaluate(t))})).join("")}],"resolved-locale":[h_,[p_],function(t,n){return n[0].evaluate(t).resolvedLocale()}]});var fS=function(t,n){this.expression=t,this._warningHistory={},this._evaluator=new D_,this._defaultValue=n?function(t){return"color"===t.type&&hS(t.default)?new $x(0,0,0,0):"color"===t.type?$x.parse(t.default)||null:void 0===t.default?null:t.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null};function cS(t,n){var i=new cM(iS,[],n?function(t){var n={color:c_,string:h_,number:a_,enum:h_,boolean:f_,formatted:d_,resolvedImage:y_};if("array"===t.type)return m_(n[t.value]||v_,t.length);return n[t.type]}(n):void 0),r=i.parse(t,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return r?uS(new fS(r,n)):aS(i.errors)}fS.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o,s,u){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=r||null,this._evaluator.availableImages=e||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=u||null,this.expression.evaluate(this._evaluator)},fS.prototype.evaluate=function(t,n,i,r,e,o,s,u){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=e||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=u||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new k_("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var lS=function(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!aM(n.expression)};lS.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,r,e,o)},lS.prototype.evaluate=function(t,n,i,r,e,o){return this._styleExpression.evaluate(t,n,i,r,e,o)};var vS=function(t,n,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=n,this.isStateDependent="camera"!==t&&!aM(n.expression),this.interpolationType=r};function pS(t,n){if("error"===(t=cS(t,n)).result)return t;var i=t.value.expression,r=uM(i);if(!r&&!function(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}(n))return aS([new o_("","data expressions not supported")]);var e=hM(i,["zoom","pitch","distance-from-center"]);if(!e&&!function(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}(n))return aS([new o_("","zoom expressions not supported")]);var o=dS(i);if(!o&&!e)return aS([new o_("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof o_)return aS([o]);if(o instanceof zM&&!function(t){return!!t.expression&&t.expression.interpolated}(n))return aS([new o_("",'"interpolate" expressions cannot be used with this property')]);if(!o)return uS(new lS(r?"constant":"source",t.value));var s=o instanceof zM?o.interpolation:void 0;return uS(new vS(r?"camera":"composite",t.value,o.labels,s))}function dS(t){var n=null;if(t instanceof FM)n=dS(t.result);else if(t instanceof RM)for(var i=0,r=t.args;i<r.length;i+=1){var e=r[i];if(n=dS(e))break}else(t instanceof pM||t instanceof zM)&&t.input instanceof U_&&"zoom"===t.input.name&&(n=t);return n instanceof o_||t.eachChild((function(t){var i=dS(t);i instanceof o_?n=i:!n&&i?n=new o_("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new o_("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}function yS(t){if(Array.isArray(t))return t.map(yS);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var n={};for(var i in t)n[i]=yS(t[i]);return n}return function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}(t)}vS.prototype.evaluateWithoutErrorHandling=function(t,n,i,r,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,r,e,o)},vS.prototype.evaluate=function(t,n,i,r,e,o){return this._styleExpression.evaluate(t,n,i,r,e,o)},vS.prototype.interpolationFactor=function(t,n,i){return this.interpolationType?zM.interpolationFactor(this.interpolationType,t,n,i):0};var mS={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function wS(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var n=0,i=t.slice(1);n<i.length;n+=1){var r=i[n];if(!wS(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function gS(t,n){if(void 0===n&&(n="fill"),null==t)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};wS(t)||(t=jS(t));var i=t,r=!0;try{r=function(t){if(!_S(t))return t;var n=yS(t);return xS(n),n=bS(n)}(i)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(i,null,2)+"\n        ")}var e=mS["filter_"+n],o=cS(r,e),s=null;if("error"===o.result)throw new Error(o.value.map((function(t){return t.key+": "+t.message})).join(", "));s=function(t,n,i){return o.value.evaluate(t,n,{},i)};var u=null,a=null;if(r!==i){var h=cS(i,e);if("error"===h.result)throw new Error(h.value.map((function(t){return t.key+": "+t.message})).join(", "));u=function(t,n,i,r,e){return h.value.evaluate(t,n,{},i,void 0,void 0,r,e)},a=!uM(h.value.expression)}return{filter:s,dynamicFilter:u||void 0,needGeometry:OS(r),needFeature:!!a}}function bS(t){if(!Array.isArray(t))return t;var n=function(t){if(MS.has(t[0]))for(var n=1;n<t.length;n++){if(_S(t[n]))return!0}return t}(t);return!0===n?n:n.map((function(t){return bS(t)}))}function xS(t){var n=!1,i=[];if("case"===t[0]){for(var r=1;r<t.length-1;r+=2)n=n||_S(t[r]),i.push(t[r+1]);i.push(t[t.length-1])}else if("match"===t[0]){n=n||_S(t[1]);for(var e=2;e<t.length-1;e+=2)i.push(t[e+1]);i.push(t[t.length-1])}else if("step"===t[0]){n=n||_S(t[1]);for(var o=1;o<t.length-1;o+=2)i.push(t[o+1])}n&&(t.length=0,t.push.apply(t,["any"].concat(i)));for(var s=1;s<t.length;s++)xS(t[s])}function _S(t){if(!Array.isArray(t))return!1;if("pitch"===(n=t[0])||"distance-from-center"===n)return!0;for(var n,i=1;i<t.length;i++){if(_S(t[i]))return!0}return!1}var MS=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function SS(t,n){return t<n?-1:t>n?1:0}function OS(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var n=1;n<t.length;n++)if(OS(t[n]))return!0;return!1}function jS(t){if(!t)return!0;var n,i=t[0];return t.length<=1?"any"!==i:"=="===i?ES(t[1],t[2],"=="):"!="===i?AS(ES(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?ES(t[1],t[2],i):"any"===i?(n=t.slice(1),["any"].concat(n.map(jS))):"all"===i?["all"].concat(t.slice(1).map(jS)):"none"===i?["all"].concat(t.slice(1).map(jS).map(AS)):"in"===i?TS(t[1],t.slice(2)):"!in"===i?AS(TS(t[1],t.slice(2))):"has"===i?PS(t[1]):"!has"===i?AS(PS(t[1])):"within"!==i||t}function ES(t,n,i){switch(t){case"$type":return["filter-type-"+i,n];case"$id":return["filter-id-"+i,n];default:return["filter-"+i,t,n]}}function TS(t,n){if(0===n.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some((function(t){return typeof t!=typeof n[0]}))?["filter-in-large",t,["literal",n.sort(SS)]]:["filter-in-small",t,["literal",n]]}}function PS(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function AS(t){return["!",t]}var CS=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function kS(t,n){var i={};for(var r in t)"ref"!==r&&(i[r]=t[r]);return CS.forEach((function(t){t in n&&(i[t]=n[t])})),i}var IS={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},NS=" ",zS=/(italic|oblique)$/i,LS={},RS=function(t,n,i){var r=LS[t];if(!r){Array.isArray(t)||(t=[t]);for(var e=400,o="normal",s=[],u=0,a=t.length;u<a;++u){var h=t[u].split(" "),f=h[h.length-1].toLowerCase();for(var c in"normal"==f||"italic"==f||"oblique"==f?(o=f,h.pop(),f=h[h.length-1].toLowerCase()):zS.test(f)&&(f=f.replace(zS,""),o=h[h.length-1].replace(f,"")),IS){var l=h.length>1?h[h.length-2].toLowerCase():"";if(f==c||f==c.replace("-","")||l+"-"+f==c){e=IS[c],h.pop(),l&&c.startsWith(l)&&h.pop();break}}"number"==typeof f&&(e=f);var v=h.join(NS).replace("Klokantech Noto Sans","Noto Sans");-1!==v.indexOf(NS)&&(v='"'+v+'"'),s.push(v)}r=LS[t]=[o,e,s]}return r[0]+NS+r[1]+NS+n+"px"+(i?"/"+i:"")+NS+r[2]},FS="https://api.mapbox.com";function GS(t){var n="mapbox://";return 0!==t.indexOf(n)?"":t.slice(n.length)}function DS(t,n){var i=GS(t);if(!i)return decodeURI(new URL(t,location.href).href);var r="styles/";if(0!==i.indexOf(r))throw new Error("unexpected style url: "+t);var e=i.slice(r.length);return FS+"/styles/v1/"+e+"?&access_token="+n}function US(t,n,i,r){var e=new URL(t,r),o=GS(t);return o?"https://{a-d}.tiles.mapbox.com/v4/"+o+"/{z}/{x}/{y}.vector.pbf?access_token="+n:n?(e.searchParams.set(i,n),decodeURI(e.href)):decodeURI(e.href)}function qS(t){return t*Math.PI/180}var BS=function(){for(var t=[],n=78271.51696402048;t.length<=24;n/=2)t.push(n);return t}();function XS(t,n){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,n);var i=document.createElement("canvas");return i.width=t,i.height=n,i}var YS={};function ZS(t,n,i){if(void 0===i&&(i={}),n in YS)return YS[n];var r=i.transformRequest&&i.transformRequest(n,t)||new Request(n);r.headers.get("Accept")||r.headers.set("Accept","application/json");var e=fetch(r).then((function(t){return delete YS[n],t.ok?t.json():Promise.reject(new Error("Error fetching source "+n))})).catch((function(t){return delete YS[n],Promise.reject(new Error("Error fetching source "+n))}));return YS[n]=e,e}function VS(t,n){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return ZS("Style",t=DS(t,n.accessToken),n);try{var i=JSON.parse(t);return Promise.resolve(i)}catch(t){return Promise.reject(t)}}var WS={};function $S(t,n,i){void 0===i&&(i={});var r=[n,JSON.stringify(t)].toString(),e=WS[r];if(!e||i.transformRequest){var o=t.url;if(o){var s=US(o,i.accessToken,i.accessTokenParam||"access_token",n||location.href);e=o.startsWith("mapbox://")?Promise.resolve(P({},t,{url:void 0,tiles:s})):ZS("Source",s,i).then((function(t){for(var n=0,r=t.tiles.length;n<r;++n){var e=t.tiles[n];if(i.transformRequest){var o=i.transformRequest(s,"Source");o&&(s=o.url)}var u=US(e,i.accessToken,i.accessTokenParam||"access_token",s);if(i.transformRequest){var a=i.transformRequest(u,"Tiles");a instanceof Request&&(u=decodeURI(a.url))}t.tiles[n]=u}return Promise.resolve(t)}))}else t=P({},t,{tiles:t.tiles.map((function(t){return US(t,i.accessToken,i.accessTokenParam||"access_token",n||location.href)}))}),e=Promise.resolve(P({},t));WS[r]=e}return e}var KS,HS=Array(256).join(" ");function JS(t,n){if(n>=.05){for(var i="",r=t.split("\n"),e=HS.slice(0,Math.round(n/.1)),o=0,s=r.length;o<s;++o)o>0&&(i+="\n"),i+=r[o].split("").join(e);return i}return t}function QS(){return KS||(KS=XS(1,1).getContext("2d")),KS}function tO(t,n){return QS().measureText(t).width+(t.length-1)*n}var nO={};function iO(t,n,i,r){if(-1!==t.indexOf("\n")){for(var e=t.split("\n"),o=[],s=0,u=e.length;s<u;++s)o.push(iO(e[s],n,i,r));return o.join("\n")}var a=i+","+n+","+t+","+r,h=nO[a];if(!h){var f=t.split(" ");if(f.length>1){var c=QS();c.font=n;for(var l=c.measureText("M").width*i,v="",p=[],d=0,y=f.length;d<y;++d){var m=f[d],w=v+(v?" ":"")+m;tO(w,r)<=l?v=w:(v&&p.push(v),v=m)}v&&p.push(v);for(var g=0,b=p.length;g<b&&b>1;++g){var x=p[g];if(tO(x,r)<.35*l){var _=g>0?tO(p[g-1],r):1/0,M=g<b-1?tO(p[g+1],r):1/0;p.splice(g,1),b-=1,_<M?(p[g-1]+=" "+x,g-=1):p[g]=x+" "+p[g]}}for(var S=0,O=p.length-1;S<O;++S){var j=p[S],E=p[S+1];if(tO(j,r)>.7*l&&tO(E,r)<.6*l){var T=j.split(" "),P=T.pop();tO(P,r)<.2*l&&(p[S]=T.join(" "),p[S+1]=P+" "+E),O-=1}}h=p.join("\n")}else h=t;h=JS(h,r),nO[a]=h}return h}var rO,eO=/font-family: ?([^;]*);/,oO=/("|')/g;function sO(t){if(!rO){rO={};for(var n=document.styleSheets,i=0,r=n.length;i<r;++i){var e=n[i];try{var o=e.rules||e.cssRules;if(o)for(var s=0,u=o.length;s<u;++s){var a=o[s];if(5==a.type){var h=a.cssText.match(eO);rO[h[1].replace(oO,"")]=!0}}}catch(t){}}}return t in rO}var uO={};function aO(t){var n=t.toString();if(n in uO)return uO[n];for(var i=[],r=0,e=t.length;r<e;++r){t[r]=t[r].replace("Arial Unicode MS","Arial");var o=t[r],s=RS(o,1);$s(s);var u=s.split(" ");i.push([u.slice(3).join(" ").replace(/"/g,""),u[1],u[0]])}for(var a=0,h=i.length;a<h;++a){var f=i[a],c=f[0];if(!sO(c)&&100!==Zs.get(f[2]+"\n"+f[1]+" \n"+c)){var l="https://fonts.googleapis.com/css?family="+c.replace(/ /g,"+")+":"+f[1]+f[2];if(!document.querySelector('link[href="'+l+'"]')){var v=document.createElement("link");v.href=l,v.rel="stylesheet",document.head.appendChild(v)}}}return uO[n]=t,t}var hO,fO,cO={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},lO={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},vO={},pO={zoom:0};function dO(t,n,i,r,e,o,s){var u=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[u]||(o[u]={});var a,h=o[u];if(!h[i]){var f=(t[n]||vO)[i],c=mS[n+"_"+t.type][i];void 0===f&&(f=c.default);var l=(a=f,Array.isArray(a)&&a.length>0&&"string"==typeof a[0]&&a[0]in iS);if(!l&&hS(f)&&(f=Hx(f,c),l=!0),l){var v=function(t,n){var i=pS(t,n);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value}(f,c);h[i]=v.evaluate.bind(v)}else"color"==c.type&&(f=$x.parse(f)),h[i]=function(){return f}}return pO.zoom=r,h[i](pO,e,s)}function yO(t,n,i,r){return dO(t,"layout","icon-allow-overlap",n,i,r)?dO(t,"layout","icon-ignore-placement",n,i,r)?"none":"obstacle":"declutter"}function mO(t,n,i,r,e){return e||console.warn("No filterCache provided to evaluateFilter()"),t in e||(e[t]=gS(n).filter),pO.zoom=r,e[t](pO,i)}var wO=!1;function gO(t,n){if(t){if(!wO&&(0===t.a||0===n))return;var i=t.a;return n=void 0===n?1:n,0===i?"transparent":"rgba("+Math.round(255*t.r/i)+","+Math.round(255*t.g/i)+","+Math.round(255*t.b/i)+","+i*n+")"}return t}var bO=/^([^]*)\{(.*)\}([^]*)$/;function xO(t,n){var i;do{if(i=t.match(bO)){var r=n[i[2]]||"";t=i[1]+r+i[3]}}while(i);return t}var _O=!1;function MO(t,n,i,r,e,o,s){if(void 0===r&&(r=BS),void 0===e&&(e=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),"string"==typeof n&&(n=JSON.parse(n)),8!=n.version)throw new Error("glStyle version 8 required.");var u,a;if(o)if("undefined"!=typeof Image){var h=new Image;h.crossOrigin="anonymous",h.onload=function(){u=h,a=[h.width,h.height],t.changed(),h.onload=null},h.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var f=self;f.postMessage({action:"loadImage",src:o}),f.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===o&&(u=t.data.image,a=[u.width,u.height])}))}for(var c,l=function(t){t=t.slice();for(var n=Object.create(null),i=0;i<t.length;i++)n[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=kS(t[r],n[t[r].ref]));return t}(n.layers),v={},p=[],d={},y={},m={},w={},g=0,b=l.length;g<b;++g){var x=l[g],_=x.id;if("string"==typeof i&&x.source==i||-1!==i.indexOf(_)){var M=x["source-layer"];if(c){if(x.source!==c)throw new Error('Layer "'+_+'" does not use source "'+c)}else{c=x.source;var S=n.sources[c];if(!S)throw new Error('Source "'+c+'" is not defined');var O=S.type;if("vector"!==O&&"geojson"!==O)throw new Error('Source "'+c+'" is not of type "vector" or "geojson", but "'+O+'"')}var j=v[M];j||(j=[],v[M]=j),j.push({layer:x,index:g}),p.push(_)}}var E=new Uv,T=new Cv,P=[],A=function(n,i){var o=n.getProperties(),h=v[o.layer];if(h){var f=r.indexOf(i);-1==f&&(f=function(t,n){for(var i=0,r=n.length;i<r;++i)if(n[i]<t&&i+1<r){var e=n[i]/n[i+1];return i+Math.log(n[i]/t)/Math.log(e)}return r-1}(i,r));for(var c,l=cO[n.getGeometry().getType()],p={properties:o,type:l},g=t.get("mapbox-featurestate")[n.getId()],b=-1,x=0,_=h.length;x<_;++x){var M=h[x],S=M.layer,O=S.id,j=S.layout||vO,A=S.paint||vO;if(!("none"===j.visibility||"minzoom"in S&&f<S.minzoom||"maxzoom"in S&&f>=S.maxzoom)){var C=S.filter;if(!C||mO(O,C,p,f,w)){c=S;var k=void 0,I=void 0,N=void 0,z=void 0,L=void 0,R=void 0,F=M.index;if(3==l&&("fill"==S.type||"fill-extrusion"==S.type))if(I=dO(S,"paint",S.type+"-opacity",f,p,m,g),S.type+"-pattern"in A){var G=dO(S,"paint",S.type+"-pattern",f,p,m,g);if(G){var D="string"==typeof G?xO(G,o):G.toString();if(u&&e&&e[D]){++b,(R=P[b])&&R.getFill()&&!R.getStroke()&&!R.getText()||(R=new Wv({fill:new Cv}),P[b]=R),N=R.getFill(),R.setZIndex(F);var U=D+"."+I,q=y[U];if(!q){var B=e[D],X=XS(B.width,B.height),Y=X.getContext("2d");Y.globalAlpha=I,Y.drawImage(u,B.x,B.y,B.width,B.height,0,0,B.width,B.height),q=Y.createPattern(X,"repeat"),y[U]=q}N.setColor(q)}}}else k=gO(dO(S,"paint",S.type+"-color",f,p,m,g),I),S.type+"-outline-color"in A&&(L=gO(dO(S,"paint",S.type+"-outline-color",f,p,m,g),I)),L||(L=k),(k||L)&&(++b,(!(R=P[b])||k&&!R.getFill()||!k&&R.getFill()||L&&!R.getStroke()||!L&&R.getStroke()||R.getText())&&(R=new Wv({fill:k?new Cv:void 0,stroke:L?new Uv:void 0}),P[b]=R),k&&(N=R.getFill()).setColor(k),L&&((z=R.getStroke()).setColor(L),z.setWidth(.5)),R.setZIndex(F));if(1!=l&&"line"==S.type){k=!("line-pattern"in A)&&"line-color"in A?gO(dO(S,"paint","line-color",f,p,m,g),dO(S,"paint","line-opacity",f,p,m,g)):void 0;var Z=dO(S,"paint","line-width",f,p,m,g);k&&Z>0&&(++b,(R=P[b])&&R.getStroke()&&!R.getFill()&&!R.getText()||(R=new Wv({stroke:new Uv}),P[b]=R),(z=R.getStroke()).setLineCap(dO(S,"layout","line-cap",f,p,m,g)),z.setLineJoin(dO(S,"layout","line-join",f,p,m,g)),z.setMiterLimit(dO(S,"layout","line-miter-limit",f,p,m,g)),z.setColor(k),z.setWidth(Z),z.setLineDash(A["line-dasharray"]?dO(S,"paint","line-dasharray",f,p,m,g).map((function(t){return t*Z})):null),R.setZIndex(F))}var V=!1,W=null,$=0,K=void 0,H=void 0,J=void 0;if((1==l||2==l)&&"icon-image"in j){var Q=dO(S,"layout","icon-image",f,p,m,g);if(Q){K="string"==typeof Q?xO(Q,o):Q.toString();var tt=void 0;if(u&&e&&e[K]){var nt=dO(S,"layout","icon-rotation-alignment",f,p,m,g);if(2==l){var it=n.getGeometry();if(it.getFlatMidpoint||it.getFlatMidpoints){var rt=it.getExtent();if(Math.sqrt(Math.max(Math.pow((rt[2]-rt[0])/i,2),Math.pow((rt[3]-rt[1])/i,2)))>150){var et="MultiLineString"===it.getType()?it.getFlatMidpoints():it.getFlatMidpoint();if(fO||(fO=new ix("Point",hO=[NaN,NaN],[],{},null)),tt=fO,hO[0]=et[0],hO[1]=et[1],"line"===dO(S,"layout","symbol-placement",f,p,m,g)&&"map"===nt)for(var ot=it.getStride(),st=it.getFlatCoordinates(),ut=0,at=st.length-ot;ut<at;ut+=ot){var ht=st[ut],ft=st[ut+1],ct=st[ut+ot],lt=st[ut+ot+1],vt=Math.min(ht,ct),pt=Math.min(ft,lt),dt=Math.max(ht,ct),yt=Math.max(ft,lt);if(et[0]>=vt&&et[0]<=dt&&et[1]>=pt&&et[1]<=yt){$=Math.atan2(ft-lt,ct-ht);break}}}}}if(2!==l||tt){var mt=dO(S,"layout","icon-size",f,p,m,g),wt=void 0!==A["icon-color"]?dO(S,"paint","icon-color",f,p,m,g):null;if(!wt||0!==wt.a){var gt=K+"."+mt;if(null!==wt&&(gt+="."+wt),!(H=d[gt])){var bt=e[K],xt=yO(S,f,p,m);H=new Gv({color:wt?[255*wt.r,255*wt.g,255*wt.b,wt.a]:void 0,img:u,imgSize:a,size:[bt.width,bt.height],offset:[bt.x,bt.y],rotateWithView:"map"===nt,scale:mt/bt.pixelRatio,displacement:"icon-offset"in j?dO(S,"layout","icon-offset",f,p,m,g).map((function(t){return-t*bt.pixelRatio})):void 0,declutterMode:xt}),d[gt]=H}}H&&(++b,(R=P[b])&&R.getImage()&&!R.getFill()&&!R.getStroke()||(R=new Wv,P[b]=R),R.setGeometry(tt),H.setRotation($+qS(dO(S,"layout","icon-rotate",f,p,m,g))),H.setOpacity(dO(S,"paint","icon-opacity",f,p,m,g)),H.setAnchor(lO[dO(S,"layout","icon-anchor",f,p,m,g)]),R.setImage(H),W=R.getText(),R.setText(void 0),R.setZIndex(F),V=!0,J=!1)}else J=!0}}}if(1==l&&"circle"===S.type){++b,(R=P[b])&&R.getImage()&&!R.getFill()&&!R.getStroke()||(R=new Wv,P[b]=R);var _t="circle-radius"in A?dO(S,"paint","circle-radius",f,p,m,g):5,Mt=gO(dO(S,"paint","circle-stroke-color",f,p,m,g),dO(S,"paint","circle-stroke-opacity",f,p,m,g)),St=gO(dO(S,"paint","circle-color",f,p,m,g),dO(S,"paint","circle-opacity",f,p,m,g)),Ot=dO(S,"paint","circle-stroke-width",f,p,m,g),jt=_t+"."+Mt+"."+St+"."+Ot;(H=d[jt])||(H=new Pv({radius:_t,stroke:Mt&&Ot>0?new Uv({width:Ot,color:Mt}):void 0,fill:St?new Cv({color:St}):void 0,declutterMode:"none"}),d[jt]=H),R.setImage(H),W=R.getText(),R.setText(void 0),R.setGeometry(void 0),R.setZIndex(F),V=!0}var Et=void 0,Tt=void 0,Pt=void 0,At=void 0,Ct=void 0,kt=void 0;if("text-field"in j){At=Math.round(dO(S,"layout","text-size",f,p,m,g));var It=dO(S,"layout","text-font",f,p,m,g);Pt=dO(S,"layout","text-line-height",f,p,m,g),(Tt=RS(s?s(It):It,At,Pt)).includes("sans-serif")||(Tt+=",sans-serif"),Ct=dO(S,"layout","text-letter-spacing",f,p,m,g),kt=dO(S,"layout","text-max-width",f,p,m,g);var Nt=dO(S,"layout","text-field",f,p,m,g);Et="object"==typeof Nt&&Nt.sections?1===Nt.sections.length?Nt.toString():Nt.sections.reduce((function(t,n,i){var r=n.fontStack?n.fontStack.split(","):It,e=RS(s?s(r):r,At*(n.scale||1),Pt),o=n.text;if("\n"===o)return t.push("\n",""),t;if(2!=l){for(var u=0,a=(o=iO(o,e,kt,Ct).split("\n")).length;u<a;++u)u>0&&t.push("\n",""),t.push(o[u],e);return t}t.push(JS(o,Ct),e)}),[]):xO(Nt,o).trim(),I=dO(S,"paint","text-opacity",f,p,m,g)}if(Et&&I&&!J){V||(++b,(R=P[b])&&R.getText()&&!R.getFill()&&!R.getStroke()||(R=new Wv,P[b]=R),R.setImage(void 0),R.setGeometry(void 0)),R.getText()||R.setText(W||new Kv({padding:[2,2,2,2]})),W=R.getText();var zt=j["text-transform"];"uppercase"==zt?Et=Array.isArray(Et)?Et.map((function(t,n){return n%2?t:t.toUpperCase()})):Et.toUpperCase():"lowercase"==zt&&(Et=Array.isArray(Et)?Et.map((function(t,n){return n%2?t:t.toLowerCase()})):Et.toLowerCase());var Lt=Array.isArray(Et)?Et:2==l?JS(Et,Ct):iO(Et,Tt,kt,Ct);W.setText(Lt),W.setFont(Tt),W.setRotation(qS(dO(S,"layout","text-rotate",f,p,m,g)));var Rt=dO(S,"layout","text-anchor",f,p,m,g),Ft=V||1==l?"point":dO(S,"layout","symbol-placement",f,p,m,g);W.setPlacement(Ft),W.setOverflow("point"===Ft);var Gt=dO(S,"paint","text-halo-width",f,p,m,g),Dt=dO(S,"layout","text-offset",f,p,m,g),Ut=dO(S,"paint","text-translate",f,p,m,g),qt=0,Bt=0;if("point"==Ft){var Xt="center";-1!==Rt.indexOf("left")?(Xt="left",Bt=Gt):-1!==Rt.indexOf("right")&&(Xt="right",Bt=-Gt),W.setTextAlign(Xt);var Yt=dO(S,"layout","text-rotation-alignment",f,p,m,g);W.setRotateWithView("map"==Yt)}else W.setMaxAngle(qS(dO(S,"layout","text-max-angle",f,p,m,g))*Et.length/Lt.length),W.setTextAlign(),W.setRotateWithView(!1);var Zt="middle";0==Rt.indexOf("bottom")?(Zt="bottom",qt=-Gt-.5*(Pt-1)*At):0==Rt.indexOf("top")&&(Zt="top",qt=Gt+.5*(Pt-1)*At),W.setTextBaseline(Zt),W.setOffsetX(Dt[0]*At+Bt+Ut[0]),W.setOffsetY(Dt[1]*At+qt+Ut[1]),T.setColor(gO(dO(S,"paint","text-color",f,p,m,g),I)),W.setFill(T);var Vt=gO(dO(S,"paint","text-halo-color",f,p,m,g),I);if(Vt){E.setColor(Vt),Gt*=2;var Wt=.5*At;E.setWidth(Gt<=Wt?Gt:Wt),W.setStroke(E)}else W.setStroke(void 0);var $t=dO(S,"layout","text-padding",f,p,m,g),Kt=W.getPadding();$t!==Kt[0]&&(Kt[0]=$t,Kt[1]=$t,Kt[2]=$t,Kt[3]=$t),R.setZIndex(F)}}}}return b>-1?(P.length=b+1,_O&&("function"==typeof n.set?n.set("mapbox-layer",c):n.getProperties()["mapbox-layer"]=c),P):void 0}};return t.setStyle(A),t.set("mapbox-source",c),t.set("mapbox-layers",p),t.set("mapbox-featurestate",{}),A}function SO(t,n){n.accessToken||(n=P({},n),new URL(t).searchParams.forEach((function(t,i){n.accessToken=t,n.accessTokenParam=i})));return n}function OO(t,n,i,r,e){var o,s,u;return void 0===i&&(i=""),void 0===r&&(r={}),void 0===e&&(e=void 0),"string"==typeof r?(o=r,u={}):(o=r.styleUrl,u=r),e||(e=u.resolutions),o||"string"!=typeof n||n.trim().startsWith("{")||(o=n),o&&(o=o.startsWith("data:")?location.href:DS(o,u.accessToken),u=SO(o,u)),new Promise((function(r,a){VS(n,u).then((function(n){if(8!=n.version)return a(new Error("glStyle version 8 required."));if(!(t instanceof ex||t instanceof Cx))return a(new Error("Can only apply to VectorLayer or VectorTileLayer"));var h,f,c,l=t instanceof Cx?"vector":"geojson";if(i?s=Array.isArray(i)?n.layers.find((function(t){return t.id===i[0]})).source:i:(s=Object.keys(n.sources).find((function(t){return n.sources[t].type===l})),i=s),!s)return a(new Error("No "+l+" source found in the glStyle."));function v(){if(t instanceof Cx)return AO(n.sources[s],o,u).then((function(n){var i=t.getSource();if(i?n!==i&&(i.setTileUrlFunction(n.getTileUrlFunction()),i.Le||(i.Le=n.Le),i.getAttributions()||i.setAttributions(n.getAttributions()),i.getTileLoadFunction()===Tm&&i.setTileLoadFunction(n.getTileLoadFunction()),Sr(i.getProjection(),n.getProjection())&&(i.tileGrid=n.getTileGrid())):t.setSource(n),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var r=t.getSource().getTileGrid();t.setMaxResolution(r.getResolution(r.getMinZoom()))}}));var i=n.sources[s],r=t.getSource();r&&r.get("mapbox-source")===i||(r=kO(i,o,u));var e=t.getSource();return e?r!==e&&(e.getAttributions()||e.setAttributions(r.getAttributions()),e.Le||(e.Le=r.getFormat()),e.Fe=r.getUrl()):t.setSource(r),Promise.resolve()}function p(){c||n.sprite&&!h?c?(t.setStyle(c),v().then(r).catch(a)):a(new Error("Something went wrong trying to apply style.")):(c=MO(t,n,i,e,h,f,aO),t.getStyle()?v().then(r).catch(a):a(new Error("Nothing to show for source ["+s+"]")))}if(n.sprite){var d=new URL(function(t,n,i){var r=GS(t);if(!r)return decodeURI(new URL(t,i).href);var e="sprites/";if(0!==r.indexOf(e))throw new Error("unexpected sprites url: "+t);var o=r.slice(e.length);return FS+"/styles/v1/"+o+"/sprite?access_token="+n}(n.sprite,u.accessToken,o||location.href)),y=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",m=d.origin+d.pathname+y+".json"+d.search;new Promise((function(t,n){ZS("Sprite",m,u).then(t).catch((function(i){ZS("Sprite",m=d.origin+d.pathname+".json"+d.search,u).then(t).catch(n)}))})).then((function(t){void 0===t&&a(new Error("No sprites found.")),h=t,f=d.origin+d.pathname+y+".png"+d.search,p()})).catch((function(t){a(new Error("Sprites cannot be loaded: "+m+": "+t.message))}))}else p()})).catch(a)}))}var jO={};function EO(t,n){var i={id:n.id,type:n.type},r={};function e(e){var o=n.layout||{},s=n.paint||{};i.paint=s;var u,a,h="function"==typeof t.getSource?t.getSource().getTileGrid().getZForResolution(e):t.getView().getZoom(),f="function"==typeof t.getTargetElement?t.getTargetElement():void 0;if(void 0!==s["background-color"]&&(u=dO(i,"paint","background-color",h,jO,r),f&&(f.style.background=$x.parse(u).toString())),void 0!==s["background-opacity"]&&(a=dO(i,"paint","background-opacity",h,jO,r),f&&(f.style.opacity=a)),"none"!=o.visibility)return gO(u,a);f&&(f.style.backgroundColor="",f.style.opacity="")}if("function"==typeof t.getTargetElement)t.getTargetElement()&&e(),t.on(["change:resolution","change:target"],e);else{if("function"!=typeof t.setBackground)throw new Error("Unable to apply background.");t.setBackground(e)}}function TO(t,n){n.layers.some((function(n){if("background"===n.type)return EO(t,n),!0}))}function PO(t){var n=t.bounds;if(n){var i=Mr([n[0],n[1]]),r=Mr([n[2],n[3]]);return[i[0],i[1],r[0],r[1]]}}function AO(t,n,i){return new Promise((function(r,e){$S(t,n,i).then((function(t){var n=new Nw({tileJSON:t}),i=n.getTileJSON(),e=n.getTileGrid(),o=PO(i),s=i.minzoom||0,u=i.maxzoom||22,a={attributions:n.getAttributions(),format:new Px,tileGrid:new qf({origin:e.getOrigin(0),extent:o||e.getExtent(),minZoom:s,resolutions:BS.slice(0,u+1),tileSize:512})};Array.isArray(i.tiles)?a.urls=i.tiles:a.url=i.tiles,t.olSourceOptions&&Object.assign(a,t.olSourceOptions),r(new Em(a))})).catch(e)}))}var CO=new qx;function kO(t,n,i){var r=t.data,e={};if("string"==typeof r){var o=US(r,i.accessToken,i.accessTokenParam||"access_token",n||location.href);if(i.transformRequest){var s=i.transformRequest(o,"GeoJSON");s instanceof Request&&(o=encodeURI(s.url))}e.url=o}else e.features=CO.readFeatures(r,{featureProjection:Cr()||"EPSG:3857"});var u=new Lp(P({attributions:t.attribution,format:CO},e));return u.set("mapbox-source",t),u}var IO=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),NO=function(t){function n(n){var i=t.call(this,L)||this;return i.error=n,i}return IO(n,t),n}(c),zO=function(t){function n(n){var i=this,r=!("declutter"in n)||n.declutter,e=new Em({state:"loading",format:new Px});i=t.call(this,{source:e,background:n.background,declutter:r,className:n.className,opacity:n.opacity,visible:n.visible,zIndex:n.zIndex,minResolution:n.minResolution,maxResolution:n.maxResolution,minZoom:n.minZoom,maxZoom:n.maxZoom,renderOrder:n.renderOrder,renderBuffer:n.renderBuffer,renderMode:n.renderMode,map:n.map,updateWhileAnimating:n.updateWhileAnimating,updateWhileInteracting:n.updateWhileInteracting,preload:n.preload,useInterimTilesOnError:n.useInterimTilesOnError,properties:n.properties})||this,n.accessToken&&(i.accessToken=n.accessToken);var o=n.styleUrl;return OO(i,o,n.layers||n.source,{accessToken:i.accessToken}).then((function(){e.setState("ready")})).catch((function(t){i.dispatchEvent(new NO(t)),i.getSource().setState("error")})),void 0===i.getBackground()&&function(t,n,i){void 0===i&&(i={}),"object"==typeof n?(TO(t,n),Promise.resolve()):VS(n,i).then((function(n){TO(t,n)}))}(i,n.styleUrl,{accessToken:i.accessToken}),i}return IO(n,t),n}(Cx),LO=zO,RO=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),FO=function(t){function n(n){var i=this,r=n||{},e=P({},r);return delete e.imageRatio,(i=t.call(this,e)||this).Iv=void 0!==r.imageRatio?r.imageRatio:1,i}return RO(n,t),n.prototype.getImageRatio=function(){return this.Iv},n.prototype.createRenderer=function(){return new Tb(this)},n}(Vw),GO=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),DO=function(t){function n(n){var i=this,r=P({},n);return(i=t.call(this,r)||this).Nv=mv(n.style),i.zv=n.style.variables||{},i.Lv=!!n.disableHitDetection,i}return GO(n,t),n.prototype.createRenderer=function(){return new sg(this,{vertexShader:this.Nv.builder.getSymbolVertexShader(),fragmentShader:this.Nv.builder.getSymbolFragmentShader(),hitVertexShader:!this.Lv&&this.Nv.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.Lv&&this.Nv.builder.getSymbolFragmentShader(!0),uniforms:this.Nv.uniforms,attributes:this.Nv.attributes})},n.prototype.updateStyleVariables=function(t){P(this.zv,t),this.changed()},n}(ws),UO=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function qO(t,n){var i="\n    attribute vec2 ".concat(Cl.TEXTURE_COORD,";\n    uniform mat4 ").concat(Al.TILE_TRANSFORM,";\n    uniform float ").concat(Al.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Al.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Al.TEXTURE_RESOLUTION,";\n    uniform float ").concat(Al.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(Al.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(Al.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(Cl.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(Al.TEXTURE_ORIGIN_X," + ").concat(Al.TEXTURE_RESOLUTION," * ").concat(Al.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(Al.TEXTURE_ORIGIN_Y," - ").concat(Al.TEXTURE_RESOLUTION," * ").concat(Al.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(Al.TILE_TRANSFORM," * vec4(").concat(Cl.TEXTURE_COORD,", ").concat(Al.DEPTH,", 1.0);\n    }\n  "),r={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:n},e=[];if(void 0!==t.color){var o=nv(r,t.color,ql);e.push("color = ".concat(o,";"))}if(void 0!==t.contrast){var s=nv(r,t.contrast,Dl);e.push("color.rgb = clamp((".concat(s," + 1.0) * color.rgb - (").concat(s," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.exposure){var u=nv(r,t.exposure,Dl);e.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==t.saturation){var a=nv(r,t.saturation,Dl);e.push("\n      float saturation = ".concat(a," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))}if(void 0!==t.gamma){var h=nv(r,t.gamma,Dl);e.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(h,"));"))}if(void 0!==t.brightness){var f=nv(r,t.brightness,Dl);e.push("color.rgb = clamp(color.rgb + ".concat(f,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var c={},l=r.variables.length;if(l>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(r.variables,")"));for(var v=function(n){var i=r.variables[n];if(!(i in t.variables))throw new Error("Missing '".concat(i,"' in style variables"));var e=cv(i);c[e]=function(){var n=t.variables[i];return"string"==typeof n&&(n=Ql(r,n)),void 0!==n?n:-9999999}},p=0;p<l;++p)v(p);var d=Object.keys(c).map((function(t){return"uniform float ".concat(t,";")})),y=Math.ceil(n/4);d.push("uniform sampler2D ".concat(Al.TILE_TEXTURE_ARRAY,"[").concat(y,"];")),r.paletteTextures&&d.push("uniform sampler2D ".concat(lv,"[").concat(r.paletteTextures.length,"];"));var m=Object.keys(r.functions).map((function(t){return r.functions[t]}));return{vertexShader:i,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(Al.RENDER_EXTENT,";\n    uniform float ").concat(Al.TRANSITION_ALPHA,";\n    uniform float ").concat(Al.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(Al.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(Al.RESOLUTION,";\n    uniform float ").concat(Al.ZOOM,";\n\n    ").concat(d.join("\n"),"\n\n    ").concat(m.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(Al.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(Al.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(Al.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(Al.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(Al.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(e.join("\n"),"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(Al.TRANSITION_ALPHA,";\n    }"),uniforms:c,paletteTextures:r.paletteTextures}}var BO=function(t){function n(n){var i=this,r=n?P({},n):{},e=r.style||{};delete r.style;var o=r.cacheSize;return delete r.cacheSize,(i=t.call(this,r)||this).Rv=r.sources,i.Fv=null,i.tl=NaN,i.H=e,i.Jt=o,i.zv=i.H.variables||{},i.addChangeListener(ss,i.Gv),i}return UO(n,t),n.prototype.getSources=function(t,n){var i=this.getSource();return this.Rv?"function"==typeof this.Rv?this.Rv(t,n):this.Rv:i?[i]:[]},n.prototype.getRenderSource=function(){return this.Fv||this.getSource()},n.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():"undefined"},n.prototype.Gv=function(){this.getSource()&&this.setStyle(this.H)},n.prototype.Dv=function(){var t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},n.prototype.createRenderer=function(){var t=qO(this.H,this.Dv());return new Gl(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.Jt,paletteTextures:t.paletteTextures})},n.prototype.renderSources=function(t,n){for(var i,r=this.getRenderer(),e=0,o=n.length;e<o;++e)this.Fv=n[e],r.prepareFrame(t)&&(i=r.renderFrame(t));return i},n.prototype.render=function(t,n){var i=this;this.rendered=!0;for(var r=t.viewState,e=this.getSources(t.extent,r.resolution),o=!0,s=function(t,n){var r=e[t],s=r.getState();if("loading"==s){var u=function(){"ready"==r.getState()&&(r.removeEventListener("change",u),i.changed())};r.addEventListener("change",u)}o=o&&"ready"==s},u=0,a=e.length;u<a;++u)s(u);var h=this.renderSources(t,e);if(this.getRenderer().renderComplete&&o)return this.tl=r.resolution,h;if(this.tl>.5*r.resolution){var f=this.getSources(t.extent,this.tl).filter((function(t){return!e.includes(t)}));if(f.length>0)return this.renderSources(t,f)}return h},n.prototype.setStyle=function(t){this.zv=t.variables||{},this.H=t;var n=qO(this.H,this.Dv());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},n.prototype.updateStyleVariables=function(t){P(this.zv,t),this.changed()},n}(Jm);BO.prototype.dispose;var XO=BO,YO=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ZO="addfeatures",VO=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.features=r,o.file=i,o.projection=e,o}return YO(n,t),n}(c),WO=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{handleEvent:S})||this).on,i.once,i.un,i.Uv=!1,i.qv=[];for(var e=r.formatConstructors?r.formatConstructors:[],o=0,s=e.length;o<s;++o){var u=e[o];"function"==typeof u&&(u=new u),i.qv.push(u),i.Uv=i.Uv||"arraybuffer"===u.getType()}return i.di=r.projection?yr(r.projection):null,i.Bv=null,i.Xv=r.source||null,i.target=r.target?r.target:null,i}return YO(n,t),n.prototype.Yv=function(t,n){var i,r=n.target.result,e=this.getMap(),o=this.di;o||(o=e.getView().getProjection());for(var s=this.qv,u=0,a=s.length;u<a;++u){var h=s[u],f=r;this.Uv&&"arraybuffer"!==h.getType()&&(void 0===i&&(i=(new TextDecoder).decode(r)),f=i);var c=this.Zv(h,f,{featureProjection:o});if(c&&c.length>0){this.Xv&&(this.Xv.clear(),this.Xv.addFeatures(c)),this.dispatchEvent(new VO(ZO,t,c,o));break}}},n.prototype.Vv=function(){var t=this.getMap();if(t){var n=this.target?this.target:t.getViewport();this.Bv=[$(n,q,this.handleDrop,this),$(n,D,this.handleStop,this),$(n,U,this.handleStop,this),$(n,q,this.handleStop,this)]}},n.prototype.setActive=function(n){!this.getActive()&&n&&this.Vv(),this.getActive()&&!n&&this.Wv(),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.Wv(),t.prototype.setMap.call(this,n),this.getActive()&&this.Vv()},n.prototype.Zv=function(t,n,i){try{return t.readFeatures(n,i)}catch(t){return null}},n.prototype.Wv=function(){this.Bv&&(this.Bv.forEach(H),this.Bv=null)},n.prototype.handleDrop=function(t){for(var n=t.dataTransfer.files,i=0,r=n.length;i<r;++i){var e=n.item(i),o=new FileReader;o.addEventListener(Y,this.Yv.bind(this,e)),this.Uv?o.readAsArrayBuffer(e):o.readAsText(e)}},n.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},n}(Ta),$O=WO,KO=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),HO=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).Wr=r.condition?r.condition:Xa,i.Kr=void 0,i.$v=void 0,i.je=0,i.Fr=void 0!==r.duration?r.duration:400,i}return KO(n,t),n.prototype.handleDragEvent=function(t){if(Za(t)){var n=t.map,i=n.getSize(),r=t.pixel,e=r[0]-i[0]/2,o=i[1]/2-r[1],s=Math.atan2(o,e),u=Math.sqrt(e*e+o*o),a=n.getView();if(void 0!==this.Kr){var h=this.Kr-s;a.adjustRotationInternal(h)}this.Kr=s,void 0!==this.$v&&a.adjustResolutionInternal(this.$v/u),void 0!==this.$v&&(this.je=this.$v/u),this.$v=u}},n.prototype.handleUpEvent=function(t){if(!Za(t))return!0;var n=t.map.getView(),i=this.je>1?1:-1;return n.endInteraction(this.Fr,i),this.je=0,!1},n.prototype.handleDownEvent=function(t){return!!Za(t)&&(!!this.Wr(t)&&(t.map.getView().beginInteraction(),this.Kr=void 0,this.$v=void 0,!0))},n}(Ia),JO=HO,QO=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),tj=function(t){function n(n,i,r){var e=t.call(this)||this;if(void 0!==r&&void 0===i)e.setFlatCoordinates(r,n);else{var o=i||0;e.setCenterAndRadius(n,o,r)}return e}return QO(n,t),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,n,i,r){var e=this.flatCoordinates,o=t-e[0],s=n-e[1],u=o*o+s*s;if(u<r){if(0===u)for(var a=0;a<this.stride;++a)i[a]=e[a];else{var h=this.getRadius()/Math.sqrt(u);i[0]=e[0]+h*o,i[1]=e[1]+h*s;for(a=2;a<this.stride;++a)i[a]=e[a]}return i.length=this.stride,u}return r},n.prototype.containsXY=function(t,n){var i=this.flatCoordinates,r=t-i[0],e=n-i[1];return r*r+e*e<=this.Kv()},n.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return On(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},n.prototype.getRadius=function(){return Math.sqrt(this.Kv())},n.prototype.Kv=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},n.prototype.getType=function(){return"Circle"},n.prototype.intersectsExtent=function(t){if(Kn(t,this.getExtent())){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Rn(t,this.intersectsCoordinate.bind(this)))}return!1},n.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=t.slice();r[n]=r[0]+i;for(var e=1;e<n;++e)r[n+e]=t[e];this.setFlatCoordinates(this.layout,r),this.changed()},n.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,e=se(r,0,t,this.stride);r[e++]=r[0]+n;for(var o=1,s=this.stride;o<s;++o)r[e++]=r[o];r.length=e,this.changed()},n.prototype.getCoordinates=function(){return null},n.prototype.setCoordinates=function(t,n){},n.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},n.prototype.rotate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Ur(i,0,i.length,r,t,n,i)),this.changed()},n.prototype.translate=function(t,n){var i=this.getCenter(),r=this.getStride();this.setCenter(Br(i,0,i.length,r,t,n,i)),this.changed()},n}(Jr);tj.prototype.transform;var nj=tj,ij=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),rj="drawstart",ej="drawend",oj="drawabort",sj=function(t){function n(n,i){var r=t.call(this,n)||this;return r.feature=i,r}return ij(n,t),n}(c),uj=function(t){function n(n){var i=this,r=n;r.stopDown||(r.stopDown=O),(i=t.call(this,r)||this).on,i.once,i.un,i.Hv=!1,i.Jv=null,i.Qv,i.tp,i.np,i.ip=!1,i.Xv=n.source?n.source:null,i.Re=n.features?n.features:null,i.rp=n.snapTolerance?n.snapTolerance:12,i.Ol=n.type,i.de=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(i.Ol),i.ep=!!n.stopClick,i.op=n.minPoints?n.minPoints:"Polygon"===i.de?3:2,i.sp="Circle"===i.de?2:n.maxPoints?n.maxPoints:1/0,i.up=n.finishCondition?n.finishCondition:S,i.ap=n.geometryLayout?n.geometryLayout:"XY";var e,o=n.geometryFunction;if(!o){var s,u=i.de;if("Circle"===u)o=function(t,n,i){var r=n||new nj([NaN,NaN]),e=Ir(t[0],i),o=Qi(e,Ir(t[t.length-1],i));r.setCenterAndRadius(e,Math.sqrt(o),this.ap);var s=Cr();return s&&r.transform(i,s),r};else"Point"===u?s=Te:"LineString"===u?s=Yb:"Polygon"===u&&(s=Ke),o=function(t,n,i){return n?"Polygon"===u?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])],this.ap):n.setCoordinates([],this.ap):n.setCoordinates(t,this.ap):n=new s(t,this.ap),n}}return i.Bu=o,i.hp=void 0!==n.dragVertexDelay?n.dragVertexDelay:500,i.fp=null,i.cp=null,i.lp=null,i.vp=null,i.pp=null,i.dp=null,i.yp=n.clickTolerance?n.clickTolerance*n.clickTolerance:36,i.mp=new ex({source:new Lp({useSpatialIndex:!1,wrapX:!!n.wrapX&&n.wrapX}),style:n.style?n.style:(e=Zv(),function(t,n){return e[t.getGeometry().getType()]}),updateWhileInteracting:!0}),i.K=n.geometryName,i.Wr=n.condition?n.condition:Ba,i.wp,n.freehand?i.wp=Ga:i.wp=n.freehandCondition?n.freehandCondition:Xa,i.addChangeListener(Sa,i.gp),i}return ij(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),this.gp()},n.prototype.getOverlay=function(){return this.mp},n.prototype.handleEvent=function(n){n.originalEvent.type===R&&n.originalEvent.preventDefault(),this.ip="Point"!==this.de&&this.wp(n);var i=n.type===vu.POINTERMOVE,r=!0;!this.ip&&this.tp&&n.type===vu.POINTERDRAG&&(Date.now()-this.tp>=this.hp?(this.Jv=n.pixel,this.Hv=!this.ip,i=!0):this.tp=void 0,this.Hv&&void 0!==this.Qv&&(clearTimeout(this.Qv),this.Qv=void 0));return this.ip&&n.type===vu.POINTERDRAG&&null!==this.cp?(this.bp(n.coordinate),r=!1):this.ip&&n.type===vu.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=n.type===vu.POINTERMOVE)&&this.ip?(this.Wn(n),this.Hv&&n.originalEvent.preventDefault()):("mouse"===n.originalEvent.pointerType||n.type===vu.POINTERDRAG&&void 0===this.Qv)&&this.Wn(n):n.type===vu.DBLCLICK&&(r=!1),t.prototype.handleEvent.call(this,n)&&r},n.prototype.handleDownEvent=function(t){return this.Hv=!this.ip,this.ip?(this.Jv=t.pixel,this.fp||this.xp(t.coordinate),!0):this.Wr(t)?(this.tp=Date.now(),this.Qv=setTimeout(function(){this.Wn(new lu(vu.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.hp),this.Jv=t.pixel,!0):(this.tp=void 0,!1)},n.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.Qv&&(clearTimeout(this.Qv),this.Qv=void 0),this.Wn(t),this.Hv){var i=!this.fp;i&&this.xp(t.coordinate),!i&&this.ip?this.finishDrawing():this.ip||i&&"Point"!==this.de||(this._p(t.pixel)?this.up(t)&&this.finishDrawing():this.bp(t.coordinate)),n=!1}else this.ip&&this.abortDrawing();return!n&&this.ep&&t.preventDefault(),n},n.prototype.Wn=function(t){if(this.np=t.originalEvent.pointerType,this.Jv&&(!this.ip&&this.Hv||this.ip&&!this.Hv)){var n=this.Jv,i=t.pixel,r=n[0]-i[0],e=n[1]-i[1],o=r*r+e*e;if(this.Hv=this.ip?o>this.yp:o<=this.yp,!this.Hv)return}this.fp?this.Mp(t.coordinate):this.Sp(t.coordinate.slice())},n.prototype._p=function(t){var n=!1;if(this.cp){var i=!1,r=[this.fp],e=this.de;if("Point"===e)n=!0;else if("Circle"===e)n=2===this.vp.length;else if("LineString"===e)i=this.vp.length>this.op;else if("Polygon"===e){var o=this.vp;i=o[0].length>this.op,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var s=this.getMap(),u=0,a=r.length;u<a;u++){var h=r[u],f=s.getPixelFromCoordinate(h),c=t[0]-f[0],l=t[1]-f[1],v=this.ip?1:this.rp;if(n=Math.sqrt(c*c+l*l)<=v){this.fp=h;break}}}return n},n.prototype.Sp=function(t){this.lp?this.lp.getGeometry().setCoordinates(t):(this.lp=new Ct(new Te(t)),this.Op())},n.prototype.jp=function(t){this.pp||(this.pp=new Ct);var n=t.getLinearRing(0),i=this.pp.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new Yb(n.getFlatCoordinates(),n.getLayout()),this.pp.setGeometry(i))},n.prototype.xp=function(t){for(var n=this.getMap().getView().getProjection(),i=Kr(this.ap);t.length<i;)t.push(0);this.fp=t,"Point"===this.de?this.vp=t.slice():"Polygon"===this.de?(this.vp=[[t.slice(),t.slice()]],this.dp=this.vp[0]):this.vp=[t.slice(),t.slice()],this.dp&&(this.pp=new Ct(new Yb(this.dp)));var r=this.Bu(this.vp,void 0,n);this.cp=new Ct,this.K&&this.cp.setGeometryName(this.K),this.cp.setGeometry(r),this.Op(),this.dispatchEvent(new sj(rj,this.cp))},n.prototype.Mp=function(t){for(var n,i,r=this.getMap(),e=this.cp.getGeometry(),o=r.getView().getProjection(),s=Kr(this.ap);t.length<s;)t.push(0);("Point"===this.de?i=this.vp:"Polygon"===this.de?(i=(n=this.vp[0])[n.length-1],this._p(r.getPixelFromCoordinate(t))&&(t=this.fp.slice())):i=(n=this.vp)[n.length-1],i[0]=t[0],i[1]=t[1],this.Bu(this.vp,e,o),this.lp)&&this.lp.getGeometry().setCoordinates(t);if("Polygon"===e.getType()&&"Polygon"!==this.de)this.jp(e);else if(this.dp){this.pp.getGeometry().setCoordinates(this.dp)}this.Op()},n.prototype.bp=function(t){var n,i,r=this.cp.getGeometry(),e=this.getMap().getView().getProjection(),o=this.de;"LineString"===o||"Circle"===o?(this.fp=t.slice(),(i=this.vp).length>=this.sp&&(this.ip?i.pop():n=!0),i.push(t.slice()),this.Bu(i,r,e)):"Polygon"===o&&((i=this.vp[0]).length>=this.sp&&(this.ip?i.pop():n=!0),i.push(t.slice()),n&&(this.fp=i[0]),this.Bu(this.vp,r,e)),this.Sp(t.slice()),this.Op(),n&&this.finishDrawing()},n.prototype.removeLastPoint=function(){if(this.cp){var t,n=this.cp.getGeometry(),i=this.getMap().getView().getProjection(),r=this.de;if("LineString"===r||"Circle"===r){if((t=this.vp).splice(-2,1),t.length>=2){this.fp=t[t.length-2].slice();var e=this.fp.slice();t[t.length-1]=e,this.Sp(e)}this.Bu(t,n,i),"Polygon"===n.getType()&&this.pp&&this.jp(n)}else if("Polygon"===r){(t=this.vp[0]).splice(-2,1);var o=this.pp.getGeometry();if(t.length>=2){e=t[t.length-2].slice();t[t.length-1]=e,this.Sp(e)}o.setCoordinates(t),this.Bu(this.vp,n,i)}1===t.length&&this.abortDrawing(),this.Op()}},n.prototype.finishDrawing=function(){var t=this.Ep();if(t){var n=this.vp,i=t.getGeometry(),r=this.getMap().getView().getProjection();"LineString"===this.de?(n.pop(),this.Bu(n,i,r)):"Polygon"===this.de&&(n[0].pop(),this.Bu(n,i,r),n=i.getCoordinates()),"MultiPoint"===this.Ol?t.setGeometry(new Gb([n])):"MultiLineString"===this.Ol?t.setGeometry(new Wb([n])):"MultiPolygon"===this.Ol&&t.setGeometry(new Jb([n])),this.dispatchEvent(new sj(ej,t)),this.Re&&this.Re.push(t),this.Xv&&this.Xv.addFeature(t)}},n.prototype.Ep=function(){this.fp=null;var t=this.cp;return this.cp=null,this.lp=null,this.pp=null,this.mp.getSource().clear(!0),t},n.prototype.abortDrawing=function(){var t=this.Ep();t&&this.dispatchEvent(new sj(oj,t))},n.prototype.appendCoordinates=function(t){var n,i=this.de,r=!this.cp;if(r&&this.xp(t[0]),"LineString"===i||"Circle"===i)n=this.vp;else{if("Polygon"!==i)return;n=this.vp&&this.vp.length?this.vp[0]:[]}r&&n.shift(),n.pop();for(var e=0;e<t.length;e++)this.bp(t[e]);var o=t[t.length-1];this.bp(o),this.Mp(o)},n.prototype.extend=function(t){var n=t.getGeometry();this.cp=t,this.vp=n.getCoordinates();var i=this.vp[this.vp.length-1];this.fp=i.slice(),this.vp.push(i.slice()),this.lp=new Ct(new Te(i)),this.Op(),this.dispatchEvent(new sj(rj,this.cp))},n.prototype.Op=function(){var t=[];this.cp&&t.push(this.cp),this.pp&&t.push(this.pp),this.lp&&t.push(this.lp);var n=this.mp.getSource();n.clear(!0),n.addFeatures(t)},n.prototype.gp=function(){var t=this.getMap(),n=this.getActive();t&&n||this.abortDrawing(),this.mp.setMap(n?t:null)},n}(Ia);var aj=uj,hj=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fj="extentchanged",cj=function(t){function n(n){var i=t.call(this,fj)||this;return i.extent=n,i}return hj(n,t),n}(c);function lj(){var t=Zv();return function(n,i){return t.Point}}function vj(t){return function(n){return yn([t,n])}}function pj(t,n){return t[0]==n[0]?function(i){return yn([t,[i[0],n[1]]])}:t[1]==n[1]?function(i){return yn([t,[n[0],i[1]]])}:null}var dj=function(t){function n(n){var i,r=this,e=n||{};return(r=t.call(this,e)||this).on,r.once,r.un,r.Wr=e.condition?e.condition:Ga,r.st=null,r.Tp=null,r.Pp=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.Ap=!1,r.Cp=null,r.kp=null,n||(n={}),r.Ip=new ex({source:new Lp({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.boxStyle?n.boxStyle:(i=Zv(),function(t,n){return i.Polygon}),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.Np=new ex({source:new Lp({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.pointerStyle?n.pointerStyle:lj(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.extent&&r.setExtent(n.extent),r}return hj(n,t),n.prototype.zp=function(t,n){var i=n.getCoordinateFromPixelInternal(t),r=this.getExtentInternal();if(r){var e=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);e.sort((function(t,n){return nr(i,t)-nr(i,n)}));var o=e[0],s=Vi(i,o),u=n.getPixelFromCoordinateInternal(s);if(tr(t,u)<=this.Pp){var a=n.getPixelFromCoordinateInternal(o[0]),h=n.getPixelFromCoordinateInternal(o[1]),f=Qi(u,a),c=Qi(u,h),l=Math.sqrt(Math.min(f,c));return this.Ap=l<=this.Pp,this.Ap&&(s=f>c?o[1]:o[0]),s}}return null},n.prototype.Wn=function(t){var n=t.pixel,i=t.map,r=this.zp(n,i);r||(r=i.getCoordinateFromPixelInternal(n)),this.Lp(r)},n.prototype.Rp=function(t){var n=this.Cp;return n?t?n.setGeometry(Je(t)):n.setGeometry(void 0):(n=new Ct(t?Je(t):{}),this.Cp=n,this.Ip.getSource().addFeature(n)),n},n.prototype.Lp=function(t){var n=this.kp;n?n.getGeometry().setCoordinates(t):(n=new Ct(new Te(t)),this.kp=n,this.Np.getSource().addFeature(n));return n},n.prototype.handleEvent=function(n){return!n.originalEvent||!this.Wr(n)||(n.type!=vu.POINTERMOVE||this.handlingDownUpSequence||this.Wn(n),t.prototype.handleEvent.call(this,n),!1)},n.prototype.handleDownEvent=function(t){var n=t.pixel,i=t.map,r=this.getExtentInternal(),e=this.zp(n,i),o=function(t){var n=null,i=null;return t[0]==r[0]?n=r[2]:t[0]==r[2]&&(n=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==n&&null!==i?[n,i]:null};if(e&&r){var s=e[0]==r[0]||e[0]==r[2]?e[0]:null,u=e[1]==r[1]||e[1]==r[3]?e[1]:null;null!==s&&null!==u?this.Tp=vj(o(e)):null!==s?this.Tp=pj(o([s,r[1]]),o([s,r[3]])):null!==u&&(this.Tp=pj(o([r[0],u]),o([r[2],u])))}else e=i.getCoordinateFromPixelInternal(n),this.setExtent([e[0],e[1],e[0],e[1]]),this.Tp=vj(e);return!0},n.prototype.handleDragEvent=function(t){if(this.Tp){var n=t.coordinate;this.setExtent(this.Tp(n)),this.Lp(n)}},n.prototype.handleUpEvent=function(t){this.Tp=null;var n=this.getExtentInternal();return n&&0!==Fn(n)||this.setExtent(null),!1},n.prototype.setMap=function(n){this.Ip.setMap(n),this.Np.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getExtent=function(){return Nr(this.getExtentInternal(),this.getMap().getView().getProjection())},n.prototype.getExtentInternal=function(){return this.st},n.prototype.setExtent=function(t){this.st=t||null,this.Rp(t),this.dispatchEvent(new cj(this.st))},n}(Ia),yj=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function mj(t){return parseFloat(t)}function wj(t){return function(t){return di(t,5)}(t).toString()}function gj(t,n){return!isNaN(t)&&t!==mj(wj(n))}var bj=function(t){function n(n){var i,r=t.call(this)||this,e=P({animate:!0,replace:!1,prefix:""},n||{});return i=!0===e.animate?{duration:250}:e.animate?e.animate:null,r.Fp=i,r.Gp=e.replace,r.Dp=e.prefix,r.gn=[],r.Up=!0,r.gp=r.gp.bind(r),r}return yj(n,t),n.prototype.qp=function(t){return this.Dp?this.Dp+t:t},n.prototype.Bp=function(t,n){return t.get(this.qp(n))},n.prototype.Xp=function(t,n,i){t.set(this.qp(n),i)},n.prototype.Yp=function(t,n){t.delete(this.qp(n))},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),n!==i&&(i&&this.Wv(i),n&&(this.Up=!0,this.gp(),this.Vv(n)))},n.prototype.Vv=function(t){this.gn.push($(t,_u,this.Zp,this),$(t.getLayerGroup(),z,this.Zp,this),$(t,"change:layergroup",this.Vp,this)),this.Gp||addEventListener("popstate",this.gp)},n.prototype.Wv=function(t){for(var n=0,i=this.gn.length;n<i;++n)H(this.gn[n]);this.gn.length=0,this.Gp||removeEventListener("popstate",this.gp);var r=new URL(window.location.href),e=r.searchParams;this.Yp(e,"x"),this.Yp(e,"y"),this.Yp(e,"z"),this.Yp(e,"r"),this.Yp(e,"l"),window.history.replaceState(null,"",r)},n.prototype.Vp=function(){var t=this.getMap();t&&(this.Wv(t),this.Vv(t),this.Up=!0,this.Zp())},n.prototype.gp=function(){var t=this.getMap();if(t){var n=t.getView();if(n){var i=new URL(window.location.href).searchParams,r=!1,e={},o=mj(this.Bp(i,"z"));gj(o,n.getZoom())&&(r=!0,e.zoom=o);var s=mj(this.Bp(i,"r"));gj(s,n.getRotation())&&(r=!0,e.rotation=s);var u,a,h=[mj(this.Bp(i,"x")),mj(this.Bp(i,"y"))];u=h,a=n.getCenter(),(gj(u[0],a[0])||gj(u[1],a[1]))&&(r=!0,e.center=h),r&&(!this.Up&&this.Fp?n.animate(P(e,this.Fp)):(e.center&&n.setCenter(e.center),"zoom"in e&&n.setZoom(e.zoom),"rotation"in e&&n.setRotation(e.rotation)));var f=t.getAllLayers(),c=this.Bp(i,"l");if(c&&c.length===f.length)for(var l=0,v=f.length;l<v;++l){var p=parseInt(c[l]);if(!isNaN(p)){var d=Boolean(p),y=f[l];y.getVisible()!==d&&y.setVisible(d)}}}}},n.prototype.Zp=function(){var t=this.getMap();if(t){var n=t.getView();if(n){var i=this.Up;this.Up=!1;for(var r=n.getCenter(),e=n.getZoom(),o=n.getRotation(),s=t.getAllLayers(),u=new Array(s.length),a=0,h=s.length;a<h;++a)u[a]=s[a].getVisible()?"1":"0";var f=new URL(window.location.href),c=f.searchParams;this.Xp(c,"x",wj(r[0])),this.Xp(c,"y",wj(r[1])),this.Xp(c,"z",wj(e)),this.Xp(c,"r",wj(o)),this.Xp(c,"l",u.join("")),f.href!==window.location.href&&(i||this.Gp?window.history.replaceState(null,"",f):window.history.pushState(null,"",f))}}},n}(Ta),xj=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_j=[0,0,0,0],Mj=[],Sj="modifystart",Oj="modifyend",jj=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.features=i,e.mapBrowserEvent=r,e}return xj(n,t),n}(c),Ej=function(t){function n(n){var i,r,e=t.call(this,n)||this;if(e.on,e.once,e.un,e.Wp=e.$a.bind(e),e.Wr=n.condition?n.condition:Va,e.$p=function(t){return za(t)&&qa(t)},e.Kp=n.deleteCondition?n.deleteCondition:e.$p,e.Hp=n.insertVertexCondition?n.insertVertexCondition:Ga,e.kp=null,e.Jp=null,e.Qp=[0,0],e.td=!1,e.rd=null,e.ed=new tp,e.Pp=void 0!==n.pixelTolerance?n.pixelTolerance:10,e.Ap=!1,e.od=!1,e.sd=[],e.mp=new ex({source:new Lp({useSpatialIndex:!1,wrapX:!!n.wrapX}),style:n.style?n.style:(i=Zv(),function(t,n){return i.Point}),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.ud={Point:e.ad.bind(e),LineString:e.hd.bind(e),LinearRing:e.hd.bind(e),Polygon:e.fd.bind(e),MultiPoint:e.ld.bind(e),MultiLineString:e.vd.bind(e),MultiPolygon:e.dd.bind(e),Circle:e.yd.bind(e),GeometryCollection:e.md.bind(e)},e.Xv=null,e.wd=null,n.features?r=n.features:n.source&&(e.Xv=n.source,r=new ct(e.Xv.getFeatures()),e.Xv.addEventListener(Ep,e.gd.bind(e)),e.Xv.addEventListener(Ap,e.bd.bind(e))),!r)throw new Error("The modify interaction requires features, a source or a layer");return n.hitDetection&&(e.wd=n.hitDetection),e.Re=r,e.Re.forEach(e.xd.bind(e)),e.Re.addEventListener(ot,e._d.bind(e)),e.Re.addEventListener(st,e.Md.bind(e)),e.Sd=null,e.Br=[0,0],e.Od=void 0===n.snapToPointer?!e.wd:n.snapToPointer,e}return xj(n,t),n.prototype.xd=function(t){var n=t.getGeometry();if(n){var i=this.ud[n.getType()];i&&i(t,n)}var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.jd(this.Qp,r),t.addEventListener(z,this.Wp)},n.prototype.Ed=function(t,n){if(!this.rd){this.rd=new ct;for(var i=this.rd.getArray(),r=0,e=n.length;r<e;++r)for(var o=n[r],s=0,u=o.length;s<u;++s){var a=o[s].feature;a&&-1===i.indexOf(a)&&this.rd.push(a)}0===this.rd.getLength()?this.rd=null:this.dispatchEvent(new jj(Sj,this.rd,t))}},n.prototype.Td=function(t){this.Pd(t),this.kp&&0===this.Re.getLength()&&(this.mp.getSource().removeFeature(this.kp),this.kp=null),t.removeEventListener(z,this.Wp)},n.prototype.Pd=function(t){var n=this.ed,i=[];n.forEach((function(n){t===n.feature&&i.push(n)}));for(var r=i.length-1;r>=0;--r){for(var e=i[r],o=this.sd.length-1;o>=0;--o)this.sd[o][0]===e&&this.sd.splice(o,1);n.remove(e)}},n.prototype.setActive=function(n){this.kp&&!n&&(this.mp.getSource().removeFeature(this.kp),this.kp=null),t.prototype.setActive.call(this,n)},n.prototype.setMap=function(n){this.mp.setMap(n),t.prototype.setMap.call(this,n)},n.prototype.getOverlay=function(){return this.mp},n.prototype.gd=function(t){t.feature&&this.Re.push(t.feature)},n.prototype.bd=function(t){t.feature&&this.Re.remove(t.feature)},n.prototype._d=function(t){this.xd(t.element)},n.prototype.$a=function(t){if(!this.od){var n=t.target;this.Td(n),this.xd(n)}},n.prototype.Md=function(t){var n=t.element;this.Td(n)},n.prototype.ad=function(t,n){var i=n.getCoordinates(),r={feature:t,geometry:n,segment:[i,i]};this.ed.insert(n.getExtent(),r)},n.prototype.ld=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r){var o=i[r],s={feature:t,geometry:n,depth:[r],index:r,segment:[o,o]};this.ed.insert(n.getExtent(),s)}},n.prototype.hd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r){var o=i.slice(r,r+2),s={feature:t,geometry:n,index:r,segment:o};this.ed.insert(yn(o),s)}},n.prototype.vd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s){var a=o.slice(s,s+2),h={feature:t,geometry:n,depth:[r],index:s,segment:a};this.ed.insert(yn(a),h)}},n.prototype.fd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s){var a=o.slice(s,s+2),h={feature:t,geometry:n,depth:[r],index:s,segment:a};this.ed.insert(yn(a),h)}},n.prototype.dd=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length;s<u;++s)for(var a=o[s],h=0,f=a.length-1;h<f;++h){var c=a.slice(h,h+2),l={feature:t,geometry:n,depth:[s,r],index:h,segment:c};this.ed.insert(yn(c),l)}},n.prototype.yd=function(t,n){var i=n.getCenter(),r={feature:t,geometry:n,index:0,segment:[i,i]},e={feature:t,geometry:n,index:1,segment:[i,i]},o=[r,e];r.featureSegments=o,e.featureSegments=o,this.ed.insert(En(i),r);var s=n,u=Cr();if(u&&this.getMap()){var a=this.getMap().getView().getProjection();s=Qe(s=s.clone().transform(u,a)).transform(a,u)}this.ed.insert(s.getExtent(),e)},n.prototype.md=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=i[r];(0,this.ud[e.getType()])(t,e)}},n.prototype.Ad=function(t,n,i){var r=this.kp;r?r.getGeometry().setCoordinates(t):(r=new Ct(new Te(t)),this.kp=r,this.mp.getSource().addFeature(r));return r.set("features",n),r.set("geometries",i),r},n.prototype.handleEvent=function(n){return!n.originalEvent||(this.Sd=n,n.map.getView().getInteracting()||n.type!=vu.POINTERMOVE||this.handlingDownUpSequence||this.Wn(n),this.kp&&this.Kp(n)&&(i=!(n.type!=vu.SINGLECLICK||!this.td)||this.removePoint()),n.type==vu.SINGLECLICK&&(this.td=!1),t.prototype.handleEvent.call(this,n)&&!i);var i},n.prototype.handleDragEvent=function(t){this.td=!1,this.Ed(t,this.sd);for(var n=[t.coordinate[0]+this.Br[0],t.coordinate[1]+this.Br[1]],i=[],r=[],e=0,o=this.sd.length;e<o;++e){var s=this.sd[e],u=s[0],a=u.feature;-1===i.indexOf(a)&&i.push(a);var h=u.geometry;-1===r.indexOf(h)&&r.push(h);for(var f=u.depth,c=void 0,l=u.segment,v=s[1];n.length<h.getStride();)n.push(l[v][n.length]);switch(h.getType()){case"Point":c=n,l[0]=n,l[1]=n;break;case"MultiPoint":(c=h.getCoordinates())[u.index]=n,l[0]=n,l[1]=n;break;case"LineString":(c=h.getCoordinates())[u.index+v]=n,l[v]=n;break;case"MultiLineString":case"Polygon":(c=h.getCoordinates())[f[0]][u.index+v]=n,l[v]=n;break;case"MultiPolygon":(c=h.getCoordinates())[f[1]][f[0]][u.index+v]=n,l[v]=n;break;case"Circle":if(l[0]=n,l[1]=n,0===u.index)this.od=!0,h.setCenter(n),this.od=!1;else{this.od=!0;var p=t.map.getView().getProjection(),d=tr(Ir(h.getCenter(),p),Ir(n,p)),y=Cr();if(y){var m=h.clone().transform(y,p);m.setRadius(d),d=m.transform(p,y).getRadius()}h.setRadius(d),this.od=!1}}c&&this.Cd(h,c)}this.Ad(n,i,r)},n.prototype.handleDownEvent=function(t){if(!this.Wr(t))return!1;var n=t.coordinate;this.jd(t.pixel,t.map,n),this.sd.length=0,this.rd=null;var i=this.kp;if(i){var r=t.map.getView().getProjection(),e=[],s=i.getGeometry().getCoordinates(),u=yn([s]),a=this.ed.getInExtent(u),h={};a.sort(Tj);for(var f=0,c=a.length;f<c;++f){var l=a[f],v=l.segment,p=o(l.geometry),d=l.depth;if(d&&(p+="-"+d.join("-")),h[p]||(h[p]=new Array(2)),"Circle"!==l.geometry.getType()||1!==l.index)if(!Ki(v[0],s)||h[p][0])if(!Ki(v[1],s)||h[p][1])o(v)in this.Jp&&!h[p][0]&&!h[p][1]&&this.Hp(t)&&e.push(l);else{if(h[p][0]&&0===h[p][0].index){var y=l.geometry.getCoordinates();switch(l.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":y=y[d[1]];case"Polygon":if(l.index!==y[d[0]].length-2)continue}}this.sd.push([l,1]),h[p][1]=l}else this.sd.push([l,0]),h[p][0]=l;else Ki(Aj(n,l,r),s)&&!h[p][0]&&(this.sd.push([l,0]),h[p][0]=l)}e.length&&this.Ed(t,[e]);for(var m=e.length-1;m>=0;--m)this.kd(e[m],s)}return!!this.kp},n.prototype.handleUpEvent=function(t){for(var n=this.sd.length-1;n>=0;--n){var i=this.sd[n][0],r=i.geometry;if("Circle"===r.getType()){var e=r.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=e,o.segment[1]=e,s.segment[0]=e,s.segment[1]=e,this.ed.update(En(e),o);var u=r,a=Cr();if(a){var h=t.map.getView().getProjection();u=Qe(u=u.clone().transform(a,h)).transform(h,a)}this.ed.update(u.getExtent(),s)}else this.ed.update(yn(i.segment),i)}return this.rd&&(this.dispatchEvent(new jj(Oj,this.rd,t)),this.rd=null),!1},n.prototype.Wn=function(t){this.Qp=t.pixel,this.jd(t.pixel,t.map,t.coordinate)},n.prototype.jd=function(t,n,i){var r,e,s=this,u=i||n.getCoordinateFromPixel(t),a=n.getView().getProjection();if(this.wd){var h="object"==typeof this.wd?function(t){return t===s.wd}:void 0;n.forEachFeatureAtPixel(t,(function(t,n,i){if("Point"===(i=i||t.getGeometry()).getType()&&y(s.Re.getArray(),t)){e=i;var o=i.getFlatCoordinates().slice(0,2);r=[{feature:t,geometry:i,segment:[o,o]}]}return!0}),{layerFilter:h})}if(!r){var f=Nr(mn(zr(En(u,_j),a),n.getView().getResolution()*this.Pp,_j),a);r=this.ed.getInExtent(f)}if(r&&r.length>0){var c=r.sort((function(t,n){return Pj(u,t,a)-Pj(u,n,a)}))[0],l=c.segment,v=Aj(u,c,a),p=n.getPixelFromCoordinate(v),d=tr(t,p);if(e||d<=this.Pp){var m={};if(m[o(l)]=!0,this.Od||(this.Br[0]=v[0]-u[0],this.Br[1]=v[1]-u[1]),"Circle"===c.geometry.getType()&&1===c.index)this.Ap=!0,this.Ad(v,[c.feature],[c.geometry]);else{var w=n.getPixelFromCoordinate(l[0]),g=n.getPixelFromCoordinate(l[1]),b=Qi(p,w),x=Qi(p,g);d=Math.sqrt(Math.min(b,x)),this.Ap=d<=this.Pp,this.Ap&&(v=b>x?l[1]:l[0]),this.Ad(v,[c.feature],[c.geometry]);var _={};_[o(c.geometry)]=!0;for(var M=1,S=r.length;M<S;++M){var O=r[M].segment;if(!(Ki(l[0],O[0])&&Ki(l[1],O[1])||Ki(l[0],O[1])&&Ki(l[1],O[0])))break;var j=o(r[M].geometry);j in _||(_[j]=!0,m[o(O)]=!0)}}return void(this.Jp=m)}}this.kp&&(this.mp.getSource().removeFeature(this.kp),this.kp=null)},n.prototype.kd=function(t,n){for(var i,r=t.segment,e=t.feature,o=t.geometry,s=t.depth,u=t.index;n.length<o.getStride();)n.push(0);switch(o.getType()){case"MultiLineString":case"Polygon":(i=o.getCoordinates())[s[0]].splice(u+1,0,n);break;case"MultiPolygon":(i=o.getCoordinates())[s[1]][s[0]].splice(u+1,0,n);break;case"LineString":(i=o.getCoordinates()).splice(u+1,0,n);break;default:return}this.Cd(o,i);var a=this.ed;a.remove(t),this.Id(o,u,s,1);var h={segment:[r[0],n],feature:e,geometry:o,depth:s,index:u};a.insert(yn(h.segment),h),this.sd.push([h,1]);var f={segment:[n,r[1]],feature:e,geometry:o,depth:s,index:u+1};a.insert(yn(f.segment),f),this.sd.push([f,0]),this.td=!0},n.prototype.removePoint=function(){if(this.Sd&&this.Sd.type!=vu.POINTERDRAG){var t=this.Sd;this.Ed(t,this.sd);var n=this.Nd();return this.rd&&this.dispatchEvent(new jj(Oj,this.rd,t)),this.rd=null,n}return!1},n.prototype.Nd=function(){var t,n,i,r,e,s,u,a,h,f,c,l=this.sd,v={},p=!1;for(e=l.length-1;e>=0;--e)c=o((f=(i=l[e])[0]).feature),f.depth&&(c+="-"+f.depth.join("-")),c in v||(v[c]={}),0===i[1]?(v[c].right=f,v[c].index=f.index):1==i[1]&&(v[c].left=f,v[c].index=f.index+1);for(c in v){switch(h=v[c].right,u=v[c].left,(a=(s=v[c].index)-1)<0&&(a=0),t=n=(r=(f=void 0!==u?u:h).geometry).getCoordinates(),p=!1,r.getType()){case"MultiLineString":n[f.depth[0]].length>2&&(n[f.depth[0]].splice(s,1),p=!0);break;case"LineString":n.length>2&&(n.splice(s,1),p=!0);break;case"MultiPolygon":t=t[f.depth[1]];case"Polygon":(t=t[f.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),p=!0,0===s&&(t.pop(),t.push(t[0]),a=t.length-1))}if(p){this.Cd(r,n);var d=[];if(void 0!==u&&(this.ed.remove(u),d.push(u.segment[0])),void 0!==h&&(this.ed.remove(h),d.push(h.segment[1])),void 0!==u&&void 0!==h){var y={depth:f.depth,feature:f.feature,geometry:f.geometry,index:a,segment:d};this.ed.insert(yn(y.segment),y)}this.Id(r,s,f.depth,-1),this.kp&&(this.mp.getSource().removeFeature(this.kp),this.kp=null),l.length=0}}return p},n.prototype.Cd=function(t,n){this.od=!0,t.setCoordinates(n),this.od=!1},n.prototype.Id=function(t,n,i,r){this.ed.forEachInExtent(t.getExtent(),(function(e){e.geometry===t&&(void 0===i||void 0===e.depth||x(e.depth,i))&&e.index>n&&(e.index+=r)}))},n}(Ia);function Tj(t,n){return t.index-n.index}function Pj(t,n,i){var r=n.geometry;if("Circle"===r.getType()){var e=r;if(1===n.index){var o=Cr();o&&(e=e.clone().transform(o,i));var s=Qi(e.getCenter(),Ir(t,i)),u=Math.sqrt(s)-e.getRadius();return u*u}}var a=Ir(t,i);return Mj[0]=Ir(n.segment[0],i),Mj[1]=Ir(n.segment[1],i),nr(a,Mj)}function Aj(t,n,i){var r=n.geometry;if("Circle"===r.getType()&&1===n.index){var e=r,o=Cr();return o&&(e=e.clone().transform(o,i)),kr(e.getClosestPoint(Ir(t,i)),i)}var s=Ir(t,i);return Mj[0]=Ir(n.segment[0],i),Mj[1]=Ir(n.segment[1],i),kr(Vi(s,Mj),i)}var Cj=Ej,kj=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ij="select",Nj=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=e,o}return kj(n,t),n}(c),zj={},Lj=function(t){function n(n){var i=t.call(this)||this;i.on,i.once,i.un;var r,e,o=n||{};if(i.zd=i.xd.bind(i),i.Ld=i.Td.bind(i),i.Wr=o.condition?o.condition:qa,i.Rd=o.addCondition?o.addCondition:Ua,i.Fd=o.removeCondition?o.removeCondition:Ua,i.Gd=o.toggleCondition?o.toggleCondition:Xa,i.Dd=!!o.multi&&o.multi,i.Ud=o.filter?o.filter:S,i.qd=o.hitTolerance?o.hitTolerance:0,i.H=void 0!==o.style?o.style:(g((r=Zv()).Polygon,r.LineString),g(r.GeometryCollection,r.LineString),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.Re=o.features||new ct,o.layers)if("function"==typeof o.layers)e=o.layers;else{var s=o.layers;e=function(t){return y(s,t)}}else e=S;return i.Bd=e,i.Xd={},i}return kj(n,t),n.prototype.Yd=function(t,n){this.Xd[o(t)]=n},n.prototype.getFeatures=function(){return this.Re},n.prototype.getHitTolerance=function(){return this.qd},n.prototype.getLayer=function(t){return this.Xd[o(t)]},n.prototype.setHitTolerance=function(t){this.qd=t},n.prototype.setMap=function(n){this.getMap()&&this.H&&this.Re.forEach(this.Zd.bind(this)),t.prototype.setMap.call(this,n),n?(this.Re.addEventListener(ot,this.zd),this.Re.addEventListener(st,this.Ld),this.H&&this.Re.forEach(this.Vd.bind(this))):(this.Re.removeEventListener(ot,this.zd),this.Re.removeEventListener(st,this.Ld))},n.prototype.xd=function(t){var n=t.element;if(this.H&&this.Vd(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find((function(t){if(t instanceof ex&&t.getSource()&&t.getSource().hasFeature(n))return t}));i&&this.Yd(n,i)}},n.prototype.Td=function(t){var n=t.element;this.H&&this.Zd(n)},n.prototype.getStyle=function(){return this.H},n.prototype.Vd=function(t){var n=o(t);n in zj||(zj[n]=t.getStyle()),t.setStyle(this.H)},n.prototype.Zd=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var e=i[r];if(e!==this&&e instanceof n&&e.getStyle()&&-1!==e.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(e.getStyle())}var s=o(t);t.setStyle(zj[s]),delete zj[s]},n.prototype.Wd=function(t){delete this.Xd[o(t)]},n.prototype.handleEvent=function(t){if(!this.Wr(t))return!0;var n=this.Rd(t),i=this.Fd(t),r=this.Gd(t),e=!n&&!i&&!r,o=t.map,s=this.getFeatures(),u=[],a=[];if(e){A(this.Xd),o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.Ud(t,n))return this.Yd(t,n),a.push(t),!this.Dd}.bind(this),{layerFilter:this.Bd,hitTolerance:this.qd});for(var h=s.getLength()-1;h>=0;--h){var f=s.item(h),c=a.indexOf(f);c>-1?a.splice(c,1):(s.remove(f),u.push(f))}0!==a.length&&s.extend(a)}else{o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.Ud(t,e))return!n&&!r||y(s.getArray(),t)?(i||r)&&y(s.getArray(),t)&&(u.push(t),this.Wd(t)):(this.Yd(t,e),a.push(t)),!this.Dd}.bind(this),{layerFilter:this.Bd,hitTolerance:this.qd});for(var l=u.length-1;l>=0;--l)s.remove(u[l]);s.extend(a)}return(a.length>0||u.length>0)&&this.dispatchEvent(new Nj(Ij,a,u,t)),!0},n}(Ta);var Rj=Lj,Fj=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function Gj(t){return t.feature?t.feature:t.element?t.element:void 0}var Dj=[],Uj=function(t){function n(n){var i=this,r=n||{},e=r;return e.handleDownEvent||(e.handleDownEvent=S),e.stopDown||(e.stopDown=O),(i=t.call(this,e)||this).Xv=r.source?r.source:null,i.$d=void 0===r.vertex||r.vertex,i.Kd=void 0===r.edge||r.edge,i.Re=r.features?r.features:null,i.Hd=[],i.Jd={},i.Qd={},i.ty={},i.Pp=void 0!==r.pixelTolerance?r.pixelTolerance:10,i.ed=new tp,i.ny={Point:i.iy.bind(i),LineString:i.ey.bind(i),LinearRing:i.ey.bind(i),Polygon:i.oy.bind(i),MultiPoint:i.sy.bind(i),MultiLineString:i.uy.bind(i),MultiPolygon:i.hy.bind(i),GeometryCollection:i.ly.bind(i),Circle:i.vy.bind(i)},i}return Fj(n,t),n.prototype.addFeature=function(t,n){var i=void 0===n||n,r=o(t),e=t.getGeometry();if(e){var s=this.ny[e.getType()];if(s){this.Qd[r]=e.getExtent([1/0,1/0,-1/0,-1/0]);var u=[];if(s(u,e),1===u.length)this.ed.insert(yn(u[0]),{feature:t,segment:u[0]});else if(u.length>1){var a=u.map((function(t){return yn(t)})),h=u.map((function(n){return{feature:t,segment:n}}));this.ed.load(a,h)}}}i&&(this.Jd[r]=$(t,z,this.$a,this))},n.prototype.py=function(t){this.addFeature(t)},n.prototype.yy=function(t){this.removeFeature(t)},n.prototype.my=function(){var t;return this.Re?t=this.Re:this.Xv&&(t=this.Xv.getFeatures()),t},n.prototype.handleEvent=function(n){var i=this.snapTo(n.pixel,n.coordinate,n.map);return i&&(n.coordinate=i.vertex.slice(0,2),n.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,n)},n.prototype._d=function(t){var n=Gj(t);this.addFeature(n)},n.prototype.Md=function(t){var n=Gj(t);this.removeFeature(n)},n.prototype.$a=function(t){var n=t.target;if(this.handlingDownUpSequence){var i=o(n);i in this.ty||(this.ty[i]=n)}else this.wy(n)},n.prototype.handleUpEvent=function(t){var n=C(this.ty);return n.length&&(n.forEach(this.wy.bind(this)),this.ty={}),!1},n.prototype.removeFeature=function(t,n){var i=void 0===n||n,r=o(t),e=this.Qd[r];if(e){var s=this.ed,u=[];s.forEachInExtent(e,(function(n){t===n.feature&&u.push(n)}));for(var a=u.length-1;a>=0;--a)s.remove(u[a])}i&&(H(this.Jd[r]),delete this.Jd[r])},n.prototype.setMap=function(n){var i=this.getMap(),r=this.Hd,e=this.my();i&&(r.forEach(H),r.length=0,e.forEach(this.yy.bind(this))),t.prototype.setMap.call(this,n),n&&(this.Re?r.push($(this.Re,ot,this._d,this),$(this.Re,st,this.Md,this)):this.Xv&&r.push($(this.Xv,Ep,this._d,this),$(this.Xv,Ap,this.Md,this)),e.forEach(this.py.bind(this)))},n.prototype.snapTo=function(t,n,i){var r=yn([i.getCoordinateFromPixel([t[0]-this.Pp,t[1]+this.Pp]),i.getCoordinateFromPixel([t[0]+this.Pp,t[1]-this.Pp])]),e=this.ed.getInExtent(r),o=e.length;if(0===o)return null;var s,u=i.getView().getProjection(),a=Ir(n,u),h=1/0,f=this.Pp*this.Pp,c=function(){if(s){var n=i.getPixelFromCoordinate(s);if(Qi(t,n)<=f)return{vertex:s,vertexPixel:[Math.round(n[0]),Math.round(n[1])]}}return null};if(this.$d){for(var l=0;l<o;++l){"Circle"!==(v=e[l]).feature.getGeometry().getType()&&v.segment.forEach((function(t){var n=Ir(t,u),i=Qi(a,n);i<h&&(s=t,h=i)}))}if(x=c())return x}if(this.Kd){for(l=0;l<o;++l){var v,p=null;if("Circle"===(v=e[l]).feature.getGeometry().getType()){var d=v.feature.getGeometry(),y=Cr();y&&(d=d.clone().transform(y,u)),p=kr(Zi(a,d),u)}else{var m=v.segment,w=m[0],g=m[1];g&&(Dj[0]=Ir(w,u),Dj[1]=Ir(g,u),p=Vi(a,Dj))}if(p){var b=Qi(a,p);b<h&&(s=p,h=b)}}var x;if(x=c())return x}return null},n.prototype.wy=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},n.prototype.vy=function(t,n){var i=this.getMap().getView().getProjection(),r=n,e=Cr();e&&(r=r.clone().transform(e,i));var o=Qe(r);e&&o.transform(i,e);for(var s=o.getCoordinates()[0],u=0,a=s.length-1;u<a;++u)t.push(s.slice(u,u+2))},n.prototype.ly=function(t,n){for(var i=n.getGeometriesArray(),r=0;r<i.length;++r){var e=this.ny[i[r].getType()];e&&e(t,i[r])}},n.prototype.ey=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length-1;r<e;++r)t.push(i.slice(r,r+2))},n.prototype.uy=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s)t.push(o.slice(s,s+2))},n.prototype.sy=function(t,n){n.getCoordinates().forEach((function(n){t.push([n])}))},n.prototype.hy=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length;s<u;++s)for(var a=o[s],h=0,f=a.length-1;h<f;++h)t.push(a.slice(h,h+2))},n.prototype.iy=function(t,n){t.push([n.getCoordinates()])},n.prototype.oy=function(t,n){for(var i=n.getCoordinates(),r=0,e=i.length;r<e;++r)for(var o=i[r],s=0,u=o.length-1;s<u;++s)t.push(o.slice(s,s+2))},n}(Ia),qj=Uj,Bj=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Xj="translatestart",Yj="translating",Zj="translateend",Vj=function(t){function n(n,i,r,e,o){var s=t.call(this,n)||this;return s.features=i,s.coordinate=r,s.startCoordinate=e,s.mapBrowserEvent=o,s}return Bj(n,t),n}(c),Wj=function(t){function n(n){var i,r=this,e=n||{};if((r=t.call(this,e)||this).on,r.once,r.un,r.gy=null,r.xy=null,r.Re=void 0!==e.features?e.features:null,e.layers&&!r.Re)if("function"==typeof e.layers)i=e.layers;else{var o=e.layers;i=function(t){return y(o,t)}}else i=S;return r.Bd=i,r.Ud=e.filter&&!r.Re?e.filter:S,r.qd=e.hitTolerance?e.hitTolerance:0,r.Wr=e.condition?e.condition:Ga,r._y=null,r.addChangeListener(Sa,r.My),r}return Bj(n,t),n.prototype.handleDownEvent=function(t){if(!t.originalEvent||!this.Wr(t))return!1;if(this._y=this.Sy(t.pixel,t.map),!this.gy&&this._y){this.xy=t.coordinate,this.gy=t.coordinate,this.handleMoveEvent(t);var n=this.Re||new ct([this._y]);return this.dispatchEvent(new Vj(Xj,n,t.coordinate,this.xy,t)),!0}return!1},n.prototype.handleUpEvent=function(t){if(this.gy){this.gy=null,this.handleMoveEvent(t);var n=this.Re||new ct([this._y]);return this.dispatchEvent(new Vj(Zj,n,t.coordinate,this.xy,t)),this.xy=null,!0}return!1},n.prototype.handleDragEvent=function(t){if(this.gy){var n=t.coordinate,i=n[0]-this.gy[0],r=n[1]-this.gy[1],e=this.Re||new ct([this._y]);e.forEach((function(t){var n=t.getGeometry();n.translate(i,r),t.setGeometry(n)})),this.gy=n,this.dispatchEvent(new Vj(Yj,e,n,this.xy,t))}},n.prototype.handleMoveEvent=function(t){var n=t.map.getViewport();this.Sy(t.pixel,t.map)?(n.classList.remove(this.gy?"ol-grab":"ol-grabbing"),n.classList.add(this.gy?"ol-grabbing":"ol-grab")):n.classList.remove("ol-grab","ol-grabbing")},n.prototype.Sy=function(t,n){return n.forEachFeatureAtPixel(t,function(t,n){if(this.Ud(t,n)&&(!this.Re||y(this.Re.getArray(),t)))return t}.bind(this),{layerFilter:this.Bd,hitTolerance:this.qd})},n.prototype.getHitTolerance=function(){return this.qd},n.prototype.setHitTolerance=function(t){this.qd=t},n.prototype.setMap=function(n){var i=this.getMap();t.prototype.setMap.call(this,n),this.gp(i)},n.prototype.My=function(){this.gp(null)},n.prototype.gp=function(t){var n=this.getMap(),i=this.getActive();n&&i||(n=n||t)&&n.getViewport().classList.remove("ol-grab","ol-grabbing")},n}(Ia);function $j(t,n,i,r,e,o){var s,u;void 0!==e?(s=e,u=void 0!==o?o:0):(s=[],u=0);for(var a=n;a<i;){var h=t[a++];s[u++]=t[a++],s[u++]=h;for(var f=2;f<r;++f)s[u++]=t[a++]}return s.length=u,s}var Kj=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hj={Point:function(t){var n;n=void 0!==t.m&&void 0!==t.z?new Te([t.x,t.y,t.z,t.m],"XYZM"):void 0!==t.z?new Te([t.x,t.y,t.z],"XYZ"):void 0!==t.m?new Te([t.x,t.y,t.m],"XYM"):new Te([t.x,t.y]);return n},LineString:function(t){var n=tE(t);return new Yb(t.paths[0],n)},Polygon:function(t){var n=tE(t);return new Ke(t.rings,n)},MultiPoint:function(t){var n=tE(t);return new Gb(t.points,n)},MultiLineString:function(t){var n=tE(t);return new Wb(t.paths,n)},MultiPolygon:function(t){var n=tE(t);return new Jb(t.rings,n)}},Jj={Point:function(t,n){var i,r=t.getCoordinates(),e=t.getLayout();"XYZ"===e?i={x:r[0],y:r[1],z:r[2]}:"XYM"===e?i={x:r[0],y:r[1],m:r[2]}:"XYZM"===e?i={x:r[0],y:r[1],z:r[2],m:r[3]}:"XY"===e?i={x:r[0],y:r[1]}:Et(!1,34);return i},LineString:function(t,n){var i=nE(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},Polygon:function(t,n){var i=nE(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},MultiPoint:function(t,n){var i=nE(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},MultiLineString:function(t,n){var i=nE(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},MultiPolygon:function(t,n){for(var i=nE(t),r=t.getCoordinates(!1),e=[],o=0;o<r.length;o++)for(var s=r[o].length-1;s>=0;s--)e.push(r[o][s]);return{hasZ:i.hasZ,hasM:i.hasM,rings:e}}};function Qj(t,n){var i,r,e;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)e="Point";else if(t.points)e="MultiPoint";else if(t.paths){e=1===t.paths.length?"LineString":"MultiLineString"}else if(t.rings){var o=t,s=tE(o),u=function(t,n){var i,r,e=[],o=[],s=[];for(i=0,r=t.length;i<r;++i){e.length=0,ue(e,0,t[i],n.length),qe(e,0,e.length,n.length)?o.push([t[i]]):s.push(t[i])}for(;s.length;){var u=s.shift(),a=!1;for(i=o.length-1;i>=0;i--){var h=o[i][0];if(xn(new Oe(h).getExtent(),new Oe(u).getExtent())){o[i].push(u),a=!0;break}}a||o.push([u.reverse()])}return o}(o.rings,s);1===u.length?(e="Polygon",t=P({},t,((i={}).rings=u[0],i))):(e="MultiPolygon",t=P({},t,((r={}).rings=u,r)))}return xx((0,Hj[e])(t),!1,n)}function tE(t){var n="XY";return!0===t.hasZ&&!0===t.hasM?n="XYZM":!0===t.hasZ?n="XYZ":!0===t.hasM&&(n="XYM"),n}function nE(t){var n=t.getLayout();return{hasZ:"XYZ"===n||"XYZM"===n,hasM:"XYM"===n||"XYZM"===n}}function iE(t,n){return(0,Jj[t.getType()])(xx(t,!0,n),n)}var rE=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this)||this).K=r.geometryName,i}return Kj(n,t),n.prototype.readFeatureFromObject=function(t,n,i){var r=t,e=Qj(r.geometry,n),o=new Ct;if(this.K&&o.setGeometryName(this.K),o.setGeometry(e),r.attributes){o.setProperties(r.attributes,!0);var s=r.attributes[i];void 0!==s&&o.setId(s)}return o},n.prototype.readFeaturesFromObject=function(t,n){var i=n||{};if(t.features){for(var r=[],e=t.features,o=0,s=e.length;o<s;++o)r.push(this.readFeatureFromObject(e[o],i,t.objectIdFieldName));return r}return[this.readFeatureFromObject(t,i)]},n.prototype.readGeometryFromObject=function(t,n){return Qj(t,n)},n.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?yr("EPSG:"+t.spatialReference.wkid):null},n.prototype.writeGeometryObject=function(t,n){return iE(t,this.adaptOptions(n))},n.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={};if(!t.hasProperties())return i.attributes={},i;var r=t.getProperties(),e=t.getGeometry();if(e){i.geometry=iE(e,n);var o=n&&(n.dataProjection||n.featureProjection);o&&(i.geometry.spatialReference={wkid:Number(yr(o).getCode().split(":").pop())}),delete r[t.getGeometryName()]}return k(r)?i.attributes={}:i.attributes=r,i},n.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(this.writeFeatureObject(t[r],n));return{features:i}},n}(Rx),eE=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oE=function(t){function n(){var n=t.call(this)||this;return n.Oy=Ic(),n}return eE(n,t),n.prototype.getType=function(){return"xml"},n.prototype.readFeature=function(t,n){if(t){if("string"==typeof t){var i=yc(t);return this.readFeatureFromDocument(i,n)}return pc(t)?this.readFeatureFromDocument(t,n):this.readFeatureFromNode(t,n)}return null},n.prototype.readFeatureFromDocument=function(t,n){var i=this.readFeaturesFromDocument(t,n);return i.length>0?i[0]:null},n.prototype.readFeatureFromNode=function(t,n){return null},n.prototype.readFeatures=function(t,n){if(t){if("string"==typeof t){var i=yc(t);return this.readFeaturesFromDocument(i,n)}return pc(t)?this.readFeaturesFromDocument(t,n):this.readFeaturesFromNode(t,n)}return[]},n.prototype.readFeaturesFromDocument=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&g(i,this.readFeaturesFromNode(r,n));return i},n.prototype.readFeaturesFromNode=function(t,n){return r()},n.prototype.readGeometry=function(t,n){if(t){if("string"==typeof t){var i=yc(t);return this.readGeometryFromDocument(i,n)}return pc(t)?this.readGeometryFromDocument(t,n):this.readGeometryFromNode(t,n)}return null},n.prototype.readGeometryFromDocument=function(t,n){return null},n.prototype.readGeometryFromNode=function(t,n){return null},n.prototype.readProjection=function(t){if(t){if("string"==typeof t){var n=yc(t);return this.readProjectionFromDocument(n)}return pc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},n.prototype.readProjectionFromDocument=function(t){return this.dataProjection},n.prototype.readProjectionFromNode=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){var i=this.writeFeatureNode(t,n);return this.Oy.serializeToString(i)},n.prototype.writeFeatureNode=function(t,n){return null},n.prototype.writeFeatures=function(t,n){var i=this.writeFeaturesNode(t,n);return this.Oy.serializeToString(i)},n.prototype.writeFeaturesNode=function(t,n){return null},n.prototype.writeGeometry=function(t,n){var i=this.writeGeometryNode(t,n);return this.Oy.serializeToString(i)},n.prototype.writeGeometryNode=function(t,n){return null},n}(bx),sE=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uE="http://www.opengis.net/gml",aE=/^[\s\xa0]*$/,hE=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.featureType=r.featureType,i.featureNS=r.featureNS,i.srsName=r.srsName,i.schemaLocation="",i.FEATURE_COLLECTION_PARSERS={},i.FEATURE_COLLECTION_PARSERS[i.namespace]={featureMember:wc(i.readFeaturesInternal),featureMembers:gc(i.readFeaturesInternal)},i.supportedMediaTypes=["application/gml+xml"],i}return sE(n,t),n.prototype.readFeaturesInternal=function(t,n){var i=t.localName,r=null;if("FeatureCollection"==i)r=Pc([],this.FEATURE_COLLECTION_PARSERS,t,n,this);else if("featureMembers"==i||"featureMember"==i||"member"==i){var e=n[0],o=e.featureType,s=e.featureNS;if(!o&&t.childNodes){o=[],s={};for(var u=0,a=t.childNodes.length;u<a;++u){var h=t.childNodes[u];if(1===h.nodeType){var f=h.nodeName.split(":").pop();if(-1===o.indexOf(f)){var c="",l=0,v=h.namespaceURI;for(var p in s){if(s[p]===v){c=p;break}++l}c||(s[c="p"+l]=v),o.push(c+":"+f)}}}"featureMember"!=i&&(e.featureType=o,e.featureNS=s)}if("string"==typeof s){var d=s;(s={}).p0=d}var y={},m=Array.isArray(o)?o:[o];for(var w in s){var g={};for(u=0,a=m.length;u<a;++u){(-1===m[u].indexOf(":")?"p0":m[u].split(":")[0])===w&&(g[m[u].split(":").pop()]="featureMembers"==i?wc(this.readFeatureElement,this):gc(this.readFeatureElement,this))}y[s[w]]=g}r=Pc("featureMember"==i||"member"==i?void 0:[],y,t,n)}return null===r&&(r=[]),r},n.prototype.readGeometryOrExtent=function(t,n){var i=n[0];return i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension"),Pc(null,this.GEOMETRY_PARSERS,t,n,this)},n.prototype.readExtentElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?_x(r,i):void 0},n.prototype.readGeometryElement=function(t,n){var i=n[0],r=this.readGeometryOrExtent(t,n);return r?xx(r,!1,i):void 0},n.prototype.readFeatureElementInternal=function(t,n,i){for(var r,e={},o=t.firstElementChild;o;o=o.nextElementSibling){var s=void 0,u=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(s=lc(o,!1),aE.test(s)&&(s=void 0)):(i&&(s="boundedBy"===u?this.readExtentElement(o,n):this.readGeometryElement(o,n)),s?"boundedBy"!==u&&(r=u):s=this.readFeatureElementInternal(o,n,!1));var a=o.attributes.length;if(a>0){s={jy:s};for(var h=0;h<a;h++){s[o.attributes[h].name]=o.attributes[h].value}}e[u]?(e[u]instanceof Array||(e[u]=[e[u]]),e[u].push(s)):e[u]=s}if(i){var f=new Ct(e);r&&f.setGeometryName(r);var c=t.getAttribute("fid")||dc(t,this.namespace,"id");return c&&f.setId(c),f}return e},n.prototype.readFeatureElement=function(t,n){return this.readFeatureElementInternal(t,n,!0)},n.prototype.readPoint=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new Te(i,"XYZ")},n.prototype.readMultiPoint=function(t,n){var i=Pc([],this.MULTIPOINT_PARSERS,t,n,this);return i?new Gb(i):void 0},n.prototype.readMultiLineString=function(t,n){var i=Pc([],this.MULTILINESTRING_PARSERS,t,n,this);if(i)return new Wb(i)},n.prototype.readMultiPolygon=function(t,n){var i=Pc([],this.MULTIPOLYGON_PARSERS,t,n,this);if(i)return new Jb(i)},n.prototype.pointMemberParser=function(t,n){Tc(this.POINTMEMBER_PARSERS,t,n,this)},n.prototype.lineStringMemberParser=function(t,n){Tc(this.LINESTRINGMEMBER_PARSERS,t,n,this)},n.prototype.polygonMemberParser=function(t,n){Tc(this.POLYGONMEMBER_PARSERS,t,n,this)},n.prototype.readLineString=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);return i?new Yb(i,"XYZ"):void 0},n.prototype.readFlatLinearRing=function(t,n){var i=Pc(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this);return i||void 0},n.prototype.readLinearRing=function(t,n){var i=this.readFlatCoordinatesFromNode(t,n);if(i)return new Oe(i,"XYZ")},n.prototype.readPolygon=function(t,n){var i=Pc([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],s=void 0;for(s=1,r=i.length;s<r;++s)g(e,i[s]),o.push(e.length);return new Ke(e,"XYZ",o)}},n.prototype.readFlatCoordinatesFromNode=function(t,n){return Pc(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.readGeometryFromNode=function(t,n){var i=this.readGeometryElement(t,[this.getReadOptions(t,n||{})]);return i||null},n.prototype.readFeaturesFromNode=function(t,n){var i={featureType:this.featureType,featureNS:this.featureNS};return n&&P(i,this.getReadOptions(t,n)),this.readFeaturesInternal(t,[i])||[]},n.prototype.readProjectionFromNode=function(t){return yr(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},n}(oE);hE.prototype.namespace=uE,hE.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},hE.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},hE.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},hE.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:wc(hE.prototype.pointMemberParser),pointMembers:wc(hE.prototype.pointMemberParser)}},hE.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:wc(hE.prototype.lineStringMemberParser),lineStringMembers:wc(hE.prototype.lineStringMemberParser)}},hE.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:wc(hE.prototype.polygonMemberParser),polygonMembers:wc(hE.prototype.polygonMemberParser)}},hE.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:wc(hE.prototype.readFlatCoordinatesFromNode)}},hE.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:wc(hE.prototype.readLineString)}},hE.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:wc(hE.prototype.readPolygon)}},hE.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:gc(hE.prototype.readFlatLinearRing)}};var fE=hE;function cE(t){return lE(lc(t,!1))}function lE(t){var n=/^\s*(true|1)|(false|0)\s*$/.exec(t);return n?void 0!==n[1]||!1:void 0}function vE(t){var n=lc(t,!1),i=Date.parse(n);return isNaN(i)?void 0:i/1e3}function pE(t){return dE(lc(t,!1))}function dE(t){var n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return n?parseFloat(n[1]):void 0}function yE(t){return mE(lc(t,!1))}function mE(t){var n=/^\s*(\d+)\s*$/.exec(t);return n?parseInt(n[1],10):void 0}function wE(t){return lc(t,!1).trim()}function gE(t,n){SE(t,n?"1":"0")}function bE(t,n){t.appendChild(zc().createCDATASection(n))}function xE(t,n){var i=new Date(1e3*n),r=i.getUTCFullYear()+"-"+Bi(i.getUTCMonth()+1,2)+"-"+Bi(i.getUTCDate(),2)+"T"+Bi(i.getUTCHours(),2)+":"+Bi(i.getUTCMinutes(),2)+":"+Bi(i.getUTCSeconds(),2)+"Z";t.appendChild(zc().createTextNode(r))}function _E(t,n){var i=n.toPrecision();t.appendChild(zc().createTextNode(i))}function ME(t,n){var i=n.toString();t.appendChild(zc().createTextNode(i))}function SE(t,n){t.appendChild(zc().createTextNode(n))}var OE=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jE={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},EE=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).FEATURE_COLLECTION_PARSERS[uE].featureMember=wc(i.readFeaturesInternal),i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",i}return OE(n,t),n.prototype.readFlatCoordinates=function(t,n){var i=lc(t,!1).replace(/^\s*|\s*$/g,""),r=n[0].srsName,e="enu";if(r){var o=yr(r);o&&(e=o.getAxisOrientation())}for(var s=i.trim().split(/\s+/),u=[],a=0,h=s.length;a<h;a++){var f=s[a].split(/,+/),c=parseFloat(f[0]),l=parseFloat(f[1]),v=3===f.length?parseFloat(f[2]):0;"en"===e.substr(0,2)?u.push(c,l,v):u.push(l,c,v)}return u},n.prototype.readBox=function(t,n){var i=Pc([null],this.Ey,t,n,this);return On(i[1][0],i[1][1],i[1][3],i[1][4])},n.prototype.innerBoundaryIsParser=function(t,n){var i=Pc(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i)},n.prototype.outerBoundaryIsParser=function(t,n){var i=Pc(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i)},n.prototype.Ty=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,s=e.surface,u=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"MultiLineString"===r&&!0===u&&(r="MultiCurve"),cc("http://www.opengis.net/gml",r)},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,s=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var u=[],a=[];if(n.hasProperties()){var h=n.getProperties();for(var f in h){var c=h[f];null!==c&&(u.push(f),a.push(c),f==s||"function"==typeof c.getSimplifiedGeometry?f in e.serializers[o]||(e.serializers[o][f]=_c(this.writeGeometryElement,this)):f in e.serializers[o]||(e.serializers[o][f]=_c(SE)))}}var l=P({},e);l.node=t,Cc(l,e.serializers,Sc(void 0,o),a,i,u)},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=this.Py(t.namespaceURI);t.appendChild(e),this.Ay(e,n,i)}else if("Curve"===t.nodeName){var o=cc(t.namespaceURI,"segments");t.appendChild(o),this.Cy(o,n,i)}},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.Ty(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i))},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var u=n.getLineStrings();Cc({node:t,hasZ:e,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.ky,u,i,void 0,this)},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=P({},e);o.node=t,r=Array.isArray(n)?_x(n,e):xx(n,!0,e),Cc(o,this.GEOMETRY_SERIALIZERS,this.Ty,[r],i,void 0,this)},n.prototype.Py=function(t){var n=cc(t,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n},n.prototype.Ay=function(t,n,i){for(var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=n.getCoordinates(),u=s.length,a=new Array(u),h=0;h<u;++h){var f=s[h];a[h]=this.Iy(f,o,e)}SE(t,a.join(" "))},n.prototype.Cy=function(t,n,i){var r=cc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i)},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=n.getLinearRings();Cc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.Ny,s,i,void 0,this)}else if("Surface"===t.nodeName){var u=cc(t.namespaceURI,"patches");t.appendChild(u),this.zy(u,n,i)}},n.prototype.Ny=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),cc(e.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},n.prototype.zy=function(t,n,i){var r=cc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i)},n.prototype.writeRing=function(t,n,i){var r=cc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i)},n.prototype.Iy=function(t,n,i){var r="enu";n&&(r=yr(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];i&&(e+=","+(t[2]||0));return e},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=this.Py(t.namespaceURI);t.appendChild(s);var u=n.getCoordinates();SE(s,this.Iy(u,o,e))},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=n.getPoints();Cc({node:t,hasZ:e,srsName:o},this.POINTMEMBER_SERIALIZERS,Sc("pointMember"),s,i,void 0,this)},n.prototype.writePointMember=function(t,n,i){var r=cc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i)},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=this.Py(t.namespaceURI);t.appendChild(e),this.Ay(e,n,i)},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var u=n.getPolygons();Cc({node:t,hasZ:e,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.ky,u,i,void 0,this)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.Ty(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i))},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];Cc({node:t},this.ENVELOPE_SERIALIZERS,Oc,e,i,["lowerCorner","upperCorner"],this)},n.prototype.ky=function(t,n,i){var r=n[n.length-1].node;return cc("http://www.opengis.net/gml",jE[r.nodeName])},n}(fE);EE.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:gc(EE.prototype.readFlatCoordinates)}},EE.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:EE.prototype.innerBoundaryIsParser,outerBoundaryIs:EE.prototype.outerBoundaryIsParser}},EE.prototype.Ey={"http://www.opengis.net/gml":{coordinates:wc(EE.prototype.readFlatCoordinates)}},EE.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:gc(fE.prototype.readPoint),MultiPoint:gc(fE.prototype.readMultiPoint),LineString:gc(fE.prototype.readLineString),MultiLineString:gc(fE.prototype.readMultiLineString),LinearRing:gc(fE.prototype.readLinearRing),Polygon:gc(fE.prototype.readPolygon),MultiPolygon:gc(fE.prototype.readMultiPolygon),Box:gc(EE.prototype.readBox)}},EE.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:_c(EE.prototype.writeCurveOrLineString),MultiCurve:_c(EE.prototype.writeMultiCurveOrLineString),Point:_c(EE.prototype.writePoint),MultiPoint:_c(EE.prototype.writeMultiPoint),LineString:_c(EE.prototype.writeCurveOrLineString),MultiLineString:_c(EE.prototype.writeMultiCurveOrLineString),LinearRing:_c(EE.prototype.writeLinearRing),Polygon:_c(EE.prototype.writeSurfaceOrPolygon),MultiPolygon:_c(EE.prototype.writeMultiSurfaceOrPolygon),Surface:_c(EE.prototype.writeSurfaceOrPolygon),MultiSurface:_c(EE.prototype.writeMultiSurfaceOrPolygon),Envelope:_c(EE.prototype.writeEnvelope)}},EE.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:_c(EE.prototype.writeLineStringOrCurveMember),curveMember:_c(EE.prototype.writeLineStringOrCurveMember)}},EE.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:_c(EE.prototype.writeRing),innerBoundaryIs:_c(EE.prototype.writeRing)}},EE.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:_c(EE.prototype.writePointMember)}},EE.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:_c(EE.prototype.writeSurfaceOrPolygonMember),polygonMember:_c(EE.prototype.writeSurfaceOrPolygonMember)}},EE.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:_c(SE),upperCorner:_c(SE)}};var TE=EE,PE=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),AE={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},CE=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).Ly=void 0!==r.surface&&r.surface,i.Ry=void 0!==r.curve&&r.curve,i.Fy=void 0===r.multiCurve||r.multiCurve,i.Gy=void 0===r.multiSurface||r.multiSurface,i.schemaLocation=r.schemaLocation?r.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",i.hasZ=void 0!==r.hasZ&&r.hasZ,i}return PE(n,t),n.prototype.readMultiCurve=function(t,n){var i=Pc([],this.MULTICURVE_PARSERS,t,n,this);return i?new Wb(i):void 0},n.prototype.readFlatCurveRing=function(t,n){for(var i=Pc([],this.MULTICURVE_PARSERS,t,n,this),r=[],e=0,o=i.length;e<o;++e)g(r,i[e].getFlatCoordinates());return r},n.prototype.readMultiSurface=function(t,n){var i=Pc([],this.MULTISURFACE_PARSERS,t,n,this);if(i)return new Jb(i)},n.prototype.curveMemberParser=function(t,n){Tc(this.CURVEMEMBER_PARSERS,t,n,this)},n.prototype.surfaceMemberParser=function(t,n){Tc(this.SURFACEMEMBER_PARSERS,t,n,this)},n.prototype.readPatch=function(t,n){return Pc([null],this.PATCHES_PARSERS,t,n,this)},n.prototype.readSegment=function(t,n){return Pc([],this.SEGMENTS_PARSERS,t,n,this)},n.prototype.readPolygonPatch=function(t,n){return Pc([null],this.FLAT_LINEAR_RINGS_PARSERS,t,n,this)},n.prototype.readLineStringSegment=function(t,n){return Pc([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,n,this)},n.prototype.interiorParser=function(t,n){var i=Pc(void 0,this.RING_PARSERS,t,n,this);i&&n[n.length-1].push(i)},n.prototype.exteriorParser=function(t,n){var i=Pc(void 0,this.RING_PARSERS,t,n,this);i&&(n[n.length-1][0]=i)},n.prototype.readSurface=function(t,n){var i=Pc([null],this.SURFACE_PARSERS,t,n,this);if(i&&i[0]){var r,e=i[0],o=[e.length],s=void 0;for(s=1,r=i.length;s<r;++s)g(e,i[s]),o.push(e.length);return new Ke(e,"XYZ",o)}},n.prototype.readCurve=function(t,n){var i=Pc([null],this.CURVE_PARSERS,t,n,this);return i?new Yb(i,"XYZ"):void 0},n.prototype.readEnvelope=function(t,n){var i=Pc([null],this.ENVELOPE_PARSERS,t,n,this);return On(i[1][0],i[1][1],i[2][0],i[2][1])},n.prototype.readFlatPos=function(t,n){for(var i,r=lc(t,!1),e=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=e.exec(r);)o.push(parseFloat(i[1])),r=r.substr(i[0].length);if(""===r){var s=n[0].srsName,u="enu";if(s)u=yr(s).getAxisOrientation();if("neu"===u){var a,h=void 0;for(h=0,a=o.length;h<a;h+=3){var f=o[h],c=o[h+1];o[h]=c,o[h+1]=f}}var l=o.length;if(2==l&&o.push(0),0!==l)return o}},n.prototype.readFlatPosList=function(t,n){var i=lc(t,!1).replace(/^\s*|\s*$/g,""),r=n[0],e=r.srsName,o=r.srsDimension,s="enu";e&&(s=yr(e).getAxisOrientation());var u,a,h,f=i.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=mE(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=mE(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=mE(t.parentNode.getAttribute("srsDimension")):o&&(c=mE(o));for(var l=[],v=0,p=f.length;v<p;v+=c)u=parseFloat(f[v]),a=parseFloat(f[v+1]),h=3===c?parseFloat(f[v+2]):0,"en"===s.substr(0,2)?l.push(u,a,h):l.push(a,u,h);return l},n.prototype.Dy=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);var s=r.srsName,u="enu";s&&(u=yr(s).getAxisOrientation());var a,h=n.getCoordinates();(a="en"===u.substr(0,2)?h[0]+" "+h[1]:h[1]+" "+h[0],e)&&(a+=" "+(h[2]||0));SE(t,a)},n.prototype.Iy=function(t,n,i){var r="enu";n&&(r=yr(n).getAxisOrientation());var e="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];i&&(e+=" "+(t[2]||0));return e},n.prototype.Uy=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=e?"3":"2";t.setAttribute("srsDimension",o);for(var s,u=r.srsName,a=n.getCoordinates(),h=a.length,f=new Array(h),c=0;c<h;++c)s=a[c],f[c]=this.Iy(s,u,e);SE(t,f.join(" "))},n.prototype.writePoint=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=cc(t.namespaceURI,"pos");t.appendChild(e),this.Dy(e,n,i)},n.prototype.writeEnvelope=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=[n[0]+" "+n[1],n[2]+" "+n[3]];Cc({node:t},this.ENVELOPE_SERIALIZERS,Oc,e,i,["lowerCorner","upperCorner"],this)},n.prototype.writeLinearRing=function(t,n,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var e=cc(t.namespaceURI,"posList");t.appendChild(e),this.Uy(e,n,i)},n.prototype.Ny=function(t,n,i){var r=n[n.length-1],e=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),cc(e.namespaceURI,void 0!==o?"interior":"exterior")},n.prototype.writeSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=n.getLinearRings();Cc({node:t,hasZ:e,srsName:o},this.RING_SERIALIZERS,this.Ny,s,i,void 0,this)}else if("Surface"===t.nodeName){var u=cc(t.namespaceURI,"patches");t.appendChild(u),this.zy(u,n,i)}},n.prototype.writeCurveOrLineString=function(t,n,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var e=cc(t.namespaceURI,"posList");t.appendChild(e),this.Uy(e,n,i)}else if("Curve"===t.nodeName){var o=cc(t.namespaceURI,"segments");t.appendChild(o),this.Cy(o,n,i)}},n.prototype.writeMultiSurfaceOrPolygon=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var u=n.getPolygons();Cc({node:t,hasZ:e,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.ky,u,i,void 0,this)},n.prototype.writeMultiPoint=function(t,n,i){var r=i[i.length-1],e=r.srsName,o=r.hasZ;e&&t.setAttribute("srsName",e);var s=n.getPoints();Cc({node:t,hasZ:o,srsName:e},this.POINTMEMBER_SERIALIZERS,Sc("pointMember"),s,i,void 0,this)},n.prototype.writeMultiCurveOrLineString=function(t,n,i){var r=i[i.length-1],e=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var u=n.getLineStrings();Cc({node:t,hasZ:e,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.ky,u,i,void 0,this)},n.prototype.writeRing=function(t,n,i){var r=cc(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing(r,n,i)},n.prototype.writeSurfaceOrPolygonMember=function(t,n,i){var r=this.Ty(n,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i))},n.prototype.writePointMember=function(t,n,i){var r=cc(t.namespaceURI,"Point");t.appendChild(r),this.writePoint(r,n,i)},n.prototype.writeLineStringOrCurveMember=function(t,n,i){var r=this.Ty(n,i);r&&(t.appendChild(r),this.writeCurveOrLineString(r,n,i))},n.prototype.zy=function(t,n,i){var r=cc(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon(r,n,i)},n.prototype.Cy=function(t,n,i){var r=cc(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString(r,n,i)},n.prototype.writeGeometryElement=function(t,n,i){var r,e=i[i.length-1],o=P({},e);o.node=t,r=Array.isArray(n)?_x(n,e):xx(n,!0,e),Cc(o,this.GEOMETRY_SERIALIZERS,this.Ty,[r],i,void 0,this)},n.prototype.writeFeatureElement=function(t,n,i){var r=n.getId();r&&t.setAttribute("fid",r);var e=i[i.length-1],o=e.featureNS,s=n.getGeometryName();e.serializers||(e.serializers={},e.serializers[o]={});var u=[],a=[];if(n.hasProperties()){var h=n.getProperties();for(var f in h){var c=h[f];null!==c&&(u.push(f),a.push(c),f==s||"function"==typeof c.getSimplifiedGeometry?f in e.serializers[o]||(e.serializers[o][f]=_c(this.writeGeometryElement,this)):f in e.serializers[o]||(e.serializers[o][f]=_c(SE)))}}var l=P({},e);l.node=t,Cc(l,e.serializers,Sc(void 0,o),a,i,u)},n.prototype.qy=function(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,s={};s[o]={},s[o][e]=_c(this.writeFeatureElement,this);var u=P({},r);u.node=t,Cc(u,s,Sc(e,o),n,i)},n.prototype.ky=function(t,n,i){var r=n[n.length-1].node;return cc(this.namespace,AE[r.nodeName])},n.prototype.Ty=function(t,n,i){var r,e=n[n.length-1],o=e.multiSurface,s=e.surface,u=e.curve,a=e.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"LineString"===r&&!0===u?r="Curve":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),cc(this.namespace,r)},n.prototype.writeGeometryNode=function(t,n){n=this.adaptOptions(n);var i=cc(this.namespace,"geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.Ry,surface:this.Ly,multiSurface:this.Gy,multiCurve:this.Fy};return n&&P(r,n),this.writeGeometryElement(i,t,[r]),i},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=cc(this.namespace,"featureMembers");i.setAttributeNS(fc,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.Ry,surface:this.Ly,multiSurface:this.Gy,multiCurve:this.Fy,featureNS:this.featureNS,featureType:this.featureType};return n&&P(r,n),this.qy(i,t,[r]),i},n}(fE);CE.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:gc(CE.prototype.readFlatPos),posList:gc(CE.prototype.readFlatPosList),coordinates:gc(TE.prototype.readFlatCoordinates)}},CE.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:CE.prototype.interiorParser,exterior:CE.prototype.exteriorParser}},CE.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:gc(fE.prototype.readPoint),MultiPoint:gc(fE.prototype.readMultiPoint),LineString:gc(fE.prototype.readLineString),MultiLineString:gc(fE.prototype.readMultiLineString),LinearRing:gc(fE.prototype.readLinearRing),Polygon:gc(fE.prototype.readPolygon),MultiPolygon:gc(fE.prototype.readMultiPolygon),Surface:gc(CE.prototype.readSurface),MultiSurface:gc(CE.prototype.readMultiSurface),Curve:gc(CE.prototype.readCurve),MultiCurve:gc(CE.prototype.readMultiCurve),Envelope:gc(CE.prototype.readEnvelope)}},CE.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:wc(CE.prototype.curveMemberParser),curveMembers:wc(CE.prototype.curveMemberParser)}},CE.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:wc(CE.prototype.surfaceMemberParser),surfaceMembers:wc(CE.prototype.surfaceMemberParser)}},CE.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:wc(fE.prototype.readLineString),Curve:wc(CE.prototype.readCurve)}},CE.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:wc(fE.prototype.readPolygon),Surface:wc(CE.prototype.readSurface)}},CE.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:gc(CE.prototype.readPatch)}},CE.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:gc(CE.prototype.readSegment)}},CE.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:wc(CE.prototype.readFlatPosList),upperCorner:wc(CE.prototype.readFlatPosList)}},CE.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:gc(CE.prototype.readPolygonPatch)}},CE.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:mc(CE.prototype.readLineStringSegment)}},fE.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:gc(fE.prototype.readFlatLinearRing),Ring:gc(CE.prototype.readFlatCurveRing)}},CE.prototype.writeFeatures,CE.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:_c(CE.prototype.writeRing),interior:_c(CE.prototype.writeRing)}},CE.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:_c(SE),upperCorner:_c(SE)}},CE.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:_c(CE.prototype.writeSurfaceOrPolygonMember),polygonMember:_c(CE.prototype.writeSurfaceOrPolygonMember)}},CE.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:_c(CE.prototype.writePointMember)}},CE.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:_c(CE.prototype.writeLineStringOrCurveMember),curveMember:_c(CE.prototype.writeLineStringOrCurveMember)}},CE.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:_c(CE.prototype.writeCurveOrLineString),MultiCurve:_c(CE.prototype.writeMultiCurveOrLineString),Point:_c(CE.prototype.writePoint),MultiPoint:_c(CE.prototype.writeMultiPoint),LineString:_c(CE.prototype.writeCurveOrLineString),MultiLineString:_c(CE.prototype.writeMultiCurveOrLineString),LinearRing:_c(CE.prototype.writeLinearRing),Polygon:_c(CE.prototype.writeSurfaceOrPolygon),MultiPolygon:_c(CE.prototype.writeMultiSurfaceOrPolygon),Surface:_c(CE.prototype.writeSurfaceOrPolygon),MultiSurface:_c(CE.prototype.writeMultiSurfaceOrPolygon),Envelope:_c(CE.prototype.writeEnvelope)}};var kE=CE,IE=kE;IE.prototype.writeFeatures,IE.prototype.writeFeaturesNode;var NE=IE,zE=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),LE=function(t){function n(n){var i=this,r=n||{};return(i=t.call(this,r)||this).schemaLocation=r.schemaLocation?r.schemaLocation:i.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",i}return zE(n,t),n}(kE);LE.prototype.namespace="http://www.opengis.net/gml/3.2",LE.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:gc(kE.prototype.readFlatPos),posList:gc(kE.prototype.readFlatPosList),coordinates:gc(TE.prototype.readFlatCoordinates)}},LE.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:kE.prototype.interiorParser,exterior:kE.prototype.exteriorParser}},LE.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:gc(fE.prototype.readPoint),MultiPoint:gc(fE.prototype.readMultiPoint),LineString:gc(fE.prototype.readLineString),MultiLineString:gc(fE.prototype.readMultiLineString),LinearRing:gc(fE.prototype.readLinearRing),Polygon:gc(fE.prototype.readPolygon),MultiPolygon:gc(fE.prototype.readMultiPolygon),Surface:gc(LE.prototype.readSurface),MultiSurface:gc(kE.prototype.readMultiSurface),Curve:gc(LE.prototype.readCurve),MultiCurve:gc(kE.prototype.readMultiCurve),Envelope:gc(LE.prototype.readEnvelope)}},LE.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:wc(kE.prototype.curveMemberParser),curveMembers:wc(kE.prototype.curveMemberParser)}},LE.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:wc(kE.prototype.surfaceMemberParser),surfaceMembers:wc(kE.prototype.surfaceMemberParser)}},LE.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:wc(fE.prototype.readLineString),Curve:wc(kE.prototype.readCurve)}},LE.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:wc(fE.prototype.readPolygon),Surface:wc(kE.prototype.readSurface)}},LE.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:gc(kE.prototype.readPatch)}},LE.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:gc(kE.prototype.readSegment)}},LE.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:wc(kE.prototype.readFlatPosList),upperCorner:wc(kE.prototype.readFlatPosList)}},LE.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:gc(kE.prototype.readPolygonPatch)}},LE.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:mc(kE.prototype.readLineStringSegment)}},LE.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:wc(fE.prototype.pointMemberParser),pointMembers:wc(fE.prototype.pointMemberParser)}},LE.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:wc(fE.prototype.lineStringMemberParser),lineStringMembers:wc(fE.prototype.lineStringMemberParser)}},LE.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:wc(fE.prototype.polygonMemberParser),polygonMembers:wc(fE.prototype.polygonMemberParser)}},LE.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:wc(fE.prototype.readFlatCoordinatesFromNode)}},LE.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:wc(fE.prototype.readLineString)}},LE.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:wc(fE.prototype.readPolygon)}},LE.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:gc(fE.prototype.readFlatLinearRing),Ring:gc(LE.prototype.readFlatCurveRing)}},LE.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:_c(kE.prototype.writeRing),interior:_c(kE.prototype.writeRing)}},LE.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:_c(SE),upperCorner:_c(SE)}},LE.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:_c(kE.prototype.writeSurfaceOrPolygonMember),polygonMember:_c(kE.prototype.writeSurfaceOrPolygonMember)}},LE.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:_c(kE.prototype.writePointMember)}},LE.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:_c(kE.prototype.writeLineStringOrCurveMember),curveMember:_c(kE.prototype.writeLineStringOrCurveMember)}},LE.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:_c(kE.prototype.writeCurveOrLineString),MultiCurve:_c(kE.prototype.writeMultiCurveOrLineString),Point:_c(LE.prototype.writePoint),MultiPoint:_c(kE.prototype.writeMultiPoint),LineString:_c(kE.prototype.writeCurveOrLineString),MultiLineString:_c(kE.prototype.writeMultiCurveOrLineString),LinearRing:_c(kE.prototype.writeLinearRing),Polygon:_c(kE.prototype.writeSurfaceOrPolygon),MultiPolygon:_c(kE.prototype.writeMultiSurfaceOrPolygon),Surface:_c(kE.prototype.writeSurfaceOrPolygon),MultiSurface:_c(kE.prototype.writeMultiSurfaceOrPolygon),Envelope:_c(kE.prototype.writeEnvelope)}};var RE=LE,FE=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),GE=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],DE={rte:pT,trk:dT,wpt:yT},UE=Ec(GE,{rte:wc(pT),trk:wc(dT),wpt:wc(yT)}),qE=Ec(GE,{text:xc(wE,"linkText"),type:xc(wE,"linkType")}),BE=Ec(GE,{rte:_c((function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var s=n.getGeometry();if("LineString"==s.getType()){var u=xx(s,!0,r);o.geometryLayout=u.getLayout(),e.rtept=u.getCoordinates()}var a=i[i.length-1].node,h=QE[a.namespaceURI],f=jc(e,h);Cc(o,tT,Oc,f,i,h)})),trk:_c((function(t,n,i){var r=i[0],e=n.getProperties(),o={node:t};o.properties=e;var s=n.getGeometry();if("MultiLineString"==s.getType()){var u=xx(s,!0,r);e.trkseg=u.getLineStrings()}var a=i[i.length-1].node,h=iT[a.namespaceURI],f=jc(e,h);Cc(o,rT,Oc,f,i,h)})),wpt:_c((function(t,n,i){var r=i[0],e=i[i.length-1];e.properties=n.getProperties();var o=n.getGeometry();if("Point"==o.getType()){var s=xx(o,!0,r);e.geometryLayout=s.getLayout(),wT(t,s.getCoordinates(),i)}}))}),XE=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=yr("EPSG:4326"),i.By=r.readExtensions,i}return FE(n,t),n.prototype.Xy=function(t){t||(t=[]);for(var n=0,i=t.length;n<i;++n){var r=t[n];if(this.By){var e=r.get("extensionsNode_")||null;this.By(r,e)}r.set("extensionsNode_",void 0)}},n.prototype.readFeatureFromNode=function(t,n){if(!y(GE,t.namespaceURI))return null;var i=DE[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,n)]);return r?(this.Xy([r]),r):null},n.prototype.readFeaturesFromNode=function(t,n){if(!y(GE,t.namespaceURI))return[];if("gpx"==t.localName){var i=Pc([],UE,t,[this.getReadOptions(t,n)]);return i?(this.Xy(i),i):[]}return[]},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=cc("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",fc),i.setAttributeNS(fc,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Cc({node:i},BE,hT,t,[n]),i},n}(oE),YE=Ec(GE,{name:xc(wE),cmt:xc(wE),desc:xc(wE),src:xc(wE),link:lT,number:xc(yE),extensions:vT,type:xc(wE),rtept:function(t,n){var i=Pc({},ZE,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;fT(e,o,t,i)}}}),ZE=Ec(GE,{ele:xc(pE),time:xc(vE)}),VE=Ec(GE,{name:xc(wE),cmt:xc(wE),desc:xc(wE),src:xc(wE),link:lT,number:xc(yE),type:xc(wE),extensions:vT,trkseg:function(t,n){var i=n[n.length-1];Tc(WE,t,n);var r=i.flatCoordinates;i.ends.push(r.length)}}),WE=Ec(GE,{trkpt:function(t,n){var i=Pc({},$E,t,n);if(i){var r=n[n.length-1],e=r.flatCoordinates,o=r.layoutOptions;fT(e,o,t,i)}}}),$E=Ec(GE,{ele:xc(pE),time:xc(vE)}),KE=Ec(GE,{ele:xc(pE),time:xc(vE),magvar:xc(pE),geoidheight:xc(pE),name:xc(wE),cmt:xc(wE),desc:xc(wE),src:xc(wE),link:lT,sym:xc(wE),type:xc(wE),fix:xc(wE),sat:xc(yE),hdop:xc(pE),vdop:xc(pE),pdop:xc(pE),ageofdgpsdata:xc(pE),dgpsid:xc(yE),extensions:vT}),HE=["text","type"],JE=Ec(GE,{text:_c(SE),type:_c(SE)}),QE=Ec(GE,["name","cmt","desc","src","link","number","type","rtept"]),tT=Ec(GE,{name:_c(SE),cmt:_c(SE),desc:_c(SE),src:_c(SE),link:_c(mT),number:_c(ME),type:_c(SE),rtept:Mc(_c(wT))}),nT=Ec(GE,["ele","time"]),iT=Ec(GE,["name","cmt","desc","src","link","number","type","trkseg"]),rT=Ec(GE,{name:_c(SE),cmt:_c(SE),desc:_c(SE),src:_c(SE),link:_c(mT),number:_c(ME),type:_c(SE),trkseg:Mc(_c((function(t,n,i){var r={node:t};r.geometryLayout=n.getLayout(),r.properties={},Cc(r,oT,eT,n.getCoordinates(),i)})))}),eT=Sc("trkpt"),oT=Ec(GE,{trkpt:_c(wT)}),sT=Ec(GE,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),uT=Ec(GE,{ele:_c(_E),time:_c(xE),magvar:_c(_E),geoidheight:_c(_E),name:_c(SE),cmt:_c(SE),desc:_c(SE),src:_c(SE),link:_c(mT),sym:_c(SE),type:_c(SE),fix:_c(SE),sat:_c(ME),hdop:_c(_E),vdop:_c(_E),pdop:_c(_E),ageofdgpsdata:_c(_E),dgpsid:_c(ME)}),aT={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function hT(t,n,i){var r=t.getGeometry();if(r){var e=aT[r.getType()];if(e)return cc(n[n.length-1].node.namespaceURI,e)}}function fT(t,n,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,n.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,n.hasM=!0):t.push(0),t}function cT(t,n,i){var r="XY",e=2;if(t.hasZ&&t.hasM?(r="XYZM",e=4):t.hasZ?(r="XYZ",e=3):t.hasM&&(r="XYM",e=3),4!==e){for(var o=0,s=n.length/4;o<s;o++)n[o*e]=n[4*o],n[o*e+1]=n[4*o+1],t.hasZ&&(n[o*e+2]=n[4*o+2]),t.hasM&&(n[o*e+2]=n[4*o+3]);if(n.length=n.length/4*e,i)for(o=0,s=i.length;o<s;o++)i[o]=i[o]/4*e}return r}function lT(t,n){var i=n[n.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),Tc(qE,t,n)}function vT(t,n){n[n.length-1].Yy=t}function pT(t,n){var i=n[0],r=Pc({flatCoordinates:[],layoutOptions:{}},YE,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var s=cT(o,e),u=new Yb(e,s);xx(u,!1,i);var a=new Ct(u);return a.setProperties(r,!0),a}}function dT(t,n){var i=n[0],r=Pc({flatCoordinates:[],ends:[],layoutOptions:{}},VE,t,n);if(r){var e=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var s=r.layoutOptions;delete r.layoutOptions;var u=cT(s,e,o),a=new Wb(e,u,o);xx(a,!1,i);var h=new Ct(a);return h.setProperties(r,!0),h}}function yT(t,n){var i=n[0],r=Pc({},KE,t,n);if(r){var e={},o=fT([],e,t,r),s=cT(e,o),u=new Te(o,s);xx(u,!1,i);var a=new Ct(u);return a.setProperties(r,!0),a}}function mT(t,n,i){t.setAttribute("href",n);var r=i[i.length-1].properties,e=[r.linkText,r.linkType];Cc({node:t},JE,Oc,e,i,HE)}function wT(t,n,i){var r=i[i.length-1],e=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(n[1])),t.setAttributeNS(null,"lon",String(n[0])),r.geometryLayout){case"XYZM":0!==n[3]&&(o.time=n[3]);case"XYZ":0!==n[2]&&(o.ele=n[2]);break;case"XYM":0!==n[2]&&(o.time=n[2])}var s="rtept"==t.nodeName?nT[e]:sT[e],u=jc(o,s);Cc({node:t,properties:o},uT,Oc,u,i,s)}var gT=XE,bT=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();function xT(t){return"string"==typeof t?t:""}var _T,MT,ST,OT,jT,ET,TT=function(t){function n(){return t.call(this)||this}return bT(n,t),n.prototype.getType=function(){return"text"},n.prototype.readFeature=function(t,n){return this.readFeatureFromText(xT(t),this.adaptOptions(n))},n.prototype.readFeatureFromText=function(t,n){return r()},n.prototype.readFeatures=function(t,n){return this.readFeaturesFromText(xT(t),this.adaptOptions(n))},n.prototype.readFeaturesFromText=function(t,n){return r()},n.prototype.readGeometry=function(t,n){return this.readGeometryFromText(xT(t),this.adaptOptions(n))},n.prototype.readGeometryFromText=function(t,n){return r()},n.prototype.readProjection=function(t){return this.readProjectionFromText(xT(t))},n.prototype.readProjectionFromText=function(t){return this.dataProjection},n.prototype.writeFeature=function(t,n){return this.writeFeatureText(t,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){return r()},n.prototype.writeFeatures=function(t,n){return this.writeFeaturesText(t,this.adaptOptions(n))},n.prototype.writeFeaturesText=function(t,n){return r()},n.prototype.writeGeometry=function(t,n){return this.writeGeometryText(t,this.adaptOptions(n))},n.prototype.writeGeometryText=function(t,n){return r()},n}(bx),PT=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),AT=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,CT=/^H.([A-Z]{3}).*?:(.*)/,kT=/^HFDTE(\d{2})(\d{2})(\d{2})/,IT=/\r\n|\r|\n/,NT=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=yr("EPSG:4326"),i.Zy=r.altitudeMode?r.altitudeMode:"none",i}return PT(n,t),n.prototype.readFeatureFromText=function(t,n){var i,r,e=this.Zy,o=t.split(IT),s={},u=[],a=2e3,h=0,f=1,c=-1;for(i=0,r=o.length;i<r;++i){var l=o[i],v=void 0;if("B"==l.charAt(0)){if(v=AT.exec(l)){var p=parseInt(v[1],10),d=parseInt(v[2],10),y=parseInt(v[3],10),m=parseInt(v[4],10)+parseInt(v[5],10)/6e4;"S"==v[6]&&(m=-m);var w=parseInt(v[7],10)+parseInt(v[8],10)/6e4;if("W"==v[9]&&(w=-w),u.push(w,m),"none"!=e){var g=void 0;g="gps"==e?parseInt(v[11],10):"barometric"==e?parseInt(v[12],10):0,u.push(g)}var b=Date.UTC(a,h,f,p,d,y);b<c&&(b=Date.UTC(a,h,f+1,p,d,y)),u.push(b/1e3),c=b}}else"H"==l.charAt(0)&&((v=kT.exec(l))?(f=parseInt(v[1],10),h=parseInt(v[2],10)-1,a=2e3+parseInt(v[3],10)):(v=CT.exec(l))&&(s[v[1]]=v[2].trim()))}if(0===u.length)return null;var x=new Yb(u,"none"==e?"XYM":"XYZM"),_=new Ct(xx(x,!1,n));return _.setProperties(s,!0),_},n.prototype.readFeaturesFromText=function(t,n){var i=this.readFeatureFromText(t,n);return i?[i]:[]},n}(TT),zT=NT,LT=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),RT=["http://www.google.com/kml/ext/2.2"],FT=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],GT={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},DT=Ec(FT,{ExtendedData:RP,Region:FP,MultiGeometry:xc(TP,"geometry"),LineString:xc(OP,"geometry"),LinearRing:xc(jP,"geometry"),Point:xc(PP,"geometry"),Polygon:xc(CP,"geometry"),Style:xc(IP),StyleMap:function(t,n){var i=cP.call(this,t,n);if(!i)return;var r=n[n.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:Et(!1,38)},address:xc(wE),description:xc(wE),name:xc(wE),open:xc(cE),phoneNumber:xc(wE),styleUrl:xc(aP),visibility:xc(cE)},Ec(RT,{MultiTrack:xc((function(t,n){var i=Pc([],wP,t,n);if(!i)return;return new Wb(i)}),"geometry"),Track:xc(bP,"geometry")})),UT=Ec(FT,{ExtendedData:RP,Region:FP,Link:function(t,n){Tc(qT,t,n)},address:xc(wE),description:xc(wE),name:xc(wE),open:xc(cE),phoneNumber:xc(wE),visibility:xc(cE)}),qT=Ec(FT,{href:xc(uP)}),BT=Ec(FT,{LatLonAltBox:function(t,n){var i=Pc({},UP,t,n);if(!i)return;var r=n[n.length-1],e=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=e,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,n){var i=Pc({},qP,t,n);if(!i)return;var r=n[n.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),XT=Ec(FT,["Document","Placemark"]),YT=Ec(FT,{Document:_c((function(t,n,i){Cc({node:t},VP,WP,n,i,void 0,this)})),Placemark:_c(wA)}),ZT=null;var VT,WT=null;var $T,KT=null;var HT=null;var JT=null;var QT,tP=null;function nP(t){return 32/Math.min(t[0],t[1])}function iP(t){return t}var rP=function(t){function n(n){var i=t.call(this)||this,r=n||{};return tP||(ZT=new Cv({color:_T=[255,255,255,1]}),ET="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",WT=new Gv({anchor:MT=[20,2],anchorOrigin:"bottom-left",anchorXUnits:ST="pixels",anchorYUnits:OT="pixels",crossOrigin:"anonymous",rotation:0,scale:nP(jT=[64,64]),size:jT,src:ET}),VT="NO_IMAGE",KT=new Uv({color:_T,width:1}),$T=new Uv({color:[51,51,51,1],width:2}),HT=new Kv({font:"bold 16px Helvetica",fill:ZT,stroke:$T,scale:.8}),JT=new Wv({fill:ZT,image:WT,text:HT,stroke:KT,zIndex:0}),tP=[JT]),i.dataProjection=yr("EPSG:4326"),i.Vy=r.defaultStyle?r.defaultStyle:tP,i.Wy=void 0===r.extractStyles||r.extractStyles,i.$y=void 0===r.writeStyles||r.writeStyles,i.Ky={},i.Hy=void 0===r.showPointNames||r.showPointNames,i.Bt=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",i.Jy=r.iconUrlFunction?r.iconUrlFunction:iP,i.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],i}return LT(n,t),n.prototype.Qy=function(t,n){var i=Pc([],Ec(FT,{Document:mc(this.Qy,this),Folder:mc(this.Qy,this),Placemark:wc(this.tm,this),Style:this.nm.bind(this),StyleMap:this.im.bind(this)}),t,n,this);return i||void 0},n.prototype.tm=function(t,n){var i=Pc({geometry:null},DT,t,n,this);if(i){var r=new Ct,e=t.getAttribute("id");null!==e&&r.setId(e);var o=n[0],s=i.geometry;if(s&&xx(s,!1,o),r.setGeometry(s),delete i.geometry,this.Wy){var u=function(t,n,i,r,e){return function(o,s){var u=e,a="",h=[];if(u){var f=o.getGeometry();if(f)if(f instanceof Nx)h=f.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Point"===n||"MultiPoint"===n})),u=h.length>0;else{var c=f.getType();u="Point"===c||"MultiPoint"===c}}u&&(a=o.get("name"),(u=u&&!!a)&&a.search(/&[^&]+;/)>-1&&(QT||(QT=document.createElement("textarea")),QT.innerHTML=a,a=QT.value));var l=i;if(t?l=t:n&&(l=eP(n,i,r)),u){var v=function(t,n){var i=[0,0],r="start",e=t.getImage();if(e){var o=e.getSize();if(o&&2==o.length){var s=e.getScaleArray(),u=e.getAnchor();i[0]=s[0]*(o[0]-u[0]),i[1]=s[1]*(o[1]/2-u[1]),r="left"}}var a=t.getText();a?((a=a.clone()).setFont(a.getFont()||HT.getFont()),a.setScale(a.getScale()||HT.getScale()),a.setFill(a.getFill()||HT.getFill()),a.setStroke(a.getStroke()||$T)):a=HT.clone();return a.setText(n),a.setOffsetX(i[0]),a.setOffsetY(i[1]),a.setTextAlign(r),new Wv({image:e,text:a})}(l[0],a);return h.length>0?(v.setGeometry(new Nx(h)),[v,new Wv({geometry:l[0].getGeometry(),image:null,fill:l[0].getFill(),stroke:l[0].getStroke(),text:null})].concat(l.slice(1))):v}return l}}(i.Style,i.styleUrl,this.Vy,this.Ky,this.Hy);r.setStyle(u)}return delete i.Style,r.setProperties(i,!0),r}},n.prototype.nm=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=IP.call(this,t,n);if(r){var e=void 0,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.Ky[e]=r}}},n.prototype.im=function(t,n){var i=t.getAttribute("id");if(null!==i){var r=cP.call(this,t,n);if(r){var e,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o)e=new URL("#"+i,o).href;else e="#"+i;this.Ky[e]=r}}},n.prototype.readFeatureFromNode=function(t,n){if(!y(FT,t.namespaceURI))return null;var i=this.tm(t,[this.getReadOptions(t,n)]);return i||null},n.prototype.readFeaturesFromNode=function(t,n){if(!y(FT,t.namespaceURI))return[];var i,r=t.localName;if("Document"==r||"Folder"==r)return(i=this.Qy(t,[this.getReadOptions(t,n)]))||[];if("Placemark"==r){var e=this.tm(t,[this.getReadOptions(t,n)]);return e?[e]:[]}if("kml"==r){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,n);s&&g(i,s)}return i}return[]},n.prototype.readName=function(t){if(t){if("string"==typeof t){var n=yc(t);return this.readNameFromDocument(n)}return pc(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},n.prototype.readNameFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(n);if(i)return i}},n.prototype.readNameFromNode=function(t){for(var n=t.firstElementChild;n;n=n.nextElementSibling)if(y(FT,n.namespaceURI)&&"name"==n.localName)return wE(n);for(n=t.firstElementChild;n;n=n.nextElementSibling){var i=n.localName;if(y(FT,n.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var r=this.readNameFromNode(n);if(r)return r}}},n.prototype.readNetworkLinks=function(t){var n=[];if("string"==typeof t){var i=yc(t);g(n,this.readNetworkLinksFromDocument(i))}else pc(t)?g(n,this.readNetworkLinksFromDocument(t)):g(n,this.readNetworkLinksFromNode(t));return n},n.prototype.readNetworkLinksFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&g(n,this.readNetworkLinksFromNode(i));return n},n.prototype.readNetworkLinksFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(y(FT,i.namespaceURI)&&"NetworkLink"==i.localName){var r=Pc({},UT,i,[]);n.push(r)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!y(FT,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||g(n,this.readNetworkLinksFromNode(i))}return n},n.prototype.readRegion=function(t){var n=[];if("string"==typeof t){var i=yc(t);g(n,this.readRegionFromDocument(i))}else pc(t)?g(n,this.readRegionFromDocument(t)):g(n,this.readRegionFromNode(t));return n},n.prototype.readRegionFromDocument=function(t){for(var n=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&g(n,this.readRegionFromNode(i));return n},n.prototype.readRegionFromNode=function(t){for(var n=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(y(FT,i.namespaceURI)&&"Region"==i.localName){var r=Pc({},BT,i,[]);n.push(r)}for(i=t.firstElementChild;i;i=i.nextElementSibling){var e=i.localName;!y(FT,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||g(n,this.readRegionFromNode(i))}return n},n.prototype.writeFeaturesNode=function(t,n){n=this.adaptOptions(n);var i=cc(FT[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",RT[0]),i.setAttributeNS(r,"xmlns:xsi",fc),i.setAttributeNS(fc,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var e={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var s=XT[i.namespaceURI],u=jc(o,s);return Cc(e,YT,Oc,u,[n],s,this),i},n}(oE);function eP(t,n,i){return Array.isArray(t)?t:"string"==typeof t?eP(i[t],n,i):n}function oP(t){var n=lc(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(n);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function sP(t){var n=lc(t,!1),i=[];n=n.replace(/\s*,\s*/g,",");for(var r,e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;r=e.exec(n);){var o=parseFloat(r[1]),s=parseFloat(r[2]),u=r[3]?parseFloat(r[3]):0;i.push(o,s,u),n=n.substr(r[0].length)}if(""===n)return i}function uP(t){var n=lc(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n}function aP(t){var n=lc(t,!1).trim().replace(/^(?!.*#)/,"#"),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(n,i).href:n}function hP(t){return pE(t)}var fP=Ec(FT,{Pair:function(t,n){var i=Pc({},GP,t,n,this);if(!i)return;var r=i.key;if(r&&"normal"==r){var e=i.styleUrl;e&&(n[n.length-1]=e);var o=i.Style;o&&(n[n.length-1]=o)}}});function cP(t,n){return Pc(void 0,fP,t,n,this)}var lP=Ec(FT,{Icon:xc((function(t,n){var i=Pc({},xP,t,n);return i||null})),color:xc(oP),heading:xc(pE),hotSpot:xc((function(t){var n,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return n="insetPixels"!==i?"insetPixels"!==r?"bottom-left":"top-left":"insetPixels"!==r?"bottom-right":"top-right",{x:parseFloat(t.getAttribute("x")),xunits:GT[i],y:parseFloat(t.getAttribute("y")),yunits:GT[r],origin:n}})),scale:xc(hP)});var vP=Ec(FT,{color:xc(oP),scale:xc(hP)});var pP=Ec(FT,{color:xc(oP),width:xc(pE)});var dP=Ec(FT,{color:xc(oP),fill:xc(cE),outline:xc(cE)});var yP=Ec(FT,{coordinates:gc(sP)});function mP(t,n){return Pc(null,yP,t,n)}var wP=Ec(RT,{Track:wc(bP)});var gP=Ec(FT,{when:function(t,n){var i=n[n.length-1].whens,r=lc(t,!1),e=Date.parse(r);i.push(isNaN(e)?0:e)}},Ec(RT,{coord:function(t,n){var i=n[n.length-1].coordinates,r=lc(t,!1),e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(e){var o=parseFloat(e[1]),s=parseFloat(e[2]),u=parseFloat(e[3]);i.push([o,s,u])}else i.push([])}}));function bP(t,n){var i=Pc({coordinates:[],whens:[]},gP,t,n);if(i){for(var r=[],e=i.coordinates,o=i.whens,s=0,u=Math.min(e.length,o.length);s<u;++s)3==e[s].length&&r.push(e[s][0],e[s][1],e[s][2],o[s]);return new Yb(r,"XYZM")}}var xP=Ec(FT,{href:xc(uP)},Ec(RT,{x:xc(pE),y:xc(pE),w:xc(pE),h:xc(pE)}));var _P=Ec(FT,{coordinates:gc(sP)});function MP(t,n){return Pc(null,_P,t,n)}var SP=Ec(FT,{extrude:xc(cE),tessellate:xc(cE),altitudeMode:xc(wE)});function OP(t,n){var i=Pc({},SP,t,n),r=MP(t,n);if(r){var e=new Yb(r,"XYZ");return e.setProperties(i,!0),e}}function jP(t,n){var i=Pc({},SP,t,n),r=MP(t,n);if(r){var e=new Ke(r,"XYZ",[r.length]);return e.setProperties(i,!0),e}}var EP=Ec(FT,{LineString:wc(OP),LinearRing:wc(jP),MultiGeometry:wc(TP),Point:wc(PP),Polygon:wc(CP)});function TP(t,n){var i,r=Pc([],EP,t,n);if(!r)return null;if(0===r.length)return new Nx(r);for(var e=!0,o=r[0].getType(),s=1,u=r.length;s<u;++s)if(r[s].getType()!=o){e=!1;break}if(e){var a=void 0,h=void 0;if("Point"==o){var f=r[0];a=f.getLayout(),h=f.getFlatCoordinates();for(s=1,u=r.length;s<u;++s)g(h,r[s].getFlatCoordinates());NP(i=new Gb(h,a),r)}else"LineString"==o?NP(i=new Wb(r),r):"Polygon"==o?NP(i=new Jb(r),r):"GeometryCollection"==o?i=new Nx(r):Et(!1,37)}else i=new Nx(r);return i}function PP(t,n){var i=Pc({},SP,t,n),r=MP(t,n);if(r){var e=new Te(r,"XYZ");return e.setProperties(i,!0),e}}var AP=Ec(FT,{innerBoundaryIs:function(t,n){var i=Pc([],BP,t,n);if(i.length>0){var r=n[n.length-1];r.push.apply(r,i)}},outerBoundaryIs:function(t,n){var i=Pc(void 0,XP,t,n);if(i){n[n.length-1][0]=i}}});function CP(t,n){var i=Pc({},SP,t,n),r=Pc([null],AP,t,n);if(r&&r[0]){for(var e=r[0],o=[e.length],s=1,u=r.length;s<u;++s)g(e,r[s]),o.push(e.length);var a=new Ke(e,"XYZ",o);return a.setProperties(i,!0),a}}var kP=Ec(FT,{IconStyle:function(t,n){var i=Pc({},lP,t,n);if(i){var r,e,o,s,u=n[n.length-1],a="Icon"in i?i.Icon:{},h=!("Icon"in i)||Object.keys(a).length>0,f=a.href;f?r=f:h&&(r=ET);var c,l="bottom-left",v=i.hotSpot;v?(e=[v.x,v.y],o=v.xunits,s=v.yunits,l=v.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(/pushpin/.test(r)?(e=MT,o=ST,s=OT):/arrow-reverse/.test(r)?(e=[54,42],o=ST,s=OT):/paddle/.test(r)&&(e=[32,1],o=ST,s=OT));var p,d=a.x,y=a.y;void 0!==d&&void 0!==y&&(c=[d,y]);var m,w=a.w,g=a.h;void 0!==w&&void 0!==g&&(p=[w,g]);var b=i.heading;void 0!==b&&(m=li(b));var x=i.scale,_=i.color;if(h){r==ET&&(p=jT);var M=new Gv({anchor:e,anchorOrigin:l,anchorXUnits:o,anchorYUnits:s,crossOrigin:this.Bt,offset:c,offsetOrigin:"bottom-left",rotation:m,scale:x,size:p,src:this.Jy(r),color:_}),S=M.getScaleArray()[0],O=M.getSize();if(null===O){var j=M.getImageState();if(j===wo||j===go){var E=function(){var t=M.getImageState();if(t!==wo&&t!==go){var n=M.getSize();if(n&&2==n.length){var i=nP(n);M.setScale(S*i)}M.unlistenImageChange(E)}};M.listenImageChange(E),j===wo&&M.load()}}else if(2==O.length){var T=nP(O);M.setScale(S*T)}u.imageStyle=M}else u.imageStyle=VT}},LabelStyle:function(t,n){var i=Pc({},vP,t,n);if(i){var r=n[n.length-1],e=new Kv({fill:new Cv({color:"color"in i?i.color:_T}),scale:i.scale});r.textStyle=e}},LineStyle:function(t,n){var i=Pc({},pP,t,n);if(i){var r=n[n.length-1],e=new Uv({color:"color"in i?i.color:_T,width:"width"in i?i.width:1});r.strokeStyle=e}},PolyStyle:function(t,n){var i=Pc({},dP,t,n);if(i){var r=n[n.length-1],e=new Cv({color:"color"in i?i.color:_T});r.fillStyle=e;var o=i.fill;void 0!==o&&(r.fill=o);var s=i.outline;void 0!==s&&(r.outline=s)}}});function IP(t,n){var i=Pc({},kP,t,n,this);if(!i)return null;var r,e="fillStyle"in i?i.fillStyle:ZT,o=i.fill;void 0===o||o||(e=null),"imageStyle"in i?i.imageStyle!=VT&&(r=i.imageStyle):r=WT;var s="textStyle"in i?i.textStyle:HT,u="strokeStyle"in i?i.strokeStyle:KT,a=i.outline;return void 0===a||a?[new Wv({fill:e,image:r,stroke:u,text:s,zIndex:void 0})]:[new Wv({geometry:function(t){var n=t.getGeometry(),i=n.getType();return"GeometryCollection"===i?new Nx(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Polygon"!==n&&"MultiPolygon"!==n}))):"Polygon"!==i&&"MultiPolygon"!==i?n:void 0},fill:e,image:r,stroke:u,text:s,zIndex:void 0}),new Wv({geometry:function(t){var n=t.getGeometry(),i=n.getType();return"GeometryCollection"===i?new Nx(n.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Polygon"===n||"MultiPolygon"===n}))):"Polygon"===i||"MultiPolygon"===i?n:void 0},fill:e,stroke:null,zIndex:void 0})]}function NP(t,n){var i,r,e,o=n.length,s=new Array(n.length),u=new Array(n.length),a=new Array(n.length);i=!1,r=!1,e=!1;for(var h=0;h<o;++h){var f=n[h];s[h]=f.get("extrude"),u[h]=f.get("tessellate"),a[h]=f.get("altitudeMode"),i=i||void 0!==s[h],r=r||void 0!==u[h],e=e||a[h]}i&&t.set("extrude",s),r&&t.set("tessellate",u),e&&t.set("altitudeMode",a)}var zP=Ec(FT,{displayName:xc(wE),value:xc(wE)});var LP=Ec(FT,{Data:function(t,n){var i=t.getAttribute("name");Tc(zP,t,n);var r=n[n.length-1];i&&r.displayName?r[i]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,n){Tc(DP,t,n)}});function RP(t,n){Tc(LP,t,n)}function FP(t,n){Tc(BT,t,n)}var GP=Ec(FT,{Style:xc(IP),key:xc(wE),styleUrl:xc(aP)});var DP=Ec(FT,{SimpleData:function(t,n){var i=t.getAttribute("name");if(null!==i){var r=wE(t);n[n.length-1][i]=r}}});var UP=Ec(FT,{altitudeMode:xc(wE),minAltitude:xc(pE),maxAltitude:xc(pE),north:xc(pE),south:xc(pE),east:xc(pE),west:xc(pE)});var qP=Ec(FT,{minLodPixels:xc(pE),maxLodPixels:xc(pE),minFadeExtent:xc(pE),maxFadeExtent:xc(pE)});var BP=Ec(FT,{LinearRing:wc(mP)});var XP=Ec(FT,{LinearRing:gc(mP)});function YP(t,n){for(var i=Xo(n),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],e=0;e<4;++e){var o=Math.floor(r[e]).toString(16);r[e]=1==o.length?"0"+o:o}SE(t,r.join(""))}var ZP=Ec(FT,{Data:_c((function(t,n,i){t.setAttribute("name",n.name);var r={node:t},e=n.value;"object"==typeof e?(null!==e&&e.displayName&&Cc(r,ZP,Oc,[e.displayName],i,["displayName"]),null!==e&&e.value&&Cc(r,ZP,Oc,[e.value],i,["value"])):Cc(r,ZP,Oc,[e],i,["value"])})),value:_c((function(t,n){SE(t,n)})),displayName:_c((function(t,n){bE(t,n)}))});var VP=Ec(FT,{Placemark:_c(wA)}),WP=function(t,n,i){return cc(n[n.length-1].node.namespaceURI,"Placemark")};var $P=Sc("Data");var KP=Ec(FT,["href"],Ec(RT,["x","y","w","h"])),HP=Ec(FT,{href:_c(SE)},Ec(RT,{x:_c(_E),y:_c(_E),w:_c(_E),h:_c(_E)})),JP=function(t,n,i){return cc(RT[0],"gx:"+i)};var QP=Ec(FT,["scale","heading","Icon","color","hotSpot"]),tA=Ec(FT,{Icon:_c((function(t,n,i){var r={node:t},e=i[i.length-1].node,o=KP[e.namespaceURI],s=jc(n,o);Cc(r,HP,Oc,s,i,o),s=jc(n,o=KP[RT[0]]),Cc(r,HP,JP,s,i,o)})),color:_c(YP),heading:_c(_E),hotSpot:_c((function(t,n){t.setAttribute("x",String(n.x)),t.setAttribute("y",String(n.y)),t.setAttribute("xunits",n.xunits),t.setAttribute("yunits",n.yunits)})),scale:_c(TA)});var nA=Ec(FT,["color","scale"]),iA=Ec(FT,{color:_c(YP),scale:_c(TA)});var rA=Ec(FT,["color","width"]),eA=Ec(FT,{color:_c(YP),width:_c(_E)});var oA={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},sA=function(t,n,i){if(t)return cc(n[n.length-1].node.namespaceURI,oA[t.getType()])},uA=Sc("Point"),aA=Sc("LineString"),hA=Sc("LinearRing"),fA=Sc("Polygon"),cA=Ec(FT,{LineString:_c(xA),Point:_c(xA),Polygon:_c(jA),GeometryCollection:_c(lA)});function lA(t,n,i){var r,e={node:t},o=n.getType(),s=[];"GeometryCollection"===o?(n.getGeometriesArrayRecursive().forEach((function(t){var n=t.getType();"MultiPoint"===n?s=s.concat(t.getPoints()):"MultiLineString"===n?s=s.concat(t.getLineStrings()):"MultiPolygon"===n?s=s.concat(t.getPolygons()):"Point"===n||"LineString"===n||"Polygon"===n?s.push(t):Et(!1,39)})),r=sA):"MultiPoint"===o?(s=n.getPoints(),r=uA):"MultiLineString"===o?(s=n.getLineStrings(),r=aA):"MultiPolygon"===o?(s=n.getPolygons(),r=fA):Et(!1,39),Cc(e,cA,r,s,i)}var vA=Ec(FT,{LinearRing:_c(xA)});function pA(t,n,i){Cc({node:t},vA,hA,[n],i)}var dA=Ec(FT,{ExtendedData:_c((function(t,n,i){for(var r={node:t},e=n.names,o=n.values,s=e.length,u=0;u<s;u++)Cc(r,ZP,$P,[{name:e[u],value:o[u]}],i)})),MultiGeometry:_c(lA),LineString:_c(xA),LinearRing:_c(xA),Point:_c(xA),Polygon:_c(jA),Style:_c((function(t,n,i){var r={node:t},e={};if(n.pointStyles.length){var o=n.pointStyles[0].getText();o&&(e.LabelStyle=o);var s=n.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(e.IconStyle=s)}if(n.lineStyles.length){(u=n.lineStyles[0].getStroke())&&(e.LineStyle=u)}if(n.polyStyles.length){var u;(u=n.polyStyles[0].getStroke())&&!e.LineStyle&&(e.LineStyle=u),e.PolyStyle=n.polyStyles[0]}var a=i[i.length-1].node,h=PA[a.namespaceURI],f=jc(e,h);Cc(r,AA,Oc,f,i,h)})),address:_c(SE),description:_c(SE),name:_c(SE),open:_c(gE),phoneNumber:_c(SE),styleUrl:_c(SE),visibility:_c(gE)}),yA=Ec(FT,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),mA=Sc("ExtendedData");function wA(t,n,i){var r={node:t};n.getId()&&t.setAttribute("id",n.getId());var e=n.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[n.getGeometryName()]=1;var s=Object.keys(e||{}).sort().filter((function(t){return!o[t]})),u=n.getStyleFunction();if(u){var a=u(n,0);if(a){var h=Array.isArray(a)?a:[a],f=h;if(n.getGeometry()&&(f=h.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Point"===n||"MultiPoint"===n})).length:"Point"===r||"MultiPoint"===r}}))),this.$y){var c=h,l=h;n.getGeometry()&&(c=h.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"LineString"===n||"MultiLineString"===n})).length:"LineString"===r||"MultiLineString"===r}})),l=h.filter((function(t){var i=t.getGeometryFunction()(n);if(i){var r=i.getType();return"GeometryCollection"===r?i.getGeometriesArrayRecursive().filter((function(t){var n=t.getType();return"Polygon"===n||"MultiPolygon"===n})).length:"Polygon"===r||"MultiPolygon"===r}}))),e.Style={pointStyles:f,lineStyles:c,polyStyles:l}}if(f.length&&void 0===e.name){var v=f[0].getText();v&&(e.name=v.getText())}}}var p=i[i.length-1].node,d=yA[p.namespaceURI],y=jc(e,d);if(Cc(r,dA,Oc,y,i,d),s.length>0){var m=jc(e,s);Cc(r,dA,mA,[{names:s,values:m}],i)}var w=i[0],g=n.getGeometry();g&&(g=xx(g,!0,w)),Cc(r,dA,sA,[g],i)}var gA=Ec(FT,["extrude","tessellate","altitudeMode","coordinates"]),bA=Ec(FT,{extrude:_c(gE),tessellate:_c(gE),altitudeMode:_c(SE),coordinates:_c((function(t,n,i){var r,e=i[i.length-1],o=e.layout,s=e.stride;"XY"==o||"XYM"==o?r=2:"XYZ"==o||"XYZM"==o?r=3:Et(!1,34);var u=n.length,a="";if(u>0){a+=n[0];for(var h=1;h<r;++h)a+=","+n[h];for(var f=s;f<u;f+=s){a+=" "+n[f];for(h=1;h<r;++h)a+=","+n[f+h]}}SE(t,a)}))});function xA(t,n,i){var r=n.getFlatCoordinates(),e={node:t};e.layout=n.getLayout(),e.stride=n.getStride();var o=n.getProperties();o.coordinates=r;var s=i[i.length-1].node,u=gA[s.namespaceURI],a=jc(o,u);Cc(e,bA,Oc,a,i,u)}var _A=Ec(FT,["color","fill","outline"]),MA=Ec(FT,{outerBoundaryIs:_c(pA),innerBoundaryIs:_c(pA)}),SA=Sc("innerBoundaryIs"),OA=Sc("outerBoundaryIs");function jA(t,n,i){var r=n.getLinearRings(),e=r.shift(),o={node:t};Cc(o,MA,SA,r,i),Cc(o,MA,OA,[e],i)}var EA=Ec(FT,{color:_c(YP),fill:_c(gE),outline:_c(gE)});function TA(t,n){_E(t,Math.round(1e6*n)/1e6)}var PA=Ec(FT,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),AA=Ec(FT,{IconStyle:_c((function(t,n,i){var r={node:t},e={},o=n.getSrc(),s=n.getSize(),u=n.getImageSize(),a={href:o};if(s){a.w=s[0],a.h=s[1];var h=n.getAnchor(),f=n.getOrigin();if(f&&u&&0!==f[0]&&f[1]!==s[1]&&(a.x=f[0],a.y=u[1]-(f[1]+s[1])),h&&(h[0]!==s[0]/2||h[1]!==s[1]/2)){var c={x:h[0],xunits:"pixels",y:s[1]-h[1],yunits:"pixels"};e.hotSpot=c}}e.Icon=a;var l=n.getScaleArray()[0],v=s;null===v&&(v=jT),2==v.length&&(l/=nP(v)),1!==l&&(e.scale=l);var p=n.getRotation();0!==p&&(e.heading=p);var d=n.getColor();d&&(e.color=d);var y=i[i.length-1].node,m=QP[y.namespaceURI],w=jc(e,m);Cc(r,tA,Oc,w,i,m)})),LabelStyle:_c((function(t,n,i){var r={node:t},e={},o=n.getFill();o&&(e.color=o.getColor());var s=n.getScale();s&&1!==s&&(e.scale=s);var u=i[i.length-1].node,a=nA[u.namespaceURI],h=jc(e,a);Cc(r,iA,Oc,h,i,a)})),LineStyle:_c((function(t,n,i){var r={node:t},e={color:n.getColor(),width:Number(n.getWidth())||1},o=i[i.length-1].node,s=rA[o.namespaceURI],u=jc(e,s);Cc(r,eA,Oc,u,i,s)})),PolyStyle:_c((function(t,n,i){var r={node:t},e=n.getFill(),o=n.getStroke(),s={color:e?e.getColor():void 0,fill:!!e&&void 0,outline:!!o&&void 0},u=i[i.length-1].node,a=_A[u.namespaceURI],h=jc(s,a);Cc(r,EA,Oc,h,i,a)}))});var CA=rP,kA=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),IA=[null],NA=Ec(IA,{nd:function(t,n){n[n.length-1].ndrefs.push(t.getAttribute("ref"))},tag:FA}),zA=Ec(IA,{node:function(t,n){var i=n[0],r=n[n.length-1],e=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[e]=o;var s=Pc({tags:{}},RA,t,n);if(!k(s.tags)){var u=new Te(o);xx(u,!1,i);var a=new Ct(u);void 0!==e&&a.setId(e),a.setProperties(s.tags,!0),r.features.push(a)}},way:function(t,n){var i=Pc({id:t.getAttribute("id"),ndrefs:[],tags:{}},NA,t,n);n[n.length-1].ways.push(i)}}),LA=function(t){function n(){var n=t.call(this)||this;return n.dataProjection=yr("EPSG:4326"),n}return kA(n,t),n.prototype.readFeaturesFromNode=function(t,n){var i=this.getReadOptions(t,n);if("osm"==t.localName){for(var r=Pc({nodes:{},ways:[],features:[]},zA,t,[i]),e=0;e<r.ways.length;e++){for(var o=r.ways[e],s=[],u=0,a=o.ndrefs.length;u<a;u++){g(s,r.nodes[o.ndrefs[u]])}var h=void 0;xx(h=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Ke(s,"XY",[s.length]):new Yb(s,"XY"),!1,i);var f=new Ct(h);void 0!==o.id&&f.setId(o.id),f.setProperties(o.tags,!0),r.features.push(f)}if(r.features)return r.features}return[]},n}(oE),RA=Ec(IA,{tag:FA});function FA(t,n){n[n.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var GA=LA,DA=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var n=yc(t);return this.readFromDocument(n)}return pc(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null},t.prototype.readFromNode=function(t){},t}();function UA(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var qA=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),BA=[null,"http://www.opengis.net/ows/1.1"],XA=Ec(BA,{ServiceIdentification:xc((function(t,n){return Pc({},rC,t,n)})),ServiceProvider:xc((function(t,n){return Pc({},eC,t,n)})),OperationsMetadata:xc((function(t,n){return Pc({},QA,t,n)}))}),YA=function(t){function n(){return t.call(this)||this}return qA(n,t),n.prototype.readFromNode=function(t){var n=Pc({},XA,t,[]);return n||null},n}(DA),ZA=Ec(BA,{DeliveryPoint:xc(wE),City:xc(wE),AdministrativeArea:xc(wE),PostalCode:xc(wE),Country:xc(wE),ElectronicMailAddress:xc(wE)}),VA=Ec(BA,{Value:bc((function(t,n){return wE(t)}))}),WA=Ec(BA,{AllowedValues:xc((function(t,n){return Pc({},VA,t,n)}))}),$A=Ec(BA,{Phone:xc((function(t,n){return Pc({},tC,t,n)})),Address:xc((function(t,n){return Pc({},ZA,t,n)}))}),KA=Ec(BA,{HTTP:xc((function(t,n){return Pc({},HA,t,n)}))}),HA=Ec(BA,{Get:bc((function(t,n){var i=UA(t);if(!i)return;return Pc({href:i},nC,t,n)})),Post:void 0}),JA=Ec(BA,{DCP:xc((function(t,n){return Pc({},KA,t,n)}))}),QA=Ec(BA,{Operation:function(t,n){var i=t.getAttribute("name"),r=Pc({},JA,t,n);if(!r)return;n[n.length-1][i]=r}}),tC=Ec(BA,{Voice:xc(wE),Facsimile:xc(wE)}),nC=Ec(BA,{Constraint:bc((function(t,n){var i=t.getAttribute("name");if(!i)return;return Pc({name:i},WA,t,n)}))}),iC=Ec(BA,{IndividualName:xc(wE),PositionName:xc(wE),ContactInfo:xc((function(t,n){return Pc({},$A,t,n)}))}),rC=Ec(BA,{Abstract:xc(wE),AccessConstraints:xc(wE),Fees:xc(wE),Title:xc(wE),ServiceTypeVersion:xc(wE),ServiceType:xc(wE)}),eC=Ec(BA,{ProviderName:xc(wE),ProviderSite:xc(UA),ServiceContact:xc((function(t,n){return Pc({},iC,t,n)}))});var oC=YA,sC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uC=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.dataProjection=yr("EPSG:4326"),i.rm=r.factor?r.factor:1e5,i.ap=r.geometryLayout?r.geometryLayout:"XY",i}return sC(n,t),n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n);return new Ct(i)},n.prototype.readFeaturesFromText=function(t,n){return[this.readFeatureFromText(t,n)]},n.prototype.readGeometryFromText=function(t,n){var i=Kr(this.ap),r=hC(t,i,this.rm);$j(r,0,r.length,i,r);var e=me(r,0,r.length,i);return xx(new Yb(e,this.ap),!1,this.adaptOptions(n))},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):(Et(!1,40),"")},n.prototype.writeFeaturesText=function(t,n){return this.writeFeatureText(t[0],n)},n.prototype.writeGeometryText=function(t,n){var i=(t=xx(t,!0,this.adaptOptions(n))).getFlatCoordinates(),r=t.getStride();return $j(i,0,i.length,r,i),aC(i,r,this.rm)},n}(TT);function aC(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var s=0,u=t.length;s<u;)for(r=0;r<n;++r,++s){var a=t[s],h=a-o[r];o[r]=a,t[s]=h}return fC(t,e)}function hC(t,n,i){var r,e=i||1e5,o=new Array(n);for(r=0;r<n;++r)o[r]=0;for(var s=cC(t,e),u=0,a=s.length;u<a;)for(r=0;r<n;++r,++u)o[r]+=s[u],s[u]=o[r];return s}function fC(t,n){for(var i=n||1e5,r=0,e=t.length;r<e;++r)t[r]=Math.round(t[r]*i);return lC(t)}function cC(t,n){for(var i=n||1e5,r=vC(t),e=0,o=r.length;e<o;++e)r[e]/=i;return r}function lC(t){for(var n=0,i=t.length;n<i;++n){var r=t[n];t[n]=r<0?~(r<<1):r<<1}return pC(t)}function vC(t){for(var n=dC(t),i=0,r=n.length;i<r;++i){var e=n[i];n[i]=1&e?~(e>>1):e>>1}return n}function pC(t){for(var n="",i=0,r=t.length;i<r;++i)n+=yC(t[i]);return n}function dC(t){for(var n=[],i=0,r=0,e=0,o=t.length;e<o;++e){var s=t.charCodeAt(e)-63;i|=(31&s)<<r,s<32?(n.push(i),i=0,r=0):r+=5}return n}function yC(t){for(var n,i="";t>=32;)n=63+(32|31&t),i+=String.fromCharCode(n),t>>=5;return n=t+63,i+=String.fromCharCode(n)}var mC=uC,wC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gC=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.Mv=r.layerName,i.qh=r.layers?r.layers:null,i.dataProjection=yr(r.dataProjection?r.dataProjection:"EPSG:4326"),i}return wC(n,t),n.prototype.readFeaturesFromObject=function(t,n){if("Topology"==t.type){var i=t,r=void 0,e=null,o=null;i.transform&&(e=(r=i.transform).scale,o=r.translate);var s=i.arcs;r&&function(t,n,i){for(var r=0,e=t.length;r<e;++r)SC(t[r],n,i)}(s,e,o);var u=[],a=i.objects,h=this.Mv,f=void 0;for(var c in a)this.qh&&-1==this.qh.indexOf(c)||("GeometryCollection"===a[c].type?(f=a[c],u.push.apply(u,_C(f,s,e,o,h,c,n))):(f=a[c],u.push(MC(f,s,e,o,h,c,n))));return u}return[]},n.prototype.readProjectionFromObject=function(t){return this.dataProjection},n}(Rx),bC={Point:function(t,n,i){var r=t.coordinates;n&&i&&OC(r,n,i);return new Te(r)},LineString:function(t,n){var i=xC(t.arcs,n);return new Yb(i)},Polygon:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r)i[r]=xC(t.arcs[r],n);return new Ke(i)},MultiPoint:function(t,n,i){var r=t.coordinates;if(n&&i)for(var e=0,o=r.length;e<o;++e)OC(r[e],n,i);return new Gb(r)},MultiLineString:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r)i[r]=xC(t.arcs[r],n);return new Wb(i)},MultiPolygon:function(t,n){for(var i=[],r=0,e=t.arcs.length;r<e;++r){for(var o=t.arcs[r],s=[],u=0,a=o.length;u<a;++u)s[u]=xC(o[u],n);i[r]=s}return new Jb(i)}};function xC(t,n){for(var i,r=[],e=0,o=t.length;e<o;++e)if(i=t[e],e>0&&r.pop(),i>=0)for(var s=0,u=(a=n[i]).length;s<u;++s)r.push(a[s].slice(0));else{var a;for(s=(a=n[~i]).length-1;s>=0;--s)r.push(a[s].slice(0))}return r}function _C(t,n,i,r,e,o,s){for(var u=t.geometries,a=[],h=0,f=u.length;h<f;++h)a[h]=MC(u[h],n,i,r,e,o,s);return a}function MC(t,n,i,r,e,o,s){var u=null,a=t.type;if(a){var h=bC[a];u=xx(u="Point"===a||"MultiPoint"===a?h(t,i,r):h(t,n),!1,s)}var f=new Ct({geometry:u});void 0!==t.id&&f.setId(t.id);var c=t.properties;return e&&(c||(c={}),c[e]=o),c&&f.setProperties(c,!0),f}function SC(t,n,i){for(var r=0,e=0,o=0,s=t.length;o<s;++o){var u=t[o];r+=u[0],e+=u[1],u[0]=r,u[1]=e,OC(u,n,i)}}function OC(t,n,i){t[0]=t[0]*n[0]+i[0],t[1]=t[1]*n[1]+i[1]}var jC=gC,EC=function(){function t(t){this.om=t}return t.prototype.getTagName=function(){return this.om},t}(),TC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),PC=function(t){function n(n,i){var r=t.call(this,n)||this;return r.conditions=i,Et(r.conditions.length>=2,57),r}return TC(n,t),n}(EC),AC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),CC=function(t){function n(n){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return AC(n,t),n}(PC),kC=CC,IC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),NC=function(t){function n(n,i,r){var e=t.call(this,"BBOX")||this;if(e.geometryName=n,e.extent=i,4!==i.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return e.srsName=r,e}return IC(n,t),n}(EC),zC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),LC=function(t){function n(n,i,r,e){var o=t.call(this,n)||this;return o.geometryName=i||"the_geom",o.geometry=r,o.srsName=e,o}return zC(n,t),n}(EC),RC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),FC=function(t){function n(n,i,r){return t.call(this,"Contains",n,i,r)||this}return RC(n,t),n}(LC),GC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),DC=function(t){function n(n,i,r,e,o){var s=t.call(this,"DWithin",n,i,o)||this;return s.distance=r,s.unit=e,s}return GC(n,t),n}(LC),UC=DC,qC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),BC=function(t){function n(n,i,r){return t.call(this,"Disjoint",n,i,r)||this}return qC(n,t),n}(LC),XC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),YC=function(t){function n(n,i){var r=t.call(this,n)||this;return r.propertyName=i,r}return XC(n,t),n}(EC),ZC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),VC=function(t){function n(n,i,r){var e=t.call(this,"During",n)||this;return e.begin=i,e.end=r,e}return ZC(n,t),n}(YC),WC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$C=function(t){function n(n,i,r,e){var o=t.call(this,n,i)||this;return o.expression=r,o.matchCase=e,o}return WC(n,t),n}(YC),KC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),HC=function(t){function n(n,i,r){return t.call(this,"PropertyIsEqualTo",n,i,r)||this}return KC(n,t),n}($C),JC=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),QC=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThan",n,i)||this}return JC(n,t),n}($C),tk=QC,nk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ik=function(t){function n(n,i){return t.call(this,"PropertyIsGreaterThanOrEqualTo",n,i)||this}return nk(n,t),n}($C),rk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ek=function(t){function n(n,i,r){return t.call(this,"Intersects",n,i,r)||this}return rk(n,t),n}(LC),ok=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sk=function(t){function n(n,i,r){var e=t.call(this,"PropertyIsBetween",n)||this;return e.lowerBoundary=i,e.upperBoundary=r,e}return ok(n,t),n}(YC),uk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ak=function(t){function n(n,i,r,e,o,s){var u=t.call(this,"PropertyIsLike",n)||this;return u.pattern=i,u.wildCard=void 0!==r?r:"*",u.singleChar=void 0!==e?e:".",u.escapeChar=void 0!==o?o:"!",u.matchCase=s,u}return uk(n,t),n}(YC),hk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fk=function(t){function n(n){return t.call(this,"PropertyIsNull",n)||this}return hk(n,t),n}(YC),ck=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lk=function(t){function n(n,i){return t.call(this,"PropertyIsLessThan",n,i)||this}return ck(n,t),n}($C),vk=lk,pk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),dk=function(t){function n(n,i){return t.call(this,"PropertyIsLessThanOrEqualTo",n,i)||this}return pk(n,t),n}($C),yk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),mk=function(t){function n(n){var i=t.call(this,"Not")||this;return i.condition=n,i}return yk(n,t),n}(EC),wk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gk=function(t){function n(n,i,r){return t.call(this,"PropertyIsNotEqualTo",n,i,r)||this}return wk(n,t),n}($C),bk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xk=function(t){function n(n){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return bk(n,t),n}(PC),_k=xk,Mk=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sk=function(t){function n(n){var i=t.call(this,"ResourceId")||this;return i.rid=n,i}return Mk(n,t),n}(EC),Ok=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jk=function(t){function n(n,i,r){return t.call(this,"Within",n,i,r)||this}return Ok(n,t),n}(LC),Ek=jk;function Tk(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(kC,n))}function Pk(t,n,i){return new NC(t,n,i)}var Ak=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ck={"http://www.opengis.net/gml":{boundedBy:xc(fE.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:wc(fE.prototype.readFeaturesInternal)}},kk={"http://www.opengis.net/wfs":{totalInserted:xc(yE),totalUpdated:xc(yE),totalDeleted:xc(yE)},"http://www.opengis.net/wfs/2.0":{totalInserted:xc(yE),totalUpdated:xc(yE),totalDeleted:xc(yE)}},Ik={"http://www.opengis.net/wfs":{TransactionSummary:xc(Yk,"transactionSummary"),InsertResults:xc($k,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:xc(Yk,"transactionSummary"),InsertResults:xc($k,"insertIds")}},Nk={"http://www.opengis.net/wfs":{PropertyName:_c(SE)},"http://www.opengis.net/wfs/2.0":{PropertyName:_c(SE)}},zk={"http://www.opengis.net/wfs":{Insert:_c(Kk),Update:_c(tI),Delete:_c(Qk),Property:_c(nI),Native:_c(iI)},"http://www.opengis.net/wfs/2.0":{Insert:_c(Kk),Update:_c(tI),Delete:_c(Qk),Property:_c(nI),Native:_c(iI)}},Lk="feature",Rk="http://www.w3.org/2000/xmlns/",Fk={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},Gk={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},Dk={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},Uk={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},qk={"2.0.0":RE,"1.1.0":kE,"1.0.0":TE},Bk=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.af=r.version?r.version:"1.1.0",i.sm=r.featureType,i.um=r.featureNS,i.am=r.gmlFormat?r.gmlFormat:new qk[i.af],i.hm=r.schemaLocation?r.schemaLocation:Uk[i.af],i}return Ak(n,t),n.prototype.getFeatureType=function(){return this.sm},n.prototype.setFeatureType=function(t){this.sm=t},n.prototype.readFeaturesFromNode=function(t,n){var i={node:t};P(i,{featureType:this.sm,featureNS:this.um}),P(i,this.getReadOptions(t,n||{}));var r=[i],e=Pc([],"2.0.0"===this.af?Ck:this.am.FEATURE_COLLECTION_PARSERS,t,r,this.am);return e||(e=[]),e},n.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var n=yc(t);return this.readTransactionResponseFromDocument(n)}return pc(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},n.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var n=yc(t);return this.readFeatureCollectionMetadataFromDocument(n)}return pc(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},n.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)},n.prototype.readFeatureCollectionMetadataFromNode=function(t){var n={},i=mE(t.getAttribute("numberOfFeatures"));return n.numberOfFeatures=i,Pc(n,Ck,t,[],this.am)},n.prototype.readTransactionResponseFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)},n.prototype.readTransactionResponseFromNode=function(t){return Pc({},Ik,t,[])},n.prototype.writeGetFeature=function(t){var n=this,i=cc(Gk[this.af],"GetFeature");i.setAttribute("service","WFS"),i.setAttribute("version",this.af),t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams",t.viewParams),i.setAttributeNS(fc,"xsi:schemaLocation",this.hm);var r={node:i};if(P(r,{version:this.af,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.um,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Et(Array.isArray(t.featureTypes),11),"string"==typeof t.featureTypes[0]){var e=t.filter;t.bbox&&(Et(t.geometryName,12),e=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,e)),P(r,{geometryName:t.geometryName,filter:e}),bI(i,t.featureTypes,[r])}else t.featureTypes.forEach((function(e){var o=n.combineBboxAndFilter(e.geometryName,e.bbox,t.srsName,t.filter);P(r,{geometryName:e.geometryName,filter:o}),bI(i,[e.name],[r])}));return i},n.prototype.combineBboxAndFilter=function(t,n,i,r){var e=Pk(t,n,i);return r?Tk(r,e):e},n.prototype.writeTransaction=function(t,n,i,r){var e,o=[],s=r.version?r.version:this.af,u=cc(Gk[s],"Transaction");u.setAttribute("service","WFS"),u.setAttribute("version",s),r&&(e=r.gmlOptions?r.gmlOptions:{},r.handle&&u.setAttribute("handle",r.handle)),u.setAttributeNS(fc,"xsi:schemaLocation",Uk[s]);var a=function(t,n,i,r){var e,o=r.featurePrefix?r.featurePrefix:Lk;"1.0.0"===i?e=2:"1.1.0"===i?e=3:"2.0.0"===i&&(e=3.2);return P({node:t},{version:i,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:o,gmlVersion:e,hasZ:r.hasZ,srsName:r.srsName},n)}(u,e,s,r);return t&&Xk("Insert",t,o,a),n&&Xk("Update",n,o,a),i&&Xk("Delete",i,o,a),r.nativeElements&&Xk("Native",r.nativeElements,o,a),u},n.prototype.readProjectionFromDocument=function(t){for(var n=t.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null},n.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var n=(t=t.firstElementChild.firstElementChild).firstElementChild;n;n=n.nextElementSibling)if(0!==n.childNodes.length&&(1!==n.childNodes.length||3!==n.firstChild.nodeType)){var i=[{}];return this.am.readGeometryElement(n,i),yr(i.pop().srsName)}return null},n}(oE);function Xk(t,n,i,r){Cc(r,zk,Sc(t),n,i)}function Yk(t,n){return Pc({},kk,t,n)}var Zk={"http://www.opengis.net/ogc":{FeatureId:wc((function(t,n){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:wc((function(t,n){return t.getAttribute("fid")}))}};function Vk(t,n){Tc(Zk,t,n)}var Wk={"http://www.opengis.net/wfs":{Feature:Vk},"http://www.opengis.net/wfs/2.0":{Feature:Vk}};function $k(t,n){return Pc([],Wk,t,n)}function Kk(t,n,i){var r=i[i.length-1],e=r.featureType,o=r.featureNS,s=r.gmlVersion,u=cc(o,e);t.appendChild(u),2===s?TE.prototype.writeFeatureElement(u,n,i):3===s?kE.prototype.writeFeatureElement(u,n,i):RE.prototype.writeFeatureElement(u,n,i)}function Hk(t,n,i){var r=i[i.length-1].version,e=Fk[r],o=cc(e,"Filter"),s=cc(e,"FeatureId");o.appendChild(s),s.setAttribute("fid",n),t.appendChild(o)}function Jk(t,n){var i=(t=t||Lk)+":";return 0===n.indexOf(i)?n:i+n}function Qk(t,n,i){var r=i[i.length-1];Et(void 0!==n.getId(),26);var e=r.featureType,o=r.featurePrefix,s=r.featureNS,u=Jk(o,e);t.setAttribute("typeName",u),t.setAttributeNS(Rk,"xmlns:"+o,s);var a=n.getId();void 0!==a&&Hk(t,a,i)}function tI(t,n,i){var r=i[i.length-1];Et(void 0!==n.getId(),27);var e=r.version,o=r.featureType,s=r.featurePrefix,u=r.featureNS,a=Jk(s,o),h=n.getGeometryName();t.setAttribute("typeName",a),t.setAttributeNS(Rk,"xmlns:"+s,u);var f=n.getId();if(void 0!==f){for(var c=n.getKeys(),l=[],v=0,p=c.length;v<p;v++){var d=n.get(c[v]);if(void 0!==d){var y=c[v];d&&"function"==typeof d.getSimplifiedGeometry&&(y=h),l.push({name:y,value:d})}}Cc({version:e,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},zk,Sc("Property"),l,i),Hk(t,f,i)}}function nI(t,n,i){var r=i[i.length-1],e=r.version,o=Gk[e],s=cc(o,"Name"),u=r.gmlVersion;if(t.appendChild(s),SE(s,n.name),void 0!==n.value&&null!==n.value){var a=cc(o,"Value");t.appendChild(a),n.value&&"function"==typeof n.value.getSimplifiedGeometry?2===u?TE.prototype.writeGeometryElement(a,n.value,i):3===u?kE.prototype.writeGeometryElement(a,n.value,i):RE.prototype.writeGeometryElement(a,n.value,i):SE(a,n.value)}}function iI(t,n,i){n.vendorId&&t.setAttribute("vendorId",n.vendorId),void 0!==n.safeToIgnore&&t.setAttribute("safeToIgnore",String(n.safeToIgnore)),void 0!==n.value&&SE(t,n.value)}var rI={"http://www.opengis.net/wfs":{Query:_c(eI)},"http://www.opengis.net/wfs/2.0":{Query:_c(eI)},"http://www.opengis.net/ogc":{During:_c(hI),And:_c(fI),Or:_c(fI),Not:_c(cI),BBOX:_c(sI),Contains:_c(uI),Intersects:_c(uI),Within:_c(uI),DWithin:_c(aI),PropertyIsEqualTo:_c(lI),PropertyIsNotEqualTo:_c(lI),PropertyIsLessThan:_c(lI),PropertyIsLessThanOrEqualTo:_c(lI),PropertyIsGreaterThan:_c(lI),PropertyIsGreaterThanOrEqualTo:_c(lI),PropertyIsNull:_c(vI),PropertyIsBetween:_c(pI),PropertyIsLike:_c(dI)},"http://www.opengis.net/fes/2.0":{During:_c(hI),And:_c(fI),Or:_c(fI),Not:_c(cI),BBOX:_c(sI),Contains:_c(uI),Disjoint:_c(uI),Intersects:_c(uI),ResourceId:_c((function(t,n,i){t.setAttribute("rid",n.rid)})),Within:_c(uI),DWithin:_c(aI),PropertyIsEqualTo:_c(lI),PropertyIsNotEqualTo:_c(lI),PropertyIsLessThan:_c(lI),PropertyIsLessThanOrEqualTo:_c(lI),PropertyIsGreaterThan:_c(lI),PropertyIsGreaterThanOrEqualTo:_c(lI),PropertyIsNull:_c(vI),PropertyIsBetween:_c(pI),PropertyIsLike:_c(dI)}};function eI(t,n,i){var r,e,o=i[i.length-1],s=o.version,u=o.featurePrefix,a=o.featureNS,h=o.propertyNames,f=o.srsName;r=u?Jk(u,n):n,e="2.0.0"===s?"typeNames":"typeName",t.setAttribute(e,r),f&&t.setAttribute("srsName",f),a&&t.setAttributeNS(Rk,"xmlns:"+u,a);var c=P({},o);c.node=t,Cc(c,Nk,Sc("PropertyName"),h,i);var l=o.filter;if(l){var v=cc(xI(s),"Filter");t.appendChild(v),oI(v,l,i)}}function oI(t,n,i){var r=i[i.length-1],e={node:t};P(e,{context:r}),Cc(e,rI,Sc(n.getTagName()),[n],i)}function sI(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=qk[e];wI(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.extent,i)}function uI(t,n,i){var r=i[i.length-1],e=r.context.version;r.srsName=n.srsName;var o=qk[e];wI(e,t,n.geometryName),o.prototype.writeGeometryElement(t,n.geometry,i)}function aI(t,n,i){var r=i[i.length-1].context.version;uI(t,n,i);var e=cc(xI(r),"Distance");SE(e,n.distance.toString()),"2.0.0"===r?e.setAttribute("uom",n.unit):e.setAttribute("units",n.unit),t.appendChild(e)}function hI(t,n,i){var r=i[i.length-1].context.version;yI(Dk[r],"ValueReference",t,n.propertyName);var e=cc(uE,"TimePeriod");t.appendChild(e);var o=cc(uE,"begin");e.appendChild(o),gI(o,n.begin);var s=cc(uE,"end");e.appendChild(s),gI(s,n.end)}function fI(t,n,i){var r=i[i.length-1].context,e={node:t};P(e,{context:r});for(var o=n.conditions,s=0,u=o.length;s<u;++s){var a=o[s];Cc(e,rI,Sc(a.getTagName()),[a],i)}}function cI(t,n,i){var r=i[i.length-1].context,e={node:t};P(e,{context:r});var o=n.condition;Cc(e,rI,Sc(o.getTagName()),[o],i)}function lI(t,n,i){var r=i[i.length-1].context.version;void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),wI(r,t,n.propertyName),mI(r,t,""+n.expression)}function vI(t,n,i){wI(i[i.length-1].context.version,t,n.propertyName)}function pI(t,n,i){var r=i[i.length-1].context.version,e=xI(r);wI(r,t,n.propertyName);var o=cc(e,"LowerBoundary");t.appendChild(o),mI(r,o,""+n.lowerBoundary);var s=cc(e,"UpperBoundary");t.appendChild(s),mI(r,s,""+n.upperBoundary)}function dI(t,n,i){var r=i[i.length-1].context.version;t.setAttribute("wildCard",n.wildCard),t.setAttribute("singleChar",n.singleChar),t.setAttribute("escapeChar",n.escapeChar),void 0!==n.matchCase&&t.setAttribute("matchCase",n.matchCase.toString()),wI(r,t,n.propertyName),mI(r,t,""+n.pattern)}function yI(t,n,i,r){var e=cc(t,n);SE(e,r),i.appendChild(e)}function mI(t,n,i){yI(xI(t),"Literal",n,i)}function wI(t,n,i){"2.0.0"===t?yI(Dk[t],"ValueReference",n,i):yI(Fk[t],"PropertyName",n,i)}function gI(t,n){var i=cc(uE,"TimeInstant");t.appendChild(i);var r=cc(uE,"timePosition");i.appendChild(r),SE(r,n)}function bI(t,n,i){var r=i[i.length-1],e=P({},r);e.node=t,Cc(e,rI,Sc("Query"),n,i)}function xI(t){return"2.0.0"===t?Dk[t]:Fk[t]}var _I=Bk,MI=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),SI=1,OI=2,jI=3,EI=4,TI=5,PI=6,AI=7,CI=15,kI=16,II=17,NI=function(){function t(t){this.fm=t,this.lm=0,this.vm=!1,this.pm=!1,this.dm=!1,this.ym=!1,this.wm=null,this.gm="XY"}return t.prototype.readUint8=function(){return this.fm.getUint8(this.lm++)},t.prototype.readUint32=function(t){return this.fm.getUint32((this.lm+=4)-4,void 0!==t?t:this.pm)},t.prototype.readDouble=function(t){return this.fm.getFloat64((this.lm+=8)-8,void 0!==t?t:this.pm)},t.prototype.readPoint=function(){var t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.dm&&t.push(this.readDouble()),this.ym&&t.push(this.readDouble()),t},t.prototype.readLineString=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readPoint());return n},t.prototype.readPolygon=function(){for(var t=this.readUint32(),n=[],i=0;i<t;i++)n.push(this.readLineString());return n},t.prototype.readWkbHeader=function(t){var n=this.readUint8()>0,i=this.readUint32(n),r=Math.floor((268435455&i)/1e3),e=Boolean(2147483648&i)||1===r||3===r,o=Boolean(1073741824&i)||2===r||3===r,s=Boolean(536870912&i),u=(268435455&i)%1e3,a=["XY",e?"Z":"",o?"M":""].join(""),h=s?this.readUint32(n):null;if(void 0!==t&&t!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.vm){if(this.pm!==n)throw new Error("Inconsistent endian");if(this.gm!==a)throw new Error("Inconsistent geometry layout");if(h&&this.wm!==h)throw new Error("Inconsistent coordinate system (SRID)")}else this.pm=n,this.dm=e,this.ym=o,this.gm=a,this.wm=h,this.vm=!0;return u},t.prototype.readWkbPayload=function(t){switch(t){case SI:return this.readPoint();case OI:return this.readLineString();case jI:case II:return this.readPolygon();case EI:return this.readMultiPoint();case TI:return this.readMultiLineString();case PI:case CI:case kI:return this.readMultiPolygon();case AI:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}},t.prototype.readWkbBlock=function(t){return this.readWkbPayload(this.readWkbHeader(t))},t.prototype.readWkbCollection=function(t,n){for(var i=this.readUint32(),r=[],e=0;e<i;e++){var o=t.call(this,n);o&&r.push(o)}return r},t.prototype.readMultiPoint=function(){return this.readWkbCollection(this.readWkbBlock,SI)},t.prototype.readMultiLineString=function(){return this.readWkbCollection(this.readWkbBlock,OI)},t.prototype.readMultiPolygon=function(){return this.readWkbCollection(this.readWkbBlock,jI)},t.prototype.readGeometryCollection=function(){return this.readWkbCollection(this.readGeometry)},t.prototype.readGeometry=function(){var t=this.readWkbHeader(),n=this.readWkbPayload(t);switch(t){case SI:return new Te(n,this.gm);case OI:return new Yb(n,this.gm);case jI:case II:return new Ke(n,this.gm);case EI:return new Gb(n,this.gm);case TI:return new Wb(n,this.gm);case PI:case CI:case kI:return new Jb(n,this.gm);case AI:return new Nx(n);default:return null}},t.prototype.getSrid=function(){return this.wm},t}(),zI=function(){function t(t){t=t||{},this.gm=t.layout,this.pm=!1!==t.littleEndian,this.bm=!1!==t.ewkb,this.xm=[],this._m=P({X:0,Y:0,Z:0,M:0},t.nodata)}return t.prototype.writeUint8=function(t){this.xm.push([1,t])},t.prototype.writeUint32=function(t){this.xm.push([4,t])},t.prototype.writeDouble=function(t){this.xm.push([8,t])},t.prototype.writePoint=function(t,n){for(var i=P.apply(null,n.split("").map((function(n,i){var r;return(r={})[n]=t[i],r}))),r=0,e=this.gm;r<e.length;r++){var o=e[r];this.writeDouble(o in i?i[o]:this._m[o])}},t.prototype.writeLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writePoint(t[i],n)},t.prototype.writePolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeLineString(t[i],n)},t.prototype.writeWkbHeader=function(t,n){t%=1e3,this.gm.indexOf("Z")>=0&&(t+=this.bm?2147483648:1e3),this.gm.indexOf("M")>=0&&(t+=this.bm?1073741824:2e3),this.bm&&Number.isInteger(n)&&(t|=536870912),this.writeUint8(this.pm?1:0),this.writeUint32(t),this.bm&&Number.isInteger(n)&&this.writeUint32(n)},t.prototype.writeMultiPoint=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(1),this.writePoint(t[i],n)},t.prototype.writeMultiLineString=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(2),this.writeLineString(t[i],n)},t.prototype.writeMultiPolygon=function(t,n){this.writeUint32(t.length);for(var i=0;i<t.length;i++)this.writeWkbHeader(3),this.writePolygon(t[i],n)},t.prototype.writeGeometryCollection=function(t){this.writeUint32(t.length);for(var n=0;n<t.length;n++)this.writeGeometry(t[n])},t.prototype.findMinimumLayout=function(t,n){void 0===n&&(n="XYZM");var i,r;if(t instanceof Jr)return(i=t.getLayout())===(r=n)?i:"XYZM"===i?r:"XYZM"===r?i:"XY";if(t instanceof Nx)for(var e=t.getGeometriesArray(),o=0;o<e.length&&"XY"!==n;o++)n=this.findMinimumLayout(e[o],n);return n},t.prototype.writeGeometry=function(t,n){var i={Point:SI,LineString:OI,Polygon:jI,MultiPoint:EI,MultiLineString:TI,MultiPolygon:PI,GeometryCollection:AI},r=t.getType(),e=i[r];if(!e)throw new Error("GeometryType "+r+" is not supported");(this.gm||(this.gm=this.findMinimumLayout(t)),this.writeWkbHeader(e,n),t instanceof Jr)?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[r].call(this,t.getCoordinates(),t.getLayout()):t instanceof Nx&&this.writeGeometryCollection(t.getGeometriesArray())},t.prototype.getBuffer=function(){var t=this,n=this.xm.reduce((function(t,n){return t+n[0]}),0),i=new ArrayBuffer(n),r=new DataView(i),e=0;return this.xm.forEach((function(n){switch(n[0]){case 1:r.setUint8(e,n[1]);break;case 4:r.setUint32(e,n[1],t.pm);break;case 8:r.setFloat64(e,n[1],t.pm)}e+=n[0]})),i},t}(),LI=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.splitCollection=Boolean(r.splitCollection),i.Mm=null,i.Sm=!1!==r.hex,i.Om=!1!==r.littleEndian,i.jm=!1!==r.ewkb,i.gm=r.geometryLayout,i.Em=r.nodataZ||0,i.Tm=r.nodataM||0,i.wm=r.srid,i}return MI(n,t),n.prototype.getType=function(){return this.Sm?"text":"arraybuffer"},n.prototype.readFeature=function(t,n){return new Ct({geometry:this.readGeometry(t,n)})},n.prototype.readFeatures=function(t,n){var i=this.readGeometry(t,n);return(this.splitCollection&&i instanceof Nx?i.getGeometriesArray():[i]).map((function(t){return new Ct({geometry:t})}))},n.prototype.readGeometry=function(t,n){var i=RI(t);if(!i)return null;var r=new NI(i).readGeometry();this.Mm=i;var e=this.getReadOptions(t,n);return this.Mm=null,xx(r,!1,e)},n.prototype.readProjection=function(t){var n=this.Mm||RI(t);if(n){var i=new NI(n);return i.readWkbHeader(),i.getSrid()&&yr("EPSG:"+i.getSrid())||void 0}},n.prototype.writeFeature=function(t,n){return this.writeGeometry(t.getGeometry(),n)},n.prototype.writeFeatures=function(t,n){return this.writeGeometry(new Nx(t.map((function(t){return t.getGeometry()}))),n)},n.prototype.writeGeometry=function(t,n){var i=this.adaptOptions(n),r=new zI({layout:this.gm,littleEndian:this.Om,ewkb:this.jm,nodata:{Z:this.Em,M:this.Tm}}),e=Number.isInteger(this.wm)?Number(this.wm):null;if(!1!==this.wm&&!Number.isInteger(this.wm)){var o=i.dataProjection&&yr(i.dataProjection);if(o){var s=o.getCode();0===s.indexOf("EPSG:")&&(e=Number(s.substring(5)))}}r.writeGeometry(xx(t,!0,i),e);var u=r.getBuffer();return this.Sm?function(t){var n=new Uint8Array(t);return Array.from(n.values()).map((function(t){return(t<16?"0":"")+Number(t).toString(16).toUpperCase()})).join("")}(u):u},n}(bx);function RI(t){return"string"==typeof t?function(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.substr(2*i,2),16);return new DataView(n.buffer)}(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var FI=LI,GI=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),DI={POINT:Te,LINESTRING:Yb,POLYGON:Ke,MULTIPOINT:Gb,MULTILINESTRING:Wb,MULTIPOLYGON:Jb},UI="EMPTY",qI=0,BI=1,XI=2,YI=3,ZI=4,VI=5,WI=6,$I={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"},KI=function(){function t(t){this.wkt=t,this.Pm=-1}return t.prototype.Am=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.Cm=function(t,n){return t>="0"&&t<="9"||"."==t&&!(void 0!==n&&n)},t.prototype.km=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.Im=function(){return this.wkt.charAt(++this.Pm)},t.prototype.nextToken=function(){var t,n=this.Im(),i=this.Pm,r=n;if("("==n)t=XI;else if(","==n)t=VI;else if(")"==n)t=YI;else if(this.Cm(n)||"-"==n)t=ZI,r=this.Nm();else if(this.Am(n))t=BI,r=this.zm();else{if(this.km(n))return this.nextToken();if(""!==n)throw new Error("Unexpected character: "+n);t=WI}return{position:i,value:r,type:t}},t.prototype.Nm=function(){var t,n=this.Pm,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.Im()}while(this.Cm(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(n,this.Pm--))},t.prototype.zm=function(){var t,n=this.Pm;do{t=this.Im()}while(this.Am(t));return this.wkt.substring(n,this.Pm--).toUpperCase()},t}(),HI=function(){function t(t){this.Lm=t,this.Rm={position:0,type:qI},this.gm="XY"}return t.prototype.Fm=function(){this.Rm=this.Lm.nextToken()},t.prototype.isTokenType=function(t){return this.Rm.type==t},t.prototype.match=function(t){var n=this.isTokenType(t);return n&&this.Fm(),n},t.prototype.parse=function(){return this.Fm(),this.Gm()},t.prototype.Dm=function(){var t="XY",n=this.Rm;if(this.isTokenType(BI)){var i=n.value;"Z"===i?t="XYZ":"M"===i?t="XYM":"ZM"===i&&(t="XYZM"),"XY"!==t&&this.Fm()}return t},t.prototype.Um=function(){if(this.match(XI)){var t=[];do{t.push(this.Gm())}while(this.match(VI));if(this.match(YI))return t}throw new Error(this.qm())},t.prototype.Bm=function(){if(this.match(XI)){var t=this.Xm();if(this.match(YI))return t}throw new Error(this.qm())},t.prototype.Ym=function(){if(this.match(XI)){var t=this.Zm();if(this.match(YI))return t}throw new Error(this.qm())},t.prototype.Vm=function(){if(this.match(XI)){var t=this.Wm();if(this.match(YI))return t}throw new Error(this.qm())},t.prototype.$m=function(){if(this.match(XI)){var t=void 0;if(t=this.Rm.type==XI?this.Km():this.Zm(),this.match(YI))return t}throw new Error(this.qm())},t.prototype.Hm=function(){if(this.match(XI)){var t=this.Wm();if(this.match(YI))return t}throw new Error(this.qm())},t.prototype.Jm=function(){if(this.match(XI)){var t=this.Qm();if(this.match(YI))return t}throw new Error(this.qm())},t.prototype.Xm=function(){for(var t=[],n=this.gm.length,i=0;i<n;++i){var r=this.Rm;if(!this.match(ZI))break;t.push(r.value)}if(t.length==n)return t;throw new Error(this.qm())},t.prototype.Zm=function(){for(var t=[this.Xm()];this.match(VI);)t.push(this.Xm());return t},t.prototype.Km=function(){for(var t=[this.Bm()];this.match(VI);)t.push(this.Bm());return t},t.prototype.Wm=function(){for(var t=[this.Ym()];this.match(VI);)t.push(this.Ym());return t},t.prototype.Qm=function(){for(var t=[this.Vm()];this.match(VI);)t.push(this.Vm());return t},t.prototype.tw=function(){var t=this.isTokenType(BI)&&this.Rm.value==UI;return t&&this.Fm(),t},t.prototype.qm=function(){return"Unexpected `"+this.Rm.value+"` at position "+this.Rm.position+" in `"+this.Lm.wkt+"`"},t.prototype.Gm=function(){var t=this.Rm;if(this.match(BI)){var n=t.value;this.gm=this.Dm();var i=this.tw();if("GEOMETRYCOLLECTION"==n){if(i)return new Nx([]);var r=this.Um();return new Nx(r)}var e=DI[n];if(!e)throw new Error("Invalid geometry type: "+n);var o=void 0;if(i)o="POINT"==n?[NaN,NaN]:[];else switch(n){case"POINT":o=this.Bm();break;case"LINESTRING":o=this.Ym();break;case"POLYGON":o=this.Vm();break;case"MULTIPOINT":o=this.$m();break;case"MULTILINESTRING":o=this.Hm();break;case"MULTIPOLYGON":o=this.Jm()}return new e(o,this.gm)}throw new Error(this.qm())},t}(),JI=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.nw=void 0!==r.splitCollection&&r.splitCollection,i}return GI(n,t),n.prototype.iw=function(t){var n=new KI(t);return new HI(n).parse()},n.prototype.readFeatureFromText=function(t,n){var i=this.readGeometryFromText(t,n),r=new Ct;return r.setGeometry(i),r},n.prototype.readFeaturesFromText=function(t,n){for(var i=[],r=this.readGeometryFromText(t,n),e=[],o=0,s=(i=this.nw&&"GeometryCollection"==r.getType()?r.getGeometriesArray():[r]).length;o<s;++o){var u=new Ct;u.setGeometry(i[o]),e.push(u)}return e},n.prototype.readGeometryFromText=function(t,n){return xx(this.iw(t),!1,n)},n.prototype.writeFeatureText=function(t,n){var i=t.getGeometry();return i?this.writeGeometryText(i,n):""},n.prototype.writeFeaturesText=function(t,n){if(1==t.length)return this.writeFeatureText(t[0],n);for(var i=[],r=0,e=t.length;r<e;++r)i.push(t[r].getGeometry());var o=new Nx(i);return this.writeGeometryText(o,n)},n.prototype.writeGeometryText=function(t,n){return rN(xx(t,!0,n))},n}(TT);function QI(t){var n=t.getCoordinates();return 0===n.length?"":n.join(" ")}function tN(t){for(var n=t.getCoordinates(),i=[],r=0,e=n.length;r<e;++r)i.push(n[r].join(" "));return i.join(",")}function nN(t){for(var n=[],i=t.getLinearRings(),r=0,e=i.length;r<e;++r)n.push("("+tN(i[r])+")");return n.join(",")}var iN={Point:QI,LineString:tN,Polygon:nN,MultiPoint:function(t){for(var n=[],i=t.getPoints(),r=0,e=i.length;r<e;++r)n.push("("+QI(i[r])+")");return n.join(",")},MultiLineString:function(t){for(var n=[],i=t.getLineStrings(),r=0,e=i.length;r<e;++r)n.push("("+tN(i[r])+")");return n.join(",")},MultiPolygon:function(t){for(var n=[],i=t.getPolygons(),r=0,e=i.length;r<e;++r)n.push("("+nN(i[r])+")");return n.join(",")},GeometryCollection:function(t){for(var n=[],i=t.getGeometries(),r=0,e=i.length;r<e;++r)n.push(rN(i[r]));return n.join(",")}};function rN(t){var n=t.getType(),i=(0,iN[n])(t),r=$I[n];if("function"==typeof t.getFlatCoordinates){var e=function(t){var n=t.getLayout(),i="";return"XYZ"!==n&&"XYZM"!==n||(i+="Z"),"XYM"!==n&&"XYZM"!==n||(i+="M"),i}(t);e.length>0&&(r+=" "+e)}return 0===i.length?r+" "+UI:r+"("+i+")"}var eN=JI,oN=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sN=[null,"http://www.opengis.net/wms"],uN=Ec(sN,{Service:xc((function(t,n){return Pc({},fN,t,n)})),Capability:xc((function(t,n){return Pc({},aN,t,n)}))}),aN=Ec(sN,{Request:xc((function(t,n){return Pc({},wN,t,n)})),Exception:xc((function(t,n){return Pc([],pN,t,n)})),Layer:xc((function(t,n){var i=Pc({},dN,t,n);if(void 0===i.Layer)return Object.assign(i,ON(t,n));return i}))}),hN=function(t){function n(){var n=t.call(this)||this;return n.version=void 0,n}return oN(n,t),n.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var n=Pc({version:this.version},uN,t,[]);return n||null},n}(DA),fN=Ec(sN,{Name:xc(wE),Title:xc(wE),Abstract:xc(wE),KeywordList:xc(PN),OnlineResource:xc(UA),ContactInformation:xc((function(t,n){return Pc({},cN,t,n)})),Fees:xc(wE),AccessConstraints:xc(wE),LayerLimit:xc(yE),MaxWidth:xc(yE),MaxHeight:xc(yE)}),cN=Ec(sN,{ContactPersonPrimary:xc((function(t,n){return Pc({},lN,t,n)})),ContactPosition:xc(wE),ContactAddress:xc((function(t,n){return Pc({},vN,t,n)})),ContactVoiceTelephone:xc(wE),ContactFacsimileTelephone:xc(wE),ContactElectronicMailAddress:xc(wE)}),lN=Ec(sN,{ContactPerson:xc(wE),ContactOrganization:xc(wE)}),vN=Ec(sN,{AddressType:xc(wE),Address:xc(wE),City:xc(wE),StateOrProvince:xc(wE),PostCode:xc(wE),Country:xc(wE)}),pN=Ec(sN,{Format:wc(wE)}),dN=Ec(sN,{Name:xc(wE),Title:xc(wE),Abstract:xc(wE),KeywordList:xc(PN),CRS:bc(wE),EX_GeographicBoundingBox:xc((function(t,n){var i=Pc({},mN,t,n);if(!i)return;var r=i.westBoundLongitude,e=i.southBoundLatitude,o=i.eastBoundLongitude,s=i.northBoundLatitude;if(void 0===r||void 0===e||void 0===o||void 0===s)return;return[r,e,o,s]})),BoundingBox:bc((function(t,n){var i=[dE(t.getAttribute("minx")),dE(t.getAttribute("miny")),dE(t.getAttribute("maxx")),dE(t.getAttribute("maxy"))],r=[dE(t.getAttribute("resx")),dE(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:r}})),Dimension:bc((function(t,n){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:lE(t.getAttribute("multipleValues")),nearestValue:lE(t.getAttribute("nearestValue")),current:lE(t.getAttribute("current")),values:wE(t)}})),Attribution:xc((function(t,n){return Pc({},yN,t,n)})),AuthorityURL:bc((function(t,n){var i=jN(t,n);if(i)return i.name=t.getAttribute("name"),i;return})),Identifier:bc(wE),MetadataURL:bc((function(t,n){var i=jN(t,n);if(i)return i.type=t.getAttribute("type"),i;return})),DataURL:bc(jN),FeatureListURL:bc(jN),Style:bc((function(t,n){return Pc({},_N,t,n)})),MinScaleDenominator:xc(pE),MaxScaleDenominator:xc(pE),Layer:bc(ON)}),yN=Ec(sN,{Title:xc(wE),OnlineResource:xc(UA),LogoURL:xc(TN)}),mN=Ec(sN,{westBoundLongitude:xc(pE),eastBoundLongitude:xc(pE),southBoundLatitude:xc(pE),northBoundLatitude:xc(pE)}),wN=Ec(sN,{GetCapabilities:xc(EN),GetMap:xc(EN),GetFeatureInfo:xc(EN)}),gN=Ec(sN,{Format:bc(wE),DCPType:bc((function(t,n){return Pc({},bN,t,n)}))}),bN=Ec(sN,{HTTP:xc((function(t,n){return Pc({},xN,t,n)}))}),xN=Ec(sN,{Get:xc(jN),Post:xc(jN)}),_N=Ec(sN,{Name:xc(wE),Title:xc(wE),Abstract:xc(wE),LegendURL:bc(TN),StyleSheetURL:xc(jN),StyleURL:xc(jN)}),MN=Ec(sN,{Format:xc(wE),OnlineResource:xc(UA)}),SN=Ec(sN,{Keyword:wc(wE)});function ON(t,n){var i=n[n.length-1],r=Pc({},dN,t,n);if(r){var e=lE(t.getAttribute("queryable"));void 0===e&&(e=i.queryable),r.queryable=void 0!==e&&e;var o=mE(t.getAttribute("cascaded"));void 0===o&&(o=i.cascaded),r.cascaded=o;var s=lE(t.getAttribute("opaque"));void 0===s&&(s=i.opaque),r.opaque=void 0!==s&&s;var u=lE(t.getAttribute("noSubsets"));void 0===u&&(u=i.noSubsets),r.noSubsets=void 0!==u&&u;var a=dE(t.getAttribute("fixedWidth"));a||(a=i.fixedWidth),r.fixedWidth=a;var h=dE(t.getAttribute("fixedHeight"));h||(h=i.fixedHeight),r.fixedHeight=h;["Style","CRS","AuthorityURL"].forEach((function(t){if(t in i){var n=r[t]||[];r[t]=n.concat(i[t])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in r)){var n=i[t];r[t]=n}})),r}}function jN(t,n){return Pc({},MN,t,n)}function EN(t,n){return Pc({},gN,t,n)}function TN(t,n){var i=jN(t,n);if(i){var r=[mE(t.getAttribute("width")),mE(t.getAttribute("height"))];return i.size=r,i}}function PN(t,n){return Pc([],SN,t,n)}var AN=hN,CN=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kN=function(t){function n(n){var i=t.call(this)||this,r=n||{};return i.um="http://mapserver.gis.umn.edu/mapserver",i.am=new TE,i.qh=r.layers?r.layers:null,i}return CN(n,t),n.prototype.getLayers=function(){return this.qh},n.prototype.setLayers=function(t){this.qh=t},n.prototype.rw=function(t,n){t.setAttribute("namespaceURI",this.um);var i=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==i)for(var e=0,o=t.childNodes.length;e<o;e++){var s=t.childNodes[e];if(s.nodeType===Node.ELEMENT_NODE){var u=s,a=n[0],h=u.localName.replace("_layer","");if(!this.qh||y(this.qh,h)){var f=h+"_feature";a.featureType=f,a.featureNS=this.um;var c={};c[f]=wc(this.am.readFeatureElement,this.am);var l=Ec([a.featureNS,null],c);u.setAttribute("namespaceURI",this.um);var v=Pc([],l,u,n,this.am);v&&g(r,v)}}}if("FeatureCollection"==i){var p=Pc([],this.am.FEATURE_COLLECTION_PARSERS,t,[{}],this.am);p&&(r=p)}return r},n.prototype.readFeaturesFromNode=function(t,n){var i={};return n&&P(i,this.getReadOptions(t,n)),this.rw(t,[i])},n}(oE),IN=kN,NN=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),zN=[null,"http://www.opengis.net/wmts/1.0"],LN=[null,"http://www.opengis.net/ows/1.1"],RN=Ec(zN,{Contents:xc((function(t,n){return Pc({},GN,t,n)}))}),FN=function(t){function n(){var n=t.call(this)||this;return n.ew=new oC,n}return NN(n,t),n.prototype.readFromNode=function(t){var n=t.getAttribute("version");n&&(n=n.trim());var i=this.ew.readFromNode(t);return i?(i.version=n,(i=Pc(i,RN,t,[]))||null):null},n}(DA),GN=Ec(zN,{Layer:bc((function(t,n){return Pc({},DN,t,n)})),TileMatrixSet:bc((function(t,n){return Pc({},VN,t,n)}))}),DN=Ec(zN,{Style:bc((function(t,n){var i=Pc({},UN,t,n);if(!i)return;var r="true"===t.getAttribute("isDefault");return i.isDefault=r,i})),Format:bc(wE),TileMatrixSetLink:bc((function(t,n){return Pc({},qN,t,n)})),Dimension:bc((function(t,n){return Pc({},YN,t,n)})),ResourceURL:bc((function(t,n){var i=t.getAttribute("format"),r=t.getAttribute("template"),e=t.getAttribute("resourceType"),o={};i&&(o.format=i);r&&(o.template=r);e&&(o.resourceType=e);return o}))},Ec(LN,{Title:xc(wE),Abstract:xc(wE),WGS84BoundingBox:xc($N),Identifier:xc(wE)})),UN=Ec(zN,{LegendURL:bc((function(t,n){var i={};return i.format=t.getAttribute("format"),i.href=UA(t),i}))},Ec(LN,{Title:xc(wE),Identifier:xc(wE)})),qN=Ec(zN,{TileMatrixSet:xc(wE),TileMatrixSetLimits:xc((function(t,n){return Pc([],BN,t,n)}))}),BN=Ec(zN,{TileMatrixLimits:wc((function(t,n){return Pc({},XN,t,n)}))}),XN=Ec(zN,{TileMatrix:xc(wE),MinTileRow:xc(yE),MaxTileRow:xc(yE),MinTileCol:xc(yE),MaxTileCol:xc(yE)}),YN=Ec(zN,{Default:xc(wE),Value:bc(wE)},Ec(LN,{Identifier:xc(wE)})),ZN=Ec(LN,{LowerCorner:wc(KN),UpperCorner:wc(KN)}),VN=Ec(zN,{WellKnownScaleSet:xc(wE),TileMatrix:bc((function(t,n){return Pc({},WN,t,n)}))},Ec(LN,{SupportedCRS:xc(wE),Identifier:xc(wE),BoundingBox:xc($N)})),WN=Ec(zN,{TopLeftCorner:xc(KN),ScaleDenominator:xc(pE),TileWidth:xc(yE),TileHeight:xc(yE),MatrixWidth:xc(yE),MatrixHeight:xc(yE)},Ec(LN,{Identifier:xc(wE)}));function $N(t,n){var i=Pc([],ZN,t,n);if(2==i.length)return yn(i)}function KN(t,n){var i=wE(t).split(/\s+/);if(i&&2==i.length){var r=+i[0],e=+i[1];if(!isNaN(r)&&!isNaN(e))return[r,e]}}var HN=FN,JN=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),QN=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],tz="enterfullscreen",nz="leavefullscreen";function iz(t){var n=t.body;return!!(n.webkitRequestFullscreen||n.msRequestFullscreen&&t.msFullscreenEnabled||n.requestFullscreen&&t.fullscreenEnabled)}function rz(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function ez(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var oz=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).on,i.once,i.un,i.nf=void 0!==r.keys&&r.keys,i.Xv=r.source,i.ow=!1,i.sw=i.uw.bind(i),i.aw=void 0!==r.className?r.className:"ol-full-screen",i.hw=[],i.fw=void 0!==r.activeClassName?r.activeClassName.split(" "):[i.aw+"-true"],i.cw=void 0!==r.inactiveClassName?r.inactiveClassName.split(" "):[i.aw+"-false"];var e=void 0!==r.label?r.label:"⤢";i.lw="string"==typeof e?document.createTextNode(e):e;var o=void 0!==r.labelActive?r.labelActive:"×";i.pw="string"==typeof o?document.createTextNode(o):o;var s=r.tipLabel?r.tipLabel:"Toggle full-screen";return i.dw=document.createElement("button"),i.dw.title=s,i.dw.setAttribute("type","button"),i.dw.appendChild(i.lw),i.dw.addEventListener(F,i.kr.bind(i),!1),i.yw(i.dw,i.ow),i.element.className="".concat(i.aw," ").concat(Ps," ").concat(Cs),i.element.appendChild(i.dw),i}return JN(n,t),n.prototype.kr=function(t){t.preventDefault(),this.mw()},n.prototype.mw=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(iz(n))if(rz(n))!function(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(n);else{var i=void 0;i=this.Xv?"string"==typeof this.Xv?n.getElementById(this.Xv):this.Xv:t.getTargetElement(),this.nf?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():ez(t)}(i):ez(i)}}},n.prototype.ww=function(){var t=this.getMap();if(t){var n=this.ow;this.ow=rz(t.getOwnerDocument()),n!==this.ow&&(this.yw(this.dw,this.ow),this.ow?(ko(this.pw,this.lw),this.dispatchEvent(tz)):(ko(this.lw,this.pw),this.dispatchEvent(nz)),t.updateSize())}},n.prototype.yw=function(t,n){var i,r,e,o;n?((i=t.classList).remove.apply(i,this.cw),(r=t.classList).add.apply(r,this.fw)):((e=t.classList).remove.apply(e,this.fw),(o=t.classList).add.apply(o,this.cw))},n.prototype.setMap=function(n){var i=this.getMap();i&&i.removeChangeListener(Eu,this.sw),t.prototype.setMap.call(this,n),this.uw(),n&&n.addChangeListener(Eu,this.sw)},n.prototype.uw=function(){for(var t=this.hw,n=0,i=t.length;n<i;++n)H(t[n]);t.length=0;var r=this.getMap();if(r){var e=r.getOwnerDocument();iz(e)?this.element.classList.remove(As):this.element.classList.add(As);for(n=0,i=QN.length;n<i;++n)t.push($(e,QN[n],this.ww,this));this.ww()}},n}(da),sz=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),uz="projection",az="coordinateFormat",hz=function(t){function n(n){var i=this,r=n||{},e=document.createElement("div");e.className=void 0!==r.className?r.className:"ol-mouse-position",(i=t.call(this,{element:e,render:r.render,target:r.target})||this).on,i.once,i.un,i.addChangeListener(uz,i.Tt),r.coordinateFormat&&i.setCoordinateFormat(r.coordinateFormat),r.projection&&i.setProjection(r.projection);var o=!0,s="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(s=r.undefinedHTML),o=!!s):"placeholder"in r&&(!1===r.placeholder?o=!1:s=String(r.placeholder)),i.gw=s,i.bw=o,i.xw=e.innerHTML,i._w=null,i.jt=null,i}return sz(n,t),n.prototype.Tt=function(){this.jt=null},n.prototype.getCoordinateFormat=function(){return this.get(az)},n.prototype.getProjection=function(){return this.get(uz)},n.prototype.handleMouseMove=function(t){var n=this.getMap();this.Mw(n.getEventPixel(t))},n.prototype.handleMouseOut=function(t){this.Mw(null)},n.prototype.setMap=function(n){if(t.prototype.setMap.call(this,n),n){var i=n.getViewport();this.listenerKeys.push($(i,pu,this.handleMouseMove,this)),this.bw&&this.listenerKeys.push($(i,mu,this.handleMouseOut,this)),this.Mw(null)}},n.prototype.setCoordinateFormat=function(t){this.set(az,t)},n.prototype.setProjection=function(t){this.set(uz,yr(t))},n.prototype.Mw=function(t){var n=this.gw;if(t&&this._w){if(!this.jt){var i=this.getProjection();this.jt=i?Or(this._w,i):vr}var r=this.getMap().getCoordinateFromPixelInternal(t);if(r){var e=Cr();e&&(this.jt=Or(this._w,e)),this.jt(r,r);var o=this.getCoordinateFormat();n=o?o(r):r.toString()}}this.xw&&n===this.xw||(this.element.innerHTML=n,this.xw=n)},n.prototype.render=function(t){var n=t.frameState;n?this._w!=n.viewState.projection&&(this._w=n.viewState.projection,this.jt=null):this._w=null},n}(da),fz=hz,cz=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lz=.75,vz=.1,pz=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return cz(n,t),n.prototype.createRenderer=function(){return new ru(this)},n}(va),dz=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).Sw=i.Ow.bind(i),i.Sr=void 0===r.collapsed||r.collapsed,i.Tr=void 0===r.collapsible||r.collapsible,i.Tr||(i.Sr=!1),i.su=void 0!==r.rotateWithView&&r.rotateWithView,i.jw=void 0;var e=void 0!==r.className?r.className:"ol-overviewmap",o=void 0!==r.tipLabel?r.tipLabel:"Overview map",s=void 0!==r.collapseLabel?r.collapseLabel:"‹";"string"==typeof s?(i.Pr=document.createElement("span"),i.Pr.textContent=s):i.Pr=s;var u=void 0!==r.label?r.label:"›";"string"==typeof u?(i.Ar=document.createElement("span"),i.Ar.textContent=u):i.Ar=u;var a=i.Tr&&!i.Sr?i.Pr:i.Ar,h=document.createElement("button");h.setAttribute("type","button"),h.title=o,h.appendChild(a),h.addEventListener(F,i.kr.bind(i),!1),i.Ew=document.createElement("div"),i.Ew.className="ol-overviewmap-map",i.fm=r.view,i.Tw=new pz({view:r.view});var f=i.Tw;r.layers&&r.layers.forEach((function(t){f.addLayer(t)}));var c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",i.Pw=new Gh({position:[0,0],positioning:"center-center",element:c}),i.Tw.addOverlay(i.Pw);var l=e+" "+"ol-unselectable "+Cs+(i.Sr&&i.Tr?" ol-collapsed":"")+(i.Tr?"":" ol-uncollapsible"),v=i.element;v.className=l,v.appendChild(i.Ew),v.appendChild(h);var p=i,d=i.Pw,y=i.Pw.getElement(),m=function(t){var n,i={clientX:(n=t).clientX,clientY:n.clientY},r=f.getEventCoordinateInternal(i);d.setPosition(r)},w=function(t){var n=f.getEventCoordinateInternal(t);p.getMap().getView().setCenterInternal(n),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",w)};return y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",w)})),i}return cz(n,t),n.prototype.setMap=function(n){var i=this.getMap();if(n!==i){if(i){var r=i.getView();r&&this.Aw(r),this.Tw.setTarget(null)}if(t.prototype.setMap.call(this,n),n){this.Tw.setTarget(this.Ew),this.listenerKeys.push($(n,l,this.Cw,this));var e=n.getView();e&&(this.kw(e),e.isDef()&&(this.Tw.updateSize(),this.Iw())),this.Tw.isRendered()||this.Nw()}}},n.prototype.Cw=function(t){if(t.key===Tu){var n=t.oldValue;n&&this.Aw(n);var i=this.getMap().getView();this.kw(i)}else this.Tw.isRendered()||t.key!==Eu&&t.key!==ju||this.Tw.updateSize()},n.prototype.kw=function(t){if(!this.fm){var n=new ea({projection:t.getProjection()});this.Tw.setView(n)}t.addChangeListener(Ru.ROTATION,this.Sw),this.Ow()},n.prototype.Aw=function(t){t.removeChangeListener(Ru.ROTATION,this.Sw)},n.prototype.Ow=function(){this.su&&this.Tw.getView().setRotation(this.getMap().getView().getRotation())},n.prototype.zw=function(){var t=this.getMap(),n=this.Tw;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView().calculateExtentInternal(i);if(!this.jw||!Pn(r,this.jw)){this.jw=r;var e=n.getSize(),o=n.getView().calculateExtentInternal(e),s=n.getPixelFromCoordinateInternal(Vn(r)),u=n.getPixelFromCoordinateInternal(Dn(r)),a=Math.abs(s[0]-u[0]),h=Math.abs(s[1]-u[1]),f=e[0],c=e[1];a<f*vz||h<c*vz||a>f*lz||h>c*lz?this.Iw():xn(o,r)||this.Lw()}}},n.prototype.Iw=function(){var t=this.getMap(),n=this.Tw,i=t.getSize(),r=t.getView().calculateExtentInternal(i),e=n.getView(),o=Math.log(7.5)/Math.LN2;Qn(r,1/(Math.pow(2,o/2)*vz)),e.fitInternal(Je(r))},n.prototype.Lw=function(){var t=this.getMap(),n=this.Tw,i=t.getView();n.getView().setCenterInternal(i.getCenterInternal())},n.prototype.Rw=function(){var t=this.getMap(),n=this.Tw;if(t.isRendered()&&n.isRendered()){var i=t.getSize(),r=t.getView(),e=n.getView(),o=this.su?0:-r.getRotation(),s=this.Pw,u=this.Pw.getElement(),a=r.getCenterInternal(),h=r.getResolution(),f=e.getResolution(),c=i[0]*h/f,l=i[1]*h/f;if(s.setPosition(a),u){u.style.width=c+"px",u.style.height=l+"px";var v="rotate("+o+"rad)";u.style.transform=v}}},n.prototype.Nw=function(){this.Fw||(this.Fw=K(this.Tw,bu,(function(t){delete this.Fw,this.Rw()}),this))},n.prototype.kr=function(t){t.preventDefault(),this.Lr()},n.prototype.Lr=function(){this.element.classList.toggle(ks),this.Sr?ko(this.Pr,this.Ar):ko(this.Ar,this.Pr),this.Sr=!this.Sr;var t=this.Tw;if(!this.Sr){if(t.isRendered())return this.jw=void 0,void t.render();t.updateSize(),this.Iw(),this.Nw()}},n.prototype.getCollapsible=function(){return this.Tr},n.prototype.setCollapsible=function(t){this.Tr!==t&&(this.Tr=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.Sr&&this.Lr())},n.prototype.setCollapsed=function(t){this.Tr&&this.Sr!==t&&this.Lr()},n.prototype.getCollapsed=function(){return this.Sr},n.prototype.getRotateWithView=function(){return this.su},n.prototype.setRotateWithView=function(t){this.su!==t&&(this.su=t,0!==this.getMap().getView().getRotation()&&(this.su?this.Ow():this.Tw.getView().setRotation(0),this.jw=void 0,this.zw(),this.Rw()))},n.prototype.getOverviewMap=function(){return this.Tw},n.prototype.render=function(t){this.zw(),this.Rw()},n}(da),yz=dz,mz=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),wz="units",gz=[1,2,5],bz=25.4/.28,xz=function(t){function n(n){var i=this,r=n||{},e=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.Gw=document.createElement("div"),i.Gw.className=e+"-inner",i.element.className=e+" "+Ps,i.element.appendChild(i.Gw),i.Dw=null,i.Uw=void 0!==r.minWidth?r.minWidth:64,i.qw=r.maxWidth,i.mn=!1,i.Bw=void 0,i.xw="",i.addChangeListener(wz,i.Xw),i.setUnits(r.units||"metric"),i.Yw=r.bar||!1,i.Zw=r.steps||4,i.Vw=r.text||!1,i.Ww=r.dpi||void 0,i}return mz(n,t),n.prototype.getUnits=function(){return this.get(wz)},n.prototype.Xw=function(){this.zr()},n.prototype.setUnits=function(t){this.set(wz,t)},n.prototype.setDpi=function(t){this.Ww=t},n.prototype.zr=function(){var t=this.Dw;if(t){var n=t.center,i=t.projection,r=this.getUnits(),e="degrees"==r?Rt.DEGREES:Rt.METERS,o=mr(i,t.resolution,n,e),s=this.Uw*(this.Ww||bz)/bz,u=void 0!==this.qw?this.qw*(this.Ww||bz)/bz:void 0,a=s*o,h="";if("degrees"==r){var f=zt[Rt.DEGREES];(a*=f)<f/60?(h="″",o*=3600):a<f?(h="′",o*=60):h="°"}else"imperial"==r?a<.9144?(h="in",o/=.0254):a<1609.344?(h="ft",o/=.3048):(h="mi",o/=1609.344):"nautical"==r?(o/=1852,h="NM"):"metric"==r?a<.001?(h="μm",o*=1e6):a<1?(h="mm",o*=1e3):a<1e3?h="m":(h="km",o/=1e3):"us"==r?a<.9144?(h="in",o*=39.37):a<1609.344?(h="ft",o/=.30480061):(h="mi",o/=1609.3472):Et(!1,33);for(var c,l,v,p,d,y,m,w=3*Math.floor(Math.log(s*o)/Math.log(10));;){v=Math.floor(w/3);var g=Math.pow(10,v);if(c=gz[(w%3+3)%3]*g,l=Math.round(c/o),isNaN(l))return this.element.style.display="none",void(this.mn=!1);if(void 0!==u&&l>=u){c=p,l=d,v=y;break}if(l>=s)break;p=c,d=l,y=v,++w}m=this.Yw?this.createScaleBar(l,c,h):c.toFixed(v<0?-v:0)+" "+h,this.xw!=m&&(this.Gw.innerHTML=m,this.xw=m),this.Bw!=l&&(this.Gw.style.width=l+"px",this.Bw=l),this.mn||(this.element.style.display="",this.mn=!0)}else this.mn&&(this.element.style.display="none",this.mn=!1)},n.prototype.createScaleBar=function(t,n,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),e=[],o=t/this.Zw,s="ol-scale-singlebar-odd",u=0;u<this.Zw;u++)0===u&&e.push(this.createMarker("absolute",u)),e.push('<div><div class="ol-scale-singlebar '+s+'" style="width: '+o+'px;"></div>'+this.createMarker("relative",u)+(u%2==0||2===this.Zw?this.createStepText(u,t,!1,n,i):"")+"</div>"),u===this.Zw-1&&e.push(this.createStepText(u+1,t,!0,n,i)),s="ol-scale-singlebar-odd"===s?"ol-scale-singlebar-even":"ol-scale-singlebar-odd";return'<div style="display: flex;">'+(this.Vw?'<div class="ol-scale-text" style="width: '+t+'px;">'+r+"</div>":"")+e.join("")+"</div>"},n.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},n.prototype.createStepText=function(t,n,i,r,e){var o=(0===t?0:Math.round(r/this.Zw*t*100)/100)+(0===t?"":" "+e);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.Zw*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.Zw*2)+"px;left: "+(i?n+"px":"unset")+';">'+o+"</div>"},n.prototype.getScaleForResolution=function(){var t=mr(this.Dw.projection,this.Dw.resolution,this.Dw.center,Rt.METERS),n=this.Ww||bz;return parseFloat(t.toString())*(1e3/25.4)*n},n.prototype.render=function(t){var n=t.frameState;this.Dw=n?n.viewState:null,this.zr()},n}(da),_z=xz,Mz=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Sz=0,Oz=1,jz=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).kn=[],i.$w=void 0,i.Kw=Sz,i.Cn,i.Hw=0,i.Jw=0,i.Qw,i.tg,i.ng=null,i.ig=!1,i.Fr=void 0!==r.duration?r.duration:200;var e=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=e+"-thumb "+Ps;var s=i.element;return s.className=e+" "+"ol-unselectable "+Cs,s.appendChild(o),s.addEventListener(du,i.rg.bind(i),!1),s.addEventListener(pu,i.eg.bind(i),!1),s.addEventListener(yu,i.og.bind(i),!1),s.addEventListener(F,i.sg.bind(i),!1),o.addEventListener(F,f,!1),i}return Mz(n,t),n.prototype.setMap=function(n){t.prototype.setMap.call(this,n),n&&n.render()},n.prototype.ug=function(){var t=this.element,n=t.offsetWidth,i=t.offsetHeight;if(0===n&&0===i)return this.ig=!1;var r=getComputedStyle(t);n-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);var e=t.firstElementChild,o=getComputedStyle(e),s=e.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),u=e.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.ng=[s,u],n>i?(this.Kw=Oz,this.Jw=n-s):(this.Kw=Sz,this.Hw=i-u),this.ig=!0},n.prototype.sg=function(t){var n=this.getMap().getView(),i=this.ag(t.offsetX-this.ng[0]/2,t.offsetY-this.ng[1]/2),r=this.hg(i),e=n.getConstrainedZoom(n.getZoomForResolution(r));n.animateInternal({zoom:e,duration:this.Fr,easing:wt})},n.prototype.rg=function(t){if(!this.Cn&&t.target===this.element.firstElementChild){var n=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.Qw=t.clientX-parseFloat(n.style.left),this.tg=t.clientY-parseFloat(n.style.top),this.Cn=!0,0===this.kn.length){var i=this.eg,r=this.og,e=this.getMap().getOwnerDocument();this.kn.push($(e,pu,i,this),$(e,yu,r,this))}}},n.prototype.eg=function(t){if(this.Cn){var n=t.clientX-this.Qw,i=t.clientY-this.tg,r=this.ag(n,i);this.$w=this.hg(r),this.getMap().getView().setResolution(this.$w)}},n.prototype.og=function(t){this.Cn&&(this.getMap().getView().endInteraction(),this.Cn=!1,this.Qw=void 0,this.tg=void 0,this.kn.forEach(H),this.kn.length=0)},n.prototype.fg=function(t){var n=this.cg(t),i=this.element.firstElementChild;this.Kw==Oz?i.style.left=this.Jw*n+"px":i.style.top=this.Hw*n+"px"},n.prototype.ag=function(t,n){return oi(this.Kw===Oz?t/this.Jw:n/this.Hw,0,1)},n.prototype.hg=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},n.prototype.cg=function(t){return oi(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},n.prototype.render=function(t){if(t.frameState&&(this.ig||this.ug())){var n=t.frameState.viewState.resolution;this.$w=n,this.fg(n)}},n}(da),Ez=function(){var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};return function(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tz=function(t){function n(n){var i=this,r=n||{};(i=t.call(this,{element:document.createElement("div"),target:r.target})||this).extent=r.extent?r.extent:null;var e=void 0!==r.className?r.className:"ol-zoom-extent",o=void 0!==r.label?r.label:"E",s=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",u=document.createElement("button");u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener(F,i.kr.bind(i),!1);var a=e+" "+"ol-unselectable "+Cs,h=i.element;return h.className=a,h.appendChild(u),i}return Ez(n,t),n.prototype.kr=function(t){t.preventDefault(),this.handleZoomToExtent()},n.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Je(n))},n}(da),Pz={};Pz.AssertionError=h,Pz.Collection=ct,Pz.Collection.CollectionEvent=ht,Pz.DataTile=jt,Pz.Disposable=v,Pz.Feature=Ct,Pz.Feature.createStyleFunction=At,Pz.Geolocation=po,Pz.Image=Oo,Pz.Image.listenImage=So,Pz.ImageBase=mo,Pz.ImageCanvas=Eo,Pz.ImageTile=Ro,Pz.Kinetic=Fo,Pz.Map=Ch,Pz.MapBrowserEvent=lu,Pz.MapBrowserEventHandler=gu,Pz.MapEvent=fu,Pz.Object=et,Pz.Object.ObjectEvent=rt,Pz.Observable=nt,Pz.Observable.unByKey=tt,Pz.Overlay=Gh,Pz.PluggableMap=va,Pz.Tile=Mt,Pz.TileCache=Kh,Pz.TileQueue=Iu,Pz.TileQueue.getTilePriority=Nu,Pz.TileRange=Qh,Pz.TileRange.createOrUpdate=Jh,Pz.VectorRenderTile=ef,Pz.VectorTile=uf,Pz.View=ea,Pz.View.createCenterConstraint=Qu,Pz.View.createResolutionConstraint=ta,Pz.View.createRotationConstraint=na,Pz.View.isNoopAnimation=ia,Pz.array={},Pz.array.binarySearch=p,Pz.array.equals=x,Pz.array.extend=g,Pz.array.find=b,Pz.array.findIndex=_,Pz.array.includes=y,Pz.array.isSorted=M,Pz.array.linearFindNearest=m,Pz.array.numberSafeCompareFunction=d,Pz.array.remove=function(t,n){var i=t.indexOf(n),r=i>-1;return r&&t.splice(i,1),r},Pz.array.reverseSubArray=w,Pz.array.stableSort=function(t,n){var i,r=t.length,e=Array(t.length);for(i=0;i<r;i++)e[i]={index:i,value:t[i]};for(e.sort((function(t,i){return n(t.value,i.value)||t.index-i.index})),i=0;i<t.length;i++)t[i]=e[i].value},Pz.asserts={},Pz.asserts.assert=Et,Pz.centerconstraint={},Pz.centerconstraint.createExtent=Gu,Pz.centerconstraint.none=Du,Pz.color={},Pz.color.asArray=Xo,Pz.color.asString=Uo,Pz.color.fromString=Bo,Pz.color.isStringColor=Vo,Pz.color.normalize=Yo,Pz.color.toString=Zo,Pz.colorlike={},Pz.colorlike.asColorLike=af,Pz.control={},Pz.control.Attribution=ma,Pz.control.Control=da,Pz.control.FullScreen=oz,Pz.control.MousePosition=fz,Pz.control.OverviewMap=yz,Pz.control.Rotate=ba,Pz.control.ScaleLine=_z,Pz.control.Zoom=_a,Pz.control.ZoomSlider=jz,Pz.control.ZoomToExtent=Tz,Pz.control.defaults=Ma,Pz.coordinate={},Pz.coordinate.add=Yi,Pz.coordinate.closestOnCircle=Zi,Pz.coordinate.closestOnSegment=Vi,Pz.coordinate.createStringXY=function(t){return function(n){return ir(n,t)}},Pz.coordinate.degreesToStringHDMS=Wi,Pz.coordinate.distance=tr,Pz.coordinate.equals=Ki,Pz.coordinate.format=$i,Pz.coordinate.getWorldsAway=er,Pz.coordinate.rotate=Hi,Pz.coordinate.scale=Ji,Pz.coordinate.squaredDistance=Qi,Pz.coordinate.squaredDistanceToSegment=nr,Pz.coordinate.toStringHDMS=function(t,n){return t?Wi("NS",t[1],n)+" "+Wi("EW",t[0],n):""},Pz.coordinate.toStringXY=ir,Pz.coordinate.wrapX=rr,Pz.css={},Pz.css.CLASS_COLLAPSED=ks,Pz.css.CLASS_CONTROL=Cs,Pz.css.CLASS_HIDDEN=Es,Pz.css.CLASS_SELECTABLE=Ts,Pz.css.CLASS_UNSELECTABLE=Ps,Pz.css.CLASS_UNSUPPORTED=As,Pz.css.getFontParameters=zs,Pz.dom={},Pz.dom.createCanvasContext2D=To,Pz.dom.outerHeight=Co,Pz.dom.outerWidth=Ao,Pz.dom.releaseCanvas=Po,Pz.dom.removeChildren=No,Pz.dom.removeNode=Io,Pz.dom.replaceChildren=zo,Pz.dom.replaceNode=ko,Pz.easing={},Pz.easing.easeIn=mt,Pz.easing.easeOut=wt,Pz.easing.inAndOut=gt,Pz.easing.linear=bt,Pz.easing.upAndDown=function(t){return t<.5?gt(2*t):1-gt(2*(t-.5))},Pz.events={},Pz.events.Event=c,Pz.events.Event.preventDefault=function(t){t.preventDefault()},Pz.events.Event.stopPropagation=f,Pz.events.Target=N,Pz.events.condition={},Pz.events.condition.all=Na,Pz.events.condition.altKeyOnly=za,Pz.events.condition.altShiftKeysOnly=La,Pz.events.condition.always=Ga,Pz.events.condition.click=function(t){return t.type==vu.CLICK},Pz.events.condition.doubleClick=function(t){return t.type==vu.DBLCLICK},Pz.events.condition.focus=Ra,Pz.events.condition.focusWithTabindex=Fa,Pz.events.condition.mouseActionButton=Da,Pz.events.condition.mouseOnly=Za,Pz.events.condition.never=Ua,Pz.events.condition.noModifierKeys=Ba,Pz.events.condition.penOnly=function(t){var n=t.originalEvent;return Et(void 0!==n,56),"pen"===n.pointerType},Pz.events.condition.platformModifierKeyOnly=function(t){var n=t.originalEvent;return!n.altKey&&(Bt?n.metaKey:n.ctrlKey)&&!n.shiftKey},Pz.events.condition.pointerMove=function(t){return"pointermove"==t.type},Pz.events.condition.primaryAction=Va,Pz.events.condition.shiftKeyOnly=Xa,Pz.events.condition.singleClick=qa,Pz.events.condition.targetNotEditable=Ya,Pz.events.condition.touchOnly=function(t){var n=t.originalEvent;return Et(void 0!==n,56),"touch"===n.pointerType},Pz.events.listen=$,Pz.events.listenOnce=K,Pz.events.unlistenByKey=H,Pz.extent={},Pz.extent.applyTransform=ni,Pz.extent.approximatelyEquals=An,Pz.extent.boundingExtent=yn,Pz.extent.buffer=mn,Pz.extent.clone=wn,Pz.extent.closestSquaredDistanceXY=gn,Pz.extent.containsCoordinate=bn,Pz.extent.containsExtent=xn,Pz.extent.containsXY=_n,Pz.extent.coordinateRelationship=Mn,Pz.extent.createEmpty=Sn,Pz.extent.createOrUpdate=On,Pz.extent.createOrUpdateEmpty=jn,Pz.extent.createOrUpdateFromCoordinate=En,Pz.extent.createOrUpdateFromCoordinates=function(t,n){return In(jn(n),t)},Pz.extent.createOrUpdateFromFlatCoordinates=Tn,Pz.extent.createOrUpdateFromRings=function(t,n){return zn(jn(n),t)},Pz.extent.equals=Pn,Pz.extent.extend=Cn,Pz.extent.extendCoordinate=kn,Pz.extent.extendCoordinates=In,Pz.extent.extendFlatCoordinates=Nn,Pz.extent.extendRings=zn,Pz.extent.extendXY=Ln,Pz.extent.forEachCorner=Rn,Pz.extent.getArea=Fn,Pz.extent.getBottomLeft=Gn,Pz.extent.getBottomRight=Dn,Pz.extent.getCenter=Un,Pz.extent.getCorner=qn,Pz.extent.getEnlargedArea=function(t,n){var i=Math.min(t[0],n[0]),r=Math.min(t[1],n[1]);return(Math.max(t[2],n[2])-i)*(Math.max(t[3],n[3])-r)},Pz.extent.getForViewAndSize=Bn,Pz.extent.getHeight=Yn,Pz.extent.getIntersection=Zn,Pz.extent.getIntersectionArea=function(t,n){return Fn(Zn(t,n))},Pz.extent.getMargin=function(t){return $n(t)+Yn(t)},Pz.extent.getRotatedViewport=Xn,Pz.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},Pz.extent.getTopLeft=Vn,Pz.extent.getTopRight=Wn,Pz.extent.getWidth=$n,Pz.extent.intersects=Kn,Pz.extent.intersectsSegment=ti,Pz.extent.isEmpty=Hn,Pz.extent.returnOrUpdate=Jn,Pz.extent.scaleFromCenter=Qn,Pz.extent.wrapAndSliceX=ri,Pz.extent.wrapX=ii,Pz.featureloader={},Pz.featureloader.loadFeaturesXhr=ff,Pz.featureloader.setWithCredentials=function(t){hf=t},Pz.featureloader.xhr=cf,Pz.format={},Pz.format.EsriJSON=rE,Pz.format.Feature=bx,Pz.format.Feature.transformExtentWithOptions=_x,Pz.format.Feature.transformGeometryWithOptions=xx,Pz.format.GML=NE,Pz.format.GML2=TE,Pz.format.GML3=kE,Pz.format.GML32=RE,Pz.format.GMLBase=fE,Pz.format.GMLBase.GMLNS=uE,Pz.format.GPX=gT,Pz.format.GeoJSON=qx,Pz.format.IGC=zT,Pz.format.IIIFInfo=Ry,Pz.format.JSONFeature=Rx,Pz.format.KML=CA,Pz.format.KML.getDefaultFillStyle=function(){return ZT},Pz.format.KML.getDefaultImageStyle=function(){return WT},Pz.format.KML.getDefaultStrokeStyle=function(){return KT},Pz.format.KML.getDefaultStyle=function(){return JT},Pz.format.KML.getDefaultStyleArray=function(){return tP},Pz.format.KML.getDefaultTextStyle=function(){return HT},Pz.format.KML.readFlatCoordinates=sP,Pz.format.MVT=Px,Pz.format.OSMXML=GA,Pz.format.OWS=oC,Pz.format.Polyline=mC,Pz.format.Polyline.decodeDeltas=hC,Pz.format.Polyline.decodeFloats=cC,Pz.format.Polyline.decodeSignedIntegers=vC,Pz.format.Polyline.decodeUnsignedIntegers=dC,Pz.format.Polyline.encodeDeltas=aC,Pz.format.Polyline.encodeFloats=fC,Pz.format.Polyline.encodeSignedIntegers=lC,Pz.format.Polyline.encodeUnsignedInteger=yC,Pz.format.Polyline.encodeUnsignedIntegers=pC,Pz.format.TextFeature=TT,Pz.format.TopoJSON=jC,Pz.format.WFS=_I,Pz.format.WFS.writeFilter=function(t,n){var i=n||"1.1.0",r=cc(xI(i),"Filter"),e={node:r};return P(e,{version:i,filter:t}),oI(r,t,[e]),r},Pz.format.WKB=FI,Pz.format.WKT=eN,Pz.format.WMSCapabilities=AN,Pz.format.WMSGetFeatureInfo=IN,Pz.format.WMTSCapabilities=HN,Pz.format.XML=DA,Pz.format.XMLFeature=oE,Pz.format.filter={},Pz.format.filter.And=kC,Pz.format.filter.Bbox=NC,Pz.format.filter.Comparison=YC,Pz.format.filter.ComparisonBinary=$C,Pz.format.filter.Contains=FC,Pz.format.filter.DWithin=UC,Pz.format.filter.Disjoint=BC,Pz.format.filter.During=VC,Pz.format.filter.EqualTo=HC,Pz.format.filter.Filter=EC,Pz.format.filter.GreaterThan=tk,Pz.format.filter.GreaterThanOrEqualTo=ik,Pz.format.filter.Intersects=ek,Pz.format.filter.IsBetween=sk,Pz.format.filter.IsLike=ak,Pz.format.filter.IsNull=fk,Pz.format.filter.LessThan=vk,Pz.format.filter.LessThanOrEqualTo=dk,Pz.format.filter.LogicalNary=PC,Pz.format.filter.Not=mk,Pz.format.filter.NotEqualTo=gk,Pz.format.filter.Or=_k,Pz.format.filter.ResourceId=Sk,Pz.format.filter.Spatial=LC,Pz.format.filter.Within=Ek,Pz.format.filter.and=Tk,Pz.format.filter.bbox=Pk,Pz.format.filter.between=function(t,n,i){return new sk(t,n,i)},Pz.format.filter.contains=function(t,n,i){return new FC(t,n,i)},Pz.format.filter.disjoint=function(t,n,i){return new BC(t,n,i)},Pz.format.filter.during=function(t,n,i){return new VC(t,n,i)},Pz.format.filter.dwithin=function(t,n,i,r,e){return new UC(t,n,i,r,e)},Pz.format.filter.equalTo=function(t,n,i){return new HC(t,n,i)},Pz.format.filter.greaterThan=function(t,n){return new tk(t,n)},Pz.format.filter.greaterThanOrEqualTo=function(t,n){return new ik(t,n)},Pz.format.filter.intersects=function(t,n,i){return new ek(t,n,i)},Pz.format.filter.isNull=function(t){return new fk(t)},Pz.format.filter.lessThan=function(t,n){return new vk(t,n)},Pz.format.filter.lessThanOrEqualTo=function(t,n){return new dk(t,n)},Pz.format.filter.like=function(t,n,i,r,e,o){return new ak(t,n,i,r,e,o)},Pz.format.filter.not=function(t){return new mk(t)},Pz.format.filter.notEqualTo=function(t,n,i){return new gk(t,n,i)},Pz.format.filter.or=function(t){var n=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(_k,n))},Pz.format.filter.resourceId=function(t){return new Sk(t)},Pz.format.filter.within=function(t,n,i){return new Ek(t,n,i)},Pz.format.xlink={},Pz.format.xlink.readHref=UA,Pz.format.xsd={},Pz.format.xsd.readBoolean=cE,Pz.format.xsd.readBooleanString=lE,Pz.format.xsd.readDateTime=vE,Pz.format.xsd.readDecimal=pE,Pz.format.xsd.readDecimalString=dE,Pz.format.xsd.readNonNegativeIntegerString=mE,Pz.format.xsd.readPositiveInteger=yE,Pz.format.xsd.readString=wE,Pz.format.xsd.writeBooleanTextNode=gE,Pz.format.xsd.writeCDATASection=bE,Pz.format.xsd.writeDateTimeTextNode=xE,Pz.format.xsd.writeDecimalTextNode=_E,Pz.format.xsd.writeNonNegativeIntegerTextNode=ME,Pz.format.xsd.writeStringTextNode=SE,Pz.functions={},Pz.functions.FALSE=O,Pz.functions.TRUE=S,Pz.functions.VOID=j,Pz.functions.memoizeOne=E,Pz.functions.toPromise=T,Pz.geom={},Pz.geom.Circle=nj,Pz.geom.Geometry=Vr,Pz.geom.GeometryCollection=Nx,Pz.geom.LineString=Yb,Pz.geom.LinearRing=Oe,Pz.geom.MultiLineString=Wb,Pz.geom.MultiPoint=Gb,Pz.geom.MultiPolygon=Jb,Pz.geom.Point=Te,Pz.geom.Polygon=Ke,Pz.geom.Polygon.circular=He,Pz.geom.Polygon.fromCircle=Qe,Pz.geom.Polygon.fromExtent=Je,Pz.geom.Polygon.makeRegular=to,Pz.geom.SimpleGeometry=Jr,Pz.geom.SimpleGeometry.getStrideForLayout=Kr,Pz.geom.SimpleGeometry.transformGeom2D=Hr,Pz.geom.flat={},Pz.geom.flat.area={},Pz.geom.flat.area.linearRing=be,Pz.geom.flat.area.linearRings=xe,Pz.geom.flat.area.linearRingss=_e,Pz.geom.flat.center={},Pz.geom.flat.center.linearRingss=$b,Pz.geom.flat.closest={},Pz.geom.flat.closest.arrayMaxSquaredDelta=ne,Pz.geom.flat.closest.assignClosestArrayPoint=ee,Pz.geom.flat.closest.assignClosestMultiArrayPoint=oe,Pz.geom.flat.closest.assignClosestPoint=re,Pz.geom.flat.closest.maxSquaredDelta=te,Pz.geom.flat.closest.multiArrayMaxSquaredDelta=ie,Pz.geom.flat.contains={},Pz.geom.flat.contains.linearRingContainsExtent=Pe,Pz.geom.flat.contains.linearRingContainsXY=Ae,Pz.geom.flat.contains.linearRingsContainsXY=Ce,Pz.geom.flat.contains.linearRingssContainsXY=ke,Pz.geom.flat.deflate={},Pz.geom.flat.deflate.deflateCoordinate=se,Pz.geom.flat.deflate.deflateCoordinates=ue,Pz.geom.flat.deflate.deflateCoordinatesArray=ae,Pz.geom.flat.deflate.deflateMultiCoordinatesArray=he,Pz.geom.flat.flip={},Pz.geom.flat.flip.flipXY=$j,Pz.geom.flat.geodesic={},Pz.geom.flat.geodesic.greatCircleArc=function(t,n,i,r,e,o){var s=yr("EPSG:4326"),u=Math.cos(li(n)),a=Math.sin(li(n)),h=Math.cos(li(r)),f=Math.sin(li(r)),c=Math.cos(li(i-t)),l=Math.sin(li(i-t)),v=a*f+u*h*c;return ox((function(n){if(1<=v)return[i,r];var e=n*Math.acos(v),o=Math.cos(e),s=Math.sin(e),p=l*h,d=u*f-a*h*c,y=Math.atan2(p,d),m=Math.asin(a*o+u*s*Math.cos(y));return[ci(li(t)+Math.atan2(Math.sin(y)*s*u,o-a*Math.sin(m))),ci(m)]}),jr(s,e),o)},Pz.geom.flat.geodesic.meridian=sx,Pz.geom.flat.geodesic.parallel=ux,Pz.geom.flat.inflate={},Pz.geom.flat.inflate.inflateCoordinates=me,Pz.geom.flat.inflate.inflateCoordinatesArray=we,Pz.geom.flat.inflate.inflateMultiCoordinatesArray=ge,Pz.geom.flat.interiorpoint={},Pz.geom.flat.interiorpoint.getInteriorPointOfArray=Ie,Pz.geom.flat.interiorpoint.getInteriorPointsOfMultiArray=Ne,Pz.geom.flat.interpolate={},Pz.geom.flat.interpolate.interpolatePoint=Db,Pz.geom.flat.interpolate.lineStringCoordinateAtM=Ub,Pz.geom.flat.interpolate.lineStringsCoordinateAtM=qb,Pz.geom.flat.intersectsextent={},Pz.geom.flat.intersectsextent.intersectsLineString=Le,Pz.geom.flat.intersectsextent.intersectsLineStringArray=Re,Pz.geom.flat.intersectsextent.intersectsLinearRing=Fe,Pz.geom.flat.intersectsextent.intersectsLinearRingArray=Ge,Pz.geom.flat.intersectsextent.intersectsLinearRingMultiArray=De,Pz.geom.flat.length={},Pz.geom.flat.length.lineStringLength=rb,Pz.geom.flat.length.linearRingLength=function(t,n,i,r){var e=rb(t,n,i,r),o=t[i-r]-t[n],s=t[i-r+1]-t[n+1];return e+=Math.sqrt(o*o+s*s)},Pz.geom.flat.orient={},Pz.geom.flat.orient.inflateEnds=Ve,Pz.geom.flat.orient.linearRingIsClockwise=qe,Pz.geom.flat.orient.linearRingsAreOriented=Be,Pz.geom.flat.orient.linearRingssAreOriented=Xe,Pz.geom.flat.orient.orientLinearRings=Ye,Pz.geom.flat.orient.orientLinearRingsArray=Ze,Pz.geom.flat.reverse={},Pz.geom.flat.reverse.coordinates=Ue,Pz.geom.flat.segments={},Pz.geom.flat.segments.forEach=ze,Pz.geom.flat.simplify={},Pz.geom.flat.simplify.douglasPeucker=fe,Pz.geom.flat.simplify.douglasPeuckerArray=ce,Pz.geom.flat.simplify.douglasPeuckerMultiArray=function(t,n,i,r,e,o,s,u){for(var a=0,h=i.length;a<h;++a){var f=i[a],c=[];s=ce(t,n,f,r,e,o,s,c),u.push(c),n=f[f.length-1]}return s},Pz.geom.flat.simplify.quantize=pe,Pz.geom.flat.simplify.quantizeArray=de,Pz.geom.flat.simplify.quantizeMultiArray=ye,Pz.geom.flat.simplify.radialDistance=le,Pz.geom.flat.simplify.simplifyLineString=function(t,n,i,r,e,o,s){var u=void 0!==s?s:[];return o||(i=le(t,n,i,r,e,u,0),t=u,n=0,r=2),u.length=fe(t,n,i,r,e,u,0),u},Pz.geom.flat.simplify.snap=ve,Pz.geom.flat.straightchunk={},Pz.geom.flat.straightchunk.matchingChunk=$g,Pz.geom.flat.textpath={},Pz.geom.flat.textpath.drawTextOnPath=ib,Pz.geom.flat.topology={},Pz.geom.flat.topology.lineStringIsClosed=function(t,n,i,r){var e=i-r;return t[n]===t[e]&&t[n+1]===t[e+1]&&(i-n)/r>3&&!!be(t,n,i,r)},Pz.geom.flat.transform={},Pz.geom.flat.transform.rotate=Ur,Pz.geom.flat.transform.scale=qr,Pz.geom.flat.transform.transform2D=Dr,Pz.geom.flat.transform.translate=Br,Pz.has={},Pz.has.DEVICE_PIXEL_RATIO=Xt,Pz.has.FIREFOX=Gt,Pz.has.IMAGE_DECODE=Zt,Pz.has.MAC=Bt,Pz.has.PASSIVE_EVENT_LISTENERS=Vt,Pz.has.SAFARI=Dt,Pz.has.SAFARI_BUG_237906=Ut,Pz.has.WEBKIT=qt,Pz.has.WORKER_OFFSCREEN_CANVAS=Yt,Pz.interaction={},Pz.interaction.DoubleClickZoom=Aa,Pz.interaction.DragAndDrop=$O,Pz.interaction.DragAndDrop.DragAndDropEvent=VO,Pz.interaction.DragBox=hh,Pz.interaction.DragBox.DragBoxEvent=ah,Pz.interaction.DragPan=Ka,Pz.interaction.DragRotate=Qa,Pz.interaction.DragRotateAndZoom=JO,Pz.interaction.DragZoom=ch,Pz.interaction.Draw=aj,Pz.interaction.Draw.DrawEvent=sj,Pz.interaction.Draw.createBox=function(){return function(t,n,i){var r=yn([t[0],t[t.length-1]].map((function(t){return Ir(t,i)}))),e=[[Gn(r),Dn(r),Wn(r),Vn(r),Gn(r)]],o=n;o?o.setCoordinates(e):o=new Ke(e);var s=Cr();return s&&o.transform(i,s),o}},Pz.interaction.Draw.createRegularPolygon=function(t,n){return function(i,r,e){var o=Ir(i[0],e),s=Ir(i[i.length-1],e),u=Math.sqrt(Qi(o,s)),a=r||Qe(new nj(o),t),h=n;if(!n&&0!==n){var f=s[0]-o[0],c=s[1]-o[1];h=Math.atan2(c,f)}to(a,o,u,h);var l=Cr();return l&&a.transform(e,l),a}},Pz.interaction.Extent=dj,Pz.interaction.Extent.ExtentEvent=cj,Pz.interaction.Interaction=Ta,Pz.interaction.Interaction.pan=ja,Pz.interaction.Interaction.zoomByDelta=Ea,Pz.interaction.KeyboardPan=mh,Pz.interaction.KeyboardZoom=gh,Pz.interaction.Link=bj,Pz.interaction.Modify=Cj,Pz.interaction.Modify.ModifyEvent=jj,Pz.interaction.MouseWheelZoom=Mh,Pz.interaction.PinchRotate=Oh,Pz.interaction.PinchZoom=Th,Pz.interaction.Pointer=Ia,Pz.interaction.Pointer.centroid=ka,Pz.interaction.Select=Rj,Pz.interaction.Select.SelectEvent=Nj,Pz.interaction.Snap=qj,Pz.interaction.Translate=Wj,Pz.interaction.Translate.TranslateEvent=Vj,Pz.interaction.defaults=Ph,Pz.layer={},Pz.layer.Base=hs,Pz.layer.BaseImage=Rm,Pz.layer.BaseTile=Jm,Pz.layer.BaseVector=Vw,Pz.layer.Graticule=lx,Pz.layer.Group=au,Pz.layer.Group.GroupEvent=ou,Pz.layer.Heatmap=gx,Pz.layer.Image=Wm,Pz.layer.Layer=ws,Pz.layer.Layer.inView=ms,Pz.layer.MapboxVector=LO,Pz.layer.Tile=rw,Pz.layer.Vector=ex,Pz.layer.VectorImage=FO,Pz.layer.VectorTile=Cx,Pz.layer.WebGLPoints=DO,Pz.layer.WebGLTile=XO,Pz.loadingstrategy={},Pz.loadingstrategy.all=lf,Pz.loadingstrategy.bbox=function(t,n){return[t]},Pz.loadingstrategy.tile=function(t){return function(n,i,r){var e=t.getZForResolution(Rr(i,r)),o=t.getTileRangeForExtentAndZ(zr(n,r),e),s=[],u=[e,0,0];for(u[1]=o.minX;u[1]<=o.maxX;++u[1])for(u[2]=o.minY;u[2]<=o.maxY;++u[2])s.push(Nr(t.getTileCoordExtent(u),r));return s}},Pz.math={},Pz.math.ceil=wi,Pz.math.clamp=oi,Pz.math.cosh=si,Pz.math.floor=mi,Pz.math.lerp=pi,Pz.math.log2=ui,Pz.math.modulo=vi,Pz.math.round=yi,Pz.math.solveLinearSystem=fi,Pz.math.squaredDistance=hi,Pz.math.squaredSegmentDistance=ai,Pz.math.toDegrees=ci,Pz.math.toFixed=di,Pz.math.toRadians=li,Pz.net={},Pz.net.ClientError=mf,Pz.net.ResponseError=yf,Pz.net.getJSON=wf,Pz.net.jsonp=pf,Pz.net.overrideXHR=function(t){"undefined"!=typeof XMLHttpRequest&&(df=XMLHttpRequest),global.XMLHttpRequest=t},Pz.net.resolveUrl=gf,Pz.net.restoreXHR=function(){global.XMLHttpRequest=df},Pz.obj={},Pz.obj.assign=P,Pz.obj.clear=A,Pz.obj.getValues=C,Pz.obj.isEmpty=k,Pz.proj={},Pz.proj.Projection=ei,Pz.proj.Units={},Pz.proj.Units.METERS_PER_UNIT=zt,Pz.proj.Units.fromCode=Nt,Pz.proj.addCommon=Gr,Pz.proj.addCoordinateTransforms=_r,Pz.proj.addEquivalentProjections=wr,Pz.proj.addEquivalentTransforms=gr,Pz.proj.addProjection=pr,Pz.proj.addProjections=dr,Pz.proj.clearAllProjections=function(){Li(),Di()},Pz.proj.clearUserProjection=function(){Pr=null},Pz.proj.cloneTransform=lr,Pz.proj.createProjection=br,Pz.proj.createSafeCoordinateTransform=Fr,Pz.proj.createTransformFromCoordinateTransform=xr,Pz.proj.disableCoordinateWarning=cr,Pz.proj.epsg3857={},Pz.proj.epsg3857.EXTENT=_i,Pz.proj.epsg3857.HALF_SIZE=xi,Pz.proj.epsg3857.MAX_SAFE_Y=Si,Pz.proj.epsg3857.PROJECTIONS=ji,Pz.proj.epsg3857.RADIUS=bi,Pz.proj.epsg3857.WORLD_EXTENT=Mi,Pz.proj.epsg3857.fromEPSG4326=Ei,Pz.proj.epsg3857.toEPSG4326=Ti,Pz.proj.epsg4326={},Pz.proj.epsg4326.EXTENT=Ci,Pz.proj.epsg4326.METERS_PER_UNIT=ki,Pz.proj.epsg4326.PROJECTIONS=Ni,Pz.proj.epsg4326.RADIUS=Ai,Pz.proj.equivalent=Sr,Pz.proj.fromLonLat=Mr,Pz.proj.fromUserCoordinate=Ir,Pz.proj.fromUserExtent=zr,Pz.proj.fromUserResolution=Rr,Pz.proj.get=yr,Pz.proj.getPointResolution=mr,Pz.proj.getTransform=jr,Pz.proj.getTransformFromProjections=Or,Pz.proj.getUserProjection=Cr,Pz.proj.identityTransform=vr,Pz.proj.proj4={},Pz.proj.proj4.register=function(t){var n,i,r=Object.keys(t.defs),e=r.length;for(n=0;n<e;++n){var o=r[n];if(!yr(o)){var s=t.defs(o),u=s.units;u||"longlat"!==s.projName||(u=Rt.DEGREES),pr(new ei({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:u}))}}for(n=0;n<e;++n){var a=r[n],h=yr(a);for(i=0;i<e;++i){var f=r[i],c=yr(f);if(!qi(a,f))if(t.defs[a]===t.defs[f])wr([h,c]);else{var l=t(a,f);_r(h,c,Fr(h,c,l.forward),Fr(c,h,l.inverse))}}}},Pz.proj.projections={},Pz.proj.projections.add=Fi,Pz.proj.projections.clear=Li,Pz.proj.projections.get=Ri,Pz.proj.setUserProjection=Ar,Pz.proj.toLonLat=function(t,n){var i=Er(t,void 0!==n?n:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=vi(r+180,360)-180),i},Pz.proj.toUserCoordinate=kr,Pz.proj.toUserExtent=Nr,Pz.proj.toUserResolution=Lr,Pz.proj.transform=Er,Pz.proj.transformExtent=Tr,Pz.proj.transformWithProjections=function(t,n,i){return Or(n,i)(t)},Pz.proj.transforms={},Pz.proj.transforms.add=Ui,Pz.proj.transforms.clear=Di,Pz.proj.transforms.get=qi,Pz.proj.transforms.remove=function(t,n){var i=t.getCode(),r=n.getCode(),e=Gi[i][r];return delete Gi[i][r],k(Gi[i])&&delete Gi[i],e},Pz.proj.useGeographic=function(){Ar("EPSG:4326")},Pz.render={},Pz.render.Box=ih,Pz.render.Event=js,Pz.render.Feature=ix,Pz.render.Feature.toFeature=function(t,n){var i=t.getId(),r=nx(t),e=t.getProperties(),o=new Ct;return void 0!==n&&o.setGeometryName(n),o.setGeometry(r),void 0!==i&&o.setId(i),o.setProperties(e,!0),o},Pz.render.Feature.toGeometry=nx,Pz.render.VectorContext=bf,Pz.render.canvas={},Pz.render.canvas.Builder=Dg,Pz.render.canvas.BuilderGroup=nb,Pz.render.canvas.Executor=pb,Pz.render.canvas.ExecutorGroup=gb,Pz.render.canvas.ExecutorGroup.getPixelIndexArray=wb,Pz.render.canvas.ImageBuilder=qg,Pz.render.canvas.Immediate=Mf,Pz.render.canvas.Instruction={},Pz.render.canvas.Instruction.beginPathInstruction=zg,Pz.render.canvas.Instruction.closePathInstruction=Lg,Pz.render.canvas.Instruction.fillInstruction=Ig,Pz.render.canvas.Instruction.strokeInstruction=Ng,Pz.render.canvas.LineStringBuilder=Yg,Pz.render.canvas.PolygonBuilder=Wg,Pz.render.canvas.TextBuilder=Qg,Pz.render.canvas.checkedFonts=Zs,Pz.render.canvas.defaultFillStyle=Rs,Pz.render.canvas.defaultFont=Ls,Pz.render.canvas.defaultLineCap=Fs,Pz.render.canvas.defaultLineDash=Gs,Pz.render.canvas.defaultLineDashOffset=0,Pz.render.canvas.defaultLineJoin=Ds,Pz.render.canvas.defaultLineWidth=1,Pz.render.canvas.defaultMiterLimit=Us,Pz.render.canvas.defaultPadding=Ys,Pz.render.canvas.defaultStrokeStyle=qs,Pz.render.canvas.defaultTextAlign=Bs,Pz.render.canvas.defaultTextBaseline=Xs,Pz.render.canvas.drawImageOrLabel=nu,Pz.render.canvas.getTextDimensions=tu,Pz.render.canvas.hitdetect={},Pz.render.canvas.hitdetect.HIT_DETECT_RESOLUTION=bb,Pz.render.canvas.hitdetect.createHitDetectionImageData=xb,Pz.render.canvas.hitdetect.hitDetect=_b,Pz.render.canvas.measureAndCacheTextWidth=Qs,Pz.render.canvas.measureTextHeight=Ks,Pz.render.canvas.measureTextWidth=Js,Pz.render.canvas.registerFont=$s,Pz.render.canvas.rotateAtOffset=function(t,n,i,r){0!==n&&(t.translate(i,r),t.rotate(n),t.translate(-i,-r))},Pz.render.canvas.textHeights=Ws,Pz.render.getRenderPixel=function(t,n){return tn(t.inversePixelTransform,n.slice(0))},Pz.render.getVectorContext=Af,Pz.render.toContext=function(t,n){var i=t.canvas,r=n||{},e=r.pixelRatio||Xt,o=r.size;o&&(i.width=o[0]*e,i.height=o[1]*e,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var s=[0,0,i.width,i.height],u=rn([1,0,0,1,0,0],e,e);return new Mf(t,e,s,u,0)},Pz.render.webgl={},Pz.render.webgl.BatchRenderer=ag,Pz.render.webgl.LineStringBatchRenderer=cg,Pz.render.webgl.MixedGeometryBatch=vg,Pz.render.webgl.PointBatchRenderer=yg,Pz.render.webgl.PolygonBatchRenderer=gg,Pz.render.webgl.utils={},Pz.render.webgl.utils.colorDecodeId=rg,Pz.render.webgl.utils.colorEncodeId=ig,Pz.render.webgl.utils.getBlankImageData=function(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=255,t.data[1]=255,t.data[2]=255,t.data[3]=255,t},Pz.render.webgl.utils.writeLineSegmentToBuffers=function(t,n,i,r,e,o,s,u,a,h){var f=5+u.length,c=o.length/f,l=[t[n+0],t[n+1]],v=[t[i],t[i+1]],p=tn(h,Jw([],l,!0)),d=tn(h,Jw([],v,!0));function y(t,n,i){var r=1e4;return Math.round(1500*n)+Math.round(1500*i)*r+t*r*r}function m(t,n,i){var r=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),e=[(n[0]-t[0])/r,(n[1]-t[1])/r],o=[-e[1],e[0]],s=Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1])),u=[(i[0]-t[0])/s,(i[1]-t[1])/s],a=0===r||0===s?0:Math.acos(oi(u[0]*e[0]+u[1]*e[1],-1,1));return u[0]*o[0]+u[1]*o[1]>0?a:2*Math.PI-a}var w=null!==e,g=0,b=0;if(null!==r){var x=[t[r],t[r+1]];g=m(p,d,tn(h,Jw([],x,!0)))}if(w){var _=[t[e],t[e+1]];b=m(d,p,tn(h,Jw([],_,!0)))}o.push(l[0],l[1],v[0],v[1],y(0,g,b)),o.push.apply(o,u),o.push(l[0],l[1],v[0],v[1],y(1,g,b)),o.push.apply(o,u),o.push(l[0],l[1],v[0],v[1],y(2,g,b)),o.push.apply(o,u),o.push(l[0],l[1],v[0],v[1],y(3,g,b)),o.push.apply(o,u),s.push(c,c+1,c+2,c+1,c+3,c+2)},Pz.render.webgl.utils.writePointFeatureToBuffers=function(t,n,i,r,e,o){var s=3+e,u=t[n+0],a=t[n+1],h=Qw;h.length=e;for(var f=0;f<h.length;f++)h[f]=t[n+2+f];var c=o?o.vertexPosition:0,l=o?o.indexPosition:0,v=c/s;return ng(i,c,u,a,0),h.length&&i.set(h,c+3),ng(i,c+=s,u,a,1),h.length&&i.set(h,c+3),ng(i,c+=s,u,a,2),h.length&&i.set(h,c+3),ng(i,c+=s,u,a,3),h.length&&i.set(h,c+3),c+=s,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,tg.vertexPosition=c,tg.indexPosition=l,tg},Pz.render.webgl.utils.writePolygonTrianglesToBuffers=function(t,n,i,r,e){var o=2+e,s=n,u=t.slice(s,s+e);s+=e;for(var a=t[s++],h=0,f=new Array(a-1),c=0;c<a;c++)h+=t[s++],c<a-1&&(f[c]=h);var l=t.slice(s,s+2*h),v=Hw(l,f,2);for(c=0;c<v.length;c++)r.push(v[c]+i.length/o);for(c=0;c<l.length;c+=2)i.push.apply(i,Jw([l[c],l[c+1]],u,!1));return s+2*h},Pz.renderer={},Pz.renderer.Composite=ru,Pz.renderer.Layer=Ol,Pz.renderer.Map=Ss,Pz.renderer.canvas={},Pz.renderer.canvas.ImageLayer=Zm,Pz.renderer.canvas.Layer=Bm,Pz.renderer.canvas.Layer.canvasPool=Gm,Pz.renderer.canvas.TileLayer=nw,Pz.renderer.canvas.VectorImageLayer=Tb,Pz.renderer.canvas.VectorLayer=Ob,Pz.renderer.canvas.VectorTileLayer=Lb,Pz.renderer.canvas.common={},Pz.renderer.canvas.common.IMAGE_SMOOTHING_DISABLED=kf,Pz.renderer.canvas.common.IMAGE_SMOOTHING_ENABLED=If,Pz.renderer.vector={},Pz.renderer.vector.defaultOrder=Of,Pz.renderer.vector.getSquaredTolerance=jf,Pz.renderer.vector.getTolerance=Ef,Pz.renderer.vector.renderFeature=Tf,Pz.renderer.webgl={},Pz.renderer.webgl.Layer=Tl,Pz.renderer.webgl.PointsLayer=sg,Pz.renderer.webgl.TileLayer=Gl,Pz.renderer.webgl.TileLayer.Attributes=Cl,Pz.renderer.webgl.TileLayer.Uniforms=Al,Pz.renderer.webgl.VectorLayer=Cg,Pz.renderer.webgl.shaders={},Pz.renderer.webgl.shaders.FILL_FRAGMENT_SHADER=Mg,Pz.renderer.webgl.shaders.FILL_VERTEX_SHADER=_g,Pz.renderer.webgl.shaders.POINT_FRAGMENT_SHADER=Eg,Pz.renderer.webgl.shaders.POINT_VERTEX_SHADER=jg,Pz.renderer.webgl.shaders.STROKE_FRAGMENT_SHADER=Og,Pz.renderer.webgl.shaders.STROKE_VERTEX_SHADER=Sg,Pz.renderer.webgl.shaders.packColor=bg,Pz.reproj={},Pz.reproj.Image=Xy,Pz.reproj.Tile=yl,Pz.reproj.Triangulation=vl,Pz.reproj.calculateSourceExtentResolution=Ff,Pz.reproj.calculateSourceResolution=Rf,Pz.reproj.canvasPool=Nf,Pz.reproj.common={},Pz.reproj.common.ENABLE_RASTER_REPROJECTION=ll,Pz.reproj.common.ERROR_THRESHOLD=.5,Pz.reproj.render=Gf,Pz.resolutionconstraint={},Pz.resolutionconstraint.createMinMaxResolution=Yu,Pz.resolutionconstraint.createSnapToPower=Xu,Pz.resolutionconstraint.createSnapToResolutions=Bu,Pz.rotationconstraint={},Pz.rotationconstraint.createSnapToN=Wu,Pz.rotationconstraint.createSnapToZero=$u,Pz.rotationconstraint.disable=Zu,Pz.rotationconstraint.none=Vu,Pz.size={},Pz.size.buffer=oa,Pz.size.hasArea=sa,Pz.size.scale=ua,Pz.size.toSize=aa,Pz.source={},Pz.source.BingMaps=xp,Pz.source.BingMaps.quadKey=gp,Pz.source.CartoDB=jp,Pz.source.Cluster=Gp,Pz.source.DataTile=qp,Pz.source.GeoTIFF=_y,Pz.source.IIIF=Uy,Pz.source.Image=Jy,Pz.source.Image.ImageSourceEvent=$y,Pz.source.Image.defaultImageLoadFunction=Hy,Pz.source.ImageArcGISRest=nm,Pz.source.ImageCanvas=em,Pz.source.ImageMapGuide=um,Pz.source.ImageStatic=fm,Pz.source.ImageWMS=dm,Pz.source.OGCMapTile=Sm,Pz.source.OGCVectorTile=Cm,Pz.source.OSM=zm,Pz.source.OSM.ATTRIBUTION=Im,Pz.source.Raster=gw,Pz.source.Raster.Processor=hw,Pz.source.Raster.RasterSourceEvent=pw,Pz.source.Raster.newImageData=sw,Pz.source.Source=sp,Pz.source.Stamen=Ow,Pz.source.Tile=fp,Pz.source.Tile.TileSourceEvent=hp,Pz.source.TileArcGISRest=Tw,Pz.source.TileDebug=Cw,Pz.source.TileImage=mp,Pz.source.TileJSON=Nw,Pz.source.TileWMS=Rw,Pz.source.UTFGrid=Uw,Pz.source.UTFGrid.CustomTile=Gw,Pz.source.UrlTile=vp,Pz.source.Vector=Lp,Pz.source.Vector.VectorSourceEvent=zp,Pz.source.VectorTile=Em,Pz.source.VectorTile.defaultLoadFunction=Tm,Pz.source.WMTS=Xw,Pz.source.WMTS.optionsFromCapabilities=function(t,n){var i=b(t.Contents.Layer,(function(t,i,r){return t.Identifier==n.layer}));if(null===i)return null;var r,e=t.Contents.TileMatrixSet;(r=i.TileMatrixSetLink.length>1?_(i.TileMatrixSetLink,"projection"in n?function(t,i,r){var o=b(e,(function(n){return n.Identifier==t.TileMatrixSet})).SupportedCRS,s=yr(o),u=yr(n.projection);return s&&u?Sr(s,u):o==n.projection}:function(t,i,r){return t.TileMatrixSet==n.matrixSet}):0)<0&&(r=0);var o=i.TileMatrixSetLink[r].TileMatrixSet,s=i.TileMatrixSetLink[r].TileMatrixSetLimits,u=i.Format[0];"format"in n&&(u=n.format),(r=_(i.Style,(function(t,i,r){return"style"in n?t.Title==n.style:t.isDefault})))<0&&(r=0);var a=i.Style[r].Identifier,h={};"Dimension"in i&&i.Dimension.forEach((function(t,n,i){var r=t.Identifier,e=t.Default;void 0===e&&(e=t.Value[0]),h[r]=e}));var f,c=b(t.Contents.TileMatrixSet,(function(t,n,i){return t.Identifier==o})),l=c.SupportedCRS;if(l&&(f=yr(l)),"projection"in n){var v=yr(n.projection);v&&(f&&!Sr(v,f)||(f=v))}var p=!1,d="ne"==f.getAxisOrientation().substr(0,2),m=c.TileMatrix[0],w={MinTileCol:0,MinTileRow:0,MaxTileCol:m.MatrixWidth-1,MaxTileRow:m.MatrixHeight-1};if(s){w=s[s.length-1];var g=b(c.TileMatrix,(function(t){return t.Identifier===w.TileMatrix||c.Identifier+":"+t.Identifier===w.TileMatrix}));g&&(m=g)}var x=28e-5*m.ScaleDenominator/f.getMetersPerUnit(),M=d?[m.TopLeftCorner[1],m.TopLeftCorner[0]]:m.TopLeftCorner,S=m.TileWidth*x,O=m.TileHeight*x,j=c.BoundingBox;j&&d&&(j=[j[1],j[0],j[3],j[2]]);var E=[M[0]+S*w.MinTileCol,M[1]-O*(1+w.MaxTileRow),M[0]+S*(1+w.MaxTileCol),M[1]-O*w.MinTileRow];if(void 0!==j&&!xn(j,E)){var T=i.WGS84BoundingBox,P=yr("EPSG:4326").getExtent();if(E=j,T)p=T[0]===P[0]&&T[2]===P[2];else{var A=Tr(j,c.SupportedCRS,"EPSG:4326");p=A[0]-1e-10<=P[0]&&A[2]+1e-10>=P[2]}}var C=xv(c,E,s),k=[],I=n.requestEncoding;if(I=void 0!==I?I:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var N=t.OperationsMetadata.GetTile.DCP.HTTP.Get,z=0,L=N.length;z<L;++z)if(N[z].Constraint){var R=b(N[z].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===I&&(I=R[0]),"KVP"!==I)break;y(R,"KVP")&&k.push(N[z].href)}else N[z].href&&(I="KVP",k.push(N[z].href));return 0===k.length&&(I="REST",i.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(u=t.format,k.push(t.template))}))),{urls:k,layer:n.layer,matrixSet:o,format:u,projection:f,requestEncoding:I,tileGrid:C,style:a,dimensions:h,wrapX:p,crossOrigin:n.crossOrigin}},Pz.source.XYZ=Sp,Pz.source.Zoomify=jy,Pz.source.Zoomify.CustomTile=Sy,Pz.source.common={},Pz.source.common.DEFAULT_WMS_VERSION="1.3.0",Pz.source.ogcTileUtil={},Pz.source.ogcTileUtil.getMapTileUrlTemplate=wm,Pz.source.ogcTileUtil.getTileSetInfo=xm,Pz.source.ogcTileUtil.getVectorTileUrlTemplate=gm,Pz.source.sourcesFromTileGrid=function(t,n){var i=new Dh(32),r=t.getExtent();return function(e,o){i.expireCache(),r&&(e=Zn(r,e));var s=t.getZForResolution(o),u=[];return t.forEachTileCoord(e,s,(function(t){var r=t.toString();if(!i.containsKey(r)){var e=n(t);i.set(r,e)}u.push(i.get(r))})),u}},Pz.source.wms={},Pz.source.wms.DEFAULT_VERSION=cm,Pz.sphere={},Pz.sphere.DEFAULT_RADIUS=or,Pz.sphere.getArea=function t(n,i){var r=i||{},e=r.radius||or,o=r.projection||"EPSG:3857",s=n.getType();"GeometryCollection"!==s&&(n=n.clone().transform(o,"EPSG:4326"));var u,a,h,f,c,l,v=0;switch(s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(u=n.getCoordinates(),v=Math.abs(ar(u[0],e)),h=1,f=u.length;h<f;++h)v-=Math.abs(ar(u[h],e));break;case"MultiPolygon":for(h=0,f=(u=n.getCoordinates()).length;h<f;++h)for(a=u[h],v+=Math.abs(ar(a[0],e)),c=1,l=a.length;c<l;++c)v-=Math.abs(ar(a[c],e));break;case"GeometryCollection":var p=n.getGeometries();for(h=0,f=p.length;h<f;++h)v+=t(p[h],i);break;default:throw new Error("Unsupported geometry type: "+s)}return v},Pz.sphere.getDistance=sr,Pz.sphere.getLength=function t(n,i){var r=i||{},e=r.radius||or,o=r.projection||"EPSG:3857",s=n.getType();"GeometryCollection"!==s&&(n=n.clone().transform(o,"EPSG:4326"));var u,a,h,f,c,l,v=0;switch(s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":v=ur(u=n.getCoordinates(),e);break;case"MultiLineString":case"Polygon":for(h=0,f=(u=n.getCoordinates()).length;h<f;++h)v+=ur(u[h],e);break;case"MultiPolygon":for(h=0,f=(u=n.getCoordinates()).length;h<f;++h)for(c=0,l=(a=u[h]).length;c<l;++c)v+=ur(a[c],e);break;case"GeometryCollection":var p=n.getGeometries();for(h=0,f=p.length;h<f;++h)v+=t(p[h],i);break;default:throw new Error("Unsupported geometry type: "+s)}return v},Pz.sphere.offset=hr,Pz.string={},Pz.string.compareVersions=Xi,Pz.string.padNumber=Bi,Pz.structs={},Pz.structs.LRUCache=Dh,Pz.structs.LinkedList=Hv,Pz.structs.PriorityQueue=Au,Pz.structs.PriorityQueue.DROP=Pu,Pz.structs.RBush=tp,Pz.style={},Pz.style.Circle=Pv,Pz.style.Fill=Cv,Pz.style.Icon=Gv,Pz.style.IconImage=Lv,Pz.style.IconImage.get=zv,Pz.style.IconImageCache=Ko,Pz.style.IconImageCache.shared=Ho,Pz.style.Image=Mv,Pz.style.RegularShape=jv,Pz.style.Stroke=Uv,Pz.style.Style=Wv,Pz.style.Style.createDefaultStyle=Yv,Pz.style.Style.createEditingStyle=Zv,Pz.style.Style.toFunction=Bv,Pz.style.Text=Kv,Pz.style.expressions={},Pz.style.expressions.Operators=Vl,Pz.style.expressions.PALETTE_TEXTURE_ARRAY=lv,Pz.style.expressions.arrayToGlsl=Hl,Pz.style.expressions.colorToGlsl=Jl,Pz.style.expressions.expressionToGlsl=nv,Pz.style.expressions.getStringNumberEquivalent=Ql,Pz.style.expressions.getValueType=Wl,Pz.style.expressions.isTypeUnique=$l,Pz.style.expressions.numberToGlsl=Kl,Pz.style.expressions.stringToGlsl=tv,Pz.style.expressions.uniformNameForVariable=cv,Pz.tilecoord={},Pz.tilecoord.createOrUpdate=Uh,Pz.tilecoord.fromKey=Yh,Pz.tilecoord.getCacheKeyForTileKey=Xh,Pz.tilecoord.getKey=Bh;Pz.tilecoord.getKeyZXY=qh,Pz.tilecoord.hash=Zh,Pz.tilecoord.withinExtentAndZ=Vh,Pz.tilegrid={},Pz.tilegrid.TileGrid=qf,Pz.tilegrid.WMTS=bv,Pz.tilegrid.WMTS.createFromCapabilitiesMatrixSet=xv,Pz.tilegrid.common={},Pz.tilegrid.common.DEFAULT_MAX_ZOOM=42,Pz.tilegrid.common.DEFAULT_TILE_SIZE=Fu,Pz.tilegrid.createForExtent=Yf,Pz.tilegrid.createForProjection=Wf,Pz.tilegrid.createXYZ=Zf,Pz.tilegrid.extentFromProjection=$f,Pz.tilegrid.getForProjection=Bf,Pz.tilegrid.wrapX=Xf,Pz.tileurlfunction={},Pz.tileurlfunction.createFromTemplate=Kf,Pz.tileurlfunction.createFromTemplates=Hf,Pz.tileurlfunction.createFromTileUrlFunctions=Jf,Pz.tileurlfunction.expandUrl=tc,Pz.tileurlfunction.nullTileUrlFunction=Qf,Pz.transform={},Pz.transform.apply=tn,Pz.transform.compose=sn,Pz.transform.composeCssTransform=function(t,n,i,r,e,o,s){return hn(sn([1,0,0,1,0,0],t,n,i,r,e,o,s))},Pz.transform.create=$t,Pz.transform.determinant=an,Pz.transform.invert=function(t){return un(t,t)},Pz.transform.makeInverse=un,Pz.transform.makeScale=en,Pz.transform.multiply=Ht,Pz.transform.reset=Kt,Pz.transform.rotate=nn,Pz.transform.scale=rn,Pz.transform.set=Jt,Pz.transform.setFromArray=Qt,Pz.transform.toString=hn,Pz.transform.translate=on,Pz.uri={},Pz.uri.appendParams=nc,Pz.util={},Pz.util.VERSION=u,Pz.util.abstract=r,Pz.util.getUid=o,Pz.vec={},Pz.vec.mat4={},Pz.vec.mat4.create=Xc,Pz.vec.mat4.fromTransform=Yc,Pz.webgl={},Pz.webgl.ARRAY_BUFFER=rc,Pz.webgl.Buffer=Gc,Pz.webgl.Buffer.getArrayClassForType=Fc,Pz.webgl.DYNAMIC_DRAW=sc,Pz.webgl.ELEMENT_ARRAY_BUFFER=ec,Pz.webgl.FLOAT=uc,Pz.webgl.Helper=al,Pz.webgl.Helper.computeAttributesStride=sl,Pz.webgl.PaletteTexture=hl,Pz.webgl.PostProcessingPass=Bc,Pz.webgl.RenderTarget=cl,Pz.webgl.STATIC_DRAW=oc,Pz.webgl.STREAM_DRAW=35040,Pz.webgl.ShaderBuilder={},Pz.webgl.ShaderBuilder.ShaderBuilder=yv,Pz.webgl.ShaderBuilder.parseLiteralStyle=mv,Pz.webgl.TileTexture=_l,Pz.webgl.UNSIGNED_BYTE=5121,Pz.webgl.UNSIGNED_INT=5125,Pz.webgl.UNSIGNED_SHORT=5123,Pz.webgl.getContext=hc,Pz.webgl.getSupportedExtensions=function(){if(!ic){var t=hc(document.createElement("canvas"));t&&(ic=t.getSupportedExtensions())}return ic},Pz.xml={},Pz.xml.OBJECT_PROPERTY_NODE_FACTORY=Oc,Pz.xml.XML_SCHEMA_INSTANCE_URI=fc,Pz.xml.createElementNS=cc,Pz.xml.getAllTextContent=lc,Pz.xml.lg=vc,Pz.xml.getAttributeNS=dc,Pz.xml.getDocument=zc,Pz.xml.getXMLSerializer=Ic,Pz.xml.isDocument=pc,Pz.xml.makeArrayExtender=mc,Pz.xml.makeArrayPusher=wc,Pz.xml.makeArraySerializer=Mc,Pz.xml.makeChildAppender=_c,Pz.xml.makeObjectPropertyPusher=bc,Pz.xml.makeObjectPropertySetter=xc,Pz.xml.makeReplacer=gc,Pz.xml.makeSequence=jc,Pz.xml.makeSimpleNodeFactory=Sc,Pz.xml.makeStructureNS=Ec,Pz.xml.parse=yc,Pz.xml.parseNode=Tc,Pz.xml.pushParseAndPop=Pc,Pz.xml.pushSerializeAndPop=Cc,Pz.xml.registerDocument=function(t){Nc=t},Pz.xml.registerXMLSerializer=function(t){kc=t},Pz.xml.serialize=Ac;var Az=Pz},150:function(t,n,i){"use strict";i.d(n,{Ie:function(){return a},It:function(){return o},L:function(){return r},L5:function(){return f},P1:function(){return l},Qb:function(){return c},pd:function(){return h},sf:function(){return u}});const r={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},e={};for(const t in r)r.hasOwnProperty(t)&&(e[r[t]]=parseInt(t,10));const o=[e.BitsPerSample,e.ExtraSamples,e.SampleFormat,e.StripByteCounts,e.StripOffsets,e.StripRowCounts,e.TileByteCounts,e.TileOffsets,e.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},u={};for(const t in s)s.hasOwnProperty(t)&&(u[s[t]]=parseInt(t,10));const a={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},f={Version:0,AddCompression:1},c={None:0,Deflate:1},l={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},v={};for(const t in l)l.hasOwnProperty(t)&&(v[l[t]]=parseInt(t,10))}},i={};function r(t){var e=i[t];if(void 0!==e)return e.exports;var o=i[t]={exports:{}};return n[t].call(o.exports,o,o.exports,r),o.exports}r.m=n,r.d=function(t,n){for(var i in n)r.o(n,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(n,i){return r.f[i](t,n),n}),[]))},r.u=function(t){return t+".ol.js"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},t={},r.l=function(n,i,e,o){if(t[n])t[n].push(i);else{var s,u;if(void 0!==e)for(var a=document.getElementsByTagName("script"),h=0;h<a.length;h++){var f=a[h];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")=="ol:"+e){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack","ol:"+e),s.src=n),t[n]=[i];var c=function(i,r){s.onerror=s.onload=null,clearTimeout(l);var e=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),e&&e.forEach((function(t){return t(r)})),i)return i(r)},l=setTimeout(c.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=c.bind(null,s.onerror),s.onload=c.bind(null,s.onload),u&&document.head.appendChild(s)}},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t;r.g.importScripts&&(t=r.g.location+"");var n=r.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t}(),function(){var t={179:0};r.f.j=function(n,i){var e=r.o(t,n)?t[n]:void 0;if(0!==e)if(e)i.push(e[2]);else{var o=new Promise((function(i,r){e=t[n]=[i,r]}));i.push(e[2]=o);var s=r.p+r.u(n),u=new Error;r.l(s,(function(i){if(r.o(t,n)&&(0!==(e=t[n])&&(t[n]=void 0),e)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;u.message="Loading chunk "+n+" failed.\n("+o+": "+s+")",u.name="ChunkLoadError",u.type=o,u.request=s,e[1](u)}}),"chunk-"+n,n)}};var n=function(n,i){var e,o,s=i[0],u=i[1],a=i[2],h=0;if(s.some((function(n){return 0!==t[n]}))){for(e in u)r.o(u,e)&&(r.m[e]=u[e]);if(a)a(r)}for(n&&n(i);h<s.length;h++)o=s[h],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0},i=self.webpackChunkol=self.webpackChunkol||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}(),r(760);var e=r(341);return e=e.default}()}));
//# sourceMappingURL=ol.js.map