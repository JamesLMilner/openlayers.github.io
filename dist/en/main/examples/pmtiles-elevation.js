"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3270],{6199:function(t,e,n){var a=n(8993),r=n(1055),o=n(463),c=n(824);(0,n(1625).eL)();const i=new pmtiles.PMTiles("https://pub-9288c68512ed46eca46ddcade307709b.r2.dev/protomaps-sample-datasets/terrarium_z9.pmtiles");const s=256,u=document.createElement("canvas");u.width=s,u.height=s;const d=u.getContext("2d",{willReadFrequently:!0});function l(t,e){return["-",["+",["*",65536,["band",1,t,e]],["*",256,["band",2,t,e]],["band",3,t,e]],32768]}const m=["*",2,["resolution"]],v=["*",["var","vert"],l(-1,0)],b=["/",["-",["*",["var","vert"],l(1,0)],v],m],p=["*",["var","vert"],l(0,-1)],w=["/",["-",["*",["var","vert"],l(0,1)],p],m],h=["atan",["^",["+",["^",b,2],["^",w,2]],.5]],f=["clamp",["atan",["-",0,b],w],-Math.PI,Math.PI],g=["*",Math.PI/180,["var","sunEl"]],E=["+",["*",["sin",g],["cos",h]],["*",["*",["cos",g],["sin",h]],["cos",["-",["*",Math.PI/180,["var","sunAz"]],f]]]],y={},I=new o.Z({source:new a.Z({loader:async function(t,e,n){const a=await i.getZxy(t,e,n),r=new Blob([a.data]),o=URL.createObjectURL(r),c=await function(t){return new Promise(((e,n)=>{const a=new Image;a.addEventListener("load",(()=>e(a))),a.addEventListener("error",(()=>n(new Error("load failed")))),a.src=t}))}(o);return d.drawImage(c,0,0),URL.revokeObjectURL(o),d.getImageData(0,0,s,s).data},wrapX:!0,maxZoom:9,attributions:"<a href='https://github.com/tilezen/joerd/blob/master/docs/attribution.md#attribution'>Tilezen Jörð</a>"}),style:{variables:y,color:["array",E,E,E,1]}});["vert","sunEl","sunAz"].forEach((function(t){const e=document.getElementById(t),n=document.getElementById(t+"Out");function a(){n.innerText=e.value,y[t]=Number(e.value)}a(),e.addEventListener("input",(function(){a(),I.updateStyleVariables(y)}))}));const x=new r.Z({target:"map",layers:[I],view:new c.ZP({center:[0,0],zoom:1})});const L=document.getElementById("elevationOut"),M=document.getElementById("locationOut");x.on(["pointermove","click"],(function(t){const e=I.getData(t.pixel);e&&(L.innerText=function(t){return 256*t[0]+t[1]+t[2]/256-32768}(e).toLocaleString()+" m",M.innerText=function([t,e]){const n=e<0?"S":"N",a=t<0?"W":"E";return`${Math.abs(e).toFixed(1)}° ${n}, ${Math.abs(t).toFixed(1)}° ${a}`}(t.coordinate))}))}},function(t){var e;e=6199,t(t.s=e)}]);
//# sourceMappingURL=pmtiles-elevation.js.map