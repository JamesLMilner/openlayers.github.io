"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2799],{2091:function(t,e,s){var i=s(92486),a=s(58322),n=s(22222),r=s(41507),h=s(63312);function o(t){return parseFloat(t)}function l(t){return function(t){return(0,h.FH)(t,5)}(t).toString()}function c(t,e){return!isNaN(t)&&t!==o(l(e))}class _ extends a.ZP{constructor(t){let e;super(),e=!0===(t=Object.assign({animate:!0,params:["x","y","z","r","l"],replace:!1,prefix:""},t||{})).animate?{duration:250}:t.animate?t.animate:null,this.animationOptions_=e,this.params_=t.params.reduce(((t,e)=>(t[e]=!0,t)),{}),this.replace_=t.replace,this.prefix_=t.prefix,this.listenerKeys_=[],this.initial_=!0,this.updateState_=this.updateState_.bind(this),this.trackedCallbacks_={},this.trackedValues_={}}getParamName_(t){return this.prefix_?this.prefix_+t:t}get_(t,e){return t.get(this.getParamName_(e))}set_(t,e,s){e in this.params_&&t.set(this.getParamName_(e),s)}delete_(t,e){e in this.params_&&t.delete(this.getParamName_(e))}setMap(t){const e=this.getMap();super.setMap(t),t!==e&&(e&&this.unregisterListeners_(e),t&&(this.initial_=!0,this.updateState_(),this.registerListeners_(t)))}registerListeners_(t){this.listenerKeys_.push((0,r.oL)(t,n.Z.MOVEEND,this.updateUrl_,this),(0,r.oL)(t.getLayerGroup(),i.Z.CHANGE,this.updateUrl_,this),(0,r.oL)(t,"change:layergroup",this.handleChangeLayerGroup_,this)),this.replace_||addEventListener("popstate",this.updateState_)}unregisterListeners_(t){for(let t=0,e=this.listenerKeys_.length;t<e;++t)(0,r.bN)(this.listenerKeys_[t]);this.listenerKeys_.length=0,this.replace_||removeEventListener("popstate",this.updateState_);const e=new URL(window.location.href),s=e.searchParams;this.delete_(s,"x"),this.delete_(s,"y"),this.delete_(s,"z"),this.delete_(s,"r"),this.delete_(s,"l"),window.history.replaceState(null,"",e)}handleChangeLayerGroup_(){const t=this.getMap();t&&(this.unregisterListeners_(t),this.registerListeners_(t),this.initial_=!0,this.updateUrl_())}updateState_(){const t=new URL(window.location.href).searchParams;for(const e in this.trackedCallbacks_){const s=t.get(e);e in this.trackedCallbacks_&&s!==this.trackedValues_[e]&&(this.trackedValues_[e]=s,this.trackedCallbacks_[e](s))}const e=this.getMap();if(!e)return;const s=e.getView();if(!s)return;let i=!1;const a={},n=o(this.get_(t,"z"));"z"in this.params_&&c(n,s.getZoom())&&(i=!0,a.zoom=n);const r=o(this.get_(t,"r"));"r"in this.params_&&c(r,s.getRotation())&&(i=!0,a.rotation=r);const h=[o(this.get_(t,"x")),o(this.get_(t,"y"))];var l,_;("x"in this.params_||"y"in this.params_)&&(l=h,_=s.getCenter(),c(l[0],_[0])||c(l[1],_[1]))&&(i=!0,a.center=h),i&&(!this.initial_&&this.animationOptions_?s.animate(Object.assign(a,this.animationOptions_)):(a.center&&s.setCenter(a.center),"zoom"in a&&s.setZoom(a.zoom),"rotation"in a&&s.setRotation(a.rotation)));const p=e.getAllLayers(),u=this.get_(t,"l");if("l"in this.params_&&u&&u.length===p.length)for(let t=0,e=p.length;t<e;++t){const e=parseInt(u[t]);if(!isNaN(e)){const s=Boolean(e),i=p[t];i.getVisible()!==s&&i.setVisible(s)}}}track(t,e){this.trackedCallbacks_[t]=e;const s=new URL(window.location.href).searchParams.get(t);return this.trackedValues_[t]=s,s}update(t,e){const s=new URL(window.location.href),i=s.searchParams;null===e?i.delete(t):i.set(t,e),t in this.trackedValues_&&(this.trackedValues_[t]=e),this.updateHistory_(s)}updateUrl_(){const t=this.getMap();if(!t)return;const e=t.getView();if(!e)return;const s=e.getCenter(),i=e.getZoom(),a=e.getRotation(),n=t.getAllLayers(),r=new Array(n.length);for(let t=0,e=n.length;t<e;++t)r[t]=n[t].getVisible()?"1":"0";const h=new URL(window.location.href),o=h.searchParams;this.set_(o,"x",l(s[0])),this.set_(o,"y",l(s[1])),this.set_(o,"z",l(i)),this.set_(o,"r",l(a)),this.set_(o,"l",r.join("")),this.updateHistory_(h),this.initial_=!1}updateHistory_(t){t.href!==window.location.href&&(this.initial_||this.replace_?window.history.replaceState(history.state,"",t):window.history.pushState(null,"",t))}}var p=_,u=s(1055),d=s(55117),g=s(72893),m=s(40824);const w=new u.Z({layers:[new g.Z({source:new d.Z})],target:"map",view:new m.ZP({center:[0,0],zoom:2})}),f=new p,k=document.getElementById("example-checkbox");k.addEventListener("change",(function(){k.checked?f.update("example","checked"):f.update("example",null)}));const y=f.track("example",(t=>{k.checked="checked"===t}));k.checked="checked"===y,w.addInteraction(f)}},function(t){var e;e=2091,t(t.s=e)}]);
//# sourceMappingURL=link.js.map