"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3112],{25512:function(e,t,o){var n=o(68444),c=o(86728),r=o(65732),i=o(1999),s=o(51144),a=o(76252),f=o(89032),u=o(75424),m=o(67696),g=o(38608),l=o(84868),y=o(38788),w=o(96480),d=o(17256),G=o(80372),p=o(2064),E=o(77760),C=o(88470);const h=new G.c({source:new w.c}),P=new d.c,S=new r.cp({fill:new i.c({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.c({color:"#33cc33",width:2}),image:new a.c({radius:7,fill:new i.c({color:"#ffcc33"})})}),F=new r.cp({geometry:function(e){return e.get("modifyGeometry")||e.getGeometry()},fill:new i.c({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.c({color:"#ff3333",width:2}),image:new a.c({radius:7,fill:new i.c({color:"rgba(0, 0, 0, 0)"})})}),v=new p.c({source:P,style:function(e){return"GeometryCollection"===e.getGeometry().getType()?F:S}}),A=new n.c({layers:[h,v],target:"map",view:new c.cp({center:[-11e6,66e5],zoom:3})}),k=new f.c({source:P}).getOverlay().getStyleFunction(),I=new f.c({source:P,style:function(e){return e.get("features").forEach((function(t){const o=t.get("modifyGeometry");if(o){const n=e.getGeometry().getCoordinates(),c=t.getGeometry().getGeometries(),r=c[0].getCoordinates()[0],i=c[1].getCoordinates(),s=A.getView().getProjection();let a,f,u;n[0]===i[0]&&n[1]===i[1]?(a=(0,C.AF)(r[0],s,"EPSG:4326"),f=(0,C.AF)(r[(r.length-1)/2],s,"EPSG:4326"),u=(0,E.c$)(a,f)/2):(a=(0,C.AF)(i,s,"EPSG:4326"),f=(0,C.AF)(n,s,"EPSG:4326"),u=(0,E.c$)(a,f));const m=(0,l.e8)((0,C.AF)(i,s,"EPSG:4326"),u,128);m.transform("EPSG:4326",s),c[0].setCoordinates(m.getCoordinates()),o.setGeometries(c)}})),k(e)}});let b,$;I.on("modifystart",(function(e){e.features.forEach((function(e){const t=e.getGeometry();"GeometryCollection"===t.getType()&&e.set("modifyGeometry",t.clone(),!0)}))})),I.on("modifyend",(function(e){e.features.forEach((function(e){const t=e.get("modifyGeometry");t&&(e.setGeometry(t),e.unset("modifyGeometry",!0))}))})),A.addInteraction(I);const T=document.getElementById("type");function j(){let e,t=T.value;"Geodesic"===t&&(t="Circle",e=function(e,t,o){t||(t=new g.c([new l.cp([]),new y.c(e[0])]));const n=t.getGeometries(),c=(0,C.AF)(e[0],o,"EPSG:4326"),r=(0,C.AF)(e[1],o,"EPSG:4326"),i=(0,E.c$)(c,r),s=(0,l.e8)(c,i,128);return s.transform("EPSG:4326",o),n[0].setCoordinates(s.getCoordinates()),t.setGeometries(n),t}),b=new u.cp({source:P,type:t,geometryFunction:e}),A.addInteraction(b),$=new m.c({source:P}),A.addInteraction($)}T.onchange=function(){A.removeInteraction(b),A.removeInteraction($),j()},j()}},function(e){var t;t=25512,e(e.s=t)}]);
//# sourceMappingURL=draw-and-modify-geodesic.js.map