"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[424],{69316:function(e,t,r){var o=r(19212),n=r(68444),c=r(38788),a=r(83880),i=r(74940);function s(e,t,r,o,n,c){void 0!==n?c=void 0!==c?c:0:(n=[],c=0);let a=t;for(;a<r;){const t=e[a++];n[c++]=e[a++],n[c++]=t;for(let t=2;t<o;++t)n[c++]=e[a++]}return n.length=c,n}var u=r(88470),l=r(16304),m=r(76776),f=r(34808);class g extends i.c{constructor(e){super(),e=e||{},this.dataProjection=(0,u._M)("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t);return new o.c(r)}readFeaturesFromText(e,t){return[this.readFeatureFromText(e,t)]}readGeometryFromText(e,t){const r=(0,l.uK)(this.geometryLayout_),o=function(e,t,r){let o;r=r||1e5;const n=new Array(t);for(o=0;o<t;++o)n[o]=0;const c=function(e,t){t=t||1e5;const r=function(e){const t=function(e){const t=[];let r=0,o=0;for(let n=0,c=e.length;n<c;++n){const c=e.charCodeAt(n)-63;r|=(31&c)<<o,c<32?(t.push(r),r=0,o=0):o+=5}return t}(e);for(let e=0,r=t.length;e<r;++e){const r=t[e];t[e]=1&r?~(r>>1):r>>1}return t}(e);for(let e=0,o=r.length;e<o;++e)r[e]/=t;return r}(e,r);for(let e=0,r=c.length;e<r;)for(o=0;o<t;++o,++e)n[o]+=c[e],c[e]=n[o];return c}(e,r,this.factor_);s(o,0,o.length,r,o);const n=(0,m.m8)(o,0,o.length,r),c=new a.c(n,this.geometryLayout_);return(0,f.GA)(c,!1,this.adaptOptions(t))}writeFeatureText(e,t){const r=e.getGeometry();if(r)return this.writeGeometryText(r,t);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,t){return this.writeFeatureText(e[0],t)}writeGeometryText(e,t){const r=(e=(0,f.GA)(e,!0,this.adaptOptions(t))).getFlatCoordinates(),o=e.getStride();return s(r,0,r.length,o,r),function(e,t,r){let o;r=r||1e5;const n=new Array(t);for(o=0;o<t;++o)n[o]=0;for(let r=0,c=e.length;r<c;)for(o=0;o<t;++o,++r){const t=e[r],c=t-n[o];n[o]=t,e[r]=c}return function(e,t){t=t||1e5;for(let r=0,o=e.length;r<o;++r)e[r]=Math.round(e[r]*t);return function(e){for(let t=0,r=e.length;t<r;++t){const r=e[t];e[t]=r<0?~(r<<1):r<<1}return function(e){let t="";for(let r=0,o=e.length;r<o;++r)t+=h(e[r]);return t}(e)}(e)}(e,r)}(r,o,this.factor_)}}function h(e){let t,r="";for(;e>=32;)t=63+(32|31&e),r+=String.fromCharCode(t),e>>=5;return t=e+63,r+=String.fromCharCode(t),r}var y=g,w=r(17256),d=r(86728),p=r(70596),x=r(65732),G=r(51144),k=r(48512),C=r(76252),F=r(1999),T=r(80372),S=r(2064),_=r(77491);const v=new n.c({target:document.getElementById("map"),view:new d.cp({center:[-5639523.95,-3501274.52],zoom:10,minZoom:2,maxZoom:19}),layers:[new T.c({source:new p.c({attributions:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=get_your_own_D6rA4zTHduk6KOKTXzGB",tileSize:512})})]});fetch("data/polyline/route.json").then((function(e){e.json().then((function(e){const t=e.routes[0].geometry,r=new y({factor:1e6}).readGeometry(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),n=new o.c({type:"route",geometry:r}),a=new o.c({type:"icon",geometry:new c.c(r.getFirstCoordinate())}),i=new o.c({type:"icon",geometry:new c.c(r.getLastCoordinate())}),s=a.getGeometry().clone(),u=new o.c({type:"geoMarker",geometry:s}),l={route:new x.cp({stroke:new G.c({width:6,color:[237,212,0,.8]})}),icon:new x.cp({image:new k.c({anchor:[.5,1],src:"data/icon.png"})}),geoMarker:new x.cp({image:new C.c({radius:7,fill:new F.c({color:"black"}),stroke:new G.c({color:"white",width:2})})})},m=new S.c({source:new w.c({features:[n,u,a,i]}),style:function(e){return l[e.get("type")]}});v.addLayer(m);const f=document.getElementById("speed"),g=document.getElementById("start-animation");let h,d=!1,p=0;function T(e){const t=Number(f.value),o=e.frameState.time;p=(p+t*(o-h)/1e6)%2,h=o;const n=r.getCoordinateAt(p>1?2-p:p);s.setCoordinates(n);const c=(0,_.wX)(e);c.setStyle(l.geoMarker),c.drawGeometry(s),v.render()}g.addEventListener("click",(function(){d?(d=!1,g.textContent="Start Animation",u.setGeometry(s),m.un("postrender",T)):(d=!0,h=Date.now(),g.textContent="Stop Animation",m.on("postrender",T),u.setGeometry(null))}))}))}))}},function(e){var t;t=69316,e(e.s=t)}]);
//# sourceMappingURL=feature-move-animation.js.map