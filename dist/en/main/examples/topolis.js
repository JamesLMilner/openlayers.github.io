"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8096],{58376:function(e,t,n){var o=n(19212),c=n(68444),r=n(66596),d=n(86728),i=n(65732),a=n(76252),w=n(1999),s=n(51144),g=n(12748),l=n(75424),u=n(67696),f=n(83880),y=n(38788),h=n(84868),m=n(96480),p=n(17256),k=n(80372),v=n(2064);const I=new k.c({source:new m.c}),F=new p.c({wrapX:!1}),b=new v.c({source:F,style:function(e){return[new i.cp({image:new a.c({radius:8,fill:new w.c({color:"rgba(255, 0, 0, 0.2)"}),stroke:new s.c({color:"red",width:1})}),text:new g.c({text:e.get("node").id.toString(),fill:new w.c({color:"red"}),stroke:new s.c({color:"white",width:3})})})]}}),B=new p.c({wrapX:!1}),x=new v.c({source:B,style:function(e){return[new i.cp({stroke:new s.c({color:"blue",width:1}),text:new g.c({text:e.get("edge").id.toString(),fill:new w.c({color:"blue"}),stroke:new s.c({color:"white",width:2})})})]}}),E=new p.c({wrapX:!1}),N=new v.c({source:E,style:function(e){return[new i.cp({stroke:new s.c({color:"black",width:1}),fill:new w.c({color:"rgba(0, 255, 0, 0.2)"}),text:new g.c({font:"bold 12px sans-serif",text:e.get("face").id.toString(),fill:new w.c({color:"green"}),stroke:new s.c({color:"white",width:2})})})]}}),S=new c.c({layers:[I,N,x,b],target:"map",view:new d.cp({center:[-11e6,46e5],zoom:16})}),P=topolis.createTopology();function C(e,t){const n=e.getFeatureById(t.id);e.removeFeature(n)}function G(e,t){let n;const o=e.getEdgeByPoint(t,5)[0];return n=o?e.modEdgeSplit(o,t):e.addIsoNode(t),n}P.on("addnode",(function(e){const t=new o.c({geometry:new y.c(e.coordinate),node:e});t.setId(e.id),F.addFeature(t)})),P.on("removenode",(function(e){C(F,e)})),P.on("addedge",(function(e){const t=new o.c({geometry:new f.c(e.coordinates),edge:e});t.setId(e.id),B.addFeature(t)})),P.on("modedge",(function(e){B.getFeatureById(e.id).setGeometry(new f.c(e.coordinates))})),P.on("removeedge",(function(e){C(B,e)})),P.on("addface",(function(e){const t=P.getFaceGeometry(e),n=new o.c({geometry:new h.cp(t),face:e});n.setId(e.id),E.addFeature(n)})),P.on("removeface",(function(e){C(E,e)}));const X=new l.cp({type:"LineString"});X.on("drawend",(function(e){const t=e.feature.getGeometry().getCoordinates(),n=t[0],o=t[t.length-1];let c,r;try{c=P.getNodeByPoint(n),r=P.getNodeByPoint(o);const e=P.getEdgeByPoint(n,5),d=P.getEdgeByPoint(o,5),i=P.getEdgesByLine(t);if(1===i.length&&!c&&!r&&0===e.length&&0===d.length)return P.remEdgeNewFace(i[0]),c=i[0].start,c.face&&P.removeIsoNode(c),r=i[0].end,void(r.face&&P.removeIsoNode(r));c||(c=G(P,n),t[0]=c.coordinate),r||(r=G(P,o),t[t.length-1]=r.coordinate),P.addEdgeNewFaces(c,r,t)}catch(e){toastr.warning(e.toString())}})),S.addInteraction(X);const L=new u.c({source:B});S.addInteraction(L),S.addControl(new r.c)}},function(e){var t;t=58376,e(e.s=t)}]);
//# sourceMappingURL=topolis.js.map