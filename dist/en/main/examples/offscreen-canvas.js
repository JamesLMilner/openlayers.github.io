(self.webpackChunk=self.webpackChunk||[]).push([[8519],{32156:function(e,t){function n(e,t){var n=[],a=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+a.slice(0,n.indexOf(t)).join(".")+"]"}),function(r,i){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?a.splice(s,1/0,r):a.push(r),~n.indexOf(i)&&(i=t.call(this,r,i))}else n.push(i);return null==e?i:e.call(this,r,i)}}(e.exports=function(e,t,a,r){return JSON.stringify(e,n(t,r),a)}).getSerialize=n},6380:function(e,t,n){"use strict";var a=n(15720),r=n(68444),i=n(44736),s=n(86728);var o=n(32156),c=n(4416),l=n(59756),u=n(75888);const d=new function(){return new Worker(n.p+"offscreen-canvas.worker.worker.js")};let f,p,g,h,m,w;function y(){if(m){const e=w.viewState,t=m.viewState,n=e.center,a=e.resolution,r=e.rotation,i=t.center,s=t.resolution,o=t.rotation,c=(0,l.Su)();r||(0,l.Jn)(c,(i[0]-n[0])/a,(n[1]-i[1])/a,s/a,s/a,r-o,0,0),p.style.transform=(0,l.MR)(c)}}const v=new r.c({layers:[new a.c({render:function(e){return f||(f=document.createElement("div"),f.style.position="absolute",f.style.width="100%",f.style.height="100%",p=document.createElement("div"),p.style.position="absolute",p.style.width="100%",p.style.height="100%",f.appendChild(p),g=document.createElement("canvas"),g.style.position="absolute",g.style.left="0",g.style.transformOrigin="top left",p.appendChild(g)),w=e,y(),h?e.animate=!0:(h=!0,d.postMessage({action:"render",frameState:JSON.parse(o(e))})),f},source:new i.c({attributions:['<a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a>','<a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap contributors</a>']})})],target:"map",view:new s.cp({resolutions:(0,u.Qr)({tileSize:512}).getResolutions(),center:[0,0],zoom:2})});v.addControl(new c.c),v.on("pointermove",(function(e){if(e.dragging)return;const t=v.getEventPixel(e.originalEvent);d.postMessage({action:"requestFeatures",pixel:t})})),d.addEventListener("message",(e=>{if("loadImage"===e.data.action){const t=new Image;t.crossOrigin="anonymous",t.addEventListener("load",(function(){createImageBitmap(t,0,0,t.width,t.height).then((t=>{d.postMessage({action:"imageLoaded",image:t,src:e.data.src},[t])}))})),t.src=e.data.src}else"getFeatures"===e.data.action?function(e){if(0==e.length)return S.innerText="",void(S.style.opacity=0);const t=e.map((e=>Object.keys(e).filter((e=>!e.includes(":"))).reduce(((t,n)=>(t[n]=e[n],t)),{})));S.innerText=JSON.stringify(t,null,2),S.style.opacity=1}(e.data.features):"requestRender"===e.data.action?v.render():g&&"rendered"===e.data.action&&(requestAnimationFrame((function(){const t=e.data.imageData;g.width=t.width,g.height=t.height,g.getContext("2d").drawImage(t,0,0),g.style.transform=e.data.transform,m=e.data.frameState,y()})),h=!1)}));const S=document.getElementById("info")}},function(e){var t;t=6380,e(e.s=t)}]);
//# sourceMappingURL=offscreen-canvas.js.map