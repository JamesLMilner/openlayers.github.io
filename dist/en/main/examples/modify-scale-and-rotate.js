"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5572],{47748:function(e,t,n){var o=n(68444),c=n(86728),r=n(65732),i=n(1999),s=n(51144),a=n(76252),f=n(89032),u=n(57692),m=n(75424),y=n(38788),g=n(63188),d=n(96480),l=n(17256),w=n(80372),h=n(2064),p=n(48011),G=n(88024);const C=new w.c({source:new d.c}),E=new l.c,M=new r.cp({geometry:function(e){const t=e.get("modifyGeometry");return t?t.geometry:e.getGeometry()},fill:new i.c({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.c({color:"#ffcc33",width:2}),image:new a.c({radius:7,fill:new i.c({color:"#ffcc33"})})});function k(e){let t,n,o;const c=e.getType();if("Polygon"===c){let o=0,c=0,r=0;n=e.getCoordinates()[0].slice(1),n.forEach((function(e){o+=e[0],c+=e[1],r++})),t=[o/r,c/r]}else"LineString"===c?(t=e.getCoordinateAt(.5),n=e.getCoordinates()):t=(0,p.Ks)(e.getExtent());let r;return n?(r=n.map((function(e){const n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o})),o=Math.sqrt(Math.max.apply(Math,r))/3):o=Math.max((0,p.K6)(e.getExtent()),(0,p.YF)(e.getExtent()))/3,{center:t,coordinates:n,minRadius:o,sqDistances:r}}const v=new h.c({source:E,style:function(e){const t=[M],n=e.get("modifyGeometry"),o=k(n?n.geometry:e.getGeometry()),c=o.center;if(c){t.push(new r.cp({geometry:new y.c(c),image:new a.c({radius:4,fill:new i.c({color:"#ff3333"})})}));const e=o.coordinates;if(e){const n=o.minRadius,c=o.sqDistances,s=n*n,f=e.filter((function(e,t){return c[t]>s}));t.push(new r.cp({geometry:new g.c(f),image:new a.c({radius:4,fill:new i.c({color:"#33cc33"})})}))}}return t}}),I=new o.c({layers:[C,v],target:"map",view:new c.cp({center:[-11e6,46e5],zoom:4})}),x=new f.c({source:E}).getOverlay().getStyleFunction(),q=new f.c({source:E,condition:function(e){return(0,G.cV)(e)&&!(0,G.ID)(e)},deleteCondition:G.kj,insertVertexCondition:G.kj,style:function(e){return e.get("features").forEach((function(t){const n=t.get("modifyGeometry");if(n){const t=e.getGeometry().getCoordinates();let o=n.point;if(!o){o=t,n.point=o,n.geometry0=n.geometry;const e=k(n.geometry0);n.center=e.center,n.minRadius=e.minRadius}const c=n.center,r=n.minRadius;let i,s;i=o[0]-c[0],s=o[1]-c[1];const a=Math.sqrt(i*i+s*s);if(a>r){const e=Math.atan2(s,i);i=t[0]-c[0],s=t[1]-c[1];const o=Math.sqrt(i*i+s*s);if(o>0){const t=Math.atan2(s,i),r=n.geometry0.clone();r.scale(o/a,void 0,c),r.rotate(t-e,c),n.geometry=r}}}})),x(e)}});let R;q.on("modifystart",(function(e){e.features.forEach((function(e){e.set("modifyGeometry",{geometry:e.getGeometry().clone()},!0)}))})),q.on("modifyend",(function(e){e.features.forEach((function(e){const t=e.get("modifyGeometry");t&&(e.setGeometry(t.geometry),e.unset("modifyGeometry",!0))}))})),I.addInteraction(q),I.addInteraction(new u.c({condition:function(e){return(0,G.cV)(e)&&(0,G.ID)(e)},layers:[v]}));const D=document.getElementById("type");function b(){R=new m.cp({source:E,type:D.value}),I.addInteraction(R)}D.onchange=function(){I.removeInteraction(R),b()},b()}},function(e){var t;t=47748,e(e.s=t)}]);
//# sourceMappingURL=modify-scale-and-rotate.js.map