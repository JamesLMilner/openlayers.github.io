"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4070],{66480:function(e,n,t){var c=t(68444),r=t(86728),o=t(16972),i=t(57094),a=t(8e4),s=t(90011),u=t(37080),f=t(27472),l=t(404),d=t(96480),g=t(17256),m=t(80372),p=t(2064);const w=new JSZip;function h(e){let n;w.load(e);const t=w.file(/\.kml$/i)[0];return t&&(n=t.asText()),n}function k(e){const n=window.location.href.lastIndexOf("/");if(-1!==n){const t=w.file(e.slice(n+1));if(t)return URL.createObjectURL(new Blob([t.asArrayBuffer()]))}return e}class b extends a.cp{constructor(e){const n=e||{};n.iconUrlFunction=k,super(n)}getType(){return"arraybuffer"}readFeature(e,n){const t=h(e);return super.readFeature(t,n)}readFeatures(e,n){const t=h(e);return super.readFeatures(t,n)}}const y=new o.c({formatConstructors:[b,s.c,u.c,f.c,a.cp,l.c]}),E=new c.c({interactions:(0,i.Q)().extend([y]),layers:[new m.c({source:new d.c})],target:"map",view:new r.cp({center:[0,0],zoom:2})});y.on("addfeatures",(function(e){const n=new g.c({features:e.features});E.addLayer(new p.c({source:n})),E.getView().fit(n.getExtent())}));const v=function(e){const n=[];if(E.forEachFeatureAtPixel(e,(function(e){n.push(e)})),n.length>0){const e=[];let t,c;for(t=0,c=n.length;t<c;++t){const c=n[t].get("description")||n[t].get("name")||n[t].get("_name")||n[t].get("layer");c&&e.push(c)}document.getElementById("info").innerHTML=e.join("<br/>")||"&nbsp"}else document.getElementById("info").innerHTML="&nbsp;"};E.on("pointermove",(function(e){if(e.dragging)return;const n=E.getEventPixel(e.originalEvent);v(n)})),E.on("click",(function(e){v(e.pixel)}));const x=document.getElementById("download");document.getElementById("download-kmz").addEventListener("click",(function(){var e;e="iceland.kmz",fetch("data/kmz/iceland.kmz").then((function(e){return e.blob()})).then((function(n){x.href=URL.createObjectURL(n),x.download=e,x.click()}))}))}},function(e){var n;n=66480,e(e.s=n)}]);
//# sourceMappingURL=drag-and-drop-custom-kmz.js.map